"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseVerbosityFromEnv = parseVerbosityFromEnv;
const logger_js_1 = require("./logger.js");
/**
 * Parse verbosity level from environment variables
 * Checks VIBETUNNEL_LOG_LEVEL first, then falls back to VIBETUNNEL_DEBUG for backward compatibility
 * @returns The parsed verbosity level or undefined if not set
 */
function parseVerbosityFromEnv() {
    // Check VIBETUNNEL_LOG_LEVEL first
    if (process.env.VIBETUNNEL_LOG_LEVEL) {
        const parsed = (0, logger_js_1.parseVerbosityLevel)(process.env.VIBETUNNEL_LOG_LEVEL);
        if (parsed !== undefined) {
            return parsed;
        }
        // Warn about invalid value
        console.warn(`Invalid VIBETUNNEL_LOG_LEVEL: ${process.env.VIBETUNNEL_LOG_LEVEL}`);
        console.warn('Valid levels: silent, error, warn, info, verbose, debug');
    }
    // Check legacy VIBETUNNEL_DEBUG for backward compatibility
    if (process.env.VIBETUNNEL_DEBUG === '1' || process.env.VIBETUNNEL_DEBUG === 'true') {
        return logger_js_1.VerbosityLevel.DEBUG;
    }
    return undefined;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVyYm9zaXR5LXBhcnNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvdXRpbHMvdmVyYm9zaXR5LXBhcnNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLHNEQWtCQztBQXpCRCwyQ0FBa0U7QUFFbEU7Ozs7R0FJRztBQUNILFNBQWdCLHFCQUFxQjtJQUNuQyxtQ0FBbUM7SUFDbkMsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDckMsTUFBTSxNQUFNLEdBQUcsSUFBQSwrQkFBbUIsRUFBQyxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDckUsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDekIsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUNELDJCQUEyQjtRQUMzQixPQUFPLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQztRQUNsRixPQUFPLENBQUMsSUFBSSxDQUFDLHlEQUF5RCxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUVELDJEQUEyRDtJQUMzRCxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEtBQUssR0FBRyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEtBQUssTUFBTSxFQUFFLENBQUM7UUFDcEYsT0FBTywwQkFBYyxDQUFDLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlVmVyYm9zaXR5TGV2ZWwsIFZlcmJvc2l0eUxldmVsIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuXG4vKipcbiAqIFBhcnNlIHZlcmJvc2l0eSBsZXZlbCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICogQ2hlY2tzIFZJQkVUVU5ORUxfTE9HX0xFVkVMIGZpcnN0LCB0aGVuIGZhbGxzIGJhY2sgdG8gVklCRVRVTk5FTF9ERUJVRyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2ZXJib3NpdHkgbGV2ZWwgb3IgdW5kZWZpbmVkIGlmIG5vdCBzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVmVyYm9zaXR5RnJvbUVudigpOiBWZXJib3NpdHlMZXZlbCB8IHVuZGVmaW5lZCB7XG4gIC8vIENoZWNrIFZJQkVUVU5ORUxfTE9HX0xFVkVMIGZpcnN0XG4gIGlmIChwcm9jZXNzLmVudi5WSUJFVFVOTkVMX0xPR19MRVZFTCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlVmVyYm9zaXR5TGV2ZWwocHJvY2Vzcy5lbnYuVklCRVRVTk5FTF9MT0dfTEVWRUwpO1xuICAgIGlmIChwYXJzZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gICAgLy8gV2FybiBhYm91dCBpbnZhbGlkIHZhbHVlXG4gICAgY29uc29sZS53YXJuKGBJbnZhbGlkIFZJQkVUVU5ORUxfTE9HX0xFVkVMOiAke3Byb2Nlc3MuZW52LlZJQkVUVU5ORUxfTE9HX0xFVkVMfWApO1xuICAgIGNvbnNvbGUud2FybignVmFsaWQgbGV2ZWxzOiBzaWxlbnQsIGVycm9yLCB3YXJuLCBpbmZvLCB2ZXJib3NlLCBkZWJ1ZycpO1xuICB9XG5cbiAgLy8gQ2hlY2sgbGVnYWN5IFZJQkVUVU5ORUxfREVCVUcgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgaWYgKHByb2Nlc3MuZW52LlZJQkVUVU5ORUxfREVCVUcgPT09ICcxJyB8fCBwcm9jZXNzLmVudi5WSUJFVFVOTkVMX0RFQlVHID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gVmVyYm9zaXR5TGV2ZWwuREVCVUc7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIl19