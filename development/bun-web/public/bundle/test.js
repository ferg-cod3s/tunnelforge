var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __decorateClass = (decorators, target, key, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;
  for (var i6 = decorators.length - 1, decorator; i6 >= 0; i6--)
    if (decorator = decorators[i6])
      result = (kind ? decorator(target, key, result) : decorator(result)) || result;
  if (kind && result) __defProp(target, key, result);
  return result;
};

// node_modules/.pnpm/@xterm+headless@5.5.0/node_modules/@xterm/headless/lib-headless/xterm-headless.js
var require_xterm_headless = __commonJS({
  "node_modules/.pnpm/@xterm+headless@5.5.0/node_modules/@xterm/headless/lib-headless/xterm-headless.js"(exports) {
    (() => {
      "use strict";
      var e7 = { 349: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CircularList = void 0;
        const s6 = i7(460), r8 = i7(844);
        class n8 extends r8.Disposable {
          constructor(e9) {
            super(), this._maxLength = e9, this.onDeleteEmitter = this.register(new s6.EventEmitter()), this.onDelete = this.onDeleteEmitter.event, this.onInsertEmitter = this.register(new s6.EventEmitter()), this.onInsert = this.onInsertEmitter.event, this.onTrimEmitter = this.register(new s6.EventEmitter()), this.onTrim = this.onTrimEmitter.event, this._array = new Array(this._maxLength), this._startIndex = 0, this._length = 0;
          }
          get maxLength() {
            return this._maxLength;
          }
          set maxLength(e9) {
            if (this._maxLength === e9) return;
            const t8 = new Array(e9);
            for (let i8 = 0; i8 < Math.min(e9, this.length); i8++) t8[i8] = this._array[this._getCyclicIndex(i8)];
            this._array = t8, this._maxLength = e9, this._startIndex = 0;
          }
          get length() {
            return this._length;
          }
          set length(e9) {
            if (e9 > this._length) for (let t8 = this._length; t8 < e9; t8++) this._array[t8] = void 0;
            this._length = e9;
          }
          get(e9) {
            return this._array[this._getCyclicIndex(e9)];
          }
          set(e9, t8) {
            this._array[this._getCyclicIndex(e9)] = t8;
          }
          push(e9) {
            this._array[this._getCyclicIndex(this._length)] = e9, this._length === this._maxLength ? (this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1)) : this._length++;
          }
          recycle() {
            if (this._length !== this._maxLength) throw new Error("Can only recycle when the buffer is full");
            return this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1), this._array[this._getCyclicIndex(this._length - 1)];
          }
          get isFull() {
            return this._length === this._maxLength;
          }
          pop() {
            return this._array[this._getCyclicIndex(this._length-- - 1)];
          }
          splice(e9, t8, ...i8) {
            if (t8) {
              for (let i9 = e9; i9 < this._length - t8; i9++) this._array[this._getCyclicIndex(i9)] = this._array[this._getCyclicIndex(i9 + t8)];
              this._length -= t8, this.onDeleteEmitter.fire({ index: e9, amount: t8 });
            }
            for (let t9 = this._length - 1; t9 >= e9; t9--) this._array[this._getCyclicIndex(t9 + i8.length)] = this._array[this._getCyclicIndex(t9)];
            for (let t9 = 0; t9 < i8.length; t9++) this._array[this._getCyclicIndex(e9 + t9)] = i8[t9];
            if (i8.length && this.onInsertEmitter.fire({ index: e9, amount: i8.length }), this._length + i8.length > this._maxLength) {
              const e10 = this._length + i8.length - this._maxLength;
              this._startIndex += e10, this._length = this._maxLength, this.onTrimEmitter.fire(e10);
            } else this._length += i8.length;
          }
          trimStart(e9) {
            e9 > this._length && (e9 = this._length), this._startIndex += e9, this._length -= e9, this.onTrimEmitter.fire(e9);
          }
          shiftElements(e9, t8, i8) {
            if (!(t8 <= 0)) {
              if (e9 < 0 || e9 >= this._length) throw new Error("start argument out of range");
              if (e9 + i8 < 0) throw new Error("Cannot shift elements in list beyond index 0");
              if (i8 > 0) {
                for (let s8 = t8 - 1; s8 >= 0; s8--) this.set(e9 + s8 + i8, this.get(e9 + s8));
                const s7 = e9 + t8 + i8 - this._length;
                if (s7 > 0) for (this._length += s7; this._length > this._maxLength; ) this._length--, this._startIndex++, this.onTrimEmitter.fire(1);
              } else for (let s7 = 0; s7 < t8; s7++) this.set(e9 + s7 + i8, this.get(e9 + s7));
            }
          }
          _getCyclicIndex(e9) {
            return (this._startIndex + e9) % this._maxLength;
          }
        }
        t7.CircularList = n8;
      }, 439: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.clone = void 0, t7.clone = function e9(t8, i7 = 5) {
          if ("object" != typeof t8) return t8;
          const s6 = Array.isArray(t8) ? [] : {};
          for (const r8 in t8) s6[r8] = i7 <= 1 ? t8[r8] : t8[r8] && e9(t8[r8], i7 - 1);
          return s6;
        };
      }, 969: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CoreTerminal = void 0;
        const s6 = i7(844), r8 = i7(585), n8 = i7(348), a3 = i7(866), o8 = i7(744), h5 = i7(302), c5 = i7(83), l3 = i7(460), _2 = i7(753), d3 = i7(480), f5 = i7(994), u3 = i7(282), p3 = i7(435), g2 = i7(981), v2 = i7(660);
        let b3 = false;
        class S3 extends s6.Disposable {
          get onScroll() {
            return this._onScrollApi || (this._onScrollApi = this.register(new l3.EventEmitter()), this._onScroll.event((e9) => {
              this._onScrollApi?.fire(e9.position);
            })), this._onScrollApi.event;
          }
          get cols() {
            return this._bufferService.cols;
          }
          get rows() {
            return this._bufferService.rows;
          }
          get buffers() {
            return this._bufferService.buffers;
          }
          get options() {
            return this.optionsService.options;
          }
          set options(e9) {
            for (const t8 in e9) this.optionsService.options[t8] = e9[t8];
          }
          constructor(e9) {
            super(), this._windowsWrappingHeuristics = this.register(new s6.MutableDisposable()), this._onBinary = this.register(new l3.EventEmitter()), this.onBinary = this._onBinary.event, this._onData = this.register(new l3.EventEmitter()), this.onData = this._onData.event, this._onLineFeed = this.register(new l3.EventEmitter()), this.onLineFeed = this._onLineFeed.event, this._onResize = this.register(new l3.EventEmitter()), this.onResize = this._onResize.event, this._onWriteParsed = this.register(new l3.EventEmitter()), this.onWriteParsed = this._onWriteParsed.event, this._onScroll = this.register(new l3.EventEmitter()), this._instantiationService = new n8.InstantiationService(), this.optionsService = this.register(new h5.OptionsService(e9)), this._instantiationService.setService(r8.IOptionsService, this.optionsService), this._bufferService = this.register(this._instantiationService.createInstance(o8.BufferService)), this._instantiationService.setService(r8.IBufferService, this._bufferService), this._logService = this.register(this._instantiationService.createInstance(a3.LogService)), this._instantiationService.setService(r8.ILogService, this._logService), this.coreService = this.register(this._instantiationService.createInstance(c5.CoreService)), this._instantiationService.setService(r8.ICoreService, this.coreService), this.coreMouseService = this.register(this._instantiationService.createInstance(_2.CoreMouseService)), this._instantiationService.setService(r8.ICoreMouseService, this.coreMouseService), this.unicodeService = this.register(this._instantiationService.createInstance(d3.UnicodeService)), this._instantiationService.setService(r8.IUnicodeService, this.unicodeService), this._charsetService = this._instantiationService.createInstance(f5.CharsetService), this._instantiationService.setService(r8.ICharsetService, this._charsetService), this._oscLinkService = this._instantiationService.createInstance(v2.OscLinkService), this._instantiationService.setService(r8.IOscLinkService, this._oscLinkService), this._inputHandler = this.register(new p3.InputHandler(this._bufferService, this._charsetService, this.coreService, this._logService, this.optionsService, this._oscLinkService, this.coreMouseService, this.unicodeService)), this.register((0, l3.forwardEvent)(this._inputHandler.onLineFeed, this._onLineFeed)), this.register(this._inputHandler), this.register((0, l3.forwardEvent)(this._bufferService.onResize, this._onResize)), this.register((0, l3.forwardEvent)(this.coreService.onData, this._onData)), this.register((0, l3.forwardEvent)(this.coreService.onBinary, this._onBinary)), this.register(this.coreService.onRequestScrollToBottom(() => this.scrollToBottom())), this.register(this.coreService.onUserInput(() => this._writeBuffer.handleUserInput())), this.register(this.optionsService.onMultipleOptionChange(["windowsMode", "windowsPty"], () => this._handleWindowsPtyOptionChange())), this.register(this._bufferService.onScroll((e10) => {
              this._onScroll.fire({ position: this._bufferService.buffer.ydisp, source: 0 }), this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);
            })), this.register(this._inputHandler.onScroll((e10) => {
              this._onScroll.fire({ position: this._bufferService.buffer.ydisp, source: 0 }), this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);
            })), this._writeBuffer = this.register(new g2.WriteBuffer((e10, t8) => this._inputHandler.parse(e10, t8))), this.register((0, l3.forwardEvent)(this._writeBuffer.onWriteParsed, this._onWriteParsed));
          }
          write(e9, t8) {
            this._writeBuffer.write(e9, t8);
          }
          writeSync(e9, t8) {
            this._logService.logLevel <= r8.LogLevelEnum.WARN && !b3 && (this._logService.warn("writeSync is unreliable and will be removed soon."), b3 = true), this._writeBuffer.writeSync(e9, t8);
          }
          input(e9, t8 = true) {
            this.coreService.triggerDataEvent(e9, t8);
          }
          resize(e9, t8) {
            isNaN(e9) || isNaN(t8) || (e9 = Math.max(e9, o8.MINIMUM_COLS), t8 = Math.max(t8, o8.MINIMUM_ROWS), this._bufferService.resize(e9, t8));
          }
          scroll(e9, t8 = false) {
            this._bufferService.scroll(e9, t8);
          }
          scrollLines(e9, t8, i8) {
            this._bufferService.scrollLines(e9, t8, i8);
          }
          scrollPages(e9) {
            this.scrollLines(e9 * (this.rows - 1));
          }
          scrollToTop() {
            this.scrollLines(-this._bufferService.buffer.ydisp);
          }
          scrollToBottom() {
            this.scrollLines(this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
          }
          scrollToLine(e9) {
            const t8 = e9 - this._bufferService.buffer.ydisp;
            0 !== t8 && this.scrollLines(t8);
          }
          registerEscHandler(e9, t8) {
            return this._inputHandler.registerEscHandler(e9, t8);
          }
          registerDcsHandler(e9, t8) {
            return this._inputHandler.registerDcsHandler(e9, t8);
          }
          registerCsiHandler(e9, t8) {
            return this._inputHandler.registerCsiHandler(e9, t8);
          }
          registerOscHandler(e9, t8) {
            return this._inputHandler.registerOscHandler(e9, t8);
          }
          _setup() {
            this._handleWindowsPtyOptionChange();
          }
          reset() {
            this._inputHandler.reset(), this._bufferService.reset(), this._charsetService.reset(), this.coreService.reset(), this.coreMouseService.reset();
          }
          _handleWindowsPtyOptionChange() {
            let e9 = false;
            const t8 = this.optionsService.rawOptions.windowsPty;
            t8 && void 0 !== t8.buildNumber && void 0 !== t8.buildNumber ? e9 = !!("conpty" === t8.backend && t8.buildNumber < 21376) : this.optionsService.rawOptions.windowsMode && (e9 = true), e9 ? this._enableWindowsWrappingHeuristics() : this._windowsWrappingHeuristics.clear();
          }
          _enableWindowsWrappingHeuristics() {
            if (!this._windowsWrappingHeuristics.value) {
              const e9 = [];
              e9.push(this.onLineFeed(u3.updateWindowsModeWrappedState.bind(null, this._bufferService))), e9.push(this.registerCsiHandler({ final: "H" }, () => ((0, u3.updateWindowsModeWrappedState)(this._bufferService), false))), this._windowsWrappingHeuristics.value = (0, s6.toDisposable)(() => {
                for (const t8 of e9) t8.dispose();
              });
            }
          }
        }
        t7.CoreTerminal = S3;
      }, 460: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.runAndSubscribe = t7.forwardEvent = t7.EventEmitter = void 0, t7.EventEmitter = class {
          constructor() {
            this._listeners = [], this._disposed = false;
          }
          get event() {
            return this._event || (this._event = (e9) => {
              this._listeners.push(e9);
              const t8 = { dispose: () => {
                if (!this._disposed) {
                  for (let t9 = 0; t9 < this._listeners.length; t9++) if (this._listeners[t9] === e9) return void this._listeners.splice(t9, 1);
                }
              } };
              return t8;
            }), this._event;
          }
          fire(e9, t8) {
            const i7 = [];
            for (let e10 = 0; e10 < this._listeners.length; e10++) i7.push(this._listeners[e10]);
            for (let s6 = 0; s6 < i7.length; s6++) i7[s6].call(void 0, e9, t8);
          }
          dispose() {
            this.clearListeners(), this._disposed = true;
          }
          clearListeners() {
            this._listeners && (this._listeners.length = 0);
          }
        }, t7.forwardEvent = function(e9, t8) {
          return e9((e10) => t8.fire(e10));
        }, t7.runAndSubscribe = function(e9, t8) {
          return t8(void 0), e9((e10) => t8(e10));
        };
      }, 435: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o9 = e9.length - 1; o9 >= 0; o9--) (r9 = e9[o9]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.InputHandler = t7.WindowsOptionsReportType = void 0;
        const n8 = i7(584), a3 = i7(116), o8 = i7(15), h5 = i7(844), c5 = i7(482), l3 = i7(437), _2 = i7(460), d3 = i7(643), f5 = i7(511), u3 = i7(734), p3 = i7(585), g2 = i7(480), v2 = i7(242), b3 = i7(351), S3 = i7(941), m2 = { "(": 0, ")": 1, "*": 2, "+": 3, "-": 1, ".": 2 }, C2 = 131072;
        function y3(e9, t8) {
          if (e9 > 24) return t8.setWinLines || false;
          switch (e9) {
            case 1:
              return !!t8.restoreWin;
            case 2:
              return !!t8.minimizeWin;
            case 3:
              return !!t8.setWinPosition;
            case 4:
              return !!t8.setWinSizePixels;
            case 5:
              return !!t8.raiseWin;
            case 6:
              return !!t8.lowerWin;
            case 7:
              return !!t8.refreshWin;
            case 8:
              return !!t8.setWinSizeChars;
            case 9:
              return !!t8.maximizeWin;
            case 10:
              return !!t8.fullscreenWin;
            case 11:
              return !!t8.getWinState;
            case 13:
              return !!t8.getWinPosition;
            case 14:
              return !!t8.getWinSizePixels;
            case 15:
              return !!t8.getScreenSizePixels;
            case 16:
              return !!t8.getCellSizePixels;
            case 18:
              return !!t8.getWinSizeChars;
            case 19:
              return !!t8.getScreenSizeChars;
            case 20:
              return !!t8.getIconTitle;
            case 21:
              return !!t8.getWinTitle;
            case 22:
              return !!t8.pushTitle;
            case 23:
              return !!t8.popTitle;
            case 24:
              return !!t8.setWinLines;
          }
          return false;
        }
        var w2;
        !function(e9) {
          e9[e9.GET_WIN_SIZE_PIXELS = 0] = "GET_WIN_SIZE_PIXELS", e9[e9.GET_CELL_SIZE_PIXELS = 1] = "GET_CELL_SIZE_PIXELS";
        }(w2 || (t7.WindowsOptionsReportType = w2 = {}));
        let B2 = 0;
        class E2 extends h5.Disposable {
          getAttrData() {
            return this._curAttrData;
          }
          constructor(e9, t8, i8, s7, r9, h6, d4, u4, p4 = new o8.EscapeSequenceParser()) {
            super(), this._bufferService = e9, this._charsetService = t8, this._coreService = i8, this._logService = s7, this._optionsService = r9, this._oscLinkService = h6, this._coreMouseService = d4, this._unicodeService = u4, this._parser = p4, this._parseBuffer = new Uint32Array(4096), this._stringDecoder = new c5.StringToUtf32(), this._utf8Decoder = new c5.Utf8ToUtf32(), this._workCell = new f5.CellData(), this._windowTitle = "", this._iconName = "", this._windowTitleStack = [], this._iconNameStack = [], this._curAttrData = l3.DEFAULT_ATTR_DATA.clone(), this._eraseAttrDataInternal = l3.DEFAULT_ATTR_DATA.clone(), this._onRequestBell = this.register(new _2.EventEmitter()), this.onRequestBell = this._onRequestBell.event, this._onRequestRefreshRows = this.register(new _2.EventEmitter()), this.onRequestRefreshRows = this._onRequestRefreshRows.event, this._onRequestReset = this.register(new _2.EventEmitter()), this.onRequestReset = this._onRequestReset.event, this._onRequestSendFocus = this.register(new _2.EventEmitter()), this.onRequestSendFocus = this._onRequestSendFocus.event, this._onRequestSyncScrollBar = this.register(new _2.EventEmitter()), this.onRequestSyncScrollBar = this._onRequestSyncScrollBar.event, this._onRequestWindowsOptionsReport = this.register(new _2.EventEmitter()), this.onRequestWindowsOptionsReport = this._onRequestWindowsOptionsReport.event, this._onA11yChar = this.register(new _2.EventEmitter()), this.onA11yChar = this._onA11yChar.event, this._onA11yTab = this.register(new _2.EventEmitter()), this.onA11yTab = this._onA11yTab.event, this._onCursorMove = this.register(new _2.EventEmitter()), this.onCursorMove = this._onCursorMove.event, this._onLineFeed = this.register(new _2.EventEmitter()), this.onLineFeed = this._onLineFeed.event, this._onScroll = this.register(new _2.EventEmitter()), this.onScroll = this._onScroll.event, this._onTitleChange = this.register(new _2.EventEmitter()), this.onTitleChange = this._onTitleChange.event, this._onColor = this.register(new _2.EventEmitter()), this.onColor = this._onColor.event, this._parseStack = { paused: false, cursorStartX: 0, cursorStartY: 0, decodedLength: 0, position: 0 }, this._specialColors = [256, 257, 258], this.register(this._parser), this._dirtyRowTracker = new A2(this._bufferService), this._activeBuffer = this._bufferService.buffer, this.register(this._bufferService.buffers.onBufferActivate((e10) => this._activeBuffer = e10.activeBuffer)), this._parser.setCsiHandlerFallback((e10, t9) => {
              this._logService.debug("Unknown CSI code: ", { identifier: this._parser.identToString(e10), params: t9.toArray() });
            }), this._parser.setEscHandlerFallback((e10) => {
              this._logService.debug("Unknown ESC code: ", { identifier: this._parser.identToString(e10) });
            }), this._parser.setExecuteHandlerFallback((e10) => {
              this._logService.debug("Unknown EXECUTE code: ", { code: e10 });
            }), this._parser.setOscHandlerFallback((e10, t9, i9) => {
              this._logService.debug("Unknown OSC code: ", { identifier: e10, action: t9, data: i9 });
            }), this._parser.setDcsHandlerFallback((e10, t9, i9) => {
              "HOOK" === t9 && (i9 = i9.toArray()), this._logService.debug("Unknown DCS code: ", { identifier: this._parser.identToString(e10), action: t9, payload: i9 });
            }), this._parser.setPrintHandler((e10, t9, i9) => this.print(e10, t9, i9)), this._parser.registerCsiHandler({ final: "@" }, (e10) => this.insertChars(e10)), this._parser.registerCsiHandler({ intermediates: " ", final: "@" }, (e10) => this.scrollLeft(e10)), this._parser.registerCsiHandler({ final: "A" }, (e10) => this.cursorUp(e10)), this._parser.registerCsiHandler({ intermediates: " ", final: "A" }, (e10) => this.scrollRight(e10)), this._parser.registerCsiHandler({ final: "B" }, (e10) => this.cursorDown(e10)), this._parser.registerCsiHandler({ final: "C" }, (e10) => this.cursorForward(e10)), this._parser.registerCsiHandler({ final: "D" }, (e10) => this.cursorBackward(e10)), this._parser.registerCsiHandler({ final: "E" }, (e10) => this.cursorNextLine(e10)), this._parser.registerCsiHandler({ final: "F" }, (e10) => this.cursorPrecedingLine(e10)), this._parser.registerCsiHandler({ final: "G" }, (e10) => this.cursorCharAbsolute(e10)), this._parser.registerCsiHandler({ final: "H" }, (e10) => this.cursorPosition(e10)), this._parser.registerCsiHandler({ final: "I" }, (e10) => this.cursorForwardTab(e10)), this._parser.registerCsiHandler({ final: "J" }, (e10) => this.eraseInDisplay(e10, false)), this._parser.registerCsiHandler({ prefix: "?", final: "J" }, (e10) => this.eraseInDisplay(e10, true)), this._parser.registerCsiHandler({ final: "K" }, (e10) => this.eraseInLine(e10, false)), this._parser.registerCsiHandler({ prefix: "?", final: "K" }, (e10) => this.eraseInLine(e10, true)), this._parser.registerCsiHandler({ final: "L" }, (e10) => this.insertLines(e10)), this._parser.registerCsiHandler({ final: "M" }, (e10) => this.deleteLines(e10)), this._parser.registerCsiHandler({ final: "P" }, (e10) => this.deleteChars(e10)), this._parser.registerCsiHandler({ final: "S" }, (e10) => this.scrollUp(e10)), this._parser.registerCsiHandler({ final: "T" }, (e10) => this.scrollDown(e10)), this._parser.registerCsiHandler({ final: "X" }, (e10) => this.eraseChars(e10)), this._parser.registerCsiHandler({ final: "Z" }, (e10) => this.cursorBackwardTab(e10)), this._parser.registerCsiHandler({ final: "`" }, (e10) => this.charPosAbsolute(e10)), this._parser.registerCsiHandler({ final: "a" }, (e10) => this.hPositionRelative(e10)), this._parser.registerCsiHandler({ final: "b" }, (e10) => this.repeatPrecedingCharacter(e10)), this._parser.registerCsiHandler({ final: "c" }, (e10) => this.sendDeviceAttributesPrimary(e10)), this._parser.registerCsiHandler({ prefix: ">", final: "c" }, (e10) => this.sendDeviceAttributesSecondary(e10)), this._parser.registerCsiHandler({ final: "d" }, (e10) => this.linePosAbsolute(e10)), this._parser.registerCsiHandler({ final: "e" }, (e10) => this.vPositionRelative(e10)), this._parser.registerCsiHandler({ final: "f" }, (e10) => this.hVPosition(e10)), this._parser.registerCsiHandler({ final: "g" }, (e10) => this.tabClear(e10)), this._parser.registerCsiHandler({ final: "h" }, (e10) => this.setMode(e10)), this._parser.registerCsiHandler({ prefix: "?", final: "h" }, (e10) => this.setModePrivate(e10)), this._parser.registerCsiHandler({ final: "l" }, (e10) => this.resetMode(e10)), this._parser.registerCsiHandler({ prefix: "?", final: "l" }, (e10) => this.resetModePrivate(e10)), this._parser.registerCsiHandler({ final: "m" }, (e10) => this.charAttributes(e10)), this._parser.registerCsiHandler({ final: "n" }, (e10) => this.deviceStatus(e10)), this._parser.registerCsiHandler({ prefix: "?", final: "n" }, (e10) => this.deviceStatusPrivate(e10)), this._parser.registerCsiHandler({ intermediates: "!", final: "p" }, (e10) => this.softReset(e10)), this._parser.registerCsiHandler({ intermediates: " ", final: "q" }, (e10) => this.setCursorStyle(e10)), this._parser.registerCsiHandler({ final: "r" }, (e10) => this.setScrollRegion(e10)), this._parser.registerCsiHandler({ final: "s" }, (e10) => this.saveCursor(e10)), this._parser.registerCsiHandler({ final: "t" }, (e10) => this.windowOptions(e10)), this._parser.registerCsiHandler({ final: "u" }, (e10) => this.restoreCursor(e10)), this._parser.registerCsiHandler({ intermediates: "'", final: "}" }, (e10) => this.insertColumns(e10)), this._parser.registerCsiHandler({ intermediates: "'", final: "~" }, (e10) => this.deleteColumns(e10)), this._parser.registerCsiHandler({ intermediates: '"', final: "q" }, (e10) => this.selectProtected(e10)), this._parser.registerCsiHandler({ intermediates: "$", final: "p" }, (e10) => this.requestMode(e10, true)), this._parser.registerCsiHandler({ prefix: "?", intermediates: "$", final: "p" }, (e10) => this.requestMode(e10, false)), this._parser.setExecuteHandler(n8.C0.BEL, () => this.bell()), this._parser.setExecuteHandler(n8.C0.LF, () => this.lineFeed()), this._parser.setExecuteHandler(n8.C0.VT, () => this.lineFeed()), this._parser.setExecuteHandler(n8.C0.FF, () => this.lineFeed()), this._parser.setExecuteHandler(n8.C0.CR, () => this.carriageReturn()), this._parser.setExecuteHandler(n8.C0.BS, () => this.backspace()), this._parser.setExecuteHandler(n8.C0.HT, () => this.tab()), this._parser.setExecuteHandler(n8.C0.SO, () => this.shiftOut()), this._parser.setExecuteHandler(n8.C0.SI, () => this.shiftIn()), this._parser.setExecuteHandler(n8.C1.IND, () => this.index()), this._parser.setExecuteHandler(n8.C1.NEL, () => this.nextLine()), this._parser.setExecuteHandler(n8.C1.HTS, () => this.tabSet()), this._parser.registerOscHandler(0, new v2.OscHandler((e10) => (this.setTitle(e10), this.setIconName(e10), true))), this._parser.registerOscHandler(1, new v2.OscHandler((e10) => this.setIconName(e10))), this._parser.registerOscHandler(2, new v2.OscHandler((e10) => this.setTitle(e10))), this._parser.registerOscHandler(4, new v2.OscHandler((e10) => this.setOrReportIndexedColor(e10))), this._parser.registerOscHandler(8, new v2.OscHandler((e10) => this.setHyperlink(e10))), this._parser.registerOscHandler(10, new v2.OscHandler((e10) => this.setOrReportFgColor(e10))), this._parser.registerOscHandler(11, new v2.OscHandler((e10) => this.setOrReportBgColor(e10))), this._parser.registerOscHandler(12, new v2.OscHandler((e10) => this.setOrReportCursorColor(e10))), this._parser.registerOscHandler(104, new v2.OscHandler((e10) => this.restoreIndexedColor(e10))), this._parser.registerOscHandler(110, new v2.OscHandler((e10) => this.restoreFgColor(e10))), this._parser.registerOscHandler(111, new v2.OscHandler((e10) => this.restoreBgColor(e10))), this._parser.registerOscHandler(112, new v2.OscHandler((e10) => this.restoreCursorColor(e10))), this._parser.registerEscHandler({ final: "7" }, () => this.saveCursor()), this._parser.registerEscHandler({ final: "8" }, () => this.restoreCursor()), this._parser.registerEscHandler({ final: "D" }, () => this.index()), this._parser.registerEscHandler({ final: "E" }, () => this.nextLine()), this._parser.registerEscHandler({ final: "H" }, () => this.tabSet()), this._parser.registerEscHandler({ final: "M" }, () => this.reverseIndex()), this._parser.registerEscHandler({ final: "=" }, () => this.keypadApplicationMode()), this._parser.registerEscHandler({ final: ">" }, () => this.keypadNumericMode()), this._parser.registerEscHandler({ final: "c" }, () => this.fullReset()), this._parser.registerEscHandler({ final: "n" }, () => this.setgLevel(2)), this._parser.registerEscHandler({ final: "o" }, () => this.setgLevel(3)), this._parser.registerEscHandler({ final: "|" }, () => this.setgLevel(3)), this._parser.registerEscHandler({ final: "}" }, () => this.setgLevel(2)), this._parser.registerEscHandler({ final: "~" }, () => this.setgLevel(1)), this._parser.registerEscHandler({ intermediates: "%", final: "@" }, () => this.selectDefaultCharset()), this._parser.registerEscHandler({ intermediates: "%", final: "G" }, () => this.selectDefaultCharset());
            for (const e10 in a3.CHARSETS) this._parser.registerEscHandler({ intermediates: "(", final: e10 }, () => this.selectCharset("(" + e10)), this._parser.registerEscHandler({ intermediates: ")", final: e10 }, () => this.selectCharset(")" + e10)), this._parser.registerEscHandler({ intermediates: "*", final: e10 }, () => this.selectCharset("*" + e10)), this._parser.registerEscHandler({ intermediates: "+", final: e10 }, () => this.selectCharset("+" + e10)), this._parser.registerEscHandler({ intermediates: "-", final: e10 }, () => this.selectCharset("-" + e10)), this._parser.registerEscHandler({ intermediates: ".", final: e10 }, () => this.selectCharset("." + e10)), this._parser.registerEscHandler({ intermediates: "/", final: e10 }, () => this.selectCharset("/" + e10));
            this._parser.registerEscHandler({ intermediates: "#", final: "8" }, () => this.screenAlignmentPattern()), this._parser.setErrorHandler((e10) => (this._logService.error("Parsing error: ", e10), e10)), this._parser.registerDcsHandler({ intermediates: "$", final: "q" }, new b3.DcsHandler((e10, t9) => this.requestStatusString(e10, t9)));
          }
          _preserveStack(e9, t8, i8, s7) {
            this._parseStack.paused = true, this._parseStack.cursorStartX = e9, this._parseStack.cursorStartY = t8, this._parseStack.decodedLength = i8, this._parseStack.position = s7;
          }
          _logSlowResolvingAsync(e9) {
            this._logService.logLevel <= p3.LogLevelEnum.WARN && Promise.race([e9, new Promise((e10, t8) => setTimeout(() => t8("#SLOW_TIMEOUT"), 5e3))]).catch((e10) => {
              if ("#SLOW_TIMEOUT" !== e10) throw e10;
              console.warn("async parser handler taking longer than 5000 ms");
            });
          }
          _getCurrentLinkId() {
            return this._curAttrData.extended.urlId;
          }
          parse(e9, t8) {
            let i8, s7 = this._activeBuffer.x, r9 = this._activeBuffer.y, n9 = 0;
            const a4 = this._parseStack.paused;
            if (a4) {
              if (i8 = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, t8)) return this._logSlowResolvingAsync(i8), i8;
              s7 = this._parseStack.cursorStartX, r9 = this._parseStack.cursorStartY, this._parseStack.paused = false, e9.length > C2 && (n9 = this._parseStack.position + C2);
            }
            if (this._logService.logLevel <= p3.LogLevelEnum.DEBUG && this._logService.debug("parsing data" + ("string" == typeof e9 ? ` "${e9}"` : ` "${Array.prototype.map.call(e9, (e10) => String.fromCharCode(e10)).join("")}"`), "string" == typeof e9 ? e9.split("").map((e10) => e10.charCodeAt(0)) : e9), this._parseBuffer.length < e9.length && this._parseBuffer.length < C2 && (this._parseBuffer = new Uint32Array(Math.min(e9.length, C2))), a4 || this._dirtyRowTracker.clearRange(), e9.length > C2) for (let t9 = n9; t9 < e9.length; t9 += C2) {
              const n10 = t9 + C2 < e9.length ? t9 + C2 : e9.length, a5 = "string" == typeof e9 ? this._stringDecoder.decode(e9.substring(t9, n10), this._parseBuffer) : this._utf8Decoder.decode(e9.subarray(t9, n10), this._parseBuffer);
              if (i8 = this._parser.parse(this._parseBuffer, a5)) return this._preserveStack(s7, r9, a5, t9), this._logSlowResolvingAsync(i8), i8;
            }
            else if (!a4) {
              const t9 = "string" == typeof e9 ? this._stringDecoder.decode(e9, this._parseBuffer) : this._utf8Decoder.decode(e9, this._parseBuffer);
              if (i8 = this._parser.parse(this._parseBuffer, t9)) return this._preserveStack(s7, r9, t9, 0), this._logSlowResolvingAsync(i8), i8;
            }
            this._activeBuffer.x === s7 && this._activeBuffer.y === r9 || this._onCursorMove.fire();
            const o9 = this._dirtyRowTracker.end + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp), h6 = this._dirtyRowTracker.start + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
            h6 < this._bufferService.rows && this._onRequestRefreshRows.fire(Math.min(h6, this._bufferService.rows - 1), Math.min(o9, this._bufferService.rows - 1));
          }
          print(e9, t8, i8) {
            let s7, r9;
            const n9 = this._charsetService.charset, a4 = this._optionsService.rawOptions.screenReaderMode, o9 = this._bufferService.cols, h6 = this._coreService.decPrivateModes.wraparound, _3 = this._coreService.modes.insertMode, f6 = this._curAttrData;
            let u4 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
            this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._activeBuffer.x && i8 - t8 > 0 && 2 === u4.getWidth(this._activeBuffer.x - 1) && u4.setCellFromCodepoint(this._activeBuffer.x - 1, 0, 1, f6);
            let p4 = this._parser.precedingJoinState;
            for (let v3 = t8; v3 < i8; ++v3) {
              if (s7 = e9[v3], s7 < 127 && n9) {
                const e10 = n9[String.fromCharCode(s7)];
                e10 && (s7 = e10.charCodeAt(0));
              }
              const t9 = this._unicodeService.charProperties(s7, p4);
              r9 = g2.UnicodeService.extractWidth(t9);
              const i9 = g2.UnicodeService.extractShouldJoin(t9), b4 = i9 ? g2.UnicodeService.extractWidth(p4) : 0;
              if (p4 = t9, a4 && this._onA11yChar.fire((0, c5.stringFromCodePoint)(s7)), this._getCurrentLinkId() && this._oscLinkService.addLineToLink(this._getCurrentLinkId(), this._activeBuffer.ybase + this._activeBuffer.y), this._activeBuffer.x + r9 - b4 > o9) {
                if (h6) {
                  const e10 = u4;
                  let t10 = this._activeBuffer.x - b4;
                  for (this._activeBuffer.x = b4, this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData(), true)) : (this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = true), u4 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y), b4 > 0 && u4 instanceof l3.BufferLine && u4.copyCellsFrom(e10, t10, 0, b4, false); t10 < o9; ) e10.setCellFromCodepoint(t10++, 0, 1, f6);
                } else if (this._activeBuffer.x = o9 - 1, 2 === r9) continue;
              }
              if (i9 && this._activeBuffer.x) {
                const e10 = u4.getWidth(this._activeBuffer.x - 1) ? 1 : 2;
                u4.addCodepointToCell(this._activeBuffer.x - e10, s7, r9);
                for (let e11 = r9 - b4; --e11 >= 0; ) u4.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, f6);
              } else if (_3 && (u4.insertCells(this._activeBuffer.x, r9 - b4, this._activeBuffer.getNullCell(f6)), 2 === u4.getWidth(o9 - 1) && u4.setCellFromCodepoint(o9 - 1, d3.NULL_CELL_CODE, d3.NULL_CELL_WIDTH, f6)), u4.setCellFromCodepoint(this._activeBuffer.x++, s7, r9, f6), r9 > 0) for (; --r9; ) u4.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, f6);
            }
            this._parser.precedingJoinState = p4, this._activeBuffer.x < o9 && i8 - t8 > 0 && 0 === u4.getWidth(this._activeBuffer.x) && !u4.hasContent(this._activeBuffer.x) && u4.setCellFromCodepoint(this._activeBuffer.x, 0, 1, f6), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
          }
          registerCsiHandler(e9, t8) {
            return "t" !== e9.final || e9.prefix || e9.intermediates ? this._parser.registerCsiHandler(e9, t8) : this._parser.registerCsiHandler(e9, (e10) => !y3(e10.params[0], this._optionsService.rawOptions.windowOptions) || t8(e10));
          }
          registerDcsHandler(e9, t8) {
            return this._parser.registerDcsHandler(e9, new b3.DcsHandler(t8));
          }
          registerEscHandler(e9, t8) {
            return this._parser.registerEscHandler(e9, t8);
          }
          registerOscHandler(e9, t8) {
            return this._parser.registerOscHandler(e9, new v2.OscHandler(t8));
          }
          bell() {
            return this._onRequestBell.fire(), true;
          }
          lineFeed() {
            return this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._optionsService.rawOptions.convertEol && (this._activeBuffer.x = 0), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows ? this._activeBuffer.y = this._bufferService.rows - 1 : this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = false, this._activeBuffer.x >= this._bufferService.cols && this._activeBuffer.x--, this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._onLineFeed.fire(), true;
          }
          carriageReturn() {
            return this._activeBuffer.x = 0, true;
          }
          backspace() {
            if (!this._coreService.decPrivateModes.reverseWraparound) return this._restrictCursor(), this._activeBuffer.x > 0 && this._activeBuffer.x--, true;
            if (this._restrictCursor(this._bufferService.cols), this._activeBuffer.x > 0) this._activeBuffer.x--;
            else if (0 === this._activeBuffer.x && this._activeBuffer.y > this._activeBuffer.scrollTop && this._activeBuffer.y <= this._activeBuffer.scrollBottom && this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)?.isWrapped) {
              this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = false, this._activeBuffer.y--, this._activeBuffer.x = this._bufferService.cols - 1;
              const e9 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
              e9.hasWidth(this._activeBuffer.x) && !e9.hasContent(this._activeBuffer.x) && this._activeBuffer.x--;
            }
            return this._restrictCursor(), true;
          }
          tab() {
            if (this._activeBuffer.x >= this._bufferService.cols) return true;
            const e9 = this._activeBuffer.x;
            return this._activeBuffer.x = this._activeBuffer.nextStop(), this._optionsService.rawOptions.screenReaderMode && this._onA11yTab.fire(this._activeBuffer.x - e9), true;
          }
          shiftOut() {
            return this._charsetService.setgLevel(1), true;
          }
          shiftIn() {
            return this._charsetService.setgLevel(0), true;
          }
          _restrictCursor(e9 = this._bufferService.cols - 1) {
            this._activeBuffer.x = Math.min(e9, Math.max(0, this._activeBuffer.x)), this._activeBuffer.y = this._coreService.decPrivateModes.origin ? Math.min(this._activeBuffer.scrollBottom, Math.max(this._activeBuffer.scrollTop, this._activeBuffer.y)) : Math.min(this._bufferService.rows - 1, Math.max(0, this._activeBuffer.y)), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
          }
          _setCursor(e9, t8) {
            this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._coreService.decPrivateModes.origin ? (this._activeBuffer.x = e9, this._activeBuffer.y = this._activeBuffer.scrollTop + t8) : (this._activeBuffer.x = e9, this._activeBuffer.y = t8), this._restrictCursor(), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
          }
          _moveCursor(e9, t8) {
            this._restrictCursor(), this._setCursor(this._activeBuffer.x + e9, this._activeBuffer.y + t8);
          }
          cursorUp(e9) {
            const t8 = this._activeBuffer.y - this._activeBuffer.scrollTop;
            return t8 >= 0 ? this._moveCursor(0, -Math.min(t8, e9.params[0] || 1)) : this._moveCursor(0, -(e9.params[0] || 1)), true;
          }
          cursorDown(e9) {
            const t8 = this._activeBuffer.scrollBottom - this._activeBuffer.y;
            return t8 >= 0 ? this._moveCursor(0, Math.min(t8, e9.params[0] || 1)) : this._moveCursor(0, e9.params[0] || 1), true;
          }
          cursorForward(e9) {
            return this._moveCursor(e9.params[0] || 1, 0), true;
          }
          cursorBackward(e9) {
            return this._moveCursor(-(e9.params[0] || 1), 0), true;
          }
          cursorNextLine(e9) {
            return this.cursorDown(e9), this._activeBuffer.x = 0, true;
          }
          cursorPrecedingLine(e9) {
            return this.cursorUp(e9), this._activeBuffer.x = 0, true;
          }
          cursorCharAbsolute(e9) {
            return this._setCursor((e9.params[0] || 1) - 1, this._activeBuffer.y), true;
          }
          cursorPosition(e9) {
            return this._setCursor(e9.length >= 2 ? (e9.params[1] || 1) - 1 : 0, (e9.params[0] || 1) - 1), true;
          }
          charPosAbsolute(e9) {
            return this._setCursor((e9.params[0] || 1) - 1, this._activeBuffer.y), true;
          }
          hPositionRelative(e9) {
            return this._moveCursor(e9.params[0] || 1, 0), true;
          }
          linePosAbsolute(e9) {
            return this._setCursor(this._activeBuffer.x, (e9.params[0] || 1) - 1), true;
          }
          vPositionRelative(e9) {
            return this._moveCursor(0, e9.params[0] || 1), true;
          }
          hVPosition(e9) {
            return this.cursorPosition(e9), true;
          }
          tabClear(e9) {
            const t8 = e9.params[0];
            return 0 === t8 ? delete this._activeBuffer.tabs[this._activeBuffer.x] : 3 === t8 && (this._activeBuffer.tabs = {}), true;
          }
          cursorForwardTab(e9) {
            if (this._activeBuffer.x >= this._bufferService.cols) return true;
            let t8 = e9.params[0] || 1;
            for (; t8--; ) this._activeBuffer.x = this._activeBuffer.nextStop();
            return true;
          }
          cursorBackwardTab(e9) {
            if (this._activeBuffer.x >= this._bufferService.cols) return true;
            let t8 = e9.params[0] || 1;
            for (; t8--; ) this._activeBuffer.x = this._activeBuffer.prevStop();
            return true;
          }
          selectProtected(e9) {
            const t8 = e9.params[0];
            return 1 === t8 && (this._curAttrData.bg |= 536870912), 2 !== t8 && 0 !== t8 || (this._curAttrData.bg &= -536870913), true;
          }
          _eraseInBufferLine(e9, t8, i8, s7 = false, r9 = false) {
            const n9 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e9);
            n9.replaceCells(t8, i8, this._activeBuffer.getNullCell(this._eraseAttrData()), r9), s7 && (n9.isWrapped = false);
          }
          _resetBufferLine(e9, t8 = false) {
            const i8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e9);
            i8 && (i8.fill(this._activeBuffer.getNullCell(this._eraseAttrData()), t8), this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase + e9), i8.isWrapped = false);
          }
          eraseInDisplay(e9, t8 = false) {
            let i8;
            switch (this._restrictCursor(this._bufferService.cols), e9.params[0]) {
              case 0:
                for (i8 = this._activeBuffer.y, this._dirtyRowTracker.markDirty(i8), this._eraseInBufferLine(i8++, this._activeBuffer.x, this._bufferService.cols, 0 === this._activeBuffer.x, t8); i8 < this._bufferService.rows; i8++) this._resetBufferLine(i8, t8);
                this._dirtyRowTracker.markDirty(i8);
                break;
              case 1:
                for (i8 = this._activeBuffer.y, this._dirtyRowTracker.markDirty(i8), this._eraseInBufferLine(i8, 0, this._activeBuffer.x + 1, true, t8), this._activeBuffer.x + 1 >= this._bufferService.cols && (this._activeBuffer.lines.get(i8 + 1).isWrapped = false); i8--; ) this._resetBufferLine(i8, t8);
                this._dirtyRowTracker.markDirty(0);
                break;
              case 2:
                for (i8 = this._bufferService.rows, this._dirtyRowTracker.markDirty(i8 - 1); i8--; ) this._resetBufferLine(i8, t8);
                this._dirtyRowTracker.markDirty(0);
                break;
              case 3:
                const e10 = this._activeBuffer.lines.length - this._bufferService.rows;
                e10 > 0 && (this._activeBuffer.lines.trimStart(e10), this._activeBuffer.ybase = Math.max(this._activeBuffer.ybase - e10, 0), this._activeBuffer.ydisp = Math.max(this._activeBuffer.ydisp - e10, 0), this._onScroll.fire(0));
            }
            return true;
          }
          eraseInLine(e9, t8 = false) {
            switch (this._restrictCursor(this._bufferService.cols), e9.params[0]) {
              case 0:
                this._eraseInBufferLine(this._activeBuffer.y, this._activeBuffer.x, this._bufferService.cols, 0 === this._activeBuffer.x, t8);
                break;
              case 1:
                this._eraseInBufferLine(this._activeBuffer.y, 0, this._activeBuffer.x + 1, false, t8);
                break;
              case 2:
                this._eraseInBufferLine(this._activeBuffer.y, 0, this._bufferService.cols, true, t8);
            }
            return this._dirtyRowTracker.markDirty(this._activeBuffer.y), true;
          }
          insertLines(e9) {
            this._restrictCursor();
            let t8 = e9.params[0] || 1;
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const i8 = this._activeBuffer.ybase + this._activeBuffer.y, s7 = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom, r9 = this._bufferService.rows - 1 + this._activeBuffer.ybase - s7 + 1;
            for (; t8--; ) this._activeBuffer.lines.splice(r9 - 1, 1), this._activeBuffer.lines.splice(i8, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, true;
          }
          deleteLines(e9) {
            this._restrictCursor();
            let t8 = e9.params[0] || 1;
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const i8 = this._activeBuffer.ybase + this._activeBuffer.y;
            let s7;
            for (s7 = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom, s7 = this._bufferService.rows - 1 + this._activeBuffer.ybase - s7; t8--; ) this._activeBuffer.lines.splice(i8, 1), this._activeBuffer.lines.splice(s7, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, true;
          }
          insertChars(e9) {
            this._restrictCursor();
            const t8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
            return t8 && (t8.insertCells(this._activeBuffer.x, e9.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
          }
          deleteChars(e9) {
            this._restrictCursor();
            const t8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
            return t8 && (t8.deleteCells(this._activeBuffer.x, e9.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
          }
          scrollUp(e9) {
            let t8 = e9.params[0] || 1;
            for (; t8--; ) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          scrollDown(e9) {
            let t8 = e9.params[0] || 1;
            for (; t8--; ) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 0, this._activeBuffer.getBlankLine(l3.DEFAULT_ATTR_DATA));
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          scrollLeft(e9) {
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const t8 = e9.params[0] || 1;
            for (let e10 = this._activeBuffer.scrollTop; e10 <= this._activeBuffer.scrollBottom; ++e10) {
              const i8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e10);
              i8.deleteCells(0, t8, this._activeBuffer.getNullCell(this._eraseAttrData())), i8.isWrapped = false;
            }
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          scrollRight(e9) {
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const t8 = e9.params[0] || 1;
            for (let e10 = this._activeBuffer.scrollTop; e10 <= this._activeBuffer.scrollBottom; ++e10) {
              const i8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e10);
              i8.insertCells(0, t8, this._activeBuffer.getNullCell(this._eraseAttrData())), i8.isWrapped = false;
            }
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          insertColumns(e9) {
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const t8 = e9.params[0] || 1;
            for (let e10 = this._activeBuffer.scrollTop; e10 <= this._activeBuffer.scrollBottom; ++e10) {
              const i8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e10);
              i8.insertCells(this._activeBuffer.x, t8, this._activeBuffer.getNullCell(this._eraseAttrData())), i8.isWrapped = false;
            }
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          deleteColumns(e9) {
            if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
            const t8 = e9.params[0] || 1;
            for (let e10 = this._activeBuffer.scrollTop; e10 <= this._activeBuffer.scrollBottom; ++e10) {
              const i8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + e10);
              i8.deleteCells(this._activeBuffer.x, t8, this._activeBuffer.getNullCell(this._eraseAttrData())), i8.isWrapped = false;
            }
            return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
          }
          eraseChars(e9) {
            this._restrictCursor();
            const t8 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
            return t8 && (t8.replaceCells(this._activeBuffer.x, this._activeBuffer.x + (e9.params[0] || 1), this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
          }
          repeatPrecedingCharacter(e9) {
            const t8 = this._parser.precedingJoinState;
            if (!t8) return true;
            const i8 = e9.params[0] || 1, s7 = g2.UnicodeService.extractWidth(t8), r9 = this._activeBuffer.x - s7, n9 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).getString(r9), a4 = new Uint32Array(n9.length * i8);
            let o9 = 0;
            for (let e10 = 0; e10 < n9.length; ) {
              const t9 = n9.codePointAt(e10) || 0;
              a4[o9++] = t9, e10 += t9 > 65535 ? 2 : 1;
            }
            let h6 = o9;
            for (let e10 = 1; e10 < i8; ++e10) a4.copyWithin(h6, 0, o9), h6 += o9;
            return this.print(a4, 0, h6), true;
          }
          sendDeviceAttributesPrimary(e9) {
            return e9.params[0] > 0 || (this._is("xterm") || this._is("rxvt-unicode") || this._is("screen") ? this._coreService.triggerDataEvent(n8.C0.ESC + "[?1;2c") : this._is("linux") && this._coreService.triggerDataEvent(n8.C0.ESC + "[?6c")), true;
          }
          sendDeviceAttributesSecondary(e9) {
            return e9.params[0] > 0 || (this._is("xterm") ? this._coreService.triggerDataEvent(n8.C0.ESC + "[>0;276;0c") : this._is("rxvt-unicode") ? this._coreService.triggerDataEvent(n8.C0.ESC + "[>85;95;0c") : this._is("linux") ? this._coreService.triggerDataEvent(e9.params[0] + "c") : this._is("screen") && this._coreService.triggerDataEvent(n8.C0.ESC + "[>83;40003;0c")), true;
          }
          _is(e9) {
            return 0 === (this._optionsService.rawOptions.termName + "").indexOf(e9);
          }
          setMode(e9) {
            for (let t8 = 0; t8 < e9.length; t8++) switch (e9.params[t8]) {
              case 4:
                this._coreService.modes.insertMode = true;
                break;
              case 20:
                this._optionsService.options.convertEol = true;
            }
            return true;
          }
          setModePrivate(e9) {
            for (let t8 = 0; t8 < e9.length; t8++) switch (e9.params[t8]) {
              case 1:
                this._coreService.decPrivateModes.applicationCursorKeys = true;
                break;
              case 2:
                this._charsetService.setgCharset(0, a3.DEFAULT_CHARSET), this._charsetService.setgCharset(1, a3.DEFAULT_CHARSET), this._charsetService.setgCharset(2, a3.DEFAULT_CHARSET), this._charsetService.setgCharset(3, a3.DEFAULT_CHARSET);
                break;
              case 3:
                this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(132, this._bufferService.rows), this._onRequestReset.fire());
                break;
              case 6:
                this._coreService.decPrivateModes.origin = true, this._setCursor(0, 0);
                break;
              case 7:
                this._coreService.decPrivateModes.wraparound = true;
                break;
              case 12:
                this._optionsService.options.cursorBlink = true;
                break;
              case 45:
                this._coreService.decPrivateModes.reverseWraparound = true;
                break;
              case 66:
                this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = true, this._onRequestSyncScrollBar.fire();
                break;
              case 9:
                this._coreMouseService.activeProtocol = "X10";
                break;
              case 1e3:
                this._coreMouseService.activeProtocol = "VT200";
                break;
              case 1002:
                this._coreMouseService.activeProtocol = "DRAG";
                break;
              case 1003:
                this._coreMouseService.activeProtocol = "ANY";
                break;
              case 1004:
                this._coreService.decPrivateModes.sendFocus = true, this._onRequestSendFocus.fire();
                break;
              case 1005:
                this._logService.debug("DECSET 1005 not supported (see #2507)");
                break;
              case 1006:
                this._coreMouseService.activeEncoding = "SGR";
                break;
              case 1015:
                this._logService.debug("DECSET 1015 not supported (see #2507)");
                break;
              case 1016:
                this._coreMouseService.activeEncoding = "SGR_PIXELS";
                break;
              case 25:
                this._coreService.isCursorHidden = false;
                break;
              case 1048:
                this.saveCursor();
                break;
              case 1049:
                this.saveCursor();
              case 47:
              case 1047:
                this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()), this._coreService.isCursorInitialized = true, this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1), this._onRequestSyncScrollBar.fire();
                break;
              case 2004:
                this._coreService.decPrivateModes.bracketedPasteMode = true;
            }
            return true;
          }
          resetMode(e9) {
            for (let t8 = 0; t8 < e9.length; t8++) switch (e9.params[t8]) {
              case 4:
                this._coreService.modes.insertMode = false;
                break;
              case 20:
                this._optionsService.options.convertEol = false;
            }
            return true;
          }
          resetModePrivate(e9) {
            for (let t8 = 0; t8 < e9.length; t8++) switch (e9.params[t8]) {
              case 1:
                this._coreService.decPrivateModes.applicationCursorKeys = false;
                break;
              case 3:
                this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(80, this._bufferService.rows), this._onRequestReset.fire());
                break;
              case 6:
                this._coreService.decPrivateModes.origin = false, this._setCursor(0, 0);
                break;
              case 7:
                this._coreService.decPrivateModes.wraparound = false;
                break;
              case 12:
                this._optionsService.options.cursorBlink = false;
                break;
              case 45:
                this._coreService.decPrivateModes.reverseWraparound = false;
                break;
              case 66:
                this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = false, this._onRequestSyncScrollBar.fire();
                break;
              case 9:
              case 1e3:
              case 1002:
              case 1003:
                this._coreMouseService.activeProtocol = "NONE";
                break;
              case 1004:
                this._coreService.decPrivateModes.sendFocus = false;
                break;
              case 1005:
                this._logService.debug("DECRST 1005 not supported (see #2507)");
                break;
              case 1006:
              case 1016:
                this._coreMouseService.activeEncoding = "DEFAULT";
                break;
              case 1015:
                this._logService.debug("DECRST 1015 not supported (see #2507)");
                break;
              case 25:
                this._coreService.isCursorHidden = true;
                break;
              case 1048:
                this.restoreCursor();
                break;
              case 1049:
              case 47:
              case 1047:
                this._bufferService.buffers.activateNormalBuffer(), 1049 === e9.params[t8] && this.restoreCursor(), this._coreService.isCursorInitialized = true, this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1), this._onRequestSyncScrollBar.fire();
                break;
              case 2004:
                this._coreService.decPrivateModes.bracketedPasteMode = false;
            }
            return true;
          }
          requestMode(e9, t8) {
            const i8 = this._coreService.decPrivateModes, { activeProtocol: s7, activeEncoding: r9 } = this._coreMouseService, a4 = this._coreService, { buffers: o9, cols: h6 } = this._bufferService, { active: c6, alt: l4 } = o9, _3 = this._optionsService.rawOptions, d4 = (e10) => e10 ? 1 : 2, f6 = e9.params[0];
            return u4 = f6, p4 = t8 ? 2 === f6 ? 4 : 4 === f6 ? d4(a4.modes.insertMode) : 12 === f6 ? 3 : 20 === f6 ? d4(_3.convertEol) : 0 : 1 === f6 ? d4(i8.applicationCursorKeys) : 3 === f6 ? _3.windowOptions.setWinLines ? 80 === h6 ? 2 : 132 === h6 ? 1 : 0 : 0 : 6 === f6 ? d4(i8.origin) : 7 === f6 ? d4(i8.wraparound) : 8 === f6 ? 3 : 9 === f6 ? d4("X10" === s7) : 12 === f6 ? d4(_3.cursorBlink) : 25 === f6 ? d4(!a4.isCursorHidden) : 45 === f6 ? d4(i8.reverseWraparound) : 66 === f6 ? d4(i8.applicationKeypad) : 67 === f6 ? 4 : 1e3 === f6 ? d4("VT200" === s7) : 1002 === f6 ? d4("DRAG" === s7) : 1003 === f6 ? d4("ANY" === s7) : 1004 === f6 ? d4(i8.sendFocus) : 1005 === f6 ? 4 : 1006 === f6 ? d4("SGR" === r9) : 1015 === f6 ? 4 : 1016 === f6 ? d4("SGR_PIXELS" === r9) : 1048 === f6 ? 1 : 47 === f6 || 1047 === f6 || 1049 === f6 ? d4(c6 === l4) : 2004 === f6 ? d4(i8.bracketedPasteMode) : 0, a4.triggerDataEvent(`${n8.C0.ESC}[${t8 ? "" : "?"}${u4};${p4}$y`), true;
            var u4, p4;
          }
          _updateAttrColor(e9, t8, i8, s7, r9) {
            return 2 === t8 ? (e9 |= 50331648, e9 &= -16777216, e9 |= u3.AttributeData.fromColorRGB([i8, s7, r9])) : 5 === t8 && (e9 &= -50331904, e9 |= 33554432 | 255 & i8), e9;
          }
          _extractColor(e9, t8, i8) {
            const s7 = [0, 0, -1, 0, 0, 0];
            let r9 = 0, n9 = 0;
            do {
              if (s7[n9 + r9] = e9.params[t8 + n9], e9.hasSubParams(t8 + n9)) {
                const i9 = e9.getSubParams(t8 + n9);
                let a4 = 0;
                do {
                  5 === s7[1] && (r9 = 1), s7[n9 + a4 + 1 + r9] = i9[a4];
                } while (++a4 < i9.length && a4 + n9 + 1 + r9 < s7.length);
                break;
              }
              if (5 === s7[1] && n9 + r9 >= 2 || 2 === s7[1] && n9 + r9 >= 5) break;
              s7[1] && (r9 = 1);
            } while (++n9 + t8 < e9.length && n9 + r9 < s7.length);
            for (let e10 = 2; e10 < s7.length; ++e10) -1 === s7[e10] && (s7[e10] = 0);
            switch (s7[0]) {
              case 38:
                i8.fg = this._updateAttrColor(i8.fg, s7[1], s7[3], s7[4], s7[5]);
                break;
              case 48:
                i8.bg = this._updateAttrColor(i8.bg, s7[1], s7[3], s7[4], s7[5]);
                break;
              case 58:
                i8.extended = i8.extended.clone(), i8.extended.underlineColor = this._updateAttrColor(i8.extended.underlineColor, s7[1], s7[3], s7[4], s7[5]);
            }
            return n9;
          }
          _processUnderline(e9, t8) {
            t8.extended = t8.extended.clone(), (!~e9 || e9 > 5) && (e9 = 1), t8.extended.underlineStyle = e9, t8.fg |= 268435456, 0 === e9 && (t8.fg &= -268435457), t8.updateExtended();
          }
          _processSGR0(e9) {
            e9.fg = l3.DEFAULT_ATTR_DATA.fg, e9.bg = l3.DEFAULT_ATTR_DATA.bg, e9.extended = e9.extended.clone(), e9.extended.underlineStyle = 0, e9.extended.underlineColor &= -67108864, e9.updateExtended();
          }
          charAttributes(e9) {
            if (1 === e9.length && 0 === e9.params[0]) return this._processSGR0(this._curAttrData), true;
            const t8 = e9.length;
            let i8;
            const s7 = this._curAttrData;
            for (let r9 = 0; r9 < t8; r9++) i8 = e9.params[r9], i8 >= 30 && i8 <= 37 ? (s7.fg &= -50331904, s7.fg |= 16777216 | i8 - 30) : i8 >= 40 && i8 <= 47 ? (s7.bg &= -50331904, s7.bg |= 16777216 | i8 - 40) : i8 >= 90 && i8 <= 97 ? (s7.fg &= -50331904, s7.fg |= 16777224 | i8 - 90) : i8 >= 100 && i8 <= 107 ? (s7.bg &= -50331904, s7.bg |= 16777224 | i8 - 100) : 0 === i8 ? this._processSGR0(s7) : 1 === i8 ? s7.fg |= 134217728 : 3 === i8 ? s7.bg |= 67108864 : 4 === i8 ? (s7.fg |= 268435456, this._processUnderline(e9.hasSubParams(r9) ? e9.getSubParams(r9)[0] : 1, s7)) : 5 === i8 ? s7.fg |= 536870912 : 7 === i8 ? s7.fg |= 67108864 : 8 === i8 ? s7.fg |= 1073741824 : 9 === i8 ? s7.fg |= 2147483648 : 2 === i8 ? s7.bg |= 134217728 : 21 === i8 ? this._processUnderline(2, s7) : 22 === i8 ? (s7.fg &= -134217729, s7.bg &= -134217729) : 23 === i8 ? s7.bg &= -67108865 : 24 === i8 ? (s7.fg &= -268435457, this._processUnderline(0, s7)) : 25 === i8 ? s7.fg &= -536870913 : 27 === i8 ? s7.fg &= -67108865 : 28 === i8 ? s7.fg &= -1073741825 : 29 === i8 ? s7.fg &= 2147483647 : 39 === i8 ? (s7.fg &= -67108864, s7.fg |= 16777215 & l3.DEFAULT_ATTR_DATA.fg) : 49 === i8 ? (s7.bg &= -67108864, s7.bg |= 16777215 & l3.DEFAULT_ATTR_DATA.bg) : 38 === i8 || 48 === i8 || 58 === i8 ? r9 += this._extractColor(e9, r9, s7) : 53 === i8 ? s7.bg |= 1073741824 : 55 === i8 ? s7.bg &= -1073741825 : 59 === i8 ? (s7.extended = s7.extended.clone(), s7.extended.underlineColor = -1, s7.updateExtended()) : 100 === i8 ? (s7.fg &= -67108864, s7.fg |= 16777215 & l3.DEFAULT_ATTR_DATA.fg, s7.bg &= -67108864, s7.bg |= 16777215 & l3.DEFAULT_ATTR_DATA.bg) : this._logService.debug("Unknown SGR attribute: %d.", i8);
            return true;
          }
          deviceStatus(e9) {
            switch (e9.params[0]) {
              case 5:
                this._coreService.triggerDataEvent(`${n8.C0.ESC}[0n`);
                break;
              case 6:
                const e10 = this._activeBuffer.y + 1, t8 = this._activeBuffer.x + 1;
                this._coreService.triggerDataEvent(`${n8.C0.ESC}[${e10};${t8}R`);
            }
            return true;
          }
          deviceStatusPrivate(e9) {
            if (6 === e9.params[0]) {
              const e10 = this._activeBuffer.y + 1, t8 = this._activeBuffer.x + 1;
              this._coreService.triggerDataEvent(`${n8.C0.ESC}[?${e10};${t8}R`);
            }
            return true;
          }
          softReset(e9) {
            return this._coreService.isCursorHidden = false, this._onRequestSyncScrollBar.fire(), this._activeBuffer.scrollTop = 0, this._activeBuffer.scrollBottom = this._bufferService.rows - 1, this._curAttrData = l3.DEFAULT_ATTR_DATA.clone(), this._coreService.reset(), this._charsetService.reset(), this._activeBuffer.savedX = 0, this._activeBuffer.savedY = this._activeBuffer.ybase, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, this._coreService.decPrivateModes.origin = false, true;
          }
          setCursorStyle(e9) {
            const t8 = e9.params[0] || 1;
            switch (t8) {
              case 1:
              case 2:
                this._optionsService.options.cursorStyle = "block";
                break;
              case 3:
              case 4:
                this._optionsService.options.cursorStyle = "underline";
                break;
              case 5:
              case 6:
                this._optionsService.options.cursorStyle = "bar";
            }
            const i8 = t8 % 2 == 1;
            return this._optionsService.options.cursorBlink = i8, true;
          }
          setScrollRegion(e9) {
            const t8 = e9.params[0] || 1;
            let i8;
            return (e9.length < 2 || (i8 = e9.params[1]) > this._bufferService.rows || 0 === i8) && (i8 = this._bufferService.rows), i8 > t8 && (this._activeBuffer.scrollTop = t8 - 1, this._activeBuffer.scrollBottom = i8 - 1, this._setCursor(0, 0)), true;
          }
          windowOptions(e9) {
            if (!y3(e9.params[0], this._optionsService.rawOptions.windowOptions)) return true;
            const t8 = e9.length > 1 ? e9.params[1] : 0;
            switch (e9.params[0]) {
              case 14:
                2 !== t8 && this._onRequestWindowsOptionsReport.fire(w2.GET_WIN_SIZE_PIXELS);
                break;
              case 16:
                this._onRequestWindowsOptionsReport.fire(w2.GET_CELL_SIZE_PIXELS);
                break;
              case 18:
                this._bufferService && this._coreService.triggerDataEvent(`${n8.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);
                break;
              case 22:
                0 !== t8 && 2 !== t8 || (this._windowTitleStack.push(this._windowTitle), this._windowTitleStack.length > 10 && this._windowTitleStack.shift()), 0 !== t8 && 1 !== t8 || (this._iconNameStack.push(this._iconName), this._iconNameStack.length > 10 && this._iconNameStack.shift());
                break;
              case 23:
                0 !== t8 && 2 !== t8 || this._windowTitleStack.length && this.setTitle(this._windowTitleStack.pop()), 0 !== t8 && 1 !== t8 || this._iconNameStack.length && this.setIconName(this._iconNameStack.pop());
            }
            return true;
          }
          saveCursor(e9) {
            return this._activeBuffer.savedX = this._activeBuffer.x, this._activeBuffer.savedY = this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, true;
          }
          restoreCursor(e9) {
            return this._activeBuffer.x = this._activeBuffer.savedX || 0, this._activeBuffer.y = Math.max(this._activeBuffer.savedY - this._activeBuffer.ybase, 0), this._curAttrData.fg = this._activeBuffer.savedCurAttrData.fg, this._curAttrData.bg = this._activeBuffer.savedCurAttrData.bg, this._charsetService.charset = this._savedCharset, this._activeBuffer.savedCharset && (this._charsetService.charset = this._activeBuffer.savedCharset), this._restrictCursor(), true;
          }
          setTitle(e9) {
            return this._windowTitle = e9, this._onTitleChange.fire(e9), true;
          }
          setIconName(e9) {
            return this._iconName = e9, true;
          }
          setOrReportIndexedColor(e9) {
            const t8 = [], i8 = e9.split(";");
            for (; i8.length > 1; ) {
              const e10 = i8.shift(), s7 = i8.shift();
              if (/^\d+$/.exec(e10)) {
                const i9 = parseInt(e10);
                if (L2(i9)) if ("?" === s7) t8.push({ type: 0, index: i9 });
                else {
                  const e11 = (0, S3.parseColor)(s7);
                  e11 && t8.push({ type: 1, index: i9, color: e11 });
                }
              }
            }
            return t8.length && this._onColor.fire(t8), true;
          }
          setHyperlink(e9) {
            const t8 = e9.split(";");
            return !(t8.length < 2) && (t8[1] ? this._createHyperlink(t8[0], t8[1]) : !t8[0] && this._finishHyperlink());
          }
          _createHyperlink(e9, t8) {
            this._getCurrentLinkId() && this._finishHyperlink();
            const i8 = e9.split(":");
            let s7;
            const r9 = i8.findIndex((e10) => e10.startsWith("id="));
            return -1 !== r9 && (s7 = i8[r9].slice(3) || void 0), this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = this._oscLinkService.registerLink({ id: s7, uri: t8 }), this._curAttrData.updateExtended(), true;
          }
          _finishHyperlink() {
            return this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = 0, this._curAttrData.updateExtended(), true;
          }
          _setOrReportSpecialColor(e9, t8) {
            const i8 = e9.split(";");
            for (let e10 = 0; e10 < i8.length && !(t8 >= this._specialColors.length); ++e10, ++t8) if ("?" === i8[e10]) this._onColor.fire([{ type: 0, index: this._specialColors[t8] }]);
            else {
              const s7 = (0, S3.parseColor)(i8[e10]);
              s7 && this._onColor.fire([{ type: 1, index: this._specialColors[t8], color: s7 }]);
            }
            return true;
          }
          setOrReportFgColor(e9) {
            return this._setOrReportSpecialColor(e9, 0);
          }
          setOrReportBgColor(e9) {
            return this._setOrReportSpecialColor(e9, 1);
          }
          setOrReportCursorColor(e9) {
            return this._setOrReportSpecialColor(e9, 2);
          }
          restoreIndexedColor(e9) {
            if (!e9) return this._onColor.fire([{ type: 2 }]), true;
            const t8 = [], i8 = e9.split(";");
            for (let e10 = 0; e10 < i8.length; ++e10) if (/^\d+$/.exec(i8[e10])) {
              const s7 = parseInt(i8[e10]);
              L2(s7) && t8.push({ type: 2, index: s7 });
            }
            return t8.length && this._onColor.fire(t8), true;
          }
          restoreFgColor(e9) {
            return this._onColor.fire([{ type: 2, index: 256 }]), true;
          }
          restoreBgColor(e9) {
            return this._onColor.fire([{ type: 2, index: 257 }]), true;
          }
          restoreCursorColor(e9) {
            return this._onColor.fire([{ type: 2, index: 258 }]), true;
          }
          nextLine() {
            return this._activeBuffer.x = 0, this.index(), true;
          }
          keypadApplicationMode() {
            return this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = true, this._onRequestSyncScrollBar.fire(), true;
          }
          keypadNumericMode() {
            return this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = false, this._onRequestSyncScrollBar.fire(), true;
          }
          selectDefaultCharset() {
            return this._charsetService.setgLevel(0), this._charsetService.setgCharset(0, a3.DEFAULT_CHARSET), true;
          }
          selectCharset(e9) {
            return 2 !== e9.length ? (this.selectDefaultCharset(), true) : ("/" === e9[0] || this._charsetService.setgCharset(m2[e9[0]], a3.CHARSETS[e9[1]] || a3.DEFAULT_CHARSET), true);
          }
          index() {
            return this._restrictCursor(), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._restrictCursor(), true;
          }
          tabSet() {
            return this._activeBuffer.tabs[this._activeBuffer.x] = true, true;
          }
          reverseIndex() {
            if (this._restrictCursor(), this._activeBuffer.y === this._activeBuffer.scrollTop) {
              const e9 = this._activeBuffer.scrollBottom - this._activeBuffer.scrollTop;
              this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase + this._activeBuffer.y, e9, 1), this._activeBuffer.lines.set(this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.getBlankLine(this._eraseAttrData())), this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);
            } else this._activeBuffer.y--, this._restrictCursor();
            return true;
          }
          fullReset() {
            return this._parser.reset(), this._onRequestReset.fire(), true;
          }
          reset() {
            this._curAttrData = l3.DEFAULT_ATTR_DATA.clone(), this._eraseAttrDataInternal = l3.DEFAULT_ATTR_DATA.clone();
          }
          _eraseAttrData() {
            return this._eraseAttrDataInternal.bg &= -67108864, this._eraseAttrDataInternal.bg |= 67108863 & this._curAttrData.bg, this._eraseAttrDataInternal;
          }
          setgLevel(e9) {
            return this._charsetService.setgLevel(e9), true;
          }
          screenAlignmentPattern() {
            const e9 = new f5.CellData();
            e9.content = 1 << 22 | "E".charCodeAt(0), e9.fg = this._curAttrData.fg, e9.bg = this._curAttrData.bg, this._setCursor(0, 0);
            for (let t8 = 0; t8 < this._bufferService.rows; ++t8) {
              const i8 = this._activeBuffer.ybase + this._activeBuffer.y + t8, s7 = this._activeBuffer.lines.get(i8);
              s7 && (s7.fill(e9), s7.isWrapped = false);
            }
            return this._dirtyRowTracker.markAllDirty(), this._setCursor(0, 0), true;
          }
          requestStatusString(e9, t8) {
            const i8 = this._bufferService.buffer, s7 = this._optionsService.rawOptions;
            return ((e10) => (this._coreService.triggerDataEvent(`${n8.C0.ESC}${e10}${n8.C0.ESC}\\`), true))('"q' === e9 ? `P1$r${this._curAttrData.isProtected() ? 1 : 0}"q` : '"p' === e9 ? 'P1$r61;1"p' : "r" === e9 ? `P1$r${i8.scrollTop + 1};${i8.scrollBottom + 1}r` : "m" === e9 ? "P1$r0m" : " q" === e9 ? `P1$r${{ block: 2, underline: 4, bar: 6 }[s7.cursorStyle] - (s7.cursorBlink ? 1 : 0)} q` : "P0$r");
          }
          markRangeDirty(e9, t8) {
            this._dirtyRowTracker.markRangeDirty(e9, t8);
          }
        }
        t7.InputHandler = E2;
        let A2 = class {
          constructor(e9) {
            this._bufferService = e9, this.clearRange();
          }
          clearRange() {
            this.start = this._bufferService.buffer.y, this.end = this._bufferService.buffer.y;
          }
          markDirty(e9) {
            e9 < this.start ? this.start = e9 : e9 > this.end && (this.end = e9);
          }
          markRangeDirty(e9, t8) {
            e9 > t8 && (B2 = e9, e9 = t8, t8 = B2), e9 < this.start && (this.start = e9), t8 > this.end && (this.end = t8);
          }
          markAllDirty() {
            this.markRangeDirty(0, this._bufferService.rows - 1);
          }
        };
        function L2(e9) {
          return 0 <= e9 && e9 < 256;
        }
        A2 = s6([r8(0, p3.IBufferService)], A2);
      }, 844: (e8, t7) => {
        function i7(e9) {
          for (const t8 of e9) t8.dispose();
          e9.length = 0;
        }
        Object.defineProperty(t7, "__esModule", { value: true }), t7.getDisposeArrayDisposable = t7.disposeArray = t7.toDisposable = t7.MutableDisposable = t7.Disposable = void 0, t7.Disposable = class {
          constructor() {
            this._disposables = [], this._isDisposed = false;
          }
          dispose() {
            this._isDisposed = true;
            for (const e9 of this._disposables) e9.dispose();
            this._disposables.length = 0;
          }
          register(e9) {
            return this._disposables.push(e9), e9;
          }
          unregister(e9) {
            const t8 = this._disposables.indexOf(e9);
            -1 !== t8 && this._disposables.splice(t8, 1);
          }
        }, t7.MutableDisposable = class {
          constructor() {
            this._isDisposed = false;
          }
          get value() {
            return this._isDisposed ? void 0 : this._value;
          }
          set value(e9) {
            this._isDisposed || e9 === this._value || (this._value?.dispose(), this._value = e9);
          }
          clear() {
            this.value = void 0;
          }
          dispose() {
            this._isDisposed = true, this._value?.dispose(), this._value = void 0;
          }
        }, t7.toDisposable = function(e9) {
          return { dispose: e9 };
        }, t7.disposeArray = i7, t7.getDisposeArrayDisposable = function(e9) {
          return { dispose: () => i7(e9) };
        };
      }, 114: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.isChromeOS = t7.isLinux = t7.isWindows = t7.isIphone = t7.isIpad = t7.isMac = t7.getSafariVersion = t7.isSafari = t7.isLegacyEdge = t7.isFirefox = t7.isNode = void 0, t7.isNode = "undefined" != typeof process && "title" in process;
        const i7 = t7.isNode ? "node" : navigator.userAgent, s6 = t7.isNode ? "node" : navigator.platform;
        t7.isFirefox = i7.includes("Firefox"), t7.isLegacyEdge = i7.includes("Edge"), t7.isSafari = /^((?!chrome|android).)*safari/i.test(i7), t7.getSafariVersion = function() {
          if (!t7.isSafari) return 0;
          const e9 = i7.match(/Version\/(\d+)/);
          return null === e9 || e9.length < 2 ? 0 : parseInt(e9[1]);
        }, t7.isMac = ["Macintosh", "MacIntel", "MacPPC", "Mac68K"].includes(s6), t7.isIpad = "iPad" === s6, t7.isIphone = "iPhone" === s6, t7.isWindows = ["Windows", "Win16", "Win32", "WinCE"].includes(s6), t7.isLinux = s6.indexOf("Linux") >= 0, t7.isChromeOS = /\bCrOS\b/.test(i7);
      }, 226: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.DebouncedIdleTask = t7.IdleTaskQueue = t7.PriorityTaskQueue = void 0;
        const s6 = i7(114);
        class r8 {
          constructor() {
            this._tasks = [], this._i = 0;
          }
          enqueue(e9) {
            this._tasks.push(e9), this._start();
          }
          flush() {
            for (; this._i < this._tasks.length; ) this._tasks[this._i]() || this._i++;
            this.clear();
          }
          clear() {
            this._idleCallback && (this._cancelCallback(this._idleCallback), this._idleCallback = void 0), this._i = 0, this._tasks.length = 0;
          }
          _start() {
            this._idleCallback || (this._idleCallback = this._requestCallback(this._process.bind(this)));
          }
          _process(e9) {
            this._idleCallback = void 0;
            let t8 = 0, i8 = 0, s7 = e9.timeRemaining(), r9 = 0;
            for (; this._i < this._tasks.length; ) {
              if (t8 = Date.now(), this._tasks[this._i]() || this._i++, t8 = Math.max(1, Date.now() - t8), i8 = Math.max(t8, i8), r9 = e9.timeRemaining(), 1.5 * i8 > r9) return s7 - t8 < -20 && console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s7 - t8))}ms`), void this._start();
              s7 = r9;
            }
            this.clear();
          }
        }
        class n8 extends r8 {
          _requestCallback(e9) {
            return setTimeout(() => e9(this._createDeadline(16)));
          }
          _cancelCallback(e9) {
            clearTimeout(e9);
          }
          _createDeadline(e9) {
            const t8 = Date.now() + e9;
            return { timeRemaining: () => Math.max(0, t8 - Date.now()) };
          }
        }
        t7.PriorityTaskQueue = n8, t7.IdleTaskQueue = !s6.isNode && "requestIdleCallback" in window ? class extends r8 {
          _requestCallback(e9) {
            return requestIdleCallback(e9);
          }
          _cancelCallback(e9) {
            cancelIdleCallback(e9);
          }
        } : n8, t7.DebouncedIdleTask = class {
          constructor() {
            this._queue = new t7.IdleTaskQueue();
          }
          set(e9) {
            this._queue.clear(), this._queue.enqueue(e9);
          }
          flush() {
            this._queue.flush();
          }
        };
      }, 282: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.updateWindowsModeWrappedState = void 0;
        const s6 = i7(643);
        t7.updateWindowsModeWrappedState = function(e9) {
          const t8 = e9.buffer.lines.get(e9.buffer.ybase + e9.buffer.y - 1), i8 = t8?.get(e9.cols - 1), r8 = e9.buffer.lines.get(e9.buffer.ybase + e9.buffer.y);
          r8 && i8 && (r8.isWrapped = i8[s6.CHAR_DATA_CODE_INDEX] !== s6.NULL_CELL_CODE && i8[s6.CHAR_DATA_CODE_INDEX] !== s6.WHITESPACE_CELL_CODE);
        };
      }, 734: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.ExtendedAttrs = t7.AttributeData = void 0;
        class i7 {
          constructor() {
            this.fg = 0, this.bg = 0, this.extended = new s6();
          }
          static toColorRGB(e9) {
            return [e9 >>> 16 & 255, e9 >>> 8 & 255, 255 & e9];
          }
          static fromColorRGB(e9) {
            return (255 & e9[0]) << 16 | (255 & e9[1]) << 8 | 255 & e9[2];
          }
          clone() {
            const e9 = new i7();
            return e9.fg = this.fg, e9.bg = this.bg, e9.extended = this.extended.clone(), e9;
          }
          isInverse() {
            return 67108864 & this.fg;
          }
          isBold() {
            return 134217728 & this.fg;
          }
          isUnderline() {
            return this.hasExtendedAttrs() && 0 !== this.extended.underlineStyle ? 1 : 268435456 & this.fg;
          }
          isBlink() {
            return 536870912 & this.fg;
          }
          isInvisible() {
            return 1073741824 & this.fg;
          }
          isItalic() {
            return 67108864 & this.bg;
          }
          isDim() {
            return 134217728 & this.bg;
          }
          isStrikethrough() {
            return 2147483648 & this.fg;
          }
          isProtected() {
            return 536870912 & this.bg;
          }
          isOverline() {
            return 1073741824 & this.bg;
          }
          getFgColorMode() {
            return 50331648 & this.fg;
          }
          getBgColorMode() {
            return 50331648 & this.bg;
          }
          isFgRGB() {
            return 50331648 == (50331648 & this.fg);
          }
          isBgRGB() {
            return 50331648 == (50331648 & this.bg);
          }
          isFgPalette() {
            return 16777216 == (50331648 & this.fg) || 33554432 == (50331648 & this.fg);
          }
          isBgPalette() {
            return 16777216 == (50331648 & this.bg) || 33554432 == (50331648 & this.bg);
          }
          isFgDefault() {
            return 0 == (50331648 & this.fg);
          }
          isBgDefault() {
            return 0 == (50331648 & this.bg);
          }
          isAttributeDefault() {
            return 0 === this.fg && 0 === this.bg;
          }
          getFgColor() {
            switch (50331648 & this.fg) {
              case 16777216:
              case 33554432:
                return 255 & this.fg;
              case 50331648:
                return 16777215 & this.fg;
              default:
                return -1;
            }
          }
          getBgColor() {
            switch (50331648 & this.bg) {
              case 16777216:
              case 33554432:
                return 255 & this.bg;
              case 50331648:
                return 16777215 & this.bg;
              default:
                return -1;
            }
          }
          hasExtendedAttrs() {
            return 268435456 & this.bg;
          }
          updateExtended() {
            this.extended.isEmpty() ? this.bg &= -268435457 : this.bg |= 268435456;
          }
          getUnderlineColor() {
            if (268435456 & this.bg && ~this.extended.underlineColor) switch (50331648 & this.extended.underlineColor) {
              case 16777216:
              case 33554432:
                return 255 & this.extended.underlineColor;
              case 50331648:
                return 16777215 & this.extended.underlineColor;
              default:
                return this.getFgColor();
            }
            return this.getFgColor();
          }
          getUnderlineColorMode() {
            return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 & this.extended.underlineColor : this.getFgColorMode();
          }
          isUnderlineColorRGB() {
            return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 == (50331648 & this.extended.underlineColor) : this.isFgRGB();
          }
          isUnderlineColorPalette() {
            return 268435456 & this.bg && ~this.extended.underlineColor ? 16777216 == (50331648 & this.extended.underlineColor) || 33554432 == (50331648 & this.extended.underlineColor) : this.isFgPalette();
          }
          isUnderlineColorDefault() {
            return 268435456 & this.bg && ~this.extended.underlineColor ? 0 == (50331648 & this.extended.underlineColor) : this.isFgDefault();
          }
          getUnderlineStyle() {
            return 268435456 & this.fg ? 268435456 & this.bg ? this.extended.underlineStyle : 1 : 0;
          }
          getUnderlineVariantOffset() {
            return this.extended.underlineVariantOffset;
          }
        }
        t7.AttributeData = i7;
        class s6 {
          get ext() {
            return this._urlId ? -469762049 & this._ext | this.underlineStyle << 26 : this._ext;
          }
          set ext(e9) {
            this._ext = e9;
          }
          get underlineStyle() {
            return this._urlId ? 5 : (469762048 & this._ext) >> 26;
          }
          set underlineStyle(e9) {
            this._ext &= -469762049, this._ext |= e9 << 26 & 469762048;
          }
          get underlineColor() {
            return 67108863 & this._ext;
          }
          set underlineColor(e9) {
            this._ext &= -67108864, this._ext |= 67108863 & e9;
          }
          get urlId() {
            return this._urlId;
          }
          set urlId(e9) {
            this._urlId = e9;
          }
          get underlineVariantOffset() {
            const e9 = (3758096384 & this._ext) >> 29;
            return e9 < 0 ? 4294967288 ^ e9 : e9;
          }
          set underlineVariantOffset(e9) {
            this._ext &= 536870911, this._ext |= e9 << 29 & 3758096384;
          }
          constructor(e9 = 0, t8 = 0) {
            this._ext = 0, this._urlId = 0, this._ext = e9, this._urlId = t8;
          }
          clone() {
            return new s6(this._ext, this._urlId);
          }
          isEmpty() {
            return 0 === this.underlineStyle && 0 === this._urlId;
          }
        }
        t7.ExtendedAttrs = s6;
      }, 92: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.Buffer = t7.MAX_BUFFER_SIZE = void 0;
        const s6 = i7(349), r8 = i7(226), n8 = i7(734), a3 = i7(437), o8 = i7(634), h5 = i7(511), c5 = i7(643), l3 = i7(863), _2 = i7(116);
        t7.MAX_BUFFER_SIZE = 4294967295, t7.Buffer = class {
          constructor(e9, t8, i8) {
            this._hasScrollback = e9, this._optionsService = t8, this._bufferService = i8, this.ydisp = 0, this.ybase = 0, this.y = 0, this.x = 0, this.tabs = {}, this.savedY = 0, this.savedX = 0, this.savedCurAttrData = a3.DEFAULT_ATTR_DATA.clone(), this.savedCharset = _2.DEFAULT_CHARSET, this.markers = [], this._nullCell = h5.CellData.fromCharData([0, c5.NULL_CELL_CHAR, c5.NULL_CELL_WIDTH, c5.NULL_CELL_CODE]), this._whitespaceCell = h5.CellData.fromCharData([0, c5.WHITESPACE_CELL_CHAR, c5.WHITESPACE_CELL_WIDTH, c5.WHITESPACE_CELL_CODE]), this._isClearing = false, this._memoryCleanupQueue = new r8.IdleTaskQueue(), this._memoryCleanupPosition = 0, this._cols = this._bufferService.cols, this._rows = this._bufferService.rows, this.lines = new s6.CircularList(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops();
          }
          getNullCell(e9) {
            return e9 ? (this._nullCell.fg = e9.fg, this._nullCell.bg = e9.bg, this._nullCell.extended = e9.extended) : (this._nullCell.fg = 0, this._nullCell.bg = 0, this._nullCell.extended = new n8.ExtendedAttrs()), this._nullCell;
          }
          getWhitespaceCell(e9) {
            return e9 ? (this._whitespaceCell.fg = e9.fg, this._whitespaceCell.bg = e9.bg, this._whitespaceCell.extended = e9.extended) : (this._whitespaceCell.fg = 0, this._whitespaceCell.bg = 0, this._whitespaceCell.extended = new n8.ExtendedAttrs()), this._whitespaceCell;
          }
          getBlankLine(e9, t8) {
            return new a3.BufferLine(this._bufferService.cols, this.getNullCell(e9), t8);
          }
          get hasScrollback() {
            return this._hasScrollback && this.lines.maxLength > this._rows;
          }
          get isCursorInViewport() {
            const e9 = this.ybase + this.y - this.ydisp;
            return e9 >= 0 && e9 < this._rows;
          }
          _getCorrectBufferLength(e9) {
            if (!this._hasScrollback) return e9;
            const i8 = e9 + this._optionsService.rawOptions.scrollback;
            return i8 > t7.MAX_BUFFER_SIZE ? t7.MAX_BUFFER_SIZE : i8;
          }
          fillViewportRows(e9) {
            if (0 === this.lines.length) {
              void 0 === e9 && (e9 = a3.DEFAULT_ATTR_DATA);
              let t8 = this._rows;
              for (; t8--; ) this.lines.push(this.getBlankLine(e9));
            }
          }
          clear() {
            this.ydisp = 0, this.ybase = 0, this.y = 0, this.x = 0, this.lines = new s6.CircularList(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops();
          }
          resize(e9, t8) {
            const i8 = this.getNullCell(a3.DEFAULT_ATTR_DATA);
            let s7 = 0;
            const r9 = this._getCorrectBufferLength(t8);
            if (r9 > this.lines.maxLength && (this.lines.maxLength = r9), this.lines.length > 0) {
              if (this._cols < e9) for (let t9 = 0; t9 < this.lines.length; t9++) s7 += +this.lines.get(t9).resize(e9, i8);
              let n9 = 0;
              if (this._rows < t8) for (let s8 = this._rows; s8 < t8; s8++) this.lines.length < t8 + this.ybase && (this._optionsService.rawOptions.windowsMode || void 0 !== this._optionsService.rawOptions.windowsPty.backend || void 0 !== this._optionsService.rawOptions.windowsPty.buildNumber ? this.lines.push(new a3.BufferLine(e9, i8)) : this.ybase > 0 && this.lines.length <= this.ybase + this.y + n9 + 1 ? (this.ybase--, n9++, this.ydisp > 0 && this.ydisp--) : this.lines.push(new a3.BufferLine(e9, i8)));
              else for (let e10 = this._rows; e10 > t8; e10--) this.lines.length > t8 + this.ybase && (this.lines.length > this.ybase + this.y + 1 ? this.lines.pop() : (this.ybase++, this.ydisp++));
              if (r9 < this.lines.maxLength) {
                const e10 = this.lines.length - r9;
                e10 > 0 && (this.lines.trimStart(e10), this.ybase = Math.max(this.ybase - e10, 0), this.ydisp = Math.max(this.ydisp - e10, 0), this.savedY = Math.max(this.savedY - e10, 0)), this.lines.maxLength = r9;
              }
              this.x = Math.min(this.x, e9 - 1), this.y = Math.min(this.y, t8 - 1), n9 && (this.y += n9), this.savedX = Math.min(this.savedX, e9 - 1), this.scrollTop = 0;
            }
            if (this.scrollBottom = t8 - 1, this._isReflowEnabled && (this._reflow(e9, t8), this._cols > e9)) for (let t9 = 0; t9 < this.lines.length; t9++) s7 += +this.lines.get(t9).resize(e9, i8);
            this._cols = e9, this._rows = t8, this._memoryCleanupQueue.clear(), s7 > 0.1 * this.lines.length && (this._memoryCleanupPosition = 0, this._memoryCleanupQueue.enqueue(() => this._batchedMemoryCleanup()));
          }
          _batchedMemoryCleanup() {
            let e9 = true;
            this._memoryCleanupPosition >= this.lines.length && (this._memoryCleanupPosition = 0, e9 = false);
            let t8 = 0;
            for (; this._memoryCleanupPosition < this.lines.length; ) if (t8 += this.lines.get(this._memoryCleanupPosition++).cleanupMemory(), t8 > 100) return true;
            return e9;
          }
          get _isReflowEnabled() {
            const e9 = this._optionsService.rawOptions.windowsPty;
            return e9 && e9.buildNumber ? this._hasScrollback && "conpty" === e9.backend && e9.buildNumber >= 21376 : this._hasScrollback && !this._optionsService.rawOptions.windowsMode;
          }
          _reflow(e9, t8) {
            this._cols !== e9 && (e9 > this._cols ? this._reflowLarger(e9, t8) : this._reflowSmaller(e9, t8));
          }
          _reflowLarger(e9, t8) {
            const i8 = (0, o8.reflowLargerGetLinesToRemove)(this.lines, this._cols, e9, this.ybase + this.y, this.getNullCell(a3.DEFAULT_ATTR_DATA));
            if (i8.length > 0) {
              const s7 = (0, o8.reflowLargerCreateNewLayout)(this.lines, i8);
              (0, o8.reflowLargerApplyNewLayout)(this.lines, s7.layout), this._reflowLargerAdjustViewport(e9, t8, s7.countRemoved);
            }
          }
          _reflowLargerAdjustViewport(e9, t8, i8) {
            const s7 = this.getNullCell(a3.DEFAULT_ATTR_DATA);
            let r9 = i8;
            for (; r9-- > 0; ) 0 === this.ybase ? (this.y > 0 && this.y--, this.lines.length < t8 && this.lines.push(new a3.BufferLine(e9, s7))) : (this.ydisp === this.ybase && this.ydisp--, this.ybase--);
            this.savedY = Math.max(this.savedY - i8, 0);
          }
          _reflowSmaller(e9, t8) {
            const i8 = this.getNullCell(a3.DEFAULT_ATTR_DATA), s7 = [];
            let r9 = 0;
            for (let n9 = this.lines.length - 1; n9 >= 0; n9--) {
              let h6 = this.lines.get(n9);
              if (!h6 || !h6.isWrapped && h6.getTrimmedLength() <= e9) continue;
              const c6 = [h6];
              for (; h6.isWrapped && n9 > 0; ) h6 = this.lines.get(--n9), c6.unshift(h6);
              const l4 = this.ybase + this.y;
              if (l4 >= n9 && l4 < n9 + c6.length) continue;
              const _3 = c6[c6.length - 1].getTrimmedLength(), d3 = (0, o8.reflowSmallerGetNewLineLengths)(c6, this._cols, e9), f5 = d3.length - c6.length;
              let u3;
              u3 = 0 === this.ybase && this.y !== this.lines.length - 1 ? Math.max(0, this.y - this.lines.maxLength + f5) : Math.max(0, this.lines.length - this.lines.maxLength + f5);
              const p3 = [];
              for (let e10 = 0; e10 < f5; e10++) {
                const e11 = this.getBlankLine(a3.DEFAULT_ATTR_DATA, true);
                p3.push(e11);
              }
              p3.length > 0 && (s7.push({ start: n9 + c6.length + r9, newLines: p3 }), r9 += p3.length), c6.push(...p3);
              let g2 = d3.length - 1, v2 = d3[g2];
              0 === v2 && (g2--, v2 = d3[g2]);
              let b3 = c6.length - f5 - 1, S3 = _3;
              for (; b3 >= 0; ) {
                const e10 = Math.min(S3, v2);
                if (void 0 === c6[g2]) break;
                if (c6[g2].copyCellsFrom(c6[b3], S3 - e10, v2 - e10, e10, true), v2 -= e10, 0 === v2 && (g2--, v2 = d3[g2]), S3 -= e10, 0 === S3) {
                  b3--;
                  const e11 = Math.max(b3, 0);
                  S3 = (0, o8.getWrappedLineTrimmedLength)(c6, e11, this._cols);
                }
              }
              for (let t9 = 0; t9 < c6.length; t9++) d3[t9] < e9 && c6[t9].setCell(d3[t9], i8);
              let m2 = f5 - u3;
              for (; m2-- > 0; ) 0 === this.ybase ? this.y < t8 - 1 ? (this.y++, this.lines.pop()) : (this.ybase++, this.ydisp++) : this.ybase < Math.min(this.lines.maxLength, this.lines.length + r9) - t8 && (this.ybase === this.ydisp && this.ydisp++, this.ybase++);
              this.savedY = Math.min(this.savedY + f5, this.ybase + t8 - 1);
            }
            if (s7.length > 0) {
              const e10 = [], t9 = [];
              for (let e11 = 0; e11 < this.lines.length; e11++) t9.push(this.lines.get(e11));
              const i9 = this.lines.length;
              let n9 = i9 - 1, a4 = 0, o9 = s7[a4];
              this.lines.length = Math.min(this.lines.maxLength, this.lines.length + r9);
              let h6 = 0;
              for (let c7 = Math.min(this.lines.maxLength - 1, i9 + r9 - 1); c7 >= 0; c7--) if (o9 && o9.start > n9 + h6) {
                for (let e11 = o9.newLines.length - 1; e11 >= 0; e11--) this.lines.set(c7--, o9.newLines[e11]);
                c7++, e10.push({ index: n9 + 1, amount: o9.newLines.length }), h6 += o9.newLines.length, o9 = s7[++a4];
              } else this.lines.set(c7, t9[n9--]);
              let c6 = 0;
              for (let t10 = e10.length - 1; t10 >= 0; t10--) e10[t10].index += c6, this.lines.onInsertEmitter.fire(e10[t10]), c6 += e10[t10].amount;
              const l4 = Math.max(0, i9 + r9 - this.lines.maxLength);
              l4 > 0 && this.lines.onTrimEmitter.fire(l4);
            }
          }
          translateBufferLineToString(e9, t8, i8 = 0, s7) {
            const r9 = this.lines.get(e9);
            return r9 ? r9.translateToString(t8, i8, s7) : "";
          }
          getWrappedRangeForLine(e9) {
            let t8 = e9, i8 = e9;
            for (; t8 > 0 && this.lines.get(t8).isWrapped; ) t8--;
            for (; i8 + 1 < this.lines.length && this.lines.get(i8 + 1).isWrapped; ) i8++;
            return { first: t8, last: i8 };
          }
          setupTabStops(e9) {
            for (null != e9 ? this.tabs[e9] || (e9 = this.prevStop(e9)) : (this.tabs = {}, e9 = 0); e9 < this._cols; e9 += this._optionsService.rawOptions.tabStopWidth) this.tabs[e9] = true;
          }
          prevStop(e9) {
            for (null == e9 && (e9 = this.x); !this.tabs[--e9] && e9 > 0; ) ;
            return e9 >= this._cols ? this._cols - 1 : e9 < 0 ? 0 : e9;
          }
          nextStop(e9) {
            for (null == e9 && (e9 = this.x); !this.tabs[++e9] && e9 < this._cols; ) ;
            return e9 >= this._cols ? this._cols - 1 : e9 < 0 ? 0 : e9;
          }
          clearMarkers(e9) {
            this._isClearing = true;
            for (let t8 = 0; t8 < this.markers.length; t8++) this.markers[t8].line === e9 && (this.markers[t8].dispose(), this.markers.splice(t8--, 1));
            this._isClearing = false;
          }
          clearAllMarkers() {
            this._isClearing = true;
            for (let e9 = 0; e9 < this.markers.length; e9++) this.markers[e9].dispose(), this.markers.splice(e9--, 1);
            this._isClearing = false;
          }
          addMarker(e9) {
            const t8 = new l3.Marker(e9);
            return this.markers.push(t8), t8.register(this.lines.onTrim((e10) => {
              t8.line -= e10, t8.line < 0 && t8.dispose();
            })), t8.register(this.lines.onInsert((e10) => {
              t8.line >= e10.index && (t8.line += e10.amount);
            })), t8.register(this.lines.onDelete((e10) => {
              t8.line >= e10.index && t8.line < e10.index + e10.amount && t8.dispose(), t8.line > e10.index && (t8.line -= e10.amount);
            })), t8.register(t8.onDispose(() => this._removeMarker(t8))), t8;
          }
          _removeMarker(e9) {
            this._isClearing || this.markers.splice(this.markers.indexOf(e9), 1);
          }
        };
      }, 437: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferLine = t7.DEFAULT_ATTR_DATA = void 0;
        const s6 = i7(734), r8 = i7(511), n8 = i7(643), a3 = i7(482);
        t7.DEFAULT_ATTR_DATA = Object.freeze(new s6.AttributeData());
        let o8 = 0;
        class h5 {
          constructor(e9, t8, i8 = false) {
            this.isWrapped = i8, this._combined = {}, this._extendedAttrs = {}, this._data = new Uint32Array(3 * e9);
            const s7 = t8 || r8.CellData.fromCharData([0, n8.NULL_CELL_CHAR, n8.NULL_CELL_WIDTH, n8.NULL_CELL_CODE]);
            for (let t9 = 0; t9 < e9; ++t9) this.setCell(t9, s7);
            this.length = e9;
          }
          get(e9) {
            const t8 = this._data[3 * e9 + 0], i8 = 2097151 & t8;
            return [this._data[3 * e9 + 1], 2097152 & t8 ? this._combined[e9] : i8 ? (0, a3.stringFromCodePoint)(i8) : "", t8 >> 22, 2097152 & t8 ? this._combined[e9].charCodeAt(this._combined[e9].length - 1) : i8];
          }
          set(e9, t8) {
            this._data[3 * e9 + 1] = t8[n8.CHAR_DATA_ATTR_INDEX], t8[n8.CHAR_DATA_CHAR_INDEX].length > 1 ? (this._combined[e9] = t8[1], this._data[3 * e9 + 0] = 2097152 | e9 | t8[n8.CHAR_DATA_WIDTH_INDEX] << 22) : this._data[3 * e9 + 0] = t8[n8.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | t8[n8.CHAR_DATA_WIDTH_INDEX] << 22;
          }
          getWidth(e9) {
            return this._data[3 * e9 + 0] >> 22;
          }
          hasWidth(e9) {
            return 12582912 & this._data[3 * e9 + 0];
          }
          getFg(e9) {
            return this._data[3 * e9 + 1];
          }
          getBg(e9) {
            return this._data[3 * e9 + 2];
          }
          hasContent(e9) {
            return 4194303 & this._data[3 * e9 + 0];
          }
          getCodePoint(e9) {
            const t8 = this._data[3 * e9 + 0];
            return 2097152 & t8 ? this._combined[e9].charCodeAt(this._combined[e9].length - 1) : 2097151 & t8;
          }
          isCombined(e9) {
            return 2097152 & this._data[3 * e9 + 0];
          }
          getString(e9) {
            const t8 = this._data[3 * e9 + 0];
            return 2097152 & t8 ? this._combined[e9] : 2097151 & t8 ? (0, a3.stringFromCodePoint)(2097151 & t8) : "";
          }
          isProtected(e9) {
            return 536870912 & this._data[3 * e9 + 2];
          }
          loadCell(e9, t8) {
            return o8 = 3 * e9, t8.content = this._data[o8 + 0], t8.fg = this._data[o8 + 1], t8.bg = this._data[o8 + 2], 2097152 & t8.content && (t8.combinedData = this._combined[e9]), 268435456 & t8.bg && (t8.extended = this._extendedAttrs[e9]), t8;
          }
          setCell(e9, t8) {
            2097152 & t8.content && (this._combined[e9] = t8.combinedData), 268435456 & t8.bg && (this._extendedAttrs[e9] = t8.extended), this._data[3 * e9 + 0] = t8.content, this._data[3 * e9 + 1] = t8.fg, this._data[3 * e9 + 2] = t8.bg;
          }
          setCellFromCodepoint(e9, t8, i8, s7) {
            268435456 & s7.bg && (this._extendedAttrs[e9] = s7.extended), this._data[3 * e9 + 0] = t8 | i8 << 22, this._data[3 * e9 + 1] = s7.fg, this._data[3 * e9 + 2] = s7.bg;
          }
          addCodepointToCell(e9, t8, i8) {
            let s7 = this._data[3 * e9 + 0];
            2097152 & s7 ? this._combined[e9] += (0, a3.stringFromCodePoint)(t8) : 2097151 & s7 ? (this._combined[e9] = (0, a3.stringFromCodePoint)(2097151 & s7) + (0, a3.stringFromCodePoint)(t8), s7 &= -2097152, s7 |= 2097152) : s7 = t8 | 1 << 22, i8 && (s7 &= -12582913, s7 |= i8 << 22), this._data[3 * e9 + 0] = s7;
          }
          insertCells(e9, t8, i8) {
            if ((e9 %= this.length) && 2 === this.getWidth(e9 - 1) && this.setCellFromCodepoint(e9 - 1, 0, 1, i8), t8 < this.length - e9) {
              const s7 = new r8.CellData();
              for (let i9 = this.length - e9 - t8 - 1; i9 >= 0; --i9) this.setCell(e9 + t8 + i9, this.loadCell(e9 + i9, s7));
              for (let s8 = 0; s8 < t8; ++s8) this.setCell(e9 + s8, i8);
            } else for (let t9 = e9; t9 < this.length; ++t9) this.setCell(t9, i8);
            2 === this.getWidth(this.length - 1) && this.setCellFromCodepoint(this.length - 1, 0, 1, i8);
          }
          deleteCells(e9, t8, i8) {
            if (e9 %= this.length, t8 < this.length - e9) {
              const s7 = new r8.CellData();
              for (let i9 = 0; i9 < this.length - e9 - t8; ++i9) this.setCell(e9 + i9, this.loadCell(e9 + t8 + i9, s7));
              for (let e10 = this.length - t8; e10 < this.length; ++e10) this.setCell(e10, i8);
            } else for (let t9 = e9; t9 < this.length; ++t9) this.setCell(t9, i8);
            e9 && 2 === this.getWidth(e9 - 1) && this.setCellFromCodepoint(e9 - 1, 0, 1, i8), 0 !== this.getWidth(e9) || this.hasContent(e9) || this.setCellFromCodepoint(e9, 0, 1, i8);
          }
          replaceCells(e9, t8, i8, s7 = false) {
            if (s7) for (e9 && 2 === this.getWidth(e9 - 1) && !this.isProtected(e9 - 1) && this.setCellFromCodepoint(e9 - 1, 0, 1, i8), t8 < this.length && 2 === this.getWidth(t8 - 1) && !this.isProtected(t8) && this.setCellFromCodepoint(t8, 0, 1, i8); e9 < t8 && e9 < this.length; ) this.isProtected(e9) || this.setCell(e9, i8), e9++;
            else for (e9 && 2 === this.getWidth(e9 - 1) && this.setCellFromCodepoint(e9 - 1, 0, 1, i8), t8 < this.length && 2 === this.getWidth(t8 - 1) && this.setCellFromCodepoint(t8, 0, 1, i8); e9 < t8 && e9 < this.length; ) this.setCell(e9++, i8);
          }
          resize(e9, t8) {
            if (e9 === this.length) return 4 * this._data.length * 2 < this._data.buffer.byteLength;
            const i8 = 3 * e9;
            if (e9 > this.length) {
              if (this._data.buffer.byteLength >= 4 * i8) this._data = new Uint32Array(this._data.buffer, 0, i8);
              else {
                const e10 = new Uint32Array(i8);
                e10.set(this._data), this._data = e10;
              }
              for (let i9 = this.length; i9 < e9; ++i9) this.setCell(i9, t8);
            } else {
              this._data = this._data.subarray(0, i8);
              const t9 = Object.keys(this._combined);
              for (let i9 = 0; i9 < t9.length; i9++) {
                const s8 = parseInt(t9[i9], 10);
                s8 >= e9 && delete this._combined[s8];
              }
              const s7 = Object.keys(this._extendedAttrs);
              for (let t10 = 0; t10 < s7.length; t10++) {
                const i9 = parseInt(s7[t10], 10);
                i9 >= e9 && delete this._extendedAttrs[i9];
              }
            }
            return this.length = e9, 4 * i8 * 2 < this._data.buffer.byteLength;
          }
          cleanupMemory() {
            if (4 * this._data.length * 2 < this._data.buffer.byteLength) {
              const e9 = new Uint32Array(this._data.length);
              return e9.set(this._data), this._data = e9, 1;
            }
            return 0;
          }
          fill(e9, t8 = false) {
            if (t8) for (let t9 = 0; t9 < this.length; ++t9) this.isProtected(t9) || this.setCell(t9, e9);
            else {
              this._combined = {}, this._extendedAttrs = {};
              for (let t9 = 0; t9 < this.length; ++t9) this.setCell(t9, e9);
            }
          }
          copyFrom(e9) {
            this.length !== e9.length ? this._data = new Uint32Array(e9._data) : this._data.set(e9._data), this.length = e9.length, this._combined = {};
            for (const t8 in e9._combined) this._combined[t8] = e9._combined[t8];
            this._extendedAttrs = {};
            for (const t8 in e9._extendedAttrs) this._extendedAttrs[t8] = e9._extendedAttrs[t8];
            this.isWrapped = e9.isWrapped;
          }
          clone() {
            const e9 = new h5(0);
            e9._data = new Uint32Array(this._data), e9.length = this.length;
            for (const t8 in this._combined) e9._combined[t8] = this._combined[t8];
            for (const t8 in this._extendedAttrs) e9._extendedAttrs[t8] = this._extendedAttrs[t8];
            return e9.isWrapped = this.isWrapped, e9;
          }
          getTrimmedLength() {
            for (let e9 = this.length - 1; e9 >= 0; --e9) if (4194303 & this._data[3 * e9 + 0]) return e9 + (this._data[3 * e9 + 0] >> 22);
            return 0;
          }
          getNoBgTrimmedLength() {
            for (let e9 = this.length - 1; e9 >= 0; --e9) if (4194303 & this._data[3 * e9 + 0] || 50331648 & this._data[3 * e9 + 2]) return e9 + (this._data[3 * e9 + 0] >> 22);
            return 0;
          }
          copyCellsFrom(e9, t8, i8, s7, r9) {
            const n9 = e9._data;
            if (r9) for (let r10 = s7 - 1; r10 >= 0; r10--) {
              for (let e10 = 0; e10 < 3; e10++) this._data[3 * (i8 + r10) + e10] = n9[3 * (t8 + r10) + e10];
              268435456 & n9[3 * (t8 + r10) + 2] && (this._extendedAttrs[i8 + r10] = e9._extendedAttrs[t8 + r10]);
            }
            else for (let r10 = 0; r10 < s7; r10++) {
              for (let e10 = 0; e10 < 3; e10++) this._data[3 * (i8 + r10) + e10] = n9[3 * (t8 + r10) + e10];
              268435456 & n9[3 * (t8 + r10) + 2] && (this._extendedAttrs[i8 + r10] = e9._extendedAttrs[t8 + r10]);
            }
            const a4 = Object.keys(e9._combined);
            for (let s8 = 0; s8 < a4.length; s8++) {
              const r10 = parseInt(a4[s8], 10);
              r10 >= t8 && (this._combined[r10 - t8 + i8] = e9._combined[r10]);
            }
          }
          translateToString(e9, t8, i8, s7) {
            t8 = t8 ?? 0, i8 = i8 ?? this.length, e9 && (i8 = Math.min(i8, this.getTrimmedLength())), s7 && (s7.length = 0);
            let r9 = "";
            for (; t8 < i8; ) {
              const e10 = this._data[3 * t8 + 0], i9 = 2097151 & e10, o9 = 2097152 & e10 ? this._combined[t8] : i9 ? (0, a3.stringFromCodePoint)(i9) : n8.WHITESPACE_CELL_CHAR;
              if (r9 += o9, s7) for (let e11 = 0; e11 < o9.length; ++e11) s7.push(t8);
              t8 += e10 >> 22 || 1;
            }
            return s7 && s7.push(t8), r9;
          }
        }
        t7.BufferLine = h5;
      }, 634: (e8, t7) => {
        function i7(e9, t8, i8) {
          if (t8 === e9.length - 1) return e9[t8].getTrimmedLength();
          const s6 = !e9[t8].hasContent(i8 - 1) && 1 === e9[t8].getWidth(i8 - 1), r8 = 2 === e9[t8 + 1].getWidth(0);
          return s6 && r8 ? i8 - 1 : i8;
        }
        Object.defineProperty(t7, "__esModule", { value: true }), t7.getWrappedLineTrimmedLength = t7.reflowSmallerGetNewLineLengths = t7.reflowLargerApplyNewLayout = t7.reflowLargerCreateNewLayout = t7.reflowLargerGetLinesToRemove = void 0, t7.reflowLargerGetLinesToRemove = function(e9, t8, s6, r8, n8) {
          const a3 = [];
          for (let o8 = 0; o8 < e9.length - 1; o8++) {
            let h5 = o8, c5 = e9.get(++h5);
            if (!c5.isWrapped) continue;
            const l3 = [e9.get(o8)];
            for (; h5 < e9.length && c5.isWrapped; ) l3.push(c5), c5 = e9.get(++h5);
            if (r8 >= o8 && r8 < h5) {
              o8 += l3.length - 1;
              continue;
            }
            let _2 = 0, d3 = i7(l3, _2, t8), f5 = 1, u3 = 0;
            for (; f5 < l3.length; ) {
              const e10 = i7(l3, f5, t8), r9 = e10 - u3, a4 = s6 - d3, o9 = Math.min(r9, a4);
              l3[_2].copyCellsFrom(l3[f5], u3, d3, o9, false), d3 += o9, d3 === s6 && (_2++, d3 = 0), u3 += o9, u3 === e10 && (f5++, u3 = 0), 0 === d3 && 0 !== _2 && 2 === l3[_2 - 1].getWidth(s6 - 1) && (l3[_2].copyCellsFrom(l3[_2 - 1], s6 - 1, d3++, 1, false), l3[_2 - 1].setCell(s6 - 1, n8));
            }
            l3[_2].replaceCells(d3, s6, n8);
            let p3 = 0;
            for (let e10 = l3.length - 1; e10 > 0 && (e10 > _2 || 0 === l3[e10].getTrimmedLength()); e10--) p3++;
            p3 > 0 && (a3.push(o8 + l3.length - p3), a3.push(p3)), o8 += l3.length - 1;
          }
          return a3;
        }, t7.reflowLargerCreateNewLayout = function(e9, t8) {
          const i8 = [];
          let s6 = 0, r8 = t8[s6], n8 = 0;
          for (let a3 = 0; a3 < e9.length; a3++) if (r8 === a3) {
            const i9 = t8[++s6];
            e9.onDeleteEmitter.fire({ index: a3 - n8, amount: i9 }), a3 += i9 - 1, n8 += i9, r8 = t8[++s6];
          } else i8.push(a3);
          return { layout: i8, countRemoved: n8 };
        }, t7.reflowLargerApplyNewLayout = function(e9, t8) {
          const i8 = [];
          for (let s6 = 0; s6 < t8.length; s6++) i8.push(e9.get(t8[s6]));
          for (let t9 = 0; t9 < i8.length; t9++) e9.set(t9, i8[t9]);
          e9.length = t8.length;
        }, t7.reflowSmallerGetNewLineLengths = function(e9, t8, s6) {
          const r8 = [], n8 = e9.map((s7, r9) => i7(e9, r9, t8)).reduce((e10, t9) => e10 + t9);
          let a3 = 0, o8 = 0, h5 = 0;
          for (; h5 < n8; ) {
            if (n8 - h5 < s6) {
              r8.push(n8 - h5);
              break;
            }
            a3 += s6;
            const c5 = i7(e9, o8, t8);
            a3 > c5 && (a3 -= c5, o8++);
            const l3 = 2 === e9[o8].getWidth(a3 - 1);
            l3 && a3--;
            const _2 = l3 ? s6 - 1 : s6;
            r8.push(_2), h5 += _2;
          }
          return r8;
        }, t7.getWrappedLineTrimmedLength = i7;
      }, 295: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferSet = void 0;
        const s6 = i7(460), r8 = i7(844), n8 = i7(92);
        class a3 extends r8.Disposable {
          constructor(e9, t8) {
            super(), this._optionsService = e9, this._bufferService = t8, this._onBufferActivate = this.register(new s6.EventEmitter()), this.onBufferActivate = this._onBufferActivate.event, this.reset(), this.register(this._optionsService.onSpecificOptionChange("scrollback", () => this.resize(this._bufferService.cols, this._bufferService.rows))), this.register(this._optionsService.onSpecificOptionChange("tabStopWidth", () => this.setupTabStops()));
          }
          reset() {
            this._normal = new n8.Buffer(true, this._optionsService, this._bufferService), this._normal.fillViewportRows(), this._alt = new n8.Buffer(false, this._optionsService, this._bufferService), this._activeBuffer = this._normal, this._onBufferActivate.fire({ activeBuffer: this._normal, inactiveBuffer: this._alt }), this.setupTabStops();
          }
          get alt() {
            return this._alt;
          }
          get active() {
            return this._activeBuffer;
          }
          get normal() {
            return this._normal;
          }
          activateNormalBuffer() {
            this._activeBuffer !== this._normal && (this._normal.x = this._alt.x, this._normal.y = this._alt.y, this._alt.clearAllMarkers(), this._alt.clear(), this._activeBuffer = this._normal, this._onBufferActivate.fire({ activeBuffer: this._normal, inactiveBuffer: this._alt }));
          }
          activateAltBuffer(e9) {
            this._activeBuffer !== this._alt && (this._alt.fillViewportRows(e9), this._alt.x = this._normal.x, this._alt.y = this._normal.y, this._activeBuffer = this._alt, this._onBufferActivate.fire({ activeBuffer: this._alt, inactiveBuffer: this._normal }));
          }
          resize(e9, t8) {
            this._normal.resize(e9, t8), this._alt.resize(e9, t8), this.setupTabStops(e9);
          }
          setupTabStops(e9) {
            this._normal.setupTabStops(e9), this._alt.setupTabStops(e9);
          }
        }
        t7.BufferSet = a3;
      }, 511: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CellData = void 0;
        const s6 = i7(482), r8 = i7(643), n8 = i7(734);
        class a3 extends n8.AttributeData {
          constructor() {
            super(...arguments), this.content = 0, this.fg = 0, this.bg = 0, this.extended = new n8.ExtendedAttrs(), this.combinedData = "";
          }
          static fromCharData(e9) {
            const t8 = new a3();
            return t8.setFromCharData(e9), t8;
          }
          isCombined() {
            return 2097152 & this.content;
          }
          getWidth() {
            return this.content >> 22;
          }
          getChars() {
            return 2097152 & this.content ? this.combinedData : 2097151 & this.content ? (0, s6.stringFromCodePoint)(2097151 & this.content) : "";
          }
          getCode() {
            return this.isCombined() ? this.combinedData.charCodeAt(this.combinedData.length - 1) : 2097151 & this.content;
          }
          setFromCharData(e9) {
            this.fg = e9[r8.CHAR_DATA_ATTR_INDEX], this.bg = 0;
            let t8 = false;
            if (e9[r8.CHAR_DATA_CHAR_INDEX].length > 2) t8 = true;
            else if (2 === e9[r8.CHAR_DATA_CHAR_INDEX].length) {
              const i8 = e9[r8.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
              if (55296 <= i8 && i8 <= 56319) {
                const s7 = e9[r8.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                56320 <= s7 && s7 <= 57343 ? this.content = 1024 * (i8 - 55296) + s7 - 56320 + 65536 | e9[r8.CHAR_DATA_WIDTH_INDEX] << 22 : t8 = true;
              } else t8 = true;
            } else this.content = e9[r8.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | e9[r8.CHAR_DATA_WIDTH_INDEX] << 22;
            t8 && (this.combinedData = e9[r8.CHAR_DATA_CHAR_INDEX], this.content = 2097152 | e9[r8.CHAR_DATA_WIDTH_INDEX] << 22);
          }
          getAsCharData() {
            return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
          }
        }
        t7.CellData = a3;
      }, 643: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.WHITESPACE_CELL_CODE = t7.WHITESPACE_CELL_WIDTH = t7.WHITESPACE_CELL_CHAR = t7.NULL_CELL_CODE = t7.NULL_CELL_WIDTH = t7.NULL_CELL_CHAR = t7.CHAR_DATA_CODE_INDEX = t7.CHAR_DATA_WIDTH_INDEX = t7.CHAR_DATA_CHAR_INDEX = t7.CHAR_DATA_ATTR_INDEX = t7.DEFAULT_EXT = t7.DEFAULT_ATTR = t7.DEFAULT_COLOR = void 0, t7.DEFAULT_COLOR = 0, t7.DEFAULT_ATTR = 256 | t7.DEFAULT_COLOR << 9, t7.DEFAULT_EXT = 0, t7.CHAR_DATA_ATTR_INDEX = 0, t7.CHAR_DATA_CHAR_INDEX = 1, t7.CHAR_DATA_WIDTH_INDEX = 2, t7.CHAR_DATA_CODE_INDEX = 3, t7.NULL_CELL_CHAR = "", t7.NULL_CELL_WIDTH = 1, t7.NULL_CELL_CODE = 0, t7.WHITESPACE_CELL_CHAR = " ", t7.WHITESPACE_CELL_WIDTH = 1, t7.WHITESPACE_CELL_CODE = 32;
      }, 863: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.Marker = void 0;
        const s6 = i7(460), r8 = i7(844);
        class n8 {
          get id() {
            return this._id;
          }
          constructor(e9) {
            this.line = e9, this.isDisposed = false, this._disposables = [], this._id = n8._nextId++, this._onDispose = this.register(new s6.EventEmitter()), this.onDispose = this._onDispose.event;
          }
          dispose() {
            this.isDisposed || (this.isDisposed = true, this.line = -1, this._onDispose.fire(), (0, r8.disposeArray)(this._disposables), this._disposables.length = 0);
          }
          register(e9) {
            return this._disposables.push(e9), e9;
          }
        }
        t7.Marker = n8, n8._nextId = 1;
      }, 116: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.DEFAULT_CHARSET = t7.CHARSETS = void 0, t7.CHARSETS = {}, t7.DEFAULT_CHARSET = t7.CHARSETS.B, t7.CHARSETS[0] = { "`": "\u25C6", a: "\u2592", b: "\u2409", c: "\u240C", d: "\u240D", e: "\u240A", f: "\xB0", g: "\xB1", h: "\u2424", i: "\u240B", j: "\u2518", k: "\u2510", l: "\u250C", m: "\u2514", n: "\u253C", o: "\u23BA", p: "\u23BB", q: "\u2500", r: "\u23BC", s: "\u23BD", t: "\u251C", u: "\u2524", v: "\u2534", w: "\u252C", x: "\u2502", y: "\u2264", z: "\u2265", "{": "\u03C0", "|": "\u2260", "}": "\xA3", "~": "\xB7" }, t7.CHARSETS.A = { "#": "\xA3" }, t7.CHARSETS.B = void 0, t7.CHARSETS[4] = { "#": "\xA3", "@": "\xBE", "[": "ij", "\\": "\xBD", "]": "|", "{": "\xA8", "|": "f", "}": "\xBC", "~": "\xB4" }, t7.CHARSETS.C = t7.CHARSETS[5] = { "[": "\xC4", "\\": "\xD6", "]": "\xC5", "^": "\xDC", "`": "\xE9", "{": "\xE4", "|": "\xF6", "}": "\xE5", "~": "\xFC" }, t7.CHARSETS.R = { "#": "\xA3", "@": "\xE0", "[": "\xB0", "\\": "\xE7", "]": "\xA7", "{": "\xE9", "|": "\xF9", "}": "\xE8", "~": "\xA8" }, t7.CHARSETS.Q = { "@": "\xE0", "[": "\xE2", "\\": "\xE7", "]": "\xEA", "^": "\xEE", "`": "\xF4", "{": "\xE9", "|": "\xF9", "}": "\xE8", "~": "\xFB" }, t7.CHARSETS.K = { "@": "\xA7", "[": "\xC4", "\\": "\xD6", "]": "\xDC", "{": "\xE4", "|": "\xF6", "}": "\xFC", "~": "\xDF" }, t7.CHARSETS.Y = { "#": "\xA3", "@": "\xA7", "[": "\xB0", "\\": "\xE7", "]": "\xE9", "`": "\xF9", "{": "\xE0", "|": "\xF2", "}": "\xE8", "~": "\xEC" }, t7.CHARSETS.E = t7.CHARSETS[6] = { "@": "\xC4", "[": "\xC6", "\\": "\xD8", "]": "\xC5", "^": "\xDC", "`": "\xE4", "{": "\xE6", "|": "\xF8", "}": "\xE5", "~": "\xFC" }, t7.CHARSETS.Z = { "#": "\xA3", "@": "\xA7", "[": "\xA1", "\\": "\xD1", "]": "\xBF", "{": "\xB0", "|": "\xF1", "}": "\xE7" }, t7.CHARSETS.H = t7.CHARSETS[7] = { "@": "\xC9", "[": "\xC4", "\\": "\xD6", "]": "\xC5", "^": "\xDC", "`": "\xE9", "{": "\xE4", "|": "\xF6", "}": "\xE5", "~": "\xFC" }, t7.CHARSETS["="] = { "#": "\xF9", "@": "\xE0", "[": "\xE9", "\\": "\xE7", "]": "\xEA", "^": "\xEE", _: "\xE8", "`": "\xF4", "{": "\xE4", "|": "\xF6", "}": "\xFC", "~": "\xFB" };
      }, 584: (e8, t7) => {
        var i7, s6, r8;
        Object.defineProperty(t7, "__esModule", { value: true }), t7.C1_ESCAPED = t7.C1 = t7.C0 = void 0, function(e9) {
          e9.NUL = "\0", e9.SOH = "", e9.STX = "", e9.ETX = "", e9.EOT = "", e9.ENQ = "", e9.ACK = "", e9.BEL = "\x07", e9.BS = "\b", e9.HT = "	", e9.LF = "\n", e9.VT = "\v", e9.FF = "\f", e9.CR = "\r", e9.SO = "", e9.SI = "", e9.DLE = "", e9.DC1 = "", e9.DC2 = "", e9.DC3 = "", e9.DC4 = "", e9.NAK = "", e9.SYN = "", e9.ETB = "", e9.CAN = "", e9.EM = "", e9.SUB = "", e9.ESC = "\x1B", e9.FS = "", e9.GS = "", e9.RS = "", e9.US = "", e9.SP = " ", e9.DEL = "\x7F";
        }(i7 || (t7.C0 = i7 = {})), function(e9) {
          e9.PAD = "\x80", e9.HOP = "\x81", e9.BPH = "\x82", e9.NBH = "\x83", e9.IND = "\x84", e9.NEL = "\x85", e9.SSA = "\x86", e9.ESA = "\x87", e9.HTS = "\x88", e9.HTJ = "\x89", e9.VTS = "\x8A", e9.PLD = "\x8B", e9.PLU = "\x8C", e9.RI = "\x8D", e9.SS2 = "\x8E", e9.SS3 = "\x8F", e9.DCS = "\x90", e9.PU1 = "\x91", e9.PU2 = "\x92", e9.STS = "\x93", e9.CCH = "\x94", e9.MW = "\x95", e9.SPA = "\x96", e9.EPA = "\x97", e9.SOS = "\x98", e9.SGCI = "\x99", e9.SCI = "\x9A", e9.CSI = "\x9B", e9.ST = "\x9C", e9.OSC = "\x9D", e9.PM = "\x9E", e9.APC = "\x9F";
        }(s6 || (t7.C1 = s6 = {})), function(e9) {
          e9.ST = `${i7.ESC}\\`;
        }(r8 || (t7.C1_ESCAPED = r8 = {}));
      }, 482: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.Utf8ToUtf32 = t7.StringToUtf32 = t7.utf32ToString = t7.stringFromCodePoint = void 0, t7.stringFromCodePoint = function(e9) {
          return e9 > 65535 ? (e9 -= 65536, String.fromCharCode(55296 + (e9 >> 10)) + String.fromCharCode(e9 % 1024 + 56320)) : String.fromCharCode(e9);
        }, t7.utf32ToString = function(e9, t8 = 0, i7 = e9.length) {
          let s6 = "";
          for (let r8 = t8; r8 < i7; ++r8) {
            let t9 = e9[r8];
            t9 > 65535 ? (t9 -= 65536, s6 += String.fromCharCode(55296 + (t9 >> 10)) + String.fromCharCode(t9 % 1024 + 56320)) : s6 += String.fromCharCode(t9);
          }
          return s6;
        }, t7.StringToUtf32 = class {
          constructor() {
            this._interim = 0;
          }
          clear() {
            this._interim = 0;
          }
          decode(e9, t8) {
            const i7 = e9.length;
            if (!i7) return 0;
            let s6 = 0, r8 = 0;
            if (this._interim) {
              const i8 = e9.charCodeAt(r8++);
              56320 <= i8 && i8 <= 57343 ? t8[s6++] = 1024 * (this._interim - 55296) + i8 - 56320 + 65536 : (t8[s6++] = this._interim, t8[s6++] = i8), this._interim = 0;
            }
            for (let n8 = r8; n8 < i7; ++n8) {
              const r9 = e9.charCodeAt(n8);
              if (55296 <= r9 && r9 <= 56319) {
                if (++n8 >= i7) return this._interim = r9, s6;
                const a3 = e9.charCodeAt(n8);
                56320 <= a3 && a3 <= 57343 ? t8[s6++] = 1024 * (r9 - 55296) + a3 - 56320 + 65536 : (t8[s6++] = r9, t8[s6++] = a3);
              } else 65279 !== r9 && (t8[s6++] = r9);
            }
            return s6;
          }
        }, t7.Utf8ToUtf32 = class {
          constructor() {
            this.interim = new Uint8Array(3);
          }
          clear() {
            this.interim.fill(0);
          }
          decode(e9, t8) {
            const i7 = e9.length;
            if (!i7) return 0;
            let s6, r8, n8, a3, o8 = 0, h5 = 0, c5 = 0;
            if (this.interim[0]) {
              let s7 = false, r9 = this.interim[0];
              r9 &= 192 == (224 & r9) ? 31 : 224 == (240 & r9) ? 15 : 7;
              let n9, a4 = 0;
              for (; (n9 = 63 & this.interim[++a4]) && a4 < 4; ) r9 <<= 6, r9 |= n9;
              const h6 = 192 == (224 & this.interim[0]) ? 2 : 224 == (240 & this.interim[0]) ? 3 : 4, l4 = h6 - a4;
              for (; c5 < l4; ) {
                if (c5 >= i7) return 0;
                if (n9 = e9[c5++], 128 != (192 & n9)) {
                  c5--, s7 = true;
                  break;
                }
                this.interim[a4++] = n9, r9 <<= 6, r9 |= 63 & n9;
              }
              s7 || (2 === h6 ? r9 < 128 ? c5-- : t8[o8++] = r9 : 3 === h6 ? r9 < 2048 || r9 >= 55296 && r9 <= 57343 || 65279 === r9 || (t8[o8++] = r9) : r9 < 65536 || r9 > 1114111 || (t8[o8++] = r9)), this.interim.fill(0);
            }
            const l3 = i7 - 4;
            let _2 = c5;
            for (; _2 < i7; ) {
              for (; !(!(_2 < l3) || 128 & (s6 = e9[_2]) || 128 & (r8 = e9[_2 + 1]) || 128 & (n8 = e9[_2 + 2]) || 128 & (a3 = e9[_2 + 3])); ) t8[o8++] = s6, t8[o8++] = r8, t8[o8++] = n8, t8[o8++] = a3, _2 += 4;
              if (s6 = e9[_2++], s6 < 128) t8[o8++] = s6;
              else if (192 == (224 & s6)) {
                if (_2 >= i7) return this.interim[0] = s6, o8;
                if (r8 = e9[_2++], 128 != (192 & r8)) {
                  _2--;
                  continue;
                }
                if (h5 = (31 & s6) << 6 | 63 & r8, h5 < 128) {
                  _2--;
                  continue;
                }
                t8[o8++] = h5;
              } else if (224 == (240 & s6)) {
                if (_2 >= i7) return this.interim[0] = s6, o8;
                if (r8 = e9[_2++], 128 != (192 & r8)) {
                  _2--;
                  continue;
                }
                if (_2 >= i7) return this.interim[0] = s6, this.interim[1] = r8, o8;
                if (n8 = e9[_2++], 128 != (192 & n8)) {
                  _2--;
                  continue;
                }
                if (h5 = (15 & s6) << 12 | (63 & r8) << 6 | 63 & n8, h5 < 2048 || h5 >= 55296 && h5 <= 57343 || 65279 === h5) continue;
                t8[o8++] = h5;
              } else if (240 == (248 & s6)) {
                if (_2 >= i7) return this.interim[0] = s6, o8;
                if (r8 = e9[_2++], 128 != (192 & r8)) {
                  _2--;
                  continue;
                }
                if (_2 >= i7) return this.interim[0] = s6, this.interim[1] = r8, o8;
                if (n8 = e9[_2++], 128 != (192 & n8)) {
                  _2--;
                  continue;
                }
                if (_2 >= i7) return this.interim[0] = s6, this.interim[1] = r8, this.interim[2] = n8, o8;
                if (a3 = e9[_2++], 128 != (192 & a3)) {
                  _2--;
                  continue;
                }
                if (h5 = (7 & s6) << 18 | (63 & r8) << 12 | (63 & n8) << 6 | 63 & a3, h5 < 65536 || h5 > 1114111) continue;
                t8[o8++] = h5;
              }
            }
            return o8;
          }
        };
      }, 225: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.UnicodeV6 = void 0;
        const s6 = i7(480), r8 = [[768, 879], [1155, 1158], [1160, 1161], [1425, 1469], [1471, 1471], [1473, 1474], [1476, 1477], [1479, 1479], [1536, 1539], [1552, 1557], [1611, 1630], [1648, 1648], [1750, 1764], [1767, 1768], [1770, 1773], [1807, 1807], [1809, 1809], [1840, 1866], [1958, 1968], [2027, 2035], [2305, 2306], [2364, 2364], [2369, 2376], [2381, 2381], [2385, 2388], [2402, 2403], [2433, 2433], [2492, 2492], [2497, 2500], [2509, 2509], [2530, 2531], [2561, 2562], [2620, 2620], [2625, 2626], [2631, 2632], [2635, 2637], [2672, 2673], [2689, 2690], [2748, 2748], [2753, 2757], [2759, 2760], [2765, 2765], [2786, 2787], [2817, 2817], [2876, 2876], [2879, 2879], [2881, 2883], [2893, 2893], [2902, 2902], [2946, 2946], [3008, 3008], [3021, 3021], [3134, 3136], [3142, 3144], [3146, 3149], [3157, 3158], [3260, 3260], [3263, 3263], [3270, 3270], [3276, 3277], [3298, 3299], [3393, 3395], [3405, 3405], [3530, 3530], [3538, 3540], [3542, 3542], [3633, 3633], [3636, 3642], [3655, 3662], [3761, 3761], [3764, 3769], [3771, 3772], [3784, 3789], [3864, 3865], [3893, 3893], [3895, 3895], [3897, 3897], [3953, 3966], [3968, 3972], [3974, 3975], [3984, 3991], [3993, 4028], [4038, 4038], [4141, 4144], [4146, 4146], [4150, 4151], [4153, 4153], [4184, 4185], [4448, 4607], [4959, 4959], [5906, 5908], [5938, 5940], [5970, 5971], [6002, 6003], [6068, 6069], [6071, 6077], [6086, 6086], [6089, 6099], [6109, 6109], [6155, 6157], [6313, 6313], [6432, 6434], [6439, 6440], [6450, 6450], [6457, 6459], [6679, 6680], [6912, 6915], [6964, 6964], [6966, 6970], [6972, 6972], [6978, 6978], [7019, 7027], [7616, 7626], [7678, 7679], [8203, 8207], [8234, 8238], [8288, 8291], [8298, 8303], [8400, 8431], [12330, 12335], [12441, 12442], [43014, 43014], [43019, 43019], [43045, 43046], [64286, 64286], [65024, 65039], [65056, 65059], [65279, 65279], [65529, 65531]], n8 = [[68097, 68099], [68101, 68102], [68108, 68111], [68152, 68154], [68159, 68159], [119143, 119145], [119155, 119170], [119173, 119179], [119210, 119213], [119362, 119364], [917505, 917505], [917536, 917631], [917760, 917999]];
        let a3;
        t7.UnicodeV6 = class {
          constructor() {
            if (this.version = "6", !a3) {
              a3 = new Uint8Array(65536), a3.fill(1), a3[0] = 0, a3.fill(0, 1, 32), a3.fill(0, 127, 160), a3.fill(2, 4352, 4448), a3[9001] = 2, a3[9002] = 2, a3.fill(2, 11904, 42192), a3[12351] = 1, a3.fill(2, 44032, 55204), a3.fill(2, 63744, 64256), a3.fill(2, 65040, 65050), a3.fill(2, 65072, 65136), a3.fill(2, 65280, 65377), a3.fill(2, 65504, 65511);
              for (let e9 = 0; e9 < r8.length; ++e9) a3.fill(0, r8[e9][0], r8[e9][1] + 1);
            }
          }
          wcwidth(e9) {
            return e9 < 32 ? 0 : e9 < 127 ? 1 : e9 < 65536 ? a3[e9] : function(e10, t8) {
              let i8, s7 = 0, r9 = t8.length - 1;
              if (e10 < t8[0][0] || e10 > t8[r9][1]) return false;
              for (; r9 >= s7; ) if (i8 = s7 + r9 >> 1, e10 > t8[i8][1]) s7 = i8 + 1;
              else {
                if (!(e10 < t8[i8][0])) return true;
                r9 = i8 - 1;
              }
              return false;
            }(e9, n8) ? 0 : e9 >= 131072 && e9 <= 196605 || e9 >= 196608 && e9 <= 262141 ? 2 : 1;
          }
          charProperties(e9, t8) {
            let i8 = this.wcwidth(e9), r9 = 0 === i8 && 0 !== t8;
            if (r9) {
              const e10 = s6.UnicodeService.extractWidth(t8);
              0 === e10 ? r9 = false : e10 > i8 && (i8 = e10);
            }
            return s6.UnicodeService.createPropertyValue(0, i8, r9);
          }
        };
      }, 981: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.WriteBuffer = void 0;
        const s6 = i7(460), r8 = i7(844);
        class n8 extends r8.Disposable {
          constructor(e9) {
            super(), this._action = e9, this._writeBuffer = [], this._callbacks = [], this._pendingData = 0, this._bufferOffset = 0, this._isSyncWriting = false, this._syncCalls = 0, this._didUserInput = false, this._onWriteParsed = this.register(new s6.EventEmitter()), this.onWriteParsed = this._onWriteParsed.event;
          }
          handleUserInput() {
            this._didUserInput = true;
          }
          writeSync(e9, t8) {
            if (void 0 !== t8 && this._syncCalls > t8) return void (this._syncCalls = 0);
            if (this._pendingData += e9.length, this._writeBuffer.push(e9), this._callbacks.push(void 0), this._syncCalls++, this._isSyncWriting) return;
            let i8;
            for (this._isSyncWriting = true; i8 = this._writeBuffer.shift(); ) {
              this._action(i8);
              const e10 = this._callbacks.shift();
              e10 && e10();
            }
            this._pendingData = 0, this._bufferOffset = 2147483647, this._isSyncWriting = false, this._syncCalls = 0;
          }
          write(e9, t8) {
            if (this._pendingData > 5e7) throw new Error("write data discarded, use flow control to avoid losing data");
            if (!this._writeBuffer.length) {
              if (this._bufferOffset = 0, this._didUserInput) return this._didUserInput = false, this._pendingData += e9.length, this._writeBuffer.push(e9), this._callbacks.push(t8), void this._innerWrite();
              setTimeout(() => this._innerWrite());
            }
            this._pendingData += e9.length, this._writeBuffer.push(e9), this._callbacks.push(t8);
          }
          _innerWrite(e9 = 0, t8 = true) {
            const i8 = e9 || Date.now();
            for (; this._writeBuffer.length > this._bufferOffset; ) {
              const e10 = this._writeBuffer[this._bufferOffset], s7 = this._action(e10, t8);
              if (s7) {
                const e11 = (e12) => Date.now() - i8 >= 12 ? setTimeout(() => this._innerWrite(0, e12)) : this._innerWrite(i8, e12);
                return void s7.catch((e12) => (queueMicrotask(() => {
                  throw e12;
                }), Promise.resolve(false))).then(e11);
              }
              const r9 = this._callbacks[this._bufferOffset];
              if (r9 && r9(), this._bufferOffset++, this._pendingData -= e10.length, Date.now() - i8 >= 12) break;
            }
            this._writeBuffer.length > this._bufferOffset ? (this._bufferOffset > 50 && (this._writeBuffer = this._writeBuffer.slice(this._bufferOffset), this._callbacks = this._callbacks.slice(this._bufferOffset), this._bufferOffset = 0), setTimeout(() => this._innerWrite())) : (this._writeBuffer.length = 0, this._callbacks.length = 0, this._pendingData = 0, this._bufferOffset = 0), this._onWriteParsed.fire();
          }
        }
        t7.WriteBuffer = n8;
      }, 941: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.toRgbString = t7.parseColor = void 0;
        const i7 = /^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/, s6 = /^[\da-f]+$/;
        function r8(e9, t8) {
          const i8 = e9.toString(16), s7 = i8.length < 2 ? "0" + i8 : i8;
          switch (t8) {
            case 4:
              return i8[0];
            case 8:
              return s7;
            case 12:
              return (s7 + s7).slice(0, 3);
            default:
              return s7 + s7;
          }
        }
        t7.parseColor = function(e9) {
          if (!e9) return;
          let t8 = e9.toLowerCase();
          if (0 === t8.indexOf("rgb:")) {
            t8 = t8.slice(4);
            const e10 = i7.exec(t8);
            if (e10) {
              const t9 = e10[1] ? 15 : e10[4] ? 255 : e10[7] ? 4095 : 65535;
              return [Math.round(parseInt(e10[1] || e10[4] || e10[7] || e10[10], 16) / t9 * 255), Math.round(parseInt(e10[2] || e10[5] || e10[8] || e10[11], 16) / t9 * 255), Math.round(parseInt(e10[3] || e10[6] || e10[9] || e10[12], 16) / t9 * 255)];
            }
          } else if (0 === t8.indexOf("#") && (t8 = t8.slice(1), s6.exec(t8) && [3, 6, 9, 12].includes(t8.length))) {
            const e10 = t8.length / 3, i8 = [0, 0, 0];
            for (let s7 = 0; s7 < 3; ++s7) {
              const r9 = parseInt(t8.slice(e10 * s7, e10 * s7 + e10), 16);
              i8[s7] = 1 === e10 ? r9 << 4 : 2 === e10 ? r9 : 3 === e10 ? r9 >> 4 : r9 >> 8;
            }
            return i8;
          }
        }, t7.toRgbString = function(e9, t8 = 16) {
          const [i8, s7, n8] = e9;
          return `rgb:${r8(i8, t8)}/${r8(s7, t8)}/${r8(n8, t8)}`;
        };
      }, 770: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.PAYLOAD_LIMIT = void 0, t7.PAYLOAD_LIMIT = 1e7;
      }, 351: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.DcsHandler = t7.DcsParser = void 0;
        const s6 = i7(482), r8 = i7(742), n8 = i7(770), a3 = [];
        t7.DcsParser = class {
          constructor() {
            this._handlers = /* @__PURE__ */ Object.create(null), this._active = a3, this._ident = 0, this._handlerFb = () => {
            }, this._stack = { paused: false, loopPosition: 0, fallThrough: false };
          }
          dispose() {
            this._handlers = /* @__PURE__ */ Object.create(null), this._handlerFb = () => {
            }, this._active = a3;
          }
          registerHandler(e9, t8) {
            void 0 === this._handlers[e9] && (this._handlers[e9] = []);
            const i8 = this._handlers[e9];
            return i8.push(t8), { dispose: () => {
              const e10 = i8.indexOf(t8);
              -1 !== e10 && i8.splice(e10, 1);
            } };
          }
          clearHandler(e9) {
            this._handlers[e9] && delete this._handlers[e9];
          }
          setHandlerFallback(e9) {
            this._handlerFb = e9;
          }
          reset() {
            if (this._active.length) for (let e9 = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; e9 >= 0; --e9) this._active[e9].unhook(false);
            this._stack.paused = false, this._active = a3, this._ident = 0;
          }
          hook(e9, t8) {
            if (this.reset(), this._ident = e9, this._active = this._handlers[e9] || a3, this._active.length) for (let e10 = this._active.length - 1; e10 >= 0; e10--) this._active[e10].hook(t8);
            else this._handlerFb(this._ident, "HOOK", t8);
          }
          put(e9, t8, i8) {
            if (this._active.length) for (let s7 = this._active.length - 1; s7 >= 0; s7--) this._active[s7].put(e9, t8, i8);
            else this._handlerFb(this._ident, "PUT", (0, s6.utf32ToString)(e9, t8, i8));
          }
          unhook(e9, t8 = true) {
            if (this._active.length) {
              let i8 = false, s7 = this._active.length - 1, r9 = false;
              if (this._stack.paused && (s7 = this._stack.loopPosition - 1, i8 = t8, r9 = this._stack.fallThrough, this._stack.paused = false), !r9 && false === i8) {
                for (; s7 >= 0 && (i8 = this._active[s7].unhook(e9), true !== i8); s7--) if (i8 instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = s7, this._stack.fallThrough = false, i8;
                s7--;
              }
              for (; s7 >= 0; s7--) if (i8 = this._active[s7].unhook(false), i8 instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = s7, this._stack.fallThrough = true, i8;
            } else this._handlerFb(this._ident, "UNHOOK", e9);
            this._active = a3, this._ident = 0;
          }
        };
        const o8 = new r8.Params();
        o8.addParam(0), t7.DcsHandler = class {
          constructor(e9) {
            this._handler = e9, this._data = "", this._params = o8, this._hitLimit = false;
          }
          hook(e9) {
            this._params = e9.length > 1 || e9.params[0] ? e9.clone() : o8, this._data = "", this._hitLimit = false;
          }
          put(e9, t8, i8) {
            this._hitLimit || (this._data += (0, s6.utf32ToString)(e9, t8, i8), this._data.length > n8.PAYLOAD_LIMIT && (this._data = "", this._hitLimit = true));
          }
          unhook(e9) {
            let t8 = false;
            if (this._hitLimit) t8 = false;
            else if (e9 && (t8 = this._handler(this._data, this._params), t8 instanceof Promise)) return t8.then((e10) => (this._params = o8, this._data = "", this._hitLimit = false, e10));
            return this._params = o8, this._data = "", this._hitLimit = false, t8;
          }
        };
      }, 15: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.EscapeSequenceParser = t7.VT500_TRANSITION_TABLE = t7.TransitionTable = void 0;
        const s6 = i7(844), r8 = i7(742), n8 = i7(242), a3 = i7(351);
        class o8 {
          constructor(e9) {
            this.table = new Uint8Array(e9);
          }
          setDefault(e9, t8) {
            this.table.fill(e9 << 4 | t8);
          }
          add(e9, t8, i8, s7) {
            this.table[t8 << 8 | e9] = i8 << 4 | s7;
          }
          addMany(e9, t8, i8, s7) {
            for (let r9 = 0; r9 < e9.length; r9++) this.table[t8 << 8 | e9[r9]] = i8 << 4 | s7;
          }
        }
        t7.TransitionTable = o8;
        const h5 = 160;
        t7.VT500_TRANSITION_TABLE = function() {
          const e9 = new o8(4095), t8 = Array.apply(null, Array(256)).map((e10, t9) => t9), i8 = (e10, i9) => t8.slice(e10, i9), s7 = i8(32, 127), r9 = i8(0, 24);
          r9.push(25), r9.push.apply(r9, i8(28, 32));
          const n9 = i8(0, 14);
          let a4;
          for (a4 in e9.setDefault(1, 0), e9.addMany(s7, 0, 2, 0), n9) e9.addMany([24, 26, 153, 154], a4, 3, 0), e9.addMany(i8(128, 144), a4, 3, 0), e9.addMany(i8(144, 152), a4, 3, 0), e9.add(156, a4, 0, 0), e9.add(27, a4, 11, 1), e9.add(157, a4, 4, 8), e9.addMany([152, 158, 159], a4, 0, 7), e9.add(155, a4, 11, 3), e9.add(144, a4, 11, 9);
          return e9.addMany(r9, 0, 3, 0), e9.addMany(r9, 1, 3, 1), e9.add(127, 1, 0, 1), e9.addMany(r9, 8, 0, 8), e9.addMany(r9, 3, 3, 3), e9.add(127, 3, 0, 3), e9.addMany(r9, 4, 3, 4), e9.add(127, 4, 0, 4), e9.addMany(r9, 6, 3, 6), e9.addMany(r9, 5, 3, 5), e9.add(127, 5, 0, 5), e9.addMany(r9, 2, 3, 2), e9.add(127, 2, 0, 2), e9.add(93, 1, 4, 8), e9.addMany(s7, 8, 5, 8), e9.add(127, 8, 5, 8), e9.addMany([156, 27, 24, 26, 7], 8, 6, 0), e9.addMany(i8(28, 32), 8, 0, 8), e9.addMany([88, 94, 95], 1, 0, 7), e9.addMany(s7, 7, 0, 7), e9.addMany(r9, 7, 0, 7), e9.add(156, 7, 0, 0), e9.add(127, 7, 0, 7), e9.add(91, 1, 11, 3), e9.addMany(i8(64, 127), 3, 7, 0), e9.addMany(i8(48, 60), 3, 8, 4), e9.addMany([60, 61, 62, 63], 3, 9, 4), e9.addMany(i8(48, 60), 4, 8, 4), e9.addMany(i8(64, 127), 4, 7, 0), e9.addMany([60, 61, 62, 63], 4, 0, 6), e9.addMany(i8(32, 64), 6, 0, 6), e9.add(127, 6, 0, 6), e9.addMany(i8(64, 127), 6, 0, 0), e9.addMany(i8(32, 48), 3, 9, 5), e9.addMany(i8(32, 48), 5, 9, 5), e9.addMany(i8(48, 64), 5, 0, 6), e9.addMany(i8(64, 127), 5, 7, 0), e9.addMany(i8(32, 48), 4, 9, 5), e9.addMany(i8(32, 48), 1, 9, 2), e9.addMany(i8(32, 48), 2, 9, 2), e9.addMany(i8(48, 127), 2, 10, 0), e9.addMany(i8(48, 80), 1, 10, 0), e9.addMany(i8(81, 88), 1, 10, 0), e9.addMany([89, 90, 92], 1, 10, 0), e9.addMany(i8(96, 127), 1, 10, 0), e9.add(80, 1, 11, 9), e9.addMany(r9, 9, 0, 9), e9.add(127, 9, 0, 9), e9.addMany(i8(28, 32), 9, 0, 9), e9.addMany(i8(32, 48), 9, 9, 12), e9.addMany(i8(48, 60), 9, 8, 10), e9.addMany([60, 61, 62, 63], 9, 9, 10), e9.addMany(r9, 11, 0, 11), e9.addMany(i8(32, 128), 11, 0, 11), e9.addMany(i8(28, 32), 11, 0, 11), e9.addMany(r9, 10, 0, 10), e9.add(127, 10, 0, 10), e9.addMany(i8(28, 32), 10, 0, 10), e9.addMany(i8(48, 60), 10, 8, 10), e9.addMany([60, 61, 62, 63], 10, 0, 11), e9.addMany(i8(32, 48), 10, 9, 12), e9.addMany(r9, 12, 0, 12), e9.add(127, 12, 0, 12), e9.addMany(i8(28, 32), 12, 0, 12), e9.addMany(i8(32, 48), 12, 9, 12), e9.addMany(i8(48, 64), 12, 0, 11), e9.addMany(i8(64, 127), 12, 12, 13), e9.addMany(i8(64, 127), 10, 12, 13), e9.addMany(i8(64, 127), 9, 12, 13), e9.addMany(r9, 13, 13, 13), e9.addMany(s7, 13, 13, 13), e9.add(127, 13, 0, 13), e9.addMany([27, 156, 24, 26], 13, 14, 0), e9.add(h5, 0, 2, 0), e9.add(h5, 8, 5, 8), e9.add(h5, 6, 0, 6), e9.add(h5, 11, 0, 11), e9.add(h5, 13, 13, 13), e9;
        }();
        class c5 extends s6.Disposable {
          constructor(e9 = t7.VT500_TRANSITION_TABLE) {
            super(), this._transitions = e9, this._parseStack = { state: 0, handlers: [], handlerPos: 0, transition: 0, chunkPos: 0 }, this.initialState = 0, this.currentState = this.initialState, this._params = new r8.Params(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, this._printHandlerFb = (e10, t8, i8) => {
            }, this._executeHandlerFb = (e10) => {
            }, this._csiHandlerFb = (e10, t8) => {
            }, this._escHandlerFb = (e10) => {
            }, this._errorHandlerFb = (e10) => e10, this._printHandler = this._printHandlerFb, this._executeHandlers = /* @__PURE__ */ Object.create(null), this._csiHandlers = /* @__PURE__ */ Object.create(null), this._escHandlers = /* @__PURE__ */ Object.create(null), this.register((0, s6.toDisposable)(() => {
              this._csiHandlers = /* @__PURE__ */ Object.create(null), this._executeHandlers = /* @__PURE__ */ Object.create(null), this._escHandlers = /* @__PURE__ */ Object.create(null);
            })), this._oscParser = this.register(new n8.OscParser()), this._dcsParser = this.register(new a3.DcsParser()), this._errorHandler = this._errorHandlerFb, this.registerEscHandler({ final: "\\" }, () => true);
          }
          _identifier(e9, t8 = [64, 126]) {
            let i8 = 0;
            if (e9.prefix) {
              if (e9.prefix.length > 1) throw new Error("only one byte as prefix supported");
              if (i8 = e9.prefix.charCodeAt(0), i8 && 60 > i8 || i8 > 63) throw new Error("prefix must be in range 0x3c .. 0x3f");
            }
            if (e9.intermediates) {
              if (e9.intermediates.length > 2) throw new Error("only two bytes as intermediates are supported");
              for (let t9 = 0; t9 < e9.intermediates.length; ++t9) {
                const s8 = e9.intermediates.charCodeAt(t9);
                if (32 > s8 || s8 > 47) throw new Error("intermediate must be in range 0x20 .. 0x2f");
                i8 <<= 8, i8 |= s8;
              }
            }
            if (1 !== e9.final.length) throw new Error("final must be a single byte");
            const s7 = e9.final.charCodeAt(0);
            if (t8[0] > s7 || s7 > t8[1]) throw new Error(`final must be in range ${t8[0]} .. ${t8[1]}`);
            return i8 <<= 8, i8 |= s7, i8;
          }
          identToString(e9) {
            const t8 = [];
            for (; e9; ) t8.push(String.fromCharCode(255 & e9)), e9 >>= 8;
            return t8.reverse().join("");
          }
          setPrintHandler(e9) {
            this._printHandler = e9;
          }
          clearPrintHandler() {
            this._printHandler = this._printHandlerFb;
          }
          registerEscHandler(e9, t8) {
            const i8 = this._identifier(e9, [48, 126]);
            void 0 === this._escHandlers[i8] && (this._escHandlers[i8] = []);
            const s7 = this._escHandlers[i8];
            return s7.push(t8), { dispose: () => {
              const e10 = s7.indexOf(t8);
              -1 !== e10 && s7.splice(e10, 1);
            } };
          }
          clearEscHandler(e9) {
            this._escHandlers[this._identifier(e9, [48, 126])] && delete this._escHandlers[this._identifier(e9, [48, 126])];
          }
          setEscHandlerFallback(e9) {
            this._escHandlerFb = e9;
          }
          setExecuteHandler(e9, t8) {
            this._executeHandlers[e9.charCodeAt(0)] = t8;
          }
          clearExecuteHandler(e9) {
            this._executeHandlers[e9.charCodeAt(0)] && delete this._executeHandlers[e9.charCodeAt(0)];
          }
          setExecuteHandlerFallback(e9) {
            this._executeHandlerFb = e9;
          }
          registerCsiHandler(e9, t8) {
            const i8 = this._identifier(e9);
            void 0 === this._csiHandlers[i8] && (this._csiHandlers[i8] = []);
            const s7 = this._csiHandlers[i8];
            return s7.push(t8), { dispose: () => {
              const e10 = s7.indexOf(t8);
              -1 !== e10 && s7.splice(e10, 1);
            } };
          }
          clearCsiHandler(e9) {
            this._csiHandlers[this._identifier(e9)] && delete this._csiHandlers[this._identifier(e9)];
          }
          setCsiHandlerFallback(e9) {
            this._csiHandlerFb = e9;
          }
          registerDcsHandler(e9, t8) {
            return this._dcsParser.registerHandler(this._identifier(e9), t8);
          }
          clearDcsHandler(e9) {
            this._dcsParser.clearHandler(this._identifier(e9));
          }
          setDcsHandlerFallback(e9) {
            this._dcsParser.setHandlerFallback(e9);
          }
          registerOscHandler(e9, t8) {
            return this._oscParser.registerHandler(e9, t8);
          }
          clearOscHandler(e9) {
            this._oscParser.clearHandler(e9);
          }
          setOscHandlerFallback(e9) {
            this._oscParser.setHandlerFallback(e9);
          }
          setErrorHandler(e9) {
            this._errorHandler = e9;
          }
          clearErrorHandler() {
            this._errorHandler = this._errorHandlerFb;
          }
          reset() {
            this.currentState = this.initialState, this._oscParser.reset(), this._dcsParser.reset(), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, 0 !== this._parseStack.state && (this._parseStack.state = 2, this._parseStack.handlers = []);
          }
          _preserveStack(e9, t8, i8, s7, r9) {
            this._parseStack.state = e9, this._parseStack.handlers = t8, this._parseStack.handlerPos = i8, this._parseStack.transition = s7, this._parseStack.chunkPos = r9;
          }
          parse(e9, t8, i8) {
            let s7, r9 = 0, n9 = 0, a4 = 0;
            if (this._parseStack.state) if (2 === this._parseStack.state) this._parseStack.state = 0, a4 = this._parseStack.chunkPos + 1;
            else {
              if (void 0 === i8 || 1 === this._parseStack.state) throw this._parseStack.state = 1, new Error("improper continuation due to previous async handler, giving up parsing");
              const t9 = this._parseStack.handlers;
              let n10 = this._parseStack.handlerPos - 1;
              switch (this._parseStack.state) {
                case 3:
                  if (false === i8 && n10 > -1) {
                    for (; n10 >= 0 && (s7 = t9[n10](this._params), true !== s7); n10--) if (s7 instanceof Promise) return this._parseStack.handlerPos = n10, s7;
                  }
                  this._parseStack.handlers = [];
                  break;
                case 4:
                  if (false === i8 && n10 > -1) {
                    for (; n10 >= 0 && (s7 = t9[n10](), true !== s7); n10--) if (s7 instanceof Promise) return this._parseStack.handlerPos = n10, s7;
                  }
                  this._parseStack.handlers = [];
                  break;
                case 6:
                  if (r9 = e9[this._parseStack.chunkPos], s7 = this._dcsParser.unhook(24 !== r9 && 26 !== r9, i8), s7) return s7;
                  27 === r9 && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0;
                  break;
                case 5:
                  if (r9 = e9[this._parseStack.chunkPos], s7 = this._oscParser.end(24 !== r9 && 26 !== r9, i8), s7) return s7;
                  27 === r9 && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0;
              }
              this._parseStack.state = 0, a4 = this._parseStack.chunkPos + 1, this.precedingJoinState = 0, this.currentState = 15 & this._parseStack.transition;
            }
            for (let i9 = a4; i9 < t8; ++i9) {
              switch (r9 = e9[i9], n9 = this._transitions.table[this.currentState << 8 | (r9 < 160 ? r9 : h5)], n9 >> 4) {
                case 2:
                  for (let s8 = i9 + 1; ; ++s8) {
                    if (s8 >= t8 || (r9 = e9[s8]) < 32 || r9 > 126 && r9 < h5) {
                      this._printHandler(e9, i9, s8), i9 = s8 - 1;
                      break;
                    }
                    if (++s8 >= t8 || (r9 = e9[s8]) < 32 || r9 > 126 && r9 < h5) {
                      this._printHandler(e9, i9, s8), i9 = s8 - 1;
                      break;
                    }
                    if (++s8 >= t8 || (r9 = e9[s8]) < 32 || r9 > 126 && r9 < h5) {
                      this._printHandler(e9, i9, s8), i9 = s8 - 1;
                      break;
                    }
                    if (++s8 >= t8 || (r9 = e9[s8]) < 32 || r9 > 126 && r9 < h5) {
                      this._printHandler(e9, i9, s8), i9 = s8 - 1;
                      break;
                    }
                  }
                  break;
                case 3:
                  this._executeHandlers[r9] ? this._executeHandlers[r9]() : this._executeHandlerFb(r9), this.precedingJoinState = 0;
                  break;
                case 0:
                  break;
                case 1:
                  if (this._errorHandler({ position: i9, code: r9, currentState: this.currentState, collect: this._collect, params: this._params, abort: false }).abort) return;
                  break;
                case 7:
                  const a5 = this._csiHandlers[this._collect << 8 | r9];
                  let o9 = a5 ? a5.length - 1 : -1;
                  for (; o9 >= 0 && (s7 = a5[o9](this._params), true !== s7); o9--) if (s7 instanceof Promise) return this._preserveStack(3, a5, o9, n9, i9), s7;
                  o9 < 0 && this._csiHandlerFb(this._collect << 8 | r9, this._params), this.precedingJoinState = 0;
                  break;
                case 8:
                  do {
                    switch (r9) {
                      case 59:
                        this._params.addParam(0);
                        break;
                      case 58:
                        this._params.addSubParam(-1);
                        break;
                      default:
                        this._params.addDigit(r9 - 48);
                    }
                  } while (++i9 < t8 && (r9 = e9[i9]) > 47 && r9 < 60);
                  i9--;
                  break;
                case 9:
                  this._collect <<= 8, this._collect |= r9;
                  break;
                case 10:
                  const c6 = this._escHandlers[this._collect << 8 | r9];
                  let l3 = c6 ? c6.length - 1 : -1;
                  for (; l3 >= 0 && (s7 = c6[l3](), true !== s7); l3--) if (s7 instanceof Promise) return this._preserveStack(4, c6, l3, n9, i9), s7;
                  l3 < 0 && this._escHandlerFb(this._collect << 8 | r9), this.precedingJoinState = 0;
                  break;
                case 11:
                  this._params.reset(), this._params.addParam(0), this._collect = 0;
                  break;
                case 12:
                  this._dcsParser.hook(this._collect << 8 | r9, this._params);
                  break;
                case 13:
                  for (let s8 = i9 + 1; ; ++s8) if (s8 >= t8 || 24 === (r9 = e9[s8]) || 26 === r9 || 27 === r9 || r9 > 127 && r9 < h5) {
                    this._dcsParser.put(e9, i9, s8), i9 = s8 - 1;
                    break;
                  }
                  break;
                case 14:
                  if (s7 = this._dcsParser.unhook(24 !== r9 && 26 !== r9), s7) return this._preserveStack(6, [], 0, n9, i9), s7;
                  27 === r9 && (n9 |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0;
                  break;
                case 4:
                  this._oscParser.start();
                  break;
                case 5:
                  for (let s8 = i9 + 1; ; s8++) if (s8 >= t8 || (r9 = e9[s8]) < 32 || r9 > 127 && r9 < h5) {
                    this._oscParser.put(e9, i9, s8), i9 = s8 - 1;
                    break;
                  }
                  break;
                case 6:
                  if (s7 = this._oscParser.end(24 !== r9 && 26 !== r9), s7) return this._preserveStack(5, [], 0, n9, i9), s7;
                  27 === r9 && (n9 |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0;
              }
              this.currentState = 15 & n9;
            }
          }
        }
        t7.EscapeSequenceParser = c5;
      }, 242: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.OscHandler = t7.OscParser = void 0;
        const s6 = i7(770), r8 = i7(482), n8 = [];
        t7.OscParser = class {
          constructor() {
            this._state = 0, this._active = n8, this._id = -1, this._handlers = /* @__PURE__ */ Object.create(null), this._handlerFb = () => {
            }, this._stack = { paused: false, loopPosition: 0, fallThrough: false };
          }
          registerHandler(e9, t8) {
            void 0 === this._handlers[e9] && (this._handlers[e9] = []);
            const i8 = this._handlers[e9];
            return i8.push(t8), { dispose: () => {
              const e10 = i8.indexOf(t8);
              -1 !== e10 && i8.splice(e10, 1);
            } };
          }
          clearHandler(e9) {
            this._handlers[e9] && delete this._handlers[e9];
          }
          setHandlerFallback(e9) {
            this._handlerFb = e9;
          }
          dispose() {
            this._handlers = /* @__PURE__ */ Object.create(null), this._handlerFb = () => {
            }, this._active = n8;
          }
          reset() {
            if (2 === this._state) for (let e9 = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; e9 >= 0; --e9) this._active[e9].end(false);
            this._stack.paused = false, this._active = n8, this._id = -1, this._state = 0;
          }
          _start() {
            if (this._active = this._handlers[this._id] || n8, this._active.length) for (let e9 = this._active.length - 1; e9 >= 0; e9--) this._active[e9].start();
            else this._handlerFb(this._id, "START");
          }
          _put(e9, t8, i8) {
            if (this._active.length) for (let s7 = this._active.length - 1; s7 >= 0; s7--) this._active[s7].put(e9, t8, i8);
            else this._handlerFb(this._id, "PUT", (0, r8.utf32ToString)(e9, t8, i8));
          }
          start() {
            this.reset(), this._state = 1;
          }
          put(e9, t8, i8) {
            if (3 !== this._state) {
              if (1 === this._state) for (; t8 < i8; ) {
                const i9 = e9[t8++];
                if (59 === i9) {
                  this._state = 2, this._start();
                  break;
                }
                if (i9 < 48 || 57 < i9) return void (this._state = 3);
                -1 === this._id && (this._id = 0), this._id = 10 * this._id + i9 - 48;
              }
              2 === this._state && i8 - t8 > 0 && this._put(e9, t8, i8);
            }
          }
          end(e9, t8 = true) {
            if (0 !== this._state) {
              if (3 !== this._state) if (1 === this._state && this._start(), this._active.length) {
                let i8 = false, s7 = this._active.length - 1, r9 = false;
                if (this._stack.paused && (s7 = this._stack.loopPosition - 1, i8 = t8, r9 = this._stack.fallThrough, this._stack.paused = false), !r9 && false === i8) {
                  for (; s7 >= 0 && (i8 = this._active[s7].end(e9), true !== i8); s7--) if (i8 instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = s7, this._stack.fallThrough = false, i8;
                  s7--;
                }
                for (; s7 >= 0; s7--) if (i8 = this._active[s7].end(false), i8 instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = s7, this._stack.fallThrough = true, i8;
              } else this._handlerFb(this._id, "END", e9);
              this._active = n8, this._id = -1, this._state = 0;
            }
          }
        }, t7.OscHandler = class {
          constructor(e9) {
            this._handler = e9, this._data = "", this._hitLimit = false;
          }
          start() {
            this._data = "", this._hitLimit = false;
          }
          put(e9, t8, i8) {
            this._hitLimit || (this._data += (0, r8.utf32ToString)(e9, t8, i8), this._data.length > s6.PAYLOAD_LIMIT && (this._data = "", this._hitLimit = true));
          }
          end(e9) {
            let t8 = false;
            if (this._hitLimit) t8 = false;
            else if (e9 && (t8 = this._handler(this._data), t8 instanceof Promise)) return t8.then((e10) => (this._data = "", this._hitLimit = false, e10));
            return this._data = "", this._hitLimit = false, t8;
          }
        };
      }, 742: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.Params = void 0;
        const i7 = 2147483647;
        class s6 {
          static fromArray(e9) {
            const t8 = new s6();
            if (!e9.length) return t8;
            for (let i8 = Array.isArray(e9[0]) ? 1 : 0; i8 < e9.length; ++i8) {
              const s7 = e9[i8];
              if (Array.isArray(s7)) for (let e10 = 0; e10 < s7.length; ++e10) t8.addSubParam(s7[e10]);
              else t8.addParam(s7);
            }
            return t8;
          }
          constructor(e9 = 32, t8 = 32) {
            if (this.maxLength = e9, this.maxSubParamsLength = t8, t8 > 256) throw new Error("maxSubParamsLength must not be greater than 256");
            this.params = new Int32Array(e9), this.length = 0, this._subParams = new Int32Array(t8), this._subParamsLength = 0, this._subParamsIdx = new Uint16Array(e9), this._rejectDigits = false, this._rejectSubDigits = false, this._digitIsSub = false;
          }
          clone() {
            const e9 = new s6(this.maxLength, this.maxSubParamsLength);
            return e9.params.set(this.params), e9.length = this.length, e9._subParams.set(this._subParams), e9._subParamsLength = this._subParamsLength, e9._subParamsIdx.set(this._subParamsIdx), e9._rejectDigits = this._rejectDigits, e9._rejectSubDigits = this._rejectSubDigits, e9._digitIsSub = this._digitIsSub, e9;
          }
          toArray() {
            const e9 = [];
            for (let t8 = 0; t8 < this.length; ++t8) {
              e9.push(this.params[t8]);
              const i8 = this._subParamsIdx[t8] >> 8, s7 = 255 & this._subParamsIdx[t8];
              s7 - i8 > 0 && e9.push(Array.prototype.slice.call(this._subParams, i8, s7));
            }
            return e9;
          }
          reset() {
            this.length = 0, this._subParamsLength = 0, this._rejectDigits = false, this._rejectSubDigits = false, this._digitIsSub = false;
          }
          addParam(e9) {
            if (this._digitIsSub = false, this.length >= this.maxLength) this._rejectDigits = true;
            else {
              if (e9 < -1) throw new Error("values lesser than -1 are not allowed");
              this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength, this.params[this.length++] = e9 > i7 ? i7 : e9;
            }
          }
          addSubParam(e9) {
            if (this._digitIsSub = true, this.length) if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) this._rejectSubDigits = true;
            else {
              if (e9 < -1) throw new Error("values lesser than -1 are not allowed");
              this._subParams[this._subParamsLength++] = e9 > i7 ? i7 : e9, this._subParamsIdx[this.length - 1]++;
            }
          }
          hasSubParams(e9) {
            return (255 & this._subParamsIdx[e9]) - (this._subParamsIdx[e9] >> 8) > 0;
          }
          getSubParams(e9) {
            const t8 = this._subParamsIdx[e9] >> 8, i8 = 255 & this._subParamsIdx[e9];
            return i8 - t8 > 0 ? this._subParams.subarray(t8, i8) : null;
          }
          getSubParamsAll() {
            const e9 = {};
            for (let t8 = 0; t8 < this.length; ++t8) {
              const i8 = this._subParamsIdx[t8] >> 8, s7 = 255 & this._subParamsIdx[t8];
              s7 - i8 > 0 && (e9[t8] = this._subParams.slice(i8, s7));
            }
            return e9;
          }
          addDigit(e9) {
            let t8;
            if (this._rejectDigits || !(t8 = this._digitIsSub ? this._subParamsLength : this.length) || this._digitIsSub && this._rejectSubDigits) return;
            const s7 = this._digitIsSub ? this._subParams : this.params, r8 = s7[t8 - 1];
            s7[t8 - 1] = ~r8 ? Math.min(10 * r8 + e9, i7) : e9;
          }
        }
        t7.Params = s6;
      }, 741: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.AddonManager = void 0, t7.AddonManager = class {
          constructor() {
            this._addons = [];
          }
          dispose() {
            for (let e9 = this._addons.length - 1; e9 >= 0; e9--) this._addons[e9].instance.dispose();
          }
          loadAddon(e9, t8) {
            const i7 = { instance: t8, dispose: t8.dispose, isDisposed: false };
            this._addons.push(i7), t8.dispose = () => this._wrappedAddonDispose(i7), t8.activate(e9);
          }
          _wrappedAddonDispose(e9) {
            if (e9.isDisposed) return;
            let t8 = -1;
            for (let i7 = 0; i7 < this._addons.length; i7++) if (this._addons[i7] === e9) {
              t8 = i7;
              break;
            }
            if (-1 === t8) throw new Error("Could not dispose an addon that has not been loaded");
            e9.isDisposed = true, e9.dispose.apply(e9.instance), this._addons.splice(t8, 1);
          }
        };
      }, 771: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferApiView = void 0;
        const s6 = i7(785), r8 = i7(511);
        t7.BufferApiView = class {
          constructor(e9, t8) {
            this._buffer = e9, this.type = t8;
          }
          init(e9) {
            return this._buffer = e9, this;
          }
          get cursorY() {
            return this._buffer.y;
          }
          get cursorX() {
            return this._buffer.x;
          }
          get viewportY() {
            return this._buffer.ydisp;
          }
          get baseY() {
            return this._buffer.ybase;
          }
          get length() {
            return this._buffer.lines.length;
          }
          getLine(e9) {
            const t8 = this._buffer.lines.get(e9);
            if (t8) return new s6.BufferLineApiView(t8);
          }
          getNullCell() {
            return new r8.CellData();
          }
        };
      }, 785: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferLineApiView = void 0;
        const s6 = i7(511);
        t7.BufferLineApiView = class {
          constructor(e9) {
            this._line = e9;
          }
          get isWrapped() {
            return this._line.isWrapped;
          }
          get length() {
            return this._line.length;
          }
          getCell(e9, t8) {
            if (!(e9 < 0 || e9 >= this._line.length)) return t8 ? (this._line.loadCell(e9, t8), t8) : this._line.loadCell(e9, new s6.CellData());
          }
          translateToString(e9, t8, i8) {
            return this._line.translateToString(e9, t8, i8);
          }
        };
      }, 285: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferNamespaceApi = void 0;
        const s6 = i7(771), r8 = i7(460), n8 = i7(844);
        class a3 extends n8.Disposable {
          constructor(e9) {
            super(), this._core = e9, this._onBufferChange = this.register(new r8.EventEmitter()), this.onBufferChange = this._onBufferChange.event, this._normal = new s6.BufferApiView(this._core.buffers.normal, "normal"), this._alternate = new s6.BufferApiView(this._core.buffers.alt, "alternate"), this._core.buffers.onBufferActivate(() => this._onBufferChange.fire(this.active));
          }
          get active() {
            if (this._core.buffers.active === this._core.buffers.normal) return this.normal;
            if (this._core.buffers.active === this._core.buffers.alt) return this.alternate;
            throw new Error("Active buffer is neither normal nor alternate");
          }
          get normal() {
            return this._normal.init(this._core.buffers.normal);
          }
          get alternate() {
            return this._alternate.init(this._core.buffers.alt);
          }
        }
        t7.BufferNamespaceApi = a3;
      }, 975: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.ParserApi = void 0, t7.ParserApi = class {
          constructor(e9) {
            this._core = e9;
          }
          registerCsiHandler(e9, t8) {
            return this._core.registerCsiHandler(e9, (e10) => t8(e10.toArray()));
          }
          addCsiHandler(e9, t8) {
            return this.registerCsiHandler(e9, t8);
          }
          registerDcsHandler(e9, t8) {
            return this._core.registerDcsHandler(e9, (e10, i7) => t8(e10, i7.toArray()));
          }
          addDcsHandler(e9, t8) {
            return this.registerDcsHandler(e9, t8);
          }
          registerEscHandler(e9, t8) {
            return this._core.registerEscHandler(e9, t8);
          }
          addEscHandler(e9, t8) {
            return this.registerEscHandler(e9, t8);
          }
          registerOscHandler(e9, t8) {
            return this._core.registerOscHandler(e9, t8);
          }
          addOscHandler(e9, t8) {
            return this.registerOscHandler(e9, t8);
          }
        };
      }, 90: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.UnicodeApi = void 0, t7.UnicodeApi = class {
          constructor(e9) {
            this._core = e9;
          }
          register(e9) {
            this._core.unicodeService.register(e9);
          }
          get versions() {
            return this._core.unicodeService.versions;
          }
          get activeVersion() {
            return this._core.unicodeService.activeVersion;
          }
          set activeVersion(e9) {
            this._core.unicodeService.activeVersion = e9;
          }
        };
      }, 744: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o9 = e9.length - 1; o9 >= 0; o9--) (r9 = e9[o9]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.BufferService = t7.MINIMUM_ROWS = t7.MINIMUM_COLS = void 0;
        const n8 = i7(460), a3 = i7(844), o8 = i7(295), h5 = i7(585);
        t7.MINIMUM_COLS = 2, t7.MINIMUM_ROWS = 1;
        let c5 = t7.BufferService = class extends a3.Disposable {
          get buffer() {
            return this.buffers.active;
          }
          constructor(e9) {
            super(), this.isUserScrolling = false, this._onResize = this.register(new n8.EventEmitter()), this.onResize = this._onResize.event, this._onScroll = this.register(new n8.EventEmitter()), this.onScroll = this._onScroll.event, this.cols = Math.max(e9.rawOptions.cols || 0, t7.MINIMUM_COLS), this.rows = Math.max(e9.rawOptions.rows || 0, t7.MINIMUM_ROWS), this.buffers = this.register(new o8.BufferSet(e9, this));
          }
          resize(e9, t8) {
            this.cols = e9, this.rows = t8, this.buffers.resize(e9, t8), this._onResize.fire({ cols: e9, rows: t8 });
          }
          reset() {
            this.buffers.reset(), this.isUserScrolling = false;
          }
          scroll(e9, t8 = false) {
            const i8 = this.buffer;
            let s7;
            s7 = this._cachedBlankLine, s7 && s7.length === this.cols && s7.getFg(0) === e9.fg && s7.getBg(0) === e9.bg || (s7 = i8.getBlankLine(e9, t8), this._cachedBlankLine = s7), s7.isWrapped = t8;
            const r9 = i8.ybase + i8.scrollTop, n9 = i8.ybase + i8.scrollBottom;
            if (0 === i8.scrollTop) {
              const e10 = i8.lines.isFull;
              n9 === i8.lines.length - 1 ? e10 ? i8.lines.recycle().copyFrom(s7) : i8.lines.push(s7.clone()) : i8.lines.splice(n9 + 1, 0, s7.clone()), e10 ? this.isUserScrolling && (i8.ydisp = Math.max(i8.ydisp - 1, 0)) : (i8.ybase++, this.isUserScrolling || i8.ydisp++);
            } else {
              const e10 = n9 - r9 + 1;
              i8.lines.shiftElements(r9 + 1, e10 - 1, -1), i8.lines.set(n9, s7.clone());
            }
            this.isUserScrolling || (i8.ydisp = i8.ybase), this._onScroll.fire(i8.ydisp);
          }
          scrollLines(e9, t8, i8) {
            const s7 = this.buffer;
            if (e9 < 0) {
              if (0 === s7.ydisp) return;
              this.isUserScrolling = true;
            } else e9 + s7.ydisp >= s7.ybase && (this.isUserScrolling = false);
            const r9 = s7.ydisp;
            s7.ydisp = Math.max(Math.min(s7.ydisp + e9, s7.ybase), 0), r9 !== s7.ydisp && (t8 || this._onScroll.fire(s7.ydisp));
          }
        };
        t7.BufferService = c5 = s6([r8(0, h5.IOptionsService)], c5);
      }, 994: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CharsetService = void 0, t7.CharsetService = class {
          constructor() {
            this.glevel = 0, this._charsets = [];
          }
          reset() {
            this.charset = void 0, this._charsets = [], this.glevel = 0;
          }
          setgLevel(e9) {
            this.glevel = e9, this.charset = this._charsets[e9];
          }
          setgCharset(e9, t8) {
            this._charsets[e9] = t8, this.glevel === e9 && (this.charset = t8);
          }
        };
      }, 753: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o9 = e9.length - 1; o9 >= 0; o9--) (r9 = e9[o9]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CoreMouseService = void 0;
        const n8 = i7(585), a3 = i7(460), o8 = i7(844), h5 = { NONE: { events: 0, restrict: () => false }, X10: { events: 1, restrict: (e9) => 4 !== e9.button && 1 === e9.action && (e9.ctrl = false, e9.alt = false, e9.shift = false, true) }, VT200: { events: 19, restrict: (e9) => 32 !== e9.action }, DRAG: { events: 23, restrict: (e9) => 32 !== e9.action || 3 !== e9.button }, ANY: { events: 31, restrict: (e9) => true } };
        function c5(e9, t8) {
          let i8 = (e9.ctrl ? 16 : 0) | (e9.shift ? 4 : 0) | (e9.alt ? 8 : 0);
          return 4 === e9.button ? (i8 |= 64, i8 |= e9.action) : (i8 |= 3 & e9.button, 4 & e9.button && (i8 |= 64), 8 & e9.button && (i8 |= 128), 32 === e9.action ? i8 |= 32 : 0 !== e9.action || t8 || (i8 |= 3)), i8;
        }
        const l3 = String.fromCharCode, _2 = { DEFAULT: (e9) => {
          const t8 = [c5(e9, false) + 32, e9.col + 32, e9.row + 32];
          return t8[0] > 255 || t8[1] > 255 || t8[2] > 255 ? "" : `\x1B[M${l3(t8[0])}${l3(t8[1])}${l3(t8[2])}`;
        }, SGR: (e9) => {
          const t8 = 0 === e9.action && 4 !== e9.button ? "m" : "M";
          return `\x1B[<${c5(e9, true)};${e9.col};${e9.row}${t8}`;
        }, SGR_PIXELS: (e9) => {
          const t8 = 0 === e9.action && 4 !== e9.button ? "m" : "M";
          return `\x1B[<${c5(e9, true)};${e9.x};${e9.y}${t8}`;
        } };
        let d3 = t7.CoreMouseService = class extends o8.Disposable {
          constructor(e9, t8) {
            super(), this._bufferService = e9, this._coreService = t8, this._protocols = {}, this._encodings = {}, this._activeProtocol = "", this._activeEncoding = "", this._lastEvent = null, this._onProtocolChange = this.register(new a3.EventEmitter()), this.onProtocolChange = this._onProtocolChange.event;
            for (const e10 of Object.keys(h5)) this.addProtocol(e10, h5[e10]);
            for (const e10 of Object.keys(_2)) this.addEncoding(e10, _2[e10]);
            this.reset();
          }
          addProtocol(e9, t8) {
            this._protocols[e9] = t8;
          }
          addEncoding(e9, t8) {
            this._encodings[e9] = t8;
          }
          get activeProtocol() {
            return this._activeProtocol;
          }
          get areMouseEventsActive() {
            return 0 !== this._protocols[this._activeProtocol].events;
          }
          set activeProtocol(e9) {
            if (!this._protocols[e9]) throw new Error(`unknown protocol "${e9}"`);
            this._activeProtocol = e9, this._onProtocolChange.fire(this._protocols[e9].events);
          }
          get activeEncoding() {
            return this._activeEncoding;
          }
          set activeEncoding(e9) {
            if (!this._encodings[e9]) throw new Error(`unknown encoding "${e9}"`);
            this._activeEncoding = e9;
          }
          reset() {
            this.activeProtocol = "NONE", this.activeEncoding = "DEFAULT", this._lastEvent = null;
          }
          triggerMouseEvent(e9) {
            if (e9.col < 0 || e9.col >= this._bufferService.cols || e9.row < 0 || e9.row >= this._bufferService.rows) return false;
            if (4 === e9.button && 32 === e9.action) return false;
            if (3 === e9.button && 32 !== e9.action) return false;
            if (4 !== e9.button && (2 === e9.action || 3 === e9.action)) return false;
            if (e9.col++, e9.row++, 32 === e9.action && this._lastEvent && this._equalEvents(this._lastEvent, e9, "SGR_PIXELS" === this._activeEncoding)) return false;
            if (!this._protocols[this._activeProtocol].restrict(e9)) return false;
            const t8 = this._encodings[this._activeEncoding](e9);
            return t8 && ("DEFAULT" === this._activeEncoding ? this._coreService.triggerBinaryEvent(t8) : this._coreService.triggerDataEvent(t8, true)), this._lastEvent = e9, true;
          }
          explainEvents(e9) {
            return { down: !!(1 & e9), up: !!(2 & e9), drag: !!(4 & e9), move: !!(8 & e9), wheel: !!(16 & e9) };
          }
          _equalEvents(e9, t8, i8) {
            if (i8) {
              if (e9.x !== t8.x) return false;
              if (e9.y !== t8.y) return false;
            } else {
              if (e9.col !== t8.col) return false;
              if (e9.row !== t8.row) return false;
            }
            return e9.button === t8.button && e9.action === t8.action && e9.ctrl === t8.ctrl && e9.alt === t8.alt && e9.shift === t8.shift;
          }
        };
        t7.CoreMouseService = d3 = s6([r8(0, n8.IBufferService), r8(1, n8.ICoreService)], d3);
      }, 83: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o9 = e9.length - 1; o9 >= 0; o9--) (r9 = e9[o9]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.CoreService = void 0;
        const n8 = i7(439), a3 = i7(460), o8 = i7(844), h5 = i7(585), c5 = Object.freeze({ insertMode: false }), l3 = Object.freeze({ applicationCursorKeys: false, applicationKeypad: false, bracketedPasteMode: false, origin: false, reverseWraparound: false, sendFocus: false, wraparound: true });
        let _2 = t7.CoreService = class extends o8.Disposable {
          constructor(e9, t8, i8) {
            super(), this._bufferService = e9, this._logService = t8, this._optionsService = i8, this.isCursorInitialized = false, this.isCursorHidden = false, this._onData = this.register(new a3.EventEmitter()), this.onData = this._onData.event, this._onUserInput = this.register(new a3.EventEmitter()), this.onUserInput = this._onUserInput.event, this._onBinary = this.register(new a3.EventEmitter()), this.onBinary = this._onBinary.event, this._onRequestScrollToBottom = this.register(new a3.EventEmitter()), this.onRequestScrollToBottom = this._onRequestScrollToBottom.event, this.modes = (0, n8.clone)(c5), this.decPrivateModes = (0, n8.clone)(l3);
          }
          reset() {
            this.modes = (0, n8.clone)(c5), this.decPrivateModes = (0, n8.clone)(l3);
          }
          triggerDataEvent(e9, t8 = false) {
            if (this._optionsService.rawOptions.disableStdin) return;
            const i8 = this._bufferService.buffer;
            t8 && this._optionsService.rawOptions.scrollOnUserInput && i8.ybase !== i8.ydisp && this._onRequestScrollToBottom.fire(), t8 && this._onUserInput.fire(), this._logService.debug(`sending data "${e9}"`, () => e9.split("").map((e10) => e10.charCodeAt(0))), this._onData.fire(e9);
          }
          triggerBinaryEvent(e9) {
            this._optionsService.rawOptions.disableStdin || (this._logService.debug(`sending binary "${e9}"`, () => e9.split("").map((e10) => e10.charCodeAt(0))), this._onBinary.fire(e9));
          }
        };
        t7.CoreService = _2 = s6([r8(0, h5.IBufferService), r8(1, h5.ILogService), r8(2, h5.IOptionsService)], _2);
      }, 348: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.InstantiationService = t7.ServiceCollection = void 0;
        const s6 = i7(585), r8 = i7(343);
        class n8 {
          constructor(...e9) {
            this._entries = /* @__PURE__ */ new Map();
            for (const [t8, i8] of e9) this.set(t8, i8);
          }
          set(e9, t8) {
            const i8 = this._entries.get(e9);
            return this._entries.set(e9, t8), i8;
          }
          forEach(e9) {
            for (const [t8, i8] of this._entries.entries()) e9(t8, i8);
          }
          has(e9) {
            return this._entries.has(e9);
          }
          get(e9) {
            return this._entries.get(e9);
          }
        }
        t7.ServiceCollection = n8, t7.InstantiationService = class {
          constructor() {
            this._services = new n8(), this._services.set(s6.IInstantiationService, this);
          }
          setService(e9, t8) {
            this._services.set(e9, t8);
          }
          getService(e9) {
            return this._services.get(e9);
          }
          createInstance(e9, ...t8) {
            const i8 = (0, r8.getServiceDependencies)(e9).sort((e10, t9) => e10.index - t9.index), s7 = [];
            for (const t9 of i8) {
              const i9 = this._services.get(t9.id);
              if (!i9) throw new Error(`[createInstance] ${e9.name} depends on UNKNOWN service ${t9.id}.`);
              s7.push(i9);
            }
            const n9 = i8.length > 0 ? i8[0].index : t8.length;
            if (t8.length !== n9) throw new Error(`[createInstance] First service dependency of ${e9.name} at position ${n9 + 1} conflicts with ${t8.length} static arguments`);
            return new e9(...[...t8, ...s7]);
          }
        };
      }, 866: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o9 = e9.length - 1; o9 >= 0; o9--) (r9 = e9[o9]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.traceCall = t7.setTraceLogger = t7.LogService = void 0;
        const n8 = i7(844), a3 = i7(585), o8 = { trace: a3.LogLevelEnum.TRACE, debug: a3.LogLevelEnum.DEBUG, info: a3.LogLevelEnum.INFO, warn: a3.LogLevelEnum.WARN, error: a3.LogLevelEnum.ERROR, off: a3.LogLevelEnum.OFF };
        let h5, c5 = t7.LogService = class extends n8.Disposable {
          get logLevel() {
            return this._logLevel;
          }
          constructor(e9) {
            super(), this._optionsService = e9, this._logLevel = a3.LogLevelEnum.OFF, this._updateLogLevel(), this.register(this._optionsService.onSpecificOptionChange("logLevel", () => this._updateLogLevel())), h5 = this;
          }
          _updateLogLevel() {
            this._logLevel = o8[this._optionsService.rawOptions.logLevel];
          }
          _evalLazyOptionalParams(e9) {
            for (let t8 = 0; t8 < e9.length; t8++) "function" == typeof e9[t8] && (e9[t8] = e9[t8]());
          }
          _log(e9, t8, i8) {
            this._evalLazyOptionalParams(i8), e9.call(console, (this._optionsService.options.logger ? "" : "xterm.js: ") + t8, ...i8);
          }
          trace(e9, ...t8) {
            this._logLevel <= a3.LogLevelEnum.TRACE && this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, e9, t8);
          }
          debug(e9, ...t8) {
            this._logLevel <= a3.LogLevelEnum.DEBUG && this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, e9, t8);
          }
          info(e9, ...t8) {
            this._logLevel <= a3.LogLevelEnum.INFO && this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, e9, t8);
          }
          warn(e9, ...t8) {
            this._logLevel <= a3.LogLevelEnum.WARN && this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, e9, t8);
          }
          error(e9, ...t8) {
            this._logLevel <= a3.LogLevelEnum.ERROR && this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, e9, t8);
          }
        };
        t7.LogService = c5 = s6([r8(0, a3.IOptionsService)], c5), t7.setTraceLogger = function(e9) {
          h5 = e9;
        }, t7.traceCall = function(e9, t8, i8) {
          if ("function" != typeof i8.value) throw new Error("not supported");
          const s7 = i8.value;
          i8.value = function(...e10) {
            if (h5.logLevel !== a3.LogLevelEnum.TRACE) return s7.apply(this, e10);
            h5.trace(`GlyphRenderer#${s7.name}(${e10.map((e11) => JSON.stringify(e11)).join(", ")})`);
            const t9 = s7.apply(this, e10);
            return h5.trace(`GlyphRenderer#${s7.name} return`, t9), t9;
          };
        };
      }, 302: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.OptionsService = t7.DEFAULT_OPTIONS = void 0;
        const s6 = i7(460), r8 = i7(844), n8 = i7(114);
        t7.DEFAULT_OPTIONS = { cols: 80, rows: 24, cursorBlink: false, cursorStyle: "block", cursorWidth: 1, cursorInactiveStyle: "outline", customGlyphs: true, drawBoldTextInBrightColors: true, documentOverride: null, fastScrollModifier: "alt", fastScrollSensitivity: 5, fontFamily: "courier-new, courier, monospace", fontSize: 15, fontWeight: "normal", fontWeightBold: "bold", ignoreBracketedPasteMode: false, lineHeight: 1, letterSpacing: 0, linkHandler: null, logLevel: "info", logger: null, scrollback: 1e3, scrollOnUserInput: true, scrollSensitivity: 1, screenReaderMode: false, smoothScrollDuration: 0, macOptionIsMeta: false, macOptionClickForcesSelection: false, minimumContrastRatio: 1, disableStdin: false, allowProposedApi: false, allowTransparency: false, tabStopWidth: 8, theme: {}, rescaleOverlappingGlyphs: false, rightClickSelectsWord: n8.isMac, windowOptions: {}, windowsMode: false, windowsPty: {}, wordSeparator: " ()[]{}',\"`", altClickMovesCursor: true, convertEol: false, termName: "xterm", cancelEvents: false, overviewRulerWidth: 0 };
        const a3 = ["normal", "bold", "100", "200", "300", "400", "500", "600", "700", "800", "900"];
        class o8 extends r8.Disposable {
          constructor(e9) {
            super(), this._onOptionChange = this.register(new s6.EventEmitter()), this.onOptionChange = this._onOptionChange.event;
            const i8 = { ...t7.DEFAULT_OPTIONS };
            for (const t8 in e9) if (t8 in i8) try {
              const s7 = e9[t8];
              i8[t8] = this._sanitizeAndValidateOption(t8, s7);
            } catch (e10) {
              console.error(e10);
            }
            this.rawOptions = i8, this.options = { ...i8 }, this._setupOptions(), this.register((0, r8.toDisposable)(() => {
              this.rawOptions.linkHandler = null, this.rawOptions.documentOverride = null;
            }));
          }
          onSpecificOptionChange(e9, t8) {
            return this.onOptionChange((i8) => {
              i8 === e9 && t8(this.rawOptions[e9]);
            });
          }
          onMultipleOptionChange(e9, t8) {
            return this.onOptionChange((i8) => {
              -1 !== e9.indexOf(i8) && t8();
            });
          }
          _setupOptions() {
            const e9 = (e10) => {
              if (!(e10 in t7.DEFAULT_OPTIONS)) throw new Error(`No option with key "${e10}"`);
              return this.rawOptions[e10];
            }, i8 = (e10, i9) => {
              if (!(e10 in t7.DEFAULT_OPTIONS)) throw new Error(`No option with key "${e10}"`);
              i9 = this._sanitizeAndValidateOption(e10, i9), this.rawOptions[e10] !== i9 && (this.rawOptions[e10] = i9, this._onOptionChange.fire(e10));
            };
            for (const t8 in this.rawOptions) {
              const s7 = { get: e9.bind(this, t8), set: i8.bind(this, t8) };
              Object.defineProperty(this.options, t8, s7);
            }
          }
          _sanitizeAndValidateOption(e9, i8) {
            switch (e9) {
              case "cursorStyle":
                if (i8 || (i8 = t7.DEFAULT_OPTIONS[e9]), !/* @__PURE__ */ function(e10) {
                  return "block" === e10 || "underline" === e10 || "bar" === e10;
                }(i8)) throw new Error(`"${i8}" is not a valid value for ${e9}`);
                break;
              case "wordSeparator":
                i8 || (i8 = t7.DEFAULT_OPTIONS[e9]);
                break;
              case "fontWeight":
              case "fontWeightBold":
                if ("number" == typeof i8 && 1 <= i8 && i8 <= 1e3) break;
                i8 = a3.includes(i8) ? i8 : t7.DEFAULT_OPTIONS[e9];
                break;
              case "cursorWidth":
                i8 = Math.floor(i8);
              case "lineHeight":
              case "tabStopWidth":
                if (i8 < 1) throw new Error(`${e9} cannot be less than 1, value: ${i8}`);
                break;
              case "minimumContrastRatio":
                i8 = Math.max(1, Math.min(21, Math.round(10 * i8) / 10));
                break;
              case "scrollback":
                if ((i8 = Math.min(i8, 4294967295)) < 0) throw new Error(`${e9} cannot be less than 0, value: ${i8}`);
                break;
              case "fastScrollSensitivity":
              case "scrollSensitivity":
                if (i8 <= 0) throw new Error(`${e9} cannot be less than or equal to 0, value: ${i8}`);
                break;
              case "rows":
              case "cols":
                if (!i8 && 0 !== i8) throw new Error(`${e9} must be numeric, value: ${i8}`);
                break;
              case "windowsPty":
                i8 = i8 ?? {};
            }
            return i8;
          }
        }
        t7.OptionsService = o8;
      }, 660: function(e8, t7, i7) {
        var s6 = this && this.__decorate || function(e9, t8, i8, s7) {
          var r9, n9 = arguments.length, a4 = n9 < 3 ? t8 : null === s7 ? s7 = Object.getOwnPropertyDescriptor(t8, i8) : s7;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a4 = Reflect.decorate(e9, t8, i8, s7);
          else for (var o8 = e9.length - 1; o8 >= 0; o8--) (r9 = e9[o8]) && (a4 = (n9 < 3 ? r9(a4) : n9 > 3 ? r9(t8, i8, a4) : r9(t8, i8)) || a4);
          return n9 > 3 && a4 && Object.defineProperty(t8, i8, a4), a4;
        }, r8 = this && this.__param || function(e9, t8) {
          return function(i8, s7) {
            t8(i8, s7, e9);
          };
        };
        Object.defineProperty(t7, "__esModule", { value: true }), t7.OscLinkService = void 0;
        const n8 = i7(585);
        let a3 = t7.OscLinkService = class {
          constructor(e9) {
            this._bufferService = e9, this._nextId = 1, this._entriesWithId = /* @__PURE__ */ new Map(), this._dataByLinkId = /* @__PURE__ */ new Map();
          }
          registerLink(e9) {
            const t8 = this._bufferService.buffer;
            if (void 0 === e9.id) {
              const i9 = t8.addMarker(t8.ybase + t8.y), s8 = { data: e9, id: this._nextId++, lines: [i9] };
              return i9.onDispose(() => this._removeMarkerFromLink(s8, i9)), this._dataByLinkId.set(s8.id, s8), s8.id;
            }
            const i8 = e9, s7 = this._getEntryIdKey(i8), r9 = this._entriesWithId.get(s7);
            if (r9) return this.addLineToLink(r9.id, t8.ybase + t8.y), r9.id;
            const n9 = t8.addMarker(t8.ybase + t8.y), a4 = { id: this._nextId++, key: this._getEntryIdKey(i8), data: i8, lines: [n9] };
            return n9.onDispose(() => this._removeMarkerFromLink(a4, n9)), this._entriesWithId.set(a4.key, a4), this._dataByLinkId.set(a4.id, a4), a4.id;
          }
          addLineToLink(e9, t8) {
            const i8 = this._dataByLinkId.get(e9);
            if (i8 && i8.lines.every((e10) => e10.line !== t8)) {
              const e10 = this._bufferService.buffer.addMarker(t8);
              i8.lines.push(e10), e10.onDispose(() => this._removeMarkerFromLink(i8, e10));
            }
          }
          getLinkData(e9) {
            return this._dataByLinkId.get(e9)?.data;
          }
          _getEntryIdKey(e9) {
            return `${e9.id};;${e9.uri}`;
          }
          _removeMarkerFromLink(e9, t8) {
            const i8 = e9.lines.indexOf(t8);
            -1 !== i8 && (e9.lines.splice(i8, 1), 0 === e9.lines.length && (void 0 !== e9.data.id && this._entriesWithId.delete(e9.key), this._dataByLinkId.delete(e9.id)));
          }
        };
        t7.OscLinkService = a3 = s6([r8(0, n8.IBufferService)], a3);
      }, 343: (e8, t7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.createDecorator = t7.getServiceDependencies = t7.serviceRegistry = void 0;
        const i7 = "di$target", s6 = "di$dependencies";
        t7.serviceRegistry = /* @__PURE__ */ new Map(), t7.getServiceDependencies = function(e9) {
          return e9[s6] || [];
        }, t7.createDecorator = function(e9) {
          if (t7.serviceRegistry.has(e9)) return t7.serviceRegistry.get(e9);
          const r8 = function(e10, t8, n8) {
            if (3 !== arguments.length) throw new Error("@IServiceName-decorator can only be used to decorate a parameter");
            !function(e11, t9, r9) {
              t9[i7] === t9 ? t9[s6].push({ id: e11, index: r9 }) : (t9[s6] = [{ id: e11, index: r9 }], t9[i7] = t9);
            }(r8, e10, n8);
          };
          return r8.toString = () => e9, t7.serviceRegistry.set(e9, r8), r8;
        };
      }, 585: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.IDecorationService = t7.IUnicodeService = t7.IOscLinkService = t7.IOptionsService = t7.ILogService = t7.LogLevelEnum = t7.IInstantiationService = t7.ICharsetService = t7.ICoreService = t7.ICoreMouseService = t7.IBufferService = void 0;
        const s6 = i7(343);
        var r8;
        t7.IBufferService = (0, s6.createDecorator)("BufferService"), t7.ICoreMouseService = (0, s6.createDecorator)("CoreMouseService"), t7.ICoreService = (0, s6.createDecorator)("CoreService"), t7.ICharsetService = (0, s6.createDecorator)("CharsetService"), t7.IInstantiationService = (0, s6.createDecorator)("InstantiationService"), function(e9) {
          e9[e9.TRACE = 0] = "TRACE", e9[e9.DEBUG = 1] = "DEBUG", e9[e9.INFO = 2] = "INFO", e9[e9.WARN = 3] = "WARN", e9[e9.ERROR = 4] = "ERROR", e9[e9.OFF = 5] = "OFF";
        }(r8 || (t7.LogLevelEnum = r8 = {})), t7.ILogService = (0, s6.createDecorator)("LogService"), t7.IOptionsService = (0, s6.createDecorator)("OptionsService"), t7.IOscLinkService = (0, s6.createDecorator)("OscLinkService"), t7.IUnicodeService = (0, s6.createDecorator)("UnicodeService"), t7.IDecorationService = (0, s6.createDecorator)("DecorationService");
      }, 480: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.UnicodeService = void 0;
        const s6 = i7(460), r8 = i7(225);
        class n8 {
          static extractShouldJoin(e9) {
            return 0 != (1 & e9);
          }
          static extractWidth(e9) {
            return e9 >> 1 & 3;
          }
          static extractCharKind(e9) {
            return e9 >> 3;
          }
          static createPropertyValue(e9, t8, i8 = false) {
            return (16777215 & e9) << 3 | (3 & t8) << 1 | (i8 ? 1 : 0);
          }
          constructor() {
            this._providers = /* @__PURE__ */ Object.create(null), this._active = "", this._onChange = new s6.EventEmitter(), this.onChange = this._onChange.event;
            const e9 = new r8.UnicodeV6();
            this.register(e9), this._active = e9.version, this._activeProvider = e9;
          }
          dispose() {
            this._onChange.dispose();
          }
          get versions() {
            return Object.keys(this._providers);
          }
          get activeVersion() {
            return this._active;
          }
          set activeVersion(e9) {
            if (!this._providers[e9]) throw new Error(`unknown Unicode version "${e9}"`);
            this._active = e9, this._activeProvider = this._providers[e9], this._onChange.fire(e9);
          }
          register(e9) {
            this._providers[e9.version] = e9;
          }
          wcwidth(e9) {
            return this._activeProvider.wcwidth(e9);
          }
          getStringCellWidth(e9) {
            let t8 = 0, i8 = 0;
            const s7 = e9.length;
            for (let r9 = 0; r9 < s7; ++r9) {
              let a3 = e9.charCodeAt(r9);
              if (55296 <= a3 && a3 <= 56319) {
                if (++r9 >= s7) return t8 + this.wcwidth(a3);
                const i9 = e9.charCodeAt(r9);
                56320 <= i9 && i9 <= 57343 ? a3 = 1024 * (a3 - 55296) + i9 - 56320 + 65536 : t8 += this.wcwidth(i9);
              }
              const o8 = this.charProperties(a3, i8);
              let h5 = n8.extractWidth(o8);
              n8.extractShouldJoin(o8) && (h5 -= n8.extractWidth(i8)), t8 += h5, i8 = o8;
            }
            return t8;
          }
          charProperties(e9, t8) {
            return this._activeProvider.charProperties(e9, t8);
          }
        }
        t7.UnicodeService = n8;
      }, 781: (e8, t7, i7) => {
        Object.defineProperty(t7, "__esModule", { value: true }), t7.Terminal = void 0;
        const s6 = i7(437), r8 = i7(969), n8 = i7(460);
        class a3 extends r8.CoreTerminal {
          constructor(e9 = {}) {
            super(e9), this._onBell = this.register(new n8.EventEmitter()), this.onBell = this._onBell.event, this._onCursorMove = this.register(new n8.EventEmitter()), this.onCursorMove = this._onCursorMove.event, this._onTitleChange = this.register(new n8.EventEmitter()), this.onTitleChange = this._onTitleChange.event, this._onA11yCharEmitter = this.register(new n8.EventEmitter()), this.onA11yChar = this._onA11yCharEmitter.event, this._onA11yTabEmitter = this.register(new n8.EventEmitter()), this.onA11yTab = this._onA11yTabEmitter.event, this._setup(), this.register(this._inputHandler.onRequestBell(() => this.bell())), this.register(this._inputHandler.onRequestReset(() => this.reset())), this.register((0, n8.forwardEvent)(this._inputHandler.onCursorMove, this._onCursorMove)), this.register((0, n8.forwardEvent)(this._inputHandler.onTitleChange, this._onTitleChange)), this.register((0, n8.forwardEvent)(this._inputHandler.onA11yChar, this._onA11yCharEmitter)), this.register((0, n8.forwardEvent)(this._inputHandler.onA11yTab, this._onA11yTabEmitter));
          }
          get buffer() {
            return this.buffers.active;
          }
          get markers() {
            return this.buffer.markers;
          }
          addMarker(e9) {
            if (this.buffer === this.buffers.normal) return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + e9);
          }
          bell() {
            this._onBell.fire();
          }
          input(e9, t8 = true) {
            this.coreService.triggerDataEvent(e9, t8);
          }
          resize(e9, t8) {
            e9 === this.cols && t8 === this.rows || super.resize(e9, t8);
          }
          clear() {
            if (0 !== this.buffer.ybase || 0 !== this.buffer.y) {
              this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y)), this.buffer.lines.length = 1, this.buffer.ydisp = 0, this.buffer.ybase = 0, this.buffer.y = 0;
              for (let e9 = 1; e9 < this.rows; e9++) this.buffer.lines.push(this.buffer.getBlankLine(s6.DEFAULT_ATTR_DATA));
              this._onScroll.fire({ position: this.buffer.ydisp, source: 0 });
            }
          }
          reset() {
            this.options.rows = this.rows, this.options.cols = this.cols, this._setup(), super.reset();
          }
        }
        t7.Terminal = a3;
      } }, t6 = {};
      function i6(s6) {
        var r8 = t6[s6];
        if (void 0 !== r8) return r8.exports;
        var n8 = t6[s6] = { exports: {} };
        return e7[s6].call(n8.exports, n8, n8.exports, i6), n8.exports;
      }
      var s5 = {};
      (() => {
        var e8 = s5;
        Object.defineProperty(e8, "__esModule", { value: true }), e8.Terminal = void 0;
        const t7 = i6(285), r8 = i6(975), n8 = i6(90), a3 = i6(781), o8 = i6(741), h5 = i6(844), c5 = ["cols", "rows"];
        class l3 extends h5.Disposable {
          constructor(e9) {
            super(), this._core = this.register(new a3.Terminal(e9)), this._addonManager = this.register(new o8.AddonManager()), this._publicOptions = { ...this._core.options };
            const t8 = (e10) => this._core.options[e10], i7 = (e10, t9) => {
              this._checkReadonlyOptions(e10), this._core.options[e10] = t9;
            };
            for (const e10 in this._core.options) {
              Object.defineProperty(this._publicOptions, e10, { get: () => this._core.options[e10], set: (t9) => {
                this._checkReadonlyOptions(e10), this._core.options[e10] = t9;
              } });
              const s6 = { get: t8.bind(this, e10), set: i7.bind(this, e10) };
              Object.defineProperty(this._publicOptions, e10, s6);
            }
          }
          _checkReadonlyOptions(e9) {
            if (c5.includes(e9)) throw new Error(`Option "${e9}" can only be set in the constructor`);
          }
          _checkProposedApi() {
            if (!this._core.optionsService.options.allowProposedApi) throw new Error("You must set the allowProposedApi option to true to use proposed API");
          }
          get onBell() {
            return this._core.onBell;
          }
          get onBinary() {
            return this._core.onBinary;
          }
          get onCursorMove() {
            return this._core.onCursorMove;
          }
          get onData() {
            return this._core.onData;
          }
          get onLineFeed() {
            return this._core.onLineFeed;
          }
          get onResize() {
            return this._core.onResize;
          }
          get onScroll() {
            return this._core.onScroll;
          }
          get onTitleChange() {
            return this._core.onTitleChange;
          }
          get parser() {
            return this._checkProposedApi(), this._parser || (this._parser = new r8.ParserApi(this._core)), this._parser;
          }
          get unicode() {
            return this._checkProposedApi(), new n8.UnicodeApi(this._core);
          }
          get rows() {
            return this._core.rows;
          }
          get cols() {
            return this._core.cols;
          }
          get buffer() {
            return this._checkProposedApi(), this._buffer || (this._buffer = this.register(new t7.BufferNamespaceApi(this._core))), this._buffer;
          }
          get markers() {
            return this._checkProposedApi(), this._core.markers;
          }
          get modes() {
            const e9 = this._core.coreService.decPrivateModes;
            let t8 = "none";
            switch (this._core.coreMouseService.activeProtocol) {
              case "X10":
                t8 = "x10";
                break;
              case "VT200":
                t8 = "vt200";
                break;
              case "DRAG":
                t8 = "drag";
                break;
              case "ANY":
                t8 = "any";
            }
            return { applicationCursorKeysMode: e9.applicationCursorKeys, applicationKeypadMode: e9.applicationKeypad, bracketedPasteMode: e9.bracketedPasteMode, insertMode: this._core.coreService.modes.insertMode, mouseTrackingMode: t8, originMode: e9.origin, reverseWraparoundMode: e9.reverseWraparound, sendFocusMode: e9.sendFocus, wraparoundMode: e9.wraparound };
          }
          get options() {
            return this._publicOptions;
          }
          set options(e9) {
            for (const t8 in e9) this._publicOptions[t8] = e9[t8];
          }
          input(e9, t8 = true) {
            this._core.input(e9, t8);
          }
          resize(e9, t8) {
            this._verifyIntegers(e9, t8), this._core.resize(e9, t8);
          }
          registerMarker(e9 = 0) {
            return this._checkProposedApi(), this._verifyIntegers(e9), this._core.addMarker(e9);
          }
          addMarker(e9) {
            return this.registerMarker(e9);
          }
          dispose() {
            super.dispose();
          }
          scrollLines(e9) {
            this._verifyIntegers(e9), this._core.scrollLines(e9);
          }
          scrollPages(e9) {
            this._verifyIntegers(e9), this._core.scrollPages(e9);
          }
          scrollToTop() {
            this._core.scrollToTop();
          }
          scrollToBottom() {
            this._core.scrollToBottom();
          }
          scrollToLine(e9) {
            this._verifyIntegers(e9), this._core.scrollToLine(e9);
          }
          clear() {
            this._core.clear();
          }
          write(e9, t8) {
            this._core.write(e9, t8);
          }
          writeln(e9, t8) {
            this._core.write(e9), this._core.write("\r\n", t8);
          }
          reset() {
            this._core.reset();
          }
          loadAddon(e9) {
            this._addonManager.loadAddon(this, e9);
          }
          _verifyIntegers(...e9) {
            for (const t8 of e9) if (t8 === 1 / 0 || isNaN(t8) || t8 % 1 != 0) throw new Error("This API only accepts integers");
          }
        }
        e8.Terminal = l3;
      })();
      var r7 = exports;
      for (var n7 in s5) r7[n7] = s5[n7];
      s5.__esModule && Object.defineProperty(r7, "__esModule", { value: true });
    })();
  }
});

// src/shared/types.ts
var init_types = __esm({
  "src/shared/types.ts"() {
  }
});

// src/client/services/ssh-agent.ts
var cryptoSubtle, _BrowserSSHAgent, BrowserSSHAgent;
var init_ssh_agent = __esm({
  "src/client/services/ssh-agent.ts"() {
    if (globalThis.crypto?.subtle) {
      cryptoSubtle = globalThis.crypto.subtle;
    }
    _BrowserSSHAgent = class _BrowserSSHAgent {
      constructor(customStorageKey) {
        this.keys = /* @__PURE__ */ new Map();
        this.cryptoErrorShown = false;
        this.storageKey = customStorageKey || _BrowserSSHAgent.DEFAULT_STORAGE_KEY;
        this.loadKeysFromStorage();
      }
      /**
       * Check if Web Crypto API is available and show error if not
       */
      ensureCryptoAvailable() {
        if (!cryptoSubtle) {
          if (!this.cryptoErrorShown) {
            this.showCryptoError();
            this.cryptoErrorShown = true;
          }
          throw new Error("Web Crypto API is not available");
        }
      }
      /**
       * Show user-friendly error banner for crypto unavailability
       */
      showCryptoError() {
        if (!document.body) {
          console.error("Web Crypto API not available and DOM not ready to show error");
          return;
        }
        const hostname = window.location.hostname;
        const isLocalNetwork = hostname.match(/^(192\.168\.|10\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)/);
        const isNonLocalhost = hostname !== "localhost" && hostname !== "127.0.0.1";
        let errorMessage = "SSH key operations are unavailable because the Web Crypto API is not accessible.\n\n";
        if (isLocalNetwork || isNonLocalhost && window.location.protocol === "http:") {
          if (isLocalNetwork && window.location.protocol === "https:") {
            errorMessage += "Even though you're using HTTPS, browsers block the Web Crypto API on local network IPs.\n\n";
          } else {
            errorMessage += "This happens when accessing VibeTunnel over HTTP from non-localhost addresses.\n\n";
          }
          errorMessage += "To fix this, use one of these methods:\n";
          errorMessage += "1. Access via http://localhost:4020 instead\n";
          errorMessage += "   - Use SSH tunnel: ssh -L 4020:localhost:4020 user@server\n";
          errorMessage += "2. Enable HTTPS on the server (recommended for production)\n";
          errorMessage += "3. For Chrome: Enable insecure origins at chrome://flags/#unsafely-treat-insecure-origin-as-secure\n";
          errorMessage += "   - Add your server URL (e.g., http://192.168.1.100:4020)\n";
          errorMessage += "   - Restart Chrome after changing the flag\n";
          errorMessage += "   - Note: Firefox also enforces these restrictions since v75";
        } else {
          errorMessage += "Your browser may not support the Web Crypto API or it may be disabled.\n";
          errorMessage += "Please use a modern browser (Chrome 60+, Firefox 75+, Safari 11+).";
        }
        if (!document.querySelector("#crypto-error-style")) {
          const style = document.createElement("style");
          style.id = "crypto-error-style";
          style.textContent = `
        .crypto-error-banner {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: #dc2626;
          color: white;
          padding: 16px;
          z-index: 9999;
          font-family: monospace;
          white-space: pre-wrap;
          box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
      `;
          document.head.appendChild(style);
        }
        if (!document.querySelector(".crypto-error-banner")) {
          const banner = document.createElement("div");
          banner.className = "crypto-error-banner";
          banner.textContent = errorMessage;
          document.body.appendChild(banner);
        }
      }
      /**
       * Check if agent is ready (always true since no unlock needed)
       */
      isUnlocked() {
        return true;
      }
      /**
       * Add SSH private key to the agent
       */
      async addKey(name, privateKeyPEM) {
        this.ensureCryptoAvailable();
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        try {
          const keyData = await this.parsePrivateKey(privateKeyPEM);
          const keyId = this.generateKeyId();
          const sshKey = {
            id: keyId,
            name,
            publicKey: keyData.publicKey,
            privateKey: privateKeyPEM,
            algorithm: "Ed25519",
            encrypted: keyData.encrypted,
            fingerprint: keyData.fingerprint,
            createdAt: (/* @__PURE__ */ new Date()).toISOString()
          };
          this.keys.set(keyId, sshKey);
          this.saveKeysToStorage();
          return keyId;
        } catch (error) {
          throw new Error(`Failed to add SSH key: ${error}`);
        }
      }
      /**
       * Remove SSH key from agent
       */
      removeKey(keyId) {
        this.keys.delete(keyId);
        this.saveKeysToStorage();
      }
      /**
       * List all SSH keys
       */
      listKeys() {
        return Array.from(this.keys.values()).map((key) => ({
          id: key.id,
          name: key.name,
          publicKey: key.publicKey,
          algorithm: key.algorithm,
          encrypted: key.encrypted,
          fingerprint: key.fingerprint,
          createdAt: key.createdAt
        }));
      }
      /**
       * Sign data with a specific SSH key
       */
      async sign(keyId, data) {
        this.ensureCryptoAvailable();
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        const key = this.keys.get(keyId);
        if (!key) {
          throw new Error("SSH key not found");
        }
        if (!key.privateKey) {
          throw new Error("Private key not available for signing");
        }
        try {
          let privateKeyPEM = key.privateKey;
          if (key.encrypted) {
            const password = await this.promptForPassword(key.name);
            if (!password) {
              throw new Error("Password required for encrypted key");
            }
            privateKeyPEM = await this.decryptPrivateKey(key.privateKey, password);
          }
          const privateKey = await this.importPrivateKey(privateKeyPEM, key.algorithm);
          const dataBuffer = this.base64ToArrayBuffer(data);
          const signature = await cryptoSubtle.sign({ name: "Ed25519" }, privateKey, dataBuffer);
          return {
            signature: this.arrayBufferToBase64(signature),
            algorithm: key.algorithm
          };
        } catch (error) {
          throw new Error(`Failed to sign data: ${error}`);
        }
      }
      /**
       * Generate SSH key pair in the browser
       */
      async generateKeyPair(name, password) {
        this.ensureCryptoAvailable();
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        console.log(`\u{1F511} SSH Agent: Starting Ed25519 key generation for "${name}"`);
        try {
          const keyPair = await cryptoSubtle.generateKey(
            {
              name: "Ed25519"
            },
            true,
            ["sign", "verify"]
          );
          const cryptoKeyPair = keyPair;
          const privateKeyBuffer = await cryptoSubtle.exportKey("pkcs8", cryptoKeyPair.privateKey);
          const publicKeyBuffer = await cryptoSubtle.exportKey("raw", cryptoKeyPair.publicKey);
          let privateKeyPEM = this.arrayBufferToPEM(privateKeyBuffer, "PRIVATE KEY");
          const publicKeySSH = this.convertEd25519ToSSHPublicKey(publicKeyBuffer);
          const isEncrypted = !!password;
          if (password) {
            privateKeyPEM = await this.encryptPrivateKey(privateKeyPEM, password);
          }
          const keyId = this.generateKeyId();
          const sshKey = {
            id: keyId,
            name,
            publicKey: publicKeySSH,
            privateKey: privateKeyPEM,
            algorithm: "Ed25519",
            encrypted: isEncrypted,
            fingerprint: await this.generateFingerprint(publicKeySSH),
            createdAt: (/* @__PURE__ */ new Date()).toISOString()
          };
          this.keys.set(keyId, sshKey);
          await this.saveKeysToStorage();
          console.log(`\u{1F511} SSH Agent: Key "${name}" generated successfully with ID: ${keyId}`);
          return { keyId, privateKeyPEM };
        } catch (error) {
          throw new Error(`Failed to generate key pair: ${error}`);
        }
      }
      /**
       * Export public key in SSH format
       */
      getPublicKey(keyId) {
        const key = this.keys.get(keyId);
        return key ? key.publicKey : null;
      }
      /**
       * Get private key for a specific key ID
       */
      getPrivateKey(keyId) {
        const key = this.keys.get(keyId);
        return key ? key.privateKey : null;
      }
      // Private helper methods
      async parsePrivateKey(privateKeyPEM) {
        const isEncrypted = privateKeyPEM.includes("BEGIN ENCRYPTED PRIVATE KEY") || privateKeyPEM.includes("Proc-Type: 4,ENCRYPTED");
        if (privateKeyPEM.includes("BEGIN PRIVATE KEY") || privateKeyPEM.includes("BEGIN ENCRYPTED PRIVATE KEY")) {
          const mockPublicKey = "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIImported...";
          return {
            publicKey: mockPublicKey,
            algorithm: "Ed25519",
            fingerprint: await this.generateFingerprint(mockPublicKey),
            encrypted: isEncrypted
          };
        }
        throw new Error("Only Ed25519 private keys are supported");
      }
      async importPrivateKey(privateKeyPEM, _algorithm) {
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        const pemContents = privateKeyPEM.replace("-----BEGIN PRIVATE KEY-----", "").replace("-----END PRIVATE KEY-----", "").replace(/\s/g, "");
        const keyData = this.base64ToArrayBuffer(pemContents);
        return cryptoSubtle.importKey(
          "pkcs8",
          keyData,
          {
            name: "Ed25519"
          },
          false,
          ["sign"]
        );
      }
      convertEd25519ToSSHPublicKey(publicKeyBuffer) {
        const publicKeyBytes = new Uint8Array(publicKeyBuffer);
        const keyType = "ssh-ed25519";
        const keyTypeBytes = new TextEncoder().encode(keyType);
        const buffer = new ArrayBuffer(4 + keyTypeBytes.length + 4 + publicKeyBytes.length);
        const view = new DataView(buffer);
        const bytes = new Uint8Array(buffer);
        let offset = 0;
        view.setUint32(offset, keyTypeBytes.length, false);
        offset += 4;
        bytes.set(keyTypeBytes, offset);
        offset += keyTypeBytes.length;
        view.setUint32(offset, publicKeyBytes.length, false);
        offset += 4;
        bytes.set(publicKeyBytes, offset);
        const base64Key = this.arrayBufferToBase64(buffer);
        return `ssh-ed25519 ${base64Key}`;
      }
      async generateFingerprint(publicKey) {
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        const encoder = new TextEncoder();
        const hash = await cryptoSubtle.digest("SHA-256", encoder.encode(publicKey));
        return this.arrayBufferToBase64(hash).substring(0, 16);
      }
      generateKeyId() {
        return window.crypto.randomUUID();
      }
      arrayBufferToBase64(buffer) {
        const bytes = new Uint8Array(buffer);
        let binary = "";
        for (let i6 = 0; i6 < bytes.length; i6++) {
          binary += String.fromCharCode(bytes[i6]);
        }
        return btoa(binary);
      }
      base64ToArrayBuffer(base64) {
        const binary = atob(base64);
        const bytes = new Uint8Array(binary.length);
        for (let i6 = 0; i6 < binary.length; i6++) {
          bytes[i6] = binary.charCodeAt(i6);
        }
        return bytes.buffer;
      }
      arrayBufferToPEM(buffer, type) {
        const base64 = this.arrayBufferToBase64(buffer);
        const lines = base64.match(/.{1,64}/g) || [];
        return `-----BEGIN ${type}-----
${lines.join("\n")}
-----END ${type}-----`;
      }
      async loadKeysFromStorage() {
        try {
          const keysData = localStorage.getItem(this.storageKey);
          if (keysData) {
            const keys = JSON.parse(keysData);
            this.keys.clear();
            keys.forEach((key) => this.keys.set(key.id, key));
          }
        } catch (error) {
          console.error("Failed to load SSH keys from storage:", error);
        }
      }
      async saveKeysToStorage() {
        try {
          const keysArray = Array.from(this.keys.values());
          localStorage.setItem(this.storageKey, JSON.stringify(keysArray));
        } catch (error) {
          console.error("Failed to save SSH keys to storage:", error);
        }
      }
      /**
       * Encrypt private key with password using Web Crypto API
       */
      async encryptPrivateKey(privateKeyPEM, password) {
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        const encoder = new TextEncoder();
        const data = encoder.encode(privateKeyPEM);
        const passwordKey = await cryptoSubtle.importKey(
          "raw",
          encoder.encode(password),
          { name: "PBKDF2" },
          false,
          ["deriveKey"]
        );
        const salt = crypto.getRandomValues(new Uint8Array(16));
        const encryptionKey = await cryptoSubtle.deriveKey(
          {
            name: "PBKDF2",
            salt,
            iterations: 1e5,
            hash: "SHA-256"
          },
          passwordKey,
          { name: "AES-GCM", length: 256 },
          false,
          ["encrypt"]
        );
        const iv = crypto.getRandomValues(new Uint8Array(12));
        const encryptedData = await cryptoSubtle.encrypt({ name: "AES-GCM", iv }, encryptionKey, data);
        const combined = new Uint8Array(salt.length + iv.length + encryptedData.byteLength);
        combined.set(salt, 0);
        combined.set(iv, salt.length);
        combined.set(new Uint8Array(encryptedData), salt.length + iv.length);
        return `-----BEGIN ENCRYPTED PRIVATE KEY-----
${this.arrayBufferToBase64(combined.buffer)}
-----END ENCRYPTED PRIVATE KEY-----`;
      }
      /**
       * Decrypt private key with password
       */
      async decryptPrivateKey(encryptedPrivateKeyPEM, password) {
        if (!cryptoSubtle) {
          throw new Error("Crypto not available");
        }
        const base64Data = encryptedPrivateKeyPEM.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----", "").replace("-----END ENCRYPTED PRIVATE KEY-----", "").replace(/\s/g, "");
        const combinedData = this.base64ToArrayBuffer(base64Data);
        const combined = new Uint8Array(combinedData);
        const salt = combined.slice(0, 16);
        const iv = combined.slice(16, 28);
        const encryptedData = combined.slice(28);
        const encoder = new TextEncoder();
        const passwordKey = await cryptoSubtle.importKey(
          "raw",
          encoder.encode(password),
          { name: "PBKDF2" },
          false,
          ["deriveKey"]
        );
        const encryptionKey = await cryptoSubtle.deriveKey(
          {
            name: "PBKDF2",
            salt,
            iterations: 1e5,
            hash: "SHA-256"
          },
          passwordKey,
          { name: "AES-GCM", length: 256 },
          false,
          ["decrypt"]
        );
        const decryptedData = await cryptoSubtle.decrypt(
          { name: "AES-GCM", iv },
          encryptionKey,
          encryptedData
        );
        const decoder = new TextDecoder();
        return decoder.decode(decryptedData);
      }
      /**
       * Prompt user for password using browser dialog
       */
      async promptForPassword(keyName) {
        return window.prompt(`Enter password for SSH key "${keyName}":`);
      }
    };
    _BrowserSSHAgent.DEFAULT_STORAGE_KEY = "vibetunnel_ssh_keys";
    BrowserSSHAgent = _BrowserSSHAgent;
  }
});

// src/client/services/auth-client.ts
var auth_client_exports = {};
__export(auth_client_exports, {
  AuthClient: () => AuthClient,
  authClient: () => authClient
});
var logger, _AuthClient, AuthClient, authClient;
var init_auth_client = __esm({
  "src/client/services/auth-client.ts"() {
    init_types();
    init_logger();
    init_ssh_agent();
    logger = createLogger("auth-client");
    _AuthClient = class _AuthClient {
      constructor() {
        this.currentUser = null;
        this.sshAgent = new BrowserSSHAgent();
        this.loadCurrentUser();
      }
      /**
       * Get SSH agent instance
       */
      getSSHAgent() {
        return this.sshAgent;
      }
      /**
       * Check if user is authenticated
       */
      isAuthenticated() {
        return this.currentUser !== null && this.isTokenValid();
      }
      /**
       * Get current user info
       */
      getCurrentUser() {
        return this.currentUser;
      }
      /**
       * Get current system user from server
       */
      async getCurrentSystemUser() {
        try {
          const response = await fetch("/api/auth/current-user");
          if (response.ok) {
            const data = await response.json();
            return data.userId;
          }
          throw new Error("Failed to get current user");
        } catch (error) {
          logger.error("Failed to get current system user:", error);
          throw error;
        }
      }
      /**
       * Get user avatar (macOS returns base64, others get generic)
       */
      async getUserAvatar(userId) {
        try {
          const response = await fetch(`/api/auth/avatar/${userId}`);
          if (response.ok) {
            const data = await response.json();
            if (data.avatar) {
              if (data.avatar.startsWith("data:")) {
                return data.avatar;
              }
            }
          }
        } catch (error) {
          logger.error("Failed to get user avatar:", error);
        }
        const computedStyle = getComputedStyle(document.documentElement);
        const bgColor = computedStyle.getPropertyValue("--color-text-dim").trim().split(" ").map((v2) => Number.parseInt(v2));
        const fgColor = computedStyle.getPropertyValue("--color-text-muted").trim().split(" ").map((v2) => Number.parseInt(v2));
        const bgColorStr = `rgb(${bgColor.join(", ")})`;
        const fgColorStr = `rgb(${fgColor.join(", ")})`;
        return "data:image/svg+xml;base64," + btoa(`
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="24" cy="24" r="24" fill="${bgColorStr}"/>
        <circle cx="24" cy="18" r="8" fill="${fgColorStr}"/>
        <path d="M8 38c0-8.837 7.163-16 16-16s16 7.163 16 16" fill="${fgColorStr}"/>
      </svg>
    `);
      }
      /**
       * Authenticate using SSH key (priority method)
       */
      async authenticateWithSSHKey(userId, keyId) {
        try {
          if (!this.sshAgent.isUnlocked()) {
            return { success: false, error: "SSH agent is locked" };
          }
          const challenge = await this.createChallenge(userId);
          const signatureResult = await this.sshAgent.sign(keyId, challenge.challenge);
          const publicKey = this.sshAgent.getPublicKey(keyId);
          if (!publicKey) {
            return { success: false, error: "SSH key not found" };
          }
          const response = await fetch("/api/auth/ssh-key", {
            method: "POST" /* POST */,
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              challengeId: challenge.challengeId,
              publicKey,
              signature: signatureResult.signature
            })
          });
          const result = await response.json();
          logger.log("\u{1F510} SSH key auth server response:", result);
          if (result.success) {
            logger.log("\u2705 SSH key auth successful, setting current user");
            this.setCurrentUser({
              userId: result.userId,
              token: result.token,
              authMethod: "ssh-key",
              loginTime: Date.now()
            });
            logger.log("\u{1F464} Current user set:", this.getCurrentUser());
          } else {
            logger.log("\u274C SSH key auth failed:", result.error);
          }
          return result;
        } catch (error) {
          logger.error("SSH key authentication failed:", error);
          return { success: false, error: "SSH key authentication failed" };
        }
      }
      /**
       * Authenticate using password (fallback method)
       */
      async authenticateWithPassword(userId, password) {
        try {
          const response = await fetch("/api/auth/password", {
            method: "POST" /* POST */,
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ userId, password })
          });
          const result = await response.json();
          if (result.success) {
            this.setCurrentUser({
              userId: result.userId,
              token: result.token,
              authMethod: "password",
              loginTime: Date.now()
            });
          }
          return result;
        } catch (error) {
          logger.error("Password authentication failed:", error);
          return { success: false, error: "Password authentication failed" };
        }
      }
      /**
       * Automated authentication - tries SSH keys first, then prompts for password
       */
      async authenticate(userId) {
        logger.log("\u{1F680} Starting SSH authentication for user:", userId);
        if (this.sshAgent.isUnlocked()) {
          const keys = this.sshAgent.listKeys();
          logger.log(
            "\u{1F5DD}\uFE0F Found SSH keys:",
            keys.length,
            keys.map((k2) => ({ id: k2.id, name: k2.name }))
          );
          for (const key of keys) {
            try {
              logger.log(`\u{1F511} Trying SSH key: ${key.name} (${key.id})`);
              const result = await this.authenticateWithSSHKey(userId, key.id);
              logger.log(`\u{1F3AF} SSH key ${key.name} result:`, result);
              if (result.success) {
                logger.log(`\u2705 Authenticated with SSH key: ${key.name}`);
                return result;
              }
            } catch (error) {
              logger.warn(`\u274C SSH key authentication failed for key ${key.name}:`, error);
            }
          }
        } else {
          logger.log("\u{1F512} SSH agent is locked");
        }
        return {
          success: false,
          error: "SSH key authentication failed. Password authentication required."
        };
      }
      /**
       * Logout user
       */
      async logout() {
        try {
          if (this.currentUser?.token) {
            await fetch("/api/auth/logout", {
              method: "POST" /* POST */,
              headers: {
                Authorization: `Bearer ${this.currentUser.token}`,
                "Content-Type": "application/json"
              }
            });
          }
        } catch (error) {
          logger.warn("Server logout failed:", error);
        } finally {
          this.clearCurrentUser();
        }
      }
      /**
       * Get authorization header for API requests
       */
      getAuthHeader() {
        if (this.currentUser?.token) {
          return { Authorization: `Bearer ${this.currentUser.token}` };
        }
        return {};
      }
      /**
       * Authenticated fetch wrapper that adds authorization header
       */
      async fetch(url, options) {
        const headers = {
          ...this.getAuthHeader(),
          ...options?.headers || {}
        };
        return fetch(url, {
          ...options,
          headers
        });
      }
      /**
       * Verify current token with server
       */
      async verifyToken() {
        if (!this.currentUser?.token) return false;
        try {
          const response = await fetch("/api/auth/verify", {
            headers: { Authorization: `Bearer ${this.currentUser.token}` }
          });
          const result = await response.json();
          return result.valid;
        } catch (error) {
          logger.error("Token verification failed:", error);
          return false;
        }
      }
      /**
       * Unlock SSH agent (no-op since we don't use encryption)
       */
      async unlockSSHAgent(_passphrase) {
        return true;
      }
      /**
       * Lock SSH agent (no-op since we don't use encryption)
       */
      lockSSHAgent() {
      }
      /**
       * Check if SSH agent is unlocked
       */
      isSSHAgentUnlocked() {
        return true;
      }
      // Private methods
      async createChallenge(userId) {
        const response = await fetch("/api/auth/challenge", {
          method: "POST" /* POST */,
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ userId })
        });
        if (!response.ok) {
          throw new Error("Failed to create authentication challenge");
        }
        return response.json();
      }
      setCurrentUser(user) {
        this.currentUser = user;
        this.saveCurrentUser();
      }
      clearCurrentUser() {
        this.currentUser = null;
        localStorage.removeItem(_AuthClient.TOKEN_KEY);
        localStorage.removeItem(_AuthClient.USER_KEY);
      }
      saveCurrentUser() {
        if (this.currentUser) {
          localStorage.setItem(_AuthClient.TOKEN_KEY, this.currentUser.token);
          localStorage.setItem(
            _AuthClient.USER_KEY,
            JSON.stringify({
              userId: this.currentUser.userId,
              authMethod: this.currentUser.authMethod,
              loginTime: this.currentUser.loginTime
            })
          );
        }
      }
      loadCurrentUser() {
        try {
          const token = localStorage.getItem(_AuthClient.TOKEN_KEY);
          const userData = localStorage.getItem(_AuthClient.USER_KEY);
          if (token && userData) {
            const user = JSON.parse(userData);
            this.currentUser = {
              token,
              userId: user.userId,
              authMethod: user.authMethod,
              loginTime: user.loginTime
            };
            this.verifyToken().then((valid) => {
              if (!valid) {
                this.clearCurrentUser();
              }
            });
          }
        } catch (error) {
          logger.error("Failed to load current user:", error);
          this.clearCurrentUser();
        }
      }
      isTokenValid() {
        if (!this.currentUser) return false;
        const tokenAge = Date.now() - this.currentUser.loginTime;
        const maxAge = 24 * 60 * 60 * 1e3;
        return tokenAge < maxAge;
      }
    };
    _AuthClient.TOKEN_KEY = "vibetunnel_auth_token";
    _AuthClient.USER_KEY = "vibetunnel_user_data";
    AuthClient = _AuthClient;
    authClient = new AuthClient();
  }
});

// src/client/utils/logger.ts
async function getAuthConfig() {
  const now = Date.now();
  if (authConfigCache && now - authConfigCache.timestamp < AUTH_CONFIG_TTL) {
    return authConfigCache.noAuth;
  }
  try {
    const configResponse = await fetch("/api/auth/config");
    if (configResponse.ok) {
      const authConfig = await configResponse.json();
      authConfigCache = {
        noAuth: authConfig.noAuth === true,
        timestamp: now
      };
      return authConfigCache.noAuth;
    }
  } catch {
  }
  return false;
}
function formatArgs(args) {
  return args.map((arg) => {
    if (typeof arg === "object" && arg !== null) {
      try {
        return JSON.stringify(arg, null, 2);
      } catch {
        return String(arg);
      }
    }
    return arg;
  });
}
async function sendToServer(level, module, args) {
  try {
    const { authClient: authClient2 } = await Promise.resolve().then(() => (init_auth_client(), auth_client_exports));
    const authHeader = authClient2.getAuthHeader();
    const isNoAuthMode = await getAuthConfig();
    if (!authHeader.Authorization && !isNoAuthMode) {
      return;
    }
    const headers = {
      "Content-Type": "application/json"
    };
    if (authHeader.Authorization) {
      headers.Authorization = authHeader.Authorization;
    }
    await fetch("/api/logs/client", {
      method: "POST" /* POST */,
      headers,
      body: JSON.stringify({
        level,
        module,
        args: formatArgs(args)
      })
    });
  } catch {
  }
}
function createLogger(moduleName) {
  const createLogMethod = (level) => {
    return (...args) => {
      if (level === "debug" && !debugMode) return;
      console[level](`[${moduleName}]`, ...args);
      sendToServer(level, moduleName, args);
    };
  };
  return {
    log: createLogMethod("log"),
    warn: createLogMethod("warn"),
    error: createLogMethod("error"),
    debug: createLogMethod("debug")
  };
}
var debugMode, authConfigCache, AUTH_CONFIG_TTL;
var init_logger = __esm({
  "src/client/utils/logger.ts"() {
    init_types();
    debugMode = false;
    authConfigCache = null;
    AUTH_CONFIG_TTL = 6e4;
  }
});

// node_modules/.pnpm/@lit+reactive-element@2.1.1/node_modules/@lit/reactive-element/css-tag.js
var t = globalThis;
var e = t.ShadowRoot && (void 0 === t.ShadyCSS || t.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype;
var s = Symbol();
var o = /* @__PURE__ */ new WeakMap();
var n = class {
  constructor(t6, e7, o8) {
    if (this._$cssResult$ = true, o8 !== s) throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = t6, this.t = e7;
  }
  get styleSheet() {
    let t6 = this.o;
    const s5 = this.t;
    if (e && void 0 === t6) {
      const e7 = void 0 !== s5 && 1 === s5.length;
      e7 && (t6 = o.get(s5)), void 0 === t6 && ((this.o = t6 = new CSSStyleSheet()).replaceSync(this.cssText), e7 && o.set(s5, t6));
    }
    return t6;
  }
  toString() {
    return this.cssText;
  }
};
var r = (t6) => new n("string" == typeof t6 ? t6 : t6 + "", void 0, s);
var S = (s5, o8) => {
  if (e) s5.adoptedStyleSheets = o8.map((t6) => t6 instanceof CSSStyleSheet ? t6 : t6.styleSheet);
  else for (const e7 of o8) {
    const o9 = document.createElement("style"), n7 = t.litNonce;
    void 0 !== n7 && o9.setAttribute("nonce", n7), o9.textContent = e7.cssText, s5.appendChild(o9);
  }
};
var c = e ? (t6) => t6 : (t6) => t6 instanceof CSSStyleSheet ? ((t7) => {
  let e7 = "";
  for (const s5 of t7.cssRules) e7 += s5.cssText;
  return r(e7);
})(t6) : t6;

// node_modules/.pnpm/@lit+reactive-element@2.1.1/node_modules/@lit/reactive-element/reactive-element.js
var { is: i2, defineProperty: e2, getOwnPropertyDescriptor: h, getOwnPropertyNames: r2, getOwnPropertySymbols: o2, getPrototypeOf: n2 } = Object;
var a = globalThis;
var c2 = a.trustedTypes;
var l = c2 ? c2.emptyScript : "";
var p = a.reactiveElementPolyfillSupport;
var d = (t6, s5) => t6;
var u = { toAttribute(t6, s5) {
  switch (s5) {
    case Boolean:
      t6 = t6 ? l : null;
      break;
    case Object:
    case Array:
      t6 = null == t6 ? t6 : JSON.stringify(t6);
  }
  return t6;
}, fromAttribute(t6, s5) {
  let i6 = t6;
  switch (s5) {
    case Boolean:
      i6 = null !== t6;
      break;
    case Number:
      i6 = null === t6 ? null : Number(t6);
      break;
    case Object:
    case Array:
      try {
        i6 = JSON.parse(t6);
      } catch (t7) {
        i6 = null;
      }
  }
  return i6;
} };
var f = (t6, s5) => !i2(t6, s5);
var b = { attribute: true, type: String, converter: u, reflect: false, useDefault: false, hasChanged: f };
Symbol.metadata ?? (Symbol.metadata = Symbol("metadata")), a.litPropertyMetadata ?? (a.litPropertyMetadata = /* @__PURE__ */ new WeakMap());
var y = class extends HTMLElement {
  static addInitializer(t6) {
    this._$Ei(), (this.l ?? (this.l = [])).push(t6);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(t6, s5 = b) {
    if (s5.state && (s5.attribute = false), this._$Ei(), this.prototype.hasOwnProperty(t6) && ((s5 = Object.create(s5)).wrapped = true), this.elementProperties.set(t6, s5), !s5.noAccessor) {
      const i6 = Symbol(), h5 = this.getPropertyDescriptor(t6, i6, s5);
      void 0 !== h5 && e2(this.prototype, t6, h5);
    }
  }
  static getPropertyDescriptor(t6, s5, i6) {
    const { get: e7, set: r7 } = h(this.prototype, t6) ?? { get() {
      return this[s5];
    }, set(t7) {
      this[s5] = t7;
    } };
    return { get: e7, set(s6) {
      const h5 = e7?.call(this);
      r7?.call(this, s6), this.requestUpdate(t6, h5, i6);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(t6) {
    return this.elementProperties.get(t6) ?? b;
  }
  static _$Ei() {
    if (this.hasOwnProperty(d("elementProperties"))) return;
    const t6 = n2(this);
    t6.finalize(), void 0 !== t6.l && (this.l = [...t6.l]), this.elementProperties = new Map(t6.elementProperties);
  }
  static finalize() {
    if (this.hasOwnProperty(d("finalized"))) return;
    if (this.finalized = true, this._$Ei(), this.hasOwnProperty(d("properties"))) {
      const t7 = this.properties, s5 = [...r2(t7), ...o2(t7)];
      for (const i6 of s5) this.createProperty(i6, t7[i6]);
    }
    const t6 = this[Symbol.metadata];
    if (null !== t6) {
      const s5 = litPropertyMetadata.get(t6);
      if (void 0 !== s5) for (const [t7, i6] of s5) this.elementProperties.set(t7, i6);
    }
    this._$Eh = /* @__PURE__ */ new Map();
    for (const [t7, s5] of this.elementProperties) {
      const i6 = this._$Eu(t7, s5);
      void 0 !== i6 && this._$Eh.set(i6, t7);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(s5) {
    const i6 = [];
    if (Array.isArray(s5)) {
      const e7 = new Set(s5.flat(1 / 0).reverse());
      for (const s6 of e7) i6.unshift(c(s6));
    } else void 0 !== s5 && i6.push(c(s5));
    return i6;
  }
  static _$Eu(t6, s5) {
    const i6 = s5.attribute;
    return false === i6 ? void 0 : "string" == typeof i6 ? i6 : "string" == typeof t6 ? t6.toLowerCase() : void 0;
  }
  constructor() {
    super(), this._$Ep = void 0, this.isUpdatePending = false, this.hasUpdated = false, this._$Em = null, this._$Ev();
  }
  _$Ev() {
    this._$ES = new Promise((t6) => this.enableUpdating = t6), this._$AL = /* @__PURE__ */ new Map(), this._$E_(), this.requestUpdate(), this.constructor.l?.forEach((t6) => t6(this));
  }
  addController(t6) {
    (this._$EO ?? (this._$EO = /* @__PURE__ */ new Set())).add(t6), void 0 !== this.renderRoot && this.isConnected && t6.hostConnected?.();
  }
  removeController(t6) {
    this._$EO?.delete(t6);
  }
  _$E_() {
    const t6 = /* @__PURE__ */ new Map(), s5 = this.constructor.elementProperties;
    for (const i6 of s5.keys()) this.hasOwnProperty(i6) && (t6.set(i6, this[i6]), delete this[i6]);
    t6.size > 0 && (this._$Ep = t6);
  }
  createRenderRoot() {
    const t6 = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
    return S(t6, this.constructor.elementStyles), t6;
  }
  connectedCallback() {
    this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), this._$EO?.forEach((t6) => t6.hostConnected?.());
  }
  enableUpdating(t6) {
  }
  disconnectedCallback() {
    this._$EO?.forEach((t6) => t6.hostDisconnected?.());
  }
  attributeChangedCallback(t6, s5, i6) {
    this._$AK(t6, i6);
  }
  _$ET(t6, s5) {
    const i6 = this.constructor.elementProperties.get(t6), e7 = this.constructor._$Eu(t6, i6);
    if (void 0 !== e7 && true === i6.reflect) {
      const h5 = (void 0 !== i6.converter?.toAttribute ? i6.converter : u).toAttribute(s5, i6.type);
      this._$Em = t6, null == h5 ? this.removeAttribute(e7) : this.setAttribute(e7, h5), this._$Em = null;
    }
  }
  _$AK(t6, s5) {
    const i6 = this.constructor, e7 = i6._$Eh.get(t6);
    if (void 0 !== e7 && this._$Em !== e7) {
      const t7 = i6.getPropertyOptions(e7), h5 = "function" == typeof t7.converter ? { fromAttribute: t7.converter } : void 0 !== t7.converter?.fromAttribute ? t7.converter : u;
      this._$Em = e7;
      const r7 = h5.fromAttribute(s5, t7.type);
      this[e7] = r7 ?? this._$Ej?.get(e7) ?? r7, this._$Em = null;
    }
  }
  requestUpdate(t6, s5, i6) {
    if (void 0 !== t6) {
      const e7 = this.constructor, h5 = this[t6];
      if (i6 ?? (i6 = e7.getPropertyOptions(t6)), !((i6.hasChanged ?? f)(h5, s5) || i6.useDefault && i6.reflect && h5 === this._$Ej?.get(t6) && !this.hasAttribute(e7._$Eu(t6, i6)))) return;
      this.C(t6, s5, i6);
    }
    false === this.isUpdatePending && (this._$ES = this._$EP());
  }
  C(t6, s5, { useDefault: i6, reflect: e7, wrapped: h5 }, r7) {
    i6 && !(this._$Ej ?? (this._$Ej = /* @__PURE__ */ new Map())).has(t6) && (this._$Ej.set(t6, r7 ?? s5 ?? this[t6]), true !== h5 || void 0 !== r7) || (this._$AL.has(t6) || (this.hasUpdated || i6 || (s5 = void 0), this._$AL.set(t6, s5)), true === e7 && this._$Em !== t6 && (this._$Eq ?? (this._$Eq = /* @__PURE__ */ new Set())).add(t6));
  }
  async _$EP() {
    this.isUpdatePending = true;
    try {
      await this._$ES;
    } catch (t7) {
      Promise.reject(t7);
    }
    const t6 = this.scheduleUpdate();
    return null != t6 && await t6, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    if (!this.isUpdatePending) return;
    if (!this.hasUpdated) {
      if (this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this._$Ep) {
        for (const [t8, s6] of this._$Ep) this[t8] = s6;
        this._$Ep = void 0;
      }
      const t7 = this.constructor.elementProperties;
      if (t7.size > 0) for (const [s6, i6] of t7) {
        const { wrapped: t8 } = i6, e7 = this[s6];
        true !== t8 || this._$AL.has(s6) || void 0 === e7 || this.C(s6, void 0, i6, e7);
      }
    }
    let t6 = false;
    const s5 = this._$AL;
    try {
      t6 = this.shouldUpdate(s5), t6 ? (this.willUpdate(s5), this._$EO?.forEach((t7) => t7.hostUpdate?.()), this.update(s5)) : this._$EM();
    } catch (s6) {
      throw t6 = false, this._$EM(), s6;
    }
    t6 && this._$AE(s5);
  }
  willUpdate(t6) {
  }
  _$AE(t6) {
    this._$EO?.forEach((t7) => t7.hostUpdated?.()), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(t6)), this.updated(t6);
  }
  _$EM() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(t6) {
    return true;
  }
  update(t6) {
    this._$Eq && (this._$Eq = this._$Eq.forEach((t7) => this._$ET(t7, this[t7]))), this._$EM();
  }
  updated(t6) {
  }
  firstUpdated(t6) {
  }
};
y.elementStyles = [], y.shadowRootOptions = { mode: "open" }, y[d("elementProperties")] = /* @__PURE__ */ new Map(), y[d("finalized")] = /* @__PURE__ */ new Map(), p?.({ ReactiveElement: y }), (a.reactiveElementVersions ?? (a.reactiveElementVersions = [])).push("2.1.1");

// node_modules/.pnpm/lit-html@3.3.1/node_modules/lit-html/lit-html.js
var t2 = globalThis;
var i3 = t2.trustedTypes;
var s2 = i3 ? i3.createPolicy("lit-html", { createHTML: (t6) => t6 }) : void 0;
var e3 = "$lit$";
var h2 = `lit$${Math.random().toFixed(9).slice(2)}$`;
var o3 = "?" + h2;
var n3 = `<${o3}>`;
var r3 = document;
var l2 = () => r3.createComment("");
var c3 = (t6) => null === t6 || "object" != typeof t6 && "function" != typeof t6;
var a2 = Array.isArray;
var u2 = (t6) => a2(t6) || "function" == typeof t6?.[Symbol.iterator];
var d2 = "[ 	\n\f\r]";
var f2 = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;
var v = /-->/g;
var _ = />/g;
var m = RegExp(`>|${d2}(?:([^\\s"'>=/]+)(${d2}*=${d2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g");
var p2 = /'/g;
var g = /"/g;
var $ = /^(?:script|style|textarea|title)$/i;
var y2 = (t6) => (i6, ...s5) => ({ _$litType$: t6, strings: i6, values: s5 });
var x = y2(1);
var b2 = y2(2);
var w = y2(3);
var T = Symbol.for("lit-noChange");
var E = Symbol.for("lit-nothing");
var A = /* @__PURE__ */ new WeakMap();
var C = r3.createTreeWalker(r3, 129);
function P(t6, i6) {
  if (!a2(t6) || !t6.hasOwnProperty("raw")) throw Error("invalid template strings array");
  return void 0 !== s2 ? s2.createHTML(i6) : i6;
}
var V = (t6, i6) => {
  const s5 = t6.length - 1, o8 = [];
  let r7, l3 = 2 === i6 ? "<svg>" : 3 === i6 ? "<math>" : "", c5 = f2;
  for (let i7 = 0; i7 < s5; i7++) {
    const s6 = t6[i7];
    let a3, u3, d3 = -1, y3 = 0;
    for (; y3 < s6.length && (c5.lastIndex = y3, u3 = c5.exec(s6), null !== u3); ) y3 = c5.lastIndex, c5 === f2 ? "!--" === u3[1] ? c5 = v : void 0 !== u3[1] ? c5 = _ : void 0 !== u3[2] ? ($.test(u3[2]) && (r7 = RegExp("</" + u3[2], "g")), c5 = m) : void 0 !== u3[3] && (c5 = m) : c5 === m ? ">" === u3[0] ? (c5 = r7 ?? f2, d3 = -1) : void 0 === u3[1] ? d3 = -2 : (d3 = c5.lastIndex - u3[2].length, a3 = u3[1], c5 = void 0 === u3[3] ? m : '"' === u3[3] ? g : p2) : c5 === g || c5 === p2 ? c5 = m : c5 === v || c5 === _ ? c5 = f2 : (c5 = m, r7 = void 0);
    const x2 = c5 === m && t6[i7 + 1].startsWith("/>") ? " " : "";
    l3 += c5 === f2 ? s6 + n3 : d3 >= 0 ? (o8.push(a3), s6.slice(0, d3) + e3 + s6.slice(d3) + h2 + x2) : s6 + h2 + (-2 === d3 ? i7 : x2);
  }
  return [P(t6, l3 + (t6[s5] || "<?>") + (2 === i6 ? "</svg>" : 3 === i6 ? "</math>" : "")), o8];
};
var N = class _N {
  constructor({ strings: t6, _$litType$: s5 }, n7) {
    let r7;
    this.parts = [];
    let c5 = 0, a3 = 0;
    const u3 = t6.length - 1, d3 = this.parts, [f5, v2] = V(t6, s5);
    if (this.el = _N.createElement(f5, n7), C.currentNode = this.el.content, 2 === s5 || 3 === s5) {
      const t7 = this.el.content.firstChild;
      t7.replaceWith(...t7.childNodes);
    }
    for (; null !== (r7 = C.nextNode()) && d3.length < u3; ) {
      if (1 === r7.nodeType) {
        if (r7.hasAttributes()) for (const t7 of r7.getAttributeNames()) if (t7.endsWith(e3)) {
          const i6 = v2[a3++], s6 = r7.getAttribute(t7).split(h2), e7 = /([.?@])?(.*)/.exec(i6);
          d3.push({ type: 1, index: c5, name: e7[2], strings: s6, ctor: "." === e7[1] ? H : "?" === e7[1] ? I : "@" === e7[1] ? L : k }), r7.removeAttribute(t7);
        } else t7.startsWith(h2) && (d3.push({ type: 6, index: c5 }), r7.removeAttribute(t7));
        if ($.test(r7.tagName)) {
          const t7 = r7.textContent.split(h2), s6 = t7.length - 1;
          if (s6 > 0) {
            r7.textContent = i3 ? i3.emptyScript : "";
            for (let i6 = 0; i6 < s6; i6++) r7.append(t7[i6], l2()), C.nextNode(), d3.push({ type: 2, index: ++c5 });
            r7.append(t7[s6], l2());
          }
        }
      } else if (8 === r7.nodeType) if (r7.data === o3) d3.push({ type: 2, index: c5 });
      else {
        let t7 = -1;
        for (; -1 !== (t7 = r7.data.indexOf(h2, t7 + 1)); ) d3.push({ type: 7, index: c5 }), t7 += h2.length - 1;
      }
      c5++;
    }
  }
  static createElement(t6, i6) {
    const s5 = r3.createElement("template");
    return s5.innerHTML = t6, s5;
  }
};
function S2(t6, i6, s5 = t6, e7) {
  if (i6 === T) return i6;
  let h5 = void 0 !== e7 ? s5._$Co?.[e7] : s5._$Cl;
  const o8 = c3(i6) ? void 0 : i6._$litDirective$;
  return h5?.constructor !== o8 && (h5?._$AO?.(false), void 0 === o8 ? h5 = void 0 : (h5 = new o8(t6), h5._$AT(t6, s5, e7)), void 0 !== e7 ? (s5._$Co ?? (s5._$Co = []))[e7] = h5 : s5._$Cl = h5), void 0 !== h5 && (i6 = S2(t6, h5._$AS(t6, i6.values), h5, e7)), i6;
}
var M = class {
  constructor(t6, i6) {
    this._$AV = [], this._$AN = void 0, this._$AD = t6, this._$AM = i6;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(t6) {
    const { el: { content: i6 }, parts: s5 } = this._$AD, e7 = (t6?.creationScope ?? r3).importNode(i6, true);
    C.currentNode = e7;
    let h5 = C.nextNode(), o8 = 0, n7 = 0, l3 = s5[0];
    for (; void 0 !== l3; ) {
      if (o8 === l3.index) {
        let i7;
        2 === l3.type ? i7 = new R(h5, h5.nextSibling, this, t6) : 1 === l3.type ? i7 = new l3.ctor(h5, l3.name, l3.strings, this, t6) : 6 === l3.type && (i7 = new z(h5, this, t6)), this._$AV.push(i7), l3 = s5[++n7];
      }
      o8 !== l3?.index && (h5 = C.nextNode(), o8++);
    }
    return C.currentNode = r3, e7;
  }
  p(t6) {
    let i6 = 0;
    for (const s5 of this._$AV) void 0 !== s5 && (void 0 !== s5.strings ? (s5._$AI(t6, s5, i6), i6 += s5.strings.length - 2) : s5._$AI(t6[i6])), i6++;
  }
};
var R = class _R {
  get _$AU() {
    return this._$AM?._$AU ?? this._$Cv;
  }
  constructor(t6, i6, s5, e7) {
    this.type = 2, this._$AH = E, this._$AN = void 0, this._$AA = t6, this._$AB = i6, this._$AM = s5, this.options = e7, this._$Cv = e7?.isConnected ?? true;
  }
  get parentNode() {
    let t6 = this._$AA.parentNode;
    const i6 = this._$AM;
    return void 0 !== i6 && 11 === t6?.nodeType && (t6 = i6.parentNode), t6;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(t6, i6 = this) {
    t6 = S2(this, t6, i6), c3(t6) ? t6 === E || null == t6 || "" === t6 ? (this._$AH !== E && this._$AR(), this._$AH = E) : t6 !== this._$AH && t6 !== T && this._(t6) : void 0 !== t6._$litType$ ? this.$(t6) : void 0 !== t6.nodeType ? this.T(t6) : u2(t6) ? this.k(t6) : this._(t6);
  }
  O(t6) {
    return this._$AA.parentNode.insertBefore(t6, this._$AB);
  }
  T(t6) {
    this._$AH !== t6 && (this._$AR(), this._$AH = this.O(t6));
  }
  _(t6) {
    this._$AH !== E && c3(this._$AH) ? this._$AA.nextSibling.data = t6 : this.T(r3.createTextNode(t6)), this._$AH = t6;
  }
  $(t6) {
    const { values: i6, _$litType$: s5 } = t6, e7 = "number" == typeof s5 ? this._$AC(t6) : (void 0 === s5.el && (s5.el = N.createElement(P(s5.h, s5.h[0]), this.options)), s5);
    if (this._$AH?._$AD === e7) this._$AH.p(i6);
    else {
      const t7 = new M(e7, this), s6 = t7.u(this.options);
      t7.p(i6), this.T(s6), this._$AH = t7;
    }
  }
  _$AC(t6) {
    let i6 = A.get(t6.strings);
    return void 0 === i6 && A.set(t6.strings, i6 = new N(t6)), i6;
  }
  k(t6) {
    a2(this._$AH) || (this._$AH = [], this._$AR());
    const i6 = this._$AH;
    let s5, e7 = 0;
    for (const h5 of t6) e7 === i6.length ? i6.push(s5 = new _R(this.O(l2()), this.O(l2()), this, this.options)) : s5 = i6[e7], s5._$AI(h5), e7++;
    e7 < i6.length && (this._$AR(s5 && s5._$AB.nextSibling, e7), i6.length = e7);
  }
  _$AR(t6 = this._$AA.nextSibling, i6) {
    for (this._$AP?.(false, true, i6); t6 !== this._$AB; ) {
      const i7 = t6.nextSibling;
      t6.remove(), t6 = i7;
    }
  }
  setConnected(t6) {
    void 0 === this._$AM && (this._$Cv = t6, this._$AP?.(t6));
  }
};
var k = class {
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  constructor(t6, i6, s5, e7, h5) {
    this.type = 1, this._$AH = E, this._$AN = void 0, this.element = t6, this.name = i6, this._$AM = e7, this.options = h5, s5.length > 2 || "" !== s5[0] || "" !== s5[1] ? (this._$AH = Array(s5.length - 1).fill(new String()), this.strings = s5) : this._$AH = E;
  }
  _$AI(t6, i6 = this, s5, e7) {
    const h5 = this.strings;
    let o8 = false;
    if (void 0 === h5) t6 = S2(this, t6, i6, 0), o8 = !c3(t6) || t6 !== this._$AH && t6 !== T, o8 && (this._$AH = t6);
    else {
      const e8 = t6;
      let n7, r7;
      for (t6 = h5[0], n7 = 0; n7 < h5.length - 1; n7++) r7 = S2(this, e8[s5 + n7], i6, n7), r7 === T && (r7 = this._$AH[n7]), o8 || (o8 = !c3(r7) || r7 !== this._$AH[n7]), r7 === E ? t6 = E : t6 !== E && (t6 += (r7 ?? "") + h5[n7 + 1]), this._$AH[n7] = r7;
    }
    o8 && !e7 && this.j(t6);
  }
  j(t6) {
    t6 === E ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t6 ?? "");
  }
};
var H = class extends k {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(t6) {
    this.element[this.name] = t6 === E ? void 0 : t6;
  }
};
var I = class extends k {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(t6) {
    this.element.toggleAttribute(this.name, !!t6 && t6 !== E);
  }
};
var L = class extends k {
  constructor(t6, i6, s5, e7, h5) {
    super(t6, i6, s5, e7, h5), this.type = 5;
  }
  _$AI(t6, i6 = this) {
    if ((t6 = S2(this, t6, i6, 0) ?? E) === T) return;
    const s5 = this._$AH, e7 = t6 === E && s5 !== E || t6.capture !== s5.capture || t6.once !== s5.once || t6.passive !== s5.passive, h5 = t6 !== E && (s5 === E || e7);
    e7 && this.element.removeEventListener(this.name, this, s5), h5 && this.element.addEventListener(this.name, this, t6), this._$AH = t6;
  }
  handleEvent(t6) {
    "function" == typeof this._$AH ? this._$AH.call(this.options?.host ?? this.element, t6) : this._$AH.handleEvent(t6);
  }
};
var z = class {
  constructor(t6, i6, s5) {
    this.element = t6, this.type = 6, this._$AN = void 0, this._$AM = i6, this.options = s5;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(t6) {
    S2(this, t6);
  }
};
var Z = { M: e3, P: h2, A: o3, C: 1, L: V, R: M, D: u2, V: S2, I: R, H: k, N: I, U: L, B: H, F: z };
var j = t2.litHtmlPolyfillSupport;
j?.(N, R), (t2.litHtmlVersions ?? (t2.litHtmlVersions = [])).push("3.3.1");
var B = (t6, i6, s5) => {
  const e7 = s5?.renderBefore ?? i6;
  let h5 = e7._$litPart$;
  if (void 0 === h5) {
    const t7 = s5?.renderBefore ?? null;
    e7._$litPart$ = h5 = new R(i6.insertBefore(l2(), t7), t7, void 0, s5 ?? {});
  }
  return h5._$AI(t6), h5;
};

// node_modules/.pnpm/lit-element@4.2.1/node_modules/lit-element/lit-element.js
var s3 = globalThis;
var i4 = class extends y {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var _a;
    const t6 = super.createRenderRoot();
    return (_a = this.renderOptions).renderBefore ?? (_a.renderBefore = t6.firstChild), t6;
  }
  update(t6) {
    const r7 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t6), this._$Do = B(r7, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    super.connectedCallback(), this._$Do?.setConnected(true);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this._$Do?.setConnected(false);
  }
  render() {
    return T;
  }
};
i4._$litElement$ = true, i4["finalized"] = true, s3.litElementHydrateSupport?.({ LitElement: i4 });
var o4 = s3.litElementPolyfillSupport;
o4?.({ LitElement: i4 });
(s3.litElementVersions ?? (s3.litElementVersions = [])).push("4.2.1");

// node_modules/.pnpm/@lit+reactive-element@2.1.1/node_modules/@lit/reactive-element/decorators/custom-element.js
var t3 = (t6) => (e7, o8) => {
  void 0 !== o8 ? o8.addInitializer(() => {
    customElements.define(t6, e7);
  }) : customElements.define(t6, e7);
};

// node_modules/.pnpm/@lit+reactive-element@2.1.1/node_modules/@lit/reactive-element/decorators/property.js
var o5 = { attribute: true, type: String, converter: u, reflect: false, hasChanged: f };
var r4 = (t6 = o5, e7, r7) => {
  const { kind: n7, metadata: i6 } = r7;
  let s5 = globalThis.litPropertyMetadata.get(i6);
  if (void 0 === s5 && globalThis.litPropertyMetadata.set(i6, s5 = /* @__PURE__ */ new Map()), "setter" === n7 && ((t6 = Object.create(t6)).wrapped = true), s5.set(r7.name, t6), "accessor" === n7) {
    const { name: o8 } = r7;
    return { set(r8) {
      const n8 = e7.get.call(this);
      e7.set.call(this, r8), this.requestUpdate(o8, n8, t6);
    }, init(e8) {
      return void 0 !== e8 && this.C(o8, void 0, t6, e8), e8;
    } };
  }
  if ("setter" === n7) {
    const { name: o8 } = r7;
    return function(r8) {
      const n8 = this[o8];
      e7.call(this, r8), this.requestUpdate(o8, n8, t6);
    };
  }
  throw Error("Unsupported decorator location: " + n7);
};
function n4(t6) {
  return (e7, o8) => "object" == typeof o8 ? r4(t6, e7, o8) : ((t7, e8, o9) => {
    const r7 = e8.hasOwnProperty(o9);
    return e8.constructor.createProperty(o9, t7), r7 ? Object.getOwnPropertyDescriptor(e8, o9) : void 0;
  })(t6, e7, o8);
}

// node_modules/.pnpm/@lit+reactive-element@2.1.1/node_modules/@lit/reactive-element/decorators/state.js
function r5(r7) {
  return n4({ ...r7, state: true, attribute: false });
}

// node_modules/.pnpm/lit-html@3.3.1/node_modules/lit-html/directive-helpers.js
var { I: t4 } = Z;
var f3 = (o8) => void 0 === o8.strings;

// node_modules/.pnpm/lit-html@3.3.1/node_modules/lit-html/directive.js
var t5 = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };
var e5 = (t6) => (...e7) => ({ _$litDirective$: t6, values: e7 });
var i5 = class {
  constructor(t6) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t6, e7, i6) {
    this._$Ct = t6, this._$AM = e7, this._$Ci = i6;
  }
  _$AS(t6, e7) {
    return this.update(t6, e7);
  }
  update(t6, e7) {
    return this.render(...e7);
  }
};

// node_modules/.pnpm/lit-html@3.3.1/node_modules/lit-html/async-directive.js
var s4 = (i6, t6) => {
  const e7 = i6._$AN;
  if (void 0 === e7) return false;
  for (const i7 of e7) i7._$AO?.(t6, false), s4(i7, t6);
  return true;
};
var o6 = (i6) => {
  let t6, e7;
  do {
    if (void 0 === (t6 = i6._$AM)) break;
    e7 = t6._$AN, e7.delete(i6), i6 = t6;
  } while (0 === e7?.size);
};
var r6 = (i6) => {
  for (let t6; t6 = i6._$AM; i6 = t6) {
    let e7 = t6._$AN;
    if (void 0 === e7) t6._$AN = e7 = /* @__PURE__ */ new Set();
    else if (e7.has(i6)) break;
    e7.add(i6), c4(t6);
  }
};
function h3(i6) {
  void 0 !== this._$AN ? (o6(this), this._$AM = i6, r6(this)) : this._$AM = i6;
}
function n5(i6, t6 = false, e7 = 0) {
  const r7 = this._$AH, h5 = this._$AN;
  if (void 0 !== h5 && 0 !== h5.size) if (t6) if (Array.isArray(r7)) for (let i7 = e7; i7 < r7.length; i7++) s4(r7[i7], false), o6(r7[i7]);
  else null != r7 && (s4(r7, false), o6(r7));
  else s4(this, i6);
}
var c4 = (i6) => {
  i6.type == t5.CHILD && (i6._$AP ?? (i6._$AP = n5), i6._$AQ ?? (i6._$AQ = h3));
};
var f4 = class extends i5 {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(i6, t6, e7) {
    super._$AT(i6, t6, e7), r6(this), this.isConnected = i6._$AU;
  }
  _$AO(i6, t6 = true) {
    i6 !== this.isConnected && (this.isConnected = i6, i6 ? this.reconnected?.() : this.disconnected?.()), t6 && (s4(this, i6), o6(this));
  }
  setValue(t6) {
    if (f3(this._$Ct)) this._$Ct._$AI(t6, this);
    else {
      const i6 = [...this._$Ct._$AH];
      i6[this._$Ci] = t6, this._$Ct._$AI(i6, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};

// node_modules/.pnpm/lit-html@3.3.1/node_modules/lit-html/directives/ref.js
var e6 = () => new h4();
var h4 = class {
};
var o7 = /* @__PURE__ */ new WeakMap();
var n6 = e5(class extends f4 {
  render(i6) {
    return E;
  }
  update(i6, [s5]) {
    const e7 = s5 !== this.G;
    return e7 && void 0 !== this.G && this.rt(void 0), (e7 || this.lt !== this.ct) && (this.G = s5, this.ht = i6.options?.host, this.rt(this.ct = i6.element)), E;
  }
  rt(t6) {
    if (this.isConnected || (t6 = void 0), "function" == typeof this.G) {
      const i6 = this.ht ?? globalThis;
      let s5 = o7.get(i6);
      void 0 === s5 && (s5 = /* @__PURE__ */ new WeakMap(), o7.set(i6, s5)), void 0 !== s5.get(this.G) && this.G.call(this.ht, void 0), s5.set(this.G, t6), void 0 !== t6 && this.G.call(this.ht, t6);
    } else this.G.value = t6;
  }
  get lt() {
    return "function" == typeof this.G ? o7.get(this.ht ?? globalThis)?.get(this.G) : this.G?.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});

// src/client/components/terminal.ts
var import_headless = __toESM(require_xterm_headless(), 1);

// src/client/utils/keyboard-shortcut-highlighter.ts
var TERMINAL_SHORTCUT_CLASS = "terminal-shortcut";
var SHORTCUT_PATTERNS = [
  // Ctrl combinations
  {
    pattern: /\bctrl\+([a-z])\b/gi,
    keySequence: (match) => `ctrl_${match[1].toLowerCase()}`
  },
  { pattern: /\bctrl\+([0-9])\b/gi, keySequence: (match) => `ctrl_${match[1]}` },
  {
    pattern: /\bctrl\+f([1-9]|1[0-2])\b/gi,
    keySequence: (match) => `ctrl_f${match[1]}`
  },
  // Common shortcuts
  {
    pattern: /\bctrl\+shift\+([a-z])\b/gi,
    keySequence: (match) => `ctrl_shift_${match[1].toLowerCase()}`
  },
  {
    pattern: /\balt\+([a-z])\b/gi,
    keySequence: (match) => `alt_${match[1].toLowerCase()}`
  },
  {
    pattern: /\bcmd\+([a-z])\b/gi,
    keySequence: (match) => `cmd_${match[1].toLowerCase()}`
  },
  // Function keys
  { pattern: /\bf([1-9]|1[0-2])\b/gi, keySequence: (match) => `f${match[1]}` },
  // Special keys
  { pattern: /\besc\b/gi, keySequence: () => "escape" },
  { pattern: /\bescape\b/gi, keySequence: () => "escape" },
  { pattern: /\btab\b/gi, keySequence: () => "tab" },
  { pattern: /\bshift\+tab\b/gi, keySequence: () => "shift_tab" },
  { pattern: /\benter\b/gi, keySequence: () => "enter" },
  { pattern: /\breturn\b/gi, keySequence: () => "enter" },
  { pattern: /\bbackspace\b/gi, keySequence: () => "backspace" },
  { pattern: /\bdelete\b/gi, keySequence: () => "delete" },
  { pattern: /\bspace\b/gi, keySequence: () => " " },
  // Arrow keys
  {
    pattern: /\barrow\s+(up|down|left|right)\b/gi,
    keySequence: (match) => `arrow_${match[1].toLowerCase()}`
  },
  {
    pattern: /\b(up|down|left|right)\s+arrow\b/gi,
    keySequence: (match) => `arrow_${match[1].toLowerCase()}`
  },
  // Page keys
  {
    pattern: /\bpage\s+(up|down)\b/gi,
    keySequence: (match) => `page_${match[1].toLowerCase()}`
  },
  { pattern: /\b(home|end)\b/gi, keySequence: (match) => match[1].toLowerCase() },
  // Common phrases with shortcuts
  { pattern: /\besc\s+to\s+(interrupt|quit|exit|cancel)\b/gi, keySequence: () => "escape" },
  { pattern: /\bpress\s+esc\b/gi, keySequence: () => "escape" },
  { pattern: /\bpress\s+enter\b/gi, keySequence: () => "enter" },
  { pattern: /\bpress\s+tab\b/gi, keySequence: () => "tab" },
  {
    pattern: /\bpress\s+ctrl\+([a-z])\b/gi,
    keySequence: (match) => `ctrl_${match[1].toLowerCase()}`
  },
  {
    pattern: /\bctrl\+([a-z])\s+to\s+\w+/gi,
    keySequence: (match) => `ctrl_${match[1].toLowerCase()}`
  },
  // q to quit pattern
  { pattern: /\bq\s+to\s+(quit|exit)\b/gi, keySequence: () => "q" },
  { pattern: /\bpress\s+q\b/gi, keySequence: () => "q" },
  // Claude Code interactive prompts - generic numbered options
  { pattern: /❯\s*(\d+)\.\s+.*/g, keySequence: (match) => match[1] },
  { pattern: /(\d+)\.\s+.*/g, keySequence: (match) => match[1] }
];
function processKeyboardShortcuts(container, onShortcutClick) {
  const processor = new ShortcutProcessor(container, onShortcutClick);
  processor.process();
}
var ShortcutProcessor = class {
  constructor(container, onShortcutClick) {
    this.processedRanges = /* @__PURE__ */ new Map();
    this.container = container;
    this.lines = container.querySelectorAll(".terminal-line");
    this.onShortcutClick = onShortcutClick;
  }
  process() {
    if (this.lines.length === 0) return;
    for (let i6 = 0; i6 < this.lines.length; i6++) {
      this.processLine(i6);
    }
  }
  processLine(lineIndex) {
    const lineText = this.getLineText(lineIndex);
    if (!lineText) return;
    const shortcuts = this.findShortcutsInLine(lineText);
    for (const shortcut of shortcuts) {
      if (!this.isRangeProcessed(lineIndex, shortcut.start, shortcut.end)) {
        this.createShortcutLink(shortcut, lineIndex);
        this.markRangeAsProcessed(lineIndex, shortcut.start, shortcut.end);
      }
    }
  }
  findShortcutsInLine(lineText) {
    const shortcuts = [];
    for (const pattern of SHORTCUT_PATTERNS) {
      pattern.pattern.lastIndex = 0;
      let match = pattern.pattern.exec(lineText);
      while (match !== null) {
        const text = match[0];
        const keySequence = pattern.keySequence(match);
        const start = match.index;
        const end = match.index + text.length;
        shortcuts.push({
          text,
          keySequence,
          start,
          end
        });
        match = pattern.pattern.exec(lineText);
      }
    }
    shortcuts.sort((a3, b3) => a3.start - b3.start);
    const nonOverlapping = [];
    for (const shortcut of shortcuts) {
      const hasOverlap = nonOverlapping.some(
        (existing) => shortcut.start < existing.end && shortcut.end > existing.start
      );
      if (!hasOverlap) {
        nonOverlapping.push(shortcut);
      }
    }
    return nonOverlapping;
  }
  createShortcutLink(shortcut, lineIndex) {
    const line = this.lines[lineIndex];
    const highlighter = new ShortcutHighlighter(line, shortcut, this.onShortcutClick);
    highlighter.createLink();
  }
  getLineText(lineIndex) {
    if (lineIndex < 0 || lineIndex >= this.lines.length) return "";
    return this.lines[lineIndex].textContent || "";
  }
  isRangeProcessed(lineIndex, start, end) {
    const ranges = this.processedRanges.get(lineIndex);
    if (!ranges) return false;
    return ranges.some((range) => start < range.end && end > range.start);
  }
  markRangeAsProcessed(lineIndex, start, end) {
    if (!this.processedRanges.has(lineIndex)) {
      this.processedRanges.set(lineIndex, []);
    }
    const ranges = this.processedRanges.get(lineIndex);
    if (ranges) {
      ranges.push({ start, end });
    }
  }
};
var ShortcutHighlighter = class {
  constructor(lineElement, shortcut, onShortcutClick) {
    this.lineElement = lineElement;
    this.shortcut = shortcut;
    this.onShortcutClick = onShortcutClick;
  }
  createLink() {
    this.wrapTextInLink(this.lineElement, this.shortcut.start, this.shortcut.end);
  }
  wrapTextInLink(lineElement, startCol, endCol) {
    const walker = document.createTreeWalker(lineElement, NodeFilter.SHOW_TEXT, null);
    const textNodeData = [];
    let currentPos = 0;
    let node = walker.nextNode();
    while (node) {
      const textNode = node;
      const nodeText = textNode.textContent || "";
      const nodeStart = currentPos;
      const nodeEnd = currentPos + nodeText.length;
      if (nodeEnd > startCol && nodeStart < endCol) {
        textNodeData.push({ node: textNode, start: nodeStart, end: nodeEnd });
      }
      currentPos = nodeEnd;
      node = walker.nextNode();
    }
    for (let i6 = textNodeData.length - 1; i6 >= 0; i6--) {
      const { node: textNode, start: nodeStart } = textNodeData[i6];
      const nodeText = textNode.textContent || "";
      const linkStart = Math.max(0, startCol - nodeStart);
      const linkEnd = Math.min(nodeText.length, endCol - nodeStart);
      if (linkStart < linkEnd) {
        this.wrapTextNode(textNode, linkStart, linkEnd);
      }
    }
  }
  wrapTextNode(textNode, start, end) {
    const parent = textNode.parentNode;
    if (!parent) return;
    if (this.isInsideClickable(parent)) return;
    const nodeText = textNode.textContent || "";
    const beforeText = nodeText.substring(0, start);
    const linkText = nodeText.substring(start, end);
    const afterText = nodeText.substring(end);
    const shortcutElement = this.createShortcutElement(linkText);
    const fragment = document.createDocumentFragment();
    if (beforeText) {
      fragment.appendChild(document.createTextNode(beforeText));
    }
    fragment.appendChild(shortcutElement);
    if (afterText) {
      fragment.appendChild(document.createTextNode(afterText));
    }
    parent.replaceChild(fragment, textNode);
  }
  createShortcutElement(text) {
    const shortcut = document.createElement("span");
    shortcut.className = TERMINAL_SHORTCUT_CLASS;
    shortcut.style.color = "#9ca3af";
    shortcut.style.textDecoration = "underline";
    shortcut.style.textDecorationStyle = "dotted";
    shortcut.style.cursor = "pointer";
    shortcut.style.fontWeight = "500";
    shortcut.textContent = text;
    shortcut.addEventListener("click", (e7) => {
      e7.preventDefault();
      e7.stopPropagation();
      this.onShortcutClick(this.shortcut.keySequence);
    });
    shortcut.addEventListener("mouseenter", () => {
      shortcut.style.backgroundColor = "rgba(156, 163, 175, 0.2)";
      shortcut.style.color = "#d1d5db";
    });
    shortcut.addEventListener("mouseleave", () => {
      shortcut.style.backgroundColor = "";
      shortcut.style.color = "#9ca3af";
    });
    shortcut.title = `Click to send: ${this.shortcut.keySequence}`;
    return shortcut;
  }
  isInsideClickable(element) {
    let current = element;
    while (current && current !== document.body) {
      if (current.tagName === "A" && current.classList.contains("terminal-link") || current.tagName === "SPAN" && current.classList.contains(TERMINAL_SHORTCUT_CLASS)) {
        return true;
      }
      current = current.parentElement;
    }
    return false;
  }
};

// src/client/components/terminal.ts
init_logger();

// src/client/utils/terminal-preferences.ts
init_logger();

// src/client/utils/mobile-utils.ts
function detectMobile() {
  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || !!navigator.maxTouchPoints && navigator.maxTouchPoints > 1;
}

// src/client/utils/terminal-preferences.ts
var logger2 = createLogger("terminal-preferences");
var DEFAULT_PREFERENCES = {
  maxCols: 0,
  // No limit by default - take as much as possible
  fontSize: detectMobile() ? 12 : 14,
  // 12px on mobile, 14px on desktop
  fitHorizontally: false,
  theme: "dracula"
};
var STORAGE_KEY_TERMINAL_PREFS = "vibetunnel_terminal_preferences";
var TerminalPreferencesManager = class _TerminalPreferencesManager {
  constructor() {
    this.preferences = this.loadPreferences();
  }
  static getInstance() {
    if (!_TerminalPreferencesManager.instance) {
      _TerminalPreferencesManager.instance = new _TerminalPreferencesManager();
    }
    return _TerminalPreferencesManager.instance;
  }
  loadPreferences() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY_TERMINAL_PREFS);
      if (saved) {
        const parsed = JSON.parse(saved);
        const merged = { ...DEFAULT_PREFERENCES, ...parsed };
        logger2.debug("Loaded terminal preferences:", merged);
        return merged;
      }
    } catch (error) {
      logger2.warn("Failed to load terminal preferences", { error });
    }
    logger2.debug("Using default terminal preferences");
    return { ...DEFAULT_PREFERENCES };
  }
  savePreferences() {
    try {
      const toSave = JSON.stringify(this.preferences);
      localStorage.setItem(STORAGE_KEY_TERMINAL_PREFS, toSave);
      logger2.debug("Saved terminal preferences to localStorage");
    } catch (error) {
      logger2.warn("Failed to save terminal preferences", { error });
    }
  }
  getMaxCols() {
    return this.preferences.maxCols;
  }
  setMaxCols(maxCols) {
    this.preferences.maxCols = Math.max(0, maxCols);
    this.savePreferences();
  }
  getFontSize() {
    return this.preferences.fontSize;
  }
  setFontSize(fontSize) {
    this.preferences.fontSize = Math.max(8, Math.min(32, fontSize));
    this.savePreferences();
  }
  getFitHorizontally() {
    return this.preferences.fitHorizontally;
  }
  setFitHorizontally(fitHorizontally) {
    this.preferences.fitHorizontally = fitHorizontally;
    this.savePreferences();
  }
  getTheme() {
    return this.preferences.theme;
  }
  setTheme(theme) {
    logger2.debug("Setting terminal theme:", theme);
    this.preferences.theme = theme;
    this.savePreferences();
  }
  getPreferences() {
    return { ...this.preferences };
  }
  resetToDefaults() {
    this.preferences = { ...DEFAULT_PREFERENCES };
    this.savePreferences();
  }
};

// src/client/utils/terminal-themes.ts
var TERMINAL_THEMES = [
  {
    id: "auto",
    name: "Auto",
    description: "Follow system theme",
    colors: {}
    // Actual colors determined at runtime
  },
  {
    id: "dark",
    name: "Dark",
    description: "VibeTunnel default dark",
    colors: {
      background: "#1e1e1e",
      foreground: "#d4d4d4",
      cursor: "rgb(var(--color-primary))",
      cursorAccent: "#1e1e1e",
      black: "#000000",
      red: "#cd0000",
      green: "#00cd00",
      yellow: "#cdcd00",
      blue: "#0000ee",
      magenta: "#cd00cd",
      cyan: "#00cdcd",
      white: "#e5e5e5",
      brightBlack: "#7f7f7f",
      brightRed: "#ff0000",
      brightGreen: "#00ff00",
      brightYellow: "#ffff00",
      brightBlue: "#5c5cff",
      brightMagenta: "#ff00ff",
      brightCyan: "#00ffff",
      brightWhite: "#ffffff"
    }
  },
  {
    id: "light",
    name: "Light",
    description: "Soft light theme",
    colors: {
      background: "#f8f9fa",
      foreground: "#1f2328",
      cursor: "rgb(var(--color-primary))",
      cursorAccent: "#f8f9fa",
      black: "#24292f",
      red: "#cf222e",
      green: "#1a7f37",
      yellow: "#9a6700",
      blue: "#0969da",
      magenta: "#8250df",
      cyan: "#1b7c83",
      white: "#6e7781",
      brightBlack: "#57606a",
      brightRed: "#da3633",
      brightGreen: "#2da44e",
      brightYellow: "#bf8700",
      brightBlue: "#218bff",
      brightMagenta: "#a475f9",
      brightCyan: "#3192aa",
      brightWhite: "#8c959f",
      selectionBackground: "#0969da",
      selectionForeground: "#ffffff",
      selectionInactiveBackground: "#e1e4e8"
    }
  },
  {
    id: "vscode-dark",
    name: "VS Code Dark",
    description: "Popular theme from Visual Studio Code",
    colors: {
      background: "#1E1E1E",
      foreground: "#D4D4D4",
      cursor: "#AEAFAD",
      cursorAccent: "#1E1E1E",
      black: "#000000",
      red: "#CD3131",
      green: "#0DBC79",
      yellow: "#E5E510",
      blue: "#2472C8",
      magenta: "#BC3FBC",
      cyan: "#11A8CD",
      white: "#E5E5E5",
      brightBlack: "#666666",
      brightRed: "#F14C4C",
      brightGreen: "#23D18B",
      brightYellow: "#F5F543",
      brightBlue: "#3B8EEA",
      brightMagenta: "#D670D6",
      brightCyan: "#29B8DB",
      brightWhite: "#FFFFFF"
    }
  },
  {
    id: "dracula",
    name: "Dracula",
    description: "Classic dark theme",
    colors: {
      background: "#282A36",
      foreground: "#F8F8F2",
      cursor: "#F8F8F2",
      cursorAccent: "#282A36",
      black: "#21222C",
      red: "#FF5555",
      green: "#50FA7B",
      yellow: "#F1FA8C",
      blue: "#BD93F9",
      magenta: "#FF79C6",
      cyan: "#8BE9FD",
      white: "#F8F8F2",
      brightBlack: "#6272A4",
      brightRed: "#FF6E6E",
      brightGreen: "#69FF94",
      brightYellow: "#FFFFA5",
      brightBlue: "#D6ACFF",
      brightMagenta: "#FF92DF",
      brightCyan: "#A4FFFF",
      brightWhite: "#FFFFFF"
    }
  },
  {
    id: "nord",
    name: "Nord",
    description: "Arctic north-bluish palette",
    colors: {
      background: "#2E3440",
      foreground: "#D8DEE9",
      cursor: "#D8DEE9",
      cursorAccent: "#2E3440",
      black: "#3B4252",
      red: "#BF616A",
      green: "#A3BE8C",
      yellow: "#EBCB8B",
      blue: "#81A1C1",
      magenta: "#B48EAD",
      cyan: "#88C0D0",
      white: "#E5E9F0",
      brightBlack: "#4C566A",
      brightRed: "#BF616A",
      brightGreen: "#A3BE8C",
      brightYellow: "#EBCB8B",
      brightBlue: "#81A1C1",
      brightMagenta: "#B48EAD",
      brightCyan: "#8FBCBB",
      brightWhite: "#ECEFF4"
    }
  }
];

// src/client/utils/theme-utils.ts
function getCurrentTheme() {
  const explicitTheme = document.documentElement.getAttribute("data-theme");
  if (explicitTheme === "dark") return "dark";
  if (explicitTheme === "light") return "light";
  return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
}
function isDarkMode() {
  return getCurrentTheme() === "dark";
}

// src/client/utils/url-highlighter.ts
var MIN_URL_LENGTH = 7;
var MAX_URL_LENGTH = 2048;
var URL_PROTOCOLS = ["https://", "http://", "file://"];
var TERMINAL_LINK_CLASS = "terminal-link";
var URL_START_PATTERN = /https?:\/\/|file:\/\//g;
var PARTIAL_PROTOCOL_PATTERN = /(^|\s)(h|ht|htt|http|https|https:|https:\/|https:\/\/|f|fi|fil|file|file:|file:\/|file:\/\/)$/;
var DOMAIN_START_PATTERN = /^[a-zA-Z0-9[\].-]/;
var PATH_START_PATTERN = /^[/a-zA-Z0-9[\].-]/;
var URL_END_CHARS_PATTERN = /[^\w\-._~:/?#[\]@!$&'()*+,;=%{}|\\^`]/;
var LOCALHOST_PATTERN = /^(https?:\/\/(localhost|[\d.]+|\[[\da-fA-F:]+\]|(([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)*[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.[a-zA-Z]+))(:\d+)?.*|file:\/\/.+)/;
var VALID_DOMAIN_LABEL = /^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/;
function processLinks(container) {
  const processor = new LinkProcessor(container);
  processor.process();
}
var LinkProcessor = class {
  constructor(container) {
    this.processedRanges = /* @__PURE__ */ new Map();
    this.container = container;
    this.lines = container.querySelectorAll(".terminal-line");
  }
  process() {
    if (this.lines.length === 0) return;
    for (let i6 = 0; i6 < this.lines.length; i6++) {
      this.processLine(i6);
    }
  }
  processLine(lineIndex) {
    if (lineIndex > 0) {
      this.checkPreviousLineContinuation(lineIndex);
    }
    this.findUrlsInLine(lineIndex);
  }
  checkPreviousLineContinuation(lineIndex) {
    const currentLineText = this.getLineText(lineIndex);
    const prevLineText = this.getLineText(lineIndex - 1);
    const incompleteUrl = this.findIncompleteUrlAtLineEnd(prevLineText, currentLineText);
    if (incompleteUrl) {
      const { startPos } = incompleteUrl;
      const completeUrl = this.buildMultiLineUrl(lineIndex - 1, startPos);
      if (completeUrl && this.isValidUrl(completeUrl.url)) {
        if (!this.isRangeProcessed(lineIndex - 1, startPos, completeUrl.endLine)) {
          this.createUrlLinks(completeUrl.url, lineIndex - 1, completeUrl.endLine, startPos);
          this.markRangeAsProcessed(lineIndex - 1, completeUrl.endLine, startPos, completeUrl.url);
        }
      }
    }
  }
  findIncompleteUrlAtLineEnd(prevLineText, currentLineText) {
    for (const protocol of URL_PROTOCOLS) {
      const index = prevLineText.lastIndexOf(protocol);
      if (index >= 0 && prevLineText.endsWith(protocol)) {
        if (DOMAIN_START_PATTERN.test(currentLineText.trimStart())) {
          return { startPos: index, protocol };
        }
      }
    }
    const partialMatch = prevLineText.match(PARTIAL_PROTOCOL_PATTERN);
    if (partialMatch) {
      const protocol = partialMatch[2];
      const startPos = (partialMatch.index ?? 0) + (partialMatch[1] ? 1 : 0);
      if (this.isValidContinuation(protocol, currentLineText)) {
        return { startPos, protocol };
      }
    }
    return null;
  }
  isValidContinuation(partialProtocol, nextLineText) {
    const trimmedText = nextLineText.trimStart();
    if (partialProtocol === "https://" || partialProtocol === "file://") {
      return DOMAIN_START_PATTERN.test(trimmedText);
    }
    if (partialProtocol.endsWith("/")) {
      return PATH_START_PATTERN.test(trimmedText);
    }
    const combined = partialProtocol + trimmedText;
    return /^(https?:\/\/|file:\/\/)/.test(combined);
  }
  isValidUrlContinuation(currentUrl, nextLineText) {
    const trimmedNext = nextLineText.trimStart();
    if (!trimmedNext) {
      return false;
    }
    if (!currentUrl.includes("://")) {
      const combined = currentUrl + trimmedNext;
      return /^(https?:|file:|https?:\/|file:\/|https?:\/\/|file:\/\/)/.test(combined);
    }
    if (currentUrl.match(/(https?:|file:)\/\/$/)) {
      return DOMAIN_START_PATTERN.test(trimmedNext);
    }
    if (/^(and|or|but|the|is|are|was|were|been|have|has|had|will|would|could|should|may|might|check|visit|go|see|click|open|navigate)\b/i.test(
      trimmedNext
    )) {
      return false;
    }
    if (/^[!?;]/.test(trimmedNext)) {
      return false;
    }
    if (/^\.(\s|$)/.test(trimmedNext)) {
      return false;
    }
    const firstWord = trimmedNext.split(/\s/)[0];
    if (/[/:._-]/.test(firstWord)) {
      return true;
    }
    if (/^[a-zA-Z]+$/.test(firstWord) && firstWord.length > 2) {
      const commonWords = /^(next|line|with|text|this|that|then|when|where|which|while|after|before|during|since|until|above|below|between|into|through|under|over|about|against|among|around|behind|beside|beyond|inside|outside|toward|within|without|according|although|because|however|therefore|moreover|nevertheless|furthermore|otherwise|meanwhile|indeed|instead|likewise|similarly|specifically|subsequently|ultimately|additionally|consequently|eventually|finally|initially|particularly|previously|recently|suddenly|usually)/i;
      return !commonWords.test(firstWord);
    }
    return /^[a-zA-Z0-9._~:/?#[\]@!$&'()*+,;=%-]/.test(trimmedNext);
  }
  findUrlsInLine(lineIndex) {
    const lineText = this.getLineText(lineIndex);
    URL_START_PATTERN.lastIndex = 0;
    let match = URL_START_PATTERN.exec(lineText);
    while (match !== null) {
      const urlStart = match.index;
      if (this.isPositionProcessed(lineIndex, urlStart)) {
        match = URL_START_PATTERN.exec(lineText);
        continue;
      }
      const completeUrl = this.buildMultiLineUrl(lineIndex, urlStart);
      if (completeUrl && this.isValidUrl(completeUrl.url)) {
        this.createUrlLinks(completeUrl.url, lineIndex, completeUrl.endLine, urlStart);
        this.markRangeAsProcessed(lineIndex, completeUrl.endLine, urlStart, completeUrl.url);
      }
      match = URL_START_PATTERN.exec(lineText);
    }
  }
  buildMultiLineUrl(startLine, startCol) {
    let url = "";
    let endLine = startLine;
    for (let i6 = startLine; i6 < this.lines.length; i6++) {
      const lineText = this.getLineText(i6);
      let remainingText;
      if (i6 === startLine) {
        remainingText = lineText.substring(startCol);
      } else {
        const currentUrl = url;
        const shouldContinue = this.isValidUrlContinuation(currentUrl, lineText);
        if (!shouldContinue) {
          endLine = i6 - 1;
          break;
        }
        remainingText = lineText.trimStart();
        if (!remainingText) {
          endLine = i6 - 1;
          break;
        }
      }
      const urlEnd = this.findUrlEndInText(remainingText);
      if (urlEnd >= 0) {
        url += remainingText.substring(0, urlEnd);
        endLine = i6;
        break;
      } else {
        url += remainingText;
        endLine = i6;
        if (i6 === this.lines.length - 1) break;
      }
    }
    return { url: this.cleanUrl(url), endLine };
  }
  findUrlEndInText(text) {
    const whitespaceIndex = text.search(/\s/);
    if (whitespaceIndex >= 0) return whitespaceIndex;
    const endMatch = text.match(URL_END_CHARS_PATTERN);
    if (endMatch && endMatch.index !== void 0) {
      return endMatch.index;
    }
    return -1;
  }
  createUrlLinks(url, startLine, endLine, startCol) {
    const highlighter = new LinkHighlighter(this.lines, url);
    highlighter.createLinks(startLine, endLine, startCol);
  }
  getLineText(lineIndex) {
    if (lineIndex < 0 || lineIndex >= this.lines.length) return "";
    return this.lines[lineIndex].textContent || "";
  }
  isValidUrl(url) {
    if (url.length < MIN_URL_LENGTH || url.length > MAX_URL_LENGTH) {
      return false;
    }
    if (/[\n\r\t]/.test(url)) {
      return false;
    }
    if (!LOCALHOST_PATTERN.test(url)) {
      return false;
    }
    try {
      const parsed = new URL(url);
      if (!["http:", "https:", "file:"].includes(parsed.protocol)) {
        return false;
      }
      if (parsed.protocol === "http:" || parsed.protocol === "https:") {
        const hostname = parsed.hostname;
        if (hostname === "localhost" || /^[\d.]+$/.test(hostname) || hostname.startsWith("[")) {
          return true;
        }
        const labels = hostname.split(".");
        if (labels.length < 2) {
          return false;
        }
        for (let i6 = 0; i6 < labels.length; i6++) {
          if (!VALID_DOMAIN_LABEL.test(labels[i6])) {
            return false;
          }
        }
        const tld = labels[labels.length - 1];
        if (!/[a-zA-Z]/.test(tld)) {
          return false;
        }
      }
      return true;
    } catch {
      return false;
    }
  }
  cleanUrl(url) {
    let cleaned = url;
    const openParens = (cleaned.match(/\(/g) || []).length;
    const closeParens = (cleaned.match(/\)/g) || []).length;
    if (closeParens > openParens) {
      const toRemove = closeParens - openParens;
      cleaned = cleaned.replace(/\)+$/, (match) => match.substring(0, match.length - toRemove));
    }
    cleaned = cleaned.replace(/[.,;:!?]+$/, "");
    return cleaned;
  }
  isRangeProcessed(startLine, startCol, endLine) {
    for (let line = startLine; line <= endLine; line++) {
      if (this.isPositionProcessed(line, line === startLine ? startCol : 0)) {
        return true;
      }
    }
    return false;
  }
  isPositionProcessed(line, position) {
    const ranges = this.processedRanges.get(line);
    if (!ranges) return false;
    return ranges.some((range) => position >= range.start && position < range.end);
  }
  markRangeAsProcessed(startLine, endLine, startCol, url) {
    let remainingUrl = url;
    let currentLine = startLine;
    while (currentLine <= endLine && remainingUrl.length > 0) {
      const lineText = this.getLineText(currentLine);
      if (!this.processedRanges.has(currentLine)) {
        this.processedRanges.set(currentLine, []);
      }
      const ranges = this.processedRanges.get(currentLine);
      if (!ranges) continue;
      let rangeStart;
      let rangeEnd;
      if (currentLine === startLine) {
        rangeStart = startCol;
        const availableText = lineText.substring(startCol);
        const urlPartLength = Math.min(availableText.length, remainingUrl.length);
        rangeEnd = startCol + urlPartLength;
      } else {
        const leadingWhitespace = lineText.match(/^\s*/);
        rangeStart = leadingWhitespace ? leadingWhitespace[0].length : 0;
        const availableText = lineText.substring(rangeStart);
        let urlPartLength = Math.min(availableText.length, remainingUrl.length);
        if (currentLine === endLine) {
          const endMatch = availableText.substring(0, urlPartLength).search(URL_END_CHARS_PATTERN);
          if (endMatch >= 0) {
            urlPartLength = endMatch;
          }
        }
        rangeEnd = rangeStart + urlPartLength;
      }
      ranges.push({ start: rangeStart, end: rangeEnd });
      remainingUrl = remainingUrl.substring(rangeEnd - rangeStart);
      currentLine++;
    }
  }
};
var LinkHighlighter = class {
  constructor(lines, url) {
    this.lines = lines;
    this.url = url;
  }
  createLinks(startLine, endLine, startCol) {
    let remainingUrl = this.url;
    for (let lineIdx = startLine; lineIdx <= endLine; lineIdx++) {
      const line = this.lines[lineIdx];
      const lineText = line.textContent || "";
      let colStart;
      let colEnd;
      if (lineIdx === startLine) {
        colStart = startCol;
        const lineUrlPart = lineText.substring(startCol);
        colEnd = startCol + Math.min(lineUrlPart.length, remainingUrl.length);
      } else {
        const leadingWhitespace = lineText.match(/^\s*/);
        colStart = leadingWhitespace ? leadingWhitespace[0].length : 0;
        const availableText = lineText.substring(colStart);
        const urlPartLength = Math.min(availableText.length, remainingUrl.length);
        const endMatch = availableText.match(/[\s<>"'`]/);
        const actualLength = endMatch ? Math.min(endMatch.index ?? urlPartLength, urlPartLength) : urlPartLength;
        colEnd = colStart + actualLength;
      }
      if (colStart < colEnd) {
        this.wrapTextInLink(line, colStart, colEnd);
        remainingUrl = remainingUrl.substring(colEnd - colStart);
      }
      if (remainingUrl.length === 0) break;
    }
  }
  wrapTextInLink(lineElement, startCol, endCol) {
    const walker = document.createTreeWalker(lineElement, NodeFilter.SHOW_TEXT, null);
    const textNodeData = [];
    let currentPos = 0;
    let node = walker.nextNode();
    while (node) {
      const textNode = node;
      const nodeText = textNode.textContent || "";
      const nodeStart = currentPos;
      const nodeEnd = currentPos + nodeText.length;
      if (nodeEnd > startCol && nodeStart < endCol) {
        textNodeData.push({ node: textNode, start: nodeStart, end: nodeEnd });
      }
      currentPos = nodeEnd;
      node = walker.nextNode();
    }
    for (let i6 = textNodeData.length - 1; i6 >= 0; i6--) {
      const { node: textNode, start: nodeStart } = textNodeData[i6];
      const nodeText = textNode.textContent || "";
      const linkStart = Math.max(0, startCol - nodeStart);
      const linkEnd = Math.min(nodeText.length, endCol - nodeStart);
      if (linkStart < linkEnd) {
        this.wrapTextNode(textNode, linkStart, linkEnd);
      }
    }
  }
  wrapTextNode(textNode, start, end) {
    const parent = textNode.parentNode;
    if (!parent) return;
    if (this.isInsideLink(parent)) return;
    const nodeText = textNode.textContent || "";
    const beforeText = nodeText.substring(0, start);
    const linkText = nodeText.substring(start, end);
    const afterText = nodeText.substring(end);
    const linkElement = this.createLinkElement(linkText);
    const fragment = document.createDocumentFragment();
    if (beforeText) {
      fragment.appendChild(document.createTextNode(beforeText));
    }
    fragment.appendChild(linkElement);
    if (afterText) {
      fragment.appendChild(document.createTextNode(afterText));
    }
    parent.replaceChild(fragment, textNode);
  }
  createLinkElement(text) {
    const link = document.createElement("a");
    link.className = TERMINAL_LINK_CLASS;
    link.href = this.url;
    link.target = "_blank";
    link.rel = "noopener noreferrer";
    link.style.color = "#4fc3f7";
    link.style.textDecoration = "underline";
    link.style.cursor = "pointer";
    link.textContent = text;
    link.addEventListener("mouseenter", () => {
      link.style.backgroundColor = "rgba(79, 195, 247, 0.2)";
    });
    link.addEventListener("mouseleave", () => {
      link.style.backgroundColor = "";
    });
    return link;
  }
  isInsideLink(element) {
    let current = element;
    while (current && current !== document.body) {
      if (current.tagName === "A" && current.classList.contains(TERMINAL_LINK_CLASS)) {
        return true;
      }
      current = current.parentElement;
    }
    return false;
  }
};
var UrlHighlighter = {
  processLinks
};

// src/client/components/terminal.ts
var logger3 = createLogger("terminal");
var Terminal = class extends i4 {
  constructor() {
    super(...arguments);
    this.sessionId = "";
    this.sessionStatus = "running";
    this.cols = 80;
    this.rows = 24;
    this.fontSize = 14;
    this.fitHorizontally = false;
    this.maxCols = 0;
    this.theme = "auto";
    this.disableClick = false;
    this.hideScrollButton = false;
    this.initialCols = 0;
    this.initialRows = 0;
    // Initial terminal height from session creation
    this.originalFontSize = 14;
    this.userOverrideWidth = false;
    this.terminal = null;
    this._viewportY = 0;
    this.followCursorEnabled = true;
    // Whether to follow cursor on writes
    this.programmaticScroll = false;
    // Flag to prevent state updates during programmatic scrolling
    // Debug performance tracking
    this.debugMode = false;
    this.renderCount = 0;
    this.totalRenderTime = 0;
    this.lastRenderTime = 0;
    this.actualRows = 24;
    this.cursorVisible = true;
    // Track cursor visibility state
    this.container = null;
    this.explicitSizeSet = false;
    // Flag to prevent auto-resize when size is explicitly set
    // Virtual scrolling optimization
    this.renderPending = false;
    this.momentumVelocityY = 0;
    this.momentumVelocityX = 0;
    this.momentumAnimation = null;
    this.resizeObserver = null;
    this.mobileWidthResizeComplete = false;
    this.pendingResize = null;
    this.lastCols = 0;
    this.lastRows = 0;
    this.isMobile = false;
    this.mobileInitialResizeTimeout = null;
    // Operation queue for batching buffer modifications
    this.operationQueue = [];
    /**
     * Handle click on scroll-to-bottom indicator
     */
    this.handleScrollToBottom = () => {
      this.followCursorEnabled = true;
      this.scrollToBottom();
      this.requestUpdate();
    };
    /**
     * Handle fit to width toggle
     */
    this.handleFitToggle = () => {
      if (!this.terminal || !this.container) {
        this.fitHorizontally = !this.fitHorizontally;
        this.requestUpdate();
        return;
      }
      const buffer = this.terminal.buffer.active;
      const currentLineHeight = this.fontSize * 1.2;
      const currentScrollLines = currentLineHeight > 0 ? this.viewportY / currentLineHeight : 0;
      const wasAtBottom = this.isScrolledToBottom();
      if (!this.fitHorizontally) {
        this.originalFontSize = this.fontSize;
      }
      this.fitHorizontally = !this.fitHorizontally;
      if (!this.fitHorizontally) {
        this.fontSize = this.originalFontSize;
      }
      this.requestResize("fit-mode-change");
      if (wasAtBottom) {
        this.scrollToBottom();
      } else {
        const newLineHeight = this.fontSize * 1.2;
        const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * newLineHeight);
        const newViewportY = currentScrollLines * newLineHeight;
        this.viewportY = Math.max(0, Math.min(maxScrollPixels, newViewportY));
      }
      this.requestUpdate();
    };
    this.handlePaste = async (e7) => {
      e7.preventDefault();
      e7.stopPropagation();
      let clipboardData = e7.clipboardData?.getData("text/plain");
      if (!clipboardData && navigator.clipboard) {
        try {
          clipboardData = await navigator.clipboard.readText();
        } catch (error) {
          logger3.error("Failed to read clipboard via navigator API", error);
        }
      }
      if (clipboardData) {
        this.dispatchEvent(
          new CustomEvent("terminal-paste", {
            detail: { text: clipboardData },
            bubbles: true
          })
        );
      }
    };
    this.handleClick = () => {
      if (this.disableClick) {
        return;
      }
      if (this.container) {
        this.container.focus();
      }
    };
    this.handleShortcutClick = (keySequence) => {
      this.dispatchEvent(
        new CustomEvent("terminal-input", {
          detail: { text: keySequence },
          bubbles: true
        })
      );
    };
  }
  // Disable shadow DOM for Tailwind compatibility and native text selection
  createRenderRoot() {
    return this;
  }
  get viewportY() {
    return this._viewportY;
  }
  set viewportY(value) {
    this._viewportY = value;
  }
  queueRenderOperation(operation) {
    this.operationQueue.push(operation);
    if (!this.renderPending) {
      this.renderPending = true;
      requestAnimationFrame(() => {
        this.processOperationQueue().then(() => {
          if (this.operationQueue.length === 0) {
            this.renderPending = false;
          }
        });
      });
    }
  }
  requestRenderBuffer() {
    logger3.debug("Requesting render buffer update");
    this.queueRenderOperation(() => {
      logger3.debug("Executing render operation");
      this.renderBuffer();
    });
  }
  async processOperationQueue() {
    const startTime = performance.now();
    const MAX_FRAME_TIME = 8;
    while (this.operationQueue.length > 0) {
      const operation = this.operationQueue.shift();
      if (operation) {
        await operation();
      }
      if (performance.now() - startTime > MAX_FRAME_TIME && this.operationQueue.length > 0) {
        await new Promise((resolve) => {
          requestAnimationFrame(() => {
            this.processOperationQueue().then(resolve);
          });
        });
        return;
      }
    }
    this.renderBuffer();
    if (this.operationQueue.length === 0) {
      this.renderPending = false;
    }
  }
  connectedCallback() {
    const prefs = TerminalPreferencesManager.getInstance();
    this.theme = prefs.getTheme();
    super.connectedCallback();
    this.debugMode = new URLSearchParams(window.location.search).has("debug");
    this.themeObserver = new MutationObserver(() => {
      if (this.terminal && this.theme === "auto") {
        logger3.debug("Auto theme detected system change, updating terminal");
        this.terminal.options.theme = this.getTerminalTheme();
        this.updateTerminalColorProperties(this.getTerminalTheme());
        this.requestRenderBuffer();
      } else if (this.theme !== "auto") {
        logger3.debug("Ignoring system theme change - explicit theme selected:", this.theme);
      }
    });
    this.themeObserver.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["data-theme"]
    });
    if (this.sessionId) {
      try {
        const stored = localStorage.getItem(`terminal-width-override-${this.sessionId}`);
        if (stored !== null) {
          this.userOverrideWidth = stored === "true";
        }
      } catch (error) {
        logger3.warn("Failed to load terminal width preference from localStorage:", error);
      }
    }
  }
  updated(changedProperties) {
    if (changedProperties.has("sessionId") && this.sessionId) {
      try {
        const stored = localStorage.getItem(`terminal-width-override-${this.sessionId}`);
        if (stored !== null) {
          this.userOverrideWidth = stored === "true";
          if (this.container) {
            this.requestResize("property-change");
          }
        }
      } catch (error) {
        logger3.warn("Failed to load terminal width preference from localStorage:", error);
      }
    }
    if (changedProperties.has("cols") || changedProperties.has("rows")) {
      if (this.terminal && !this.explicitSizeSet) {
        this.reinitializeTerminal();
      }
      this.explicitSizeSet = false;
    }
    if (changedProperties.has("fontSize")) {
      if (!this.fitHorizontally) {
        this.originalFontSize = this.fontSize;
      }
      if (this.terminal && this.container) {
        this.requestResize("property-change");
      }
    }
    if (changedProperties.has("fitHorizontally")) {
      if (!this.fitHorizontally) {
        this.fontSize = this.originalFontSize;
      }
      this.requestResize("property-change");
    }
    if (changedProperties.has("maxCols")) {
      if (this.terminal && this.container) {
        this.requestResize("property-change");
      }
    }
    if (changedProperties.has("theme")) {
      logger3.debug("Terminal theme changed to:", this.theme);
      if (this.terminal?.options) {
        const resolvedTheme = this.getTerminalTheme();
        logger3.debug("Applying terminal theme:", this.theme);
        this.terminal.options.theme = resolvedTheme;
        this.updateTerminalColorProperties(resolvedTheme);
        if (this.container) {
          this.container.innerHTML = "";
        }
        this.requestRenderBuffer();
      } else {
        logger3.warn("No terminal instance found for theme update");
      }
    }
  }
  disconnectedCallback() {
    this.cleanup();
    if (this.themeObserver) {
      this.themeObserver.disconnect();
    }
    super.disconnectedCallback();
  }
  // Method to set user override when width is manually selected
  setUserOverrideWidth(override) {
    this.userOverrideWidth = override;
    if (this.isMobile && override) {
      this.mobileWidthResizeComplete = false;
      logger3.debug("[Terminal] Mobile: Resetting width resize block for user-initiated change");
    }
    if (this.sessionId) {
      try {
        localStorage.setItem(`terminal-width-override-${this.sessionId}`, String(override));
      } catch (error) {
        logger3.warn("Failed to save terminal width preference to localStorage:", error);
      }
    }
    if (this.container) {
      this.requestResize("property-change");
    }
  }
  cleanup() {
    if (this.momentumAnimation) {
      cancelAnimationFrame(this.momentumAnimation);
      this.momentumAnimation = null;
    }
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    if (this.pendingResize) {
      cancelAnimationFrame(this.pendingResize);
      this.pendingResize = null;
    }
    if (this.mobileInitialResizeTimeout) {
      clearTimeout(this.mobileInitialResizeTimeout);
      this.mobileInitialResizeTimeout = null;
    }
    if (this.terminal) {
      this.terminal.dispose();
      this.terminal = null;
    }
  }
  firstUpdated() {
    this.originalFontSize = this.fontSize;
    this.initializeTerminal();
  }
  requestResize(source) {
    const MOBILE_BREAKPOINT = 768;
    this.isMobile = window.innerWidth < MOBILE_BREAKPOINT;
    logger3.debug(
      `[Terminal] Resize requested from ${source} (mobile: ${this.isMobile}, width: ${window.innerWidth})`
    );
    if (this.pendingResize) {
      cancelAnimationFrame(this.pendingResize);
    }
    this.pendingResize = requestAnimationFrame(() => {
      this.fitTerminal(source);
      this.pendingResize = null;
    });
  }
  shouldResize(cols, rows) {
    if (this.isMobile && this.mobileWidthResizeComplete && !this.userOverrideWidth) {
      const widthChanged = this.lastCols !== cols;
      const heightChanged = this.lastRows !== rows;
      if (widthChanged) {
        logger3.debug(`[Terminal] Preventing WIDTH resize on mobile (width already set)`);
        return false;
      }
      if (heightChanged) {
        logger3.debug(
          `[Terminal] Allowing HEIGHT resize on mobile: ${this.lastRows} \u2192 ${rows} rows`
        );
        this.lastRows = rows;
        return true;
      }
      return false;
    }
    const changed = this.lastCols !== cols || this.lastRows !== rows;
    if (changed) {
      logger3.debug(
        `[Terminal] Dimensions changed: ${this.lastCols}x${this.lastRows} \u2192 ${cols}x${rows}`
      );
      this.lastCols = cols;
      this.lastRows = rows;
      if (this.isMobile && !this.mobileWidthResizeComplete) {
        this.mobileWidthResizeComplete = true;
        logger3.debug(`[Terminal] Mobile WIDTH resize complete - blocking future width changes`);
      }
    }
    return changed;
  }
  getTerminalTheme() {
    let themeId = this.theme;
    if (themeId === "auto") {
      themeId = getCurrentTheme();
    }
    const preset = TERMINAL_THEMES.find((t6) => t6.id === themeId) || TERMINAL_THEMES[0];
    return { ...preset.colors };
  }
  /**
   * Updates CSS custom properties for terminal colors based on theme
   * This allows the already-rendered HTML to immediately pick up new colors
   */
  updateTerminalColorProperties(themeColors) {
    logger3.debug("Updating terminal CSS color properties");
    const colorMapping = {
      black: 0,
      red: 1,
      green: 2,
      yellow: 3,
      blue: 4,
      magenta: 5,
      cyan: 6,
      white: 7,
      brightBlack: 8,
      brightRed: 9,
      brightGreen: 10,
      brightYellow: 11,
      brightBlue: 12,
      brightMagenta: 13,
      brightCyan: 14,
      brightWhite: 15
    };
    Object.entries(colorMapping).forEach(([colorName, colorIndex]) => {
      if (themeColors[colorName]) {
        const cssProperty = `--terminal-color-${colorIndex}`;
        document.documentElement.style.setProperty(cssProperty, themeColors[colorName]);
        logger3.debug(`Set CSS property ${cssProperty}:`, themeColors[colorName]);
      }
    });
    if (themeColors.foreground) {
      document.documentElement.style.setProperty("--terminal-foreground", themeColors.foreground);
      logger3.debug("Set terminal foreground color:", themeColors.foreground);
    }
    if (themeColors.background) {
      document.documentElement.style.setProperty("--terminal-background", themeColors.background);
      logger3.debug("Set terminal background color:", themeColors.background);
    }
    logger3.debug("CSS terminal color properties updated");
  }
  async initializeTerminal() {
    try {
      logger3.debug("initializeTerminal starting");
      this.requestUpdate();
      this.container = this.querySelector("#terminal-container");
      if (!this.container) {
        const error = new Error("Terminal container not found");
        logger3.error("terminal container not found", error);
        throw error;
      }
      logger3.debug("Terminal container found, proceeding with setup");
      await this.setupTerminal();
      this.setupResize();
      this.setupScrolling();
      this.viewportY = 0;
      if (this.terminal) {
        this.terminal.scrollToTop();
      }
      this.requestUpdate();
    } catch (error) {
      logger3.error("failed to initialize terminal:", error);
      this.requestUpdate();
    }
  }
  async reinitializeTerminal() {
    if (this.terminal) {
      if (this.container) {
        void this.container.offsetHeight;
      }
      const safeCols = Number.isFinite(this.cols) ? Math.floor(this.cols) : 80;
      const safeRows = Number.isFinite(this.rows) ? Math.floor(this.rows) : 24;
      this.terminal.resize(safeCols, safeRows);
      this.requestResize("property-change");
    }
  }
  async setupTerminal() {
    try {
      this.terminal = new import_headless.Terminal({
        cursorBlink: true,
        cursorStyle: "block",
        cursorWidth: 1,
        lineHeight: 1.2,
        letterSpacing: 0,
        scrollback: 1e4,
        allowProposedApi: true,
        allowTransparency: false,
        convertEol: true,
        drawBoldTextInBrightColors: true,
        minimumContrastRatio: 1,
        macOptionIsMeta: true,
        altClickMovesCursor: true,
        rightClickSelectsWord: false,
        wordSeparator: " ()[]{}'\"`",
        theme: this.getTerminalTheme()
      });
      this.terminal.resize(this.cols, this.rows);
      this.requestRenderBuffer();
    } catch (error) {
      logger3.error("failed to create terminal:", error);
      throw error;
    }
  }
  measureCharacterWidth() {
    if (!this.container) return 8;
    const measureEl = document.createElement("div");
    measureEl.className = "terminal-line";
    measureEl.style.position = "absolute";
    measureEl.style.visibility = "hidden";
    measureEl.style.top = "0";
    measureEl.style.left = "0";
    measureEl.style.fontSize = `${this.fontSize}px`;
    measureEl.style.fontFamily = "Hack Nerd Font Mono, Fira Code, monospace";
    const testString = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
    const repeatCount = Math.ceil(this.cols / testString.length);
    const testContent = testString.repeat(repeatCount).substring(0, this.cols);
    measureEl.textContent = testContent;
    this.container.appendChild(measureEl);
    const measureRect = measureEl.getBoundingClientRect();
    const actualCharWidth = measureRect.width / this.cols;
    this.container.removeChild(measureEl);
    return Number.isFinite(actualCharWidth) && actualCharWidth > 0 ? actualCharWidth : 8;
  }
  fitTerminal(source) {
    if (!this.terminal || !this.container) {
      logger3.warn("[Terminal] Cannot fit terminal: terminal or container not initialized");
      return;
    }
    const timestamp = Date.now();
    const timeSinceLastFit = this._lastFitTime ? timestamp - this._lastFitTime : 0;
    this._lastFitTime = timestamp;
    logger3.debug(`[Terminal] \u{1F4F1} fitTerminal called`, {
      source: source || "unknown",
      isMobile: this.isMobile,
      windowWidth: window.innerWidth,
      timeSinceLastFit,
      cols: this.cols,
      rows: this.rows,
      actualRows: this.actualRows,
      bufferLength: this.terminal.buffer.active.length
    });
    if (this.isMobile) {
      logger3.debug(
        `[Terminal] Mobile detected in fitTerminal - source: ${source}, userAgent: ${navigator.userAgent}`
      );
    }
    const _oldActualRows = this.actualRows;
    const oldLineHeight = this.fontSize * 1.2;
    const wasAtBottom = this.isScrolledToBottom();
    const currentScrollLines = oldLineHeight > 0 ? this.viewportY / oldLineHeight : 0;
    if (this.fitHorizontally) {
      const containerWidth = this.container.clientWidth;
      const containerHeight = this.container.clientHeight;
      const targetCharWidth = containerWidth / this.cols;
      const currentCharWidth = this.measureCharacterWidth();
      const scaleFactor = targetCharWidth / currentCharWidth;
      const calculatedFontSize = this.fontSize * scaleFactor;
      const newFontSize = Math.max(4, Math.min(32, calculatedFontSize));
      this.fontSize = newFontSize;
      const lineHeight = this.fontSize * 1.2;
      const fittedRows = Math.max(1, Math.floor(containerHeight / lineHeight));
      this.actualRows = fittedRows;
      this.rows = fittedRows;
      if (this.terminal) {
        const safeCols = Number.isFinite(this.cols) ? Math.floor(this.cols) : 80;
        const safeRows = Number.isFinite(this.rows) ? Math.floor(this.rows) : 24;
        const oldCols = this.lastCols;
        const oldRows = this.lastRows;
        if (this.shouldResize(safeCols, safeRows)) {
          logger3.debug(`Resizing terminal (${source || "unknown"}): ${safeCols}x${safeRows}`);
          this.terminal.resize(safeCols, safeRows);
          const isWidthChange = safeCols !== oldCols;
          const isHeightOnlyChange = !isWidthChange && safeRows !== oldRows;
          this.dispatchEvent(
            new CustomEvent("terminal-resize", {
              detail: {
                cols: safeCols,
                rows: safeRows,
                isMobile: this.isMobile,
                isHeightOnlyChange,
                source: source || "unknown"
              },
              bubbles: true
            })
          );
        } else {
          logger3.debug(`Skipping resize (${source || "unknown"}): dimensions unchanged`);
        }
      }
    } else {
      const containerWidth = this.container.clientWidth || 800;
      const containerHeight = this.container.clientHeight || 600;
      const lineHeight = this.fontSize * 1.2;
      const charWidth = this.measureCharacterWidth();
      const safeCharWidth = Number.isFinite(charWidth) && charWidth > 0 ? charWidth : 8;
      const calculatedCols = Math.max(20, Math.floor(containerWidth / safeCharWidth)) - 1;
      const isTunneledSession = this.sessionId.startsWith("fwd_");
      if (this.maxCols > 0) {
        this.cols = Math.min(calculatedCols, this.maxCols);
      } else if (this.userOverrideWidth) {
        this.cols = calculatedCols;
      } else if (this.initialCols > 0 && isTunneledSession) {
        this.cols = Math.min(calculatedCols, this.initialCols);
      } else {
        this.cols = calculatedCols;
      }
      this.rows = Math.max(6, Math.floor(containerHeight / lineHeight));
      this.actualRows = this.rows;
      if (this.terminal) {
        const safeCols = Number.isFinite(this.cols) ? Math.floor(this.cols) : 80;
        const safeRows = Number.isFinite(this.rows) ? Math.floor(this.rows) : 24;
        const oldCols = this.lastCols;
        const oldRows = this.lastRows;
        if (this.shouldResize(safeCols, safeRows)) {
          logger3.debug(`Resizing terminal (${source || "unknown"}): ${safeCols}x${safeRows}`);
          this.terminal.resize(safeCols, safeRows);
          const isWidthChange = safeCols !== oldCols;
          const isHeightOnlyChange = !isWidthChange && safeRows !== oldRows;
          this.dispatchEvent(
            new CustomEvent("terminal-resize", {
              detail: {
                cols: safeCols,
                rows: safeRows,
                isMobile: this.isMobile,
                isHeightOnlyChange,
                source: source || "unknown"
              },
              bubbles: true
            })
          );
        } else {
          logger3.debug(`Skipping resize (${source || "unknown"}): dimensions unchanged`);
        }
      }
    }
    if (this.terminal) {
      const buffer = this.terminal.buffer.active;
      const newLineHeight = this.fontSize * 1.2;
      const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * newLineHeight);
      if (wasAtBottom) {
        this.viewportY = maxScrollPixels;
      } else {
        const newViewportY = currentScrollLines * newLineHeight;
        const clampedY = Math.max(0, Math.min(maxScrollPixels, newViewportY));
        this.viewportY = clampedY;
      }
    }
    this.requestRenderBuffer();
    this.requestUpdate();
  }
  setupResize() {
    if (!this.container) return;
    const MOBILE_BREAKPOINT = 768;
    this.isMobile = window.innerWidth < MOBILE_BREAKPOINT;
    logger3.debug(
      `[Terminal] Setting up resize - isMobile: ${this.isMobile}, width: ${window.innerWidth}, userAgent: ${navigator.userAgent}`
    );
    if (this.isMobile) {
      logger3.debug("[Terminal] Mobile detected - scheduling initial resize in 200ms");
      this.mobileInitialResizeTimeout = setTimeout(() => {
        logger3.debug("[Terminal] Mobile: Executing initial resize");
        this.fitTerminal("initial-mobile-only");
        logger3.debug(
          "[Terminal] Mobile: Initial width set, future WIDTH resizes blocked (height allowed for keyboard)"
        );
        this.mobileInitialResizeTimeout = null;
      }, 200);
    } else {
      logger3.debug("[Terminal] Desktop detected - setting up resize observers");
      this.resizeObserver = new ResizeObserver(() => {
        logger3.debug("[Terminal] ResizeObserver triggered");
        this.requestResize("ResizeObserver");
      });
      this.resizeObserver.observe(this.container);
      window.addEventListener("resize", () => {
        logger3.debug("[Terminal] Window resize event triggered");
        this.requestResize("window-resize");
      });
      logger3.debug("[Terminal] Desktop: Requesting initial resize");
      this.requestResize("initial-desktop");
    }
  }
  setupScrolling() {
    if (!this.container) return;
    this.container.addEventListener(
      "wheel",
      (e7) => {
        e7.preventDefault();
        const lineHeight = this.fontSize * 1.2;
        let deltaPixelsY = 0;
        let deltaPixelsX = 0;
        switch (e7.deltaMode) {
          case WheelEvent.DOM_DELTA_PIXEL:
            deltaPixelsY = e7.deltaY;
            deltaPixelsX = e7.deltaX;
            break;
          case WheelEvent.DOM_DELTA_LINE:
            deltaPixelsY = e7.deltaY * lineHeight;
            deltaPixelsX = e7.deltaX * lineHeight;
            break;
          case WheelEvent.DOM_DELTA_PAGE:
            deltaPixelsY = e7.deltaY * (this.actualRows * lineHeight);
            deltaPixelsX = e7.deltaX * (this.actualRows * lineHeight);
            break;
        }
        const scrollScale = 0.5;
        deltaPixelsY *= scrollScale;
        deltaPixelsX *= scrollScale;
        if (Math.abs(deltaPixelsY) > 0) {
          this.scrollViewportPixels(deltaPixelsY);
        }
        if (Math.abs(deltaPixelsX) > 0 && !this.fitHorizontally && this.container) {
          this.container.scrollLeft += deltaPixelsX;
        }
      },
      { passive: false }
    );
    let isScrolling = false;
    let lastY = 0;
    let lastX = 0;
    let touchHistory = [];
    const handlePointerDown = (e7) => {
      if (e7.pointerType !== "touch" || !e7.isPrimary) return;
      if (this.momentumAnimation) {
        cancelAnimationFrame(this.momentumAnimation);
        this.momentumAnimation = null;
      }
      isScrolling = false;
      lastY = e7.clientY;
      lastX = e7.clientX;
      touchHistory = [{ y: e7.clientY, x: e7.clientX, time: performance.now() }];
      this.container?.setPointerCapture(e7.pointerId);
    };
    const handlePointerMove = (e7) => {
      if (e7.pointerType !== "touch" || !this.container?.hasPointerCapture(e7.pointerId)) return;
      const currentY = e7.clientY;
      const currentX = e7.clientX;
      const deltaY = lastY - currentY;
      const deltaX = lastX - currentX;
      const now = performance.now();
      touchHistory.push({ y: currentY, x: currentX, time: now });
      if (touchHistory.length > 5) {
        touchHistory.shift();
      }
      if (!isScrolling && (Math.abs(deltaY) > 5 || Math.abs(deltaX) > 5)) {
        isScrolling = true;
      }
      if (!isScrolling) return;
      if (Math.abs(deltaY) > 0) {
        this.scrollViewportPixels(deltaY);
        lastY = currentY;
      }
      if (Math.abs(deltaX) > 0 && !this.fitHorizontally) {
        this.container.scrollLeft += deltaX;
        lastX = currentX;
      }
    };
    const handlePointerUp = (e7) => {
      if (e7.pointerType !== "touch") return;
      if (isScrolling && touchHistory.length >= 2) {
        const now = performance.now();
        const recent = touchHistory[touchHistory.length - 1];
        const older = touchHistory[touchHistory.length - 2];
        const timeDiff = now - older.time;
        const distanceY = recent.y - older.y;
        const distanceX = recent.x - older.x;
        const velocityY = timeDiff > 0 ? -distanceY / timeDiff : 0;
        const velocityX = timeDiff > 0 ? -distanceX / timeDiff : 0;
        const minVelocity = 0.3;
        if (Math.abs(velocityY) > minVelocity || Math.abs(velocityX) > minVelocity) {
          this.startMomentum(velocityY, velocityX);
        }
      }
      this.container?.releasePointerCapture(e7.pointerId);
    };
    const handlePointerCancel = (e7) => {
      if (e7.pointerType !== "touch") return;
      this.container?.releasePointerCapture(e7.pointerId);
    };
    this.container.addEventListener("pointerdown", handlePointerDown);
    this.container.addEventListener("pointermove", handlePointerMove);
    this.container.addEventListener("pointerup", handlePointerUp);
    this.container.addEventListener("pointercancel", handlePointerCancel);
  }
  scrollViewportPixels(deltaPixels) {
    if (!this.terminal) return;
    const buffer = this.terminal.buffer.active;
    const lineHeight = this.fontSize * 1.2;
    const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * lineHeight);
    const newViewportY = Math.max(0, Math.min(maxScrollPixels, this.viewportY + deltaPixels));
    if (newViewportY !== this.viewportY) {
      this.viewportY = newViewportY;
      this.updateFollowCursorState();
      this.requestRenderBuffer();
    }
  }
  startMomentum(velocityY, velocityX) {
    this.momentumVelocityY = velocityY * 16;
    this.momentumVelocityX = velocityX * 16;
    if (this.momentumAnimation) {
      cancelAnimationFrame(this.momentumAnimation);
    }
    this.animateMomentum();
  }
  animateMomentum() {
    const minVelocity = 0.1;
    const decayFactor = 0.92;
    const deltaY = this.momentumVelocityY;
    const deltaX = this.momentumVelocityX;
    let scrolled = false;
    if (Math.abs(deltaY) > minVelocity) {
      const buffer = this.terminal?.buffer.active;
      if (buffer) {
        const lineHeight = this.fontSize * 1.2;
        const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * lineHeight);
        const newViewportY = Math.max(0, Math.min(maxScrollPixels, this.viewportY + deltaY));
        if (newViewportY !== this.viewportY) {
          this.viewportY = newViewportY;
          scrolled = true;
          this.updateFollowCursorState();
        } else {
          this.momentumVelocityY = 0;
        }
      }
    }
    if (Math.abs(deltaX) > minVelocity && !this.fitHorizontally && this.container) {
      const newScrollLeft = this.container.scrollLeft + deltaX;
      this.container.scrollLeft = newScrollLeft;
      scrolled = true;
    }
    this.momentumVelocityY *= decayFactor;
    this.momentumVelocityX *= decayFactor;
    if (Math.abs(this.momentumVelocityY) > minVelocity || Math.abs(this.momentumVelocityX) > minVelocity) {
      this.momentumAnimation = requestAnimationFrame(() => {
        this.animateMomentum();
      });
      if (scrolled) {
        this.renderBuffer();
      }
    } else {
      this.momentumAnimation = null;
      this.momentumVelocityY = 0;
      this.momentumVelocityX = 0;
    }
  }
  renderBuffer() {
    if (!this.terminal || !this.container) {
      logger3.warn("renderBuffer called but missing terminal or container", {
        hasTerminal: !!this.terminal,
        hasContainer: !!this.container
      });
      return;
    }
    logger3.debug("renderBuffer executing");
    const startTime = this.debugMode ? performance.now() : 0;
    if (this.debugMode) {
      this.renderCount++;
    }
    const buffer = this.terminal.buffer.active;
    const bufferLength = buffer.length;
    const lineHeight = this.fontSize * 1.2;
    const startRowFloat = this.viewportY / lineHeight;
    const startRow = Math.floor(startRowFloat);
    const pixelOffset = (startRowFloat - startRow) * lineHeight;
    let html = "";
    const cell = buffer.getNullCell();
    const cursorX = this.terminal.buffer.active.cursorX;
    const cursorY = this.terminal.buffer.active.cursorY + this.terminal.buffer.active.viewportY;
    for (let i6 = 0; i6 < this.actualRows; i6++) {
      const row = startRow + i6;
      const style = pixelOffset > 0 ? ` style="transform: translateY(-${pixelOffset}px);"` : "";
      if (row >= bufferLength) {
        html += `<div class="terminal-line"${style}></div>`;
        continue;
      }
      const line = buffer.getLine(row);
      if (!line) {
        html += `<div class="terminal-line"${style}></div>`;
        continue;
      }
      const isCursorLine = row === cursorY;
      const lineContent = this.renderLine(
        line,
        cell,
        isCursorLine && this.cursorVisible ? cursorX : -1
      );
      html += `<div class="terminal-line"${style}>${lineContent || ""}</div>`;
    }
    this.container.innerHTML = html;
    UrlHighlighter.processLinks(this.container);
    processKeyboardShortcuts(this.container, this.handleShortcutClick);
    if (this.debugMode) {
      const endTime = performance.now();
      this.lastRenderTime = endTime - startTime;
      this.totalRenderTime += this.lastRenderTime;
      this.requestUpdate();
    }
  }
  renderLine(line, cell, cursorCol = -1) {
    let html = "";
    let currentChars = "";
    let currentClasses = "";
    let currentStyle = "";
    const escapeHtml = (text) => {
      return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;");
    };
    const flushGroup = () => {
      if (currentChars) {
        const escapedChars = escapeHtml(currentChars);
        html += `<span class="${currentClasses}"${currentStyle ? ` style="${currentStyle}"` : ""}>${escapedChars}</span>`;
        currentChars = "";
      }
    };
    for (let col = 0; col < line.length; col++) {
      line.getCell(col, cell);
      if (!cell) continue;
      const char = cell.getChars() || " ";
      const width = cell.getWidth();
      if (width === 0) continue;
      let classes = "terminal-char";
      let style = "";
      const isCursor = col === cursorCol;
      if (isCursor) {
        classes += " cursor";
      }
      const fg = cell.getFgColor();
      if (fg !== void 0) {
        if (typeof fg === "number" && fg >= 0 && fg <= 255) {
          style += `color: var(--terminal-color-${fg});`;
        } else if (typeof fg === "number" && fg > 255) {
          const r7 = fg >> 16 & 255;
          const g2 = fg >> 8 & 255;
          const b3 = fg & 255;
          style += `color: rgb(${r7}, ${g2}, ${b3});`;
        }
      }
      const bg = cell.getBgColor();
      if (bg !== void 0) {
        if (typeof bg === "number" && bg >= 0 && bg <= 255) {
          style += `background-color: var(--terminal-color-${bg});`;
        } else if (typeof bg === "number" && bg > 255) {
          const r7 = bg >> 16 & 255;
          const g2 = bg >> 8 & 255;
          const b3 = bg & 255;
          style += `background-color: rgb(${r7}, ${g2}, ${b3});`;
        }
      }
      const isBold = cell.isBold();
      const isItalic = cell.isItalic();
      const isUnderline = cell.isUnderline();
      const isDim = cell.isDim();
      const isInverse = cell.isInverse();
      const isInvisible = cell.isInvisible();
      const isStrikethrough = cell.isStrikethrough();
      const isOverline = cell.isOverline();
      if (isBold) classes += " bold";
      if (isItalic) classes += " italic";
      if (isUnderline) classes += " underline";
      if (isDim) classes += " dim";
      if (isStrikethrough) classes += " strikethrough";
      if (isOverline) classes += " overline";
      if (isInverse) {
        const tempFg = style.match(/color: ([^;]+);/)?.[1];
        const tempBg = style.match(/background-color: ([^;]+);/)?.[1];
        const defaultFg = "var(--terminal-foreground, #e4e4e4)";
        const defaultBg = "var(--terminal-background, #0a0a0a)";
        const actualFg = tempFg || defaultFg;
        const actualBg = tempBg || defaultBg;
        style = "";
        style += `color: ${actualBg};`;
        style += `background-color: ${actualFg};`;
      }
      if (isCursor) {
        style += `background-color: rgb(var(--color-primary));`;
      }
      if (isInvisible) {
        style += "opacity: 0;";
      }
      if (classes !== currentClasses || style !== currentStyle) {
        flushGroup();
        currentClasses = classes;
        currentStyle = style;
      }
      currentChars += char;
    }
    flushGroup();
    return html;
  }
  /**
   * DOM Terminal Public API
   *
   * This component provides a DOM-based terminal renderer with XTerm.js backend.
   * All buffer-modifying operations are queued and executed in requestAnimationFrame
   * to ensure optimal batching and rendering performance.
   */
  // === BUFFER MODIFICATION METHODS (Queued) ===
  /**
   * Write data to the terminal buffer.
   * @param data - String data to write (supports ANSI escape sequences)
   * @param followCursor - If true, automatically scroll to keep cursor visible (default: true)
   */
  write(data, followCursor = true) {
    if (!this.terminal) {
      logger3.warn("Terminal.write called but no terminal instance exists");
      return;
    }
    if (this.isMobile && data.length > 100) {
      logger3.debug(`[Terminal] \u{1F4F1} Large write to terminal`, {
        sessionId: this.sessionId,
        dataLength: data.length,
        followCursor,
        bufferLength: this.terminal.buffer.active.length,
        scrollPosition: this._viewportY
      });
    }
    if (data.includes("\x1B[?25l")) {
      this.cursorVisible = false;
    }
    if (data.includes("\x1B[?25h")) {
      this.cursorVisible = true;
    }
    this.queueRenderOperation(async () => {
      if (!this.terminal) return;
      await new Promise((resolve) => {
        if (this.terminal) {
          this.terminal.write(data, resolve);
        } else {
          resolve();
        }
      });
      if (followCursor && this.followCursorEnabled) {
        this.followCursor();
      }
    });
  }
  /**
   * Clear the terminal buffer and reset scroll position.
   */
  clear() {
    if (!this.terminal) return;
    this.queueRenderOperation(() => {
      if (!this.terminal) return;
      this.terminal.clear();
      this.viewportY = 0;
    });
  }
  /**
   * Resize the terminal to specified dimensions.
   * @param cols - Number of columns
   * @param rows - Number of rows
   */
  setTerminalSize(cols, rows) {
    this.cols = cols;
    this.rows = rows;
    if (!this.terminal) {
      return;
    }
    this.explicitSizeSet = true;
    this.queueRenderOperation(() => {
      if (!this.terminal) return;
      this.terminal.resize(cols, rows);
      this.requestUpdate();
    });
  }
  // === SCROLL CONTROL METHODS (Queued) ===
  /**
   * Scroll to the bottom of the buffer.
   */
  scrollToBottom() {
    if (!this.terminal) return;
    this.queueRenderOperation(() => {
      if (!this.terminal) return;
      this.requestResize("property-change");
      const buffer = this.terminal.buffer.active;
      const lineHeight = this.fontSize * 1.2;
      const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * lineHeight);
      this.programmaticScroll = true;
      this.viewportY = maxScrollPixels;
      this.programmaticScroll = false;
    });
  }
  /**
   * Scroll to a specific position in the buffer.
   * @param position - Line position (0 = top, max = bottom)
   */
  scrollToPosition(position) {
    if (!this.terminal) return;
    this.queueRenderOperation(() => {
      if (!this.terminal) return;
      const buffer = this.terminal.buffer.active;
      const lineHeight = this.fontSize * 1.2;
      const maxScrollLines = Math.max(0, buffer.length - this.actualRows);
      this.programmaticScroll = true;
      this.viewportY = Math.max(0, Math.min(maxScrollLines, position)) * lineHeight;
      this.programmaticScroll = false;
    });
  }
  /**
   * Queue a custom operation to be executed after the next render is complete.
   * Useful for actions that need to happen after terminal state is fully updated.
   * @param callback - Function to execute after render
   */
  queueCallback(callback) {
    this.queueRenderOperation(callback);
  }
  // === QUERY METHODS (Immediate) ===
  // Note: These methods return current state immediately but may return stale data
  // if operations are pending in the RAF queue. For guaranteed fresh data, call
  // these methods inside queueCallback() to ensure they run after all operations complete.
  /**
   * Get terminal dimensions.
   * @returns Object with cols and rows
   * @note May return stale data if operations are pending. Use queueCallback() for fresh data.
   */
  getTerminalSize() {
    return {
      cols: this.cols,
      rows: this.rows
    };
  }
  /**
   * Get number of visible rows in the current viewport.
   * @returns Number of rows that fit in the viewport
   * @note May return stale data if operations are pending. Use queueCallback() for fresh data.
   */
  getVisibleRows() {
    return this.actualRows;
  }
  /**
   * Get total number of lines in the scrollback buffer.
   * @returns Total lines in buffer
   * @note May return stale data if operations are pending. Use queueCallback() for fresh data.
   */
  getBufferSize() {
    if (!this.terminal) return 0;
    return this.terminal.buffer.active.length;
  }
  /**
   * Get current scroll position.
   * @returns Current scroll position (0 = top)
   * @note May return stale data if operations are pending. Use queueCallback() for fresh data.
   */
  getScrollPosition() {
    const lineHeight = this.fontSize * 1.2;
    return Math.round(this.viewportY / lineHeight);
  }
  /**
   * Get maximum possible scroll position.
   * @returns Maximum scroll position
   * @note May return stale data if operations are pending. Use queueCallback() for fresh data.
   */
  getMaxScrollPosition() {
    if (!this.terminal) return 0;
    const buffer = this.terminal.buffer.active;
    return Math.max(0, buffer.length - this.actualRows);
  }
  /**
   * Check if the terminal is currently scrolled to the bottom.
   * @returns True if at bottom, false otherwise
   */
  isScrolledToBottom() {
    if (!this.terminal) return true;
    const buffer = this.terminal.buffer.active;
    const lineHeight = this.fontSize * 1.2;
    const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * lineHeight);
    return this.viewportY >= maxScrollPixels - lineHeight;
  }
  /**
   * Update follow cursor state based on current scroll position.
   * Disable follow cursor when user scrolls away from bottom.
   * Re-enable when user scrolls back to bottom.
   */
  updateFollowCursorState() {
    if (this.programmaticScroll) return;
    const wasAtBottom = this.isScrolledToBottom();
    if (wasAtBottom && !this.followCursorEnabled) {
      this.followCursorEnabled = true;
    } else if (!wasAtBottom && this.followCursorEnabled) {
      this.followCursorEnabled = false;
    }
  }
  /**
   * Scroll the viewport to follow the cursor position.
   * This ensures the cursor stays visible during text input or playback.
   */
  followCursor() {
    if (!this.terminal) return;
    const buffer = this.terminal.buffer.active;
    const cursorY = buffer.cursorY + buffer.viewportY;
    const lineHeight = this.fontSize * 1.2;
    const cursorLine = cursorY;
    const viewportStartLine = Math.floor(this.viewportY / lineHeight);
    const viewportEndLine = viewportStartLine + this.actualRows - 1;
    this.programmaticScroll = true;
    if (cursorLine < viewportStartLine) {
      this.viewportY = cursorLine * lineHeight;
    } else if (cursorLine > viewportEndLine) {
      this.viewportY = Math.max(0, (cursorLine - this.actualRows + 1) * lineHeight);
    }
    const maxScrollPixels = Math.max(0, (buffer.length - this.actualRows) * lineHeight);
    this.viewportY = Math.min(this.viewportY, maxScrollPixels);
    this.programmaticScroll = false;
  }
  render() {
    const terminalTheme = this.getTerminalTheme();
    const containerStyle = `
      view-transition-name: session-${this.sessionId};
      background-color: ${terminalTheme.background || "var(--terminal-background, #0a0a0a)"};
      color: ${terminalTheme.foreground || "var(--terminal-foreground, #e4e4e4)"};
    `;
    return x`
      <style>
        /* Dynamic terminal sizing */
        .terminal-container {
          font-size: ${this.fontSize}px;
          line-height: ${this.fontSize * 1.2}px;
          touch-action: none !important;
        }

        .terminal-line {
          height: ${this.fontSize * 1.2}px;
          line-height: ${this.fontSize * 1.2}px;
        }
      </style>
      <div class="relative w-full h-full p-0 m-0">
        <div
          id="terminal-container"
          class="terminal-container w-full h-full overflow-hidden p-0 m-0"
          tabindex="0"
          contenteditable="false"
          style="${containerStyle}"
          @paste=${this.handlePaste}
          @click=${this.handleClick}
          data-testid="terminal-container"
        ></div>
        ${!this.followCursorEnabled && !this.hideScrollButton ? x`
              <div
                class="scroll-to-bottom"
                @click=${this.handleScrollToBottom}
                title="Scroll to bottom"
              >
                ↓
              </div>
            ` : ""}
        ${this.debugMode ? x`
              <div class="debug-overlay">
                <div class="metric">
                  <span class="metric-label">Renders:</span>
                  <span class="metric-value">${this.renderCount}</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Avg:</span>
                  <span class="metric-value"
                    >${this.renderCount > 0 ? (this.totalRenderTime / this.renderCount).toFixed(2) : "0.00"}ms</span
                  >
                </div>
                <div class="metric">
                  <span class="metric-label">Last:</span>
                  <span class="metric-value">${this.lastRenderTime.toFixed(2)}ms</span>
                </div>
              </div>
            ` : ""}
      </div>
    `;
  }
};
__decorateClass([
  n4({ type: String })
], Terminal.prototype, "sessionId", 2);
__decorateClass([
  n4({ type: String })
], Terminal.prototype, "sessionStatus", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "cols", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "rows", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "fontSize", 2);
__decorateClass([
  n4({ type: Boolean })
], Terminal.prototype, "fitHorizontally", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "maxCols", 2);
__decorateClass([
  n4({ type: String })
], Terminal.prototype, "theme", 2);
__decorateClass([
  n4({ type: Boolean })
], Terminal.prototype, "disableClick", 2);
__decorateClass([
  n4({ type: Boolean })
], Terminal.prototype, "hideScrollButton", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "initialCols", 2);
__decorateClass([
  n4({ type: Number })
], Terminal.prototype, "initialRows", 2);
__decorateClass([
  r5()
], Terminal.prototype, "terminal", 2);
__decorateClass([
  r5()
], Terminal.prototype, "followCursorEnabled", 2);
__decorateClass([
  r5()
], Terminal.prototype, "actualRows", 2);
__decorateClass([
  r5()
], Terminal.prototype, "cursorVisible", 2);
Terminal = __decorateClass([
  t3("vibe-terminal")
], Terminal);

// src/client/utils/constants.ts
var Z_INDEX = {
  // Base UI elements (0-49)
  SESSION_LIST_BOTTOM_BAR: 10,
  TERMINAL_OVERLAY: 15,
  LOG_BUTTON: 20,
  MOBILE_OVERLAY: 25,
  SIDEBAR_MOBILE: 30,
  MOBILE_INPUT_OVERLAY: 40,
  CTRL_ALPHA_OVERLAY: 45,
  TERMINAL_QUICK_KEYS: 48,
  // Dropdowns and popovers (50-99)
  WIDTH_SELECTOR_DROPDOWN: 60,
  BRANCH_SELECTOR_DROPDOWN: 65,
  IME_INPUT: 70,
  // Invisible IME input for CJK text - needs to be above terminal but below modals
  // Modals and overlays (100-199)
  MODAL_BACKDROP: 100,
  MODAL: 105,
  FILE_PICKER: 110,
  SESSION_EXITED_OVERLAY: 120,
  NOTIFICATION: 150,
  // Notifications appear above modals but below file browser
  // Special high-priority overlays (200+)
  FILE_BROWSER: 1100
  // Must be higher than modal backdrop (1000)
};

// src/client/test/terminal-test.ts
var TerminalTest = class extends i4 {
  constructor() {
    super(...arguments);
    this.cols = 80;
    this.rows = 24;
    this.inputText = "";
    this.terminalRef = e6();
    this.testData = {
      ansi: "\x1B[31mRed\x1B[0m \x1B[32mGreen\x1B[0m \x1B[34mBlue\x1B[0m \x1B[1;33mBold Yellow\x1B[0m",
      unicode: "\u{1F680} Unicode: \u4F60\u597D\u4E16\u754C \u2022 \xF1 \u2022 \xFC \u2022 \xF6 \u2022 \u{1F3A8}",
      longLine: "This is a very long line that should wrap around when it reaches the edge of the terminal. ".repeat(
        5
      ),
      progress: "[##########          ] 50% Complete"
    };
  }
  createRenderRoot() {
    return this;
  }
  connectedCallback() {
    super.connectedCallback();
    this.setupTerminal();
  }
  async setupTerminal() {
    await this.updateComplete;
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    terminal.addEventListener("terminal-ready", () => {
      this.writeWelcomeMessage();
    });
  }
  writeWelcomeMessage() {
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    terminal.write("\x1B[1;36mVibeTunnel Terminal Test\x1B[0m\r\n");
    terminal.write("=====================================\r\n\r\n");
    terminal.write("This is a test environment for the terminal component.\r\n");
    terminal.write("Use the buttons above to test various features.\r\n\r\n");
    terminal.write("\x1B[32m$ \x1B[0m");
  }
  handleTerminalInput(e7) {
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    const input = e7.detail;
    terminal.write(input);
    if (input === "\r") {
      terminal.write("\n\x1B[32m$ \x1B[0m");
    }
  }
  handleTerminalResize(e7) {
    console.log("Terminal resized:", e7.detail);
  }
  clearTerminal() {
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    terminal.clear();
    terminal.write("\x1B[32m$ \x1B[0m");
  }
  writeTestData(type) {
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    terminal.write(`${this.testData[type]}\r
\x1B[32m$ \x1B[0m`);
  }
  resizeTerminal(newCols, newRows) {
    this.cols = newCols;
    this.rows = newRows;
    const terminal = this.terminalRef.value;
    if (terminal) {
      terminal.setTerminalSize(newCols, newRows);
    }
  }
  sendCustomInput() {
    if (!this.inputText) return;
    const terminal = this.terminalRef.value;
    if (!terminal) return;
    terminal.write(`${this.inputText}\r
\x1B[32m$ \x1B[0m`);
    this.inputText = "";
  }
  render() {
    return x`
      <div class="h-screen flex flex-col bg-background text-foreground font-mono">
        <div class="bg-surface border-b border-gray-800 p-4 font-sans">
          <h1 class="text-2xl font-bold text-emerald-400 mb-4">Terminal Test</h1>
          <div class="flex gap-2 flex-wrap">
            <button
              @click=${this.clearTerminal}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              Clear
            </button>
            <button
              @click=${() => this.writeTestData("ansi")}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              ANSI Colors
            </button>
            <button
              @click=${() => this.writeTestData("unicode")}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              Unicode
            </button>
            <button
              @click=${() => this.writeTestData("longLine")}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              Long Line
            </button>
            <button
              @click=${() => this.writeTestData("progress")}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              Progress Bar
            </button>
            <button
              @click=${() => this.resizeTerminal(80, 24)}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              80x24
            </button>
            <button
              @click=${() => this.resizeTerminal(120, 30)}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              120x30
            </button>
            <button
              @click=${() => this.resizeTerminal(40, 15)}
              class="px-3 py-1.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-emerald-400 rounded text-sm transition-colors"
            >
              40x15
            </button>
          </div>
        </div>

        <div class="flex-1 relative overflow-hidden bg-black m-4 rounded-lg border border-gray-800">
          <div
            class="absolute top-4 right-4 bg-black/80 border border-gray-800 rounded px-3 py-1.5 text-xs"
            style="z-index: ${Z_INDEX.TERMINAL_OVERLAY};"
          >
            <div>Size: <code class="text-emerald-400">${this.cols}x${this.rows}</code></div>
          </div>

          <vibe-terminal
            ${n6(this.terminalRef)}
            .cols=${this.cols}
            .rows=${this.rows}
            @terminal-input=${this.handleTerminalInput}
            @terminal-resize=${this.handleTerminalResize}
            style="width: 100%; height: 100%;"
          ></vibe-terminal>

          <div class="absolute bottom-4 left-4 right-4 flex gap-2" style="z-index: ${Z_INDEX.TERMINAL_OVERLAY};">
            <input
              type="text"
              placeholder="Type custom text to send..."
              class="flex-1 px-3 py-2 bg-black/80 text-foreground border border-gray-800 rounded font-mono text-sm placeholder-gray-600 focus:outline-none focus:border-emerald-400"
              .value=${this.inputText}
              @input=${(e7) => {
      this.inputText = e7.target.value;
    }}
              @keydown=${(e7) => {
      if (e7.key === "Enter") {
        this.sendCustomInput();
      }
    }}
            />
            <button
              @click=${this.sendCustomInput}
              class="px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-background rounded font-medium text-sm transition-colors"
            >
              Send
            </button>
          </div>
        </div>
      </div>
    `;
  }
};
__decorateClass([
  r5()
], TerminalTest.prototype, "cols", 2);
__decorateClass([
  r5()
], TerminalTest.prototype, "rows", 2);
__decorateClass([
  r5()
], TerminalTest.prototype, "inputText", 2);
TerminalTest = __decorateClass([
  t3("terminal-test")
], TerminalTest);

// src/client/components/monaco-editor.ts
init_logger();

// src/client/utils/monaco-loader.ts
init_logger();
var logger4 = createLogger("monaco-loader");
var isInitialized = false;
var loadingPromise = null;
async function loadMonacoEditor() {
  if (loadingPromise) return loadingPromise;
  loadingPromise = new Promise((resolve, reject) => {
    const loadWhenIdle = () => {
      const loaderScript = document.createElement("script");
      loaderScript.src = "/monaco-editor/vs/loader.js";
      loaderScript.async = true;
      loaderScript.defer = true;
      loaderScript.onload = () => {
        window.require.config({
          paths: {
            vs: "/monaco-editor/vs"
          }
        });
        window.MonacoEnvironment = {
          getWorker: (_workerId, _label) => {
            return new Worker("data:,");
          }
        };
        window.require(["vs/editor/editor.main"], () => {
          logger4.debug("Monaco Editor loaded via AMD with lazy loading");
          resolve();
        });
      };
      loaderScript.onerror = () => {
        reject(new Error("Failed to load Monaco loader script"));
      };
      document.head.appendChild(loaderScript);
    };
    if ("requestIdleCallback" in window) {
      requestIdleCallback(loadWhenIdle, { timeout: 2e3 });
    } else {
      setTimeout(loadWhenIdle, 100);
    }
  });
  return loadingPromise;
}
async function initializeMonaco() {
  if (isInitialized) {
    return;
  }
  try {
    logger4.debug("Loading Monaco Editor...");
    if (!window.monaco) {
      await loadMonacoEditor();
    }
    logger4.debug("Initializing Monaco Editor...");
    const monaco2 = window.monaco;
    monaco2.languages.register({ id: "shell" });
    monaco2.languages.setMonarchTokensProvider("shell", {
      tokenizer: {
        root: [
          [/^#.*$/, "comment"],
          [/\$\w+/, "variable"],
          [
            /\b(echo|cd|ls|grep|find|chmod|mkdir|rm|cp|mv|touch|cat|sed|awk|curl|wget|git|pnpm|npm|yarn|docker|kubectl)\b/,
            "keyword"
          ],
          [/"([^"\\]|\\.)*"/, "string"],
          [/'([^'\\]|\\.)*'/, "string"]
        ]
      }
    });
    monaco2.editor.setTheme(isDarkMode() ? "vs-dark" : "vs");
    const themeObserver = new MutationObserver(() => {
      monaco2.editor.setTheme(isDarkMode() ? "vs-dark" : "vs");
    });
    themeObserver.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["data-theme"]
    });
    isInitialized = true;
    logger4.debug("Monaco Editor initialized successfully");
  } catch (error) {
    logger4.error("Failed to initialize Monaco Editor:", error);
    throw error;
  }
}
var monaco = typeof window !== "undefined" ? window.monaco : void 0;

// src/client/components/monaco-editor.ts
var logger5 = createLogger("monaco-editor");
var MonacoEditor = class extends i4 {
  constructor() {
    super(...arguments);
    this.content = "";
    this.originalContent = "";
    this.modifiedContent = "";
    this.language = "";
    this.filename = "";
    this.readOnly = false;
    this.mode = "normal";
    this.showModeToggle = false;
    this.options = {};
    this.isLoading = true;
    this.diffMode = "sideBySide";
    this.containerWidth = 0;
    this.containerRef = e6();
    this.editor = null;
    this.resizeObserver = null;
    this.monacoLoaded = false;
  }
  createRenderRoot() {
    return this;
  }
  async connectedCallback() {
    super.connectedCallback();
    await this.loadMonaco();
    this.setupResizeObserver();
    await this.updateComplete;
    if (this.containerRef.value && !this.editor && !this.isLoading) {
      await this.createEditor();
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.disposeEditor();
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
  }
  async loadMonaco() {
    if (this.monacoLoaded || window.monaco) {
      this.monacoLoaded = true;
      this.isLoading = false;
      return;
    }
    try {
      logger5.debug("Loading Monaco Editor...");
      await initializeMonaco();
      this.monacoLoaded = true;
      this.isLoading = false;
      logger5.debug("Monaco Editor loaded successfully");
    } catch (error) {
      logger5.error("Failed to load Monaco Editor:", error);
      this.isLoading = false;
    }
  }
  setupResizeObserver() {
    this.resizeObserver = new ResizeObserver((entries) => {
      for (const entry of entries) {
        this.containerWidth = entry.contentRect.width;
        if (this.mode === "diff" && this.editor) {
          const shouldBeInline = this.containerWidth < 768;
          const newMode = shouldBeInline ? "inline" : "sideBySide";
          if (newMode !== this.diffMode) {
            this.diffMode = newMode;
            this.recreateEditor();
          }
        }
        if (this.editor) {
          this.editor.layout();
        }
      }
    });
    if (this.containerRef.value) {
      this.resizeObserver.observe(this.containerRef.value);
    }
  }
  async updated(changedProperties) {
    super.updated(changedProperties);
    const needsRecreate = changedProperties.has("mode") || changedProperties.has("content") && !this.editor || changedProperties.has("originalContent") && this.mode === "diff" || changedProperties.has("modifiedContent") && this.mode === "diff";
    if (needsRecreate && !this.isLoading && this.containerRef.value) {
      await this.recreateEditor();
    } else if (this.editor && !this.isLoading) {
      if (changedProperties.has("content") && this.mode === "normal") {
        this.updateContent();
      }
      if (changedProperties.has("language") || changedProperties.has("filename")) {
        this.updateLanguage();
      }
      if (changedProperties.has("readOnly")) {
        this.updateReadOnly();
      }
    }
  }
  async recreateEditor() {
    this.disposeEditor();
    await this.createEditor();
  }
  async createEditor() {
    if (!this.containerRef.value || !window.monaco) {
      return;
    }
    try {
      this.setupTheme();
      const commonOptions = {
        theme: "vs-dark",
        automaticLayout: true,
        fontSize: 14,
        fontFamily: "'Fira Code', Menlo, Monaco, 'Courier New', monospace",
        fontLigatures: true,
        minimap: { enabled: false },
        scrollBeyondLastLine: false,
        renderWhitespace: "selection",
        readOnly: this.readOnly,
        // Enable folding
        folding: true,
        foldingStrategy: "indentation",
        // Use indentation-based folding instead of language-aware
        foldingHighlight: true,
        showFoldingControls: "always",
        // Ensure decorations are visible
        renderLineHighlight: "all",
        renderLineHighlightOnlyWhenFocus: false,
        ...this.options
      };
      if (this.mode === "diff") {
        const diffOptions = {
          readOnly: true,
          automaticLayout: true,
          scrollBeyondLastLine: false,
          minimap: { enabled: false },
          renderWhitespace: "selection",
          renderSideBySide: this.diffMode === "sideBySide",
          ignoreTrimWhitespace: false
        };
        this.editor = window.monaco.editor.createDiffEditor(this.containerRef.value, diffOptions);
        const language = this.detectLanguage();
        const timestamp = Date.now();
        const baseUri = `${this.filename || "untitled"}-${timestamp}`;
        const originalModel = window.monaco.editor.createModel(
          this.originalContent || "",
          language,
          window.monaco.Uri.parse(`file:///${baseUri}#original`)
        );
        const modifiedModel = window.monaco.editor.createModel(
          this.modifiedContent || "",
          language,
          window.monaco.Uri.parse(`file:///${baseUri}#modified`)
        );
        logger5.debug("Creating diff editor");
        const diffEditor = this.editor;
        diffEditor.setModel({
          original: originalModel,
          modified: modifiedModel
        });
        const restoreLayout = () => {
          if (this.editor) {
            this.editor.layout();
          }
        };
        const disposable = diffEditor.onDidUpdateDiff(() => {
          restoreLayout();
          disposable.dispose();
        });
        setTimeout(restoreLayout, 200);
      } else {
        this.editor = window.monaco.editor.create(this.containerRef.value, {
          ...commonOptions,
          value: this.content,
          language: this.detectLanguage()
        });
        if (!this.readOnly) {
          this.editor.addCommand(
            window.monaco.KeyMod.CtrlCmd | window.monaco.KeyCode.KeyS,
            () => {
              this.handleSave();
            }
          );
          this.editor.onDidChangeModelContent(() => {
            const content = this.editor?.getValue() || "";
            this.dispatchEvent(
              new CustomEvent("content-changed", {
                detail: { content },
                bubbles: true,
                composed: true
              })
            );
          });
        }
      }
      logger5.debug(`Created ${this.mode} editor`);
    } catch (error) {
      logger5.error("Failed to create editor:", error);
    }
  }
  setupTheme() {
    if (!window.monaco) return;
  }
  detectLanguage() {
    if (this.language) {
      return this.language;
    }
    if (this.filename) {
      const ext = this.filename.split(".").pop()?.toLowerCase();
      const languageMap = {
        js: "javascript",
        jsx: "javascript",
        ts: "typescript",
        tsx: "typescript",
        json: "json",
        html: "html",
        htm: "html",
        css: "css",
        scss: "scss",
        sass: "sass",
        less: "less",
        py: "python",
        rb: "ruby",
        go: "go",
        rs: "rust",
        java: "java",
        c: "c",
        cpp: "cpp",
        cs: "csharp",
        php: "php",
        swift: "swift",
        kt: "kotlin",
        scala: "scala",
        r: "r",
        sql: "sql",
        sh: "shell",
        bash: "shell",
        zsh: "shell",
        fish: "shell",
        ps1: "powershell",
        yml: "yaml",
        yaml: "yaml",
        xml: "xml",
        md: "markdown",
        markdown: "markdown",
        dockerfile: "dockerfile",
        makefile: "makefile",
        gitignore: "gitignore"
      };
      return languageMap[ext || ""] || "plaintext";
    }
    return "plaintext";
  }
  updateContent() {
    if (!this.editor || this.mode === "diff") return;
    const currentValue = this.editor.getValue();
    if (currentValue !== this.content) {
      this.editor.setValue(this.content);
    }
  }
  updateLanguage() {
    if (!this.editor || !window.monaco) return;
    const language = this.detectLanguage();
    if (this.mode === "normal") {
      const model = this.editor.getModel();
      if (model) {
        window.monaco.editor.setModelLanguage(model, language);
      }
    } else {
      const diffEditor = this.editor;
      const originalModel = diffEditor.getOriginalEditor().getModel();
      const modifiedModel = diffEditor.getModifiedEditor().getModel();
      if (originalModel) {
        window.monaco.editor.setModelLanguage(originalModel, language);
      }
      if (modifiedModel) {
        window.monaco.editor.setModelLanguage(modifiedModel, language);
      }
    }
  }
  updateReadOnly() {
    if (!this.editor) return;
    if (this.mode === "normal") {
      this.editor.updateOptions({ readOnly: this.readOnly });
    } else {
      const diffEditor = this.editor;
      diffEditor.getModifiedEditor().updateOptions({ readOnly: this.readOnly });
    }
  }
  handleSave() {
    if (this.readOnly || !this.editor || this.mode === "diff") return;
    const content = this.editor.getValue();
    this.dispatchEvent(
      new CustomEvent("save", {
        detail: { content },
        bubbles: true,
        composed: true
      })
    );
  }
  toggleDiffMode() {
    if (this.mode !== "diff") return;
    this.diffMode = this.diffMode === "inline" ? "sideBySide" : "inline";
    let originalContent = "";
    let modifiedContent = "";
    if (this.editor) {
      const diffEditor = this.editor;
      const model = diffEditor.getModel();
      if (model) {
        originalContent = model.original?.getValue() || this.originalContent || "";
        modifiedContent = model.modified?.getValue() || this.modifiedContent || "";
      }
    }
    this.originalContent = originalContent;
    this.modifiedContent = modifiedContent;
    this.recreateEditor();
  }
  disposeEditor() {
    if (this.editor) {
      if (this.mode === "diff") {
        const diffEditor = this.editor;
        const currentModel = diffEditor.getModel();
        diffEditor.setModel(null);
        if (currentModel) {
          setTimeout(() => {
            currentModel.original?.dispose();
            currentModel.modified?.dispose();
          }, 0);
        }
      }
      this.editor.dispose();
      this.editor = null;
    }
  }
  render() {
    return x`
      <div
        class="monaco-editor-root"
        style="display: block; width: 100%; height: 100%; position: relative;"
      >
        <div
          class="editor-container"
          ${n6(this.containerRef)}
          style="width: 100%; height: 100%; position: relative; background: rgb(var(--color-bg-secondary));"
        >
          ${this.isLoading ? x`
                <div
                  class="loading"
                  style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: rgb(var(--color-text-muted)); font-family: ui-monospace, monospace;"
                >
                  Loading editor...
                </div>
              ` : ""}
          ${this.showModeToggle && this.mode === "diff" && !this.isLoading ? x`
                <button
                  class="mode-toggle"
                  style="position: absolute; top: 10px; right: 10px; z-index: 10; background: rgb(var(--color-surface)); border: 1px solid rgb(var(--color-border)); color: rgb(var(--color-text)); padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;"
                  @click=${this.toggleDiffMode}
                  title="Toggle between inline and side-by-side diff"
                  @mouseenter=${(e7) => {
      const btn = e7.target;
      btn.style.background = "rgb(var(--color-surface-hover))";
      btn.style.borderColor = "rgb(var(--color-border-focus))";
    }}
                  @mouseleave=${(e7) => {
      const btn = e7.target;
      btn.style.background = "rgb(var(--color-surface))";
      btn.style.borderColor = "rgb(var(--color-border))";
    }}
                >
                  ${this.diffMode === "inline" ? "Side by Side" : "Inline"}
                </button>
              ` : ""}
        </div>
      </div>
    `;
  }
};
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "content", 2);
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "originalContent", 2);
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "modifiedContent", 2);
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "language", 2);
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "filename", 2);
__decorateClass([
  n4({ type: Boolean })
], MonacoEditor.prototype, "readOnly", 2);
__decorateClass([
  n4({ type: String })
], MonacoEditor.prototype, "mode", 2);
__decorateClass([
  n4({ type: Boolean })
], MonacoEditor.prototype, "showModeToggle", 2);
__decorateClass([
  n4({ type: Object })
], MonacoEditor.prototype, "options", 2);
__decorateClass([
  r5()
], MonacoEditor.prototype, "isLoading", 2);
__decorateClass([
  r5()
], MonacoEditor.prototype, "diffMode", 2);
__decorateClass([
  r5()
], MonacoEditor.prototype, "containerWidth", 2);
MonacoEditor = __decorateClass([
  t3("monaco-editor")
], MonacoEditor);

// src/client/test/monaco-editor-test.ts
var MonacoEditorTest = class extends i4 {
  constructor() {
    super(...arguments);
    this.mode = "diff";
    this.readOnly = false;
    this.showModeToggle = true;
    this.language = "typescript";
    this.content = "";
    this.originalContent = "";
    this.modifiedContent = "";
    this.savedContent = "";
    this.sampleCode = {
      typescript: `// TypeScript Example
interface User {
  id: number;
  name: string;
  email: string;
  isActive: boolean;
}

class UserService {
  private users: User[] = [];

  async getUser(id: number): Promise<User | undefined> {
    return this.users.find(user => user.id === id);
  }

  async createUser(user: Omit<User, 'id'>): Promise<User> {
    const newUser: User = {
      ...user,
      id: this.users.length + 1
    };
    this.users.push(newUser);
    return newUser;
  }
}

export default UserService;`,
      javascript: `// JavaScript Example
class Calculator {
  constructor() {
    this.result = 0;
  }

  add(a, b) {
    this.result = a + b;
    return this.result;
  }

  subtract(a, b) {
    this.result = a - b;
    return this.result;
  }

  multiply(a, b) {
    this.result = a * b;
    return this.result;
  }

  divide(a, b) {
    if (b === 0) {
      throw new Error('Division by zero');
    }
    this.result = a / b;
    return this.result;
  }
}

module.exports = Calculator;`,
      python: `# Python Example
import asyncio
from typing import List, Optional

class TaskManager:
    def __init__(self):
        self.tasks: List[asyncio.Task] = []
        self.results: List[any] = []
    
    async def add_task(self, coro):
        """Add a coroutine as a task"""
        task = asyncio.create_task(coro)
        self.tasks.append(task)
        return task
    
    async def wait_all(self) -> List[any]:
        """Wait for all tasks to complete"""
        if not self.tasks:
            return []
        
        self.results = await asyncio.gather(*self.tasks)
        return self.results
    
    def cancel_all(self):
        """Cancel all pending tasks"""
        for task in self.tasks:
            if not task.done():
                task.cancel()

# Example usage
async def main():
    manager = TaskManager()
    await manager.add_task(asyncio.sleep(1))
    await manager.wait_all()`,
      json: `{
  "name": "monaco-editor-test",
  "version": "1.0.0",
  "description": "Monaco Editor test component",
  "dependencies": {
    "monaco-editor": "^0.52.2",
    "lit": "^3.3.0"
  },
  "scripts": {
    "test": "echo 'Error: no test specified' && exit 1",
    "build": "tsc && vite build",
    "dev": "vite"
  },
  "keywords": ["monaco", "editor", "test"],
  "author": "VibeTunnel Team",
  "license": "MIT"
}`
    };
  }
  createRenderRoot() {
    return this;
  }
  connectedCallback() {
    super.connectedCallback();
    this.loadSampleContent();
  }
  loadSampleContent() {
    const baseContent = this.sampleCode[this.language] || this.sampleCode.typescript;
    this.content = baseContent;
    this.originalContent = baseContent;
    this.modifiedContent = `${baseContent}

// Modified by user
console.log("Changes made!");`;
  }
  handleModeChange(newMode) {
    this.mode = newMode;
    this.loadSampleContent();
  }
  handleLanguageChange(e7) {
    const select = e7.target;
    this.language = select.value;
    this.loadSampleContent();
  }
  handleSave(e7) {
    this.savedContent = e7.detail.content;
    console.log("Content saved:", this.savedContent);
    alert("Content saved! Check console for details.");
  }
  handleContentChanged(e7) {
    console.log("Content changed:", e7.detail.content);
  }
  render() {
    return x`
      <div class="h-screen flex flex-col bg-background text-foreground">
        <div class="bg-surface border-b border-gray-800 p-4">
          <h1 class="text-2xl font-bold text-emerald-400 mb-4">Monaco Editor Test</h1>
          <div class="flex gap-3 flex-wrap items-center">
            <span class="text-sm text-gray-400">Mode:</span>
            <button
              class="${this.mode === "normal" ? "bg-emerald-500 text-background" : "bg-gray-800 hover:bg-gray-700 text-foreground"} px-3 py-1.5 border ${this.mode === "normal" ? "border-emerald-500" : "border-gray-700 hover:border-emerald-400"} rounded text-sm transition-colors"
              @click=${() => this.handleModeChange("normal")}
            >
              Normal
            </button>
            <button
              class="${this.mode === "diff" ? "bg-emerald-500 text-background" : "bg-gray-800 hover:bg-gray-700 text-foreground"} px-3 py-1.5 border ${this.mode === "diff" ? "border-emerald-500" : "border-gray-700 hover:border-emerald-400"} rounded text-sm transition-colors"
              @click=${() => this.handleModeChange("diff")}
            >
              Diff
            </button>

            <span class="text-sm text-gray-400 ml-4">Language:</span>
            <select
              @change=${this.handleLanguageChange}
              .value=${this.language}
              class="px-3 py-1.5 bg-gray-800 text-foreground border border-gray-700 hover:border-emerald-400 rounded text-sm cursor-pointer focus:outline-none focus:border-emerald-400"
            >
              <option value="typescript">TypeScript</option>
              <option value="javascript">JavaScript</option>
              <option value="python">Python</option>
              <option value="json">JSON</option>
            </select>

            <label class="flex items-center gap-2 ml-4 text-sm cursor-pointer">
              <input
                type="checkbox"
                .checked=${this.readOnly}
                @change=${(e7) => {
      this.readOnly = e7.target.checked;
    }}
                class="w-4 h-4 rounded border-gray-700 bg-gray-800 text-emerald-500 focus:ring-emerald-400 focus:ring-offset-0"
              />
              <span>Read Only</span>
            </label>

            ${this.mode === "diff" ? x`
                  <label class="flex items-center gap-2 ml-4 text-sm cursor-pointer">
                    <input
                      type="checkbox"
                      .checked=${this.showModeToggle}
                      @change=${(e7) => {
      this.showModeToggle = e7.target.checked;
    }}
                      class="w-4 h-4 rounded border-gray-700 bg-gray-800 text-emerald-500 focus:ring-emerald-400 focus:ring-offset-0"
                    />
                    <span>Show Mode Toggle</span>
                  </label>
                ` : ""}
          </div>
        </div>

        <div class="flex-1 relative overflow-hidden border border-gray-800 m-4 rounded-lg">
          <div
            class="absolute top-4 right-4 bg-black/80 border border-gray-800 rounded px-3 py-1.5 text-xs"
            style="z-index: ${Z_INDEX.TERMINAL_OVERLAY};"
          >
            <div>Mode: <code class="text-emerald-400">${this.mode}</code></div>
            <div>Language: <code class="text-emerald-400">${this.language}</code></div>
            <div>Read Only: <code class="text-emerald-400">${this.readOnly}</code></div>
          </div>

          <monaco-editor
            .mode=${this.mode}
            .content=${this.content}
            .originalContent=${this.originalContent}
            .modifiedContent=${this.modifiedContent}
            .language=${this.language}
            .readOnly=${this.readOnly}
            .showModeToggle=${this.showModeToggle}
            @save=${this.handleSave}
            @content-changed=${this.handleContentChanged}
            style="width: 100%; height: 100%;"
          ></monaco-editor>
        </div>
      </div>
    `;
  }
};
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "mode", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "readOnly", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "showModeToggle", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "language", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "content", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "originalContent", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "modifiedContent", 2);
__decorateClass([
  r5()
], MonacoEditorTest.prototype, "savedContent", 2);
MonacoEditorTest = __decorateClass([
  t3("monaco-editor-test")
], MonacoEditorTest);
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
lit-html/directives/ref.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL0NpcmN1bGFyTGlzdC50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vQ2xvbmUudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL0NvcmVUZXJtaW5hbC50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vRXZlbnRFbWl0dGVyLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9JbnB1dEhhbmRsZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL0xpZmVjeWNsZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vUGxhdGZvcm0udHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL1Rhc2tRdWV1ZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vV2luZG93c01vZGUudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vYnVmZmVyL0J1ZmZlclJlZmxvdy50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vYnVmZmVyL0J1ZmZlclNldC50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vYnVmZmVyL0NlbGxEYXRhLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvTWFya2VyLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9kYXRhL0NoYXJzZXRzLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcy50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vaW5wdXQvVGV4dERlY29kZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2lucHV0L1VuaWNvZGVWNi50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vaW5wdXQvV3JpdGVCdWZmZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2lucHV0L1hQYXJzZUNvbG9yLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9wYXJzZXIvRGNzUGFyc2VyLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9wYXJzZXIvRXNjYXBlU2VxdWVuY2VQYXJzZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9Pc2NQYXJzZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9QYXJhbXMudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3B1YmxpYy9BZGRvbk1hbmFnZXIudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3B1YmxpYy9CdWZmZXJBcGlWaWV3LnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9wdWJsaWMvQnVmZmVyTGluZUFwaVZpZXcudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3B1YmxpYy9CdWZmZXJOYW1lc3BhY2VBcGkudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3B1YmxpYy9QYXJzZXJBcGkudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3B1YmxpYy9Vbmljb2RlQXBpLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9CdWZmZXJTZXJ2aWNlLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vc2VydmljZXMvQ29yZVNlcnZpY2UudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Mb2dTZXJ2aWNlLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9PcHRpb25zU2VydmljZS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vc2VydmljZXMvT3NjTGlua1NlcnZpY2UudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeS50cyIsICJ3ZWJwYWNrOi8vQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vc2VydmljZXMvU2VydmljZXMudHMiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL1VuaWNvZGVTZXJ2aWNlLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vc3JjL2hlYWRsZXNzL1Rlcm1pbmFsLnRzIiwgIndlYnBhY2s6Ly9AeHRlcm0veHRlcm0vd2VicGFjay9ib290c3RyYXAiLCAid2VicGFjazovL0B4dGVybS94dGVybS9zcmMvaGVhZGxlc3MvcHVibGljL1Rlcm1pbmFsLnRzIiwgIi4uLy4uL3NyYy9zaGFyZWQvdHlwZXMudHMiLCAiLi4vLi4vc3JjL2NsaWVudC9zZXJ2aWNlcy9zc2gtYWdlbnQudHMiLCAiLi4vLi4vc3JjL2NsaWVudC9zZXJ2aWNlcy9hdXRoLWNsaWVudC50cyIsICIuLi8uLi9zcmMvY2xpZW50L3V0aWxzL2xvZ2dlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdCtyZWFjdGl2ZS1lbGVtZW50QDIuMS4xL25vZGVfbW9kdWxlcy9AbGl0L3JlYWN0aXZlLWVsZW1lbnQvc3JjL2Nzcy10YWcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXQrcmVhY3RpdmUtZWxlbWVudEAyLjEuMS9ub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3NyYy9yZWFjdGl2ZS1lbGVtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9saXQtaHRtbEAzLjMuMS9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2xpdC1odG1sLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9saXQtZWxlbWVudEA0LjIuMS9ub2RlX21vZHVsZXMvbGl0LWVsZW1lbnQvc3JjL2xpdC1lbGVtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl0K3JlYWN0aXZlLWVsZW1lbnRAMi4xLjEvbm9kZV9tb2R1bGVzL0BsaXQvcmVhY3RpdmUtZWxlbWVudC9zcmMvZGVjb3JhdG9ycy9jdXN0b20tZWxlbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdCtyZWFjdGl2ZS1lbGVtZW50QDIuMS4xL25vZGVfbW9kdWxlcy9AbGl0L3JlYWN0aXZlLWVsZW1lbnQvc3JjL2RlY29yYXRvcnMvcHJvcGVydHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXQrcmVhY3RpdmUtZWxlbWVudEAyLjEuMS9ub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3NyYy9kZWNvcmF0b3JzL3N0YXRlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9saXQtaHRtbEAzLjMuMS9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZS1oZWxwZXJzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9saXQtaHRtbEAzLjMuMS9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbGl0LWh0bWxAMy4zLjEvbm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9hc3luYy1kaXJlY3RpdmUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2xpdC1odG1sQDMuMy4xL25vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvZGlyZWN0aXZlcy9yZWYudHMiLCAiLi4vLi4vc3JjL2NsaWVudC9jb21wb25lbnRzL3Rlcm1pbmFsLnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvdXRpbHMva2V5Ym9hcmQtc2hvcnRjdXQtaGlnaGxpZ2h0ZXIudHMiLCAiLi4vLi4vc3JjL2NsaWVudC91dGlscy90ZXJtaW5hbC1wcmVmZXJlbmNlcy50cyIsICIuLi8uLi9zcmMvY2xpZW50L3V0aWxzL21vYmlsZS11dGlscy50cyIsICIuLi8uLi9zcmMvY2xpZW50L3V0aWxzL3Rlcm1pbmFsLXRoZW1lcy50cyIsICIuLi8uLi9zcmMvY2xpZW50L3V0aWxzL3RoZW1lLXV0aWxzLnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvdXRpbHMvdXJsLWhpZ2hsaWdodGVyLnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvdXRpbHMvY29uc3RhbnRzLnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvdGVzdC90ZXJtaW5hbC10ZXN0LnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvY29tcG9uZW50cy9tb25hY28tZWRpdG9yLnRzIiwgIi4uLy4uL3NyYy9jbGllbnQvdXRpbHMvbW9uYWNvLWxvYWRlci50cyIsICIuLi8uLi9zcmMvY2xpZW50L3Rlc3QvbW9uYWNvLWVkaXRvci10ZXN0LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaXJjdWxhckxpc3QgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUluc2VydEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlbGV0ZUV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNpcmN1bGFyIGxpc3Q7IGEgbGlzdCB3aXRoIGEgbWF4aW11bSBzaXplIHRoYXQgd3JhcHMgYXJvdW5kIHdoZW4gcHVzaCBpcyBjYWxsZWQsXG4gKiBvdmVycmlkaW5nIHZhbHVlcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxpc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaXJjdWxhckxpc3Q8VD4gZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUNpcmN1bGFyTGlzdDxUPiB7XG4gIHByb3RlY3RlZCBfYXJyYXk6IChUIHwgdW5kZWZpbmVkKVtdO1xuICBwcml2YXRlIF9zdGFydEluZGV4OiBudW1iZXI7XG4gIHByaXZhdGUgX2xlbmd0aDogbnVtYmVyO1xuXG4gIHB1YmxpYyByZWFkb25seSBvbkRlbGV0ZUVtaXR0ZXIgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8SURlbGV0ZUV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uRGVsZXRlID0gdGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZXZlbnQ7XG4gIHB1YmxpYyByZWFkb25seSBvbkluc2VydEVtaXR0ZXIgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8SUluc2VydEV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uSW5zZXJ0ID0gdGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnQ7XG4gIHB1YmxpYyByZWFkb25seSBvblRyaW1FbWl0dGVyID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblRyaW0gPSB0aGlzLm9uVHJpbUVtaXR0ZXIuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfbWF4TGVuZ3RoOiBudW1iZXJcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9hcnJheSA9IG5ldyBBcnJheTxUPih0aGlzLl9tYXhMZW5ndGgpO1xuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSAwO1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1heExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgc2V0IG1heExlbmd0aChuZXdNYXhMZW5ndGg6IG51bWJlcikge1xuICAgIC8vIFRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gbWF4TGVuZ3RoLCByZXR1cm4gZWFybHkuXG4gICAgaWYgKHRoaXMuX21heExlbmd0aCA9PT0gbmV3TWF4TGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVjb25zdHJ1Y3QgYXJyYXksIHN0YXJ0aW5nIGF0IGluZGV4IDAuIE9ubHkgdHJhbnNmZXIgdmFsdWVzIGZyb20gdGhlXG4gICAgLy8gaW5kZXhlcyAwIHRvIGxlbmd0aC5cbiAgICBjb25zdCBuZXdBcnJheSA9IG5ldyBBcnJheTxUIHwgdW5kZWZpbmVkPihuZXdNYXhMZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4obmV3TWF4TGVuZ3RoLCB0aGlzLmxlbmd0aCk7IGkrKykge1xuICAgICAgbmV3QXJyYXlbaV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV07XG4gICAgfVxuICAgIHRoaXMuX2FycmF5ID0gbmV3QXJyYXk7XG4gICAgdGhpcy5fbWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSAwO1xuICB9XG5cbiAgcHVibGljIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIHNldCBsZW5ndGgobmV3TGVuZ3RoOiBudW1iZXIpIHtcbiAgICBpZiAobmV3TGVuZ3RoID4gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5fbGVuZ3RoOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fYXJyYXlbaV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2xlbmd0aCA9IG5ld0xlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2YWx1ZSBhdCBhbiBpbmRleC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHRoZXJlIGlzIG5vIGJvdW5kcyBjaGVja2luZyBoZXJlLCB0aGUgaW5kZXggcmVmZXJlbmNlIGlzXG4gICAqIGNpcmN1bGFyIHNvIHRoaXMgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbmV2ZXIgdGhyb3cuXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAgICogQHJldHVybnMgVGhlIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGluZGV4LlxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGluZGV4KV07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgYXQgYW4gaW5kZXguXG4gICAqXG4gICAqIE5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB0aGVyZSBpcyBubyBib3VuZHMgY2hlY2tpbmcgaGVyZSwgdGhlIGluZGV4IHJlZmVyZW5jZSBpc1xuICAgKiBjaXJjdWxhciBzbyB0aGlzIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsdWUgYW5kIG5ldmVyIHRocm93LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRvIHNldC5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAqL1xuICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBUIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaW5kZXgpXSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFB1c2hlcyBhIG5ldyB2YWx1ZSBvbnRvIHRoZSBsaXN0LCB3cmFwcGluZyBhcm91bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBhcnJheSwgb3ZlcnJpZGluZyBpbmRleCAwXG4gICAqIGlmIHRoZSBtYXhpbXVtIGxlbmd0aCBpcyByZWFjaGVkLlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHB1c2ggb250byB0aGUgbGlzdC5cbiAgICovXG4gIHB1YmxpYyBwdXNoKHZhbHVlOiBUKTogdm9pZCB7XG4gICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoKV0gPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5fbGVuZ3RoID09PSB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3N0YXJ0SW5kZXggPSArK3RoaXMuX3N0YXJ0SW5kZXggJSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGVuZ3RoKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkdmFuY2UgcmluZ2J1ZmZlciBpbmRleCBhbmQgcmV0dXJuIGN1cnJlbnQgZWxlbWVudCBmb3IgcmVjeWNsaW5nLlxuICAgKiBOb3RlOiBUaGUgYnVmZmVyIG11c3QgYmUgZnVsbCBmb3IgdGhpcyBtZXRob2QgdG8gd29yay5cbiAgICogQHRocm93cyBXaGVuIHRoZSBidWZmZXIgaXMgbm90IGZ1bGwuXG4gICAqL1xuICBwdWJsaWMgcmVjeWNsZSgpOiBUIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoICE9PSB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcmVjeWNsZSB3aGVuIHRoZSBidWZmZXIgaXMgZnVsbCcpO1xuICAgIH1cbiAgICB0aGlzLl9zdGFydEluZGV4ID0gKyt0aGlzLl9zdGFydEluZGV4ICUgdGhpcy5fbWF4TGVuZ3RoO1xuICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGggLSAxKV0hO1xuICB9XG5cbiAgLyoqXG4gICAqIFJpbmdidWZmZXIgaXMgYXQgbWF4IGxlbmd0aC5cbiAgICovXG4gIHB1YmxpYyBnZXQgaXNGdWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGggPT09IHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuZCByZXR1cm5zIHRoZSBsYXN0IHZhbHVlIG9uIHRoZSBsaXN0LlxuICAgKiBAcmV0dXJucyBUaGUgcG9wcGVkIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHBvcCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLS0gLSAxKV07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbmQvb3IgaW5zZXJ0cyBpdGVtcyBhdCBhIHBhcnRpY3VsYXIgaW5kZXggKGluIHRoYXQgb3JkZXIpLiBVbmxpa2VcbiAgICogQXJyYXkucHJvdG90eXBlLnNwbGljZSwgdGhpcyBvcGVyYXRpb24gZG9lcyBub3QgcmV0dXJuIHRoZSBkZWxldGVkIGl0ZW1zIGFzIGEgbmV3IGFycmF5IGluXG4gICAqIG9yZGVyIHRvIHNhdmUgY3JlYXRpbmcgYSBuZXcgYXJyYXkuIE5vdGUgdGhhdCB0aGlzIG9wZXJhdGlvbiBtYXkgc2hpZnQgYWxsIHZhbHVlcyBpbiB0aGUgbGlzdFxuICAgKiBpbiB0aGUgd29yc3QgY2FzZS5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSBpbmRleCB0byBkZWxldGUgYW5kL29yIGluc2VydC5cbiAgICogQHBhcmFtIGRlbGV0ZUNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZGVsZXRlLlxuICAgKiBAcGFyYW0gaXRlbXMgVGhlIGl0ZW1zIHRvIGluc2VydC5cbiAgICovXG4gIHB1YmxpYyBzcGxpY2Uoc3RhcnQ6IG51bWJlciwgZGVsZXRlQ291bnQ6IG51bWJlciwgLi4uaXRlbXM6IFRbXSk6IHZvaWQge1xuICAgIC8vIERlbGV0ZSBpdGVtc1xuICAgIGlmIChkZWxldGVDb3VudCkge1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgdGhpcy5fbGVuZ3RoIC0gZGVsZXRlQ291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpICsgZGVsZXRlQ291bnQpXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xlbmd0aCAtPSBkZWxldGVDb3VudDtcbiAgICAgIHRoaXMub25EZWxldGVFbWl0dGVyLmZpcmUoeyBpbmRleDogc3RhcnQsIGFtb3VudDogZGVsZXRlQ291bnQgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGl0ZW1zXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xlbmd0aCAtIDE7IGkgPj0gc3RhcnQ7IGktLSkge1xuICAgICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSArIGl0ZW1zLmxlbmd0aCldID0gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChzdGFydCArIGkpXSA9IGl0ZW1zW2ldO1xuICAgIH1cbiAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLm9uSW5zZXJ0RW1pdHRlci5maXJlKHsgaW5kZXg6IHN0YXJ0LCBhbW91bnQ6IGl0ZW1zLmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgbGVuZ3RoIGFzIG5lZWRlZFxuICAgIGlmICh0aGlzLl9sZW5ndGggKyBpdGVtcy5sZW5ndGggPiB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNvdW50VG9UcmltID0gKHRoaXMuX2xlbmd0aCArIGl0ZW1zLmxlbmd0aCkgLSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ICs9IGNvdW50VG9UcmltO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnRUb1RyaW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sZW5ndGggKz0gaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmltcyBhIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgaXRlbXMgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcHVibGljIHRyaW1TdGFydChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNvdW50ID4gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICBjb3VudCA9IHRoaXMuX2xlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRJbmRleCArPSBjb3VudDtcbiAgICB0aGlzLl9sZW5ndGggLT0gY291bnQ7XG4gICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnQpO1xuICB9XG5cbiAgcHVibGljIHNoaWZ0RWxlbWVudHMoc3RhcnQ6IG51bWJlciwgY291bnQ6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCBhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ICsgb2Zmc2V0IDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2hpZnQgZWxlbWVudHMgaW4gbGlzdCBiZXlvbmQgaW5kZXggMCcpO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gY291bnQgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLnNldChzdGFydCArIGkgKyBvZmZzZXQsIHRoaXMuZ2V0KHN0YXJ0ICsgaSkpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhwYW5kTGlzdEJ5ID0gKHN0YXJ0ICsgY291bnQgKyBvZmZzZXQpIC0gdGhpcy5fbGVuZ3RoO1xuICAgICAgaWYgKGV4cGFuZExpc3RCeSA+IDApIHtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGV4cGFuZExpc3RCeTtcbiAgICAgICAgd2hpbGUgKHRoaXMuX2xlbmd0aCA+IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2xlbmd0aC0tO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0SW5kZXgrKztcbiAgICAgICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgdGhpcy5zZXQoc3RhcnQgKyBpICsgb2Zmc2V0LCB0aGlzLmdldChzdGFydCArIGkpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3ljbGljIGluZGV4IGZvciB0aGUgc3BlY2lmaWVkIHJlZ3VsYXIgaW5kZXguIFRoZSBjeWNsaWMgaW5kZXggY2FuIHRoZW4gYmUgdXNlZCBvbiB0aGVcbiAgICogYmFja2luZyBhcnJheSB0byBnZXQgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWd1bGFyIGluZGV4LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIHJlZ3VsYXIgaW5kZXguXG4gICAqIEByZXR1cm5zIFRoZSBjeWNsaWMgaW5kZXguXG4gICAqL1xuICBwcml2YXRlIF9nZXRDeWNsaWNJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuX3N0YXJ0SW5kZXggKyBpbmRleCkgJSB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qXG4gKiBBIHNpbXBsZSB1dGlsaXR5IGZvciBjbG9uaW5nIHZhbHVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VD4odmFsOiBULCBkZXB0aDogbnVtYmVyID0gNSk6IFQge1xuICBpZiAodHlwZW9mIHZhbCAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG5cbiAgLy8gSWYgd2UncmUgY2xvbmluZyBhbiBhcnJheSwgdXNlIGFuIGFycmF5IGFzIHRoZSBiYXNlLCBvdGhlcndpc2UgdXNlIGFuIG9iamVjdFxuICBjb25zdCBjbG9uZWRPYmplY3Q6IGFueSA9IEFycmF5LmlzQXJyYXkodmFsKSA/IFtdIDoge307XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gdmFsKSB7XG4gICAgLy8gUmVjdXJzaXZlbHkgY2xvbmUgZWFjayBpdGVtIHVubGVzcyB3ZSdyZSBhdCB0aGUgbWF4aW11bSBkZXB0aFxuICAgIGNsb25lZE9iamVjdFtrZXldID0gZGVwdGggPD0gMSA/IHZhbFtrZXldIDogKHZhbFtrZXldICYmIGNsb25lKHZhbFtrZXldLCBkZXB0aCAtIDEpKTtcbiAgfVxuXG4gIHJldHVybiBjbG9uZWRPYmplY3QgYXMgVDtcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDIwIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6XG4gKiAgIEZhYnJpY2UgQmVsbGFyZCdzIGphdmFzY3JpcHQgdnQxMDAgZm9yIGpzbGludXg6XG4gKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4L1xuICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkXG4gKiAgIFRoZSBvcmlnaW5hbCBkZXNpZ24gcmVtYWlucy4gVGhlIHRlcm1pbmFsIGl0c2VsZlxuICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmdcbiAqICAgb3RoZXIgZmVhdHVyZXMuXG4gKlxuICogVGVybWluYWwgRW11bGF0aW9uIFJlZmVyZW5jZXM6XG4gKiAgIGh0dHA6Ly92dDEwMC5uZXQvXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMudHh0XG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbFxuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQvdnR0ZXN0L1xuICogICBodHRwOi8vd3d3Lmlud2FwLmNvbS9wZHAxMC9hbnNpY29kZS50eHRcbiAqICAgaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzQvY29uc29sZV9jb2Rlc1xuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNy91cnh2dFxuICovXG5cbmltcG9ydCB7IERpc3Bvc2FibGUsIE11dGFibGVEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElJbnN0YW50aWF0aW9uU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSwgSUxvZ1NlcnZpY2UsIElDaGFyc2V0U2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJQ29yZU1vdXNlU2VydmljZSwgSVVuaWNvZGVTZXJ2aWNlLCBMb2dMZXZlbEVudW0sIElUZXJtaW5hbE9wdGlvbnMsIElPc2NMaW5rU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJbnN0YW50aWF0aW9uU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9JbnN0YW50aWF0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBMb2dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0xvZ1NlcnZpY2UnO1xuaW1wb3J0IHsgQnVmZmVyU2VydmljZSwgTUlOSU1VTV9DT0xTLCBNSU5JTVVNX1JPV1MgfSBmcm9tICdjb21tb24vc2VydmljZXMvQnVmZmVyU2VydmljZSc7XG5pbXBvcnQgeyBPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9PcHRpb25zU2VydmljZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSwgSUF0dHJpYnV0ZURhdGEsIElDb3JlVGVybWluYWwsIElTY3JvbGxFdmVudCwgU2Nyb2xsU291cmNlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IENvcmVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0NvcmVTZXJ2aWNlJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50LCBmb3J3YXJkRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IENvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBVbmljb2RlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Vbmljb2RlU2VydmljZSc7XG5pbXBvcnQgeyBDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZSc7XG5pbXBvcnQgeyB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSB9IGZyb20gJ2NvbW1vbi9XaW5kb3dzTW9kZSc7XG5pbXBvcnQgeyBJRnVuY3Rpb25JZGVudGlmaWVyLCBJUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tICdjb21tb24vSW5wdXRIYW5kbGVyJztcbmltcG9ydCB7IFdyaXRlQnVmZmVyIH0gZnJvbSAnY29tbW9uL2lucHV0L1dyaXRlQnVmZmVyJztcbmltcG9ydCB7IE9zY0xpbmtTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL09zY0xpbmtTZXJ2aWNlJztcblxuLy8gT25seSB0cmlnZ2VyIHRoaXMgd2FybmluZyBhIHNpbmdsZSB0aW1lIHBlciBzZXNzaW9uXG5sZXQgaGFzV3JpdGVTeW5jV2FybkhhcHBlbmVkID0gZmFsc2U7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb3JlVGVybWluYWwgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUNvcmVUZXJtaW5hbCB7XG4gIHByb3RlY3RlZCByZWFkb25seSBfaW5zdGFudGlhdGlvblNlcnZpY2U6IElJbnN0YW50aWF0aW9uU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9jaGFyc2V0U2VydmljZTogSUNoYXJzZXRTZXJ2aWNlO1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX29zY0xpbmtTZXJ2aWNlOiBJT3NjTGlua1NlcnZpY2U7XG5cbiAgcHVibGljIHJlYWRvbmx5IGNvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlO1xuICBwdWJsaWMgcmVhZG9ubHkgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZTtcbiAgcHVibGljIHJlYWRvbmx5IHVuaWNvZGVTZXJ2aWNlOiBJVW5pY29kZVNlcnZpY2U7XG4gIHB1YmxpYyByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlO1xuXG4gIHByb3RlY3RlZCBfaW5wdXRIYW5kbGVyOiBJbnB1dEhhbmRsZXI7XG4gIHByaXZhdGUgX3dyaXRlQnVmZmVyOiBXcml0ZUJ1ZmZlcjtcbiAgcHJpdmF0ZSBfd2luZG93c1dyYXBwaW5nSGV1cmlzdGljcyA9IHRoaXMucmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlKCkpO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQmluYXJ5ID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJpbmFyeSA9IHRoaXMuX29uQmluYXJ5LmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkRhdGEgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uRGF0YSA9IHRoaXMuX29uRGF0YS5ldmVudDtcbiAgcHJvdGVjdGVkIF9vbkxpbmVGZWVkID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25MaW5lRmVlZCA9IHRoaXMuX29uTGluZUZlZWQuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVzaXplID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlc2l6ZSA9IHRoaXMuX29uUmVzaXplLmV2ZW50O1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX29uV3JpdGVQYXJzZWQgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbldyaXRlUGFyc2VkID0gdGhpcy5fb25Xcml0ZVBhcnNlZC5ldmVudDtcblxuICAvKipcbiAgICogSW50ZXJuYWxseSB3ZSB0cmFjayB0aGUgc291cmNlIG9mIHRoZSBzY3JvbGwgYnV0IHRoaXMgaXMgbWVhbmluZ2xlc3Mgb3V0c2lkZSB0aGUgbGlicmFyeSBzb1xuICAgKiBpdCdzIGZpbHRlcmVkIG91dC5cbiAgICovXG4gIHByb3RlY3RlZCBfb25TY3JvbGxBcGk/OiBFdmVudEVtaXR0ZXI8bnVtYmVyLCB2b2lkPjtcbiAgcHJvdGVjdGVkIF9vblNjcm9sbCA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxJU2Nyb2xsRXZlbnQsIHZvaWQ+KCkpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXIsIHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuX29uU2Nyb2xsQXBpKSB7XG4gICAgICB0aGlzLl9vblNjcm9sbEFwaSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxudW1iZXIsIHZvaWQ+KCkpO1xuICAgICAgdGhpcy5fb25TY3JvbGwuZXZlbnQoZXYgPT4ge1xuICAgICAgICB0aGlzLl9vblNjcm9sbEFwaT8uZmlyZShldi5wb3NpdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX29uU2Nyb2xsQXBpLmV2ZW50O1xuICB9XG5cbiAgcHVibGljIGdldCBjb2xzKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7IH1cbiAgcHVibGljIGdldCByb3dzKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7IH1cbiAgcHVibGljIGdldCBidWZmZXJzKCk6IElCdWZmZXJTZXQgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzOyB9XG4gIHB1YmxpYyBnZXQgb3B0aW9ucygpOiBSZXF1aXJlZDxJVGVybWluYWxPcHRpb25zPiB7IHJldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnM7IH1cbiAgcHVibGljIHNldCBvcHRpb25zKG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBvcHRpb25zOiBQYXJ0aWFsPElUZXJtaW5hbE9wdGlvbnM+XG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBTZXR1cCBhbmQgaW5pdGlhbGl6ZSBzZXJ2aWNlc1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlID0gbmV3IEluc3RhbnRpYXRpb25TZXJ2aWNlKCk7XG4gICAgdGhpcy5vcHRpb25zU2VydmljZSA9IHRoaXMucmVnaXN0ZXIobmV3IE9wdGlvbnNTZXJ2aWNlKG9wdGlvbnMpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElPcHRpb25zU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZSA9IHRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQnVmZmVyU2VydmljZSkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUJ1ZmZlclNlcnZpY2UsIHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKExvZ1NlcnZpY2UpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElMb2dTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlKTtcbiAgICB0aGlzLmNvcmVTZXJ2aWNlID0gdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb3JlU2VydmljZSkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNvcmVTZXJ2aWNlLCB0aGlzLmNvcmVTZXJ2aWNlKTtcbiAgICB0aGlzLmNvcmVNb3VzZVNlcnZpY2UgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVNb3VzZVNlcnZpY2UpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlTW91c2VTZXJ2aWNlLCB0aGlzLmNvcmVNb3VzZVNlcnZpY2UpO1xuICAgIHRoaXMudW5pY29kZVNlcnZpY2UgPSB0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFVuaWNvZGVTZXJ2aWNlKSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJVW5pY29kZVNlcnZpY2UsIHRoaXMudW5pY29kZVNlcnZpY2UpO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQ2hhcnNldFNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNoYXJzZXRTZXJ2aWNlLCB0aGlzLl9jaGFyc2V0U2VydmljZSk7XG4gICAgdGhpcy5fb3NjTGlua1NlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShPc2NMaW5rU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJT3NjTGlua1NlcnZpY2UsIHRoaXMuX29zY0xpbmtTZXJ2aWNlKTtcblxuXG4gICAgLy8gUmVnaXN0ZXIgaW5wdXQgaGFuZGxlciBhbmQgaGFuZGxlL2ZvcndhcmQgZXZlbnRzXG4gICAgdGhpcy5faW5wdXRIYW5kbGVyID0gdGhpcy5yZWdpc3RlcihuZXcgSW5wdXRIYW5kbGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLCB0aGlzLmNvcmVTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlLCB0aGlzLm9wdGlvbnNTZXJ2aWNlLCB0aGlzLl9vc2NMaW5rU2VydmljZSwgdGhpcy5jb3JlTW91c2VTZXJ2aWNlLCB0aGlzLnVuaWNvZGVTZXJ2aWNlKSk7XG4gICAgdGhpcy5yZWdpc3Rlcihmb3J3YXJkRXZlbnQodGhpcy5faW5wdXRIYW5kbGVyLm9uTGluZUZlZWQsIHRoaXMuX29uTGluZUZlZWQpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlcik7XG5cbiAgICAvLyBTZXR1cCBsaXN0ZW5lcnNcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplLCB0aGlzLl9vblJlc2l6ZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoZm9yd2FyZEV2ZW50KHRoaXMuY29yZVNlcnZpY2Uub25EYXRhLCB0aGlzLl9vbkRhdGEpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLmNvcmVTZXJ2aWNlLm9uQmluYXJ5LCB0aGlzLl9vbkJpbmFyeSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5jb3JlU2VydmljZS5vblJlcXVlc3RTY3JvbGxUb0JvdHRvbSgoKSA9PiB0aGlzLnNjcm9sbFRvQm90dG9tKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuY29yZVNlcnZpY2Uub25Vc2VySW5wdXQoKCkgPT4gIHRoaXMuX3dyaXRlQnVmZmVyLmhhbmRsZVVzZXJJbnB1dCgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoWyd3aW5kb3dzTW9kZScsICd3aW5kb3dzUHR5J10sICgpID0+IHRoaXMuX2hhbmRsZVdpbmRvd3NQdHlPcHRpb25DaGFuZ2UoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblNjcm9sbChldmVudCA9PiB7XG4gICAgICB0aGlzLl9vblNjcm9sbC5maXJlKHsgcG9zaXRpb246IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLCBzb3VyY2U6IFNjcm9sbFNvdXJjZS5URVJNSU5BTCB9KTtcbiAgICAgIHRoaXMuX2lucHV0SGFuZGxlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgfSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uU2Nyb2xsKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoeyBwb3NpdGlvbjogdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsIHNvdXJjZTogU2Nyb2xsU291cmNlLlRFUk1JTkFMIH0pO1xuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB9KSk7XG5cbiAgICAvLyBTZXR1cCBXcml0ZUJ1ZmZlclxuICAgIHRoaXMuX3dyaXRlQnVmZmVyID0gdGhpcy5yZWdpc3RlcihuZXcgV3JpdGVCdWZmZXIoKGRhdGEsIHByb21pc2VSZXN1bHQpID0+IHRoaXMuX2lucHV0SGFuZGxlci5wYXJzZShkYXRhLCBwcm9taXNlUmVzdWx0KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoZm9yd2FyZEV2ZW50KHRoaXMuX3dyaXRlQnVmZmVyLm9uV3JpdGVQYXJzZWQsIHRoaXMuX29uV3JpdGVQYXJzZWQpKTtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShkYXRhLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGUgZGF0YSB0byB0ZXJtaW5hbCBzeW5jaG9ub3VzbHkuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVucmVsaWFibGUgd2l0aCBhc3luYyBwYXJzZXIgaGFuZGxlcnMsIHRodXMgc2hvdWxkIG5vdFxuICAgKiBiZSB1c2VkIGFueW1vcmUuIElmIHlvdSBuZWVkIGJsb2NraW5nIHNlbWFudGljcyBvbiBkYXRhIGlucHV0IGNvbnNpZGVyXG4gICAqIGB3cml0ZWAgd2l0aCBhIGNhbGxiYWNrIGluc3RlYWQuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFVucmVsaWFibGUsIHdpbGwgYmUgcmVtb3ZlZCBzb29uLlxuICAgKi9cbiAgcHVibGljIHdyaXRlU3luYyhkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBtYXhTdWJzZXF1ZW50Q2FsbHM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTiAmJiAhaGFzV3JpdGVTeW5jV2FybkhhcHBlbmVkKSB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLndhcm4oJ3dyaXRlU3luYyBpcyB1bnJlbGlhYmxlIGFuZCB3aWxsIGJlIHJlbW92ZWQgc29vbi4nKTtcbiAgICAgIGhhc1dyaXRlU3luY1dhcm5IYXBwZW5lZCA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3luYyhkYXRhLCBtYXhTdWJzZXF1ZW50Q2FsbHMpO1xuICB9XG5cbiAgcHVibGljIGlucHV0KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChkYXRhLCB3YXNVc2VySW5wdXQpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHggPSBNYXRoLm1heCh4LCBNSU5JTVVNX0NPTFMpO1xuICAgIHkgPSBNYXRoLm1heCh5LCBNSU5JTVVNX1JPV1MpO1xuXG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoeCwgeSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSB0ZXJtaW5hbCBkb3duIDEgcm93LCBjcmVhdGluZyBhIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBlcmFzZUF0dHIgVGhlIGF0dHJpYnV0ZSBkYXRhIHRvIHVzZSB0aGUgZm9yIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBpc1dyYXBwZWQgV2hldGhlciB0aGUgbmV3IGxpbmUgaXMgd3JhcHBlZCBmcm9tIHRoZSBwcmV2aW91cyBsaW5lLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbChlcmFzZUF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKGVyYXNlQXR0ciwgaXNXcmFwcGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBkaXNwIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gc2Nyb2xsIGRvd24gKG5lZ2F0aXZlIHNjcm9sbCB1cCkuXG4gICAqIEBwYXJhbSBzdXBwcmVzc1Njcm9sbEV2ZW50IERvbid0IGVtaXQgdGhlIHNjcm9sbCBldmVudCBhcyBzY3JvbGxMaW5lcy4gVGhpcyBpcyB1c2VkIHRvIGF2b2lkXG4gICAqIHVud2FudGVkIGV2ZW50cyBiZWluZyBoYW5kbGVkIGJ5IHRoZSB2aWV3cG9ydCB3aGVuIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gdGhlIHZpZXdwb3J0XG4gICAqIG9yaWdpbmFsbHkuXG4gICAqIEBwYXJhbSBzb3VyY2UgV2hpY2ggY29tcG9uZW50IHRoZSBldmVudCBjYW1lIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGluZXMoZGlzcDogbnVtYmVyLCBzdXBwcmVzc1Njcm9sbEV2ZW50PzogYm9vbGVhbiwgc291cmNlPzogU2Nyb2xsU291cmNlKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxMaW5lcyhkaXNwLCBzdXBwcmVzc1Njcm9sbEV2ZW50LCBzb3VyY2UpO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFBhZ2VzKHBhZ2VDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zY3JvbGxMaW5lcyhwYWdlQ291bnQgKiAodGhpcy5yb3dzIC0gMSkpO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvVG9wKCk6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsTGluZXMoLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgRVNDIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBEQ1MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBDU0kgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQWRkIGhhbmRsZXIgZm9yIE9TQyBlc2NhcGUgc2VxdWVuY2UuIFNlZSB4dGVybS5kLnRzIGZvciBkZXRhaWxzLiAqL1xuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXR1cCgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVXaW5kb3dzUHR5T3B0aW9uQ2hhbmdlKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5faW5wdXRIYW5kbGVyLnJlc2V0KCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5jb3JlU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuY29yZU1vdXNlU2VydmljZS5yZXNldCgpO1xuICB9XG5cblxuICBwcml2YXRlIF9oYW5kbGVXaW5kb3dzUHR5T3B0aW9uQ2hhbmdlKCk6IHZvaWQge1xuICAgIGxldCB2YWx1ZSA9IGZhbHNlO1xuICAgIGNvbnN0IHdpbmRvd3NQdHkgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eTtcbiAgICBpZiAod2luZG93c1B0eSAmJiB3aW5kb3dzUHR5LmJ1aWxkTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgd2luZG93c1B0eS5idWlsZE51bWJlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9ICEhKHdpbmRvd3NQdHkuYmFja2VuZCA9PT0gJ2NvbnB0eScgJiYgd2luZG93c1B0eS5idWlsZE51bWJlciA8IDIxMzc2KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZSkge1xuICAgICAgdmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX2VuYWJsZVdpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2luZG93c1dyYXBwaW5nSGV1cmlzdGljcy5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZW5hYmxlV2luZG93c1dyYXBwaW5nSGV1cmlzdGljcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3dpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MudmFsdWUpIHtcbiAgICAgIGNvbnN0IGRpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMub25MaW5lRmVlZCh1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZS5iaW5kKG51bGwsIHRoaXMuX2J1ZmZlclNlcnZpY2UpKSk7XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdIJyB9LCAoKSA9PiB7XG4gICAgICAgIHVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlKHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLl93aW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzLnZhbHVlID0gdG9EaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIGRpc3Bvc2FibGVzKSB7XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5pbnRlcmZhY2UgSUxpc3RlbmVyPFQsIFUgPSB2b2lkPiB7XG4gIChhcmcxOiBULCBhcmcyOiBVKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnQ8VCwgVSA9IHZvaWQ+IHtcbiAgKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KTogSURpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50RW1pdHRlcjxULCBVID0gdm9pZD4ge1xuICBldmVudDogSUV2ZW50PFQsIFU+O1xuICBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkO1xuICBkaXNwb3NlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8VCwgVSA9IHZvaWQ+IGltcGxlbWVudHMgSUV2ZW50RW1pdHRlcjxULCBVPiB7XG4gIHByaXZhdGUgX2xpc3RlbmVyczogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgcHJpdmF0ZSBfZXZlbnQ/OiBJRXZlbnQ8VCwgVT47XG4gIHByaXZhdGUgX2Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldCBldmVudCgpOiBJRXZlbnQ8VCwgVT4ge1xuICAgIGlmICghdGhpcy5fZXZlbnQpIHtcbiAgICAgIHRoaXMuX2V2ZW50ID0gKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KSA9PiB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgY29uc3QgZGlzcG9zYWJsZSA9IHtcbiAgICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tpXSA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgfVxuXG4gIHB1YmxpYyBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkIHtcbiAgICBjb25zdCBxdWV1ZTogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgcXVldWUucHVzaCh0aGlzLl9saXN0ZW5lcnNbaV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWV1ZVtpXS5jYWxsKHVuZGVmaW5lZCwgYXJnMSwgYXJnMik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckxpc3RlbmVycygpO1xuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhckxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcndhcmRFdmVudDxUPihmcm9tOiBJRXZlbnQ8VD4sIHRvOiBJRXZlbnRFbWl0dGVyPFQ+KTogSURpc3Bvc2FibGUge1xuICByZXR1cm4gZnJvbShlID0+IHRvLmZpcmUoZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuQW5kU3Vic2NyaWJlPFQ+KGV2ZW50OiBJRXZlbnQ8VD4sIGhhbmRsZXI6IChlOiBUIHwgdW5kZWZpbmVkKSA9PiBhbnkpOiBJRGlzcG9zYWJsZSB7XG4gIGhhbmRsZXIodW5kZWZpbmVkKTtcbiAgcmV0dXJuIGV2ZW50KGUgPT4gaGFuZGxlcihlKSk7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJSW5wdXRIYW5kbGVyLCBJQXR0cmlidXRlRGF0YSwgSURpc3Bvc2FibGUsIElXaW5kb3dPcHRpb25zLCBJQ29sb3JFdmVudCwgSVBhcnNlU3RhY2ssIENvbG9ySW5kZXgsIENvbG9yUmVxdWVzdFR5cGUsIFNwZWNpYWxDb2xvckluZGV4IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEMwLCBDMSB9IGZyb20gJ2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcyc7XG5pbXBvcnQgeyBDSEFSU0VUUywgREVGQVVMVF9DSEFSU0VUIH0gZnJvbSAnY29tbW9uL2RhdGEvQ2hhcnNldHMnO1xuaW1wb3J0IHsgRXNjYXBlU2VxdWVuY2VQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0VzY2FwZVNlcXVlbmNlUGFyc2VyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IFN0cmluZ1RvVXRmMzIsIHN0cmluZ0Zyb21Db2RlUG9pbnQsIFV0ZjhUb1V0ZjMyIH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IEJ1ZmZlckxpbmUsIERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSUVzY2FwZVNlcXVlbmNlUGFyc2VyLCBJUGFyYW1zLCBJRnVuY3Rpb25JZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBOVUxMX0NFTExfQ09ERSwgTlVMTF9DRUxMX1dJRFRILCBBdHRyaWJ1dGVzLCBGZ0ZsYWdzLCBCZ0ZsYWdzLCBDb250ZW50LCBVbmRlcmxpbmVTdHlsZSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IElDb3JlU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSwgSUxvZ1NlcnZpY2UsIElDb3JlTW91c2VTZXJ2aWNlLCBJQ2hhcnNldFNlcnZpY2UsIElVbmljb2RlU2VydmljZSwgTG9nTGV2ZWxFbnVtLCBJT3NjTGlua1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgVW5pY29kZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvVW5pY29kZVNlcnZpY2UnO1xuaW1wb3J0IHsgT3NjSGFuZGxlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvT3NjUGFyc2VyJztcbmltcG9ydCB7IERjc0hhbmRsZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBwYXJzZUNvbG9yIH0gZnJvbSAnY29tbW9uL2lucHV0L1hQYXJzZUNvbG9yJztcblxuLyoqXG4gKiBNYXAgY29sbGVjdCB0byBnbGV2ZWwuIFVzZWQgaW4gYHNlbGVjdENoYXJzZXRgLlxuICovXG5jb25zdCBHTEVWRUw6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7ICcoJzogMCwgJyknOiAxLCAnKic6IDIsICcrJzogMywgJy0nOiAxLCAnLic6IDIgfTtcblxuLyoqXG4gKiBWVCBjb21tYW5kcyBkb25lIGJ5IHRoZSBwYXJzZXIgLSBGSVhNRTogbW92ZSB0aGlzIHRvIHRoZSBwYXJzZXI/XG4gKi9cbi8vIEB2dDogI1kgICBFU0MgICBDU0kgICBcIkNvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlclwiICAgXCJFU0MgW1wiICAgXCJTdGFydCBvZiBhIENTSSBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIE9TQyAgIFwiT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kXCIgICAgICBcIkVTQyBdXCIgICBcIlN0YXJ0IG9mIGFuIE9TQyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIERDUyAgIFwiRGV2aWNlIENvbnRyb2wgU3RyaW5nXCIgICAgICAgICBcIkVTQyBQXCIgICBcIlN0YXJ0IG9mIGEgRENTIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgRVNDICAgU1QgICAgXCJTdHJpbmcgVGVybWluYXRvclwiICAgICAgICAgICAgIFwiRVNDIFxcXCIgICBcIlRlcm1pbmF0b3IgdXNlZCBmb3Igc3RyaW5nIHR5cGUgc2VxdWVuY2VzLlwiXG4vLyBAdnQ6ICNZICAgRVNDICAgUE0gICAgXCJQcml2YWN5IE1lc3NhZ2VcIiAgICAgICAgICAgICAgIFwiRVNDIF5cIiAgIFwiU3RhcnQgb2YgYSBwcml2YWN5IG1lc3NhZ2UuXCJcbi8vIEB2dDogI1kgICBFU0MgICBBUEMgICBcIkFwcGxpY2F0aW9uIFByb2dyYW0gQ29tbWFuZFwiICAgXCJFU0MgX1wiICAgXCJTdGFydCBvZiBhbiBBUEMgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBDMSAgICBDU0kgICBcIkNvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlclwiICAgXCJcXHg5QlwiICAgIFwiU3RhcnQgb2YgYSBDU0kgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBDMSAgICBPU0MgICBcIk9wZXJhdGluZyBTeXN0ZW0gQ29tbWFuZFwiICAgICAgXCJcXHg5RFwiICAgIFwiU3RhcnQgb2YgYW4gT1NDIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgRENTICAgXCJEZXZpY2UgQ29udHJvbCBTdHJpbmdcIiAgICAgICAgIFwiXFx4OTBcIiAgICBcIlN0YXJ0IG9mIGEgRENTIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgU1QgICAgXCJTdHJpbmcgVGVybWluYXRvclwiICAgICAgICAgICAgIFwiXFx4OUNcIiAgICBcIlRlcm1pbmF0b3IgdXNlZCBmb3Igc3RyaW5nIHR5cGUgc2VxdWVuY2VzLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgUE0gICAgXCJQcml2YWN5IE1lc3NhZ2VcIiAgICAgICAgICAgICAgIFwiXFx4OUVcIiAgICBcIlN0YXJ0IG9mIGEgcHJpdmFjeSBtZXNzYWdlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgQVBDICAgXCJBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmRcIiAgIFwiXFx4OUZcIiAgICBcIlN0YXJ0IG9mIGFuIEFQQyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEMwICAgIE5VTCAgIFwiTnVsbFwiICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcMCwgXFx4MDBcIiAgXCJOVUwgaXMgaWdub3JlZC5cIlxuLy8gQHZ0OiAjWSAgIEMwICAgIEVTQyAgIFwiRXNjYXBlXCIgICAgICAgICAgICAgICAgICAgICAgICBcIlxcZSwgXFx4MUJcIiAgXCJTdGFydCBvZiBhIHNlcXVlbmNlLiBDYW5jZWxzIGFueSBvdGhlciBzZXF1ZW5jZS5cIlxuXG4vKipcbiAqIERvY3VtZW50IHh0ZXJtIFZUIGZlYXR1cmVzIGhlcmUgdGhhdCBhcmUgY3VycmVudGx5IHVuc3VwcG9ydGVkXG4gKi9cbi8vIEB2dDogI0VbU3VwcG9ydGVkIHZpYSBAeHRlcm0vYWRkb24taW1hZ2UuXSAgRENTICAgU0lYRUwgICAgICAgXCJTSVhFTCBHcmFwaGljc1wiICAgICAgICAgIFwiRENTIFBzIDsgUHMgOyBQcyA7IHEgXHRQdCBTVFwiICBcIkRyYXcgU0lYRUwgaW1hZ2UuXCJcbi8vIEB2dDogI04gIERDUyAgIERFQ1VESyAgICAgIFwiVXNlciBEZWZpbmVkIEtleXNcIiAgICAgICBcIkRDUyBQcyA7IFBzIFxcfCBQdCBTVFwiICAgICAgICAgICBcIkRlZmluaXRpb25zIGZvciB1c2VyLWRlZmluZWQga2V5cy5cIlxuLy8gQHZ0OiAjTiAgRENTICAgWFRHRVRUQ0FQICAgXCJSZXF1ZXN0IFRlcm1pbmZvIFN0cmluZ1wiIFwiRENTICsgcSBQdCBTVFwiICAgICAgICAgICAgICAgICBcIlJlcXVlc3QgVGVybWluZm8gU3RyaW5nLlwiXG4vLyBAdnQ6ICNOICBEQ1MgICBYVFNFVFRDQVAgICBcIlNldCBUZXJtaW5mbyBEYXRhXCIgICAgICAgXCJEQ1MgKyBwIFB0IFNUXCIgICAgICAgICAgICAgICAgIFwiU2V0IFRlcm1pbmZvIERhdGEuXCJcbi8vIEB2dDogI04gIE9TQyAgIDEgICAgICAgICAgIFwiU2V0IEljb24gTmFtZVwiICAgICAgICAgICBcIk9TQyAxIDsgUHQgQkVMXCIgICAgICAgICAgICAgICAgXCJTZXQgaWNvbiBuYW1lLlwiXG5cbi8qKlxuICogTWF4IGxlbmd0aCBvZiB0aGUgVVRGMzIgaW5wdXQgYnVmZmVyLiBSZWFsIG1lbW9yeSBjb25zdW1wdGlvbiBpcyA0IHRpbWVzIGhpZ2hlci5cbiAqL1xuY29uc3QgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCA9IDEzMTA3MjtcblxuLyoqXG4gKiBMaW1pdCBsZW5ndGggb2YgdGl0bGUgYW5kIGljb24gbmFtZSBzdGFja3MuXG4gKi9cbmNvbnN0IFNUQUNLX0xJTUlUID0gMTA7XG5cbi8vIG1hcCBwYXJhbXMgdG8gd2luZG93IG9wdGlvblxuZnVuY3Rpb24gcGFyYW1Ub1dpbmRvd09wdGlvbihuOiBudW1iZXIsIG9wdHM6IElXaW5kb3dPcHRpb25zKTogYm9vbGVhbiB7XG4gIGlmIChuID4gMjQpIHtcbiAgICByZXR1cm4gb3B0cy5zZXRXaW5MaW5lcyB8fCBmYWxzZTtcbiAgfVxuICBzd2l0Y2ggKG4pIHtcbiAgICBjYXNlIDE6IHJldHVybiAhIW9wdHMucmVzdG9yZVdpbjtcbiAgICBjYXNlIDI6IHJldHVybiAhIW9wdHMubWluaW1pemVXaW47XG4gICAgY2FzZSAzOiByZXR1cm4gISFvcHRzLnNldFdpblBvc2l0aW9uO1xuICAgIGNhc2UgNDogcmV0dXJuICEhb3B0cy5zZXRXaW5TaXplUGl4ZWxzO1xuICAgIGNhc2UgNTogcmV0dXJuICEhb3B0cy5yYWlzZVdpbjtcbiAgICBjYXNlIDY6IHJldHVybiAhIW9wdHMubG93ZXJXaW47XG4gICAgY2FzZSA3OiByZXR1cm4gISFvcHRzLnJlZnJlc2hXaW47XG4gICAgY2FzZSA4OiByZXR1cm4gISFvcHRzLnNldFdpblNpemVDaGFycztcbiAgICBjYXNlIDk6IHJldHVybiAhIW9wdHMubWF4aW1pemVXaW47XG4gICAgY2FzZSAxMDogcmV0dXJuICEhb3B0cy5mdWxsc2NyZWVuV2luO1xuICAgIGNhc2UgMTE6IHJldHVybiAhIW9wdHMuZ2V0V2luU3RhdGU7XG4gICAgY2FzZSAxMzogcmV0dXJuICEhb3B0cy5nZXRXaW5Qb3NpdGlvbjtcbiAgICBjYXNlIDE0OiByZXR1cm4gISFvcHRzLmdldFdpblNpemVQaXhlbHM7XG4gICAgY2FzZSAxNTogcmV0dXJuICEhb3B0cy5nZXRTY3JlZW5TaXplUGl4ZWxzO1xuICAgIGNhc2UgMTY6IHJldHVybiAhIW9wdHMuZ2V0Q2VsbFNpemVQaXhlbHM7XG4gICAgY2FzZSAxODogcmV0dXJuICEhb3B0cy5nZXRXaW5TaXplQ2hhcnM7XG4gICAgY2FzZSAxOTogcmV0dXJuICEhb3B0cy5nZXRTY3JlZW5TaXplQ2hhcnM7XG4gICAgY2FzZSAyMDogcmV0dXJuICEhb3B0cy5nZXRJY29uVGl0bGU7XG4gICAgY2FzZSAyMTogcmV0dXJuICEhb3B0cy5nZXRXaW5UaXRsZTtcbiAgICBjYXNlIDIyOiByZXR1cm4gISFvcHRzLnB1c2hUaXRsZTtcbiAgICBjYXNlIDIzOiByZXR1cm4gISFvcHRzLnBvcFRpdGxlO1xuICAgIGNhc2UgMjQ6IHJldHVybiAhIW9wdHMuc2V0V2luTGluZXM7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZW51bSBXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUge1xuICBHRVRfV0lOX1NJWkVfUElYRUxTID0gMCxcbiAgR0VUX0NFTExfU0laRV9QSVhFTFMgPSAxXG59XG5cbi8vIGNyZWF0ZSBhIHdhcm5pbmcgbG9nIGlmIGFuIGFzeW5jIGhhbmRsZXIgdGFrZXMgbG9uZ2VyIHRoYW4gdGhlIGxpbWl0IChpbiBtcylcbmNvbnN0IFNMT1dfQVNZTkNfTElNSVQgPSA1MDAwO1xuXG4vLyBXb3JrIHZhcmlhYmxlcyB0byBhdm9pZCBnYXJiYWdlIGNvbGxlY3Rpb25cbmxldCAkdGVtcCA9IDA7XG5cbi8qKlxuICogVGhlIHRlcm1pbmFsJ3Mgc3RhbmRhcmQgaW1wbGVtZW50YXRpb24gb2YgSUlucHV0SGFuZGxlciwgdGhpcyBoYW5kbGVzIGFsbFxuICogaW5wdXQgZnJvbSB0aGUgUGFyc2VyLlxuICpcbiAqIFJlZmVyIHRvIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbCB0byB1bmRlcnN0YW5kXG4gKiBlYWNoIGZ1bmN0aW9uJ3MgaGVhZGVyIGNvbW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEhhbmRsZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUlucHV0SGFuZGxlciB7XG4gIHByaXZhdGUgX3BhcnNlQnVmZmVyOiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheSg0MDk2KTtcbiAgcHJpdmF0ZSBfc3RyaW5nRGVjb2RlcjogU3RyaW5nVG9VdGYzMiA9IG5ldyBTdHJpbmdUb1V0ZjMyKCk7XG4gIHByaXZhdGUgX3V0ZjhEZWNvZGVyOiBVdGY4VG9VdGYzMiA9IG5ldyBVdGY4VG9VdGYzMigpO1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcbiAgcHJpdmF0ZSBfd2luZG93VGl0bGUgPSAnJztcbiAgcHJpdmF0ZSBfaWNvbk5hbWUgPSAnJztcbiAgcHJpdmF0ZSBfZGlydHlSb3dUcmFja2VyOiBJRGlydHlSb3dUcmFja2VyO1xuICBwcm90ZWN0ZWQgX3dpbmRvd1RpdGxlU3RhY2s6IHN0cmluZ1tdID0gW107XG4gIHByb3RlY3RlZCBfaWNvbk5hbWVTdGFjazogc3RyaW5nW10gPSBbXTtcblxuICBwcml2YXRlIF9jdXJBdHRyRGF0YTogSUF0dHJpYnV0ZURhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICBwdWJsaWMgZ2V0QXR0ckRhdGEoKTogSUF0dHJpYnV0ZURhdGEgeyByZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGE7IH1cbiAgcHJpdmF0ZSBfZXJhc2VBdHRyRGF0YUludGVybmFsOiBJQXR0cmlidXRlRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG5cbiAgcHJpdmF0ZSBfYWN0aXZlQnVmZmVyOiBJQnVmZmVyO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdEJlbGwgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlcXVlc3RCZWxsID0gdGhpcy5fb25SZXF1ZXN0QmVsbC5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXF1ZXN0UmVmcmVzaFJvd3MgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyLCBudW1iZXI+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0UmVmcmVzaFJvd3MgPSB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXF1ZXN0UmVzZXQgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlcXVlc3RSZXNldCA9IHRoaXMuX29uUmVxdWVzdFJlc2V0LmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlcXVlc3RTZW5kRm9jdXMgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlcXVlc3RTZW5kRm9jdXMgPSB0aGlzLl9vblJlcXVlc3RTZW5kRm9jdXMuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlcXVlc3RTeW5jU2Nyb2xsQmFyID0gdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8V2luZG93c09wdGlvbnNSZXBvcnRUeXBlPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0ID0gdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZXZlbnQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25BMTF5Q2hhciA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25BMTF5Q2hhciA9IHRoaXMuX29uQTExeUNoYXIuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQTExeVRhYiA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25BMTF5VGFiID0gdGhpcy5fb25BMTF5VGFiLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkN1cnNvck1vdmUgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkN1cnNvck1vdmUgPSB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uTGluZUZlZWQgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkxpbmVGZWVkID0gdGhpcy5fb25MaW5lRmVlZC5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25TY3JvbGwgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uU2Nyb2xsID0gdGhpcy5fb25TY3JvbGwuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uVGl0bGVDaGFuZ2UgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uVGl0bGVDaGFuZ2UgPSB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkNvbG9yID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPElDb2xvckV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQ29sb3IgPSB0aGlzLl9vbkNvbG9yLmV2ZW50O1xuXG4gIHByaXZhdGUgX3BhcnNlU3RhY2s6IElQYXJzZVN0YWNrID0ge1xuICAgIHBhdXNlZDogZmFsc2UsXG4gICAgY3Vyc29yU3RhcnRYOiAwLFxuICAgIGN1cnNvclN0YXJ0WTogMCxcbiAgICBkZWNvZGVkTGVuZ3RoOiAwLFxuICAgIHBvc2l0aW9uOiAwXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2hhcnNldFNlcnZpY2U6IElDaGFyc2V0U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3NjTGlua1NlcnZpY2U6IElPc2NMaW5rU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlTW91c2VTZXJ2aWNlOiBJQ29yZU1vdXNlU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF91bmljb2RlU2VydmljZTogSVVuaWNvZGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3BhcnNlcjogSUVzY2FwZVNlcXVlbmNlUGFyc2VyID0gbmV3IEVzY2FwZVNlcXVlbmNlUGFyc2VyKClcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3BhcnNlcik7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyID0gbmV3IERpcnR5Um93VHJhY2tlcih0aGlzLl9idWZmZXJTZXJ2aWNlKTtcblxuICAgIC8vIFRyYWNrIHByb3BlcnRpZXMgdXNlZCBpbiBwZXJmb3JtYW5jZSBjcml0aWNhbCBjb2RlIG1hbnVhbGx5IHRvIGF2b2lkIHVzaW5nIHNsb3cgZ2V0dGVyc1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoZSA9PiB0aGlzLl9hY3RpdmVCdWZmZXIgPSBlLmFjdGl2ZUJ1ZmZlcikpO1xuXG4gICAgLyoqXG4gICAgICogY3VzdG9tIGZhbGxiYWNrIGhhbmRsZXJzXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXJGYWxsYmFjaygoaWRlbnQsIHBhcmFtcykgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBDU0kgY29kZTogJywgeyBpZGVudGlmaWVyOiB0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhpZGVudCksIHBhcmFtczogcGFyYW1zLnRvQXJyYXkoKSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlckZhbGxiYWNrKGlkZW50ID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRVNDIGNvZGU6ICcsIHsgaWRlbnRpZmllcjogdGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoaWRlbnQpIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrKGNvZGUgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBFWEVDVVRFIGNvZGU6ICcsIHsgY29kZSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0T3NjSGFuZGxlckZhbGxiYWNrKChpZGVudGlmaWVyLCBhY3Rpb24sIGRhdGEpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gT1NDIGNvZGU6ICcsIHsgaWRlbnRpZmllciwgYWN0aW9uLCBkYXRhIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXREY3NIYW5kbGVyRmFsbGJhY2soKGlkZW50LCBhY3Rpb24sIHBheWxvYWQpID0+IHtcbiAgICAgIGlmIChhY3Rpb24gPT09ICdIT09LJykge1xuICAgICAgICBwYXlsb2FkID0gcGF5bG9hZC50b0FycmF5KCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIERDUyBjb2RlOiAnLCB7IGlkZW50aWZpZXI6IHRoaXMuX3BhcnNlci5pZGVudFRvU3RyaW5nKGlkZW50KSwgYWN0aW9uLCBwYXlsb2FkIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogcHJpbnQgaGFuZGxlclxuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRQcmludEhhbmRsZXIoKGRhdGEsIHN0YXJ0LCBlbmQpID0+IHRoaXMucHJpbnQoZGF0YSwgc3RhcnQsIGVuZCkpO1xuXG4gICAgLyoqXG4gICAgICogQ1NJIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdAJyB9LCBwYXJhbXMgPT4gdGhpcy5pbnNlcnRDaGFycyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyAnLCBmaW5hbDogJ0AnIH0sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbExlZnQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnQScgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yVXAocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdBJyB9LCBwYXJhbXMgPT4gdGhpcy5zY3JvbGxSaWdodChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdCJyB9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JEb3duKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0MnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckZvcndhcmQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnRCcgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQmFja3dhcmQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnRScgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yTmV4dExpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnRicgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yUHJlY2VkaW5nTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdHJyB9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JDaGFyQWJzb2x1dGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnSCcgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yUG9zaXRpb24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnSScgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yRm9yd2FyZFRhYihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdKJyB9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluRGlzcGxheShwYXJhbXMsIGZhbHNlKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ0onIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlSW5EaXNwbGF5KHBhcmFtcywgdHJ1ZSkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0snIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlSW5MaW5lKHBhcmFtcywgZmFsc2UpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPycsIGZpbmFsOiAnSycgfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkxpbmUocGFyYW1zLCB0cnVlKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnTCcgfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0TGluZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnTScgfSwgcGFyYW1zID0+IHRoaXMuZGVsZXRlTGluZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnUCcgfSwgcGFyYW1zID0+IHRoaXMuZGVsZXRlQ2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnUycgfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsVXAocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnVCcgfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdYJyB9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUNoYXJzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ1onIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckJhY2t3YXJkVGFiKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2AnIH0sIHBhcmFtcyA9PiB0aGlzLmNoYXJQb3NBYnNvbHV0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdhJyB9LCBwYXJhbXMgPT4gdGhpcy5oUG9zaXRpb25SZWxhdGl2ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdiJyB9LCBwYXJhbXMgPT4gdGhpcy5yZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnYycgfSwgcGFyYW1zID0+IHRoaXMuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc+JywgZmluYWw6ICdjJyB9LCBwYXJhbXMgPT4gdGhpcy5zZW5kRGV2aWNlQXR0cmlidXRlc1NlY29uZGFyeShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdkJyB9LCBwYXJhbXMgPT4gdGhpcy5saW5lUG9zQWJzb2x1dGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnZScgfSwgcGFyYW1zID0+IHRoaXMudlBvc2l0aW9uUmVsYXRpdmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnZicgfSwgcGFyYW1zID0+IHRoaXMuaFZQb3NpdGlvbihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdnJyB9LCBwYXJhbXMgPT4gdGhpcy50YWJDbGVhcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdoJyB9LCBwYXJhbXMgPT4gdGhpcy5zZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgZmluYWw6ICdoJyB9LCBwYXJhbXMgPT4gdGhpcy5zZXRNb2RlUHJpdmF0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdsJyB9LCBwYXJhbXMgPT4gdGhpcy5yZXNldE1vZGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ2wnIH0sIHBhcmFtcyA9PiB0aGlzLnJlc2V0TW9kZVByaXZhdGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnbScgfSwgcGFyYW1zID0+IHRoaXMuY2hhckF0dHJpYnV0ZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnbicgfSwgcGFyYW1zID0+IHRoaXMuZGV2aWNlU3RhdHVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgZmluYWw6ICduJyB9LCBwYXJhbXMgPT4gdGhpcy5kZXZpY2VTdGF0dXNQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnIScsIGZpbmFsOiAncCcgfSwgcGFyYW1zID0+IHRoaXMuc29mdFJlc2V0KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnICcsIGZpbmFsOiAncScgfSwgcGFyYW1zID0+IHRoaXMuc2V0Q3Vyc29yU3R5bGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAncicgfSwgcGFyYW1zID0+IHRoaXMuc2V0U2Nyb2xsUmVnaW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ3MnIH0sIHBhcmFtcyA9PiB0aGlzLnNhdmVDdXJzb3IocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAndCcgfSwgcGFyYW1zID0+IHRoaXMud2luZG93T3B0aW9ucyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICd1JyB9LCBwYXJhbXMgPT4gdGhpcy5yZXN0b3JlQ3Vyc29yKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnXFwnJywgZmluYWw6ICd9JyB9LCBwYXJhbXMgPT4gdGhpcy5pbnNlcnRDb2x1bW5zKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnXFwnJywgZmluYWw6ICd+JyB9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVDb2x1bW5zKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnXCInLCBmaW5hbDogJ3EnIH0sIHBhcmFtcyA9PiB0aGlzLnNlbGVjdFByb3RlY3RlZChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyQnLCBmaW5hbDogJ3AnIH0sIHBhcmFtcyA9PiB0aGlzLnJlcXVlc3RNb2RlKHBhcmFtcywgdHJ1ZSkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgaW50ZXJtZWRpYXRlczogJyQnLCBmaW5hbDogJ3AnIH0sIHBhcmFtcyA9PiB0aGlzLnJlcXVlc3RNb2RlKHBhcmFtcywgZmFsc2UpKTtcblxuICAgIC8qKlxuICAgICAqIGV4ZWN1dGUgaGFuZGxlclxuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5CRUwsICgpID0+IHRoaXMuYmVsbCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuTEYsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlZULCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5GRiwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQ1IsICgpID0+IHRoaXMuY2FycmlhZ2VSZXR1cm4oKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkJTLCAoKSA9PiB0aGlzLmJhY2tzcGFjZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuSFQsICgpID0+IHRoaXMudGFiKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5TTywgKCkgPT4gdGhpcy5zaGlmdE91dCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuU0ksICgpID0+IHRoaXMuc2hpZnRJbigpKTtcbiAgICAvLyBGSVhNRTogICBXaGF0IGRvIHRvIHdpdGggbWlzc2luZz8gT2xkIGNvZGUganVzdCBhZGRlZCB0aG9zZSB0byBwcmludC5cblxuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5JTkQsICgpID0+IHRoaXMuaW5kZXgoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLk5FTCwgKCkgPT4gdGhpcy5uZXh0TGluZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuSFRTLCAoKSA9PiB0aGlzLnRhYlNldCgpKTtcblxuICAgIC8qKlxuICAgICAqIE9TQyBoYW5kbGVyXG4gICAgICovXG4gICAgLy8gICAwIC0gaWNvbiBuYW1lICsgdGl0bGVcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDAsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4geyB0aGlzLnNldFRpdGxlKGRhdGEpOyB0aGlzLnNldEljb25OYW1lKGRhdGEpOyByZXR1cm4gdHJ1ZTsgfSkpO1xuICAgIC8vICAgMSAtIGljb24gbmFtZVxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMSwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldEljb25OYW1lKGRhdGEpKSk7XG4gICAgLy8gICAyIC0gdGl0bGVcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDIsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRUaXRsZShkYXRhKSkpO1xuICAgIC8vICAgMyAtIHNldCBwcm9wZXJ0eSBYIGluIHRoZSBmb3JtIFwicHJvcD12YWx1ZVwiXG4gICAgLy8gICA0IC0gQ2hhbmdlIENvbG9yIE51bWJlclxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoNCwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldE9yUmVwb3J0SW5kZXhlZENvbG9yKGRhdGEpKSk7XG4gICAgLy8gICA1IC0gQ2hhbmdlIFNwZWNpYWwgQ29sb3IgTnVtYmVyXG4gICAgLy8gICA2IC0gRW5hYmxlL2Rpc2FibGUgU3BlY2lhbCBDb2xvciBOdW1iZXIgY1xuICAgIC8vICAgNyAtIGN1cnJlbnQgZGlyZWN0b3J5PyAobm90IGluIHh0ZXJtIHNwZWMsIHNlZSBodHRwczovL2dpdGxhYi5jb20vZ25hY2htYW4vaXRlcm0yL2lzc3Vlcy8zOTM5KVxuICAgIC8vICAgOCAtIGNyZWF0ZSBoeXBlcmxpbmsgKG5vdCBpbiB4dGVybSBzcGVjLCBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZWdtb250a29iL2ViMTE0Mjk0ZWZiY2Q1YWRiMTk0NGM5ZjNjYjVmZWRhKVxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoOCwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldEh5cGVybGluayhkYXRhKSkpO1xuICAgIC8vICAxMCAtIENoYW5nZSBWVDEwMCB0ZXh0IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMCwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldE9yUmVwb3J0RmdDb2xvcihkYXRhKSkpO1xuICAgIC8vICAxMSAtIENoYW5nZSBWVDEwMCB0ZXh0IGJhY2tncm91bmQgY29sb3IgdG8gUHQuXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMSwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldE9yUmVwb3J0QmdDb2xvcihkYXRhKSkpO1xuICAgIC8vICAxMiAtIENoYW5nZSB0ZXh0IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEyLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHRoaXMuc2V0T3JSZXBvcnRDdXJzb3JDb2xvcihkYXRhKSkpO1xuICAgIC8vICAxMyAtIENoYW5nZSBtb3VzZSBmb3JlZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNCAtIENoYW5nZSBtb3VzZSBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNSAtIENoYW5nZSBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTYgLSBDaGFuZ2UgVGVrdHJvbml4IGJhY2tncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE3IC0gQ2hhbmdlIGhpZ2hsaWdodCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxOCAtIENoYW5nZSBUZWt0cm9uaXggY3Vyc29yIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxOSAtIENoYW5nZSBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgNDYgLSBDaGFuZ2UgTG9nIEZpbGUgdG8gUHQuXG4gICAgLy8gIDUwIC0gU2V0IEZvbnQgdG8gUHQuXG4gICAgLy8gIDUxIC0gcmVzZXJ2ZWQgZm9yIEVtYWNzIHNoZWxsLlxuICAgIC8vICA1MiAtIE1hbmlwdWxhdGUgU2VsZWN0aW9uIERhdGEuXG4gICAgLy8gMTA0IDsgYyAtIFJlc2V0IENvbG9yIE51bWJlciBjLlxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTA0LCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHRoaXMucmVzdG9yZUluZGV4ZWRDb2xvcihkYXRhKSkpO1xuICAgIC8vIDEwNSA7IGMgLSBSZXNldCBTcGVjaWFsIENvbG9yIE51bWJlciBjLlxuICAgIC8vIDEwNiA7IGM7IGYgLSBFbmFibGUvZGlzYWJsZSBTcGVjaWFsIENvbG9yIE51bWJlciBjLlxuICAgIC8vIDExMCAtIFJlc2V0IFZUMTAwIHRleHQgZm9yZWdyb3VuZCBjb2xvci5cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMCwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnJlc3RvcmVGZ0NvbG9yKGRhdGEpKSk7XG4gICAgLy8gMTExIC0gUmVzZXQgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTExLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHRoaXMucmVzdG9yZUJnQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAxMTIgLSBSZXNldCB0ZXh0IGN1cnNvciBjb2xvci5cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMiwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnJlc3RvcmVDdXJzb3JDb2xvcihkYXRhKSkpO1xuICAgIC8vIDExMyAtIFJlc2V0IG1vdXNlIGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTE0IC0gUmVzZXQgbW91c2UgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTUgLSBSZXNldCBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTYgLSBSZXNldCBUZWt0cm9uaXggYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTcgLSBSZXNldCBoaWdobGlnaHQgY29sb3IuXG4gICAgLy8gMTE4IC0gUmVzZXQgVGVrdHJvbml4IGN1cnNvciBjb2xvci5cbiAgICAvLyAxMTkgLSBSZXNldCBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvci5cblxuICAgIC8qKlxuICAgICAqIEVTQyBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJzcnIH0sICgpID0+IHRoaXMuc2F2ZUN1cnNvcigpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICc4JyB9LCAoKSA9PiB0aGlzLnJlc3RvcmVDdXJzb3IoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnRCcgfSwgKCkgPT4gdGhpcy5pbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdFJyB9LCAoKSA9PiB0aGlzLm5leHRMaW5lKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ0gnIH0sICgpID0+IHRoaXMudGFiU2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ00nIH0sICgpID0+IHRoaXMucmV2ZXJzZUluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJz0nIH0sICgpID0+IHRoaXMua2V5cGFkQXBwbGljYXRpb25Nb2RlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJz4nIH0sICgpID0+IHRoaXMua2V5cGFkTnVtZXJpY01vZGUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnYycgfSwgKCkgPT4gdGhpcy5mdWxsUmVzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnbicgfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ28nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICd8JyB9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnfScgfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ34nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDEpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyUnLCBmaW5hbDogJ0AnIH0sICgpID0+IHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICclJywgZmluYWw6ICdHJyB9LCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIGZvciAoY29uc3QgZmxhZyBpbiBDSEFSU0VUUykge1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcoJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcoJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnKScsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyonLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyonICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcrJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcrJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnLScsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJy4nLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy4nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcvJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcvJyArIGZsYWcpKTsgLy8gVE9ETzogc3VwcG9ydGVkP1xuICAgIH1cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyMnLCBmaW5hbDogJzgnIH0sICgpID0+IHRoaXMuc2NyZWVuQWxpZ25tZW50UGF0dGVybigpKTtcblxuICAgIC8qKlxuICAgICAqIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5lcnJvcignUGFyc2luZyBlcnJvcjogJywgc3RhdGUpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRENTIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJEY3NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyQnLCBmaW5hbDogJ3EnIH0sIG5ldyBEY3NIYW5kbGVyKChkYXRhLCBwYXJhbXMpID0+IHRoaXMucmVxdWVzdFN0YXR1c1N0cmluZyhkYXRhLCBwYXJhbXMpKSk7XG4gIH1cblxuICAvKipcbiAgICogQXN5bmMgcGFyc2Ugc3VwcG9ydC5cbiAgICovXG4gIHByaXZhdGUgX3ByZXNlcnZlU3RhY2soY3Vyc29yU3RhcnRYOiBudW1iZXIsIGN1cnNvclN0YXJ0WTogbnVtYmVyLCBkZWNvZGVkTGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFggPSBjdXJzb3JTdGFydFg7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFkgPSBjdXJzb3JTdGFydFk7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoID0gZGVjb2RlZExlbmd0aDtcbiAgICB0aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uID0gcG9zaXRpb247XG4gIH1cblxuICBwcml2YXRlIF9sb2dTbG93UmVzb2x2aW5nQXN5bmMocDogUHJvbWlzZTxib29sZWFuPik6IHZvaWQge1xuICAgIC8vIGxvZyBhIGxpbWl0ZWQgd2FybmluZyBhYm91dCBhbiBhc3luYyBoYW5kbGVyIHRha2luZyB0b28gbG9uZ1xuICAgIGlmICh0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5XQVJOKSB7XG4gICAgICBQcm9taXNlLnJhY2UoW3AsIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gc2V0VGltZW91dCgoKSA9PiByZWooJyNTTE9XX1RJTUVPVVQnKSwgU0xPV19BU1lOQ19MSU1JVCkpXSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgaWYgKGVyciAhPT0gJyNTTE9XX1RJTUVPVVQnKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2FybihgYXN5bmMgcGFyc2VyIGhhbmRsZXIgdGFraW5nIGxvbmdlciB0aGFuICR7U0xPV19BU1lOQ19MSU1JVH0gbXNgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Q3VycmVudExpbmtJZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC51cmxJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBjYWxsIHdpdGggYXN5bmMgaGFuZGxlciBzdXBwb3J0LlxuICAgKlxuICAgKiBXaGV0aGVyIHRoZSBzdGFjayBzdGF0ZSBnb3QgcHJlc2VydmVkIGZvciB0aGUgbmV4dCBjYWxsLCBpcyBpbmRpY2F0ZWQgYnkgdGhlIHJldHVybiB2YWx1ZTpcbiAgICogLSB1bmRlZmluZWQgKHZvaWQpOlxuICAgKiAgIGFsbCBoYW5kbGVycyB3ZXJlIHN5bmMsIG5vIHN0YWNrIHNhdmUsIGNvbnRpbnVlIG5vcm1hbGx5IHdpdGggbmV4dCBjaHVua1xuICAgKiAtIFByb21pc2VcXDxib29sZWFuXFw+OlxuICAgKiAgIGV4ZWN1dGlvbiBzdG9wcGVkIGF0IGFzeW5jIGhhbmRsZXIsIHN0YWNrIHNhdmVkLCBjb250aW51ZSB3aXRoIHNhbWUgY2h1bmsgYW5kIHRoZSBwcm9taXNlXG4gICAqICAgcmVzb2x2ZSB2YWx1ZSBhcyBgcHJvbWlzZVJlc3VsdGAgdW50aWwgdGhlIG1ldGhvZCByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBgVGVybWluYWwud3JpdGVgIHRvIGVuc3VyZSBjb3JyZWN0IGV4ZWN1dGlvbiBvcmRlclxuICAgKiBhbmQgcHJvcGVyIGNvbnRpbnVhdGlvbiBvZiBhc3luYyBwYXJzZXIgaGFuZGxlcnMuXG4gICAqL1xuICBwdWJsaWMgcGFyc2UoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pOiB2b2lkIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IHJlc3VsdDogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj47XG4gICAgbGV0IGN1cnNvclN0YXJ0WCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54O1xuICAgIGxldCBjdXJzb3JTdGFydFkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueTtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGNvbnN0IHdhc1BhdXNlZCA9IHRoaXMuX3BhcnNlU3RhY2sucGF1c2VkO1xuXG4gICAgaWYgKHdhc1BhdXNlZCkge1xuICAgICAgLy8gYXNzdW1wdGlvbjogX3BhcnNlQnVmZmVyIG5ldmVyIG11dGF0ZXMgYmV0d2VlbiBhc3luYyBjYWxsc1xuICAgICAgaWYgKHJlc3VsdCA9IHRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlciwgdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoLCBwcm9taXNlUmVzdWx0KSkge1xuICAgICAgICB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGN1cnNvclN0YXJ0WCA9IHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYO1xuICAgICAgY3Vyc29yU3RhcnRZID0gdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFk7XG4gICAgICB0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgaWYgKGRhdGEubGVuZ3RoID4gTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCkge1xuICAgICAgICBzdGFydCA9IHRoaXMuX3BhcnNlU3RhY2sucG9zaXRpb24gKyBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExvZyBkZWJ1ZyBkYXRhLCB0aGUgbG9nIGxldmVsIGdhdGUgaXMgdG8gcHJldmVudCBleHRyYSB3b3JrIGluIHRoaXMgaG90IHBhdGhcbiAgICBpZiAodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uREVCVUcpIHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYHBhcnNpbmcgZGF0YSR7dHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8gYCBcIiR7ZGF0YX1cImAgOiBgIFwiJHtBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZGF0YSwgZSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpKS5qb2luKCcnKX1cImB9YCwgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZGF0YS5zcGxpdCgnJykubWFwKGUgPT4gZS5jaGFyQ29kZUF0KDApKVxuICAgICAgICA6IGRhdGFcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gcmVzaXplIGlucHV0IGJ1ZmZlciBpZiBuZWVkZWRcbiAgICBpZiAodGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoIDwgZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGggPCBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KE1hdGgubWluKGRhdGEubGVuZ3RoLCBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIGRpcnR5IHJvdyBzZXJ2aWNlIHNvIHdlIGtub3cgd2hpY2ggbGluZXMgY2hhbmdlZCBhcyBhIHJlc3VsdCBvZiBwYXJzaW5nXG4gICAgLy8gSW1wb3J0YW50OiBkbyBub3QgY2xlYXIgYmV0d2VlbiBhc3luYyBjYWxscywgb3RoZXJ3aXNlIHdlIGxvc3QgcGVuZGluZyB1cGRhdGUgaW5mb3JtYXRpb24uXG4gICAgaWYgKCF3YXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5jbGVhclJhbmdlKCk7XG4gICAgfVxuXG4gICAgLy8gcHJvY2VzcyBiaWcgZGF0YSBpbiBzbWFsbGVyIGNodW5rc1xuICAgIGlmIChkYXRhLmxlbmd0aCA+IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgICAgY29uc3QgZW5kID0gaSArIE1BWF9QQVJTRUJVRkZFUl9MRU5HVEggPCBkYXRhLmxlbmd0aCA/IGkgKyBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGxlbiA9ICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgPyB0aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShkYXRhLnN1YnN0cmluZyhpLCBlbmQpLCB0aGlzLl9wYXJzZUJ1ZmZlcilcbiAgICAgICAgICA6IHRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShkYXRhLnN1YmFycmF5KGksIGVuZCksIHRoaXMuX3BhcnNlQnVmZmVyKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9IHRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlciwgbGVuKSkge1xuICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soY3Vyc29yU3RhcnRYLCBjdXJzb3JTdGFydFksIGxlbiwgaSk7XG4gICAgICAgICAgdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXdhc1BhdXNlZCkge1xuICAgICAgICBjb25zdCBsZW4gPSAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKVxuICAgICAgICAgID8gdGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZGF0YSwgdGhpcy5fcGFyc2VCdWZmZXIpXG4gICAgICAgICAgOiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZGF0YSwgdGhpcy5fcGFyc2VCdWZmZXIpO1xuICAgICAgICBpZiAocmVzdWx0ID0gdGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLCBsZW4pKSB7XG4gICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhjdXJzb3JTdGFydFgsIGN1cnNvclN0YXJ0WSwgbGVuLCAwKTtcbiAgICAgICAgICB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocmVzdWx0KTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICE9PSBjdXJzb3JTdGFydFggfHwgdGhpcy5fYWN0aXZlQnVmZmVyLnkgIT09IGN1cnNvclN0YXJ0WSkge1xuICAgICAgdGhpcy5fb25DdXJzb3JNb3ZlLmZpcmUoKTtcbiAgICB9XG5cbiAgICAvLyBSZWZyZXNoIGFueSBkaXJ0eSByb3dzIGFjY3VtdWxhdGVkIGFzIHBhcnQgb2YgcGFyc2luZywgZmlyZSBvbmx5IGZvciByb3dzIHdpdGhpbiB0aGVcbiAgICAvLyBfdmlld3BvcnRfIHdoaWNoIGlzIHJlbGF0aXZlIHRvIHlkaXNwLCBub3QgcmVsYXRpdmUgdG8geWJhc2UuXG4gICAgY29uc3Qgdmlld3BvcnRFbmQgPSB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIuZW5kICsgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApO1xuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnQgPSB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIuc3RhcnQgKyAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7XG4gICAgaWYgKHZpZXdwb3J0U3RhcnQgPCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoTWF0aC5taW4odmlld3BvcnRTdGFydCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSksIE1hdGgubWluKHZpZXdwb3J0RW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHByaW50KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb2RlOiBudW1iZXI7XG4gICAgbGV0IGNoV2lkdGg6IG51bWJlcjtcbiAgICBjb25zdCBjaGFyc2V0ID0gdGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldDtcbiAgICBjb25zdCBzY3JlZW5SZWFkZXJNb2RlID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlO1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgY29uc3Qgd3JhcGFyb3VuZE1vZGUgPSB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZDtcbiAgICBjb25zdCBpbnNlcnRNb2RlID0gdGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZTtcbiAgICBjb25zdCBjdXJBdHRyID0gdGhpcy5fY3VyQXR0ckRhdGE7XG4gICAgbGV0IGJ1ZmZlclJvdyA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpITtcblxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuXG4gICAgLy8gaGFuZGxlIHdpZGUgY2hhcnM6IHJlc2V0IHN0YXJ0X2NlbGwtMSBpZiB3ZSB3b3VsZCBvdmVyd3JpdGUgdGhlIHNlY29uZCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICYmIGVuZCAtIHN0YXJ0ID4gMCAmJiBidWZmZXJSb3cuZ2V0V2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLnggLSAxKSA9PT0gMikge1xuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gMSwgMCwgMSwgY3VyQXR0cik7XG4gICAgfVxuXG4gICAgbGV0IHByZWNlZGluZ0pvaW5TdGF0ZSA9IHRoaXMuX3BhcnNlci5wcmVjZWRpbmdKb2luU3RhdGU7XG4gICAgZm9yIChsZXQgcG9zID0gc3RhcnQ7IHBvcyA8IGVuZDsgKytwb3MpIHtcbiAgICAgIGNvZGUgPSBkYXRhW3Bvc107XG5cbiAgICAgIC8vIGdldCBjaGFyc2V0IHJlcGxhY2VtZW50IGNoYXJhY3RlclxuICAgICAgLy8gY2hhcnNldCBpcyBvbmx5IGRlZmluZWQgZm9yIEFTQ0lJLCB0aGVyZWZvcmUgd2Ugb25seVxuICAgICAgLy8gc2VhcmNoIGZvciBhbiByZXBsYWNlbWVudCBjaGFyIGlmIGNvZGUgPCAxMjdcbiAgICAgIGlmIChjb2RlIDwgMTI3ICYmIGNoYXJzZXQpIHtcbiAgICAgICAgY29uc3QgY2ggPSBjaGFyc2V0W1N0cmluZy5mcm9tQ2hhckNvZGUoY29kZSldO1xuICAgICAgICBpZiAoY2gpIHtcbiAgICAgICAgICBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJyZW50SW5mbyA9IHRoaXMuX3VuaWNvZGVTZXJ2aWNlLmNoYXJQcm9wZXJ0aWVzKGNvZGUsIHByZWNlZGluZ0pvaW5TdGF0ZSk7XG4gICAgICBjaFdpZHRoID0gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKGN1cnJlbnRJbmZvKTtcbiAgICAgIGNvbnN0IHNob3VsZEpvaW4gPSBVbmljb2RlU2VydmljZS5leHRyYWN0U2hvdWxkSm9pbihjdXJyZW50SW5mbyk7XG4gICAgICBjb25zdCBvbGRXaWR0aCA9IHNob3VsZEpvaW4gPyBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgocHJlY2VkaW5nSm9pblN0YXRlKSA6IDA7XG4gICAgICBwcmVjZWRpbmdKb2luU3RhdGUgPSBjdXJyZW50SW5mbztcblxuICAgICAgaWYgKHNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgICAgdGhpcy5fb25BMTF5Q2hhci5maXJlKHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZSkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2dldEN1cnJlbnRMaW5rSWQoKSkge1xuICAgICAgICB0aGlzLl9vc2NMaW5rU2VydmljZS5hZGRMaW5lVG9MaW5rKHRoaXMuX2dldEN1cnJlbnRMaW5rSWQoKSwgdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgICAgfVxuXG4gICAgICAvLyBnb3RvIG5leHQgbGluZSBpZiBjaCB3b3VsZCBvdmVyZmxvd1xuICAgICAgLy8gTk9URTogVG8gYXZvaWQgY29zdGx5IHdpZHRoIGNoZWNrcyBoZXJlLFxuICAgICAgLy8gdGhlIHRlcm1pbmFsIGRvZXMgbm90IGFsbG93IGEgY29scyA8IDIuXG4gICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggKyBjaFdpZHRoIC0gb2xkV2lkdGggPiBjb2xzKSB7XG4gICAgICAgIC8vIGF1dG93cmFwIC0gREVDQVdNXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgd3JhcHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBsaW5lXG4gICAgICAgIGlmICh3cmFwYXJvdW5kTW9kZSkge1xuICAgICAgICAgIGNvbnN0IG9sZFJvdyA9IGJ1ZmZlclJvdztcbiAgICAgICAgICBsZXQgb2xkQ29sID0gdGhpcy5fYWN0aXZlQnVmZmVyLnggLSBvbGRXaWR0aDtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IG9sZFdpZHRoO1xuICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55Kys7XG4gICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID09PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnktLTtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGxpbmUgYWxyZWFkeSBleGlzdHMgKGVnLiB0aGUgaW5pdGlhbCB2aWV3cG9ydCksIG1hcmsgaXQgYXMgYVxuICAgICAgICAgICAgLy8gd3JhcHBlZCBsaW5lXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSEuaXNXcmFwcGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gcm93IGNoYW5nZWQsIGdldCBpdCBhZ2FpblxuICAgICAgICAgIGJ1ZmZlclJvdyA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpITtcbiAgICAgICAgICBpZiAob2xkV2lkdGggPiAwICYmIGJ1ZmZlclJvdyBpbnN0YW5jZW9mIEJ1ZmZlckxpbmUpIHtcbiAgICAgICAgICAgIC8vIENvbWJpbmluZyBjaGFyYWN0ZXIgd2lkZW5zIDEgY29sdW1uIHRvIDIuXG4gICAgICAgICAgICAvLyBNb3ZlIG9sZCBjaGFyYWN0ZXIgdG8gbmV4dCBsaW5lLlxuICAgICAgICAgICAgYnVmZmVyUm93LmNvcHlDZWxsc0Zyb20ob2xkUm93IGFzIEJ1ZmZlckxpbmUsXG4gICAgICAgICAgICAgIG9sZENvbCwgMCwgb2xkV2lkdGgsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2xlYXIgbGVmdCBvdmVyIGNlbGxzIHRvIHRoZSByaWdodFxuICAgICAgICAgIHdoaWxlIChvbGRDb2wgPCBjb2xzKSB7XG4gICAgICAgICAgICBvbGRSb3cuc2V0Q2VsbEZyb21Db2RlcG9pbnQob2xkQ29sKyssIDAsIDEsIGN1ckF0dHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IGNvbHMgLSAxO1xuICAgICAgICAgIGlmIChjaFdpZHRoID09PSAyKSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogY2hlY2sgZm9yIHh0ZXJtIGJlaGF2aW9yXG4gICAgICAgICAgICAvLyBXaGF0IHRvIGRvIGhlcmU/IFdlIGdvdCBhIHdpZGUgY2hhciB0aGF0IGRvZXMgbm90IGZpdCBpbnRvIGxhc3QgY2VsbFxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBjb21iaW5pbmcgY2hhciBhdCBsYXN0IGN1cnNvciBwb3NpdGlvblxuICAgICAgLy8gdGhpcy5fYWN0aXZlQnVmZmVyLnggc2hvdWxkIG5ldmVyIGJlIDAgZm9yIGEgY29tYmluaW5nIGNoYXJcbiAgICAgIC8vIHNpbmNlIHRoZXkgYWx3YXlzIGZvbGxvdyBhIGNlbGwgY29uc3VtaW5nIGNoYXJcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW4gdGVzdCBmb3IgdGhpcy5fYWN0aXZlQnVmZmVyLnggdG8gYXZvaWQgb3ZlcmZsb3cgbGVmdFxuICAgICAgaWYgKHNob3VsZEpvaW4gJiYgdGhpcy5fYWN0aXZlQnVmZmVyLngpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gYnVmZmVyUm93LmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gMSkgPyAxIDogMjtcbiAgICAgICAgLy8gaWYgZW1wdHkgY2VsbCBhZnRlciBmdWxsd2lkdGgsIG5lZWQgdG8gZ28gMiBjZWxscyBiYWNrXG4gICAgICAgIC8vIGl0IGlzIHNhdmUgdG8gc3RlcCAyIGNlbGxzIGJhY2sgaGVyZVxuICAgICAgICAvLyBzaW5jZSBhbiBlbXB0eSBjZWxsIGlzIG9ubHkgc2V0IGJ5IGZ1bGx3aWR0aCBjaGFyc1xuICAgICAgICBidWZmZXJSb3cuYWRkQ29kZXBvaW50VG9DZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gb2Zmc2V0LFxuICAgICAgICAgIGNvZGUsIGNoV2lkdGgpO1xuICAgICAgICBmb3IgKGxldCBkZWx0YSA9IGNoV2lkdGggLSBvbGRXaWR0aDsgLS1kZWx0YSA+PSAwOyApIHtcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlcG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywgMCwgMCwgY3VyQXR0cik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBtb2RlOiBtb3ZlIGNoYXJhY3RlcnMgdG8gcmlnaHRcbiAgICAgIGlmIChpbnNlcnRNb2RlKSB7XG4gICAgICAgIC8vIHJpZ2h0IHNoaWZ0IGNlbGxzIGFjY29yZGluZyB0byB0aGUgd2lkdGhcbiAgICAgICAgYnVmZmVyUm93Lmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCBjaFdpZHRoIC0gb2xkV2lkdGgsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbChjdXJBdHRyKSk7XG4gICAgICAgIC8vIHRlc3QgbGFzdCBjZWxsIC0gc2luY2UgdGhlIGxhc3QgY2VsbCBoYXMgb25seSByb29tIGZvclxuICAgICAgICAvLyBhIGhhbGZ3aWR0aCBjaGFyIGFueSBmdWxsd2lkdGggc2hpZnRlZCB0aGVyZSBpcyBsb3N0XG4gICAgICAgIC8vIGFuZCB3aWxsIGJlIHNldCB0byBlbXB0eSBjZWxsXG4gICAgICAgIGlmIChidWZmZXJSb3cuZ2V0V2lkdGgoY29scyAtIDEpID09PSAyKSB7XG4gICAgICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KGNvbHMgLSAxLCBOVUxMX0NFTExfQ09ERSwgTlVMTF9DRUxMX1dJRFRILCBjdXJBdHRyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3cml0ZSBjdXJyZW50IGNoYXIgdG8gYnVmZmVyIGFuZCBhZHZhbmNlIGN1cnNvclxuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssIGNvZGUsIGNoV2lkdGgsIGN1ckF0dHIpO1xuXG4gICAgICAvLyBmdWxsd2lkdGggY2hhciAtIGFsc28gc2V0IG5leHQgY2VsbCB0byBwbGFjZWhvbGRlciBzdHViIGFuZCBhZHZhbmNlIGN1cnNvclxuICAgICAgLy8gZm9yIGdyYXBoZW1lcyBiaWdnZXIgdGhhbiBmdWxsd2lkdGggd2UgY2FuIHNpbXBseSBsb29wIHRvIHplcm9cbiAgICAgIC8vIHdlIGFscmVhZHkgbWFkZSBzdXJlIGFib3ZlLCB0aGF0IHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgY2hXaWR0aCB3aWxsIG5vdCBvdmVyZmxvdyByaWdodFxuICAgICAgaWYgKGNoV2lkdGggPiAwKSB7XG4gICAgICAgIHdoaWxlICgtLWNoV2lkdGgpIHtcbiAgICAgICAgICAvLyBvdGhlciB0aGFuIGEgcmVndWxhciBlbXB0eSBjZWxsIGEgY2VsbCBmb2xsb3dpbmcgYSB3aWRlIGNoYXIgaGFzIG5vIHdpZHRoXG4gICAgICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssIDAsIDAsIGN1ckF0dHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2VyLnByZWNlZGluZ0pvaW5TdGF0ZSA9IHByZWNlZGluZ0pvaW5TdGF0ZTtcblxuICAgIC8vIGhhbmRsZSB3aWRlIGNoYXJzOiByZXNldCBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueCA8IGNvbHMgJiYgZW5kIC0gc3RhcnQgPiAwICYmIGJ1ZmZlclJvdy5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkgPT09IDAgJiYgIWJ1ZmZlclJvdy5oYXNDb250ZW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSkge1xuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCAwLCAxLCBjdXJBdHRyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyQ3NpSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAocGFyYW1zOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAoaWQuZmluYWwgPT09ICd0JyAmJiAhaWQucHJlZml4ICYmICFpZC5pbnRlcm1lZGlhdGVzKSB7XG4gICAgICAvLyBzZWN1cml0eTogYWx3YXlzIGNoZWNrIHdoZXRoZXIgd2luZG93IG9wdGlvbiBpcyBhbGxvd2VkXG4gICAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgcGFyYW1zID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbVRvV2luZG93T3B0aW9uKHBhcmFtcy5wYXJhbXNbMF0sIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2socGFyYW1zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgcmVnaXN0ZXJEY3NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgbmV3IERjc0hhbmRsZXIoY2FsbGJhY2spKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyRXNjSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgcmVnaXN0ZXJPc2NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQsIG5ldyBPc2NIYW5kbGVyKGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogQkVMXG4gICAqIEJlbGwgKEN0cmwtRykuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBCRUwgICBcIkJlbGxcIiAgXCJcXGEsIFxceDA3XCIgIFwiUmluZyB0aGUgYmVsbC5cIlxuICAgKiBUaGUgYmVoYXZpb3Igb2YgdGhlIGJlbGwgaXMgZnVydGhlciBjdXN0b21pemFibGUgd2l0aCBgSVRlcm1pbmFsT3B0aW9ucy5iZWxsU3R5bGVgXG4gICAqIGFuZCBgSVRlcm1pbmFsT3B0aW9ucy5iZWxsU291bmRgLlxuICAgKi9cbiAgcHVibGljIGJlbGwoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fb25SZXF1ZXN0QmVsbC5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogTEZcbiAgICogTGluZSBGZWVkIG9yIE5ldyBMaW5lIChOTCkuICAoTEYgIGlzIEN0cmwtSikuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBMRiAgIFwiTGluZSBGZWVkXCIgICAgICAgICAgICBcIlxcbiwgXFx4MEFcIiAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIHJvdyBkb3duLCBzY3JvbGxpbmcgaWYgbmVlZGVkLlwiXG4gICAqIFNjcm9sbGluZyBpcyByZXN0cmljdGVkIHRvIHNjcm9sbCBtYXJnaW5zIGFuZCB3aWxsIG9ubHkgaGFwcGVuIG9uIHRoZSBib3R0b20gbGluZS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIFZUICAgXCJWZXJ0aWNhbCBUYWJ1bGF0aW9uXCIgIFwiXFx2LCBcXHgwQlwiICBcIlRyZWF0ZWQgYXMgTEYuXCJcbiAgICogQHZ0OiAjWSAgIEMwICAgIEZGICAgXCJGb3JtIEZlZWRcIiAgICAgICAgICAgIFwiXFxmLCBcXHgwQ1wiICBcIlRyZWF0ZWQgYXMgTEYuXCJcbiAgICovXG4gIHB1YmxpYyBsaW5lRmVlZCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jb252ZXJ0RW9sKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IDA7XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55Kys7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID09PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIGFuIGV4cGxpY2l0IGxpbmUgZmVlZCAobm90IGp1c3QgYSBjYXJyaWFnZSByZXR1cm4pLCBzbyBjbGVhciB0aGUgd3JhcHBlZCBzdGF0ZSBvZlxuICAgICAgLy8gdGhlIGxpbmUuIFRoaXMgaXMgcGFydGljdWxhcmx5IGltcG9ydGFudCBvbiBjb25wdHkvV2luZG93cyB3aGVyZSByZXZpc2l0aW5nIGxpbmVzIHRvXG4gICAgICAvLyByZXByaW50IGlzIGNvbW1vbiwgZXNwZWNpYWxseSBvbiByZXNpemUuIE5vdGUgdGhhdCB0aGUgd2luZG93c01vZGUgd3JhcHBlZCBsaW5lIGhldXJpc3RpY3NcbiAgICAgIC8vIGNhbiBtZXNzIHdpdGggdGhpcyBzbyB3aW5kb3dzTW9kZSBzaG91bGQgYmUgZGlzYWJsZWQsIHdoaWNoIGlzIHJlY29tbWVuZGVkIG9uIFdpbmRvd3MgYnVpbGRcbiAgICAgIC8vIDIxMzc2IGFuZCBhYm92ZS5cbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpIS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIGVuZCBvZiB0aGUgbGluZSBpcyBoaXQsIHByZXZlbnQgdGhpcyBhY3Rpb24gZnJvbSB3cmFwcGluZyBhcm91bmQgdG8gdGhlIG5leHQgbGluZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueC0tO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcblxuICAgIHRoaXMuX29uTGluZUZlZWQuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENSXG4gICAqIENhcnJpYWdlIFJldHVybiAoQ3RybC1NKS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIENSICAgXCJDYXJyaWFnZSBSZXR1cm5cIiAgXCJcXHIsIFxceDBEXCIgIFwiTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHJvdy5cIlxuICAgKi9cbiAgcHVibGljIGNhcnJpYWdlUmV0dXJuKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCU1xuICAgKiBCYWNrc3BhY2UgKEN0cmwtSCkuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBCUyAgIFwiQmFja3NwYWNlXCIgIFwiXFxiLCBcXHgwOFwiICBcIk1vdmUgdGhlIGN1cnNvciBvbmUgcG9zaXRpb24gdG8gdGhlIGxlZnQuXCJcbiAgICogQnkgZGVmYXVsdCBpdCBpcyBub3QgcG9zc2libGUgdG8gbW92ZSB0aGUgY3Vyc29yIHBhc3QgdGhlIGxlZnRtb3N0IHBvc2l0aW9uLlxuICAgKiBJZiBgcmV2ZXJzZSB3cmFwLWFyb3VuZGAgKGBDU0kgPyA0NSBoYCkgaXMgc2V0LCBhIHByZXZpb3VzIHNvZnQgbGluZSB3cmFwIChERUNBV00pXG4gICAqIGNhbiBiZSB1bmRvbmUgd2l0aCBCUyB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zLiBJbiB0aGF0IGNhc2UgdGhlIGN1cnNvciB3aWxsIHdyYXAgYmFja1xuICAgKiB0byB0aGUgZW5kIG9mIHRoZSBwcmV2aW91cyByb3cuIE5vdGUgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gcGVlayBiYWNrIGludG8gdGhlIHNjcm9sbGJ1ZmZlclxuICAgKiB3aXRoIHRoZSBjdXJzb3IsIHRodXMgYXQgdGhlIGhvbWUgcG9zaXRpb24gKHRvcC1sZWZ0bW9zdCBjZWxsKSB0aGlzIGhhcyBubyBlZmZlY3QuXG4gICAqL1xuICBwdWJsaWMgYmFja3NwYWNlKCk6IGJvb2xlYW4ge1xuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZCkge1xuICAgICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueCA+IDApIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZW5hYmxlZFxuICAgIC8vIG90aGVyIHRoYW4gZm9yIG5vcm1hbCBvcGVyYXRpb24gbW9kZSwgcmV2ZXJzZSB3cmFwLWFyb3VuZCBhbGxvd3MgdGhlIGN1cnNvclxuICAgIC8vIHRvIGJlIGF0IHg9Y29scyB0byBiZSBhYmxlIHRvIGFkZHJlc3MgdGhlIGxhc3QgY2VsbCBvZiBhIHJvdyBieSBCU1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPiAwKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueC0tO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIHJldmVyc2Ugd3JhcC1hcm91bmQgaGFuZGxpbmc6XG4gICAgICAgKiBPdXIgaW1wbGVtZW50YXRpb24gZGV2aWF0ZXMgZnJvbSB4dGVybSBvbiBwdXJwb3NlLiBEZXRhaWxzOlxuICAgICAgICogLSBvbmx5IHByZXZpb3VzIHNvZnQgTkxzIGNhbiBiZSByZXZlcnNlZCAoaXNXcmFwcGVkPXRydWUpXG4gICAgICAgKiAtIG9ubHkgd29ya3Mgd2l0aGluIHNjcm9sbGJvcmRlcnMgKHRvcC9ib3R0b20sIGxlZnQvcmlnaHQgbm90IHlldCBzdXBwb3J0ZWQpXG4gICAgICAgKiAtIGNhbm5vdCBwZWVrIGludG8gc2Nyb2xsYnVmZmVyXG4gICAgICAgKiAtIGFueSBjdXJzb3IgbW92ZW1lbnQgc2VxdWVuY2Uga2VlcHMgd29ya2luZyBhcyBleHBlY3RlZFxuICAgICAgICovXG4gICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPT09IDBcbiAgICAgICAgJiYgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPiB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wXG4gICAgICAgICYmIHRoaXMuX2FjdGl2ZUJ1ZmZlci55IDw9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b21cbiAgICAgICAgJiYgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSk/LmlzV3JhcHBlZCkge1xuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSEuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS07XG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMTtcbiAgICAgICAgLy8gZmluZCBsYXN0IHRha2VuIGNlbGwgLSBsYXN0IGNlbGwgY2FuIGhhdmUgMyBkaWZmZXJlbnQgc3RhdGVzOlxuICAgICAgICAvLyAtIGhhc0NvbnRlbnQodHJ1ZSkgKyBoYXNXaWR0aCgxKTogbmFycm93IGNoYXIgLSB3ZSBhcmUgZG9uZVxuICAgICAgICAvLyAtIGhhc1dpZHRoKDApOiBzZWNvbmQgcGFydCBvZiB3aWRlIGNoYXIgLSB3ZSBhcmUgZG9uZVxuICAgICAgICAvLyAtIGhhc0NvbnRlbnQoZmFsc2UpICsgaGFzV2lkdGgoMSk6IGVtcHR5IGNlbGwgZHVlIHRvIGVhcmx5IHdyYXBwaW5nIHdpZGUgY2hhciwgZ28gb25lXG4gICAgICAgIC8vICAgY2VsbCBmdXJ0aGVyIGJhY2tcbiAgICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpITtcbiAgICAgICAgaWYgKGxpbmUuaGFzV2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngpICYmICFsaW5lLmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpKSB7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngtLTtcbiAgICAgICAgICAvLyBXZSBkbyB0aGlzIG9ubHkgb25jZSwgc2luY2Ugd2lkdGg9MSArIGhhc0NvbnRlbnQ9ZmFsc2UgY3VycmVudGx5IGhhcHBlbnMgb25seSBvbmNlXG4gICAgICAgICAgLy8gYmVmb3JlIGVhcmx5IHdyYXBwaW5nIG9mIGEgd2lkZSBjaGFyLlxuICAgICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgZml4ZWQgb25jZSB3ZSBzdXBwb3J0IGdyYXBoZW1lcyB0YWtpbmcgbW9yZSB0aGFuIDIgY2VsbHMuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUQUJcbiAgICogSG9yaXpvbnRhbCBUYWIgKEhUKSAoQ3RybC1JKS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIEhUICAgXCJIb3Jpem9udGFsIFRhYnVsYXRpb25cIiAgXCJcXHQsIFxceDA5XCIgIFwiTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBuZXh0IGNoYXJhY3RlciB0YWIgc3RvcC5cIlxuICAgKi9cbiAgcHVibGljIHRhYigpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luYWxYID0gdGhpcy5fYWN0aXZlQnVmZmVyLng7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSB0aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICB0aGlzLl9vbkExMXlUYWIuZmlyZSh0aGlzLl9hY3RpdmVCdWZmZXIueCAtIG9yaWdpbmFsWCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNPXG4gICAqIFNoaWZ0IE91dCAoQ3RybC1OKSAtPiBTd2l0Y2ggdG8gQWx0ZXJuYXRlIENoYXJhY3RlciBTZXQuICBUaGlzIGludm9rZXMgdGhlXG4gICAqIEcxIGNoYXJhY3RlciBzZXQuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBsaW1pdGVkIElTTy0yMDIyIGNoYXJzZXQgc3VwcG9ydC5dICBDMCAgICBTTyAgIFwiU2hpZnQgT3V0XCIgIFwiXFx4MEVcIiAgXCJTd2l0Y2ggdG8gYW4gYWx0ZXJuYXRpdmUgY2hhcmFjdGVyIHNldC5cIlxuICAgKi9cbiAgcHVibGljIHNoaWZ0T3V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTSVxuICAgKiBTaGlmdCBJbiAoQ3RybC1PKSAtPiBTd2l0Y2ggdG8gU3RhbmRhcmQgQ2hhcmFjdGVyIFNldC4gIFRoaXMgaW52b2tlcyB0aGUgRzBcbiAgICogY2hhcmFjdGVyIHNldCAodGhlIGRlZmF1bHQpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgU0kgICBcIlNoaWZ0IEluXCIgICBcIlxceDBGXCIgIFwiUmV0dXJuIHRvIHJlZ3VsYXIgY2hhcmFjdGVyIHNldCBhZnRlciBTaGlmdCBPdXQuXCJcbiAgICovXG4gIHB1YmxpYyBzaGlmdEluKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0cmljdCBjdXJzb3IgdG8gdmlld3BvcnQgc2l6ZSAvIHNjcm9sbCBtYXJnaW4gKG9yaWdpbiBtb2RlKS5cbiAgICovXG4gIHByaXZhdGUgX3Jlc3RyaWN0Q3Vyc29yKG1heENvbDogbnVtYmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSk6IHZvaWQge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gTWF0aC5taW4obWF4Q29sLCBNYXRoLm1heCgwLCB0aGlzLl9hY3RpdmVCdWZmZXIueCkpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpblxuICAgICAgPyBNYXRoLm1pbih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLCBNYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIueSkpXG4gICAgICA6IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEsIE1hdGgubWF4KDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSk7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFic29sdXRlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX3NldEN1cnNvcih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AgKyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IHk7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHJlbGF0aXZlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX21vdmVDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBmb3IgcmVsYXRpdmUgY2hhbmdlcyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB3ZSBhcmUgd2l0aGluIDAgLi4gY29scy9yb3dzIC0gMVxuICAgIC8vIGJlZm9yZSBjYWxjdWxhdGluZyB0aGUgbmV3IHBvc2l0aW9uXG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLnggKyB4LCB0aGlzLl9hY3RpdmVCdWZmZXIueSArIHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBBXG4gICAqIEN1cnNvciBVcCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVVUpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDVVUgICBcIkN1cnNvciBVcFwiICAgXCJDU0kgUHMgQVwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgdXAgKGRlZmF1bHQ9MSkuXCJcbiAgICogSWYgdGhlIGN1cnNvciB3b3VsZCBwYXNzIHRoZSB0b3Agc2Nyb2xsIG1hcmdpbiwgaXQgd2lsbCBzdG9wIHRoZXJlLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclVwKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsVG9wXG4gICAgY29uc3QgZGlmZlRvVG9wID0gdGhpcy5fYWN0aXZlQnVmZmVyLnkgLSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO1xuICAgIGlmIChkaWZmVG9Ub3AgPj0gMCkge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCAtTWF0aC5taW4oZGlmZlRvVG9wLCBwYXJhbXMucGFyYW1zWzBdIHx8IDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCAtKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQlxuICAgKiBDdXJzb3IgRG93biBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVUQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDVUQgICBcIkN1cnNvciBEb3duXCIgICBcIkNTSSBQcyBCXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBkb3duIChkZWZhdWx0PTEpLlwiXG4gICAqIElmIHRoZSBjdXJzb3Igd291bGQgcGFzcyB0aGUgYm90dG9tIHNjcm9sbCBtYXJnaW4sIGl0IHdpbGwgc3RvcCB0aGVyZS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JEb3duKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsQm90dG9tXG4gICAgY29uc3QgZGlmZlRvQm90dG9tID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSAtIHRoaXMuX2FjdGl2ZUJ1ZmZlci55O1xuICAgIGlmIChkaWZmVG9Cb3R0b20gPj0gMCkge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCBNYXRoLm1pbihkaWZmVG9Cb3R0b20sIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBDXG4gICAqIEN1cnNvciBGb3J3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVRiAgIFwiQ3Vyc29yIEZvcndhcmRcIiAgICBcIkNTSSBQcyBDXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBmb3J3YXJkIChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRm9yd2FyZChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIERcbiAgICogQ3Vyc29yIEJhY2t3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVQikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVQiAgIFwiQ3Vyc29yIEJhY2t3YXJkXCIgICBcIkNTSSBQcyBEXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBiYWNrd2FyZCAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIGN1cnNvckJhY2t3YXJkKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoLShwYXJhbXMucGFyYW1zWzBdIHx8IDEpLCAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRVxuICAgKiBDdXJzb3IgTmV4dCBMaW5lIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENOTCkuXG4gICAqIE90aGVyIHRoYW4gY3Vyc29yRG93biAoQ1VEKSBhbHNvIHNldCB0aGUgY3Vyc29yIHRvIGZpcnN0IGNvbHVtbi5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ05MICAgXCJDdXJzb3IgTmV4dCBMaW5lXCIgIFwiQ1NJIFBzIEVcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIGRvd24gKGRlZmF1bHQ9MSkgYW5kIHRvIHRoZSBmaXJzdCBjb2x1bW4uXCJcbiAgICogU2FtZSBhcyBDVUQsIGFkZGl0aW9uYWxseSBwbGFjZXMgdGhlIGN1cnNvciBhdCB0aGUgZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvck5leHRMaW5lKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuY3Vyc29yRG93bihwYXJhbXMpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRlxuICAgKiBDdXJzb3IgUHJldmlvdXMgTGluZSBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDUEwpLlxuICAgKiBPdGhlciB0aGFuIGN1cnNvclVwIChDVVUpIGFsc28gc2V0IHRoZSBjdXJzb3IgdG8gZmlyc3QgY29sdW1uLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDUEwgICBcIkN1cnNvciBCYWNrd2FyZFwiICAgXCJDU0kgUHMgRlwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgdXAgKGRlZmF1bHQ9MSkgYW5kIHRvIHRoZSBmaXJzdCBjb2x1bW4uXCJcbiAgICogU2FtZSBhcyBDVVUsIGFkZGl0aW9uYWxseSBwbGFjZXMgdGhlIGN1cnNvciBhdCB0aGUgZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5jdXJzb3JVcChwYXJhbXMpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgR1xuICAgKiBDdXJzb3IgQ2hhcmFjdGVyIEFic29sdXRlICBbY29sdW1uXSAoZGVmYXVsdCA9IFtyb3csMV0pIChDSEEpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDSEEgICBcIkN1cnNvciBIb3Jpem9udGFsIEFic29sdXRlXCIgXCJDU0kgUHMgR1wiIFwiTW92ZSBjdXJzb3IgdG8gYFBzYC10aCBjb2x1bW4gb2YgdGhlIGFjdGl2ZSByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBjdXJzb3JDaGFyQWJzb2x1dGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMSwgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIEhcbiAgICogQ3Vyc29yIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9IFsxLDFdKSAoQ1VQKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ1VQICAgXCJDdXJzb3IgUG9zaXRpb25cIiAgIFwiQ1NJIFBzIDsgUHMgSFwiICBcIlNldCBjdXJzb3IgdG8gcG9zaXRpb24gW2BQc2AsIGBQc2BdIChkZWZhdWx0ID0gWzEsIDFdKS5cIlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBzZXQsIHBsYWNlcyB0aGUgY3Vyc29yIHRvIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBub3Qgc2V0LCBwbGFjZXMgdGhlIGN1cnNvciB0byB0aGUgYWJzb2x1dGUgcG9zaXRpb24gd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAgICogTm90ZSB0aGF0IHRoZSBjb29yZGluYXRlcyBhcmUgMS1iYXNlZCwgdGh1cyB0aGUgdG9wIGxlZnQgcG9zaXRpb24gc3RhcnRzIGF0IGAxIDsgMWAuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKFxuICAgICAgLy8gY29sXG4gICAgICAocGFyYW1zLmxlbmd0aCA+PSAyKSA/IChwYXJhbXMucGFyYW1zWzFdIHx8IDEpIC0gMSA6IDAsXG4gICAgICAvLyByb3dcbiAgICAgIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMVxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGAgIENoYXJhY3RlciBQb3NpdGlvbiBBYnNvbHV0ZVxuICAgKiAgIFtjb2x1bW5dIChkZWZhdWx0ID0gW3JvdywxXSkgKEhQQSkuXG4gICAqIEN1cnJlbnRseSBzYW1lIGZ1bmN0aW9uYWxpdHkgYXMgQ0hBLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBIUEEgICBcIkhvcml6b250YWwgUG9zaXRpb24gQWJzb2x1dGVcIiAgXCJDU0kgUHMgYCBcIiBcIlNhbWUgYXMgQ0hBLlwiXG4gICAqL1xuICBwdWJsaWMgY2hhclBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYSAgQ2hhcmFjdGVyIFBvc2l0aW9uIFJlbGF0aXZlXG4gICAqICAgW2NvbHVtbnNdIChkZWZhdWx0ID0gW3Jvdyxjb2wrMV0pIChIUFIpXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEhQUiAgIFwiSG9yaXpvbnRhbCBQb3NpdGlvbiBSZWxhdGl2ZVwiICBcIkNTSSBQcyBhXCIgIFwiU2FtZSBhcyBDVUYuXCJcbiAgICovXG4gIHB1YmxpYyBoUG9zaXRpb25SZWxhdGl2ZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGQgIFZlcnRpY2FsIFBvc2l0aW9uIEFic29sdXRlIChWUEEpXG4gICAqICAgW3Jvd10gKGRlZmF1bHQgPSBbMSxjb2x1bW5dKVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBWUEEgICBcIlZlcnRpY2FsIFBvc2l0aW9uIEFic29sdXRlXCIgICAgXCJDU0kgUHMgZFwiICBcIk1vdmUgY3Vyc29yIHRvIGBQc2AtdGggcm93IChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgbGluZVBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcih0aGlzLl9hY3RpdmVCdWZmZXIueCwgKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkgLSAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gZSAgVmVydGljYWwgUG9zaXRpb24gUmVsYXRpdmUgKFZQUilcbiAgICogICBbcm93c10gKGRlZmF1bHQgPSBbcm93KzEsY29sdW1uXSlcbiAgICogcmV1c2UgQ1NJIFBzIEIgP1xuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBWUFIgICBcIlZlcnRpY2FsIFBvc2l0aW9uIFJlbGF0aXZlXCIgICAgXCJDU0kgUHMgZVwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgZG93biAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIHZQb3NpdGlvblJlbGF0aXZlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgcGFyYW1zLnBhcmFtc1swXSB8fCAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyBmXG4gICAqICAgSG9yaXpvbnRhbCBhbmQgVmVydGljYWwgUG9zaXRpb24gW3Jvdztjb2x1bW5dIChkZWZhdWx0ID1cbiAgICogICBbMSwxXSkgKEhWUCkuXG4gICAqICAgU2FtZSBhcyBDVVAuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEhWUCAgIFwiSG9yaXpvbnRhbCBhbmQgVmVydGljYWwgUG9zaXRpb25cIiBcIkNTSSBQcyA7IFBzIGZcIiAgXCJTYW1lIGFzIENVUC5cIlxuICAgKi9cbiAgcHVibGljIGhWUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5jdXJzb3JQb3NpdGlvbihwYXJhbXMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBnICBUYWIgQ2xlYXIgKFRCQykuXG4gICAqICAgICBQcyA9IDAgIC0+IENsZWFyIEN1cnJlbnQgQ29sdW1uIChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMyAgLT4gQ2xlYXIgQWxsLlxuICAgKiBQb3RlbnRpYWxseTpcbiAgICogICBQcyA9IDIgIC0+IENsZWFyIFN0b3BzIG9uIExpbmUuXG4gICAqICAgaHR0cDovL3Z0MTAwLm5ldC9hbm5hcmJvci9hYWEtdWcvc2VjdGlvbjYuaHRtbFxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBUQkMgICBcIlRhYiBDbGVhclwiIFwiQ1NJIFBzIGdcIiAgXCJDbGVhciB0YWIgc3RvcHMgYXQgY3VycmVudCBwb3NpdGlvbiAoMCkgb3IgYWxsICgzKSAoZGVmYXVsdD0wKS5cIlxuICAgKiBDbGVhcmluZyB0YWJzdG9wcyBvZmYgdGhlIGFjdGl2ZSByb3cgKFBzID0gMiwgVlQxMDApIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLlxuICAgKi9cbiAgcHVibGljIHRhYkNsZWFyKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF07XG4gICAgfSBlbHNlIGlmIChwYXJhbSA9PT0gMykge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnRhYnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIElcbiAgICogICBDdXJzb3IgRm9yd2FyZCBUYWJ1bGF0aW9uIFBzIHRhYiBzdG9wcyAoZGVmYXVsdCA9IDEpIChDSFQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDSFQgICBcIkN1cnNvciBIb3Jpem9udGFsIFRhYnVsYXRpb25cIiBcIkNTSSBQcyBJXCIgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIHRhYnMgZm9yd2FyZCAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIGN1cnNvckZvcndhcmRUYWIocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSB0aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFogIEN1cnNvciBCYWNrd2FyZCBUYWJ1bGF0aW9uIFBzIHRhYiBzdG9wcyAoZGVmYXVsdCA9IDEpIChDQlQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDQlQgICBcIkN1cnNvciBCYWNrd2FyZCBUYWJ1bGF0aW9uXCIgIFwiQ1NJIFBzIFpcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRhYnMgYmFja3dhcmQgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBjdXJzb3JCYWNrd2FyZFRhYihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnByZXZTdG9wKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBcIiBxICBTZWxlY3QgQ2hhcmFjdGVyIFByb3RlY3Rpb24gQXR0cmlidXRlIChERUNTQ0EpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNTQ0EgICBcIlNlbGVjdCBDaGFyYWN0ZXIgUHJvdGVjdGlvbiBBdHRyaWJ1dGVcIiAgXCJDU0kgUHMgXCIgcVwiICBcIldoZXRoZXIgREVDU0VEIGFuZCBERUNTRUwgY2FuIGVyYXNlICgwPWRlZmF1bHQsIDIpIG9yIG5vdCAoMSkuXCJcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RQcm90ZWN0ZWQocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcCA9IHBhcmFtcy5wYXJhbXNbMF07XG4gICAgaWYgKHAgPT09IDEpIHRoaXMuX2N1ckF0dHJEYXRhLmJnIHw9IEJnRmxhZ3MuUFJPVEVDVEVEO1xuICAgIGlmIChwID09PSAyIHx8IHAgPT09IDApIHRoaXMuX2N1ckF0dHJEYXRhLmJnICY9IH5CZ0ZsYWdzLlBST1RFQ1RFRDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gZXJhc2UgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyBpbmRleCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgc3RhcnQgeCBpbmRleCBvZiB0aGUgcmFuZ2UgdG8gYmUgZXJhc2VkLlxuICAgKiBAcGFyYW0gZW5kIFRoZSBlbmQgeCBpbmRleCBvZiB0aGUgcmFuZ2UgdG8gYmUgZXJhc2VkIChleGNsdXNpdmUpLlxuICAgKiBAcGFyYW0gY2xlYXJXcmFwIGNsZWFyIHRoZSBpc1dyYXBwZWQgZmxhZ1xuICAgKiBAcGFyYW0gcmVzcGVjdFByb3RlY3QgV2hldGhlciB0byByZXNwZWN0IHRoZSBwcm90ZWN0aW9uIGF0dHJpYnV0ZSAoREVDU0NBKS5cbiAgICovXG4gIHByaXZhdGUgX2VyYXNlSW5CdWZmZXJMaW5lKHk6IG51bWJlciwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGNsZWFyV3JhcDogYm9vbGVhbiA9IGZhbHNlLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgeSkhO1xuICAgIGxpbmUucmVwbGFjZUNlbGxzKFxuICAgICAgc3RhcnQsXG4gICAgICBlbmQsXG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxcbiAgICAgIHJlc3BlY3RQcm90ZWN0XG4gICAgKTtcbiAgICBpZiAoY2xlYXJXcmFwKSB7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJlc2V0IGNlbGxzIGluIGEgdGVybWluYWwgcm93LiBUaGUgY2VsbCBnZXRzIHJlcGxhY2VkIHdpdGggdGhlIGVyYXNlQ2hhciBvZlxuICAgKiB0aGUgdGVybWluYWwgYW5kIHRoZSBpc1dyYXBwZWQgcHJvcGVydHkgaXMgc2V0IHRvIGZhbHNlLlxuICAgKiBAcGFyYW0geSByb3cgaW5kZXhcbiAgICovXG4gIHByaXZhdGUgX3Jlc2V0QnVmZmVyTGluZSh5OiBudW1iZXIsIHJlc3BlY3RQcm90ZWN0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB5KTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5maWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5jbGVhck1hcmtlcnModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgeSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSiAgRXJhc2UgaW4gRGlzcGxheSAoRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSBCZWxvdyAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIEFib3ZlLlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqICAgICBQcyA9IDMgIC0+IEVyYXNlIFNhdmVkIExpbmVzICh4dGVybSkuXG4gICAqIENTSSA/IFBzIEpcbiAgICogICBFcmFzZSBpbiBEaXNwbGF5IChERUNTRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgQmVsb3cgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgQWJvdmUuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEVEICBcIkVyYXNlIEluIERpc3BsYXlcIiAgXCJDU0kgUHMgSlwiICBcIkVyYXNlIHZhcmlvdXMgcGFydHMgb2YgdGhlIHZpZXdwb3J0LlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXM6XG4gICAqXG4gICAqIHwgUHMgfCBFZmZlY3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IC0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAgICogfCAwICB8IEVyYXNlIGZyb20gdGhlIGN1cnNvciB0aHJvdWdoIHRoZSBlbmQgb2YgdGhlIHZpZXdwb3J0LiAgICAgICB8XG4gICAqIHwgMSAgfCBFcmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHZpZXdwb3J0IHRocm91Z2ggdGhlIGN1cnNvci4gfFxuICAgKiB8IDIgIHwgRXJhc2UgY29tcGxldGUgdmlld3BvcnQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCAzICB8IEVyYXNlIHNjcm9sbGJhY2suICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NFRCAgIFwiU2VsZWN0aXZlIEVyYXNlIEluIERpc3BsYXlcIiAgXCJDU0kgPyBQcyBKXCIgIFwiU2FtZSBhcyBFRCB3aXRoIHJlc3BlY3RpbmcgcHJvdGVjdGlvbiBmbGFnLlwiXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkRpc3BsYXkocGFyYW1zOiBJUGFyYW1zLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBsZXQgajtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaiA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci55O1xuICAgICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGopO1xuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZShqKyssIHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID09PSAwLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICAgIGZvciAoOyBqIDwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyBqKyspIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaiwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBqID0gdGhpcy5fYWN0aXZlQnVmZmVyLnk7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaik7XG4gICAgICAgIC8vIERlbGV0ZWQgZnJvbnQgcGFydCBvZiBsaW5lIGFuZCBldmVyeXRoaW5nIGJlZm9yZS4gVGhpcyBsaW5lIHdpbGwgbm8gbG9uZ2VyIGJlIHdyYXBwZWQuXG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGosIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgMSwgdHJ1ZSwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggKyAxID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAgIC8vIERlbGV0ZWQgZW50aXJlIHByZXZpb3VzIGxpbmUuIFRoaXMgbmV4dCBsaW5lIGNhbiBubyBsb25nZXIgYmUgd3JhcHBlZC5cbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KGogKyAxKSEuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaiAtIDEpO1xuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXJMaW5lKGosIHJlc3BlY3RQcm90ZWN0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgLy8gQ2xlYXIgc2Nyb2xsYmFjayAoZXZlcnl0aGluZyBub3QgaW4gdmlld3BvcnQpXG4gICAgICAgIGNvbnN0IHNjcm9sbEJhY2tTaXplID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmxlbmd0aCAtIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgaWYgKHNjcm9sbEJhY2tTaXplID4gMCkge1xuICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy50cmltU3RhcnQoc2Nyb2xsQmFja1NpemUpO1xuICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSA9IE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueWRpc3AgPSBNYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIueWRpc3AgLSBzY3JvbGxCYWNrU2l6ZSwgMCk7XG4gICAgICAgICAgLy8gRm9yY2UgYSBzY3JvbGwgZXZlbnQgdG8gcmVmcmVzaCB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoMCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBLICBFcmFzZSBpbiBMaW5lIChFTCkuXG4gICAqICAgICBQcyA9IDAgIC0+IEVyYXNlIHRvIFJpZ2h0IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gRXJhc2UgdG8gTGVmdC5cbiAgICogICAgIFBzID0gMiAgLT4gRXJhc2UgQWxsLlxuICAgKiBDU0kgPyBQcyBLXG4gICAqICAgRXJhc2UgaW4gTGluZSAoREVDU0VMKS5cbiAgICogICAgIFBzID0gMCAgLT4gU2VsZWN0aXZlIEVyYXNlIHRvIFJpZ2h0IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gU2VsZWN0aXZlIEVyYXNlIHRvIExlZnQuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEVMICAgIFwiRXJhc2UgSW4gTGluZVwiICBcIkNTSSBQcyBLXCIgIFwiRXJhc2UgdmFyaW91cyBwYXJ0cyBvZiB0aGUgYWN0aXZlIHJvdy5cIlxuICAgKiBTdXBwb3J0ZWQgcGFyYW0gdmFsdWVzOlxuICAgKlxuICAgKiB8IFBzIHwgRWZmZWN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IC0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfFxuICAgKiB8IDAgIHwgRXJhc2UgZnJvbSB0aGUgY3Vyc29yIHRocm91Z2ggdGhlIGVuZCBvZiB0aGUgcm93LiAgICAgICAgfFxuICAgKiB8IDEgIHwgRXJhc2UgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIHRocm91Z2ggdGhlIGN1cnNvci4gfFxuICAgKiB8IDIgIHwgRXJhc2UgY29tcGxldGUgbGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNTRUwgICBcIlNlbGVjdGl2ZSBFcmFzZSBJbiBMaW5lXCIgIFwiQ1NJID8gUHMgS1wiICBcIlNhbWUgYXMgRUwgd2l0aCByZXNwZWN0aW5nIHByb3RlY3RpbmcgZmxhZy5cIlxuICAgKi9cbiAgcHVibGljIGVyYXNlSW5MaW5lKHBhcmFtczogSVBhcmFtcywgcmVzcGVjdFByb3RlY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG4gICAgc3dpdGNoIChwYXJhbXMucGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LCB0aGlzLl9hY3RpdmVCdWZmZXIueCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9hY3RpdmVCdWZmZXIueCA9PT0gMCwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgMSwgZmFsc2UsIHJlc3BlY3RQcm90ZWN0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LCAwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRydWUsIHJlc3BlY3RQcm90ZWN0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBMXG4gICAqIEluc2VydCBQcyBMaW5lKHMpIChkZWZhdWx0ID0gMSkgKElMKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgSUwgIFwiSW5zZXJ0IExpbmVcIiAgIFwiQ1NJIFBzIExcIiAgXCJJbnNlcnQgYFBzYCBibGFuayBsaW5lcyBhdCBhY3RpdmUgcm93IChkZWZhdWx0PTEpLlwiXG4gICAqIEZvciBldmVyeSBpbnNlcnRlZCBsaW5lIGF0IHRoZSBzY3JvbGwgdG9wIG9uZSBsaW5lIGF0IHRoZSBzY3JvbGwgYm90dG9tIGdldHMgcmVtb3ZlZC5cbiAgICogVGhlIGN1cnNvciBpcyBzZXQgdG8gdGhlIGZpcnN0IGNvbHVtbi5cbiAgICogSUwgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY3Vyc29yIGlzIG91dHNpZGUgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGluc2VydExpbmVzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHJvdzogbnVtYmVyID0gdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnk7XG5cbiAgICBjb25zdCBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSAtIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207XG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tQWJzb2x1dGUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxICsgdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlIC0gc2Nyb2xsQm90dG9tUm93c09mZnNldCArIDE7XG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLWUgJ1xcZVs0NG1cXGVbMUxcXGVbMG0nXG4gICAgICAvLyBibGFua0xpbmUodHJ1ZSkgLSB4dGVybS9saW51eCBiZWhhdmlvclxuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShzY3JvbGxCb3R0b21BYnNvbHV0ZSAtIDEsIDEpO1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShyb3csIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IDA7IC8vIHNlZSBodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL2NoYXB0ZXI0Lmh0bWwgLSB2dDIyMCBvbmx5P1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBNXG4gICAqIERlbGV0ZSBQcyBMaW5lKHMpIChkZWZhdWx0ID0gMSkgKERMKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREwgIFwiRGVsZXRlIExpbmVcIiAgIFwiQ1NJIFBzIE1cIiAgXCJEZWxldGUgYFBzYCBsaW5lcyBhdCBhY3RpdmUgcm93IChkZWZhdWx0PTEpLlwiXG4gICAqIEZvciBldmVyeSBkZWxldGVkIGxpbmUgYXQgdGhlIHNjcm9sbCB0b3Agb25lIGJsYW5rIGxpbmUgYXQgdGhlIHNjcm9sbCBib3R0b20gZ2V0cyBhcHBlbmRlZC5cbiAgICogVGhlIGN1cnNvciBpcyBzZXQgdG8gdGhlIGZpcnN0IGNvbHVtbi5cbiAgICogREwgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY3Vyc29yIGlzIG91dHNpZGUgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUxpbmVzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHJvdzogbnVtYmVyID0gdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnk7XG5cbiAgICBsZXQgajogbnVtYmVyO1xuICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxIC0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTtcbiAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSAtIGo7XG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLWUgJ1xcZVs0NG1cXGVbMU1cXGVbMG0nXG4gICAgICAvLyBibGFua0xpbmUodHJ1ZSkgLSB4dGVybS9saW51eCBiZWhhdmlvclxuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShyb3csIDEpO1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShqLCAwLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO1xuICAgIH1cblxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSAwOyAvLyBzZWUgaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS9jaGFwdGVyNC5odG1sIC0gdnQyMjAgb25seT9cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQFxuICAgKiBJbnNlcnQgUHMgKEJsYW5rKSBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoSUNIKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgSUNIICBcIkluc2VydCBDaGFyYWN0ZXJzXCIgICBcIkNTSSBQcyBAXCIgIFwiSW5zZXJ0IGBQc2AgKGJsYW5rKSBjaGFyYWN0ZXJzIChkZWZhdWx0ID0gMSkuXCJcbiAgICogVGhlIElDSCBzZXF1ZW5jZSBpbnNlcnRzIGBQc2AgYmxhbmsgY2hhcmFjdGVycy4gVGhlIGN1cnNvciByZW1haW5zIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlXG4gICAqIGJsYW5rIGNoYXJhY3RlcnMuIFRleHQgYmV0d2VlbiB0aGUgY3Vyc29yIGFuZCByaWdodCBtYXJnaW4gbW92ZXMgdG8gdGhlIHJpZ2h0LiBDaGFyYWN0ZXJzIG1vdmVkXG4gICAqIHBhc3QgdGhlIHJpZ2h0IG1hcmdpbiBhcmUgbG9zdC5cbiAgICpcbiAgICpcbiAgICogRklYTUU6IGNoZWNrIGFnYWluc3QgeHRlcm0gLSBzaG91bGQgbm90IHdvcmsgb3V0c2lkZSBvZiBzY3JvbGwgbWFyZ2lucyAoc2VlIFZUNTIwIG1hbnVhbClcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRDaGFycyhwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5pbnNlcnRDZWxscyhcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngsXG4gICAgICAgIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSxcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSlcbiAgICAgICk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFBcbiAgICogRGVsZXRlIFBzIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChEQ0gpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBEQ0ggICBcIkRlbGV0ZSBDaGFyYWN0ZXJcIiAgXCJDU0kgUHMgUFwiICBcIkRlbGV0ZSBgUHNgIGNoYXJhY3RlcnMgKGRlZmF1bHQ9MSkuXCJcbiAgICogQXMgY2hhcmFjdGVycyBhcmUgZGVsZXRlZCwgdGhlIHJlbWFpbmluZyBjaGFyYWN0ZXJzIGJldHdlZW4gdGhlIGN1cnNvciBhbmQgcmlnaHQgbWFyZ2luIG1vdmUgdG9cbiAgICogdGhlIGxlZnQuIENoYXJhY3RlciBhdHRyaWJ1dGVzIG1vdmUgd2l0aCB0aGUgY2hhcmFjdGVycy4gVGhlIHRlcm1pbmFsIGFkZHMgYmxhbmsgY2hhcmFjdGVycyBhdFxuICAgKiB0aGUgcmlnaHQgbWFyZ2luLlxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogY2hlY2sgYWdhaW5zdCB4dGVybSAtIHNob3VsZCBub3Qgd29yayBvdXRzaWRlIG9mIHNjcm9sbCBtYXJnaW5zIChzZWUgVlQ1MjAgbWFudWFsKVxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUNoYXJzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLmRlbGV0ZUNlbGxzKFxuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCxcbiAgICAgICAgcGFyYW1zLnBhcmFtc1swXSB8fCAxLFxuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgUyAgU2Nyb2xsIHVwIFBzIGxpbmVzIChkZWZhdWx0ID0gMSkgKFNVKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgU1UgIFwiU2Nyb2xsIFVwXCIgICBcIkNTSSBQcyBTXCIgIFwiU2Nyb2xsIGBQc2AgbGluZXMgdXAgKGRlZmF1bHQ9MSkuXCJcbiAgICpcbiAgICpcbiAgICogRklYTUU6IHNjcm9sbGVkIG91dCBsaW5lcyBhdCB0b3AgPSAxIHNob3VsZCBhZGQgdG8gc2Nyb2xsYmFjayAoeHRlcm0pXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsVXAocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgMSk7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgVCAgU2Nyb2xsIGRvd24gUHMgbGluZXMgKGRlZmF1bHQgPSAxKSAoU0QpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTRCAgXCJTY3JvbGwgRG93blwiICAgXCJDU0kgUHMgVFwiICBcIlNjcm9sbCBgUHNgIGxpbmVzIGRvd24gKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBzY3JvbGxEb3duKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sIDEpO1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCAwLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgU1AgQCAgU2Nyb2xsIGxlZnQgUHMgY29sdW1ucyAoZGVmYXVsdCA9IDEpIChTTCkgRUNNQS00OFxuICAgKlxuICAgKiBOb3RhdGlvbjogKFBuKVxuICAgKiBSZXByZXNlbnRhdGlvbjogQ1NJIFBuIDAyLzAwIDA0LzAwXG4gICAqIFBhcmFtZXRlciBkZWZhdWx0IHZhbHVlOiBQbiA9IDFcbiAgICogU0wgY2F1c2VzIHRoZSBkYXRhIGluIHRoZSBwcmVzZW50YXRpb24gY29tcG9uZW50IHRvIGJlIG1vdmVkIGJ5IG4gY2hhcmFjdGVyIHBvc2l0aW9uc1xuICAgKiBpZiB0aGUgbGluZSBvcmllbnRhdGlvbiBpcyBob3Jpem9udGFsLCBvciBieSBuIGxpbmUgcG9zaXRpb25zIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uXG4gICAqIGlzIHZlcnRpY2FsLCBzdWNoIHRoYXQgdGhlIGRhdGEgYXBwZWFyIHRvIG1vdmUgdG8gdGhlIGxlZnQ7IHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogVGhlIGFjdGl2ZSBwcmVzZW50YXRpb24gcG9zaXRpb24gaXMgbm90IGFmZmVjdGVkIGJ5IHRoaXMgY29udHJvbCBmdW5jdGlvbi5cbiAgICpcbiAgICogU3VwcG9ydGVkOlxuICAgKiAgIC0gYWx3YXlzIGxlZnQgc2hpZnQgKG5vIGxpbmUgb3JpZW50YXRpb24gc2V0dGluZyByZXNwZWN0ZWQpXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIFNMICBcIlNjcm9sbCBMZWZ0XCIgXCJDU0kgUHMgU1AgQFwiIFwiU2Nyb2xsIHZpZXdwb3J0IGBQc2AgdGltZXMgdG8gdGhlIGxlZnQuXCJcbiAgICogU0wgbW92ZXMgdGhlIGNvbnRlbnQgb2YgYWxsIGxpbmVzIHdpdGhpbiB0aGUgc2Nyb2xsIG1hcmdpbnMgYFBzYCB0aW1lcyB0byB0aGUgbGVmdC5cbiAgICogU0wgaGFzIG5vIGVmZmVjdCBvdXRzaWRlIG9mIHRoZSBzY3JvbGwgbWFyZ2lucy5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxMZWZ0KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgZm9yIChsZXQgeSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7IHkgPD0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsgKyt5KSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB5KSE7XG4gICAgICBsaW5lLmRlbGV0ZUNlbGxzKDAsIHBhcmFtLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFNQIEEgIFNjcm9sbCByaWdodCBQcyBjb2x1bW5zIChkZWZhdWx0ID0gMSkgKFNSKSBFQ01BLTQ4XG4gICAqXG4gICAqIE5vdGF0aW9uOiAoUG4pXG4gICAqIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDIvMDAgMDQvMDFcbiAgICogUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiBTUiBjYXVzZXMgdGhlIGRhdGEgaW4gdGhlIHByZXNlbnRhdGlvbiBjb21wb25lbnQgdG8gYmUgbW92ZWQgYnkgbiBjaGFyYWN0ZXIgcG9zaXRpb25zXG4gICAqIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uIGlzIGhvcml6b250YWwsIG9yIGJ5IG4gbGluZSBwb3NpdGlvbnMgaWYgdGhlIGxpbmUgb3JpZW50YXRpb25cbiAgICogaXMgdmVydGljYWwsIHN1Y2ggdGhhdCB0aGUgZGF0YSBhcHBlYXIgdG8gbW92ZSB0byB0aGUgcmlnaHQ7IHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogVGhlIGFjdGl2ZSBwcmVzZW50YXRpb24gcG9zaXRpb24gaXMgbm90IGFmZmVjdGVkIGJ5IHRoaXMgY29udHJvbCBmdW5jdGlvbi5cbiAgICpcbiAgICogU3VwcG9ydGVkOlxuICAgKiAgIC0gYWx3YXlzIHJpZ2h0IHNoaWZ0IChubyBsaW5lIG9yaWVudGF0aW9uIHNldHRpbmcgcmVzcGVjdGVkKVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTUiAgXCJTY3JvbGwgUmlnaHRcIiAgXCJDU0kgUHMgU1AgQVwiICAgXCJTY3JvbGwgdmlld3BvcnQgYFBzYCB0aW1lcyB0byB0aGUgcmlnaHQuXCJcbiAgICogU0wgbW92ZXMgdGhlIGNvbnRlbnQgb2YgYWxsIGxpbmVzIHdpdGhpbiB0aGUgc2Nyb2xsIG1hcmdpbnMgYFBzYCB0aW1lcyB0byB0aGUgcmlnaHQuXG4gICAqIENvbnRlbnQgYXQgdGhlIHJpZ2h0IG1hcmdpbiBpcyBsb3N0LlxuICAgKiBTTCBoYXMgbm8gZWZmZWN0IG91dHNpZGUgb2YgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFJpZ2h0KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgZm9yIChsZXQgeSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7IHkgPD0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsgKyt5KSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB5KSE7XG4gICAgICBsaW5lLmluc2VydENlbGxzKDAsIHBhcmFtLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtICcgfVxuICAgKiBJbnNlcnQgUHMgQ29sdW1uKHMpIChkZWZhdWx0ID0gMSkgKERFQ0lDKSwgVlQ0MjAgYW5kIHVwLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNJQyBcIkluc2VydCBDb2x1bW5zXCIgIFwiQ1NJIFBzICcgfVwiICBcIkluc2VydCBgUHNgIGNvbHVtbnMgYXQgY3Vyc29yIHBvc2l0aW9uLlwiXG4gICAqIERFQ0lDIGluc2VydHMgYFBzYCB0aW1lcyBibGFuayBjb2x1bW5zIGF0IHRoZSBjdXJzb3IgcG9zaXRpb24gZm9yIGFsbCBsaW5lcyB3aXRoIHRoZSBzY3JvbGxcbiAgICogbWFyZ2lucywgbW92aW5nIGNvbnRlbnQgdG8gdGhlIHJpZ2h0LiBDb250ZW50IGF0IHRoZSByaWdodCBtYXJnaW4gaXMgbG9zdC4gREVDSUMgaGFzIG5vIGVmZmVjdFxuICAgKiBvdXRzaWRlIHRoZSBzY3JvbGxpbmcgbWFyZ2lucy5cbiAgICovXG4gIHB1YmxpYyBpbnNlcnRDb2x1bW5zKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgZm9yIChsZXQgeSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7IHkgPD0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsgKyt5KSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB5KSE7XG4gICAgICBsaW5lLmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCBwYXJhbSwgdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO1xuICAgICAgbGluZS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSAnIH5cbiAgICogRGVsZXRlIFBzIENvbHVtbihzKSAoZGVmYXVsdCA9IDEpIChERUNEQyksIFZUNDIwIGFuZCB1cC5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDREMgXCJEZWxldGUgQ29sdW1uc1wiICBcIkNTSSBQcyAnIH5cIiAgXCJEZWxldGUgYFBzYCBjb2x1bW5zIGF0IGN1cnNvciBwb3NpdGlvbi5cIlxuICAgKiBERUNEQyBkZWxldGVzIGBQc2AgdGltZXMgY29sdW1ucyBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uIGZvciBhbGwgbGluZXMgd2l0aCB0aGUgc2Nyb2xsIG1hcmdpbnMsXG4gICAqIG1vdmluZyBjb250ZW50IHRvIHRoZSBsZWZ0LiBCbGFuayBjb2x1bW5zIGFyZSBhZGRlZCBhdCB0aGUgcmlnaHQgbWFyZ2luLlxuICAgKiBERUNEQyBoYXMgbm8gZWZmZWN0IG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUNvbHVtbnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDsgeSA8PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHkpITtcbiAgICAgIGxpbmUuZGVsZXRlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsIHBhcmFtLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFhcbiAgICogRXJhc2UgUHMgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKEVDSCkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEVDSCAgIFwiRXJhc2UgQ2hhcmFjdGVyXCIgICBcIkNTSSBQcyBYXCIgIFwiRXJhc2UgYFBzYCBjaGFyYWN0ZXJzIGZyb20gY3VycmVudCBjdXJzb3IgcG9zaXRpb24gdG8gdGhlIHJpZ2h0IChkZWZhdWx0PTEpLlwiXG4gICAqIEVEIGVyYXNlcyBgUHNgIGNoYXJhY3RlcnMgZnJvbSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiB0byB0aGUgcmlnaHQuXG4gICAqIEVEIHdvcmtzIGluc2lkZSBvciBvdXRzaWRlIHRoZSBzY3JvbGxpbmcgbWFyZ2lucy5cbiAgICovXG4gIHB1YmxpYyBlcmFzZUNoYXJzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLnJlcGxhY2VDZWxscyhcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngsXG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSksXG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpXG4gICAgICApO1xuICAgICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBiICBSZXBlYXQgdGhlIHByZWNlZGluZyBncmFwaGljIGNoYXJhY3RlciBQcyB0aW1lcyAoUkVQKS5cbiAgICogRnJvbSBFQ01BIDQ4IChAc2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9wdWJsaWNhdGlvbnMvZmlsZXMvRUNNQS1TVC9FY21hLTA0OC5wZGYpXG4gICAqICAgIE5vdGF0aW9uOiAoUG4pXG4gICAqICAgIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDYvMDJcbiAgICogICAgUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiAgICBSRVAgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcmVjZWRpbmcgY2hhcmFjdGVyIGluIHRoZSBkYXRhIHN0cmVhbSxcbiAgICogICAgaWYgaXQgaXMgYSBncmFwaGljIGNoYXJhY3RlciAocmVwcmVzZW50ZWQgYnkgb25lIG9yIG1vcmUgYml0IGNvbWJpbmF0aW9ucykgaW5jbHVkaW5nIFNQQUNFLFxuICAgKiAgICBpcyB0byBiZSByZXBlYXRlZCBuIHRpbWVzLCB3aGVyZSBuIGVxdWFscyB0aGUgdmFsdWUgb2YgUG4uXG4gICAqICAgIElmIHRoZSBjaGFyYWN0ZXIgcHJlY2VkaW5nIFJFUCBpcyBhIGNvbnRyb2wgZnVuY3Rpb24gb3IgcGFydCBvZiBhIGNvbnRyb2wgZnVuY3Rpb24sXG4gICAqICAgIHRoZSBlZmZlY3Qgb2YgUkVQIGlzIG5vdCBkZWZpbmVkIGJ5IHRoaXMgU3RhbmRhcmQuXG4gICAqXG4gICAqIFdlIGV4dGVuZCB4dGVybSdzIGJlaGF2aW9yIHRvIGFsbG93IHJlcGVhdGluZyBlbnRpcmUgZ3JhcGhlbWUgY2x1c3RlcnMuXG4gICAqIFRoaXMgaXNuJ3QgMTAwJSB4dGVybS1jb21wYXRpYmxlLCBidXQgaXQgc2VlbXMgc2FuZXIgYW5kIG1vcmUgdXNlZnVsLlxuICAgKiAgICAtIHRleHQgYXR0cnMgYXJlIGFwcGxpZWQgbm9ybWFsbHlcbiAgICogICAgLSB3cmFwIGFyb3VuZCBpcyByZXNwZWN0ZWRcbiAgICogICAgLSBhbnkgdmFsaWQgc2VxdWVuY2UgcmVzZXRzIHRoZSBjYXJyaWVkIGZvcndhcmQgY2hhclxuICAgKlxuICAgKiBOb3RlOiBUbyBnZXQgcmVzZXQgb24gYSB2YWxpZCBzZXF1ZW5jZSB3b3JraW5nIGNvcnJlY3RseSB3aXRob3V0IG11Y2ggcnVudGltZSBwZW5hbHR5LCB0aGVcbiAgICogcHJlY2VkaW5nIGNvZGVwb2ludCBpcyBzdG9yZWQgb24gdGhlIHBhcnNlciBpbiBgdGhpcy5wcmludGAgYW5kIHJlc2V0IGR1cmluZyBgcGFyc2VyLnBhcnNlYC5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgUkVQICAgXCJSZXBlYXQgUHJlY2VkaW5nIENoYXJhY3RlclwiICAgIFwiQ1NJIFBzIGJcIiAgXCJSZXBlYXQgcHJlY2VkaW5nIGNoYXJhY3RlciBgUHNgIHRpbWVzIChkZWZhdWx0PTEpLlwiXG4gICAqIFJFUCByZXBlYXRzIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXIgYFBzYCB0aW1lcyBhZHZhbmNpbmcgdGhlIGN1cnNvciwgYWxzbyB3cmFwcGluZyBpZiBERUNBV00gaXNcbiAgICogc2V0LiBSRVAgaGFzIG5vIGVmZmVjdCBpZiB0aGUgc2VxdWVuY2UgZG9lcyBub3QgZm9sbG93IGEgcHJpbnRhYmxlIEFTQ0lJIGNoYXJhY3RlclxuICAgKiAoTk9PUCBmb3IgYW55IG90aGVyIHNlcXVlbmNlIGluIGJldHdlZW4gb3IgTk9OIEFTQ0lJIGNoYXJhY3RlcnMpLlxuICAgKi9cbiAgcHVibGljIHJlcGVhdFByZWNlZGluZ0NoYXJhY3RlcihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCBqb2luU3RhdGUgPSB0aGlzLl9wYXJzZXIucHJlY2VkaW5nSm9pblN0YXRlO1xuICAgIGlmICgham9pblN0YXRlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gY2FsbCBwcmludCB0byBpbnNlcnQgdGhlIGNoYXJzIGFuZCBoYW5kbGUgY29ycmVjdCB3cmFwcGluZ1xuICAgIGNvbnN0IGxlbmd0aCA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBjb25zdCBjaFdpZHRoID0gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKGpvaW5TdGF0ZSk7XG4gICAgY29uc3QgeCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gY2hXaWR0aDtcbiAgICBjb25zdCBidWZmZXJSb3cgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSE7XG4gICAgY29uc3QgdGV4dCA9IGJ1ZmZlclJvdy5nZXRTdHJpbmcoeCk7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheSh0ZXh0Lmxlbmd0aCAqIGxlbmd0aCk7XG4gICAgbGV0IGlkYXRhID0gMDtcbiAgICBmb3IgKGxldCBpdGV4dCA9IDA7IGl0ZXh0IDwgdGV4dC5sZW5ndGg7ICkge1xuICAgICAgY29uc3QgY2ggPSB0ZXh0LmNvZGVQb2ludEF0KGl0ZXh0KSB8fCAwO1xuICAgICAgZGF0YVtpZGF0YSsrXSA9IGNoO1xuICAgICAgaXRleHQgKz0gY2ggPiAweGZmZmYgPyAyIDogMTtcbiAgICB9XG4gICAgbGV0IHRsZW5ndGggPSBpZGF0YTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBkYXRhLmNvcHlXaXRoaW4odGxlbmd0aCwgMCwgaWRhdGEpO1xuICAgICAgdGxlbmd0aCArPSBpZGF0YTtcbiAgICB9XG4gICAgdGhpcy5wcmludChkYXRhLCAwLCB0bGVuZ3RoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgYyAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoUHJpbWFyeSBEQSkuXG4gICAqICAgICBQcyA9IDAgIG9yIG9taXR0ZWQgLT4gcmVxdWVzdCBhdHRyaWJ1dGVzIGZyb20gdGVybWluYWwuICBUaGVcbiAgICogICAgIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0dGluZy5cbiAgICogICAgIC0+IENTSSA/IDEgOyAyIGMgIChgYFZUMTAwIHdpdGggQWR2YW5jZWQgVmlkZW8gT3B0aW9uJycpXG4gICAqICAgICAtPiBDU0kgPyAxIDsgMCBjICAoYGBWVDEwMSB3aXRoIE5vIE9wdGlvbnMnJylcbiAgICogICAgIC0+IENTSSA/IDYgYyAgKGBgVlQxMDInJylcbiAgICogICAgIC0+IENTSSA/IDYgMCA7IDEgOyAyIDsgNiA7IDggOyA5IDsgMSA1IDsgYyAgKGBgVlQyMjAnJylcbiAgICogICBUaGUgVlQxMDAtc3R5bGUgcmVzcG9uc2UgcGFyYW1ldGVycyBkbyBub3QgbWVhbiBhbnl0aGluZyBieVxuICAgKiAgIHRoZW1zZWx2ZXMuICBWVDIyMCBwYXJhbWV0ZXJzIGRvLCB0ZWxsaW5nIHRoZSBob3N0IHdoYXQgZmVhLVxuICAgKiAgIHR1cmVzIHRoZSB0ZXJtaW5hbCBzdXBwb3J0czpcbiAgICogICAgIFBzID0gMSAgLT4gMTMyLWNvbHVtbnMuXG4gICAqICAgICBQcyA9IDIgIC0+IFByaW50ZXIuXG4gICAqICAgICBQcyA9IDYgIC0+IFNlbGVjdGl2ZSBlcmFzZS5cbiAgICogICAgIFBzID0gOCAgLT4gVXNlci1kZWZpbmVkIGtleXMuXG4gICAqICAgICBQcyA9IDkgIC0+IE5hdGlvbmFsIHJlcGxhY2VtZW50IGNoYXJhY3RlciBzZXRzLlxuICAgKiAgICAgUHMgPSAxIDUgIC0+IFRlY2huaWNhbCBjaGFyYWN0ZXJzLlxuICAgKiAgICAgUHMgPSAyIDIgIC0+IEFOU0kgY29sb3IsIGUuZy4sIFZUNTI1LlxuICAgKiAgICAgUHMgPSAyIDkgIC0+IEFOU0kgdGV4dCBsb2NhdG9yIChpLmUuLCBERUMgTG9jYXRvciBtb2RlKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREExICAgXCJQcmltYXJ5IERldmljZSBBdHRyaWJ1dGVzXCIgICAgIFwiQ1NJIGNcIiAgXCJTZW5kIHByaW1hcnkgZGV2aWNlIGF0dHJpYnV0ZXMuXCJcbiAgICpcbiAgICpcbiAgICogVE9ETzogZml4IGFuZCBjbGVhbnVwIHJlc3BvbnNlXG4gICAqL1xuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmIChwYXJhbXMucGFyYW1zWzBdID4gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pcygneHRlcm0nKSB8fCB0aGlzLl9pcygncnh2dC11bmljb2RlJykgfHwgdGhpcy5faXMoJ3NjcmVlbicpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzE7MmMnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2lzKCdsaW51eCcpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzZjJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA+IFBzIGNcbiAgICogICBTZW5kIERldmljZSBBdHRyaWJ1dGVzIChTZWNvbmRhcnkgREEpLlxuICAgKiAgICAgUHMgPSAwICBvciBvbWl0dGVkIC0+IHJlcXVlc3QgdGhlIHRlcm1pbmFsJ3MgaWRlbnRpZmljYXRpb25cbiAgICogICAgIGNvZGUuICBUaGUgcmVzcG9uc2UgZGVwZW5kcyBvbiB0aGUgZGVjVGVybWluYWxJRCByZXNvdXJjZSBzZXQtXG4gICAqICAgICB0aW5nLiAgSXQgc2hvdWxkIGFwcGx5IG9ubHkgdG8gVlQyMjAgYW5kIHVwLCBidXQgeHRlcm0gZXh0ZW5kc1xuICAgKiAgICAgdGhpcyB0byBWVDEwMC5cbiAgICogICAgIC0+IENTSSAgPiBQcCA7IFB2IDsgUGMgY1xuICAgKiAgIHdoZXJlIFBwIGRlbm90ZXMgdGhlIHRlcm1pbmFsIHR5cGVcbiAgICogICAgIFBwID0gMCAgLT4gYGBWVDEwMCcnLlxuICAgKiAgICAgUHAgPSAxICAtPiBgYFZUMjIwJycuXG4gICAqICAgYW5kIFB2IGlzIHRoZSBmaXJtd2FyZSB2ZXJzaW9uIChmb3IgeHRlcm0sIHRoaXMgd2FzIG9yaWdpbmFsbHlcbiAgICogICB0aGUgWEZyZWU4NiBwYXRjaCBudW1iZXIsIHN0YXJ0aW5nIHdpdGggOTUpLiAgSW4gYSBERUMgdGVybWktXG4gICAqICAgbmFsLCBQYyBpbmRpY2F0ZXMgdGhlIFJPTSBjYXJ0cmlkZ2UgcmVnaXN0cmF0aW9uIG51bWJlciBhbmQgaXNcbiAgICogICBhbHdheXMgemVyby5cbiAgICogTW9yZSBpbmZvcm1hdGlvbjpcbiAgICogICB4dGVybS9jaGFycHJvYy5jIC0gbGluZSAyMDEyLCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICogICB2aW0gcmVzcG9uZHMgd2l0aCBeW1s/MGMgb3IgXltbPzFjIGFmdGVyIHRoZSB0ZXJtaW5hbCdzIHJlc3BvbnNlICg/KVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBEQTIgICBcIlNlY29uZGFyeSBEZXZpY2UgQXR0cmlidXRlc1wiICAgXCJDU0kgPiBjXCIgXCJTZW5kIHByaW1hcnkgZGV2aWNlIGF0dHJpYnV0ZXMuXCJcbiAgICpcbiAgICpcbiAgICogVE9ETzogZml4IGFuZCBjbGVhbnVwIHJlc3BvbnNlXG4gICAqL1xuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHBhcmFtcy5wYXJhbXNbMF0gPiAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8geHRlcm0gYW5kIHVyeHZ0XG4gICAgLy8gc2VlbSB0byBzcGl0IHRoaXNcbiAgICAvLyBvdXQgYXJvdW5kIH4zNzAgdGltZXMgKD8pLlxuICAgIGlmICh0aGlzLl9pcygneHRlcm0nKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz4wOzI3NjswYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faXMoJ3J4dnQtdW5pY29kZScpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPjg1Ozk1OzBjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pcygnbGludXgnKSkge1xuICAgICAgLy8gbm90IHN1cHBvcnRlZCBieSBsaW51eCBjb25zb2xlLlxuICAgICAgLy8gbGludXggY29uc29sZSBlY2hvZXMgcGFyYW1ldGVycy5cbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocGFyYW1zLnBhcmFtc1swXSArICdjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pcygnc2NyZWVuJykpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1s+ODM7NDAwMDM7MGMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgaWYgdGhlIGN1cnJlbnQgdGVybWluYWwgaXMgdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgbmFtZSB0byBldmFsdWF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBfaXModGVybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRlcm1OYW1lICsgJycpLmluZGV4T2YodGVybSkgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGggIFNldCBNb2RlIChTTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEluc2VydCBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBBdXRvbWF0aWMgTmV3bGluZSAoTE5NKS5cbiAgICpcbiAgICogQHZ0OiAjUFtPbmx5IElSTSBpcyBzdXBwb3J0ZWQuXSAgICBDU0kgU00gICAgXCJTZXQgTW9kZVwiICBcIkNTSSBQbSBoXCIgIFwiU2V0IHZhcmlvdXMgdGVybWluYWwgbW9kZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBTTTpcbiAgICpcbiAgICogfCBQYXJhbSB8IEFjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0gfFxuICAgKiB8IDIgICAgIHwgS2V5Ym9hcmQgQWN0aW9uIE1vZGUgKEtBTSkuIEFsd2F5cyBvbi4gfCAjTiAgICAgIHxcbiAgICogfCA0ICAgICB8IEluc2VydCBNb2RlIChJUk0pLiAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTIgICAgfCBTZW5kL3JlY2VpdmUgKFNSTSkuIEFsd2F5cyBvZmYuICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDIwICAgIHwgQXV0b21hdGljIE5ld2xpbmUgKExOTSkuICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICovXG4gIHB1YmxpYyBzZXRNb2RlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY29udmVydEVvbCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA/IFBtIGhcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFNldCAoREVDU0VUKS5cbiAgICogICAgIFBzID0gMSAgLT4gQXBwbGljYXRpb24gQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBVU0FTQ0lJIGZvciBjaGFyYWN0ZXIgc2V0cyBHMC1HM1xuICAgKiAgICAgKERFQ0FOTSksIGFuZCBzZXQgVlQxMDAgbW9kZS5cbiAgICogICAgIFBzID0gMyAgLT4gMTMyIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gU21vb3RoIChTbG93KSBTY3JvbGwgKERFQ1NDTE0pLlxuICAgKiAgICAgUHMgPSA1ICAtPiBSZXZlcnNlIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gT3JpZ2luIE1vZGUgKERFQ09NKS5cbiAgICogICAgIFBzID0gNyAgLT4gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLlxuICAgKiAgICAgUHMgPSA4ICAtPiBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLlxuICAgKiAgICAgUHMgPSA5ICAtPiBTZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcy4gIFNlZSB0aGUgc2VjLVxuICAgKiAgICAgdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwICAtPiBTaG93IHRvb2xiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFN0YXJ0IEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBQcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gU2V0IHByaW50IGV4dGVudCB0byBmdWxsIHNjcmVlbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBTaG93IEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gU2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IEVuYWJsZSBmb250LXNoaWZ0aW5nIGZ1bmN0aW9ucyAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgOCAgLT4gRW50ZXIgVGVrdHJvbml4IE1vZGUgKERFQ1RFSykuXG4gICAqICAgICBQcyA9IDQgMCAgLT4gQWxsb3cgODAgLT4gMTMyIE1vZGUuXG4gICAqICAgICBQcyA9IDQgMSAgLT4gbW9yZSgxKSBmaXggKHNlZSBjdXJzZXMgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA0IDIgIC0+IEVuYWJsZSBOYXRpb24gUmVwbGFjZW1lbnQgQ2hhcmFjdGVyIHNldHMgKERFQ04tXG4gICAqICAgICBSQ00pLlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFR1cm4gT24gTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RhcnQgTG9nZ2luZy4gIFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbi5cbiAgICogICAgIFBzID0gNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmUgZGlzLVxuICAgKiAgICAgYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNiA2ICAtPiBBcHBsaWNhdGlvbiBrZXlwYWQgKERFQ05LTSkuXG4gICAqICAgICBQcyA9IDYgNyAgLT4gQmFja2Fycm93IGtleSBzZW5kcyBiYWNrc3BhY2UgKERFQ0JLTSkuXG4gICAqICAgICBQcyA9IDEgMCAwIDAgIC0+IFNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzIGFuZFxuICAgKiAgICAgcmVsZWFzZS4gIFNlZSB0aGUgc2VjdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMSAgLT4gVXNlIEhpbGl0ZSBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMiAgLT4gVXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAzICAtPiBVc2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgNCAgLT4gU2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy5cbiAgICogICAgIFBzID0gMSAwIDAgNSAgLT4gRW5hYmxlIEV4dGVuZGVkIE1vdXNlIE1vZGUuXG4gICAqICAgICBQcyA9IDEgMCAxIDAgIC0+IFNjcm9sbCB0byBib3R0b20gb24gdHR5IG91dHB1dCAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IFNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gSW50ZXJwcmV0IFwibWV0YVwiIGtleSwgc2V0cyBlaWdodGggYml0LlxuICAgKiAgICAgKGVuYWJsZXMgdGhlIGVpZ2h0Qml0SW5wdXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA1ICAtPiBFbmFibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZW5hYmxlcyB0aGUgbnVtTG9jayByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDYgIC0+IFNlbmQgRVNDICAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LiAgKFRoaXNcbiAgICogICAgIGVuYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgREVMIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkIERlbGV0ZVxuICAgKiAgICAga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBTZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuICAoVGhpc1xuICAgKiAgICAgZW5hYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBLZWVwIHNlbGVjdGlvbiBldmVuIGlmIG5vdCBoaWdobGlnaHRlZC5cbiAgICogICAgIChUaGlzIGVuYWJsZXMgdGhlIGtlZXBTZWxlY3Rpb24gcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAxICAtPiBVc2UgdGhlIENMSVBCT0FSRCBzZWxlY3Rpb24uICAoVGhpcyBlbmFibGVzXG4gICAqICAgICB0aGUgc2VsZWN0VG9DbGlwYm9hcmQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAyICAtPiBFbmFibGUgVXJnZW5jeSB3aW5kb3cgbWFuYWdlciBoaW50IHdoZW5cbiAgICogICAgIENvbnRyb2wtRyBpcyByZWNlaXZlZC4gIChUaGlzIGVuYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBFbmFibGUgcmFpc2luZyBvZiB0aGUgd2luZG93IHdoZW4gQ29udHJvbC1HXG4gICAqICAgICBpcyByZWNlaXZlZC4gIChlbmFibGVzIHRoZSBwb3BPbkJlbGwgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDggIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDLiAgKFRoaXMgbWF5IGJlIGRpcy1cbiAgICogICAgIGFibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDIGFuZCB1c2UgQWx0ZXJuYXRlXG4gICAqICAgICBTY3JlZW4gQnVmZmVyLCBjbGVhcmluZyBpdCBmaXJzdC4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS4gIFRoaXMgY29tYmluZXMgdGhlIGVmZmVjdHMgb2YgdGhlIDFcbiAgICogICAgIDAgNCA3ICBhbmQgMSAwIDQgOCAgbW9kZXMuICBVc2UgdGhpcyB3aXRoIHRlcm1pbmZvLWJhc2VkXG4gICAqICAgICBhcHBsaWNhdGlvbnMgcmF0aGVyIHRoYW4gdGhlIDQgNyAgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMCAgLT4gU2V0IHRlcm1pbmZvL3Rlcm1jYXAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDEgIC0+IFNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFNldCBIUCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMyAgLT4gU2V0IFNDTyBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDYgMCAgLT4gU2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gU2V0IFZUMjIwIGtleWJvYXJkIGVtdWxhdGlvbi5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gU2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLlxuICAgKiBNb2RlczpcbiAgICogICBodHRwOiAqdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbFxuICAgKlxuICAgKiBAdnQ6ICNQW1NlZSBiZWxvdyBmb3Igc3VwcG9ydGVkIG1vZGVzLl0gICAgQ1NJIERFQ1NFVCAgXCJERUMgUHJpdmF0ZSBTZXQgTW9kZVwiIFwiQ1NJID8gUG0gaFwiICBcIlNldCB2YXJpb3VzIHRlcm1pbmFsIGF0dHJpYnV0ZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBERUNTRVQ6XG4gICAqXG4gICAqIHwgcGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS18XG4gICAqIHwgMSAgICAgfCBBcHBsaWNhdGlvbiBDdXJzb3IgS2V5cyAoREVDQ0tNKS4gICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgfCBEZXNpZ25hdGUgVVMtQVNDSUkgZm9yIGNoYXJhY3RlciBzZXRzIEcwLUczIChERUNBTk0pLiAgIHwgI1kgICAgICB8XG4gICAqIHwgMyAgICAgfCAxMzIgQ29sdW1uIE1vZGUgKERFQ0NPTE0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNiAgICAgfCBPcmlnaW4gTW9kZSAoREVDT00pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNyAgICAgfCBBdXRvLXdyYXAgTW9kZSAoREVDQVdNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOCAgICAgfCBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLiBBbHdheXMgb24uICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgOSAgICAgfCBYMTAgeHRlcm0gbW91c2UgcHJvdG9jb2wuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTIgICAgfCBTdGFydCBCbGlua2luZyBDdXJzb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjUgICAgfCBTaG93IEN1cnNvciAoREVDVENFTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDUgICAgfCBSZXZlcnNlIHdyYXAtYXJvdW5kLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDcgICAgfCBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNjYgICAgfCBBcHBsaWNhdGlvbiBrZXlwYWQgKERFQ05LTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMCAgfCBYMTEgeHRlcm0gbW91c2UgcHJvdG9jb2wuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMiAgfCBVc2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMyAgfCBVc2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNCAgfCBTZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNSAgfCBFbmFibGUgVVRGLTggTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTAwNiAgfCBFbmFibGUgU0dSIE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAxNSAgfCBFbmFibGUgdXJ4dnQgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTAxNiAgfCBFbmFibGUgU0dSLVBpeGVscyBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0NyAgfCBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OCAgfCBTYXZlIGN1cnNvciBhcyBpbiBERUNTQy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OSAgfCBTYXZlIGN1cnNvciBhbmQgc3dpdGNoIHRvIGFsdGVybmF0ZSBidWZmZXIgY2xlYXJpbmcgaXQuIHwgI1BbRG9lcyBub3QgY2xlYXIgdGhlIGFsdGVybmF0ZSBidWZmZXIuXSB8XG4gICAqIHwgMjAwNCAgfCBTZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBpbXBsZW1lbnQgREVDU0NOTSwgMTA0OSBzaG91bGQgY2xlYXIgYWx0YnVmZmVyXG4gICAqL1xuICBwdWJsaWMgc2V0TW9kZVByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDEsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMiwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgzLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIC8vIHNldCBWVDEwMCBtb2RlIGhlcmVcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIERFQ0NPTE0gLSAxMzIgY29sdW1uIG1vZGUuXG4gICAgICAgICAgICogVGhpcyBpcyBvbmx5IGFjdGl2ZSBpZiAnU2V0V2luTGluZXMnICgyNCkgaXMgZW5hYmxlZFxuICAgICAgICAgICAqIHRocm91Z2ggYG9wdGlvbnMud2luZG93c09wdGlvbnNgLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMuc2V0V2luTGluZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDEzMiwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluayA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDU6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLicpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTogLy8gWDEwIE1vdXNlXG4gICAgICAgICAgLy8gbm8gcmVsZWFzZSwgbm8gbW90aW9uLCBubyB3aGVlbCwgbm8gbW9kaWZpZXJzLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnWDEwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICAgIC8vIG5vIG1vdGlvbi5cbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ1ZUMjAwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAyOiAvLyBidXR0b24gZXZlbnQgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ0RSQUcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIC8vIGFueSBldmVudCAtIHNlbmRzIG1vdGlvbiBldmVudHMsXG4gICAgICAgICAgLy8gZXZlbiBpZiB0aGVyZSBpcyBubyBidXR0b24gaGVsZCBkb3duLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnQU5ZJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA0OiAvLyBzZW5kIGZvY3VzaW4vZm9jdXNvdXQgZXZlbnRzXG4gICAgICAgICAgLy8gZm9jdXNpbjogXltbSVxuICAgICAgICAgIC8vIGZvY3Vzb3V0OiBeW1tPXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U2VuZEZvY3VzLmZpcmUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1NFVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA2OiAvLyBzZ3IgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ1NHUic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAxNTogLy8gdXJ4dnQgZXh0IG1vZGUgbW91c2UgLSByZW1vdmVkIGluICMyNTA3XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnREVDU0VUIDEwMTUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTY6IC8vIHNnciBwaXhlbHMgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnU0dSX1BJWEVMUyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6IC8vIHNob3cgY3Vyc29yXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ4OiAvLyBhbHQgc2NyZWVuIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDk6IC8vIGFsdCBzY3JlZW4gYnVmZmVyIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcigpO1xuICAgICAgICAvLyBGQUxMLVRIUk9VR0hcbiAgICAgICAgY2FzZSA0NzogLy8gYWx0IHNjcmVlbiBidWZmZXJcbiAgICAgICAgY2FzZSAxMDQ3OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlclxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgUG0gbCAgUmVzZXQgTW9kZSAoUk0pLlxuICAgKiAgICAgUHMgPSAyICAtPiBLZXlib2FyZCBBY3Rpb24gTW9kZSAoQU0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBSZXBsYWNlIE1vZGUgKElSTSkuXG4gICAqICAgICBQcyA9IDEgMiAgLT4gU2VuZC9yZWNlaXZlIChTUk0pLlxuICAgKiAgICAgUHMgPSAyIDAgIC0+IE5vcm1hbCBMaW5lZmVlZCAoTE5NKS5cbiAgICpcbiAgICogQHZ0OiAjUFtPbmx5IElSTSBpcyBzdXBwb3J0ZWQuXSAgICBDU0kgUk0gICAgXCJSZXNldCBNb2RlXCIgIFwiQ1NJIFBtIGxcIiAgXCJTZXQgdmFyaW91cyB0ZXJtaW5hbCBhdHRyaWJ1dGVzLlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXMgYnkgUk06XG4gICAqXG4gICAqIHwgUGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFN1cHBvcnQgfFxuICAgKiB8IC0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAyICAgICB8IEtleWJvYXJkIEFjdGlvbiBNb2RlIChLQU0pLiBBbHdheXMgb24uIHwgI04gICAgICB8XG4gICAqIHwgNCAgICAgfCBSZXBsYWNlIE1vZGUgKElSTSkuIChkZWZhdWx0KSAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEyICAgIHwgU2VuZC9yZWNlaXZlIChTUk0pLiBBbHdheXMgb2ZmLiAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCAyMCAgICB8IE5vcm1hbCBMaW5lZmVlZCAoTE5NKS4gICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiB3aHkgaXMgTE5NIGNvbW1lbnRlZCBvdXQ/XG4gICAqL1xuICBwdWJsaWMgcmVzZXRNb2RlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbnZlcnRFb2wgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJID8gUG0gbFxuICAgKiAgIERFQyBQcml2YXRlIE1vZGUgUmVzZXQgKERFQ1JTVCkuXG4gICAqICAgICBQcyA9IDEgIC0+IE5vcm1hbCBDdXJzb3IgS2V5cyAoREVDQ0tNKS5cbiAgICogICAgIFBzID0gMiAgLT4gRGVzaWduYXRlIFZUNTIgbW9kZSAoREVDQU5NKS5cbiAgICogICAgIFBzID0gMyAgLT4gODAgQ29sdW1uIE1vZGUgKERFQ0NPTE0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBKdW1wIChGYXN0KSBTY3JvbGwgKERFQ1NDTE0pLlxuICAgKiAgICAgUHMgPSA1ICAtPiBOb3JtYWwgVmlkZW8gKERFQ1NDTk0pLlxuICAgKiAgICAgUHMgPSA2ICAtPiBOb3JtYWwgQ3Vyc29yIE1vZGUgKERFQ09NKS5cbiAgICogICAgIFBzID0gNyAgLT4gTm8gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLlxuICAgKiAgICAgUHMgPSA4ICAtPiBObyBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLlxuICAgKiAgICAgUHMgPSA5ICAtPiBEb24ndCBzZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcy5cbiAgICogICAgIFBzID0gMSAwICAtPiBIaWRlIHRvb2xiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFN0b3AgQmxpbmtpbmcgQ3Vyc29yIChhdHQ2MTApLlxuICAgKiAgICAgUHMgPSAxIDggIC0+IERvbid0IHByaW50IGZvcm0gZmVlZCAoREVDUEZGKS5cbiAgICogICAgIFBzID0gMSA5ICAtPiBMaW1pdCBwcmludCB0byBzY3JvbGxpbmcgcmVnaW9uIChERUNQRVgpLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IEhpZGUgQ3Vyc29yIChERUNUQ0VNKS5cbiAgICogICAgIFBzID0gMyAwICAtPiBEb24ndCBzaG93IHNjcm9sbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgNSAgLT4gRGlzYWJsZSBmb250LXNoaWZ0aW5nIGZ1bmN0aW9ucyAocnh2dCkuXG4gICAqICAgICBQcyA9IDQgMCAgLT4gRGlzYWxsb3cgODAgLT4gMTMyIE1vZGUuXG4gICAqICAgICBQcyA9IDQgMSAgLT4gTm8gbW9yZSgxKSBmaXggKHNlZSBjdXJzZXMgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA0IDIgIC0+IERpc2FibGUgTmF0aW9uIFJlcGxhY2VtZW50IENoYXJhY3RlciBzZXRzIChERUMtXG4gICAqICAgICBOUkNNKS5cbiAgICogICAgIFBzID0gNCA0ICAtPiBUdXJuIE9mZiBNYXJnaW4gQmVsbC5cbiAgICogICAgIFBzID0gNCA1ICAtPiBObyBSZXZlcnNlLXdyYXBhcm91bmQgTW9kZS5cbiAgICogICAgIFBzID0gNCA2ICAtPiBTdG9wIExvZ2dpbmcuICAoVGhpcyBpcyBub3JtYWxseSBkaXNhYmxlZCBieSBhXG4gICAqICAgICBjb21waWxlLXRpbWUgb3B0aW9uKS5cbiAgICogICAgIFBzID0gNCA3ICAtPiBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIuXG4gICAqICAgICBQcyA9IDYgNiAgLT4gTnVtZXJpYyBrZXlwYWQgKERFQ05LTSkuXG4gICAqICAgICBQcyA9IDYgNyAgLT4gQmFja2Fycm93IGtleSBzZW5kcyBkZWxldGUgKERFQ0JLTSkuXG4gICAqICAgICBQcyA9IDEgMCAwIDAgIC0+IERvbid0IHNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzIGFuZFxuICAgKiAgICAgcmVsZWFzZS4gIFNlZSB0aGUgc2VjdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMSAgLT4gRG9uJ3QgdXNlIEhpbGl0ZSBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMiAgLT4gRG9uJ3QgdXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAzICAtPiBEb24ndCB1c2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgNCAgLT4gRG9uJ3Qgc2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy5cbiAgICogICAgIFBzID0gMSAwIDAgNSAgLT4gRGlzYWJsZSBFeHRlbmRlZCBNb3VzZSBNb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgMSAwICAtPiBEb24ndCBzY3JvbGwgdG8gYm90dG9tIG9uIHR0eSBvdXRwdXRcbiAgICogICAgIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDEgMSAgLT4gRG9uJ3Qgc2Nyb2xsIHRvIGJvdHRvbSBvbiBrZXkgcHJlc3MgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA0ICAtPiBEb24ndCBpbnRlcnByZXQgXCJtZXRhXCIga2V5LiAgKFRoaXMgZGlzYWJsZXNcbiAgICogICAgIHRoZSBlaWdodEJpdElucHV0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNSAgLT4gRGlzYWJsZSBzcGVjaWFsIG1vZGlmaWVycyBmb3IgQWx0IGFuZCBOdW0tXG4gICAqICAgICBMb2NrIGtleXMuICAoVGhpcyBkaXNhYmxlcyB0aGUgbnVtTG9jayByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDYgIC0+IERvbid0IHNlbmQgRVNDICB3aGVuIE1ldGEgbW9kaWZpZXMgYSBrZXkuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUgbWV0YVNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNyAgLT4gU2VuZCBWVDIyMCBSZW1vdmUgZnJvbSB0aGUgZWRpdGluZy1rZXlwYWRcbiAgICogICAgIERlbGV0ZSBrZXkuXG4gICAqICAgICBQcyA9IDEgMCAzIDkgIC0+IERvbid0IHNlbmQgRVNDICB3aGVuIEFsdCBtb2RpZmllcyBhIGtleS5cbiAgICogICAgIChUaGlzIGRpc2FibGVzIHRoZSBhbHRTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDAgIC0+IERvIG5vdCBrZWVwIHNlbGVjdGlvbiB3aGVuIG5vdCBoaWdobGlnaHRlZC5cbiAgICogICAgIChUaGlzIGRpc2FibGVzIHRoZSBrZWVwU2VsZWN0aW9uIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMSAgLT4gVXNlIHRoZSBQUklNQVJZIHNlbGVjdGlvbi4gIChUaGlzIGRpc2FibGVzXG4gICAqICAgICB0aGUgc2VsZWN0VG9DbGlwYm9hcmQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAyICAtPiBEaXNhYmxlIFVyZ2VuY3kgd2luZG93IG1hbmFnZXIgaGludCB3aGVuXG4gICAqICAgICBDb250cm9sLUcgaXMgcmVjZWl2ZWQuICAoVGhpcyBkaXNhYmxlcyB0aGUgYmVsbElzVXJnZW50XG4gICAqICAgICByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDMgIC0+IERpc2FibGUgcmFpc2luZyBvZiB0aGUgd2luZG93IHdoZW4gQ29udHJvbC1cbiAgICogICAgIEcgaXMgcmVjZWl2ZWQuICAoVGhpcyBkaXNhYmxlcyB0aGUgcG9wT25CZWxsIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgNyAgLT4gVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLCBjbGVhcmluZyBzY3JlZW5cbiAgICogICAgIGZpcnN0IGlmIGluIHRoZSBBbHRlcm5hdGUgU2NyZWVuLiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5XG4gICAqICAgICB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA4ICAtPiBSZXN0b3JlIGN1cnNvciBhcyBpbiBERUNSQy4gIChUaGlzIG1heSBiZVxuICAgKiAgICAgZGlzYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOSAgLT4gVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyIGFuZCByZXN0b3JlIGN1cnNvclxuICAgKiAgICAgYXMgaW4gREVDUkMuICAoVGhpcyBtYXkgYmUgZGlzYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0XG4gICAqICAgICByZXNvdXJjZSkuICBUaGlzIGNvbWJpbmVzIHRoZSBlZmZlY3RzIG9mIHRoZSAxIDAgNCA3ICBhbmQgMSAwXG4gICAqICAgICA0IDggIG1vZGVzLiAgVXNlIHRoaXMgd2l0aCB0ZXJtaW5mby1iYXNlZCBhcHBsaWNhdGlvbnMgcmF0aGVyXG4gICAqICAgICB0aGFuIHRoZSA0IDcgIG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDAgIC0+IFJlc2V0IHRlcm1pbmZvL3Rlcm1jYXAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDEgIC0+IFJlc2V0IFN1biBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMiAgLT4gUmVzZXQgSFAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDMgIC0+IFJlc2V0IFNDTyBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDYgMCAgLT4gUmVzZXQgbGVnYWN5IGtleWJvYXJkIGVtdWxhdGlvbiAoWDExUjYpLlxuICAgKiAgICAgUHMgPSAxIDAgNiAxICAtPiBSZXNldCBrZXlib2FyZCBlbXVsYXRpb24gdG8gU3VuL1BDIHN0eWxlLlxuICAgKiAgICAgUHMgPSAyIDAgMCA0ICAtPiBSZXNldCBicmFja2V0ZWQgcGFzdGUgbW9kZS5cbiAgICpcbiAgICogQHZ0OiAjUFtTZWUgYmVsb3cgZm9yIHN1cHBvcnRlZCBtb2Rlcy5dICAgIENTSSBERUNSU1QgIFwiREVDIFByaXZhdGUgUmVzZXQgTW9kZVwiIFwiQ1NJID8gUG0gbFwiICBcIlJlc2V0IHZhcmlvdXMgdGVybWluYWwgYXR0cmlidXRlcy5cIlxuICAgKiBTdXBwb3J0ZWQgcGFyYW0gdmFsdWVzIGJ5IERFQ1JTVDpcbiAgICpcbiAgICogfCBwYXJhbSB8IEFjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAxICAgICB8IE5vcm1hbCBDdXJzb3IgS2V5cyAoREVDQ0tNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyICAgICB8IERlc2lnbmF0ZSBWVDUyIG1vZGUgKERFQ0FOTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCAzICAgICB8IDgwIENvbHVtbiBNb2RlIChERUNDT0xNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjQltTd2l0Y2hlcyB0byBvbGQgY29sdW1uIHdpZHRoIGluc3RlYWQgb2YgODAuXSB8XG4gICAqIHwgNiAgICAgfCBOb3JtYWwgQ3Vyc29yIE1vZGUgKERFQ09NKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNyAgICAgfCBObyBXcmFwYXJvdW5kIE1vZGUgKERFQ0FXTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOCAgICAgfCBObyBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgOSAgICAgfCBEb24ndCBzZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcy4gICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTIgICAgfCBTdG9wIEJsaW5raW5nIEN1cnNvci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjUgICAgfCBIaWRlIEN1cnNvciAoREVDVENFTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDUgICAgfCBObyByZXZlcnNlIHdyYXAtYXJvdW5kLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDcgICAgfCBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNjYgICAgfCBOdW1lcmljIGtleXBhZCAoREVDTktNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMCAgfCBEb24ndCBzZW5kIE1vdXNlIHJlcG9ydHMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMiAgfCBEb24ndCB1c2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwMyAgfCBEb24ndCB1c2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy4gICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNCAgfCBEb24ndCBzZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzLiAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAwNSAgfCBEaXNhYmxlIFVURi04IE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTAwNiAgfCBEaXNhYmxlIFNHUiBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTAxNSAgfCBEaXNhYmxlIHVyeHZ0IE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMTAxNiAgfCBEaXNhYmxlIFNHUi1QaXhlbHMgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0NyAgfCBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIgKGNsZWFyaW5nIHNjcmVlbiBpZiBpbiBhbHQpLiAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OCAgfCBSZXN0b3JlIGN1cnNvciBhcyBpbiBERUNSQy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMTA0OSAgfCBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIgYW5kIHJlc3RvcmUgY3Vyc29yLiAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjAwNCAgfCBSZXNldCBicmFja2V0ZWQgcGFzdGUgbW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBERUNDT0xNIGlzIGN1cnJlbnRseSBicm9rZW4gKGFscmVhZHkgZml4ZWQgaW4gd2luZG93IG9wdGlvbnMgUFIpXG4gICAqL1xuICBwdWJsaWMgcmVzZXRNb2RlUHJpdmF0ZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBERUNDT0xNIC0gODAgY29sdW1uIG1vZGUuXG4gICAgICAgICAgICogVGhpcyBpcyBvbmx5IGFjdGl2ZSBpZiAnU2V0V2luTGluZXMnICgyNCkgaXMgZW5hYmxlZFxuICAgICAgICAgICAqIHRocm91Z2ggYG9wdGlvbnMud2luZG93c09wdGlvbnNgLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMuc2V0V2luTGluZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDgwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgICAgICAgICAgdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbmsgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0NTpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMucmV2ZXJzZVdyYXBhcm91bmQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLicpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDk6IC8vIFgxMCBNb3VzZVxuICAgICAgICBjYXNlIDEwMDA6IC8vIHZ0MjAwIG1vdXNlXG4gICAgICAgIGNhc2UgMTAwMjogLy8gYnV0dG9uIGV2ZW50IG1vdXNlXG4gICAgICAgIGNhc2UgMTAwMzogLy8gYW55IGV2ZW50IG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9ICdOT05FJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA0OiAvLyBzZW5kIGZvY3VzaW4vZm9jdXNvdXQgZXZlbnRzXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDU6IC8vIHV0ZjggZXh0IG1vZGUgbW91c2UgLSByZW1vdmVkIGluICMyNTA3XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnREVDUlNUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDY6IC8vIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnREVGQVVMVCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAxNTogLy8gdXJ4dnQgZXh0IG1vZGUgbW91c2UgLSByZW1vdmVkIGluICMyNTA3XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnREVDUlNUIDEwMTUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTY6IC8vIHNnciBwaXhlbHMgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnREVGQVVMVCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6IC8vIGhpZGUgY3Vyc29yXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDg6IC8vIGFsdCBzY3JlZW4gY3Vyc29yXG4gICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0OTogLy8gYWx0IHNjcmVlbiBidWZmZXIgY3Vyc29yXG4gICAgICAgIC8vIEZBTEwtVEhST1VHSFxuICAgICAgICBjYXNlIDQ3OiAvLyBub3JtYWwgc2NyZWVuIGJ1ZmZlclxuICAgICAgICBjYXNlIDEwNDc6IC8vIG5vcm1hbCBzY3JlZW4gYnVmZmVyIC0gY2xlYXJpbmcgaXQgZmlyc3RcbiAgICAgICAgICAvLyBFbnN1cmUgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGhhcyB0aGUgY29ycmVjdCBidWZmZXJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTtcbiAgICAgICAgICBpZiAocGFyYW1zLnBhcmFtc1tpXSA9PT0gMTA0OSkge1xuICAgICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyAkIHAgUmVxdWVzdCBBTlNJIE1vZGUgKERFQ1JRTSkuXG4gICAqXG4gICAqIFJlcG9ydHMgQ1NJIFBzOyBQbSAkIHkgKERFQ1JQTSksIHdoZXJlIFBzIGlzIHRoZSBtb2RlIG51bWJlciBhcyBpbiBTTS9STSxcbiAgICogYW5kIFBtIGlzIHRoZSBtb2RlIHZhbHVlOlxuICAgKiAgICAwIC0gbm90IHJlY29nbml6ZWRcbiAgICogICAgMSAtIHNldFxuICAgKiAgICAyIC0gcmVzZXRcbiAgICogICAgMyAtIHBlcm1hbmVudGx5IHNldFxuICAgKiAgICA0IC0gcGVybWFuZW50bHkgcmVzZXRcbiAgICpcbiAgICogQHZ0OiAjWSAgQ1NJICAgREVDUlFNICBcIlJlcXVlc3QgTW9kZVwiICBcIkNTSSBQcyAkcFwiICBcIlJlcXVlc3QgbW9kZSBzdGF0ZS5cIlxuICAgKiBSZXR1cm5zIGEgcmVwb3J0IGFzIGBDU0kgUHM7IFBtICQgeWAgKERFQ1JQTSksIHdoZXJlIGBQc2AgaXMgdGhlIG1vZGUgbnVtYmVyIGFzIGluIFNNL1JNXG4gICAqIG9yIERFQ1NFVC9ERUNSU1QsIGFuZCBgUG1gIGlzIHRoZSBtb2RlIHZhbHVlOlxuICAgKiAtIDA6IG5vdCByZWNvZ25pemVkXG4gICAqIC0gMTogc2V0XG4gICAqIC0gMjogcmVzZXRcbiAgICogLSAzOiBwZXJtYW5lbnRseSBzZXRcbiAgICogLSA0OiBwZXJtYW5lbnRseSByZXNldFxuICAgKlxuICAgKiBGb3IgbW9kZXMgbm90IHVuZGVyc3Rvb2QgeHRlcm0uanMgYWx3YXlzIHJldHVybnMgYG5vdFJlY29nbml6ZWRgLiBJbiBnZW5lcmFsIHRoaXMgbWVhbnMsXG4gICAqIHRoYXQgYSBjZXJ0YWluIG9wZXJhdGlvbiBtb2RlIGlzIG5vdCBpbXBsZW1lbnRlZCBhbmQgY2Fubm90IGJlIHVzZWQuXG4gICAqXG4gICAqIE1vZGVzIGNoYW5naW5nIHRoZSBhY3RpdmUgdGVybWluYWwgYnVmZmVyICg0NywgMTA0NywgMTA0OSkgYXJlIG5vdCBzdWJxdWVyaWVkXG4gICAqIGFuZCBvbmx5IHJlcG9ydCwgd2hldGhlciB0aGUgYWx0ZXJuYXRlIGJ1ZmZlciBpcyBzZXQuXG4gICAqXG4gICAqIE1vdXNlIGVuY29kaW5ncyBhbmQgbW91c2UgcHJvdG9jb2xzIGFyZSBoYW5kbGVkIG11dHVhbCBleGNsdXNpdmUsXG4gICAqIHRodXMgb25seSBvbmUgb2YgZWFjaCBvZiB0aG9zZSBjYW4gYmUgc2V0IGF0IGEgZ2l2ZW4gdGltZS5cbiAgICpcbiAgICogVGhlcmUgaXMgYSBjaGFuY2UsIHRoYXQgc29tZSBtb2RlIHJlcG9ydHMgYXJlIG5vdCBmdWxseSBpbiBsaW5lIHdpdGggeHRlcm0uanMnIGJlaGF2aW9yLFxuICAgKiBlLmcuIGlmIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGFscmVhZHkgZXhwb3NlcyBhIGNlcnRhaW4gYmVoYXZpb3IuIElmIHlvdSBmaW5kXG4gICAqIGRpc2NyZXBhbmNpZXMgaW4gdGhlIG1vZGUgcmVwb3J0cywgcGxlYXNlIGZpbGUgYSBidWcuXG4gICAqL1xuICBwdWJsaWMgcmVxdWVzdE1vZGUocGFyYW1zOiBJUGFyYW1zLCBhbnNpOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgLy8gcmV0dXJuIHZhbHVlIGFzIGluIERFQ1JQTVxuICAgIGNvbnN0IGVudW0gViB7XG4gICAgICBOT1RfUkVDT0dOSVpFRCA9IDAsXG4gICAgICBTRVQgPSAxLFxuICAgICAgUkVTRVQgPSAyLFxuICAgICAgUEVSTUFORU5UTFlfU0VUID0gMyxcbiAgICAgIFBFUk1BTkVOVExZX1JFU0VUID0gNFxuICAgIH1cblxuICAgIC8vIGFjY2VzcyBoZWxwZXJzXG4gICAgY29uc3QgZG0gPSB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXM7XG4gICAgY29uc3QgeyBhY3RpdmVQcm90b2NvbDogbW91c2VQcm90b2NvbCwgYWN0aXZlRW5jb2Rpbmc6IG1vdXNlRW5jb2RpbmcgfSA9IHRoaXMuX2NvcmVNb3VzZVNlcnZpY2U7XG4gICAgY29uc3QgY3MgPSB0aGlzLl9jb3JlU2VydmljZTtcbiAgICBjb25zdCB7IGJ1ZmZlcnMsIGNvbHMgfSA9IHRoaXMuX2J1ZmZlclNlcnZpY2U7XG4gICAgY29uc3QgeyBhY3RpdmUsIGFsdCB9ID0gYnVmZmVycztcbiAgICBjb25zdCBvcHRzID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucztcblxuICAgIGNvbnN0IGYgPSAobTogbnVtYmVyLCB2OiBWKTogYm9vbGVhbiA9PiB7XG4gICAgICBjcy50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bJHthbnNpID8gJycgOiAnPyd9JHttfTske3Z9JHlgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgYjJ2ID0gKHZhbHVlOiBib29sZWFuKTogViA9PiB2YWx1ZSA/IFYuU0VUIDogVi5SRVNFVDtcblxuICAgIGNvbnN0IHAgPSBwYXJhbXMucGFyYW1zWzBdO1xuXG4gICAgaWYgKGFuc2kpIHtcbiAgICAgIGlmIChwID09PSAyKSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1JFU0VUKTtcbiAgICAgIGlmIChwID09PSA0KSByZXR1cm4gZihwLCBiMnYoY3MubW9kZXMuaW5zZXJ0TW9kZSkpO1xuICAgICAgaWYgKHAgPT09IDEyKSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1NFVCk7XG4gICAgICBpZiAocCA9PT0gMjApIHJldHVybiBmKHAsIGIydihvcHRzLmNvbnZlcnRFb2wpKTtcbiAgICAgIHJldHVybiBmKHAsIFYuTk9UX1JFQ09HTklaRUQpO1xuICAgIH1cblxuICAgIGlmIChwID09PSAxKSByZXR1cm4gZihwLCBiMnYoZG0uYXBwbGljYXRpb25DdXJzb3JLZXlzKSk7XG4gICAgaWYgKHAgPT09IDMpIHJldHVybiBmKHAsIG9wdHMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyA/IChjb2xzID09PSA4MCA/IFYuUkVTRVQgOiBjb2xzID09PSAxMzIgPyBWLlNFVCA6IFYuTk9UX1JFQ09HTklaRUQpIDogVi5OT1RfUkVDT0dOSVpFRCk7XG4gICAgaWYgKHAgPT09IDYpIHJldHVybiBmKHAsIGIydihkbS5vcmlnaW4pKTtcbiAgICBpZiAocCA9PT0gNykgcmV0dXJuIGYocCwgYjJ2KGRtLndyYXBhcm91bmQpKTtcbiAgICBpZiAocCA9PT0gOCkgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9TRVQpO1xuICAgIGlmIChwID09PSA5KSByZXR1cm4gZihwLCBiMnYobW91c2VQcm90b2NvbCA9PT0gJ1gxMCcpKTtcbiAgICBpZiAocCA9PT0gMTIpIHJldHVybiBmKHAsIGIydihvcHRzLmN1cnNvckJsaW5rKSk7XG4gICAgaWYgKHAgPT09IDI1KSByZXR1cm4gZihwLCBiMnYoIWNzLmlzQ3Vyc29ySGlkZGVuKSk7XG4gICAgaWYgKHAgPT09IDQ1KSByZXR1cm4gZihwLCBiMnYoZG0ucmV2ZXJzZVdyYXBhcm91bmQpKTtcbiAgICBpZiAocCA9PT0gNjYpIHJldHVybiBmKHAsIGIydihkbS5hcHBsaWNhdGlvbktleXBhZCkpO1xuICAgIGlmIChwID09PSA2NykgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9SRVNFVCk7XG4gICAgaWYgKHAgPT09IDEwMDApIHJldHVybiBmKHAsIGIydihtb3VzZVByb3RvY29sID09PSAnVlQyMDAnKSk7XG4gICAgaWYgKHAgPT09IDEwMDIpIHJldHVybiBmKHAsIGIydihtb3VzZVByb3RvY29sID09PSAnRFJBRycpKTtcbiAgICBpZiAocCA9PT0gMTAwMykgcmV0dXJuIGYocCwgYjJ2KG1vdXNlUHJvdG9jb2wgPT09ICdBTlknKSk7XG4gICAgaWYgKHAgPT09IDEwMDQpIHJldHVybiBmKHAsIGIydihkbS5zZW5kRm9jdXMpKTtcbiAgICBpZiAocCA9PT0gMTAwNSkgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9SRVNFVCk7XG4gICAgaWYgKHAgPT09IDEwMDYpIHJldHVybiBmKHAsIGIydihtb3VzZUVuY29kaW5nID09PSAnU0dSJykpO1xuICAgIGlmIChwID09PSAxMDE1KSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1JFU0VUKTtcbiAgICBpZiAocCA9PT0gMTAxNikgcmV0dXJuIGYocCwgYjJ2KG1vdXNlRW5jb2RpbmcgPT09ICdTR1JfUElYRUxTJykpO1xuICAgIGlmIChwID09PSAxMDQ4KSByZXR1cm4gZihwLCBWLlNFVCk7IC8vIHh0ZXJtIGFsd2F5cyByZXR1cm5zIFNFVCBoZXJlXG4gICAgaWYgKHAgPT09IDQ3IHx8IHAgPT09IDEwNDcgfHwgcCA9PT0gMTA0OSkgcmV0dXJuIGYocCwgYjJ2KGFjdGl2ZSA9PT0gYWx0KSk7XG4gICAgaWYgKHAgPT09IDIwMDQpIHJldHVybiBmKHAsIGIydihkbS5icmFja2V0ZWRQYXN0ZU1vZGUpKTtcbiAgICByZXR1cm4gZihwLCBWLk5PVF9SRUNPR05JWkVEKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gd3JpdGUgY29sb3IgaW5mb3JtYXRpb24gcGFja2VkIHdpdGggY29sb3IgbW9kZS5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZUF0dHJDb2xvcihjb2xvcjogbnVtYmVyLCBtb2RlOiBudW1iZXIsIGMxOiBudW1iZXIsIGMyOiBudW1iZXIsIGMzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChtb2RlID09PSAyKSB7XG4gICAgICBjb2xvciB8PSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgIGNvbG9yICY9IH5BdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgY29sb3IgfD0gQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW2MxLCBjMiwgYzNdKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IDUpIHtcbiAgICAgIGNvbG9yICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICBjb2xvciB8PSBBdHRyaWJ1dGVzLkNNX1AyNTYgfCAoYzEgJiAweGZmKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBleHRyYWN0IGFuZCBhcHBseSBjb2xvciBwYXJhbXMvc3VicGFyYW1zLlxuICAgKiBSZXR1cm5zIGFkdmFuY2UgZm9yIHBhcmFtcyBpbmRleC5cbiAgICovXG4gIHByaXZhdGUgX2V4dHJhY3RDb2xvcihwYXJhbXM6IElQYXJhbXMsIHBvczogbnVtYmVyLCBhdHRyOiBJQXR0cmlidXRlRGF0YSk6IG51bWJlciB7XG4gICAgLy8gbm9ybWFsaXplIHBhcmFtc1xuICAgIC8vIG1lYW5pbmc6IFt0YXJnZXQsIENNLCBpZ24sIHZhbCwgdmFsLCB2YWxdXG4gICAgLy8gUkdCICAgIDogWyAzOC80OCwgIDIsIGlnbiwgICByLCAgIGcsICAgYl1cbiAgICAvLyBQMjU2ICAgOiBbIDM4LzQ4LCAgNSwgaWduLCAgIHYsIGlnbiwgaWduXVxuICAgIGNvbnN0IGFjY3UgPSBbMCwgMCwgLTEsIDAsIDAsIDBdO1xuXG4gICAgLy8gYWxpZ25tZW50IHBsYWNlaG9sZGVyIGZvciBub24gY29sb3Igc3BhY2Ugc2VxdWVuY2VzXG4gICAgbGV0IGNTcGFjZSA9IDA7XG5cbiAgICAvLyByZXR1cm4gYWR2YW5jZSB3ZSB0b29rIGluIHBhcmFtc1xuICAgIGxldCBhZHZhbmNlID0gMDtcblxuICAgIGRvIHtcbiAgICAgIGFjY3VbYWR2YW5jZSArIGNTcGFjZV0gPSBwYXJhbXMucGFyYW1zW3BvcyArIGFkdmFuY2VdO1xuICAgICAgaWYgKHBhcmFtcy5oYXNTdWJQYXJhbXMocG9zICsgYWR2YW5jZSkpIHtcbiAgICAgICAgY29uc3Qgc3VicGFyYW1zID0gcGFyYW1zLmdldFN1YlBhcmFtcyhwb3MgKyBhZHZhbmNlKSE7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmIChhY2N1WzFdID09PSA1KSB7XG4gICAgICAgICAgICBjU3BhY2UgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY2N1W2FkdmFuY2UgKyBpICsgMSArIGNTcGFjZV0gPSBzdWJwYXJhbXNbaV07XG4gICAgICAgIH0gd2hpbGUgKCsraSA8IHN1YnBhcmFtcy5sZW5ndGggJiYgaSArIGFkdmFuY2UgKyAxICsgY1NwYWNlIDwgYWNjdS5sZW5ndGgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgaWYgY2FuIGRlY2lkZSBjb2xvciBtb2RlIHdpdGggc2VtaWNvbG9uc1xuICAgICAgaWYgKChhY2N1WzFdID09PSA1ICYmIGFkdmFuY2UgKyBjU3BhY2UgPj0gMilcbiAgICAgICAgfHwgKGFjY3VbMV0gPT09IDIgJiYgYWR2YW5jZSArIGNTcGFjZSA+PSA1KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIG9mZnNldCBjb2xvclNwYWNlIHNsb3QgZm9yIHNlbWljb2xvbiBtb2RlXG4gICAgICBpZiAoYWNjdVsxXSkge1xuICAgICAgICBjU3BhY2UgPSAxO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKCsrYWR2YW5jZSArIHBvcyA8IHBhcmFtcy5sZW5ndGggJiYgYWR2YW5jZSArIGNTcGFjZSA8IGFjY3UubGVuZ3RoKTtcblxuICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcyB0byAwXG4gICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhY2N1Lmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoYWNjdVtpXSA9PT0gLTEpIHtcbiAgICAgICAgYWNjdVtpXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgY29sb3JzXG4gICAgc3dpdGNoIChhY2N1WzBdKSB7XG4gICAgICBjYXNlIDM4OlxuICAgICAgICBhdHRyLmZnID0gdGhpcy5fdXBkYXRlQXR0ckNvbG9yKGF0dHIuZmcsIGFjY3VbMV0sIGFjY3VbM10sIGFjY3VbNF0sIGFjY3VbNV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDg6XG4gICAgICAgIGF0dHIuYmcgPSB0aGlzLl91cGRhdGVBdHRyQ29sb3IoYXR0ci5iZywgYWNjdVsxXSwgYWNjdVszXSwgYWNjdVs0XSwgYWNjdVs1XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1ODpcbiAgICAgICAgYXR0ci5leHRlbmRlZCA9IGF0dHIuZXh0ZW5kZWQuY2xvbmUoKTtcbiAgICAgICAgYXR0ci5leHRlbmRlZC51bmRlcmxpbmVDb2xvciA9IHRoaXMuX3VwZGF0ZUF0dHJDb2xvcihhdHRyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yLCBhY2N1WzFdLCBhY2N1WzNdLCBhY2N1WzRdLCBhY2N1WzVdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWR2YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTR1IgNCBzdWJwYXJhbXM6XG4gICAqICAgIDQ6MCAgIC0gICBlcXVhbCB0byBTR1IgMjQgKHR1cm4gb2ZmIGFsbCB1bmRlcmxpbmUpXG4gICAqICAgIDQ6MSAgIC0gICBlcXVhbCB0byBTR1IgNCAoc2luZ2xlIHVuZGVybGluZSlcbiAgICogICAgNDoyICAgLSAgIGVxdWFsIHRvIFNHUiAyMSAoZG91YmxlIHVuZGVybGluZSlcbiAgICogICAgNDozICAgLSAgIGN1cmx5IHVuZGVybGluZVxuICAgKiAgICA0OjQgICAtICAgZG90dGVkIHVuZGVybGluZVxuICAgKiAgICA0OjUgICAtICAgZGFzaGVkIHVuZGVybGluZVxuICAgKi9cbiAgcHJpdmF0ZSBfcHJvY2Vzc1VuZGVybGluZShzdHlsZTogbnVtYmVyLCBhdHRyOiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIC8vIHRyZWF0IGV4dGVuZGVkIGF0dHJzIGFzIGltbXV0YWJsZSwgdGh1cyBhbHdheXMgY2xvbmUgZnJvbSBvbGQgb25lXG4gICAgLy8gdGhpcyBpcyBuZWVkZWQgc2luY2UgdGhlIGJ1ZmZlciBvbmx5IGhvbGRzIHJlZmVyZW5jZXMgdG8gaXRcbiAgICBhdHRyLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZC5jbG9uZSgpO1xuXG4gICAgLy8gZGVmYXVsdCB0byAxID09IHNpbmdsZSB1bmRlcmxpbmVcbiAgICBpZiAoIX5zdHlsZSB8fCBzdHlsZSA+IDUpIHtcbiAgICAgIHN0eWxlID0gMTtcbiAgICB9XG4gICAgYXR0ci5leHRlbmRlZC51bmRlcmxpbmVTdHlsZSA9IHN0eWxlO1xuICAgIGF0dHIuZmcgfD0gRmdGbGFncy5VTkRFUkxJTkU7XG5cbiAgICAvLyAwIGRlYWN0aXZhdGVzIHVuZGVybGluZVxuICAgIGlmIChzdHlsZSA9PT0gMCkge1xuICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5VTkRFUkxJTkU7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIEhBU19FWFRFTkRFRCBpbiBCR1xuICAgIGF0dHIudXBkYXRlRXh0ZW5kZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3Byb2Nlc3NTR1IwKGF0dHI6IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgYXR0ci5mZyA9IERFRkFVTFRfQVRUUl9EQVRBLmZnO1xuICAgIGF0dHIuYmcgPSBERUZBVUxUX0FUVFJfREFUQS5iZztcbiAgICBhdHRyLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZC5jbG9uZSgpO1xuICAgIC8vIFJlc2V0IHVuZGVybGluZSBzdHlsZSBhbmQgY29sb3IuIE5vdGUgdGhhdCB3ZSBkb24ndCB3YW50IHRvIHJlc2V0IG90aGVyXG4gICAgLy8gZmllbGRzIHN1Y2ggYXMgdGhlIHVybCBpZC5cbiAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlID0gVW5kZXJsaW5lU3R5bGUuTk9ORTtcbiAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgYXR0ci51cGRhdGVFeHRlbmRlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBtICBDaGFyYWN0ZXIgQXR0cmlidXRlcyAoU0dSKS5cbiAgICpcbiAgICogQHZ0OiAjUFtTZWUgYmVsb3cgZm9yIHN1cHBvcnRlZCBhdHRyaWJ1dGVzLl0gICAgQ1NJIFNHUiAgIFwiU2VsZWN0IEdyYXBoaWMgUmVuZGl0aW9uXCIgIFwiQ1NJIFBtIG1cIiAgXCJTZXQvUmVzZXQgdmFyaW91cyB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogU0dSIHNlbGVjdHMgb25lIG9yIG1vcmUgY2hhcmFjdGVyIGF0dHJpYnV0ZXMgYXQgdGhlIHNhbWUgdGltZS4gTXVsdGlwbGUgcGFyYW1zICh1cCB0byAzMilcbiAgICogYXJlIGFwcGxpZWQgaW4gb3JkZXIgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBUaGUgY2hhbmdlZCBhdHRyaWJ1dGVzIGFyZSBhcHBsaWVkIHRvIGFsbCBuZXdcbiAgICogY2hhcmFjdGVycyByZWNlaXZlZC4gSWYgeW91IG1vdmUgY2hhcmFjdGVycyBpbiB0aGUgdmlld3BvcnQgYnkgc2Nyb2xsaW5nIG9yIGFueSBvdGhlciBtZWFucyxcbiAgICogdGhlbiB0aGUgYXR0cmlidXRlcyBtb3ZlIHdpdGggdGhlIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXMgYnkgU0dSOlxuICAgKlxuICAgKiB8IFBhcmFtICAgICB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAwICAgICAgICAgfCBOb3JtYWwgKGRlZmF1bHQpLiBSZXNldHMgYW55IG90aGVyIHByZWNlZGluZyBTR1IuICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEgICAgICAgICB8IEJvbGQuIChhbHNvIHNlZSBgb3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yc2ApICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgICAgIHwgRmFpbnQsIGRlY3JlYXNlZCBpbnRlbnNpdHkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzICAgICAgICAgfCBJdGFsaWMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQgICAgICAgICB8IFVuZGVybGluZWQgKHNlZSBiZWxvdyBmb3Igc3R5bGUgc3VwcG9ydCkuICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNSAgICAgICAgIHwgU2xvd2x5IGJsaW5raW5nLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCA2ICAgICAgICAgfCBSYXBpZGx5IGJsaW5raW5nLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDcgICAgICAgICB8IEludmVyc2UuIEZsaXBzIGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3IuICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgOCAgICAgICAgIHwgSW52aXNpYmxlIChoaWRkZW4pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA5ICAgICAgICAgfCBDcm9zc2VkLW91dCBjaGFyYWN0ZXJzIChzdHJpa2V0aHJvdWdoKS4gICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDIxICAgICAgICB8IERvdWJseSB1bmRlcmxpbmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjIgICAgICAgIHwgTm9ybWFsIChuZWl0aGVyIGJvbGQgbm9yIGZhaW50KS4gICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyMyAgICAgICAgfCBObyBpdGFsaWMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI0ICAgICAgICB8IE5vdCB1bmRlcmxpbmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjUgICAgICAgIHwgU3RlYWR5IChub3QgYmxpbmtpbmcpLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyNyAgICAgICAgfCBQb3NpdGl2ZSAobm90IGludmVyc2UpLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI4ICAgICAgICB8IFZpc2libGUgKG5vdCBoaWRkZW4pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjkgICAgICAgIHwgTm90IENyb3NzZWQtb3V0IChzdHJpa2V0aHJvdWdoKS4gICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzMCAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBCbGFjay4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMxICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IFJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzIgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogR3JlZW4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzMyAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBZZWxsb3cuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDM0ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IEJsdWUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzUgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogTWFnZW50YS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzNiAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBDeWFuLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDM3ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IFdoaXRlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzggICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogRXh0ZW5kZWQgY29sb3IuICAgICAgICAgICAgICAgICAgICAgICAgfCAjUFtTdXBwb3J0IGZvciBSR0IgYW5kIGluZGV4ZWQgY29sb3JzLCBzZWUgYmVsb3cuXSB8XG4gICAqIHwgMzkgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogRGVmYXVsdCAob3JpZ2luYWwpLiAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0MCAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBCbGFjay4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQxICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IFJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDIgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogR3JlZW4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0MyAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBZZWxsb3cuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ0ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IEJsdWUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDUgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogTWFnZW50YS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0NiAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBDeWFuLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ3ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IFdoaXRlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDggICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogRXh0ZW5kZWQgY29sb3IuICAgICAgICAgICAgICAgICAgICAgICAgfCAjUFtTdXBwb3J0IGZvciBSR0IgYW5kIGluZGV4ZWQgY29sb3JzLCBzZWUgYmVsb3cuXSB8XG4gICAqIHwgNDkgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogRGVmYXVsdCAob3JpZ2luYWwpLiAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA1MyAgICAgICAgfCBPdmVybGluZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDU1ICAgICAgICB8IE5vdCBPdmVybGluZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNTggICAgICAgIHwgVW5kZXJsaW5lIGNvbG9yOiBFeHRlbmRlZCBjb2xvci4gICAgICAgICAgICAgICAgICAgICAgICAgfCAjUFtTdXBwb3J0IGZvciBSR0IgYW5kIGluZGV4ZWQgY29sb3JzLCBzZWUgYmVsb3cuXSB8XG4gICAqIHwgOTAgLSA5NyAgIHwgQnJpZ2h0IGZvcmVncm91bmQgY29sb3IgKGFuYWxvZ291cyB0byAzMCAtIDM3KS4gICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxMDAgLSAxMDcgfCBCcmlnaHQgYmFja2dyb3VuZCBjb2xvciAoYW5hbG9nb3VzIHRvIDQwIC0gNDcpLiAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKiBVbmRlcmxpbmUgc3VwcG9ydHMgc3VicGFyYW1zIHRvIGRlbm90ZSB0aGUgc3R5bGUgaW4gdGhlIGZvcm0gYDQgOiB4YDpcbiAgICpcbiAgICogfCB4ICAgICAgfCBNZWFuaW5nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0gfFxuICAgKiB8IDAgICAgICB8IE5vIHVuZGVybGluZS4gU2FtZSBhcyBgU0dSIDI0IG1gLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxICAgICAgfCBTaW5nbGUgdW5kZXJsaW5lLiBTYW1lIGFzIGBTR1IgNCBtYC4gICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgIHwgRG91YmxlIHVuZGVybGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMgICAgICB8IEN1cmx5IHVuZGVybGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0ICAgICAgfCBEb3R0ZWQgdW5kZXJsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNSAgICAgIHwgRGFzaGVkIHVuZGVybGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IG90aGVyICB8IFNpbmdsZSB1bmRlcmxpbmUuIFNhbWUgYXMgYFNHUiA0IG1gLiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICpcbiAgICogRXh0ZW5kZWQgY29sb3JzIGFyZSBzdXBwb3J0ZWQgZm9yIGZvcmVncm91bmQgKFBzPTM4KSwgYmFja2dyb3VuZCAoUHM9NDgpIGFuZCB1bmRlcmxpbmUgKFBzPTU4KVxuICAgKiBhcyBmb2xsb3dzOlxuICAgKlxuICAgKiB8IFBzICsgMSB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMCAgICAgIHwgSW1wbGVtZW50YXRpb24gZGVmaW5lZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEgICAgICB8IFRyYW5zcGFyZW50LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCAyICAgICAgfCBSR0IgY29sb3IgYXMgYFBzIDsgMiA7IFIgOyBHIDsgQmAgb3IgYFBzIDogMiA6IDogUiA6IEcgOiBCYC4gIHwgI1kgICAgICB8XG4gICAqIHwgMyAgICAgIHwgQ01ZIGNvbG9yLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDQgICAgICB8IENNWUsgY29sb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCA1ICAgICAgfCBJbmRleGVkICgyNTYgY29sb3JzKSBhcyBgUHMgOyA1IDsgSU5ERVhgIG9yIGBQcyA6IDUgOiBJTkRFWGAuIHwgI1kgICAgICB8XG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBibGlua2luZyBpcyBpbXBsZW1lbnRlZCBpbiBhdHRycywgYnV0IG5vdCB3b3JraW5nIGluIHJlbmRlcmVycz9cbiAgICogRklYTUU6IHJlbW92ZSBkZWFkIGJyYW5jaCBmb3IgcD0xMDBcbiAgICovXG4gIHB1YmxpYyBjaGFyQXR0cmlidXRlcyhwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICAvLyBPcHRpbWl6ZSBhIHNpbmdsZSBTR1IwLlxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAxICYmIHBhcmFtcy5wYXJhbXNbMF0gPT09IDApIHtcbiAgICAgIHRoaXMuX3Byb2Nlc3NTR1IwKHRoaXMuX2N1ckF0dHJEYXRhKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGwgPSBwYXJhbXMubGVuZ3RoO1xuICAgIGxldCBwO1xuICAgIGNvbnN0IGF0dHIgPSB0aGlzLl9jdXJBdHRyRGF0YTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBwID0gcGFyYW1zLnBhcmFtc1tpXTtcbiAgICAgIGlmIChwID49IDMwICYmIHAgPD0gMzcpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgOFxuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDMwKTtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSA0MCAmJiBwIDw9IDQ3KSB7XG4gICAgICAgIC8vIGJnIGNvbG9yIDhcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSA0MCk7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gOTAgJiYgcCA8PSA5Nykge1xuICAgICAgICAvLyBmZyBjb2xvciAxNlxuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDkwKSB8IDg7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gMTAwICYmIHAgPD0gMTA3KSB7XG4gICAgICAgIC8vIGJnIGNvbG9yIDE2XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gMTAwKSB8IDg7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDApIHtcbiAgICAgICAgLy8gZGVmYXVsdFxuICAgICAgICB0aGlzLl9wcm9jZXNzU0dSMChhdHRyKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMSkge1xuICAgICAgICAvLyBib2xkIHRleHRcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJPTEQ7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDMpIHtcbiAgICAgICAgLy8gaXRhbGljIHRleHRcbiAgICAgICAgYXR0ci5iZyB8PSBCZ0ZsYWdzLklUQUxJQztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNCkge1xuICAgICAgICAvLyB1bmRlcmxpbmVkIHRleHRcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLlVOREVSTElORTtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1VuZGVybGluZShwYXJhbXMuaGFzU3ViUGFyYW1zKGkpID8gcGFyYW1zLmdldFN1YlBhcmFtcyhpKSFbMF0gOiBVbmRlcmxpbmVTdHlsZS5TSU5HTEUsIGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA1KSB7XG4gICAgICAgIC8vIGJsaW5rXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5CTElOSztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNykge1xuICAgICAgICAvLyBpbnZlcnNlIGFuZCBwb3NpdGl2ZVxuICAgICAgICAvLyB0ZXN0IHdpdGg6IGVjaG8gLWUgJ1xcZVszMW1cXGVbNDJtaGVsbG9cXGVbN213b3JsZFxcZVsyN21oaVxcZVttJ1xuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuSU5WRVJTRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gOCkge1xuICAgICAgICAvLyBpbnZpc2libGVcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLklOVklTSUJMRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gOSkge1xuICAgICAgICAvLyBzdHJpa2V0aHJvdWdoXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5TVFJJS0VUSFJPVUdIO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyKSB7XG4gICAgICAgIC8vIGRpbW1lZCB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5ESU07XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIxKSB7XG4gICAgICAgIC8vIGRvdWJsZSB1bmRlcmxpbmVcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1VuZGVybGluZShVbmRlcmxpbmVTdHlsZS5ET1VCTEUsIGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyMikge1xuICAgICAgICAvLyBub3QgYm9sZCBub3IgZmFpbnRcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5CT0xEO1xuICAgICAgICBhdHRyLmJnICY9IH5CZ0ZsYWdzLkRJTTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjMpIHtcbiAgICAgICAgLy8gbm90IGl0YWxpY1xuICAgICAgICBhdHRyLmJnICY9IH5CZ0ZsYWdzLklUQUxJQztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjQpIHtcbiAgICAgICAgLy8gbm90IHVuZGVybGluZWRcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5VTkRFUkxJTkU7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NVbmRlcmxpbmUoVW5kZXJsaW5lU3R5bGUuTk9ORSwgYXR0cik7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI1KSB7XG4gICAgICAgIC8vIG5vdCBibGlua1xuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNykge1xuICAgICAgICAvLyBub3QgaW52ZXJzZVxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLklOVkVSU0U7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI4KSB7XG4gICAgICAgIC8vIG5vdCBpbnZpc2libGVcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5JTlZJU0lCTEU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI5KSB7XG4gICAgICAgIC8vIG5vdCBzdHJpa2V0aHJvdWdoXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuU1RSSUtFVEhST1VHSDtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzkpIHtcbiAgICAgICAgLy8gcmVzZXQgZmdcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmZnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNDkpIHtcbiAgICAgICAgLy8gcmVzZXQgYmdcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmJnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzggfHwgcCA9PT0gNDggfHwgcCA9PT0gNTgpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgMjU2IGFuZCBSR0JcbiAgICAgICAgaSArPSB0aGlzLl9leHRyYWN0Q29sb3IocGFyYW1zLCBpLCBhdHRyKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNTMpIHtcbiAgICAgICAgLy8gb3ZlcmxpbmVcbiAgICAgICAgYXR0ci5iZyB8PSBCZ0ZsYWdzLk9WRVJMSU5FO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA1NSkge1xuICAgICAgICAvLyBub3Qgb3ZlcmxpbmVcbiAgICAgICAgYXR0ci5iZyAmPSB+QmdGbGFncy5PVkVSTElORTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNTkpIHtcbiAgICAgICAgYXR0ci5leHRlbmRlZCA9IGF0dHIuZXh0ZW5kZWQuY2xvbmUoKTtcbiAgICAgICAgYXR0ci5leHRlbmRlZC51bmRlcmxpbmVDb2xvciA9IC0xO1xuICAgICAgICBhdHRyLnVwZGF0ZUV4dGVuZGVkKCk7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDEwMCkgeyAvLyBGSVhNRTogZGVhZCBicmFuY2gsIHA9MTAwIGFscmVhZHkgaGFuZGxlZCBhYm92ZSFcbiAgICAgICAgLy8gcmVzZXQgZmcvYmdcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmZnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmJnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gU0dSIGF0dHJpYnV0ZTogJWQuJywgcCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBuICBEZXZpY2UgU3RhdHVzIFJlcG9ydCAoRFNSKS5cbiAgICogICAgIFBzID0gNSAgLT4gU3RhdHVzIFJlcG9ydC4gIFJlc3VsdCAoYGBPSycnKSBpc1xuICAgKiAgIENTSSAwIG5cbiAgICogICAgIFBzID0gNiAgLT4gUmVwb3J0IEN1cnNvciBQb3NpdGlvbiAoQ1BSKSBbcm93O2NvbHVtbl0uXG4gICAqICAgUmVzdWx0IGlzXG4gICAqICAgQ1NJIHIgOyBjIFJcbiAgICogQ1NJID8gUHMgblxuICAgKiAgIERldmljZSBTdGF0dXMgUmVwb3J0IChEU1IsIERFQy1zcGVjaWZpYykuXG4gICAqICAgICBQcyA9IDYgIC0+IFJlcG9ydCBDdXJzb3IgUG9zaXRpb24gKENQUikgW3Jvdztjb2x1bW5dIGFzIENTSVxuICAgKiAgICAgPyByIDsgYyBSIChhc3N1bWVzIHBhZ2UgaXMgemVybykuXG4gICAqICAgICBQcyA9IDEgNSAgLT4gUmVwb3J0IFByaW50ZXIgc3RhdHVzIGFzIENTSSA/IDEgMCAgbiAgKHJlYWR5KS5cbiAgICogICAgIG9yIENTSSA/IDEgMSAgbiAgKG5vdCByZWFkeSkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gUmVwb3J0IFVESyBzdGF0dXMgYXMgQ1NJID8gMiAwICBuICAodW5sb2NrZWQpXG4gICAqICAgICBvciBDU0kgPyAyIDEgIG4gIChsb2NrZWQpLlxuICAgKiAgICAgUHMgPSAyIDYgIC0+IFJlcG9ydCBLZXlib2FyZCBzdGF0dXMgYXNcbiAgICogICBDU0kgPyAyIDcgIDsgIDEgIDsgIDAgIDsgIDAgIG4gIChOb3J0aCBBbWVyaWNhbikuXG4gICAqICAgVGhlIGxhc3QgdHdvIHBhcmFtZXRlcnMgYXBwbHkgdG8gVlQ0MDAgJiB1cCwgYW5kIGRlbm90ZSBrZXktXG4gICAqICAgYm9hcmQgcmVhZHkgYW5kIExLMDEgcmVzcGVjdGl2ZWx5LlxuICAgKiAgICAgUHMgPSA1IDMgIC0+IFJlcG9ydCBMb2NhdG9yIHN0YXR1cyBhc1xuICAgKiAgIENTSSA/IDUgMyAgbiAgTG9jYXRvciBhdmFpbGFibGUsIGlmIGNvbXBpbGVkLWluLCBvclxuICAgKiAgIENTSSA/IDUgMCAgbiAgTm8gTG9jYXRvciwgaWYgbm90LlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBEU1IgICBcIkRldmljZSBTdGF0dXMgUmVwb3J0XCIgIFwiQ1NJIFBzIG5cIiAgXCJSZXF1ZXN0IGN1cnNvciBwb3NpdGlvbiAoQ1BSKSB3aXRoIGBQc2AgPSA2LlwiXG4gICAqL1xuICBwdWJsaWMgZGV2aWNlU3RhdHVzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSA1OlxuICAgICAgICAvLyBzdGF0dXMgcmVwb3J0XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVswbmApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgLy8gY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueSArIDE7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLl9hY3RpdmVCdWZmZXIueCArIDE7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVske3l9OyR7eH1SYCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEB2dDogI1BbT25seSBDUFIgaXMgc3VwcG9ydGVkLl0gIENTSSBERUNEU1IgIFwiREVDIERldmljZSBTdGF0dXMgUmVwb3J0XCIgIFwiQ1NJID8gUHMgblwiICBcIk9ubHkgQ1BSIGlzIHN1cHBvcnRlZCAoc2FtZSBhcyBEU1IpLlwiXG4gIHB1YmxpYyBkZXZpY2VTdGF0dXNQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIG1vZGVybiB4dGVybSBkb2VzbnQgc2VlbSB0b1xuICAgIC8vIHJlc3BvbmQgdG8gYW55IG9mIHRoZXNlIGV4Y2VwdCA/NiwgNiwgYW5kIDVcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgLy8gY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueSArIDE7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLl9hY3RpdmVCdWZmZXIueCArIDE7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVs/JHt5fTske3h9UmApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTU6XG4gICAgICAgIC8vIG5vIHByaW50ZXJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzExbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjU6XG4gICAgICAgIC8vIGRvbnQgc3VwcG9ydCB1c2VyIGRlZmluZWQga2V5c1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/MjFuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNjpcbiAgICAgICAgLy8gbm9ydGggYW1lcmljYW4ga2V5Ym9hcmRcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzI3OzE7MDswbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTM6XG4gICAgICAgIC8vIG5vIGRlYyBsb2NhdG9yL21vdXNlXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz81MG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSAhIHAgICBTb2Z0IHRlcm1pbmFsIHJlc2V0IChERUNTVFIpLlxuICAgKiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGU0LTEwLmh0bWxcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDU1RSICBcIlNvZnQgVGVybWluYWwgUmVzZXRcIiAgIFwiQ1NJICEgcFwiICAgXCJSZXNldCBzZXZlcmFsIHRlcm1pbmFsIGF0dHJpYnV0ZXMgdG8gaW5pdGlhbCBzdGF0ZS5cIlxuICAgKiBUaGVyZSBhcmUgdHdvIHRlcm1pbmFsIHJlc2V0IHNlcXVlbmNlcyAtIFJJUyBhbmQgREVDU1RSLiBXaGlsZSBSSVMgcGVyZm9ybXMgYWxtb3N0IGEgZnVsbFxuICAgKiB0ZXJtaW5hbCBib290c3RyYXAsIERFQ1NUUiBvbmx5IHJlc2V0cyBjZXJ0YWluIGF0dHJpYnV0ZXMuIEZvciBtb3N0IG5lZWRzIERFQ1NUUiBzaG91bGQgYmVcbiAgICogc3VmZmljaWVudC5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB0ZXJtaW5hbCBhdHRyaWJ1dGVzIGFyZSByZXNldCB0byBkZWZhdWx0IHZhbHVlczpcbiAgICogLSBJUk0gaXMgcmVzZXQgKGRhZmF1bHQgPSBmYWxzZSlcbiAgICogLSBzY3JvbGwgbWFyZ2lucyBhcmUgcmVzZXQgKGRlZmF1bHQgPSB2aWV3cG9ydCBzaXplKVxuICAgKiAtIGVyYXNlIGF0dHJpYnV0ZXMgYXJlIHJlc2V0IHRvIGRlZmF1bHRcbiAgICogLSBjaGFyc2V0cyBhcmUgcmVzZXRcbiAgICogLSBERUNTQyBkYXRhIGlzIHJlc2V0IHRvIGluaXRpYWwgdmFsdWVzXG4gICAqIC0gREVDT00gaXMgcmVzZXQgdG8gYWJzb2x1dGUgbW9kZVxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogdGhlcmUgYXJlIHNldmVyYWwgbW9yZSBhdHRyaWJ1dGVzIG1pc3NpbmcgKHNlZSBWVDUyMCBtYW51YWwpXG4gICAqL1xuICBwdWJsaWMgc29mdFJlc2V0KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKTtcblxuICAgIC8vIHJlc2V0IERFQ1NDIGRhdGFcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYID0gMDtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRZID0gdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnID0gdGhpcy5fY3VyQXR0ckRhdGEuZmc7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0ID0gdGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldDtcblxuICAgIC8vIHJlc2V0IERFQ09NXG4gICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbiA9IGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTUCBxICBTZXQgY3Vyc29yIHN0eWxlIChERUNTQ1VTUiwgVlQ1MjApLlxuICAgKiAgIFBzID0gMCAgLT4gYmxpbmtpbmcgYmxvY2suXG4gICAqICAgUHMgPSAxICAtPiBibGlua2luZyBibG9jayAoZGVmYXVsdCkuXG4gICAqICAgUHMgPSAyICAtPiBzdGVhZHkgYmxvY2suXG4gICAqICAgUHMgPSAzICAtPiBibGlua2luZyB1bmRlcmxpbmUuXG4gICAqICAgUHMgPSA0ICAtPiBzdGVhZHkgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNSAgLT4gYmxpbmtpbmcgYmFyICh4dGVybSkuXG4gICAqICAgUHMgPSA2ICAtPiBzdGVhZHkgYmFyICh4dGVybSkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NDVVNSICBcIlNldCBDdXJzb3IgU3R5bGVcIiAgXCJDU0kgUHMgU1AgcVwiICAgXCJTZXQgY3Vyc29yIHN0eWxlLlwiXG4gICAqIFN1cHBvcnRlZCBjdXJzb3Igc3R5bGVzOlxuICAgKiAgLSBlbXB0eSwgMCBvciAxOiBzdGVhZHkgYmxvY2tcbiAgICogIC0gMjogYmxpbmsgYmxvY2tcbiAgICogIC0gMzogc3RlYWR5IHVuZGVybGluZVxuICAgKiAgLSA0OiBibGluayB1bmRlcmxpbmVcbiAgICogIC0gNTogc3RlYWR5IGJhclxuICAgKiAgLSA2OiBibGluayBiYXJcbiAgICovXG4gIHB1YmxpYyBzZXRDdXJzb3JTdHlsZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBzd2l0Y2ggKHBhcmFtKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgPSAnYmxvY2snO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZSA9ICd1bmRlcmxpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTpcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZSA9ICdiYXInO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgaXNCbGlua2luZyA9IHBhcmFtICUgMiA9PT0gMTtcbiAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rID0gaXNCbGlua2luZztcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyByXG4gICAqICAgU2V0IFNjcm9sbGluZyBSZWdpb24gW3RvcDtib3R0b21dIChkZWZhdWx0ID0gZnVsbCBzaXplIG9mIHdpbi1cbiAgICogICBkb3cpIChERUNTVEJNKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDU1RCTSBcIlNldCBUb3AgYW5kIEJvdHRvbSBNYXJnaW5cIiBcIkNTSSBQcyA7IFBzIHJcIiBcIlNldCB0b3AgYW5kIGJvdHRvbSBtYXJnaW5zIG9mIHRoZSB2aWV3cG9ydCBbdG9wO2JvdHRvbV0gKGRlZmF1bHQgPSB2aWV3cG9ydCBzaXplKS5cIlxuICAgKi9cbiAgcHVibGljIHNldFNjcm9sbFJlZ2lvbihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b3AgPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgbGV0IGJvdHRvbTogbnVtYmVyO1xuXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPCAyIHx8IChib3R0b20gPSBwYXJhbXMucGFyYW1zWzFdKSA+IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyB8fCBib3R0b20gPT09IDApIHtcbiAgICAgIGJvdHRvbSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB9XG5cbiAgICBpZiAoYm90dG9tID4gdG9wKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wID0gdG9wIC0gMTtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20gPSBib3R0b20gLSAxO1xuICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyA7IFBzIHQgLSBWYXJpb3VzIHdpbmRvdyBtYW5pcHVsYXRpb25zIGFuZCByZXBvcnRzICh4dGVybSlcbiAgICpcbiAgICogTm90ZTogT25seSB0aG9zZSBsaXN0ZWQgYmVsb3cgYXJlIHN1cHBvcnRlZC4gQWxsIG90aGVycyBhcmUgbGVmdCB0byBpbnRlZ3JhdG9ycyBhbmRcbiAgICogbmVlZCBzcGVjaWFsIHRyZWF0bWVudCBiYXNlZCBvbiB0aGUgZW1iZWRkaW5nIGVudmlyb25tZW50LlxuICAgKlxuICAgKiAgICBQcyA9IDEgNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gdGV4dCBhcmVhIHNpemUgaW4gcGl4ZWxzLlxuICAgKiAgICAgIFJlc3VsdCBpcyBDU0kgNCA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICogICAgUHMgPSAxNCA7IDIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGltcGxlbWVudGVkXG4gICAqICAgIFBzID0gMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB4dGVybSBjaGFyYWN0ZXIgY2VsbCBzaXplIGluIHBpeGVscy5cbiAgICogICAgICBSZXN1bHQgaXMgQ1NJIDYgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAqICAgIFBzID0gMTggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB0aGUgc2l6ZSBvZiB0aGUgdGV4dCBhcmVhIGluIGNoYXJhY3RlcnMuXG4gICAqICAgICAgUmVzdWx0IGlzIENTSSA4IDsgaGVpZ2h0IDsgd2lkdGggdFxuICAgKiAgICBQcyA9IDIwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gd2luZG93J3MgaWNvbiBsYWJlbC5cbiAgICogICAgICBSZXN1bHQgaXMgT1NDIEwgbGFiZWwgU1RcbiAgICogICAgUHMgPSAyMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgICAgUmVwb3J0IHh0ZXJtIHdpbmRvdydzIHRpdGxlLlxuICAgKiAgICAgIFJlc3VsdCBpcyBPU0MgbCBsYWJlbCBTVFxuICAgKiAgICBQcyA9IDIyIDsgMCAgLT4gU2F2ZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgb24gc3RhY2suICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMiA7IDEgIC0+IFNhdmUgeHRlcm0gaWNvbiB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjIgOyAyICAtPiBTYXZlIHh0ZXJtIHdpbmRvdyB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA9IDIzIDsgMCAgLT4gUmVzdG9yZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgZnJvbSBzdGFjay4gICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMyA7IDEgIC0+IFJlc3RvcmUgeHRlcm0gaWNvbiB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjMgOyAyICAtPiBSZXN0b3JlIHh0ZXJtIHdpbmRvdyB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA+PSAyNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaW1wbGVtZW50ZWRcbiAgICovXG4gIHB1YmxpYyB3aW5kb3dPcHRpb25zKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICghcGFyYW1Ub1dpbmRvd09wdGlvbihwYXJhbXMucGFyYW1zWzBdLCB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kID0gKHBhcmFtcy5sZW5ndGggPiAxKSA/IHBhcmFtcy5wYXJhbXNbMV0gOiAwO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAxNDogIC8vIEdldFdpblNpemVQaXhlbHMsIHJldHVybnMgQ1NJIDQgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmIChzZWNvbmQgIT09IDIpIHtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5maXJlKFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfV0lOX1NJWkVfUElYRUxTKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTY6ICAvLyBHZXRDZWxsU2l6ZVBpeGVscywgcmV0dXJucyBDU0kgNiA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICAgICAgdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZShXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX0NFTExfU0laRV9QSVhFTFMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTg6ICAvLyBHZXRXaW5TaXplQ2hhcnMsIHJldHVybnMgQ1NJIDggOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9Wzg7JHt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N9OyR7dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfXRgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjI6ICAvLyBQdXNoVGl0bGVcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gMCB8fCBzZWNvbmQgPT09IDIpIHtcbiAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnB1c2godGhpcy5fd2luZG93VGl0bGUpO1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCA+IFNUQUNLX0xJTUlUKSB7XG4gICAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5wdXNoKHRoaXMuX2ljb25OYW1lKTtcbiAgICAgICAgICBpZiAodGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGggPiBTVEFDS19MSU1JVCkge1xuICAgICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjM6ICAvLyBQb3BUaXRsZVxuICAgICAgICBpZiAoc2Vjb25kID09PSAwIHx8IHNlY29uZCA9PT0gMikge1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZSh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnBvcCgpISk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2ljb25OYW1lU3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNldEljb25OYW1lKHRoaXMuX2ljb25OYW1lU3RhY2sucG9wKCkhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHNcbiAgICogRVNDIDdcbiAgICogICBTYXZlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKlxuICAgKiBAdnQ6ICNQW1RPRE8uLi5dICBDU0kgU0NPU0MgICBcIlNhdmUgQ3Vyc29yXCIgICBcIkNTSSBzXCIgICBcIlNhdmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogQHZ0OiAjWSBFU0MgIFNDICAgXCJTYXZlIEN1cnNvclwiICAgXCJFU0MgN1wiICAgXCJTYXZlIGN1cnNvciBwb3NpdGlvbiwgY2hhcm1hcCBhbmQgdGV4dCBhdHRyaWJ1dGVzLlwiXG4gICAqL1xuICBwdWJsaWMgc2F2ZUN1cnNvcihwYXJhbXM/OiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54O1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnID0gdGhpcy5fY3VyQXR0ckRhdGEuYmc7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldCA9IHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgdVxuICAgKiBFU0MgOFxuICAgKiAgIFJlc3RvcmUgY3Vyc29yIChBTlNJLlNZUykuXG4gICAqXG4gICAqIEB2dDogI1BbVE9ETy4uLl0gIENTSSBTQ09SQyBcIlJlc3RvcmUgQ3Vyc29yXCIgIFwiQ1NJIHVcIiAgIFwiUmVzdG9yZSBjdXJzb3IgcG9zaXRpb24sIGNoYXJtYXAgYW5kIHRleHQgYXR0cmlidXRlcy5cIlxuICAgKiBAdnQ6ICNZIEVTQyAgUkMgXCJSZXN0b3JlIEN1cnNvclwiICBcIkVTQyA4XCIgICBcIlJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICovXG4gIHB1YmxpYyByZXN0b3JlQ3Vyc29yKHBhcmFtcz86IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFggfHwgMDtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFkgLSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UsIDApO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmZnID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gKHRoaXMgYXMgYW55KS5fc2F2ZWRDaGFyc2V0O1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0KSB7XG4gICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldDtcbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE9TQyAyOyA8ZGF0YT4gU1QgKHNldCB3aW5kb3cgdGl0bGUpXG4gICAqICAgUHJveHkgdG8gc2V0IHdpbmRvdyB0aXRsZS5cbiAgICpcbiAgICogQHZ0OiAjUFtJY29uIG5hbWUgaXMgbm90IGV4cG9zZWQuXSAgIE9TQyAgICAwICAgXCJTZXQgV2luZG93cyBUaXRsZSBhbmQgSWNvbiBOYW1lXCIgIFwiT1NDIDAgOyBQdCBCRUxcIiAgXCJTZXQgd2luZG93IHRpdGxlIGFuZCBpY29uIG5hbWUuXCJcbiAgICogSWNvbiBuYW1lIGlzIG5vdCBzdXBwb3J0ZWQuIEZvciBXaW5kb3cgVGl0bGUgc2VlIGJlbG93LlxuICAgKlxuICAgKiBAdnQ6ICNZICAgICBPU0MgICAgMiAgIFwiU2V0IFdpbmRvd3MgVGl0bGVcIiAgXCJPU0MgMiA7IFB0IEJFTFwiICBcIlNldCB3aW5kb3cgdGl0bGUuXCJcbiAgICogeHRlcm0uanMgZG9lcyBub3QgbWFuaXB1bGF0ZSB0aGUgdGl0bGUgZGlyZWN0bHksIGluc3RlYWQgZXhwb3NlcyBjaGFuZ2VzIHZpYSB0aGUgZXZlbnRcbiAgICogYFRlcm1pbmFsLm9uVGl0bGVDaGFuZ2VgLlxuICAgKi9cbiAgcHVibGljIHNldFRpdGxlKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3dpbmRvd1RpdGxlID0gZGF0YTtcbiAgICB0aGlzLl9vblRpdGxlQ2hhbmdlLmZpcmUoZGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDE7IDxkYXRhPiBTVFxuICAgKiBOb3RlOiBJY29uIG5hbWUgaXMgbm90IGV4cG9zZWQuXG4gICAqL1xuICBwdWJsaWMgc2V0SWNvbk5hbWUoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5faWNvbk5hbWUgPSBkYXRhO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyA0OyA8bnVtPiA7IDx0ZXh0PiBTVCAoc2V0IEFOU0kgY29sb3IgPG51bT4gdG8gPHRleHQ+KVxuICAgKlxuICAgKiBAdnQ6ICNZICAgIE9TQyAgICA0ICAgIFwiU2V0IEFOU0kgY29sb3JcIiAgIFwiT1NDIDQgOyBjIDsgc3BlYyBCRUxcIiBcIkNoYW5nZSBjb2xvciBudW1iZXIgYGNgIHRvIHRoZSBjb2xvciBzcGVjaWZpZWQgYnkgYHNwZWNgLlwiXG4gICAqIGBjYCBpcyB0aGUgY29sb3IgaW5kZXggYmV0d2VlbiAwIGFuZCAyNTUuIFRoZSBjb2xvciBmb3JtYXQgb2YgYHNwZWNgIGlzIGRlcml2ZWQgZnJvbVxuICAgKiBgWFBhcnNlQ29sb3JgIChzZWUgT1NDIDEwIGZvciBzdXBwb3J0ZWQgZm9ybWF0cykuIFRoZXJlIG1heSBiZSBtdWx0aXBlIGBjIDsgc3BlY2AgcGFpcnMgcHJlc2VudFxuICAgKiBpbiB0aGUgc2FtZSBpbnN0cnVjdGlvbi4gSWYgYHNwZWNgIGNvbnRhaW5zIGA/YCB0aGUgdGVybWluYWwgcmV0dXJucyBhIHNlcXVlbmNlIHdpdGggdGhlXG4gICAqIGN1cnJlbnRseSBzZXQgY29sb3IuXG4gICAqL1xuICBwdWJsaWMgc2V0T3JSZXBvcnRJbmRleGVkQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZXZlbnQ6IElDb2xvckV2ZW50ID0gW107XG4gICAgY29uc3Qgc2xvdHMgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgd2hpbGUgKHNsb3RzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNsb3RzLnNoaWZ0KCkgYXMgc3RyaW5nO1xuICAgICAgY29uc3Qgc3BlYyA9IHNsb3RzLnNoaWZ0KCkgYXMgc3RyaW5nO1xuICAgICAgaWYgKC9eXFxkKyQvLmV4ZWMoaWR4KSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGlkeCk7XG4gICAgICAgIGlmIChpc1ZhbGlkQ29sb3JJbmRleChpbmRleCkpIHtcbiAgICAgICAgICBpZiAoc3BlYyA9PT0gJz8nKSB7XG4gICAgICAgICAgICBldmVudC5wdXNoKHsgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVBPUlQsIGluZGV4IH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IHBhcnNlQ29sb3Ioc3BlYyk7XG4gICAgICAgICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgZXZlbnQucHVzaCh7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuU0VULCBpbmRleCwgY29sb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChldmVudC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX29uQ29sb3IuZmlyZShldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyA4IDsgPHBhcmFtcz4gOyA8dXJpPiBTVCAtIGNyZWF0ZSBoeXBlcmxpbmtcbiAgICogT1NDIDggOyA7IFNUIC0gZmluaXNoIGh5cGVybGlua1xuICAgKlxuICAgKiBUZXN0IGNhc2U6XG4gICAqXG4gICAqIGBgYHNoXG4gICAqIHByaW50ZiAnXFxlXTg7O2h0dHA6Ly9leGFtcGxlLmNvbVxcZVxcXFxUaGlzIGlzIGEgbGlua1xcZV04OztcXGVcXFxcXFxuJ1xuICAgKiBgYGBcbiAgICpcbiAgICogQHZ0OiAjWSAgICBPU0MgICAgOCAgICBcIkNyZWF0ZSBoeXBlcmxpbmtcIiAgIFwiT1NDIDggOyBwYXJhbXMgOyB1cmkgQkVMXCIgXCJDcmVhdGUgYSBoeXBlcmxpbmsgdG8gYHVyaWAgdXNpbmcgYHBhcmFtc2AuXCJcbiAgICogYHVyaWAgaXMgYSBoeXBlcmxpbmsgc3RhcnRpbmcgd2l0aCBgaHR0cDovL2AsIGBodHRwczovL2AsIGBmdHA6Ly9gLCBgZmlsZTovL2Agb3IgYG1haWx0bzovL2AuIGBwYXJhbXNgIGlzIGFuXG4gICAqIG9wdGlvbmFsIGxpc3Qgb2Yga2V5PXZhbHVlIGFzc2lnbm1lbnRzLCBzZXBhcmF0ZWQgYnkgdGhlIDogY2hhcmFjdGVyLlxuICAgKiBFeGFtcGxlOiBgaWQ9eHl6MTIzOmZvbz1iYXI6YmF6PXF1dXhgLlxuICAgKiBDdXJyZW50bHkgb25seSB0aGUgaWQga2V5IGlzIGRlZmluZWQuIENlbGxzIHRoYXQgc2hhcmUgdGhlIHNhbWUgSUQgYW5kIFVSSSBzaGFyZSBob3ZlclxuICAgKiBmZWVkYmFjay4gVXNlIGBPU0MgOCA7IDsgQkVMYCB0byBmaW5pc2ggdGhlIGN1cnJlbnQgaHlwZXJsaW5rLlxuICAgKi9cbiAgcHVibGljIHNldEh5cGVybGluayhkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBhcmdzID0gZGF0YS5zcGxpdCgnOycpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFyZ3NbMV0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVIeXBlcmxpbmsoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfVxuICAgIGlmIChhcmdzWzBdKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9maW5pc2hIeXBlcmxpbmsoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUh5cGVybGluayhwYXJhbXM6IHN0cmluZywgdXJpOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBJdCdzIGxlZ2FsIHRvIG9wZW4gYSBuZXcgaHlwZXJsaW5rIHdpdGhvdXQgZXhwbGljaXRseSBmaW5pc2hpbmcgdGhlIHByZXZpb3VzIG9uZVxuICAgIGlmICh0aGlzLl9nZXRDdXJyZW50TGlua0lkKCkpIHtcbiAgICAgIHRoaXMuX2ZpbmlzaEh5cGVybGluaygpO1xuICAgIH1cbiAgICBjb25zdCBwYXJzZWRQYXJhbXMgPSBwYXJhbXMuc3BsaXQoJzonKTtcbiAgICBsZXQgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpZFBhcmFtSW5kZXggPSBwYXJzZWRQYXJhbXMuZmluZEluZGV4KGUgPT4gZS5zdGFydHNXaXRoKCdpZD0nKSk7XG4gICAgaWYgKGlkUGFyYW1JbmRleCAhPT0gLTEpIHtcbiAgICAgIGlkID0gcGFyc2VkUGFyYW1zW2lkUGFyYW1JbmRleF0uc2xpY2UoMykgfHwgdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZCA9IHRoaXMuX2N1ckF0dHJEYXRhLmV4dGVuZGVkLmNsb25lKCk7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQudXJsSWQgPSB0aGlzLl9vc2NMaW5rU2VydmljZS5yZWdpc3RlckxpbmsoeyBpZCwgdXJpIH0pO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLnVwZGF0ZUV4dGVuZGVkKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIF9maW5pc2hIeXBlcmxpbmsoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQgPSB0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC5jbG9uZSgpO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmV4dGVuZGVkLnVybElkID0gMDtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YS51cGRhdGVFeHRlbmRlZCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gc3BlY2lhbCBjb2xvcnMgLSBPU0MgMTAgfCAxMSB8IDEyXG4gIHByaXZhdGUgX3NwZWNpYWxDb2xvcnMgPSBbU3BlY2lhbENvbG9ySW5kZXguRk9SRUdST1VORCwgU3BlY2lhbENvbG9ySW5kZXguQkFDS0dST1VORCwgU3BlY2lhbENvbG9ySW5kZXguQ1VSU09SXTtcblxuICAvKipcbiAgICogQXBwbHkgY29sb3JzIHJlcXVlc3RzIGZvciBzcGVjaWFsIGNvbG9ycyBpbiBPU0MgMTAgfCAxMSB8IDEyLlxuICAgKiBTaW5jZSB0aGVzZSBjb21tYW5kcyBhcmUgc3RhY2tpbmcgZnJvbSBtdWx0aXBsZSBwYXJhbWV0ZXJzLFxuICAgKiB3ZSBoYW5kbGUgdGhlbSBpbiBhIGxvb3Agd2l0aCBhbiBlbnRyeSBvZmZzZXQgdG8gYF9zcGVjaWFsQ29sb3JzYC5cbiAgICovXG4gIHByaXZhdGUgX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGRhdGE6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBzbG90cyA9IGRhdGEuc3BsaXQoJzsnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RzLmxlbmd0aDsgKytpLCArK29mZnNldCkge1xuICAgICAgaWYgKG9mZnNldCA+PSB0aGlzLl9zcGVjaWFsQ29sb3JzLmxlbmd0aCkgYnJlYWs7XG4gICAgICBpZiAoc2xvdHNbaV0gPT09ICc/Jykge1xuICAgICAgICB0aGlzLl9vbkNvbG9yLmZpcmUoW3sgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVBPUlQsIGluZGV4OiB0aGlzLl9zcGVjaWFsQ29sb3JzW29mZnNldF0gfV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBwYXJzZUNvbG9yKHNsb3RzW2ldKTtcbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuU0VULCBpbmRleDogdGhpcy5fc3BlY2lhbENvbG9yc1tvZmZzZXRdLCBjb2xvciB9XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDEwIDsgPHhjb2xvciBuYW1lPnw8Pz4gU1QgLSBzZXQgb3IgcXVlcnkgZGVmYXVsdCBmb3JlZ3JvdW5kIGNvbG9yXG4gICAqXG4gICAqIEB2dDogI1kgIE9TQyAgIDEwICAgIFwiU2V0IG9yIHF1ZXJ5IGRlZmF1bHQgZm9yZWdyb3VuZCBjb2xvclwiICAgXCJPU0MgMTAgOyBQdCBCRUxcIiAgXCJTZXQgb3IgcXVlcnkgZGVmYXVsdCBmb3JlZ3JvdW5kIGNvbG9yLlwiXG4gICAqIFRvIHNldCB0aGUgY29sb3IsIHRoZSBmb2xsb3dpbmcgY29sb3Igc3BlY2lmaWNhdGlvbiBmb3JtYXRzIGFyZSBzdXBwb3J0ZWQ6XG4gICAqIC0gYHJnYjo8cmVkPi88Z3JlZW4+LzxibHVlPmAgZm9yICBgPHJlZD4sIDxncmVlbj4sIDxibHVlPmAgaW4gYGggfCBoaCB8IGhoaCB8IGhoaGhgLCB3aGVyZVxuICAgKiAgIGBoYCBpcyBhIHNpbmdsZSBoZXhhZGVjaW1hbCBkaWdpdCAoY2FzZSBpbnNpZ25pZmljYW50KS4gVGhlIGRpZmZlcmVudCB3aWR0aHMgc2NhbGVcbiAgICogICBmcm9tIDQgYml0IChgaGApIHRvIDE2IGJpdCAoYGhoaGhgKSBhbmQgZ2V0IGNvbnZlcnRlZCB0byA4IGJpdCAoYGhoYCkuXG4gICAqIC0gYCNSR0JgIC0gNCBiaXRzIHBlciBjaGFubmVsLCBleHBhbmRlZCB0byBgI1IwRzBCMGBcbiAgICogLSBgI1JSR0dCQmAgLSA4IGJpdHMgcGVyIGNoYW5uZWxcbiAgICogLSBgI1JSUkdHR0JCQmAgLSAxMiBiaXRzIHBlciBjaGFubmVsLCB0cnVuY2F0ZWQgdG8gYCNSUkdHQkJgXG4gICAqIC0gYCNSUlJSR0dHR0JCQkJgIC0gMTYgYml0cyBwZXIgY2hhbm5lbCwgdHJ1bmNhdGVkIHRvIGAjUlJHR0JCYFxuICAgKlxuICAgKiAqKk5vdGU6KiogWDExIG5hbWVkIGNvbG9ycyBhcmUgY3VycmVudGx5IHVuc3VwcG9ydGVkLlxuICAgKlxuICAgKiBJZiBgUHRgIGNvbnRhaW5zIGA/YCBpbnN0ZWFkIG9mIGEgY29sb3Igc3BlY2lmaWNhdGlvbiwgdGhlIHRlcm1pbmFsXG4gICAqIHJldHVybnMgYSBzZXF1ZW5jZSB3aXRoIHRoZSBjdXJyZW50IGRlZmF1bHQgZm9yZWdyb3VuZCBjb2xvclxuICAgKiAodXNlIHRoYXQgc2VxdWVuY2UgdG8gcmVzdG9yZSB0aGUgY29sb3IgYWZ0ZXIgY2hhbmdlcykuXG4gICAqXG4gICAqICoqTm90ZToqKiBPdGhlciB0aGFuIHh0ZXJtLCB4dGVybS5qcyBkb2VzIG5vdCBzdXBwb3J0IE9TQyAxMiAtIDE5LlxuICAgKiBUaGVyZWZvcmUgc3RhY2tpbmcgbXVsdGlwbGUgYFB0YCBzZXBhcmF0ZWQgYnkgYDtgIG9ubHkgd29ya3MgZm9yIHRoZSBmaXJzdCB0d28gZW50cmllcy5cbiAgICovXG4gIHB1YmxpYyBzZXRPclJlcG9ydEZnQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGRhdGEsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxMSA7IDx4Y29sb3IgbmFtZT58PD8+IFNUIC0gc2V0IG9yIHF1ZXJ5IGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvclxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMSAgICBcIlNldCBvciBxdWVyeSBkZWZhdWx0IGJhY2tncm91bmQgY29sb3JcIiAgIFwiT1NDIDExIDsgUHQgQkVMXCIgIFwiU2FtZSBhcyBPU0MgMTAsIGJ1dCBmb3IgZGVmYXVsdCBiYWNrZ3JvdW5kLlwiXG4gICAqL1xuICBwdWJsaWMgc2V0T3JSZXBvcnRCZ0NvbG9yKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihkYXRhLCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgMTIgOyA8eGNvbG9yIG5hbWU+fDw/PiBTVCAtIHNldCBvciBxdWVyeSBkZWZhdWx0IGN1cnNvciBjb2xvclxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMiAgICBcIlNldCBvciBxdWVyeSBkZWZhdWx0IGN1cnNvciBjb2xvclwiICAgXCJPU0MgMTIgOyBQdCBCRUxcIiAgXCJTYW1lIGFzIE9TQyAxMCwgYnV0IGZvciBkZWZhdWx0IGN1cnNvciBjb2xvci5cIlxuICAgKi9cbiAgcHVibGljIHNldE9yUmVwb3J0Q3Vyc29yQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGRhdGEsIDIpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxMDQgOyA8bnVtPiBTVCAtIHJlc3RvcmUgQU5TSSBjb2xvciA8bnVtPlxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMDQgICAgXCJSZXNldCBBTlNJIGNvbG9yXCIgICBcIk9TQyAxMDQgOyBjIEJFTFwiIFwiUmVzZXQgY29sb3IgbnVtYmVyIGBjYCB0byB0aGVtZWQgY29sb3IuXCJcbiAgICogYGNgIGlzIHRoZSBjb2xvciBpbmRleCBiZXR3ZWVuIDAgYW5kIDI1NS4gVGhpcyBmdW5jdGlvbiByZXN0b3JlcyB0aGUgZGVmYXVsdCBjb2xvciBmb3IgYGNgIGFzXG4gICAqIHNwZWNpZmllZCBieSB0aGUgbG9hZGVkIHRoZW1lLiBBbnkgbnVtYmVyIG9mIGBjYCBwYXJhbWV0ZXJzIG1heSBiZSBnaXZlbi5cbiAgICogSWYgbm8gcGFyYW1ldGVycyBhcmUgZ2l2ZW4sIHRoZSBlbnRpcmUgaW5kZXhlZCBjb2xvciB0YWJsZSB3aWxsIGJlIHJlc2V0LlxuICAgKi9cbiAgcHVibGljIHJlc3RvcmVJbmRleGVkQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICB0aGlzLl9vbkNvbG9yLmZpcmUoW3sgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVNUT1JFIH1dKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBldmVudDogSUNvbG9yRXZlbnQgPSBbXTtcbiAgICBjb25zdCBzbG90cyA9IGRhdGEuc3BsaXQoJzsnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RzLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoL15cXGQrJC8uZXhlYyhzbG90c1tpXSkpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChzbG90c1tpXSk7XG4gICAgICAgIGlmIChpc1ZhbGlkQ29sb3JJbmRleChpbmRleCkpIHtcbiAgICAgICAgICBldmVudC5wdXNoKHsgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVNUT1JFLCBpbmRleCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXZlbnQubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9vbkNvbG9yLmZpcmUoZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgMTEwIFNUIC0gcmVzdG9yZSBkZWZhdWx0IGZvcmVncm91bmQgY29sb3JcbiAgICpcbiAgICogQHZ0OiAjWSAgT1NDICAgMTEwICAgIFwiUmVzdG9yZSBkZWZhdWx0IGZvcmVncm91bmQgY29sb3JcIiAgIFwiT1NDIDExMCBCRUxcIiAgXCJSZXN0b3JlIGRlZmF1bHQgZm9yZWdyb3VuZCB0byB0aGVtZWQgY29sb3IuXCJcbiAgICovXG4gIHB1YmxpYyByZXN0b3JlRmdDb2xvcihkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0aGlzLl9vbkNvbG9yLmZpcmUoW3sgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVNUT1JFLCBpbmRleDogU3BlY2lhbENvbG9ySW5kZXguRk9SRUdST1VORCB9XSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDExMSBTVCAtIHJlc3RvcmUgZGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yXG4gICAqXG4gICAqIEB2dDogI1kgIE9TQyAgIDExMSAgICBcIlJlc3RvcmUgZGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yXCIgICBcIk9TQyAxMTEgQkVMXCIgIFwiUmVzdG9yZSBkZWZhdWx0IGJhY2tncm91bmQgdG8gdGhlbWVkIGNvbG9yLlwiXG4gICAqL1xuICBwdWJsaWMgcmVzdG9yZUJnQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVTVE9SRSwgaW5kZXg6IFNwZWNpYWxDb2xvckluZGV4LkJBQ0tHUk9VTkQgfV0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxMTIgU1QgLSByZXN0b3JlIGRlZmF1bHQgY3Vyc29yIGNvbG9yXG4gICAqXG4gICAqIEB2dDogI1kgIE9TQyAgIDExMiAgICBcIlJlc3RvcmUgZGVmYXVsdCBjdXJzb3IgY29sb3JcIiAgIFwiT1NDIDExMiBCRUxcIiAgXCJSZXN0b3JlIGRlZmF1bHQgY3Vyc29yIHRvIHRoZW1lZCBjb2xvci5cIlxuICAgKi9cbiAgcHVibGljIHJlc3RvcmVDdXJzb3JDb2xvcihkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0aGlzLl9vbkNvbG9yLmZpcmUoW3sgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVNUT1JFLCBpbmRleDogU3BlY2lhbENvbG9ySW5kZXguQ1VSU09SIH1dKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRVxuICAgKiBDMS5ORUxcbiAgICogICBERUMgbW5lbW9uaWM6IE5FTCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ORUwpXG4gICAqICAgTW92ZXMgY3Vyc29yIHRvIGZpcnN0IHBvc2l0aW9uIG9uIG5leHQgbGluZS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMxICAgIE5FTCAgIFwiTmV4dCBMaW5lXCIgICBcIlxceDg1XCIgICAgXCJNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCByb3cuXCJcbiAgICogQHZ0OiAjWSAgIEVTQyAgIE5FTCAgIFwiTmV4dCBMaW5lXCIgICBcIkVTQyBFXCIgICBcIk1vdmUgdGhlIGN1cnNvciB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBuZXh0IHJvdy5cIlxuICAgKi9cbiAgcHVibGljIG5leHRMaW5lKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICB0aGlzLmluZGV4KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDID1cbiAgICogICBERUMgbW5lbW9uaWM6IERFQ0tQQU0gKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDS1BBTS5odG1sKVxuICAgKiAgIEVuYWJsZXMgdGhlIG51bWVyaWMga2V5cGFkIHRvIHNlbmQgYXBwbGljYXRpb24gc2VxdWVuY2VzIHRvIHRoZSBob3N0LlxuICAgKi9cbiAgcHVibGljIGtleXBhZEFwcGxpY2F0aW9uTW9kZSgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLicpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IHRydWU7XG4gICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDID5cbiAgICogICBERUMgbW5lbW9uaWM6IERFQ0tQTk0gKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDS1BOTS5odG1sKVxuICAgKiAgIEVuYWJsZXMgdGhlIGtleXBhZCB0byBzZW5kIG51bWVyaWMgY2hhcmFjdGVycyB0byB0aGUgaG9zdC5cbiAgICovXG4gIHB1YmxpYyBrZXlwYWROdW1lcmljTW9kZSgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLicpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IGZhbHNlO1xuICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAlIEBcbiAgICogRVNDICUgR1xuICAgKiAgIFNlbGVjdCBkZWZhdWx0IGNoYXJhY3RlciBzZXQuIFVURi04IGlzIG5vdCBzdXBwb3J0ZWQgKHN0cmluZyBhcmUgdW5pY29kZSBhbnl3YXlzKVxuICAgKiAgIHRoZXJlZm9yZSBFU0MgJSBHIGRvZXMgdGhlIHNhbWUuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0RGVmYXVsdENoYXJzZXQoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDAsIERFRkFVTFRfQ0hBUlNFVCk7IC8vIFVTIChkZWZhdWx0KVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAoIENcbiAgICogICBEZXNpZ25hdGUgRzAgQ2hhcmFjdGVyIFNldCwgVlQxMDAsIElTTyAyMDIyLlxuICAgKiBFU0MgKSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDEwMCkuXG4gICAqIEVTQyAqIENcbiAgICogICBEZXNpZ25hdGUgRzIgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMjIwKS5cbiAgICogRVNDICsgQ1xuICAgKiAgIERlc2lnbmF0ZSBHMyBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQyMjApLlxuICAgKiBFU0MgLSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKFZUMzAwKS5cbiAgICogRVNDIC4gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMiBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuXG4gICAqIEVTQyAvIENcbiAgICogICBEZXNpZ25hdGUgRzMgQ2hhcmFjdGVyIFNldCAoVlQzMDApLiBDID0gQSAgLT4gSVNPIExhdGluLTEgU3VwcGxlbWVudGFsLiAtIFN1cHBvcnRlZD9cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RDaGFyc2V0KGNvbGxlY3RBbmRGbGFnOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoY29sbGVjdEFuZEZsYWcubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNvbGxlY3RBbmRGbGFnWzBdID09PSAnLycpIHtcbiAgICAgIHJldHVybiB0cnVlOyAgLy8gVE9ETzogSXMgdGhpcyBzdXBwb3J0ZWQ/XG4gICAgfVxuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KEdMRVZFTFtjb2xsZWN0QW5kRmxhZ1swXV0sIENIQVJTRVRTW2NvbGxlY3RBbmRGbGFnWzFdXSB8fCBERUZBVUxUX0NIQVJTRVQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBEXG4gICAqIEMxLklORFxuICAgKiAgIERFQyBtbmVtb25pYzogSU5EIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0lORC5odG1sKVxuICAgKiAgIE1vdmVzIHRoZSBjdXJzb3IgZG93biBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uXG4gICAqXG4gICAqIEB2dDogI1kgICBDMSAgICBJTkQgICBcIkluZGV4XCIgICBcIlxceDg0XCIgICAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIGxpbmUgZG93biBzY3JvbGxpbmcgaWYgbmVlZGVkLlwiXG4gICAqIEB2dDogI1kgICBFU0MgICBJTkQgICBcIkluZGV4XCIgICBcIkVTQyBEXCIgICBcIk1vdmUgdGhlIGN1cnNvciBvbmUgbGluZSBkb3duIHNjcm9sbGluZyBpZiBuZWVkZWQuXCJcbiAgICovXG4gIHB1YmxpYyBpbmRleCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55Kys7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID09PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgSFxuICAgKiBDMS5IVFNcbiAgICogICBERUMgbW5lbW9uaWM6IEhUUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9IVFMuaHRtbClcbiAgICogICBTZXRzIGEgaG9yaXpvbnRhbCB0YWIgc3RvcCBhdCB0aGUgY29sdW1uIHBvc2l0aW9uIGluZGljYXRlZCBieVxuICAgKiAgIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGNvbHVtbiB3aGVuIHRoZSB0ZXJtaW5hbCByZWNlaXZlcyBhbiBIVFMuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMSAgICBIVFMgICBcIkhvcml6b250YWwgVGFidWxhdGlvbiBTZXRcIiBcIlxceDg4XCIgICAgXCJQbGFjZXMgYSB0YWIgc3RvcCBhdCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb24uXCJcbiAgICogQHZ0OiAjWSAgIEVTQyAgIEhUUyAgIFwiSG9yaXpvbnRhbCBUYWJ1bGF0aW9uIFNldFwiIFwiRVNDIEhcIiAgIFwiUGxhY2VzIGEgdGFiIHN0b3AgYXQgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uLlwiXG4gICAqL1xuICBwdWJsaWMgdGFiU2V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzW3RoaXMuX2FjdGl2ZUJ1ZmZlci54XSA9IHRydWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIE1cbiAgICogQzEuUklcbiAgICogICBERUMgbW5lbW9uaWM6IEhUU1xuICAgKiAgIE1vdmVzIHRoZSBjdXJzb3IgdXAgb25lIGxpbmUgaW4gdGhlIHNhbWUgY29sdW1uLiBJZiB0aGUgY3Vyc29yIGlzIGF0IHRoZSB0b3AgbWFyZ2luLFxuICAgKiAgIHRoZSBwYWdlIHNjcm9sbHMgZG93bi5cbiAgICpcbiAgICogQHZ0OiAjWSBFU0MgIElSIFwiUmV2ZXJzZSBJbmRleFwiIFwiRVNDIE1cIiAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIGxpbmUgdXAgc2Nyb2xsaW5nIGlmIG5lZWRlZC5cIlxuICAgKi9cbiAgcHVibGljIHJldmVyc2VJbmRleCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA9PT0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgLy8gcG9zc2libHkgbW92ZSB0aGUgY29kZSBiZWxvdyB0byB0ZXJtLnJldmVyc2VTY3JvbGwoKTtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLW5lICdcXGVbMTsxSFxcZVs0NG1cXGVNXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIGlzIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBjb25zdCBzY3JvbGxSZWdpb25IZWlnaHQgPSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tIC0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LCBzY3JvbGxSZWdpb25IZWlnaHQsIDEpO1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSwgdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7IC8vIHF1aWNrZml4IHRvIG5vdCBydW4gb3V0IG9mIGJvdW5kc1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgY1xuICAgKiAgIERFQyBtbmVtb25pYzogUklTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL1JJUy5odG1sKVxuICAgKiAgIFJlc2V0IHRvIGluaXRpYWwgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgZnVsbFJlc2V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBiYWNrX2NvbG9yX2VyYXNlIGZlYXR1cmUgZm9yIHh0ZXJtLlxuICAgKi9cbiAgcHJpdmF0ZSBfZXJhc2VBdHRyRGF0YSgpOiBJQXR0cmlidXRlRGF0YSB7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgMHhGRkZGRkYpO1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZyB8PSB0aGlzLl9jdXJBdHRyRGF0YS5iZyAmIH4weEZDMDAwMDAwO1xuICAgIHJldHVybiB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWw7XG4gIH1cblxuICAvKipcbiAgICogRVNDIG5cbiAgICogRVNDIG9cbiAgICogRVNDIHxcbiAgICogRVNDIH1cbiAgICogRVNDIH5cbiAgICogICBERUMgbW5lbW9uaWM6IExTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0xTLmh0bWwpXG4gICAqICAgV2hlbiB5b3UgdXNlIGEgbG9ja2luZyBzaGlmdCwgdGhlIGNoYXJhY3RlciBzZXQgcmVtYWlucyBpbiBHTCBvciBHUiB1bnRpbFxuICAgKiAgIHlvdSB1c2UgYW5vdGhlciBsb2NraW5nIHNoaWZ0LiAocGFydGx5IHN1cHBvcnRlZClcbiAgICovXG4gIHB1YmxpYyBzZXRnTGV2ZWwobGV2ZWw6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbChsZXZlbCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDICMgOFxuICAgKiAgIERFQyBtbmVtb25pYzogREVDQUxOIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0FMTi5odG1sKVxuICAgKiAgIFRoaXMgY29udHJvbCBmdW5jdGlvbiBmaWxscyB0aGUgY29tcGxldGUgc2NyZWVuIGFyZWEgd2l0aFxuICAgKiAgIGEgdGVzdCBwYXR0ZXJuIChFKSB1c2VkIGZvciBhZGp1c3Rpbmcgc2NyZWVuIGFsaWdubWVudC5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEVTQyAgIERFQ0FMTiAgIFwiU2NyZWVuIEFsaWdubWVudCBQYXR0ZXJuXCIgIFwiRVNDICMgOFwiICBcIkZpbGwgdmlld3BvcnQgd2l0aCBhIHRlc3QgcGF0dGVybiAoRSkuXCJcbiAgICovXG4gIHB1YmxpYyBzY3JlZW5BbGlnbm1lbnRQYXR0ZXJuKCk6IGJvb2xlYW4ge1xuICAgIC8vIHByZXBhcmUgY2VsbCBkYXRhXG4gICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgIGNlbGwuY29udGVudCA9IDEgPDwgQ29udGVudC5XSURUSF9TSElGVCB8ICdFJy5jaGFyQ29kZUF0KDApO1xuICAgIGNlbGwuZmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5mZztcbiAgICBjZWxsLmJnID0gdGhpcy5fY3VyQXR0ckRhdGEuYmc7XG5cblxuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICBmb3IgKGxldCB5T2Zmc2V0ID0gMDsgeU9mZnNldCA8IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czsgKyt5T2Zmc2V0KSB7XG4gICAgICBjb25zdCByb3cgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSArIHlPZmZzZXQ7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgbGluZS5maWxsKGNlbGwpO1xuICAgICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0FsbERpcnR5KCk7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogRENTICQgcSBQdCBTVFxuICAgKiAgIERFQ1JRU1MgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDUlFTUy5odG1sKVxuICAgKiAgIFJlcXVlc3QgU3RhdHVzIFN0cmluZyAoREVDUlFTUyksIFZUNDIwIGFuZCB1cC5cbiAgICogICBSZXNwb25zZTogREVDUlBTUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNSUFNTLmh0bWwpXG4gICAqXG4gICAqIEB2dDogI1BbTGltaXRlZCBzdXBwb3J0LCBzZWUgYmVsb3cuXSAgRENTICAgREVDUlFTUyAgIFwiUmVxdWVzdCBTZWxlY3Rpb24gb3IgU2V0dGluZ1wiICBcIkRDUyAkIHEgUHQgU1RcIiAgIFwiUmVxdWVzdCBzZXZlcmFsIHRlcm1pbmFsIHNldHRpbmdzLlwiXG4gICAqIFJlc3BvbnNlIGlzIGluIHRoZSBmb3JtIGBFU0MgUCAxICQgciBQdCBTVGAgZm9yIHZhbGlkIHJlcXVlc3RzLCB3aGVyZSBgUHRgIGNvbnRhaW5zIHRoZVxuICAgKiBjb3JyZXNwb25kaW5nIENTSSBzdHJpbmcsIGBFU0MgUCAwIFNUYCBmb3IgaW52YWxpZCByZXF1ZXN0cy5cbiAgICpcbiAgICogU3VwcG9ydGVkIHJlcXVlc3RzIGFuZCByZXNwb25zZXM6XG4gICAqXG4gICAqIHwgVHlwZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSZXF1ZXN0ICAgICAgICAgICB8IFJlc3BvbnNlIChgUHRgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfFxuICAgKiB8IEdyYXBoaWMgUmVuZGl0aW9uIChTR1IpICAgICAgICAgIHwgYERDUyAkIHEgbSBTVGAgICAgfCBhbHdheXMgcmVwb3J0aW5nIGAwbWAgKGN1cnJlbnRseSBicm9rZW4pICAgICAgICAgICAgICB8XG4gICAqIHwgVG9wIGFuZCBCb3R0b20gTWFyZ2lucyAoREVDU1RCTSkgfCBgRENTICQgcSByIFNUYCAgICB8IGBQcyA7IFBzIHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCBDdXJzb3IgU3R5bGUgKERFQ1NDVVNSKSAgICAgICAgICB8IGBEQ1MgJCBxIFNQIHEgU1RgIHwgYFBzIFNQIHFgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IFByb3RlY3Rpb24gQXR0cmlidXRlIChERUNTQ0EpICAgIHwgYERDUyAkIHEgXCIgcSBTVGAgIHwgYFBzIFwiIHFgIChERUNTQ0EgMiBpcyByZXBvcnRlZCBhcyBQcyA9IDApICAgICAgICAgICAgIHxcbiAgICogfCBDb25mb3JtYW5jZSBMZXZlbCAoREVDU0NMKSAgICAgICB8IGBEQ1MgJCBxIFwiIHAgU1RgICB8IGFsd2F5cyByZXBvcnRpbmcgYDYxIDsgMSBcIiBwYCAoREVDU0NMIGlzIHVuc3VwcG9ydGVkKSB8XG4gICAqXG4gICAqXG4gICAqIFRPRE86XG4gICAqIC0gZml4IFNHUiByZXBvcnRcbiAgICogLSBlaXRoZXIgY2hlY2sgd2hpY2ggY29uZm9ybWFuY2UgaXMgYmV0dGVyIHN1aXRlZCBvciByZW1vdmUgdGhlIHJlcG9ydCBjb21wbGV0ZWx5XG4gICAqICAgLS0+IHdlIGFyZSBjdXJyZW50bHkgYSBtaXh0dXJlIG9mIGFsbCB1cCB0byBWVDQwMCBidXQgZG9udCBmb2xsb3cgYW55b25lIHN0cmljdGx5XG4gICAqL1xuICBwdWJsaWMgcmVxdWVzdFN0YXR1c1N0cmluZyhkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGYgPSAoczogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ30ke3N9JHtDMC5FU0N9XFxcXGApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8vIGFjY2VzcyBoZWxwZXJzXG4gICAgY29uc3QgYiA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zO1xuICAgIGNvbnN0IFNUWUxFUzogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHsgJ2Jsb2NrJzogMiwgJ3VuZGVybGluZSc6IDQsICdiYXInOiA2IH07XG5cbiAgICBpZiAoZGF0YSA9PT0gJ1wicScpIHJldHVybiBmKGBQMSRyJHt0aGlzLl9jdXJBdHRyRGF0YS5pc1Byb3RlY3RlZCgpID8gMSA6IDB9XCJxYCk7XG4gICAgaWYgKGRhdGEgPT09ICdcInAnKSByZXR1cm4gZihgUDEkcjYxOzFcInBgKTtcbiAgICBpZiAoZGF0YSA9PT0gJ3InKSByZXR1cm4gZihgUDEkciR7Yi5zY3JvbGxUb3AgKyAxfTske2Iuc2Nyb2xsQm90dG9tICsgMX1yYCk7XG4gICAgLy8gRklYTUU6IHJlcG9ydCByZWFsIFNHUiBzZXR0aW5ncyBpbnN0ZWFkIG9mIDBtXG4gICAgaWYgKGRhdGEgPT09ICdtJykgcmV0dXJuIGYoYFAxJHIwbWApO1xuICAgIGlmIChkYXRhID09PSAnIHEnKSByZXR1cm4gZihgUDEkciR7U1RZTEVTW29wdHMuY3Vyc29yU3R5bGVdIC0gKG9wdHMuY3Vyc29yQmxpbmsgPyAxIDogMCl9IHFgKTtcbiAgICByZXR1cm4gZihgUDAkcmApO1xuICB9XG5cbiAgcHVibGljIG1hcmtSYW5nZURpcnR5KHkxOiBudW1iZXIsIHkyOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkoeTEsIHkyKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEaXJ0eVJvd1RyYWNrZXIge1xuICByZWFkb25seSBzdGFydDogbnVtYmVyO1xuICByZWFkb25seSBlbmQ6IG51bWJlcjtcblxuICBjbGVhclJhbmdlKCk6IHZvaWQ7XG4gIG1hcmtEaXJ0eSh5OiBudW1iZXIpOiB2b2lkO1xuICBtYXJrUmFuZ2VEaXJ0eSh5MTogbnVtYmVyLCB5MjogbnVtYmVyKTogdm9pZDtcbiAgbWFya0FsbERpcnR5KCk6IHZvaWQ7XG59XG5cbmNsYXNzIERpcnR5Um93VHJhY2tlciBpbXBsZW1lbnRzIElEaXJ0eVJvd1RyYWNrZXIge1xuICBwdWJsaWMgc3RhcnQhOiBudW1iZXI7XG4gIHB1YmxpYyBlbmQhOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuY2xlYXJSYW5nZSgpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyUmFuZ2UoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFydCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgdGhpcy5lbmQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICB9XG5cbiAgcHVibGljIG1hcmtEaXJ0eSh5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoeSA8IHRoaXMuc3RhcnQpIHtcbiAgICAgIHRoaXMuc3RhcnQgPSB5O1xuICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMuZW5kKSB7XG4gICAgICB0aGlzLmVuZCA9IHk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1hcmtSYW5nZURpcnR5KHkxOiBudW1iZXIsIHkyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoeTEgPiB5Mikge1xuICAgICAgJHRlbXAgPSB5MTtcbiAgICAgIHkxID0geTI7XG4gICAgICB5MiA9ICR0ZW1wO1xuICAgIH1cbiAgICBpZiAoeTEgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICB0aGlzLnN0YXJ0ID0geTE7XG4gICAgfVxuICAgIGlmICh5MiA+IHRoaXMuZW5kKSB7XG4gICAgICB0aGlzLmVuZCA9IHkyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtYXJrQWxsRGlydHkoKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrUmFuZ2VEaXJ0eSgwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkQ29sb3JJbmRleCh2YWx1ZTogbnVtYmVyKTogdmFsdWUgaXMgQ29sb3JJbmRleCB7XG4gIHJldHVybiAwIDw9IHZhbHVlICYmIHZhbHVlIDwgMjU2O1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyB0aGF0IGNhbiBiZSBleHRlbmRlZCB0byBwcm92aWRlIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yIG1hbmFnaW5nIHRoZSBsaWZlY3ljbGUgb2YgYW5cbiAqIG9iamVjdCBhbmQgaXRzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcm90ZWN0ZWQgX2Rpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gIHByb3RlY3RlZCBfaXNEaXNwb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBEaXNwb3NlcyB0aGUgb2JqZWN0LCB0cmlnZ2VyaW5nIHRoZSBgZGlzcG9zZWAgbWV0aG9kIG9uIGFsbCByZWdpc3RlcmVkIElEaXNwb3NhYmxlcy5cbiAgICovXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzRGlzcG9zZWQgPSB0cnVlO1xuICAgIGZvciAoY29uc3QgZCBvZiB0aGlzLl9kaXNwb3NhYmxlcykge1xuICAgICAgZC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgZGlzcG9zYWJsZSBvYmplY3QuXG4gICAqIEBwYXJhbSBkIFRoZSBkaXNwb3NhYmxlIHRvIHJlZ2lzdGVyLlxuICAgKiBAcmV0dXJucyBUaGUgZGlzcG9zYWJsZS5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlcjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGQ6IFQpOiBUIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGQpO1xuICAgIHJldHVybiBkO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGEgZGlzcG9zYWJsZSBvYmplY3QgaWYgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZCwgaWYgbm90IGRvXG4gICAqIG5vdGhpbmcuXG4gICAqIEBwYXJhbSBkIFRoZSBkaXNwb3NhYmxlIHRvIHVucmVnaXN0ZXIuXG4gICAqL1xuICBwdWJsaWMgdW5yZWdpc3RlcjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGQ6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2Rpc3Bvc2FibGVzLmluZGV4T2YoZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5fZGlzcG9zYWJsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE11dGFibGVEaXNwb3NhYmxlPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4gaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX3ZhbHVlPzogVDtcbiAgcHJpdmF0ZSBfaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2YWx1ZSBpZiBpdCBleGlzdHMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHZhbHVlKCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9pc0Rpc3Bvc2VkID8gdW5kZWZpbmVkIDogdGhpcy5fdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUsIGRpc3Bvc2luZyBvZiB0aGUgb2xkIHZhbHVlIGlmIGl0IGV4aXN0cy5cbiAgICovXG4gIHB1YmxpYyBzZXQgdmFsdWUodmFsdWU6IFQgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAodGhpcy5faXNEaXNwb3NlZCB8fCB2YWx1ZSA9PT0gdGhpcy5fdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fdmFsdWU/LmRpc3Bvc2UoKTtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgc3RvcmVkIHZhbHVlIGFuZCBkaXNwb3NlcyBvZiB0aGUgcHJldmlvdXNseSBzdG9yZWQgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzRGlzcG9zZWQgPSB0cnVlO1xuICAgIHRoaXMuX3ZhbHVlPy5kaXNwb3NlKCk7XG4gICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwIGEgZnVuY3Rpb24gaW4gYSBkaXNwb3NhYmxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EaXNwb3NhYmxlKGY6ICgpID0+IHZvaWQpOiBJRGlzcG9zYWJsZSB7XG4gIHJldHVybiB7IGRpc3Bvc2U6IGYgfTtcbn1cblxuLyoqXG4gKiBEaXNwb3NlIG9mIGFsbCBkaXNwb3NhYmxlcyBpbiBhbiBhcnJheSBhbmQgc2V0IGl0cyBsZW5ndGggdG8gMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VBcnJheShkaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGQgb2YgZGlzcG9zYWJsZXMpIHtcbiAgICBkLmRpc3Bvc2UoKTtcbiAgfVxuICBkaXNwb3NhYmxlcy5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkaXNwb3NhYmxlIHRoYXQgd2lsbCBkaXNwb3NlIG9mIGFuIGFycmF5IG9mIGRpc3Bvc2FibGVzIHdoZW4gZGlzcG9zZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlKGFycmF5OiBJRGlzcG9zYWJsZVtdKTogSURpc3Bvc2FibGUge1xuICByZXR1cm4geyBkaXNwb3NlOiAoKSA9PiBkaXNwb3NlQXJyYXkoYXJyYXkpIH07XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbnRlcmZhY2UgSU5hdmlnYXRvciB7XG4gIHVzZXJBZ2VudDogc3RyaW5nO1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBwbGF0Zm9ybTogc3RyaW5nO1xufVxuXG4vLyBXZSdyZSBkZWNsYXJpbmcgYSBuYXZpZ2F0b3IgZ2xvYmFsIGhlcmUgYXMgd2UgZXhwZWN0IGl0IGluIGFsbCBydW50aW1lcyAobm9kZSBhbmQgYnJvd3NlciksIGJ1dFxuLy8gd2Ugd2FudCB0aGlzIG1vZHVsZSB0byBsaXZlIGluIGNvbW1vbi5cbmRlY2xhcmUgY29uc3QgbmF2aWdhdG9yOiBJTmF2aWdhdG9yO1xuZGVjbGFyZSBjb25zdCBwcm9jZXNzOiB1bmtub3duO1xuXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAndGl0bGUnIGluIChwcm9jZXNzIGFzIGFueSkpID8gdHJ1ZSA6IGZhbHNlO1xuY29uc3QgdXNlckFnZW50ID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xuY29uc3QgcGxhdGZvcm0gPSAoaXNOb2RlKSA/ICdub2RlJyA6IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9IHVzZXJBZ2VudC5pbmNsdWRlcygnRmlyZWZveCcpO1xuZXhwb3J0IGNvbnN0IGlzTGVnYWN5RWRnZSA9IHVzZXJBZ2VudC5pbmNsdWRlcygnRWRnZScpO1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdCh1c2VyQWdlbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNhZmFyaVZlcnNpb24oKTogbnVtYmVyIHtcbiAgaWYgKCFpc1NhZmFyaSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIGNvbnN0IG1ham9yVmVyc2lvbiA9IHVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhcXGQrKS8pO1xuICBpZiAobWFqb3JWZXJzaW9uID09PSBudWxsIHx8IG1ham9yVmVyc2lvbi5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHBhcnNlSW50KG1ham9yVmVyc2lvblsxXSk7XG59XG5cbi8vIEZpbmQgdGhlIHVzZXJzIHBsYXRmb3JtLiBXZSB1c2UgdGhpcyB0byBpbnRlcnByZXQgdGhlIG1ldGEga2V5XG4vLyBhbmQgSVNPIHRoaXJkIGxldmVsIHNoaWZ0cy5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzE5ODc3OTI0LzU3NzU5OFxuZXhwb3J0IGNvbnN0IGlzTWFjID0gWydNYWNpbnRvc2gnLCAnTWFjSW50ZWwnLCAnTWFjUFBDJywgJ01hYzY4SyddLmluY2x1ZGVzKHBsYXRmb3JtKTtcbmV4cG9ydCBjb25zdCBpc0lwYWQgPSBwbGF0Zm9ybSA9PT0gJ2lQYWQnO1xuZXhwb3J0IGNvbnN0IGlzSXBob25lID0gcGxhdGZvcm0gPT09ICdpUGhvbmUnO1xuZXhwb3J0IGNvbnN0IGlzV2luZG93cyA9IFsnV2luZG93cycsICdXaW4xNicsICdXaW4zMicsICdXaW5DRSddLmluY2x1ZGVzKHBsYXRmb3JtKTtcbmV4cG9ydCBjb25zdCBpc0xpbnV4ID0gcGxhdGZvcm0uaW5kZXhPZignTGludXgnKSA+PSAwO1xuLy8gTm90ZSB0aGF0IHdoZW4gdGhpcyBpcyB0cnVlLCBpc0xpbnV4IHdpbGwgYWxzbyBiZSB0cnVlLlxuZXhwb3J0IGNvbnN0IGlzQ2hyb21lT1MgPSAvXFxiQ3JPU1xcYi8udGVzdCh1c2VyQWdlbnQpO1xuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgaXNOb2RlIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcblxuaW50ZXJmYWNlIElUYXNrUXVldWUge1xuICAvKipcbiAgICogQWRkcyBhIHRhc2sgdG8gdGhlIHF1ZXVlIHdoaWNoIHdpbGwgcnVuIGluIGEgZnV0dXJlIGlkbGUgY2FsbGJhY2suXG4gICAqIFRvIGF2b2lkIHBlcmNlaXZhYmxlIHN0YWxscyBvbiB0aGUgbWFpbnRocmVhZCwgdGFza3Mgd2l0aCBoZWF2eSB3b3JrbG9hZFxuICAgKiBzaG91bGQgc3BsaXQgdGhlaXIgd29yayBpbnRvIHNtYWxsZXIgcGllY2VzIGFuZCByZXR1cm4gYHRydWVgIHRvIGdldFxuICAgKiBjYWxsZWQgYWdhaW4gdW50aWwgdGhlIHdvcmsgaXMgZG9uZSAob24gZmFsc3kgcmV0dXJuIHZhbHVlKS5cbiAgICovXG4gIGVucXVldWUodGFzazogKCkgPT4gYm9vbGVhbiB8IHZvaWQpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBGbHVzaGVzIHRoZSBxdWV1ZSwgcnVubmluZyBhbGwgcmVtYWluaW5nIHRhc2tzIHN5bmNocm9ub3VzbHkuXG4gICAqL1xuICBmbHVzaCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgYW55IHJlbWFpbmluZyB0YXNrcyBmcm9tIHRoZSBxdWV1ZSwgdGhlc2Ugd2lsbCBub3QgYmUgcnVuLlxuICAgKi9cbiAgY2xlYXIoKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIElUYXNrRGVhZGxpbmUge1xuICB0aW1lUmVtYWluaW5nKCk6IG51bWJlcjtcbn1cbnR5cGUgQ2FsbGJhY2tXaXRoRGVhZGxpbmUgPSAoZGVhZGxpbmU6IElUYXNrRGVhZGxpbmUpID0+IHZvaWQ7XG5cbmFic3RyYWN0IGNsYXNzIFRhc2tRdWV1ZSBpbXBsZW1lbnRzIElUYXNrUXVldWUge1xuICBwcml2YXRlIF90YXNrczogKCgpID0+IGJvb2xlYW4gfCB2b2lkKVtdID0gW107XG4gIHByaXZhdGUgX2lkbGVDYWxsYmFjaz86IG51bWJlcjtcbiAgcHJpdmF0ZSBfaSA9IDA7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IF9yZXF1ZXN0Q2FsbGJhY2soY2FsbGJhY2s6IENhbGxiYWNrV2l0aERlYWRsaW5lKTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2NhbmNlbENhbGxiYWNrKGlkZW50aWZpZXI6IG51bWJlcik6IHZvaWQ7XG5cbiAgcHVibGljIGVucXVldWUodGFzazogKCkgPT4gYm9vbGVhbiB8IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl90YXNrcy5wdXNoKHRhc2spO1xuICAgIHRoaXMuX3N0YXJ0KCk7XG4gIH1cblxuICBwdWJsaWMgZmx1c2goKTogdm9pZCB7XG4gICAgd2hpbGUgKHRoaXMuX2kgPCB0aGlzLl90YXNrcy5sZW5ndGgpIHtcbiAgICAgIGlmICghdGhpcy5fdGFza3NbdGhpcy5faV0oKSkge1xuICAgICAgICB0aGlzLl9pKys7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faWRsZUNhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9jYW5jZWxDYWxsYmFjayh0aGlzLl9pZGxlQ2FsbGJhY2spO1xuICAgICAgdGhpcy5faWRsZUNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLl9pID0gMDtcbiAgICB0aGlzLl90YXNrcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pZGxlQ2FsbGJhY2spIHtcbiAgICAgIHRoaXMuX2lkbGVDYWxsYmFjayA9IHRoaXMuX3JlcXVlc3RDYWxsYmFjayh0aGlzLl9wcm9jZXNzLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Byb2Nlc3MoZGVhZGxpbmU6IElUYXNrRGVhZGxpbmUpOiB2b2lkIHtcbiAgICB0aGlzLl9pZGxlQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgbGV0IHRhc2tEdXJhdGlvbiA9IDA7XG4gICAgbGV0IGxvbmdlc3RUYXNrID0gMDtcbiAgICBsZXQgbGFzdERlYWRsaW5lUmVtYWluaW5nID0gZGVhZGxpbmUudGltZVJlbWFpbmluZygpO1xuICAgIGxldCBkZWFkbGluZVJlbWFpbmluZyA9IDA7XG4gICAgd2hpbGUgKHRoaXMuX2kgPCB0aGlzLl90YXNrcy5sZW5ndGgpIHtcbiAgICAgIHRhc2tEdXJhdGlvbiA9IERhdGUubm93KCk7XG4gICAgICBpZiAoIXRoaXMuX3Rhc2tzW3RoaXMuX2ldKCkpIHtcbiAgICAgICAgdGhpcy5faSsrO1xuICAgICAgfVxuICAgICAgLy8gb3RoZXIgdGhhbiBwZXJmb3JtYW5jZS5ub3csIERhdGUubm93IG1pZ2h0IG5vdCBiZSBzdGFibGUgKGNoYW5nZXMgb24gd2FsbCBjbG9jayBjaGFuZ2VzKSxcbiAgICAgIC8vIHRoaXMgaXMgbm90IGFuIGlzc3VlIGhlcmUgYXMgYSBjbG9jayBjaGFuZ2UgZHVyaW5nIGEgc2hvcnQgcnVubmluZyB0YXNrIGlzIHZlcnkgdW5saWtlbHlcbiAgICAgIC8vIGluIGNhc2UgaXQgc3RpbGwgaGFwcGVuZWQgYW5kIGxlYWRzIHRvIG5lZ2F0aXZlIGR1cmF0aW9uLCBzaW1wbHkgYXNzdW1lIDEgbXNlY1xuICAgICAgdGFza0R1cmF0aW9uID0gTWF0aC5tYXgoMSwgRGF0ZS5ub3coKSAtIHRhc2tEdXJhdGlvbik7XG4gICAgICBsb25nZXN0VGFzayA9IE1hdGgubWF4KHRhc2tEdXJhdGlvbiwgbG9uZ2VzdFRhc2spO1xuICAgICAgLy8gR3Vlc3MgdGhlIGZvbGxvd2luZyB0YXNrIHdpbGwgdGFrZSBhIHNpbWlsYXIgdGltZSB0byB0aGUgbG9uZ2VzdCB0YXNrIGluIHRoaXMgYmF0Y2gsIGFsbG93XG4gICAgICAvLyBhZGRpdGlvbmFsIHJvb20gdG8gdHJ5IGF2b2lkIGV4Y2VlZGluZyB0aGUgZGVhZGxpbmVcbiAgICAgIGRlYWRsaW5lUmVtYWluaW5nID0gZGVhZGxpbmUudGltZVJlbWFpbmluZygpO1xuICAgICAgaWYgKGxvbmdlc3RUYXNrICogMS41ID4gZGVhZGxpbmVSZW1haW5pbmcpIHtcbiAgICAgICAgLy8gV2FybiB3aGVuIHRoZSB0aW1lIGV4Y2VlZGluZyB0aGUgZGVhZGxpbmUgaXMgb3ZlciAyMG1zLCBpZiB0aGlzIGhhcHBlbnMgaW4gcHJhY3RpY2UgdGhlXG4gICAgICAgIC8vIHRhc2sgc2hvdWxkIGJlIHNwbGl0IGludG8gc3ViLXRhc2tzIHRvIGVuc3VyZSB0aGUgVUkgcmVtYWlucyByZXNwb25zaXZlLlxuICAgICAgICBpZiAobGFzdERlYWRsaW5lUmVtYWluaW5nIC0gdGFza0R1cmF0aW9uIDwgLTIwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGB0YXNrIHF1ZXVlIGV4Y2VlZGVkIGFsbG90dGVkIGRlYWRsaW5lIGJ5ICR7TWF0aC5hYnMoTWF0aC5yb3VuZChsYXN0RGVhZGxpbmVSZW1haW5pbmcgLSB0YXNrRHVyYXRpb24pKX1tc2ApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxhc3REZWFkbGluZVJlbWFpbmluZyA9IGRlYWRsaW5lUmVtYWluaW5nO1xuICAgIH1cbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHF1ZXVlIG9mIHRoYXQgcnVucyB0YXNrcyBvdmVyIHNldmVyYWwgdGFza3MgdmlhIHNldFRpbWVvdXQsIHRyeWluZyB0byBtYWludGFpbiBhYm92ZSA2MCBmcmFtZXNcbiAqIHBlciBzZWNvbmQuIFRoZSB0YXNrcyB3aWxsIHJ1biBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZW5xdWV1ZWQsIGJ1dCB0aGV5IHdpbGwgcnVuIHNvbWUgdGltZSBsYXRlcixcbiAqIGFuZCBjYXJlIHNob3VsZCBiZSB0YWtlbiB0byBlbnN1cmUgdGhleSdyZSBub24tdXJnZW50IGFuZCB3aWxsIG5vdCBpbnRyb2R1Y2UgcmFjZSBjb25kaXRpb25zLlxuICovXG5leHBvcnQgY2xhc3MgUHJpb3JpdHlUYXNrUXVldWUgZXh0ZW5kcyBUYXNrUXVldWUge1xuICBwcm90ZWN0ZWQgX3JlcXVlc3RDYWxsYmFjayhjYWxsYmFjazogQ2FsbGJhY2tXaXRoRGVhZGxpbmUpOiBudW1iZXIge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKHRoaXMuX2NyZWF0ZURlYWRsaW5lKDE2KSkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jYW5jZWxDYWxsYmFjayhpZGVudGlmaWVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQoaWRlbnRpZmllcik7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVEZWFkbGluZShkdXJhdGlvbjogbnVtYmVyKTogSVRhc2tEZWFkbGluZSB7XG4gICAgY29uc3QgZW5kID0gRGF0ZS5ub3coKSArIGR1cmF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0aW1lUmVtYWluaW5nOiAoKSA9PiBNYXRoLm1heCgwLCBlbmQgLSBEYXRlLm5vdygpKVxuICAgIH07XG4gIH1cbn1cblxuY2xhc3MgSWRsZVRhc2tRdWV1ZUludGVybmFsIGV4dGVuZHMgVGFza1F1ZXVlIHtcbiAgcHJvdGVjdGVkIF9yZXF1ZXN0Q2FsbGJhY2soY2FsbGJhY2s6IElkbGVSZXF1ZXN0Q2FsbGJhY2spOiBudW1iZXIge1xuICAgIHJldHVybiByZXF1ZXN0SWRsZUNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY2FuY2VsQ2FsbGJhY2soaWRlbnRpZmllcjogbnVtYmVyKTogdm9pZCB7XG4gICAgY2FuY2VsSWRsZUNhbGxiYWNrKGlkZW50aWZpZXIpO1xuICB9XG59XG5cbi8qKlxuICogQSBxdWV1ZSBvZiB0aGF0IHJ1bnMgdGFza3Mgb3ZlciBzZXZlcmFsIGlkbGUgY2FsbGJhY2tzLCB0cnlpbmcgdG8gcmVzcGVjdCB0aGUgaWRsZSBjYWxsYmFjaydzXG4gKiBkZWFkbGluZSBnaXZlbiBieSB0aGUgZW52aXJvbm1lbnQuIFRoZSB0YXNrcyB3aWxsIHJ1biBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZW5xdWV1ZWQsIGJ1dCB0aGV5XG4gKiB3aWxsIHJ1biBzb21lIHRpbWUgbGF0ZXIsIGFuZCBjYXJlIHNob3VsZCBiZSB0YWtlbiB0byBlbnN1cmUgdGhleSdyZSBub24tdXJnZW50IGFuZCB3aWxsIG5vdFxuICogaW50cm9kdWNlIHJhY2UgY29uZGl0aW9ucy5cbiAqXG4gKiBUaGlzIHJldmVydHMgdG8gYSB7QGxpbmsgUHJpb3JpdHlUYXNrUXVldWV9IGlmIHRoZSBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGlkbGUgY2FsbGJhY2tzLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY29uc3QgSWRsZVRhc2tRdWV1ZSA9ICghaXNOb2RlICYmICdyZXF1ZXN0SWRsZUNhbGxiYWNrJyBpbiB3aW5kb3cpID8gSWRsZVRhc2tRdWV1ZUludGVybmFsIDogUHJpb3JpdHlUYXNrUXVldWU7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgdHJhY2tzIGEgc2luZ2xlIGRlYm91bmNlZCB0YXNrIHRoYXQgd2lsbCBydW4gb24gdGhlIG5leHQgaWRsZSBmcmFtZS4gV2hlbiBjYWxsZWRcbiAqIG11bHRpcGxlIHRpbWVzLCBvbmx5IHRoZSBsYXN0IHNldCB0YXNrIHdpbGwgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgRGVib3VuY2VkSWRsZVRhc2sge1xuICBwcml2YXRlIF9xdWV1ZTogSVRhc2tRdWV1ZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9xdWV1ZSA9IG5ldyBJZGxlVGFza1F1ZXVlKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0KHRhc2s6ICgpID0+IGJvb2xlYW4gfCB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fcXVldWUuY2xlYXIoKTtcbiAgICB0aGlzLl9xdWV1ZS5lbnF1ZXVlKHRhc2spO1xuICB9XG5cbiAgcHVibGljIGZsdXNoKCk6IHZvaWQge1xuICAgIHRoaXMuX3F1ZXVlLmZsdXNoKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENIQVJfREFUQV9DT0RFX0lOREVYLCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZShidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSk6IHZvaWQge1xuICAvLyBXaW5wdHkgZG9lcyBub3Qgc3VwcG9ydCB3cmFwYXJvdW5kIG1vZGUgd2hpY2ggbWVhbnMgdGhhdCBsaW5lcyB3aWxsIG5ldmVyXG4gIC8vIGJlIG1hcmtlZCBhcyB3cmFwcGVkLiBUaGlzIGNhdXNlcyBpc3N1ZXMgZm9yIHRoaW5ncyBsaWtlIGNvcHlpbmcgYSBsaW5lXG4gIC8vIHJldGFpbmluZyB0aGUgd3JhcHBlZCBuZXcgbGluZSBjaGFyYWN0ZXJzIG9yIGlmIGNvbnN1bWVycyBhcmUgbGlzdGVuaW5nXG4gIC8vIGluIG9uIHRoZSBkYXRhIHN0cmVhbS5cbiAgLy9cbiAgLy8gVGhlIHdvcmthcm91bmQgZm9yIHRoaXMgaXMgdG8gbGlzdGVuIHRvIGV2ZXJ5IGluY29taW5nIGxpbmUgZmVlZCBhbmQgbWFya1xuICAvLyB0aGUgbGluZSBhcyB3cmFwcGVkIGlmIHRoZSBsYXN0IGNoYXJhY3RlciBpbiB0aGUgcHJldmlvdXMgbGluZSBpcyBub3QgYVxuICAvLyBzcGFjZS4gVGhpcyBpcyBjZXJ0YWlubHkgbm90IHdpdGhvdXQgaXRzIHByb2JsZW1zLCBidXQgZ2VuZXJhbGx5IG9uXG4gIC8vIFdpbmRvd3Mgd2hlbiB0ZXh0IHJlYWNoZXMgdGhlIGVuZCBvZiB0aGUgdGVybWluYWwgaXQncyBsaWtlbHkgZ29pbmcgdG8gYmVcbiAgLy8gd3JhcHBlZC5cbiAgY29uc3QgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChidWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnkgLSAxKTtcbiAgY29uc3QgbGFzdENoYXIgPSBsaW5lPy5nZXQoYnVmZmVyU2VydmljZS5jb2xzIC0gMSk7XG5cbiAgY29uc3QgbmV4dExpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgaWYgKG5leHRMaW5lICYmIGxhc3RDaGFyKSB7XG4gICAgbmV4dExpbmUuaXNXcmFwcGVkID0gKGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gTlVMTF9DRUxMX0NPREUgJiYgbGFzdENoYXJbQ0hBUl9EQVRBX0NPREVfSU5ERVhdICE9PSBXSElURVNQQUNFX0NFTExfQ09ERSk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhLCBJQ29sb3JSR0IsIElFeHRlbmRlZEF0dHJzIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MsIFVuZGVybGluZVN0eWxlLCBFeHRGbGFncyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQXR0cmlidXRlRGF0YSB7XG4gIHB1YmxpYyBzdGF0aWMgdG9Db2xvclJHQih2YWx1ZTogbnVtYmVyKTogSUNvbG9yUkdCIHtcbiAgICByZXR1cm4gW1xuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuUkVEX1NISUZUICYgMjU1LFxuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuR1JFRU5fU0hJRlQgJiAyNTUsXG4gICAgICB2YWx1ZSAmIDI1NVxuICAgIF07XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb21Db2xvclJHQih2YWx1ZTogSUNvbG9yUkdCKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHZhbHVlWzBdICYgMjU1KSA8PCBBdHRyaWJ1dGVzLlJFRF9TSElGVCB8ICh2YWx1ZVsxXSAmIDI1NSkgPDwgQXR0cmlidXRlcy5HUkVFTl9TSElGVCB8IHZhbHVlWzJdICYgMjU1O1xuICB9XG5cbiAgcHVibGljIGNsb25lKCk6IElBdHRyaWJ1dGVEYXRhIHtcbiAgICBjb25zdCBuZXdPYmogPSBuZXcgQXR0cmlidXRlRGF0YSgpO1xuICAgIG5ld09iai5mZyA9IHRoaXMuZmc7XG4gICAgbmV3T2JqLmJnID0gdGhpcy5iZztcbiAgICBuZXdPYmouZXh0ZW5kZWQgPSB0aGlzLmV4dGVuZGVkLmNsb25lKCk7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIC8vIGRhdGFcbiAgcHVibGljIGZnID0gMDtcbiAgcHVibGljIGJnID0gMDtcbiAgcHVibGljIGV4dGVuZGVkOiBJRXh0ZW5kZWRBdHRycyA9IG5ldyBFeHRlbmRlZEF0dHJzKCk7XG5cbiAgLy8gZmxhZ3NcbiAgcHVibGljIGlzSW52ZXJzZSgpOiBudW1iZXIgICAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WRVJTRTsgfVxuICBwdWJsaWMgaXNCb2xkKCk6IG51bWJlciAgICAgICAgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5CT0xEOyB9XG4gIHB1YmxpYyBpc1VuZGVybGluZSgpOiBudW1iZXIgICAgIHtcbiAgICBpZiAodGhpcy5oYXNFeHRlbmRlZEF0dHJzKCkgJiYgdGhpcy5leHRlbmRlZC51bmRlcmxpbmVTdHlsZSAhPT0gVW5kZXJsaW5lU3R5bGUuTk9ORSkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5VTkRFUkxJTkU7XG4gIH1cbiAgcHVibGljIGlzQmxpbmsoKTogbnVtYmVyICAgICAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuQkxJTks7IH1cbiAgcHVibGljIGlzSW52aXNpYmxlKCk6IG51bWJlciAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WSVNJQkxFOyB9XG4gIHB1YmxpYyBpc0l0YWxpYygpOiBudW1iZXIgICAgICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLklUQUxJQzsgfVxuICBwdWJsaWMgaXNEaW0oKTogbnVtYmVyICAgICAgICAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5ESU07IH1cbiAgcHVibGljIGlzU3RyaWtldGhyb3VnaCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuU1RSSUtFVEhST1VHSDsgfVxuICBwdWJsaWMgaXNQcm90ZWN0ZWQoKTogbnVtYmVyICAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5QUk9URUNURUQ7IH1cbiAgcHVibGljIGlzT3ZlcmxpbmUoKTogbnVtYmVyICAgICAgeyByZXR1cm4gdGhpcy5iZyAmIEJnRmxhZ3MuT1ZFUkxJTkU7IH1cblxuICAvLyBjb2xvciBtb2Rlc1xuICBwdWJsaWMgZ2V0RmdDb2xvck1vZGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0s7IH1cbiAgcHVibGljIGdldEJnQ29sb3JNb2RlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLOyB9XG4gIHB1YmxpYyBpc0ZnUkdCKCk6IGJvb2xlYW4gICAgICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1JHQjsgfVxuICBwdWJsaWMgaXNCZ1JHQigpOiBib29sZWFuICAgICAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9SR0I7IH1cbiAgcHVibGljIGlzRmdQYWxldHRlKCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8ICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2OyB9XG4gIHB1YmxpYyBpc0JnUGFsZXR0ZSgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNiB8fCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDI1NjsgfVxuICBwdWJsaWMgaXNGZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuICBwdWJsaWMgaXNCZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuICBwdWJsaWMgaXNBdHRyaWJ1dGVEZWZhdWx0KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5mZyA9PT0gMCAmJiB0aGlzLmJnID09PSAwOyB9XG5cbiAgLy8gY29sb3JzXG4gIHB1YmxpYyBnZXRGZ0NvbG9yKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAgLy8gQ01fREVGQVVMVCBkZWZhdWx0cyB0byAtMVxuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0QmdDb2xvcigpOiBudW1iZXIge1xuICAgIHN3aXRjaCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjogICByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsgIC8vIENNX0RFRkFVTFQgZGVmYXVsdHMgdG8gLTFcbiAgICB9XG4gIH1cblxuICAvLyBleHRlbmRlZCBhdHRyc1xuICBwdWJsaWMgaGFzRXh0ZW5kZWRBdHRycygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gIH1cbiAgcHVibGljIHVwZGF0ZUV4dGVuZGVkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmV4dGVuZGVkLmlzRW1wdHkoKSkge1xuICAgICAgdGhpcy5iZyAmPSB+QmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmcgfD0gQmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXRVbmRlcmxpbmVDb2xvcigpOiBudW1iZXIge1xuICAgIGlmICgodGhpcy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSAmJiB+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcikge1xuICAgICAgc3dpdGNoICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGZ0NvbG9yKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEZnQ29sb3IoKTtcbiAgfVxuICBwdWJsaWMgZ2V0VW5kZXJsaW5lQ29sb3JNb2RlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yXG4gICAgICA/IHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0tcbiAgICAgIDogdGhpcy5nZXRGZ0NvbG9yTW9kZSgpO1xuICB9XG4gIHB1YmxpYyBpc1VuZGVybGluZUNvbG9yUkdCKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSAmJiB+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvclxuICAgICAgPyAodGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvciAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUkdCXG4gICAgICA6IHRoaXMuaXNGZ1JHQigpO1xuICB9XG4gIHB1YmxpYyBpc1VuZGVybGluZUNvbG9yUGFsZXR0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkgJiYgfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3JcbiAgICAgID8gKHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNlxuICAgICAgICAgIHx8ICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2XG4gICAgICA6IHRoaXMuaXNGZ1BhbGV0dGUoKTtcbiAgfVxuICBwdWJsaWMgaXNVbmRlcmxpbmVDb2xvckRlZmF1bHQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yXG4gICAgICA/ICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMFxuICAgICAgOiB0aGlzLmlzRmdEZWZhdWx0KCk7XG4gIH1cbiAgcHVibGljIGdldFVuZGVybGluZVN0eWxlKCk6IFVuZGVybGluZVN0eWxlIHtcbiAgICByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuVU5ERVJMSU5FXG4gICAgICA/ICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQgPyB0aGlzLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlIDogVW5kZXJsaW5lU3R5bGUuU0lOR0xFKVxuICAgICAgOiBVbmRlcmxpbmVTdHlsZS5OT05FO1xuICB9XG4gIHB1YmxpYyBnZXRVbmRlcmxpbmVWYXJpYW50T2Zmc2V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lVmFyaWFudE9mZnNldDtcbiAgfVxufVxuXG5cbi8qKlxuICogRXh0ZW5kZWQgYXR0cmlidXRlcyBmb3IgYSBjZWxsLlxuICogSG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgZGlmZmVyZW50IHVuZGVybGluZSBzdHlsZXMgYW5kIGNvbG9yLlxuICovXG5leHBvcnQgY2xhc3MgRXh0ZW5kZWRBdHRycyBpbXBsZW1lbnRzIElFeHRlbmRlZEF0dHJzIHtcbiAgcHJpdmF0ZSBfZXh0OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZ2V0IGV4dCgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl91cmxJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKHRoaXMuX2V4dCAmIH5FeHRGbGFncy5VTkRFUkxJTkVfU1RZTEUpIHxcbiAgICAgICAgKHRoaXMudW5kZXJsaW5lU3R5bGUgPDwgMjYpXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZXh0O1xuICB9XG4gIHB1YmxpYyBzZXQgZXh0KHZhbHVlOiBudW1iZXIpIHsgdGhpcy5fZXh0ID0gdmFsdWU7IH1cblxuICBwdWJsaWMgZ2V0IHVuZGVybGluZVN0eWxlKCk6IFVuZGVybGluZVN0eWxlIHtcbiAgICAvLyBBbHdheXMgcmV0dXJuIHRoZSBVUkwgc3R5bGUgaWYgaXQgaGFzIG9uZVxuICAgIGlmICh0aGlzLl91cmxJZCkge1xuICAgICAgcmV0dXJuIFVuZGVybGluZVN0eWxlLkRBU0hFRDtcbiAgICB9XG4gICAgcmV0dXJuICh0aGlzLl9leHQgJiBFeHRGbGFncy5VTkRFUkxJTkVfU1RZTEUpID4+IDI2O1xuICB9XG4gIHB1YmxpYyBzZXQgdW5kZXJsaW5lU3R5bGUodmFsdWU6IFVuZGVybGluZVN0eWxlKSB7XG4gICAgdGhpcy5fZXh0ICY9IH5FeHRGbGFncy5VTkRFUkxJTkVfU1RZTEU7XG4gICAgdGhpcy5fZXh0IHw9ICh2YWx1ZSA8PCAyNikgJiBFeHRGbGFncy5VTkRFUkxJTkVfU1RZTEU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHVuZGVybGluZUNvbG9yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2V4dCAmIChBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgfVxuICBwdWJsaWMgc2V0IHVuZGVybGluZUNvbG9yKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9leHQgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICB0aGlzLl9leHQgfD0gdmFsdWUgJiAoQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gIH1cblxuICBwcml2YXRlIF91cmxJZDogbnVtYmVyID0gMDtcbiAgcHVibGljIGdldCB1cmxJZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl91cmxJZDtcbiAgfVxuICBwdWJsaWMgc2V0IHVybElkKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl91cmxJZCA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldCB1bmRlcmxpbmVWYXJpYW50T2Zmc2V0KCk6IG51bWJlciB7XG4gICAgY29uc3QgdmFsID0gKHRoaXMuX2V4dCAmIEV4dEZsYWdzLlZBUklBTlRfT0ZGU0VUKSA+PiAyOTtcbiAgICBpZiAodmFsIDwgMCkge1xuICAgICAgcmV0dXJuIHZhbCBeIDB4RkZGRkZGRjg7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgcHVibGljIHNldCB1bmRlcmxpbmVWYXJpYW50T2Zmc2V0KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9leHQgJj0gfkV4dEZsYWdzLlZBUklBTlRfT0ZGU0VUO1xuICAgIHRoaXMuX2V4dCB8PSAodmFsdWUgPDwgMjkpICYgRXh0RmxhZ3MuVkFSSUFOVF9PRkZTRVQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBleHQ6IG51bWJlciA9IDAsXG4gICAgdXJsSWQ6IG51bWJlciA9IDBcbiAgKSB7XG4gICAgdGhpcy5fZXh0ID0gZXh0O1xuICAgIHRoaXMuX3VybElkID0gdXJsSWQ7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogSUV4dGVuZGVkQXR0cnMge1xuICAgIHJldHVybiBuZXcgRXh0ZW5kZWRBdHRycyh0aGlzLl9leHQsIHRoaXMuX3VybElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW50IG1ldGhvZCB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBvYmplY3QgaG9sZHMgbm8gYWRkaXRpb25hbCBpbmZvcm1hdGlvbixcbiAgICogdGhhdCBuZWVkcyB0byBiZSBwZXJzaXN0YW50IGluIHRoZSBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy51bmRlcmxpbmVTdHlsZSA9PT0gVW5kZXJsaW5lU3R5bGUuTk9ORSAmJiB0aGlzLl91cmxJZCA9PT0gMDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2lyY3VsYXJMaXN0LCBJSW5zZXJ0RXZlbnQgfSBmcm9tICdjb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElkbGVUYXNrUXVldWUgfSBmcm9tICdjb21tb24vVGFza1F1ZXVlJztcbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhLCBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBFeHRlbmRlZEF0dHJzIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IEJ1ZmZlckxpbmUsIERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCwgcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQsIHJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCwgcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSwgcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJSZWZsb3cnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfQ09ERSwgTlVMTF9DRUxMX1dJRFRILCBXSElURVNQQUNFX0NFTExfQ0hBUiwgV0hJVEVTUEFDRV9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9XSURUSCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IE1hcmtlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvTWFya2VyJztcbmltcG9ydCB7IElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQ0hBUlNFVCB9IGZyb20gJ2NvbW1vbi9kYXRhL0NoYXJzZXRzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY29uc3QgTUFYX0JVRkZFUl9TSVpFID0gNDI5NDk2NzI5NTsgLy8gMl4zMiAtIDFcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgYSB0ZXJtaW5hbCBidWZmZXIgKGFuIGludGVybmFsIHN0YXRlIG9mIHRoZSB0ZXJtaW5hbCksIHdoZXJlIHRoZVxuICogZm9sbG93aW5nIGluZm9ybWF0aW9uIGlzIHN0b3JlZCAoaW4gaGlnaC1sZXZlbCk6XG4gKiAgIC0gdGV4dCBjb250ZW50IG9mIHRoaXMgcGFydGljdWxhciBidWZmZXJcbiAqICAgLSBjdXJzb3IgcG9zaXRpb25cbiAqICAgLSBzY3JvbGwgcG9zaXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlciBpbXBsZW1lbnRzIElCdWZmZXIge1xuICBwdWJsaWMgbGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT47XG4gIHB1YmxpYyB5ZGlzcDogbnVtYmVyID0gMDtcbiAgcHVibGljIHliYXNlOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgeTogbnVtYmVyID0gMDtcbiAgcHVibGljIHg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzY3JvbGxCb3R0b206IG51bWJlcjtcbiAgcHVibGljIHNjcm9sbFRvcDogbnVtYmVyO1xuICBwdWJsaWMgdGFiczogeyBbY29sdW1uOiBudW1iZXJdOiBib29sZWFuIHwgdW5kZWZpbmVkIH0gPSB7fTtcbiAgcHVibGljIHNhdmVkWTogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkWDogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkQ3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICBwdWJsaWMgc2F2ZWRDaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCA9IERFRkFVTFRfQ0hBUlNFVDtcbiAgcHVibGljIG1hcmtlcnM6IE1hcmtlcltdID0gW107XG4gIHByaXZhdGUgX251bGxDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX3doaXRlc3BhY2VDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfV0lEVEgsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX2NvbHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcm93czogbnVtYmVyO1xuICBwcml2YXRlIF9pc0NsZWFyaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfaGFzU2Nyb2xsYmFjazogYm9vbGVhbixcbiAgICBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX2NvbHMgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgdGhpcy5fcm93cyA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB0aGlzLmxpbmVzID0gbmV3IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4odGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSk7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gdGhpcy5fcm93cyAtIDE7XG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TnVsbENlbGwoYXR0cj86IElBdHRyaWJ1dGVEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBpZiAoYXR0cikge1xuICAgICAgdGhpcy5fbnVsbENlbGwuZmcgPSBhdHRyLmZnO1xuICAgICAgdGhpcy5fbnVsbENlbGwuYmcgPSBhdHRyLmJnO1xuICAgICAgdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5mZyA9IDA7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5iZyA9IDA7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5leHRlbmRlZCA9IG5ldyBFeHRlbmRlZEF0dHJzKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9udWxsQ2VsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaGl0ZXNwYWNlQ2VsbChhdHRyPzogSUF0dHJpYnV0ZURhdGEpOiBJQ2VsbERhdGEge1xuICAgIGlmIChhdHRyKSB7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZyA9IGF0dHIuZmc7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZyA9IGF0dHIuYmc7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZCA9IGF0dHIuZXh0ZW5kZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnID0gMDtcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnID0gMDtcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmV4dGVuZGVkID0gbmV3IEV4dGVuZGVkQXR0cnMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3doaXRlc3BhY2VDZWxsO1xuICB9XG5cbiAgcHVibGljIGdldEJsYW5rTGluZShhdHRyOiBJQXR0cmlidXRlRGF0YSwgaXNXcmFwcGVkPzogYm9vbGVhbik6IElCdWZmZXJMaW5lIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLmdldE51bGxDZWxsKGF0dHIpLCBpc1dyYXBwZWQpO1xuICB9XG5cbiAgcHVibGljIGdldCBoYXNTY3JvbGxiYWNrKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYXNTY3JvbGxiYWNrICYmIHRoaXMubGluZXMubWF4TGVuZ3RoID4gdGhpcy5fcm93cztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNDdXJzb3JJblZpZXdwb3J0KCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFic29sdXRlWSA9IHRoaXMueWJhc2UgKyB0aGlzLnk7XG4gICAgY29uc3QgcmVsYXRpdmVZID0gYWJzb2x1dGVZIC0gdGhpcy55ZGlzcDtcbiAgICByZXR1cm4gKHJlbGF0aXZlWSA+PSAwICYmIHJlbGF0aXZlWSA8IHRoaXMuX3Jvd3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvcnJlY3QgYnVmZmVyIGxlbmd0aCBiYXNlZCBvbiB0aGUgcm93cyBwcm92aWRlZCwgdGhlIHRlcm1pbmFsJ3NcbiAgICogc2Nyb2xsYmFjayBhbmQgd2hldGhlciB0aGlzIGJ1ZmZlciBpcyBmbGFnZ2VkIHRvIGhhdmUgc2Nyb2xsYmFjayBvciBub3QuXG4gICAqIEBwYXJhbSByb3dzIFRoZSB0ZXJtaW5hbCByb3dzIHRvIHVzZSBpbiB0aGUgY2FsY3VsYXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHJvd3M6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9oYXNTY3JvbGxiYWNrKSB7XG4gICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBjb25zdCBjb3JyZWN0QnVmZmVyTGVuZ3RoID0gcm93cyArIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsYmFjaztcblxuICAgIHJldHVybiBjb3JyZWN0QnVmZmVyTGVuZ3RoID4gTUFYX0JVRkZFUl9TSVpFID8gTUFYX0JVRkZFUl9TSVpFIDogY29ycmVjdEJ1ZmZlckxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyB0aGUgYnVmZmVyJ3Mgdmlld3BvcnQgd2l0aCBibGFuayBsaW5lcy5cbiAgICovXG4gIHB1YmxpYyBmaWxsVmlld3BvcnRSb3dzKGZpbGxBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmIChmaWxsQXR0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbGxBdHRyID0gREVGQVVMVF9BVFRSX0RBVEE7XG4gICAgICB9XG4gICAgICBsZXQgaSA9IHRoaXMuX3Jvd3M7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHRoaXMubGluZXMucHVzaCh0aGlzLmdldEJsYW5rTGluZShmaWxsQXR0cikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGJ1ZmZlciB0byBpdCdzIGluaXRpYWwgc3RhdGUsIGRpc2NhcmRpbmcgYWxsIHByZXZpb3VzIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy55ZGlzcCA9IDA7XG4gICAgdGhpcy55YmFzZSA9IDA7XG4gICAgdGhpcy55ID0gMDtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMubGluZXMgPSBuZXcgQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPih0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKTtcbiAgICB0aGlzLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5zY3JvbGxCb3R0b20gPSB0aGlzLl9yb3dzIC0gMTtcbiAgICB0aGlzLnNldHVwVGFiU3RvcHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSBidWZmZXIsIGFkanVzdGluZyBpdHMgZGF0YSBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIG5ld0NvbHMgVGhlIG5ldyBudW1iZXIgb2YgY29sdW1ucy5cbiAgICogQHBhcmFtIG5ld1Jvd3MgVGhlIG5ldyBudW1iZXIgb2Ygcm93cy5cbiAgICovXG4gIHB1YmxpYyByZXNpemUobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBzdG9yZSByZWZlcmVuY2UgdG8gbnVsbCBjZWxsIHdpdGggZGVmYXVsdCBhdHRyc1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG5cbiAgICAvLyBjb3VudCBidWZmZXJsaW5lcyB3aXRoIG92ZXJseSBiaWcgbWVtb3J5IHRvIGJlIGNsZWFuZWQgYWZ0ZXJ3YXJkc1xuICAgIGxldCBkaXJ0eU1lbW9yeUxpbmVzID0gMDtcblxuICAgIC8vIEluY3JlYXNlIG1heCBsZW5ndGggaWYgbmVlZGVkIGJlZm9yZSBhZGp1c3RtZW50cyB0byBhbGxvdyBzcGFjZSB0byBmaWxsXG4gICAgLy8gYXMgcmVxdWlyZWQuXG4gICAgY29uc3QgbmV3TWF4TGVuZ3RoID0gdGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aChuZXdSb3dzKTtcbiAgICBpZiAobmV3TWF4TGVuZ3RoID4gdGhpcy5saW5lcy5tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMubGluZXMubWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgYWRqdXN0bWVudHMgc2hvdWxkIG9ubHkgaGFwcGVuIGlmIHRoZSBidWZmZXIgaGFzIGJlZW5cbiAgICAvLyBpbml0aWFsaXplZC9maWxsZWQuXG4gICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRGVhbCB3aXRoIGNvbHVtbnMgaW5jcmVhc2luZyAocmVkdWNpbmcgbmVlZHMgdG8gaGFwcGVuIGFmdGVyIHJlZmxvdylcbiAgICAgIGlmICh0aGlzLl9jb2xzIDwgbmV3Q29scykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyArYm9vbGVhbiBmb3IgZmFzdCAwIG9yIDEgY29udmVyc2lvblxuICAgICAgICAgIGRpcnR5TWVtb3J5TGluZXMgKz0gK3RoaXMubGluZXMuZ2V0KGkpIS5yZXNpemUobmV3Q29scywgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc2l6ZSByb3dzIGluIGJvdGggZGlyZWN0aW9ucyBhcyBuZWVkZWRcbiAgICAgIGxldCBhZGRUb1kgPSAwO1xuICAgICAgaWYgKHRoaXMuX3Jvd3MgPCBuZXdSb3dzKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSB0aGlzLl9yb3dzOyB5IDwgbmV3Um93czsgeSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoIDwgbmV3Um93cyArIHRoaXMueWJhc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlIHx8IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eS5iYWNrZW5kICE9PSB1bmRlZmluZWQgfHwgdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzUHR5LmJ1aWxkTnVtYmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgLy8gSnVzdCBhZGQgdGhlIG5ldyBtaXNzaW5nIHJvd3Mgb24gV2luZG93cyBhcyBjb25wdHkgcmVwcmludHMgdGhlIHNjcmVlbiB3aXRoIGl0J3NcbiAgICAgICAgICAgICAgLy8gdmlldyBvZiB0aGUgd29ybGQuIE9uY2UgYSBsaW5lIGVudGVycyBzY3JvbGxiYWNrIGZvciBjb25wdHkgaXQgcmVtYWlucyB0aGVyZVxuICAgICAgICAgICAgICB0aGlzLmxpbmVzLnB1c2gobmV3IEJ1ZmZlckxpbmUobmV3Q29scywgbnVsbENlbGwpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnliYXNlID4gMCAmJiB0aGlzLmxpbmVzLmxlbmd0aCA8PSB0aGlzLnliYXNlICsgdGhpcy55ICsgYWRkVG9ZICsgMSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGlzIHJvb20gYWJvdmUgdGhlIGJ1ZmZlciBhbmQgdGhlcmUgYXJlIG5vIGVtcHR5IGVsZW1lbnRzIGJlbG93IHRoZSBsaW5lLFxuICAgICAgICAgICAgICAgIC8vIHNjcm9sbCB1cFxuICAgICAgICAgICAgICAgIHRoaXMueWJhc2UtLTtcbiAgICAgICAgICAgICAgICBhZGRUb1krKztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy55ZGlzcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIC8vIFZpZXdwb3J0IGlzIGF0IHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciwgbXVzdCBpbmNyZWFzZSBkb3dud2FyZHNcbiAgICAgICAgICAgICAgICAgIHRoaXMueWRpc3AtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgYmxhbmsgbGluZSBpZiB0aGVyZSBpcyBubyBidWZmZXIgbGVmdCBhdCB0aGUgdG9wIHRvIHNjcm9sbCB0bywgb3IgaWYgdGhlcmVcbiAgICAgICAgICAgICAgICAvLyBhcmUgYmxhbmsgbGluZXMgYWZ0ZXIgdGhlIGN1cnNvclxuICAgICAgICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyAodGhpcy5fcm93cyA+PSBuZXdSb3dzKVxuICAgICAgICBmb3IgKGxldCB5ID0gdGhpcy5fcm93czsgeSA+IG5ld1Jvd3M7IHktLSkge1xuICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA+IG5ld1Jvd3MgKyB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiB0aGlzLnliYXNlICsgdGhpcy55ICsgMSkge1xuICAgICAgICAgICAgICAvLyBUaGUgbGluZSBpcyBhIGJsYW5rIGxpbmUgYmVsb3cgdGhlIGN1cnNvciwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgIHRoaXMubGluZXMucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUaGUgbGluZSBpcyB0aGUgY3Vyc29yLCBzY3JvbGwgZG93blxuICAgICAgICAgICAgICB0aGlzLnliYXNlKys7XG4gICAgICAgICAgICAgIHRoaXMueWRpc3ArKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVkdWNlIG1heCBsZW5ndGggaWYgbmVlZGVkIGFmdGVyIGFkanVzdG1lbnRzLCB0aGlzIGlzIGRvbmUgYWZ0ZXIgYXMgaXRcbiAgICAgIC8vIHdvdWxkIG90aGVyd2lzZSBjdXQgZGF0YSBmcm9tIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlci5cbiAgICAgIGlmIChuZXdNYXhMZW5ndGggPCB0aGlzLmxpbmVzLm1heExlbmd0aCkge1xuICAgICAgICAvLyBUcmltIGZyb20gdGhlIHRvcCBvZiB0aGUgYnVmZmVyIGFuZCBhZGp1c3QgeWJhc2UgYW5kIHlkaXNwLlxuICAgICAgICBjb25zdCBhbW91bnRUb1RyaW0gPSB0aGlzLmxpbmVzLmxlbmd0aCAtIG5ld01heExlbmd0aDtcbiAgICAgICAgaWYgKGFtb3VudFRvVHJpbSA+IDApIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLnRyaW1TdGFydChhbW91bnRUb1RyaW0pO1xuICAgICAgICAgIHRoaXMueWJhc2UgPSBNYXRoLm1heCh0aGlzLnliYXNlIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgICB0aGlzLnlkaXNwID0gTWF0aC5tYXgodGhpcy55ZGlzcCAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgICAgdGhpcy5zYXZlZFkgPSBNYXRoLm1heCh0aGlzLnNhdmVkWSAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5lcy5tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBjdXJzb3Igc3RheXMgb24gc2NyZWVuXG4gICAgICB0aGlzLnggPSBNYXRoLm1pbih0aGlzLngsIG5ld0NvbHMgLSAxKTtcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgbmV3Um93cyAtIDEpO1xuICAgICAgaWYgKGFkZFRvWSkge1xuICAgICAgICB0aGlzLnkgKz0gYWRkVG9ZO1xuICAgICAgfVxuICAgICAgdGhpcy5zYXZlZFggPSBNYXRoLm1pbih0aGlzLnNhdmVkWCwgbmV3Q29scyAtIDEpO1xuXG4gICAgICB0aGlzLnNjcm9sbFRvcCA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGxCb3R0b20gPSBuZXdSb3dzIC0gMTtcblxuICAgIGlmICh0aGlzLl9pc1JlZmxvd0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuX3JlZmxvdyhuZXdDb2xzLCBuZXdSb3dzKTtcblxuICAgICAgLy8gVHJpbSB0aGUgZW5kIG9mIHRoZSBsaW5lIG9mZiBpZiBjb2xzIHNocnVua1xuICAgICAgaWYgKHRoaXMuX2NvbHMgPiBuZXdDb2xzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vICtib29sZWFuIGZvciBmYXN0IDAgb3IgMSBjb252ZXJzaW9uXG4gICAgICAgICAgZGlydHlNZW1vcnlMaW5lcyArPSArdGhpcy5saW5lcy5nZXQoaSkhLnJlc2l6ZShuZXdDb2xzLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9jb2xzID0gbmV3Q29scztcbiAgICB0aGlzLl9yb3dzID0gbmV3Um93cztcblxuICAgIHRoaXMuX21lbW9yeUNsZWFudXBRdWV1ZS5jbGVhcigpO1xuICAgIC8vIHNjaGVkdWxlIG1lbW9yeSBjbGVhbnVwIG9ubHksIGlmIG1vcmUgdGhhbiAxMCUgb2YgdGhlIGxpbmVzIGFyZSBhZmZlY3RlZFxuICAgIGlmIChkaXJ0eU1lbW9yeUxpbmVzID4gMC4xICogdGhpcy5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX21lbW9yeUNsZWFudXBQb3NpdGlvbiA9IDA7XG4gICAgICB0aGlzLl9tZW1vcnlDbGVhbnVwUXVldWUuZW5xdWV1ZSgoKSA9PiB0aGlzLl9iYXRjaGVkTWVtb3J5Q2xlYW51cCgpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9tZW1vcnlDbGVhbnVwUXVldWUgPSBuZXcgSWRsZVRhc2tRdWV1ZSgpO1xuICBwcml2YXRlIF9tZW1vcnlDbGVhbnVwUG9zaXRpb24gPSAwO1xuXG4gIHByaXZhdGUgX2JhdGNoZWRNZW1vcnlDbGVhbnVwKCk6IGJvb2xlYW4ge1xuICAgIGxldCBub3JtYWxSdW4gPSB0cnVlO1xuICAgIGlmICh0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24gPj0gdGhpcy5saW5lcy5sZW5ndGgpIHtcbiAgICAgIC8vIGNsZWFudXAgbWFkZSBpdCBvbmNlIHRocm91Z2ggYWxsIGxpbmVzLCB0aHVzIHJlc2NhbiBpbiBsb29wIGJlbG93IHRvIGFsc28gY2F0Y2ggc2hpZnRlZFxuICAgICAgLy8gbGluZXMsIHdoaWNoIHNob3VsZCBmaW5pc2ggcmF0aGVyIHF1aWNrIGlmIHRoZXJlIGFyZSBubyBtb3JlIGNsZWFudXBzIHBlbmRpbmdcbiAgICAgIHRoaXMuX21lbW9yeUNsZWFudXBQb3NpdGlvbiA9IDA7XG4gICAgICBub3JtYWxSdW4gPSBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGNvdW50ZWQgPSAwO1xuICAgIHdoaWxlICh0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24gPCB0aGlzLmxpbmVzLmxlbmd0aCkge1xuICAgICAgY291bnRlZCArPSB0aGlzLmxpbmVzLmdldCh0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24rKykhLmNsZWFudXBNZW1vcnkoKTtcbiAgICAgIC8vIGNsZWFudXAgbWF4IDEwMCBsaW5lcyBwZXIgYmF0Y2hcbiAgICAgIGlmIChjb3VudGVkID4gMTAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBub3JtYWwgcnVucyBhbHdheXMgbmVlZCBhbm90aGVyIHJlc2NhbiBhZnRlcndhcmRzXG4gICAgLy8gaWYgd2UgbWFkZSBpdCBoZXJlIHdpdGggbm9ybWFsUnVuPWZhbHNlLCB3ZSBhcmUgaW4gYSBmaW5hbCBydW5cbiAgICAvLyBhbmQgY2FuIGVuZCB0aGUgY2xlYW51cCB0YXNrIGZvciBzdXJlXG4gICAgcmV0dXJuIG5vcm1hbFJ1bjtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9pc1JlZmxvd0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgd2luZG93c1B0eSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eTtcbiAgICBpZiAod2luZG93c1B0eSAmJiB3aW5kb3dzUHR5LmJ1aWxkTnVtYmVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiB3aW5kb3dzUHR5LmJhY2tlbmQgPT09ICdjb25wdHknICYmIHdpbmRvd3NQdHkuYnVpbGROdW1iZXIgPj0gMjEzNzY7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9oYXNTY3JvbGxiYWNrICYmICF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93KG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NvbHMgPT09IG5ld0NvbHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cywgaWdub3JlIHRoZSBsYXN0IG9uZSBhcyBpdCBjYW5ub3QgYmUgd3JhcHBlZFxuICAgIGlmIChuZXdDb2xzID4gdGhpcy5fY29scykge1xuICAgICAgdGhpcy5fcmVmbG93TGFyZ2VyKG5ld0NvbHMsIG5ld1Jvd3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZWZsb3dTbWFsbGVyKG5ld0NvbHMsIG5ld1Jvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvd0xhcmdlcihuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHRvUmVtb3ZlOiBudW1iZXJbXSA9IHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUodGhpcy5saW5lcywgdGhpcy5fY29scywgbmV3Q29scywgdGhpcy55YmFzZSArIHRoaXMueSwgdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSkpO1xuICAgIGlmICh0b1JlbW92ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBuZXdMYXlvdXRSZXN1bHQgPSByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQodGhpcy5saW5lcywgdG9SZW1vdmUpO1xuICAgICAgcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQodGhpcy5saW5lcywgbmV3TGF5b3V0UmVzdWx0LmxheW91dCk7XG4gICAgICB0aGlzLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChuZXdDb2xzLCBuZXdSb3dzLCBuZXdMYXlvdXRSZXN1bHQuY291bnRSZW1vdmVkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlciwgY291bnRSZW1vdmVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuICAgIC8vIEFkanVzdCB2aWV3cG9ydCBiYXNlZCBvbiBudW1iZXIgb2YgaXRlbXMgcmVtb3ZlZFxuICAgIGxldCB2aWV3cG9ydEFkanVzdG1lbnRzID0gY291bnRSZW1vdmVkO1xuICAgIHdoaWxlICh2aWV3cG9ydEFkanVzdG1lbnRzLS0gPiAwKSB7XG4gICAgICBpZiAodGhpcy55YmFzZSA9PT0gMCkge1xuICAgICAgICBpZiAodGhpcy55ID4gMCkge1xuICAgICAgICAgIHRoaXMueS0tO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA8IG5ld1Jvd3MpIHtcbiAgICAgICAgICAvLyBBZGQgYW4gZXh0cmEgcm93IGF0IHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgdGhpcy5saW5lcy5wdXNoKG5ldyBCdWZmZXJMaW5lKG5ld0NvbHMsIG51bGxDZWxsKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnlkaXNwID09PSB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgdGhpcy55ZGlzcC0tO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueWJhc2UtLTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zYXZlZFkgPSBNYXRoLm1heCh0aGlzLnNhdmVkWSAtIGNvdW50UmVtb3ZlZCwgMCk7XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dTbWFsbGVyKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbnVsbENlbGwgPSB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKTtcbiAgICAvLyBHYXRoZXIgYWxsIEJ1ZmZlckxpbmVzIHRoYXQgbmVlZCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBCdWZmZXIgaGVyZSBzbyB0aGF0IHRoZXkgY2FuIGJlXG4gICAgLy8gYmF0Y2hlZCB1cCBhbmQgb25seSBjb21taXR0ZWQgb25jZVxuICAgIGNvbnN0IHRvSW5zZXJ0ID0gW107XG4gICAgbGV0IGNvdW50VG9JbnNlcnQgPSAwO1xuICAgIC8vIEdvIGJhY2t3YXJkcyBhcyBtYW55IGxpbmVzIG1heSBiZSB0cmltbWVkIGFuZCB0aGlzIHdpbGwgYXZvaWQgY29uc2lkZXJpbmcgdGhlbVxuICAgIGZvciAobGV0IHkgPSB0aGlzLmxpbmVzLmxlbmd0aCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgbGluZSBpcyBhIHByb2JsZW1cbiAgICAgIGxldCBuZXh0TGluZSA9IHRoaXMubGluZXMuZ2V0KHkpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICBpZiAoIW5leHRMaW5lIHx8ICFuZXh0TGluZS5pc1dyYXBwZWQgJiYgbmV4dExpbmUuZ2V0VHJpbW1lZExlbmd0aCgpIDw9IG5ld0NvbHMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEdhdGhlciB3cmFwcGVkIGxpbmVzIGFuZCBhZGp1c3QgeSB0byBiZSB0aGUgc3RhcnRpbmcgbGluZVxuICAgICAgY29uc3Qgd3JhcHBlZExpbmVzOiBCdWZmZXJMaW5lW10gPSBbbmV4dExpbmVdO1xuICAgICAgd2hpbGUgKG5leHRMaW5lLmlzV3JhcHBlZCAmJiB5ID4gMCkge1xuICAgICAgICBuZXh0TGluZSA9IHRoaXMubGluZXMuZ2V0KC0teSkgYXMgQnVmZmVyTGluZTtcbiAgICAgICAgd3JhcHBlZExpbmVzLnVuc2hpZnQobmV4dExpbmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVzZSBsaW5lcyBjb250YWluIHRoZSBjdXJzb3IgZG9uJ3QgdG91Y2ggdGhlbSwgdGhlIHByb2dyYW0gd2lsbCBoYW5kbGUgZml4aW5nIHVwXG4gICAgICAvLyB3cmFwcGVkIGxpbmVzIHdpdGggdGhlIGN1cnNvclxuICAgICAgY29uc3QgYWJzb2x1dGVZID0gdGhpcy55YmFzZSArIHRoaXMueTtcbiAgICAgIGlmIChhYnNvbHV0ZVkgPj0geSAmJiBhYnNvbHV0ZVkgPCB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdExpbmVMZW5ndGggPSB3cmFwcGVkTGluZXNbd3JhcHBlZExpbmVzLmxlbmd0aCAtIDFdLmdldFRyaW1tZWRMZW5ndGgoKTtcbiAgICAgIGNvbnN0IGRlc3RMaW5lTGVuZ3RocyA9IHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3Rocyh3cmFwcGVkTGluZXMsIHRoaXMuX2NvbHMsIG5ld0NvbHMpO1xuICAgICAgY29uc3QgbGluZXNUb0FkZCA9IGRlc3RMaW5lTGVuZ3Rocy5sZW5ndGggLSB3cmFwcGVkTGluZXMubGVuZ3RoO1xuICAgICAgbGV0IHRyaW1tZWRMaW5lczogbnVtYmVyO1xuICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDAgJiYgdGhpcy55ICE9PSB0aGlzLmxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgLy8gSWYgdGhlIHRvcCBzZWN0aW9uIG9mIHRoZSBidWZmZXIgaXMgbm90IHlldCBmaWxsZWRcbiAgICAgICAgdHJpbW1lZExpbmVzID0gTWF0aC5tYXgoMCwgdGhpcy55IC0gdGhpcy5saW5lcy5tYXhMZW5ndGggKyBsaW5lc1RvQWRkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyaW1tZWRMaW5lcyA9IE1hdGgubWF4KDAsIHRoaXMubGluZXMubGVuZ3RoIC0gdGhpcy5saW5lcy5tYXhMZW5ndGggKyBsaW5lc1RvQWRkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBuZXcgbGluZXNcbiAgICAgIGNvbnN0IG5ld0xpbmVzOiBCdWZmZXJMaW5lW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXNUb0FkZDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSB0aGlzLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSwgdHJ1ZSkgYXMgQnVmZmVyTGluZTtcbiAgICAgICAgbmV3TGluZXMucHVzaChuZXdMaW5lKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRvSW5zZXJ0LnB1c2goe1xuICAgICAgICAgIC8vIGNvdW50VG9JbnNlcnQgaGVyZSBnZXRzIHRoZSBhY3R1YWwgaW5kZXgsIHRha2luZyBpbnRvIGFjY291bnQgb3RoZXIgaW5zZXJ0ZWQgaXRlbXMuXG4gICAgICAgICAgLy8gdXNpbmcgdGhpcyB3ZSBjYW4gaXRlcmF0ZSB0aHJvdWdoIHRoZSBsaXN0IGZvcndhcmRzXG4gICAgICAgICAgc3RhcnQ6IHkgKyB3cmFwcGVkTGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCxcbiAgICAgICAgICBuZXdMaW5lc1xuICAgICAgICB9KTtcbiAgICAgICAgY291bnRUb0luc2VydCArPSBuZXdMaW5lcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICB3cmFwcGVkTGluZXMucHVzaCguLi5uZXdMaW5lcyk7XG5cbiAgICAgIC8vIENvcHkgYnVmZmVyIGRhdGEgdG8gbmV3IGxvY2F0aW9ucywgdGhpcyBuZWVkcyB0byBoYXBwZW4gYmFja3dhcmRzIHRvIGRvIGluLXBsYWNlXG4gICAgICBsZXQgZGVzdExpbmVJbmRleCA9IGRlc3RMaW5lTGVuZ3Rocy5sZW5ndGggLSAxOyAvLyBNYXRoLmZsb29yKGNlbGxzTmVlZGVkIC8gbmV3Q29scyk7XG4gICAgICBsZXQgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTsgLy8gY2VsbHNOZWVkZWQgJSBuZXdDb2xzO1xuICAgICAgaWYgKGRlc3RDb2wgPT09IDApIHtcbiAgICAgICAgZGVzdExpbmVJbmRleC0tO1xuICAgICAgICBkZXN0Q29sID0gZGVzdExpbmVMZW5ndGhzW2Rlc3RMaW5lSW5kZXhdO1xuICAgICAgfVxuICAgICAgbGV0IHNyY0xpbmVJbmRleCA9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSBsaW5lc1RvQWRkIC0gMTtcbiAgICAgIGxldCBzcmNDb2wgPSBsYXN0TGluZUxlbmd0aDtcbiAgICAgIHdoaWxlIChzcmNMaW5lSW5kZXggPj0gMCkge1xuICAgICAgICBjb25zdCBjZWxsc1RvQ29weSA9IE1hdGgubWluKHNyY0NvbCwgZGVzdENvbCk7XG4gICAgICAgIGlmICh3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIC8vIFNhbml0eSBjaGVjayB0aGF0IHRoZSBsaW5lIGV4aXN0cywgdGhpcyBoYXMgYmVlbiBrbm93biB0byBmYWlsIGZvciBhbiB1bmtub3duIHJlYXNvblxuICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIHN0b3AgdGhlIHJlZmxvdyBmcm9tIGhhcHBlbmluZyBpZiBhbiBleGNlcHRpb24gd291bGQgdGhyb3cuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW3NyY0xpbmVJbmRleF0sIHNyY0NvbCAtIGNlbGxzVG9Db3B5LCBkZXN0Q29sIC0gY2VsbHNUb0NvcHksIGNlbGxzVG9Db3B5LCB0cnVlKTtcbiAgICAgICAgZGVzdENvbCAtPSBjZWxsc1RvQ29weTtcbiAgICAgICAgaWYgKGRlc3RDb2wgPT09IDApIHtcbiAgICAgICAgICBkZXN0TGluZUluZGV4LS07XG4gICAgICAgICAgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBzcmNDb2wgLT0gY2VsbHNUb0NvcHk7XG4gICAgICAgIGlmIChzcmNDb2wgPT09IDApIHtcbiAgICAgICAgICBzcmNMaW5lSW5kZXgtLTtcbiAgICAgICAgICBjb25zdCB3cmFwcGVkTGluZXNJbmRleCA9IE1hdGgubWF4KHNyY0xpbmVJbmRleCwgMCk7XG4gICAgICAgICAgc3JjQ29sID0gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgd3JhcHBlZExpbmVzSW5kZXgsIHRoaXMuX2NvbHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE51bGwgb3V0IHRoZSBlbmQgb2YgdGhlIGxpbmUgZW5kcyBpZiBhIHdpZGUgY2hhcmFjdGVyIHdyYXBwZWQgdG8gdGhlIGZvbGxvd2luZyBsaW5lXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyYXBwZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZGVzdExpbmVMZW5ndGhzW2ldIDwgbmV3Q29scykge1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tpXS5zZXRDZWxsKGRlc3RMaW5lTGVuZ3Roc1tpXSwgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB2aWV3cG9ydCBhcyBuZWVkZWRcbiAgICAgIGxldCB2aWV3cG9ydEFkanVzdG1lbnRzID0gbGluZXNUb0FkZCAtIHRyaW1tZWRMaW5lcztcbiAgICAgIHdoaWxlICh2aWV3cG9ydEFkanVzdG1lbnRzLS0gPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLnliYXNlID09PSAwKSB7XG4gICAgICAgICAgaWYgKHRoaXMueSA8IG5ld1Jvd3MgLSAxKSB7XG4gICAgICAgICAgICB0aGlzLnkrKztcbiAgICAgICAgICAgIHRoaXMubGluZXMucG9wKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICAgIHRoaXMueWRpc3ArKztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRW5zdXJlIHliYXNlIGRvZXMgbm90IGV4Y2VlZCBpdHMgbWF4aW11bSB2YWx1ZVxuICAgICAgICAgIGlmICh0aGlzLnliYXNlIDwgTWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsIHRoaXMubGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCkgLSBuZXdSb3dzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy55YmFzZSA9PT0gdGhpcy55ZGlzcCkge1xuICAgICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnliYXNlKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnNhdmVkWSA9IE1hdGgubWluKHRoaXMuc2F2ZWRZICsgbGluZXNUb0FkZCwgdGhpcy55YmFzZSArIG5ld1Jvd3MgLSAxKTtcbiAgICB9XG5cbiAgICAvLyBSZWFycmFuZ2UgbGluZXMgaW4gdGhlIGJ1ZmZlciBpZiB0aGVyZSBhcmUgYW55IGluc2VydGlvbnMsIHRoaXMgaXMgZG9uZSBhdCB0aGUgZW5kIHJhdGhlclxuICAgIC8vIHRoYW4gZWFybGllciBzbyB0aGF0IGl0J3MgYSBzaW5nbGUgTyhuKSBwYXNzIHRocm91Z2ggdGhlIGJ1ZmZlciwgaW5zdGVhZCBvZiBPKG5eMikgZnJvbSBtYW55XG4gICAgLy8gY29zdGx5IGNhbGxzIHRvIENpcmN1bGFyTGlzdC5zcGxpY2UuXG4gICAgaWYgKHRvSW5zZXJ0Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFJlY29yZCBidWZmZXIgaW5zZXJ0IGV2ZW50cyBhbmQgdGhlbiBwbGF5IHRoZW0gYmFjayBiYWNrd2FyZHMgc28gdGhhdCB0aGUgaW5kZXhlcyBhcmVcbiAgICAgIC8vIGNvcnJlY3RcbiAgICAgIGNvbnN0IGluc2VydEV2ZW50czogSUluc2VydEV2ZW50W10gPSBbXTtcblxuICAgICAgLy8gUmVjb3JkIG9yaWdpbmFsIGxpbmVzIHNvIHRoZXkgZG9uJ3QgZ2V0IG92ZXJyaWRkZW4gd2hlbiB3ZSByZWFycmFuZ2UgdGhlIGxpc3RcbiAgICAgIGNvbnN0IG9yaWdpbmFsTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG9yaWdpbmFsTGluZXMucHVzaCh0aGlzLmxpbmVzLmdldChpKSBhcyBCdWZmZXJMaW5lKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yaWdpbmFsTGluZXNMZW5ndGggPSB0aGlzLmxpbmVzLmxlbmd0aDtcblxuICAgICAgbGV0IG9yaWdpbmFsTGluZUluZGV4ID0gb3JpZ2luYWxMaW5lc0xlbmd0aCAtIDE7XG4gICAgICBsZXQgbmV4dFRvSW5zZXJ0SW5kZXggPSAwO1xuICAgICAgbGV0IG5leHRUb0luc2VydCA9IHRvSW5zZXJ0W25leHRUb0luc2VydEluZGV4XTtcbiAgICAgIHRoaXMubGluZXMubGVuZ3RoID0gTWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsIHRoaXMubGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCk7XG4gICAgICBsZXQgY291bnRJbnNlcnRlZFNvRmFyID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCAtIDEsIG9yaWdpbmFsTGluZXNMZW5ndGggKyBjb3VudFRvSW5zZXJ0IC0gMSk7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChuZXh0VG9JbnNlcnQgJiYgbmV4dFRvSW5zZXJ0LnN0YXJ0ID4gb3JpZ2luYWxMaW5lSW5kZXggKyBjb3VudEluc2VydGVkU29GYXIpIHtcbiAgICAgICAgICAvLyBJbnNlcnQgZXh0cmEgbGluZXMgaGVyZSwgYWRqdXN0aW5nIGkgYXMgbmVlZGVkXG4gICAgICAgICAgZm9yIChsZXQgbmV4dEkgPSBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoIC0gMTsgbmV4dEkgPj0gMDsgbmV4dEktLSkge1xuICAgICAgICAgICAgdGhpcy5saW5lcy5zZXQoaS0tLCBuZXh0VG9JbnNlcnQubmV3TGluZXNbbmV4dEldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaSsrO1xuXG4gICAgICAgICAgLy8gQ3JlYXRlIGluc2VydCBldmVudHMgZm9yIGxhdGVyXG4gICAgICAgICAgaW5zZXJ0RXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgaW5kZXg6IG9yaWdpbmFsTGluZUluZGV4ICsgMSxcbiAgICAgICAgICAgIGFtb3VudDogbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY291bnRJbnNlcnRlZFNvRmFyICs9IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGg7XG4gICAgICAgICAgbmV4dFRvSW5zZXJ0ID0gdG9JbnNlcnRbKytuZXh0VG9JbnNlcnRJbmRleF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saW5lcy5zZXQoaSwgb3JpZ2luYWxMaW5lc1tvcmlnaW5hbExpbmVJbmRleC0tXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIG1hcmtlcnNcbiAgICAgIGxldCBpbnNlcnRDb3VudEVtaXR0ZWQgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IGluc2VydEV2ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpbnNlcnRFdmVudHNbaV0uaW5kZXggKz0gaW5zZXJ0Q291bnRFbWl0dGVkO1xuICAgICAgICB0aGlzLmxpbmVzLm9uSW5zZXJ0RW1pdHRlci5maXJlKGluc2VydEV2ZW50c1tpXSk7XG4gICAgICAgIGluc2VydENvdW50RW1pdHRlZCArPSBpbnNlcnRFdmVudHNbaV0uYW1vdW50O1xuICAgICAgfVxuICAgICAgY29uc3QgYW1vdW50VG9UcmltID0gTWF0aC5tYXgoMCwgb3JpZ2luYWxMaW5lc0xlbmd0aCArIGNvdW50VG9JbnNlcnQgLSB0aGlzLmxpbmVzLm1heExlbmd0aCk7XG4gICAgICBpZiAoYW1vdW50VG9UcmltID4gMCkge1xuICAgICAgICB0aGlzLmxpbmVzLm9uVHJpbUVtaXR0ZXIuZmlyZShhbW91bnRUb1RyaW0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGEgYnVmZmVyIGxpbmUgdG8gYSBzdHJpbmcsIHdpdGggb3B0aW9uYWwgc3RhcnQgYW5kIGVuZCBjb2x1bW5zLlxuICAgKiBXaWRlIGNoYXJhY3RlcnMgd2lsbCBjb3VudCBhcyB0d28gY29sdW1ucyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy4gVGhpc1xuICAgKiBmdW5jdGlvbiBpcyB1c2VmdWwgZm9yIGdldHRpbmcgdGhlIGFjdHVhbCB0ZXh0IHVuZGVybmVhdGggdGhlIHJhdyBzZWxlY3Rpb25cbiAgICogcG9zaXRpb24uXG4gICAqIEBwYXJhbSBsaW5lSW5kZXggVGhlIGFic29sdXRlIGluZGV4IG9mIHRoZSBsaW5lIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB0cmltUmlnaHQgV2hldGhlciB0byB0cmltIHdoaXRlc3BhY2UgdG8gdGhlIHJpZ2h0LlxuICAgKiBAcGFyYW0gc3RhcnRDb2wgVGhlIGNvbHVtbiB0byBzdGFydCBhdC5cbiAgICogQHBhcmFtIGVuZENvbCBUaGUgY29sdW1uIHRvIGVuZCBhdC5cbiAgICovXG4gIHB1YmxpYyB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcobGluZUluZGV4OiBudW1iZXIsIHRyaW1SaWdodDogYm9vbGVhbiwgc3RhcnRDb2w6IG51bWJlciA9IDAsIGVuZENvbD86IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMubGluZXMuZ2V0KGxpbmVJbmRleCk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBsaW5lLnRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodCwgc3RhcnRDb2wsIGVuZENvbCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0V3JhcHBlZFJhbmdlRm9yTGluZSh5OiBudW1iZXIpOiB7IGZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlciB9IHtcbiAgICBsZXQgZmlyc3QgPSB5O1xuICAgIGxldCBsYXN0ID0geTtcbiAgICAvLyBTY2FuIHVwd2FyZHMgZm9yIHdyYXBwZWQgbGluZXNcbiAgICB3aGlsZSAoZmlyc3QgPiAwICYmIHRoaXMubGluZXMuZ2V0KGZpcnN0KSEuaXNXcmFwcGVkKSB7XG4gICAgICBmaXJzdC0tO1xuICAgIH1cbiAgICAvLyBTY2FuIGRvd253YXJkcyBmb3Igd3JhcHBlZCBsaW5lc1xuICAgIHdoaWxlIChsYXN0ICsgMSA8IHRoaXMubGluZXMubGVuZ3RoICYmIHRoaXMubGluZXMuZ2V0KGxhc3QgKyAxKSEuaXNXcmFwcGVkKSB7XG4gICAgICBsYXN0Kys7XG4gICAgfVxuICAgIHJldHVybiB7IGZpcnN0LCBsYXN0IH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGkgIT09IG51bGwgJiYgaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMudGFic1tpXSkge1xuICAgICAgICBpID0gdGhpcy5wcmV2U3RvcChpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YWJzID0ge307XG4gICAgICBpID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKDsgaSA8IHRoaXMuX2NvbHM7IGkgKz0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50YWJTdG9wV2lkdGgpIHtcbiAgICAgIHRoaXMudGFic1tpXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgcHJldmlvdXMgdGFiIHN0b3AgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzIHRhYiBzdG9wLlxuICAgKi9cbiAgcHVibGljIHByZXZTdG9wKHg/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgeCA9IHRoaXMueDtcbiAgICB9XG4gICAgd2hpbGUgKCF0aGlzLnRhYnNbLS14XSAmJiB4ID4gMCk7XG4gICAgcmV0dXJuIHggPj0gdGhpcy5fY29scyA/IHRoaXMuX2NvbHMgLSAxIDogeCA8IDAgPyAwIDogeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQuXG4gICAqL1xuICBwdWJsaWMgbmV4dFN0b3AoeD86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHggPT09IG51bGwgfHwgeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gdGhpcy54O1xuICAgIH1cbiAgICB3aGlsZSAoIXRoaXMudGFic1srK3hdICYmIHggPCB0aGlzLl9jb2xzKTtcbiAgICByZXR1cm4geCA+PSB0aGlzLl9jb2xzID8gdGhpcy5fY29scyAtIDEgOiB4IDwgMCA/IDAgOiB4O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBtYXJrZXJzIG9uIHNpbmdsZSBsaW5lLlxuICAgKiBAcGFyYW0geSBUaGUgbGluZSB0byBjbGVhci5cbiAgICovXG4gIHB1YmxpYyBjbGVhck1hcmtlcnMoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5faXNDbGVhcmluZyA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLm1hcmtlcnNbaV0ubGluZSA9PT0geSkge1xuICAgICAgICB0aGlzLm1hcmtlcnNbaV0uZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLm1hcmtlcnMuc3BsaWNlKGktLSwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2lzQ2xlYXJpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgbWFya2VycyBvbiBhbGwgbGluZXNcbiAgICovXG4gIHB1YmxpYyBjbGVhckFsbE1hcmtlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5faXNDbGVhcmluZyA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMubWFya2Vyc1tpXS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLm1hcmtlcnMuc3BsaWNlKGktLSwgMSk7XG4gICAgfVxuICAgIHRoaXMuX2lzQ2xlYXJpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRNYXJrZXIoeTogbnVtYmVyKTogTWFya2VyIHtcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgTWFya2VyKHkpO1xuICAgIHRoaXMubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgbWFya2VyLnJlZ2lzdGVyKHRoaXMubGluZXMub25UcmltKGFtb3VudCA9PiB7XG4gICAgICBtYXJrZXIubGluZSAtPSBhbW91bnQ7XG4gICAgICAvLyBUaGUgbWFya2VyIHNob3VsZCBiZSBkaXNwb3NlZCB3aGVuIHRoZSBsaW5lIGlzIHRyaW1tZWQgZnJvbSB0aGUgYnVmZmVyXG4gICAgICBpZiAobWFya2VyLmxpbmUgPCAwKSB7XG4gICAgICAgIG1hcmtlci5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIG1hcmtlci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uSW5zZXJ0KGV2ZW50ID0+IHtcbiAgICAgIGlmIChtYXJrZXIubGluZSA+PSBldmVudC5pbmRleCkge1xuICAgICAgICBtYXJrZXIubGluZSArPSBldmVudC5hbW91bnQ7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIG1hcmtlci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uRGVsZXRlKGV2ZW50ID0+IHtcbiAgICAgIC8vIERlbGV0ZSB0aGUgbWFya2VyIGlmIGl0J3Mgd2l0aGluIHRoZSByYW5nZVxuICAgICAgaWYgKG1hcmtlci5saW5lID49IGV2ZW50LmluZGV4ICYmIG1hcmtlci5saW5lIDwgZXZlbnQuaW5kZXggKyBldmVudC5hbW91bnQpIHtcbiAgICAgICAgbWFya2VyLmRpc3Bvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2hpZnQgdGhlIG1hcmtlciBpZiBpdCdzIGFmdGVyIHRoZSBkZWxldGVkIHJhbmdlXG4gICAgICBpZiAobWFya2VyLmxpbmUgPiBldmVudC5pbmRleCkge1xuICAgICAgICBtYXJrZXIubGluZSAtPSBldmVudC5hbW91bnQ7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIG1hcmtlci5yZWdpc3RlcihtYXJrZXIub25EaXNwb3NlKCgpID0+IHRoaXMuX3JlbW92ZU1hcmtlcihtYXJrZXIpKSk7XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZU1hcmtlcihtYXJrZXI6IE1hcmtlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5faXNDbGVhcmluZykge1xuICAgICAgdGhpcy5tYXJrZXJzLnNwbGljZSh0aGlzLm1hcmtlcnMuaW5kZXhPZihtYXJrZXIpLCAxKTtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENoYXJEYXRhLCBJQXR0cmlidXRlRGF0YSwgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgSUV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgQXR0cmlidXRlcywgQmdGbGFncywgQ0hBUl9EQVRBX0FUVFJfSU5ERVgsIENIQVJfREFUQV9DSEFSX0lOREVYLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIENvbnRlbnQsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfQ09ERSwgTlVMTF9DRUxMX1dJRFRILCBXSElURVNQQUNFX0NFTExfQ0hBUiB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IHN0cmluZ0Zyb21Db2RlUG9pbnQgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuXG4vKipcbiAqIGJ1ZmZlciBtZW1vcnkgbGF5b3V0OlxuICpcbiAqICAgfCAgICAgICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICB8ICAgICAgICB1aW50MzJfdCAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfFxuICogICB8ICAgICAgICAgICAgIGBjb250ZW50YCAgICAgICAgICAgIHwgICAgICAgICAgYEZHYCAgICAgICAgICAgfCAgICAgICAgICBgQkdgICAgICAgICAgICB8XG4gKiAgIHwgd2N3aWR0aCgyKSBjb21iKDEpIGNvZGVwb2ludCgyMSkgfCBmbGFncyg4KSBSKDgpIEcoOCkgQig4KSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHxcbiAqL1xuXG5cbi8qKiB0eXBlZCBhcnJheSBzbG90cyB0YWtlbiBieSBvbmUgY2VsbCAqL1xuY29uc3QgQ0VMTF9TSVpFID0gMztcblxuLyoqXG4gKiBDZWxsIG1lbWJlciBpbmRpY2VzLlxuICpcbiAqIERpcmVjdCBhY2Nlc3M6XG4gKiAgICBgY29udGVudCA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtgXG4gKiAgICBgZmcgPSBkYXRhW2NvbHVtbiAqIENFTExfU0laRSArIENlbGwuRkddO2BcbiAqICAgIGBiZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5CR107YFxuICovXG5jb25zdCBlbnVtIENlbGwge1xuICBDT05URU5UID0gMCxcbiAgRkcgPSAxLCAvLyBjdXJyZW50bHkgc2ltcGx5IGhvbGRzIGFsbCBrbm93biBhdHRyc1xuICBCRyA9IDIgIC8vIGN1cnJlbnRseSB1bnVzZWRcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVRUUl9EQVRBID0gT2JqZWN0LmZyZWV6ZShuZXcgQXR0cmlidXRlRGF0YSgpKTtcblxuLy8gV29yayB2YXJpYWJsZXMgdG8gYXZvaWQgZ2FyYmFnZSBjb2xsZWN0aW9uXG5sZXQgJHN0YXJ0SW5kZXggPSAwO1xuXG4vKiogRmFjdG9yIHdoZW4gdG8gY2xlYW51cCB1bmRlcmx5aW5nIGFycmF5IGJ1ZmZlciBhZnRlciBzaHJpbmtpbmcuICovXG5jb25zdCBDTEVBTlVQX1RIUkVTSE9MRCA9IDI7XG5cbi8qKlxuICogVHlwZWQgYXJyYXkgYmFzZWQgYnVmZmVybGluZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBUaGVyZSBhcmUgMiB3YXlzIHRvIGluc2VydCBkYXRhIGludG8gdGhlIGNlbGwgYnVmZmVyOlxuICogLSBgc2V0Q2VsbEZyb21Db2RlcG9pbnRgICsgYGFkZENvZGVwb2ludFRvQ2VsbGBcbiAqICAgVXNlIHRoZXNlIGZvciBkYXRhIHRoYXQgaXMgYWxyZWFkeSBVVEYzMi5cbiAqICAgVXNlZCBkdXJpbmcgbm9ybWFsIGlucHV0IGluIGBJbnB1dEhhbmRsZXJgIGZvciBmYXN0ZXIgYnVmZmVyIGFjY2Vzcy5cbiAqIC0gYHNldENlbGxgXG4gKiAgIFRoaXMgbWV0aG9kIHRha2VzIGEgQ2VsbERhdGEgb2JqZWN0IGFuZCBzdG9yZXMgdGhlIGRhdGEgaW4gdGhlIGJ1ZmZlci5cbiAqICAgVXNlIGBDZWxsRGF0YS5mcm9tQ2hhckRhdGFgIHRvIGNyZWF0ZSB0aGUgQ2VsbERhdGEgb2JqZWN0IChlLmcuIGZyb20gSlMgc3RyaW5nKS5cbiAqXG4gKiBUbyByZXRyaWV2ZSBkYXRhIGZyb20gdGhlIGJ1ZmZlciB1c2UgZWl0aGVyIG9uZSBvZiB0aGUgcHJpbWl0aXZlIG1ldGhvZHNcbiAqIChpZiBvbmx5IG9uZSBwYXJ0aWN1bGFyIHZhbHVlIGlzIG5lZWRlZCkgb3IgYGxvYWRDZWxsYC4gRm9yIGBsb2FkQ2VsbGAgaW4gYSBsb29wXG4gKiBtZW1vcnkgYWxsb2NzIC8gR0MgcHJlc3N1cmUgY2FuIGJlIGdyZWF0bHkgcmVkdWNlZCBieSByZXVzaW5nIHRoZSBDZWxsRGF0YSBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJMaW5lIGltcGxlbWVudHMgSUJ1ZmZlckxpbmUge1xuICBwcm90ZWN0ZWQgX2RhdGE6IFVpbnQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX2NvbWJpbmVkOiB7W2luZGV4OiBudW1iZXJdOiBzdHJpbmd9ID0ge307XG4gIHByb3RlY3RlZCBfZXh0ZW5kZWRBdHRyczoge1tpbmRleDogbnVtYmVyXTogSUV4dGVuZGVkQXR0cnMgfCB1bmRlZmluZWR9ID0ge307XG4gIHB1YmxpYyBsZW5ndGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2xzOiBudW1iZXIsIGZpbGxDZWxsRGF0YT86IElDZWxsRGF0YSwgcHVibGljIGlzV3JhcHBlZDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheShjb2xzICogQ0VMTF9TSVpFKTtcbiAgICBjb25zdCBjZWxsID0gZmlsbENlbGxEYXRhIHx8IENlbGxEYXRhLmZyb21DaGFyRGF0YShbMCwgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NPREVdKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7ICsraSkge1xuICAgICAgdGhpcy5zZXRDZWxsKGksIGNlbGwpO1xuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGNvbHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNlbGwgZGF0YSBDaGFyRGF0YS5cbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHB1YmxpYyBnZXQoaW5kZXg6IG51bWJlcik6IENoYXJEYXRhIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgY29uc3QgY3AgPSBjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddLFxuICAgICAgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spXG4gICAgICAgID8gdGhpcy5fY29tYmluZWRbaW5kZXhdXG4gICAgICAgIDogKGNwKSA/IHN0cmluZ0Zyb21Db2RlUG9pbnQoY3ApIDogJycsXG4gICAgICBjb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQsXG4gICAgICAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSylcbiAgICAgICAgPyB0aGlzLl9jb21iaW5lZFtpbmRleF0uY2hhckNvZGVBdCh0aGlzLl9jb21iaW5lZFtpbmRleF0ubGVuZ3RoIC0gMSlcbiAgICAgICAgOiBjcFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNlbGwgZGF0YSBmcm9tIENoYXJEYXRhLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcHVibGljIHNldChpbmRleDogbnVtYmVyLCB2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSB2YWx1ZVtDSEFSX0RBVEFfQVRUUl9JTkRFWF07XG4gICAgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gPSB2YWx1ZVsxXTtcbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gaW5kZXggfCBDb250ZW50LklTX0NPTUJJTkVEX01BU0sgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKSB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcmltaXRpdmUgZ2V0dGVyc1xuICAgKiB1c2UgdGhlc2Ugd2hlbiBvbmx5IG9uZSB2YWx1ZSBpcyBuZWVkZWQsIG90aGVyd2lzZSB1c2UgYGxvYWRDZWxsYFxuICAgKi9cbiAgcHVibGljIGdldFdpZHRoKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA+PiBDb250ZW50LldJRFRIX1NISUZUO1xuICB9XG5cbiAgLyoqIFRlc3Qgd2hldGhlciBjb250ZW50IGhhcyB3aWR0aC4gKi9cbiAgcHVibGljIGhhc1dpZHRoKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuV0lEVEhfTUFTSztcbiAgfVxuXG4gIC8qKiBHZXQgRkcgY2VsbCBjb21wb25lbnQuICovXG4gIHB1YmxpYyBnZXRGZyhpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddO1xuICB9XG5cbiAgLyoqIEdldCBCRyBjZWxsIGNvbXBvbmVudC4gKi9cbiAgcHVibGljIGdldEJnKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR107XG4gIH1cblxuICAvKipcbiAgICogVGVzdCB3aGV0aGVyIGNvbnRhaW5zIGFueSBjaGFycy5cbiAgICogQmFzaWNhbGx5IGFuIGVtcHR5IGhhcyBubyBjb250ZW50LCBidXQgb3RoZXIgY2VsbHMgbWlnaHQgZGlmZmVyIGluIEZHL0JHXG4gICAqIGZyb20gcmVhbCBlbXB0eSBjZWxscy5cbiAgICovXG4gIHB1YmxpYyBoYXNDb250ZW50KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSEFTX0NPTlRFTlRfTUFTSztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29kZXBvaW50IG9mIHRoZSBjZWxsLlxuICAgKiBUbyBiZSBpbiBsaW5lIHdpdGggYGNvZGVgIGluIENoYXJEYXRhIHRoaXMgZWl0aGVyIHJldHVybnNcbiAgICogYSBzaW5nbGUgVVRGMzIgY29kZXBvaW50IG9yIHRoZSBsYXN0IGNvZGVwb2ludCBvZiBhIGNvbWJpbmVkIHN0cmluZy5cbiAgICovXG4gIHB1YmxpYyBnZXRDb2RlUG9pbnQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbaW5kZXhdLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIHRoZSBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgc3RyaW5nIGNvbnRlbnQgb2YgdGhlIGNlbGwuICovXG4gIHB1YmxpYyBnZXRTdHJpbmcoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgIHJldHVybiBzdHJpbmdGcm9tQ29kZVBvaW50KGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKTtcbiAgICB9XG4gICAgLy8gcmV0dXJuIGVtcHR5IHN0cmluZyBmb3IgZW1wdHkgY2VsbHNcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKiogR2V0IHN0YXRlIG9mIHByb3RlY3RlZCBmbGFnLiAqL1xuICBwdWJsaWMgaXNQcm90ZWN0ZWQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSAmIEJnRmxhZ3MuUFJPVEVDVEVEO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgZGF0YSBhdCBgaW5kZXhgIGludG8gYGNlbGxgLiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGNlbGxzIGluIGEgd2F5IHRoYXQncyBtb3JlIGZyaWVuZGx5XG4gICAqIHRvIEdDIGFzIGl0IHNpZ25pZmljYW50bHkgcmVkdWNlZCB0aGUgYW1vdW50IG9mIG5ldyBvYmplY3RzL3JlZmVyZW5jZXMgbmVlZGVkLlxuICAgKi9cbiAgcHVibGljIGxvYWRDZWxsKGluZGV4OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgJHN0YXJ0SW5kZXggPSBpbmRleCAqIENFTExfU0laRTtcbiAgICBjZWxsLmNvbnRlbnQgPSB0aGlzLl9kYXRhWyRzdGFydEluZGV4ICsgQ2VsbC5DT05URU5UXTtcbiAgICBjZWxsLmZnID0gdGhpcy5fZGF0YVskc3RhcnRJbmRleCArIENlbGwuRkddO1xuICAgIGNlbGwuYmcgPSB0aGlzLl9kYXRhWyRzdGFydEluZGV4ICsgQ2VsbC5CR107XG4gICAgaWYgKGNlbGwuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgY2VsbC5jb21iaW5lZERhdGEgPSB0aGlzLl9jb21iaW5lZFtpbmRleF07XG4gICAgfVxuICAgIGlmIChjZWxsLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpIHtcbiAgICAgIGNlbGwuZXh0ZW5kZWQgPSB0aGlzLl9leHRlbmRlZEF0dHJzW2luZGV4XSE7XG4gICAgfVxuICAgIHJldHVybiBjZWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkYXRhIGF0IGBpbmRleGAgdG8gYGNlbGxgLlxuICAgKi9cbiAgcHVibGljIHNldENlbGwoaW5kZXg6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgaWYgKGNlbGwuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gY2VsbC5jb21iaW5lZERhdGE7XG4gICAgfVxuICAgIGlmIChjZWxsLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpIHtcbiAgICAgIHRoaXMuX2V4dGVuZGVkQXR0cnNbaW5kZXhdID0gY2VsbC5leHRlbmRlZDtcbiAgICB9XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjZWxsLmNvbnRlbnQ7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gY2VsbC5mZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBjZWxsLmJnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBTaW5jZSB0aGUgaW5wdXQgaGFuZGxlciBzZWUgdGhlIGluY29taW5nIGNoYXJzIGFzIFVURjMyIGNvZGVwb2ludHMsXG4gICAqIGl0IGdldHMgYW4gb3B0aW1pemVkIGFjY2VzcyBtZXRob2QuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbEZyb21Db2RlcG9pbnQoaW5kZXg6IG51bWJlciwgY29kZVBvaW50OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGF0dHJzOiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIGlmIChhdHRycy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSB7XG4gICAgICB0aGlzLl9leHRlbmRlZEF0dHJzW2luZGV4XSA9IGF0dHJzLmV4dGVuZGVkO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGNvZGVQb2ludCB8ICh3aWR0aCA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSBhdHRycy5mZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBhdHRycy5iZztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb2RlcG9pbnQgdG8gYSBjZWxsIGZyb20gaW5wdXQgaGFuZGxlci5cbiAgICogRHVyaW5nIGlucHV0IHN0YWdlIGNvbWJpbmluZyBjaGFycyB3aXRoIGEgd2lkdGggb2YgMCBmb2xsb3cgYW5kIHN0YWNrXG4gICAqIG9udG8gYSBsZWFkaW5nIGNoYXIuIFNpbmNlIHdlIGFscmVhZHkgc2V0IHRoZSBhdHRyc1xuICAgKiBieSB0aGUgcHJldmlvdXMgYHNldERhdGFGcm9tQ29kZVBvaW50YCBjYWxsLCB3ZSBjYW4gb21pdCBpdCBoZXJlLlxuICAgKi9cbiAgcHVibGljIGFkZENvZGVwb2ludFRvQ2VsbChpbmRleDogbnVtYmVyLCBjb2RlUG9pbnQ6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIC8vIHdlIGFscmVhZHkgaGF2ZSBhIGNvbWJpbmVkIHN0cmluZywgc2ltcGx5IGFkZFxuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdICs9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICAgIC8vIG5vcm1hbCBjYXNlIGZvciBjb21iaW5pbmcgY2hhcnM6XG4gICAgICAgIC8vICAtIG1vdmUgY3VycmVudCBsZWFkaW5nIGNoYXIgKyBuZXcgb25lIGludG8gY29tYmluZWQgc3RyaW5nXG4gICAgICAgIC8vICAtIHNldCBjb21iaW5lZCBmbGFnXG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spICsgc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgICAgICBjb250ZW50ICY9IH5Db250ZW50LkNPREVQT0lOVF9NQVNLOyAvLyBzZXQgY29kZXBvaW50IGluIGJ1ZmZlciB0byAwXG4gICAgICAgIGNvbnRlbnQgfD0gQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4gLSB3ZSBhY3R1YWxseSBoYXZlIG5vIGRhdGEgaW4gdGhlIGNlbGwgeWV0XG4gICAgICAgIC8vIHNpbXBseSBzZXQgdGhlIGRhdGEgaW4gdGhlIGNlbGwgYnVmZmVyIHdpdGggYSB3aWR0aCBvZiAxXG4gICAgICAgIGNvbnRlbnQgPSBjb2RlUG9pbnQgfCAoMSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdpZHRoKSB7XG4gICAgICBjb250ZW50ICY9IH5Db250ZW50LldJRFRIX01BU0s7XG4gICAgICBjb250ZW50IHw9IHdpZHRoIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gICAgfVxuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29udGVudDtcbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRDZWxscyhwb3M6IG51bWJlciwgbjogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHBvcyAlPSB0aGlzLmxlbmd0aDtcblxuICAgIC8vIGhhbmRsZSBmdWxsd2lkdGggYXQgcG9zOiByZXNldCBjZWxsIG9uZSB0byB0aGUgbGVmdCBpZiBwb3MgaXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAocG9zICYmIHRoaXMuZ2V0V2lkdGgocG9zIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQocG9zIC0gMSwgMCwgMSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG5cbiAgICBpZiAobiA8IHRoaXMubGVuZ3RoIC0gcG9zKSB7XG4gICAgICBjb25zdCBjZWxsID0gbmV3IENlbGxEYXRhKCk7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSBwb3MgLSBuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIG4gKyBpLCB0aGlzLmxvYWRDZWxsKHBvcyArIGksIGNlbGwpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IGxpbmUgZW5kOiByZXNldCBsYXN0IGNlbGwgaWYgaXQgaXMgZmlyc3QgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmICh0aGlzLmdldFdpZHRoKHRoaXMubGVuZ3RoIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQodGhpcy5sZW5ndGggLSAxLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVDZWxscyhwb3M6IG51bWJlciwgbjogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHBvcyAlPSB0aGlzLmxlbmd0aDtcbiAgICBpZiAobiA8IHRoaXMubGVuZ3RoIC0gcG9zKSB7XG4gICAgICBjb25zdCBjZWxsID0gbmV3IENlbGxEYXRhKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoIC0gcG9zIC0gbjsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBpLCB0aGlzLmxvYWRDZWxsKHBvcyArIG4gKyBpLCBjZWxsKSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSBuOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBwb3M6XG4gICAgLy8gLSByZXNldCBwb3MtMSBpZiB3aWRlIGNoYXJcbiAgICAvLyAtIHJlc2V0IHBvcyBpZiB3aWR0aD09MCAocHJldmlvdXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXIpXG4gICAgaWYgKHBvcyAmJiB0aGlzLmdldFdpZHRoKHBvcyAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHBvcyAtIDEsIDAsIDEsIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmdldFdpZHRoKHBvcykgPT09IDAgJiYgIXRoaXMuaGFzQ29udGVudChwb3MpKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHBvcywgMCwgMSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVwbGFjZUNlbGxzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgcmVzcGVjdFByb3RlY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIC8vIGZ1bGwgYnJhbmNoaW5nIG9uIHJlc3BlY3RQcm90ZWN0PT10cnVlLCBob3BlZnVsbHkgZ2V0dGluZyBmYXN0IEpJVCBmb3Igc3RhbmRhcmQgY2FzZVxuICAgIGlmIChyZXNwZWN0UHJvdGVjdCkge1xuICAgICAgaWYgKHN0YXJ0ICYmIHRoaXMuZ2V0V2lkdGgoc3RhcnQgLSAxKSA9PT0gMiAmJiAhdGhpcy5pc1Byb3RlY3RlZChzdGFydCAtIDEpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQoc3RhcnQgLSAxLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuZ2V0V2lkdGgoZW5kIC0gMSkgPT09IDIgJiYgIXRoaXMuaXNQcm90ZWN0ZWQoZW5kKSkge1xuICAgICAgICB0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KGVuZCwgMCwgMSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChzdGFydCA8IGVuZCAgJiYgc3RhcnQgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNQcm90ZWN0ZWQoc3RhcnQpKSB7XG4gICAgICAgICAgdGhpcy5zZXRDZWxsKHN0YXJ0LCBmaWxsQ2VsbERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0Kys7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBzdGFydDogcmVzZXQgY2VsbCBvbmUgdG8gdGhlIGxlZnQgaWYgc3RhcnQgaXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoc3RhcnQgJiYgdGhpcy5nZXRXaWR0aChzdGFydCAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHN0YXJ0IC0gMSwgMCwgMSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBsYXN0IGNlbGwgKyAxOiByZXNldCB0byBlbXB0eSBjZWxsIGlmIGl0IGlzIHNlY29uZCBwYXJ0IG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKGVuZCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuZ2V0V2lkdGgoZW5kIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQoZW5kLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cblxuICAgIHdoaWxlIChzdGFydCA8IGVuZCAgJiYgc3RhcnQgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRDZWxsKHN0YXJ0KyssIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZSBCdWZmZXJMaW5lIHRvIGBjb2xzYCBmaWxsaW5nIGV4Y2VzcyBjZWxscyB3aXRoIGBmaWxsQ2VsbERhdGFgLlxuICAgKiBUaGUgdW5kZXJseWluZyBhcnJheSBidWZmZXIgd2lsbCBub3QgY2hhbmdlIGlmIHRoZXJlIGlzIHN0aWxsIGVub3VnaCBzcGFjZVxuICAgKiB0byBob2xkIHRoZSBuZXcgYnVmZmVyIGxpbmUgZGF0YS5cbiAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZywgd2hldGhlciBhIGBjbGVhbnVwTWVtb3J5YCBjYWxsIHdvdWxkIGZyZWVcbiAgICogZXhjZXNzIG1lbW9yeSAodHJ1ZSBhZnRlciBzaHJpbmtpbmcgPiBDTEVBTlVQX1RIUkVTSE9MRCkuXG4gICAqL1xuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiBib29sZWFuIHtcbiAgICBpZiAoY29scyA9PT0gdGhpcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhLmxlbmd0aCAqIDQgKiBDTEVBTlVQX1RIUkVTSE9MRCA8IHRoaXMuX2RhdGEuYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIGNvbnN0IHVpbnQzMkNlbGxzID0gY29scyAqIENFTExfU0laRTtcbiAgICBpZiAoY29scyA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fZGF0YS5idWZmZXIuYnl0ZUxlbmd0aCA+PSB1aW50MzJDZWxscyAqIDQpIHtcbiAgICAgICAgLy8gb3B0aW1pemF0aW9uOiBhdm9pZCBhbGxvYyBhbmQgZGF0YSBjb3B5IGlmIGJ1ZmZlciBoYXMgZW5vdWdoIHJvb21cbiAgICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhLmJ1ZmZlciwgMCwgdWludDMyQ2VsbHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2xvdyBwYXRoOiBuZXcgYWxsb2MgYW5kIGZ1bGwgZGF0YSBjb3B5XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkodWludDMyQ2VsbHMpO1xuICAgICAgICBkYXRhLnNldCh0aGlzLl9kYXRhKTtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGg7IGkgPCBjb2xzOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG9wdGltaXphdGlvbjoganVzdCBzaHJpbmsgdGhlIHZpZXcgb24gZXhpc3RpbmcgYnVmZmVyXG4gICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YS5zdWJhcnJheSgwLCB1aW50MzJDZWxscyk7XG4gICAgICAvLyBSZW1vdmUgYW55IGN1dCBvZmYgY29tYmluZWQgZGF0YVxuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2NvbWJpbmVkKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludChrZXlzW2ldLCAxMCk7XG4gICAgICAgIGlmIChrZXkgPj0gY29scykge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb21iaW5lZFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgYW55IGN1dCBvZmYgZXh0ZW5kZWQgYXR0cmlidXRlc1xuICAgICAgY29uc3QgZXh0S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2V4dGVuZGVkQXR0cnMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KGV4dEtleXNbaV0sIDEwKTtcbiAgICAgICAgaWYgKGtleSA+PSBjb2xzKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2V4dGVuZGVkQXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGNvbHM7XG4gICAgcmV0dXJuIHVpbnQzMkNlbGxzICogNCAqIENMRUFOVVBfVEhSRVNIT0xEIDwgdGhpcy5fZGF0YS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIHVuZGVybHlpbmcgYXJyYXkgYnVmZmVyLlxuICAgKiBBIGNsZWFudXAgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIGFycmF5IGJ1ZmZlciBleGNlZWRzIHRoZSBhY3R1YWwgdXNlZFxuICAgKiBtZW1vcnkgYnkgYSBmYWN0b3Igb2YgQ0xFQU5VUF9USFJFU0hPTEQuXG4gICAqIFJldHVybnMgMCBvciAxIGluZGljYXRpbmcgd2hldGhlciBhIGNsZWFudXAgaGFwcGVuZWQuXG4gICAqL1xuICBwdWJsaWMgY2xlYW51cE1lbW9yeSgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCAqIDQgKiBDTEVBTlVQX1RIUkVTSE9MRCA8IHRoaXMuX2RhdGEuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkodGhpcy5fZGF0YS5sZW5ndGgpO1xuICAgICAgZGF0YS5zZXQodGhpcy5fZGF0YSk7XG4gICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKiBmaWxsIGEgbGluZSB3aXRoIGZpbGxDaGFyRGF0YSAqL1xuICBwdWJsaWMgZmlsbChmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgcmVzcGVjdFByb3RlY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIC8vIGZ1bGwgYnJhbmNoaW5nIG9uIHJlc3BlY3RQcm90ZWN0PT10cnVlLCBob3BlZnVsbHkgZ2V0dGluZyBmYXN0IEpJVCBmb3Igc3RhbmRhcmQgY2FzZVxuICAgIGlmIChyZXNwZWN0UHJvdGVjdCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Byb3RlY3RlZChpKSkge1xuICAgICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NvbWJpbmVkID0ge307XG4gICAgdGhpcy5fZXh0ZW5kZWRBdHRycyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIGFsdGVyIHRvIGEgZnVsbCBjb3B5IG9mIGxpbmUgICovXG4gIHB1YmxpYyBjb3B5RnJvbShsaW5lOiBCdWZmZXJMaW5lKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGVuZ3RoICE9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheShsaW5lLl9kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXNlIGhpZ2ggc3BlZWQgY29weSBpZiBsZW5ndGhzIGFyZSBlcXVhbFxuICAgICAgdGhpcy5fZGF0YS5zZXQobGluZS5fZGF0YSk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gbGluZS5sZW5ndGg7XG4gICAgdGhpcy5fY29tYmluZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVsIGluIGxpbmUuX2NvbWJpbmVkKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtlbF0gPSBsaW5lLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIHRoaXMuX2V4dGVuZGVkQXR0cnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVsIGluIGxpbmUuX2V4dGVuZGVkQXR0cnMpIHtcbiAgICAgIHRoaXMuX2V4dGVuZGVkQXR0cnNbZWxdID0gbGluZS5fZXh0ZW5kZWRBdHRyc1tlbF07XG4gICAgfVxuICAgIHRoaXMuaXNXcmFwcGVkID0gbGluZS5pc1dyYXBwZWQ7XG4gIH1cblxuICAvKiogY3JlYXRlIGEgbmV3IGNsb25lICovXG4gIHB1YmxpYyBjbG9uZSgpOiBJQnVmZmVyTGluZSB7XG4gICAgY29uc3QgbmV3TGluZSA9IG5ldyBCdWZmZXJMaW5lKDApO1xuICAgIG5ld0xpbmUuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkodGhpcy5fZGF0YSk7XG4gICAgbmV3TGluZS5sZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBmb3IgKGNvbnN0IGVsIGluIHRoaXMuX2NvbWJpbmVkKSB7XG4gICAgICBuZXdMaW5lLl9jb21iaW5lZFtlbF0gPSB0aGlzLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIGZvciAoY29uc3QgZWwgaW4gdGhpcy5fZXh0ZW5kZWRBdHRycykge1xuICAgICAgbmV3TGluZS5fZXh0ZW5kZWRBdHRyc1tlbF0gPSB0aGlzLl9leHRlbmRlZEF0dHJzW2VsXTtcbiAgICB9XG4gICAgbmV3TGluZS5pc1dyYXBwZWQgPSB0aGlzLmlzV3JhcHBlZDtcbiAgICByZXR1cm4gbmV3TGluZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUcmltbWVkTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGlmICgodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSEFTX0NPTlRFTlRfTUFTSykpIHtcbiAgICAgICAgcmV0dXJuIGkgKyAodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA+PiBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0Tm9CZ1RyaW1tZWRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgaWYgKCh0aGlzLl9kYXRhW2kgKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5IQVNfQ09OVEVOVF9NQVNLKSB8fCAodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gJiBBdHRyaWJ1dGVzLkNNX01BU0spKSB7XG4gICAgICAgIHJldHVybiBpICsgKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIGNvcHlDZWxsc0Zyb20oc3JjOiBCdWZmZXJMaW5lLCBzcmNDb2w6IG51bWJlciwgZGVzdENvbDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYXBwbHlJblJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzcmNEYXRhID0gc3JjLl9kYXRhO1xuICAgIGlmIChhcHBseUluUmV2ZXJzZSkge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IGxlbmd0aCAtIDE7IGNlbGwgPj0gMDsgY2VsbC0tKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ0VMTF9TSVpFOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9kYXRhWyhkZXN0Q29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXSA9IHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkge1xuICAgICAgICAgIHRoaXMuX2V4dGVuZGVkQXR0cnNbZGVzdENvbCArIGNlbGxdID0gc3JjLl9leHRlbmRlZEF0dHJzW3NyY0NvbCArIGNlbGxdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGNlbGwgPSAwOyBjZWxsIDwgbGVuZ3RoOyBjZWxsKyspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDRUxMX1NJWkU7IGkrKykge1xuICAgICAgICAgIHRoaXMuX2RhdGFbKGRlc3RDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldID0gc3JjRGF0YVsoc3JjQ29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3JjRGF0YVsoc3JjQ29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSB7XG4gICAgICAgICAgdGhpcy5fZXh0ZW5kZWRBdHRyc1tkZXN0Q29sICsgY2VsbF0gPSBzcmMuX2V4dGVuZGVkQXR0cnNbc3JjQ29sICsgY2VsbF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIGFueSBjb21iaW5lZCBkYXRhIG92ZXIgYXMgbmVlZGVkLCBGSVhNRTogcmVwZWF0IGZvciBleHRlbmRlZCBhdHRyc1xuICAgIGNvbnN0IHNyY0NvbWJpbmVkS2V5cyA9IE9iamVjdC5rZXlzKHNyYy5fY29tYmluZWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjQ29tYmluZWRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBwYXJzZUludChzcmNDb21iaW5lZEtleXNbaV0sIDEwKTtcbiAgICAgIGlmIChrZXkgPj0gc3JjQ29sKSB7XG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2tleSAtIHNyY0NvbCArIGRlc3RDb2xdID0gc3JjLl9jb21iaW5lZFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBidWZmZXIgbGluZSB0byBhIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHRyaW1SaWdodCBXaGV0aGVyIHRvIHRyaW0gYW55IGVtcHR5IGNlbGxzIG9uIHRoZSByaWdodC5cbiAgICogQHBhcmFtIHN0YXJ0Q29sIFRoZSBjb2x1bW4gdG8gc3RhcnQgdGhlIHN0cmluZyAoMC1iYXNlZCBpbmNsdXNpdmUpLlxuICAgKiBAcGFyYW0gZW5kQ29sIFRoZSBjb2x1bW4gdG8gZW5kIHRoZSBzdHJpbmcgKDAtYmFzZWQgZXhjbHVzaXZlKS5cbiAgICogQHBhcmFtIG91dENvbHVtbnMgaWYgc3BlY2lmaWVkLCB0aGlzIGFycmF5IHdpbGwgYmUgZmlsbGVkIHdpdGggY29sdW1uIG51bWJlcnMgc3VjaCB0aGF0XG4gICAqIGByZXR1cm5lZFN0cmluZ1tpXWAgaXMgZGlzcGxheWVkIGF0IGBvdXRDb2x1bW5zW2ldYCBjb2x1bW4uIGBvdXRDb2x1bW5zW3JldHVybmVkU3RyaW5nLmxlbmd0aF1gXG4gICAqIGlzIHdoZXJlIHRoZSBjaGFyYWN0ZXIgZm9sbG93aW5nIGByZXR1cm5lZFN0cmluZ2Agd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAqXG4gICAqIFdoZW4gYSBzaW5nbGUgY2VsbCBpcyB0cmFuc2xhdGVkIHRvIG11bHRpcGxlIFVURi0xNiBjb2RlIHVuaXRzIChlLmcuIHN1cnJvZ2F0ZSBwYWlyKSBpbiB0aGVcbiAgICogcmV0dXJuZWQgc3RyaW5nLCB0aGUgY29ycmVzcG9uZGluZyBlbnRyaWVzIGluIGBvdXRDb2x1bW5zYCB3aWxsIGhhdmUgdGhlIHNhbWUgY29sdW1uIG51bWJlci5cbiAgICovXG4gIHB1YmxpYyB0cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQ/OiBib29sZWFuLCBzdGFydENvbD86IG51bWJlciwgZW5kQ29sPzogbnVtYmVyLCBvdXRDb2x1bW5zPzogbnVtYmVyW10pOiBzdHJpbmcge1xuICAgIHN0YXJ0Q29sID0gc3RhcnRDb2wgPz8gMDtcbiAgICBlbmRDb2wgPSBlbmRDb2wgPz8gdGhpcy5sZW5ndGg7XG4gICAgaWYgKHRyaW1SaWdodCkge1xuICAgICAgZW5kQ29sID0gTWF0aC5taW4oZW5kQ29sLCB0aGlzLmdldFRyaW1tZWRMZW5ndGgoKSk7XG4gICAgfVxuICAgIGlmIChvdXRDb2x1bW5zKSB7XG4gICAgICBvdXRDb2x1bW5zLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICB3aGlsZSAoc3RhcnRDb2wgPCBlbmRDb2wpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW3N0YXJ0Q29sICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICAgIGNvbnN0IGNwID0gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gICAgICBjb25zdCBjaGFycyA9IChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSA/IHRoaXMuX2NvbWJpbmVkW3N0YXJ0Q29sXSA6IChjcCkgPyBzdHJpbmdGcm9tQ29kZVBvaW50KGNwKSA6IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgcmVzdWx0ICs9IGNoYXJzO1xuICAgICAgaWYgKG91dENvbHVtbnMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIG91dENvbHVtbnMucHVzaChzdGFydENvbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0YXJ0Q29sICs9IChjb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQpIHx8IDE7IC8vIGFsd2F5cyBhZHZhbmNlIGJ5IGF0IGxlYXN0IDFcbiAgICB9XG4gICAgaWYgKG91dENvbHVtbnMpIHtcbiAgICAgIG91dENvbHVtbnMucHVzaChzdGFydENvbCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEJ1ZmZlckxpbmUgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlckxpbmUnO1xuaW1wb3J0IHsgQ2lyY3VsYXJMaXN0IH0gZnJvbSAnY29tbW9uL0NpcmN1bGFyTGlzdCc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJTmV3TGF5b3V0UmVzdWx0IHtcbiAgbGF5b3V0OiBudW1iZXJbXTtcbiAgY291bnRSZW1vdmVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogRXZhbHVhdGVzIGFuZCByZXR1cm5zIGluZGV4ZXMgdG8gYmUgcmVtb3ZlZCBhZnRlciBhIHJlZmxvdyBsYXJnZXIgb2NjdXJzLiBMaW5lcyB3aWxsIGJlIHJlbW92ZWRcbiAqIHdoZW4gYSB3cmFwcGVkIGxpbmUgdW53cmFwcy5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIG9sZENvbHMgVGhlIGNvbHVtbnMgYmVmb3JlIHJlc2l6ZVxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICogQHBhcmFtIGJ1ZmZlckFic29sdXRlWSBUaGUgYWJzb2x1dGUgeSBwb3NpdGlvbiBvZiB0aGUgY3Vyc29yIChiYXNlWSArIGN1cnNvclkpLlxuICogQHBhcmFtIG51bGxDZWxsIFRoZSBjZWxsIGRhdGEgdG8gdXNlIHdoZW4gZmlsbGluZyBpbiBlbXB0eSBjZWxscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIG9sZENvbHM6IG51bWJlciwgbmV3Q29sczogbnVtYmVyLCBidWZmZXJBYnNvbHV0ZVk6IG51bWJlciwgbnVsbENlbGw6IElDZWxsRGF0YSk6IG51bWJlcltdIHtcbiAgLy8gR2F0aGVyIGFsbCBCdWZmZXJMaW5lcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBCdWZmZXIgaGVyZSBzbyB0aGF0IHRoZXkgY2FuIGJlXG4gIC8vIGJhdGNoZWQgdXAgYW5kIG9ubHkgY29tbWl0dGVkIG9uY2VcbiAgY29uc3QgdG9SZW1vdmU6IG51bWJlcltdID0gW107XG5cbiAgZm9yIChsZXQgeSA9IDA7IHkgPCBsaW5lcy5sZW5ndGggLSAxOyB5KyspIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIHJvdyBpcyB3cmFwcGVkXG4gICAgbGV0IGkgPSB5O1xuICAgIGxldCBuZXh0TGluZSA9IGxpbmVzLmdldCgrK2kpIGFzIEJ1ZmZlckxpbmU7XG4gICAgaWYgKCFuZXh0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGhvdyBtYW55IGxpbmVzIGl0J3Mgd3JhcHBlZCBmb3JcbiAgICBjb25zdCB3cmFwcGVkTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtsaW5lcy5nZXQoeSkgYXMgQnVmZmVyTGluZV07XG4gICAgd2hpbGUgKGkgPCBsaW5lcy5sZW5ndGggJiYgbmV4dExpbmUuaXNXcmFwcGVkKSB7XG4gICAgICB3cmFwcGVkTGluZXMucHVzaChuZXh0TGluZSk7XG4gICAgICBuZXh0TGluZSA9IGxpbmVzLmdldCgrK2kpIGFzIEJ1ZmZlckxpbmU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlc2UgbGluZXMgY29udGFpbiB0aGUgY3Vyc29yIGRvbid0IHRvdWNoIHRoZW0sIHRoZSBwcm9ncmFtIHdpbGwgaGFuZGxlIGZpeGluZyB1cCB3cmFwcGVkXG4gICAgLy8gbGluZXMgd2l0aCB0aGUgY3Vyc29yXG4gICAgaWYgKGJ1ZmZlckFic29sdXRlWSA+PSB5ICYmIGJ1ZmZlckFic29sdXRlWSA8IGkpIHtcbiAgICAgIHkgKz0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIDE7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnNcbiAgICBsZXQgZGVzdExpbmVJbmRleCA9IDA7XG4gICAgbGV0IGRlc3RDb2wgPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBkZXN0TGluZUluZGV4LCBvbGRDb2xzKTtcbiAgICBsZXQgc3JjTGluZUluZGV4ID0gMTtcbiAgICBsZXQgc3JjQ29sID0gMDtcbiAgICB3aGlsZSAoc3JjTGluZUluZGV4IDwgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc3JjVHJpbW1lZFRpbmVMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lSW5kZXgsIG9sZENvbHMpO1xuICAgICAgY29uc3Qgc3JjUmVtYWluaW5nQ2VsbHMgPSBzcmNUcmltbWVkVGluZUxlbmd0aCAtIHNyY0NvbDtcbiAgICAgIGNvbnN0IGRlc3RSZW1haW5pbmdDZWxscyA9IG5ld0NvbHMgLSBkZXN0Q29sO1xuICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNSZW1haW5pbmdDZWxscywgZGVzdFJlbWFpbmluZ0NlbGxzKTtcblxuICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW3NyY0xpbmVJbmRleF0sIHNyY0NvbCwgZGVzdENvbCwgY2VsbHNUb0NvcHksIGZhbHNlKTtcblxuICAgICAgZGVzdENvbCArPSBjZWxsc1RvQ29weTtcbiAgICAgIGlmIChkZXN0Q29sID09PSBuZXdDb2xzKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgrKztcbiAgICAgICAgZGVzdENvbCA9IDA7XG4gICAgICB9XG4gICAgICBzcmNDb2wgKz0gY2VsbHNUb0NvcHk7XG4gICAgICBpZiAoc3JjQ29sID09PSBzcmNUcmltbWVkVGluZUxlbmd0aCkge1xuICAgICAgICBzcmNMaW5lSW5kZXgrKztcbiAgICAgICAgc3JjQ29sID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBsYXN0IGNlbGwgaXNuJ3Qgd2lkZSwgaWYgaXQgaXMgY29weSBpdCB0byB0aGUgY3VycmVudCBkZXN0XG4gICAgICBpZiAoZGVzdENvbCA9PT0gMCAmJiBkZXN0TGluZUluZGV4ICE9PSAwKSB7XG4gICAgICAgIGlmICh3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleCAtIDFdLmdldFdpZHRoKG5ld0NvbHMgLSAxKSA9PT0gMikge1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0sIG5ld0NvbHMgLSAxLCBkZXN0Q29sKyssIDEsIGZhbHNlKTtcbiAgICAgICAgICAvLyBOdWxsIG91dCB0aGUgZW5kIG9mIHRoZSBsYXN0IHJvd1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0uc2V0Q2VsbChuZXdDb2xzIC0gMSwgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgb3V0IHJlbWFpbmluZyBjZWxscyBvciBmcmFnbWVudHMgY291bGQgcmVtYWluO1xuICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5yZXBsYWNlQ2VsbHMoZGVzdENvbCwgbmV3Q29scywgbnVsbENlbGwpO1xuXG4gICAgLy8gV29yayBiYWNrd2FyZHMgYW5kIHJlbW92ZSBhbnkgcm93cyBhdCB0aGUgZW5kIHRoYXQgb25seSBjb250YWluIG51bGwgY2VsbHNcbiAgICBsZXQgY291bnRUb1JlbW92ZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICBpZiAoaSA+IGRlc3RMaW5lSW5kZXggfHwgd3JhcHBlZExpbmVzW2ldLmdldFRyaW1tZWRMZW5ndGgoKSA9PT0gMCkge1xuICAgICAgICBjb3VudFRvUmVtb3ZlKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY291bnRUb1JlbW92ZSA+IDApIHtcbiAgICAgIHRvUmVtb3ZlLnB1c2goeSArIHdyYXBwZWRMaW5lcy5sZW5ndGggLSBjb3VudFRvUmVtb3ZlKTsgLy8gaW5kZXhcbiAgICAgIHRvUmVtb3ZlLnB1c2goY291bnRUb1JlbW92ZSk7XG4gICAgfVxuXG4gICAgeSArPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTtcbiAgfVxuICByZXR1cm4gdG9SZW1vdmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJuIHRoZSBuZXcgbGF5b3V0IGZvciBsaW5lcyBnaXZlbiBhbiBhcnJheSBvZiBpbmRleGVzIHRvIGJlIHJlbW92ZWQuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSB0b1JlbW92ZSBUaGUgaW5kZXhlcyB0byByZW1vdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIHRvUmVtb3ZlOiBudW1iZXJbXSk6IElOZXdMYXlvdXRSZXN1bHQge1xuICBjb25zdCBsYXlvdXQ6IG51bWJlcltdID0gW107XG4gIC8vIEZpcnN0IGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBhbmQgZ2V0IHRoZSBhY3R1YWwgaW5kZXhlcyB0byB1c2UgZm9yIHJvd3NcbiAgbGV0IG5leHRUb1JlbW92ZUluZGV4ID0gMDtcbiAgbGV0IG5leHRUb1JlbW92ZVN0YXJ0ID0gdG9SZW1vdmVbbmV4dFRvUmVtb3ZlSW5kZXhdO1xuICBsZXQgY291bnRSZW1vdmVkU29GYXIgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5leHRUb1JlbW92ZVN0YXJ0ID09PSBpKSB7XG4gICAgICBjb25zdCBjb3VudFRvUmVtb3ZlID0gdG9SZW1vdmVbKytuZXh0VG9SZW1vdmVJbmRleF07XG5cbiAgICAgIC8vIFRlbGwgbWFya2VycyB0aGF0IHRoZXJlIHdhcyBhIGRlbGV0aW9uXG4gICAgICBsaW5lcy5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7XG4gICAgICAgIGluZGV4OiBpIC0gY291bnRSZW1vdmVkU29GYXIsXG4gICAgICAgIGFtb3VudDogY291bnRUb1JlbW92ZVxuICAgICAgfSk7XG5cbiAgICAgIGkgKz0gY291bnRUb1JlbW92ZSAtIDE7XG4gICAgICBjb3VudFJlbW92ZWRTb0ZhciArPSBjb3VudFRvUmVtb3ZlO1xuICAgICAgbmV4dFRvUmVtb3ZlU3RhcnQgPSB0b1JlbW92ZVsrK25leHRUb1JlbW92ZUluZGV4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5b3V0LnB1c2goaSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgbGF5b3V0LFxuICAgIGNvdW50UmVtb3ZlZDogY291bnRSZW1vdmVkU29GYXJcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgbmV3IGxheW91dCB0byB0aGUgYnVmZmVyLiBUaGlzIGVzc2VudGlhbGx5IGRvZXMgdGhlIHNhbWUgYXMgbWFueSBzcGxpY2UgY2FsbHMgYnV0IGl0J3NcbiAqIGRvbmUgYWxsIGF0IG9uY2UgaW4gYSBzaW5nbGUgaXRlcmF0aW9uIHRocm91Z2ggdGhlIGxpc3Qgc2luY2Ugc3BsaWNlIGlzIHZlcnkgZXhwZW5zaXZlLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gbmV3TGF5b3V0IFRoZSBuZXcgbGF5b3V0IHRvIGFwcGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIG5ld0xheW91dDogbnVtYmVyW10pOiB2b2lkIHtcbiAgLy8gUmVjb3JkIG9yaWdpbmFsIGxpbmVzIHNvIHRoZXkgZG9uJ3QgZ2V0IG92ZXJyaWRkZW4gd2hlbiB3ZSByZWFycmFuZ2UgdGhlIGxpc3RcbiAgY29uc3QgbmV3TGF5b3V0TGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0xheW91dC5sZW5ndGg7IGkrKykge1xuICAgIG5ld0xheW91dExpbmVzLnB1c2gobGluZXMuZ2V0KG5ld0xheW91dFtpXSkgYXMgQnVmZmVyTGluZSk7XG4gIH1cblxuICAvLyBSZWFycmFuZ2UgdGhlIGxpc3RcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMYXlvdXRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGxpbmVzLnNldChpLCBuZXdMYXlvdXRMaW5lc1tpXSk7XG4gIH1cbiAgbGluZXMubGVuZ3RoID0gbmV3TGF5b3V0Lmxlbmd0aDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZXcgbGluZSBsZW5ndGhzIGZvciBhIGdpdmVuIHdyYXBwZWQgbGluZS4gVGhlIHB1cnBvc2Ugb2YgdGhpcyBmdW5jdGlvbiBpdCB0byBwcmUtXG4gKiBjb21wdXRlIHRoZSB3cmFwcGluZyBwb2ludHMgc2luY2Ugd2lkZSBjaGFyYWN0ZXJzIG1heSBuZWVkIHRvIGJlIHdyYXBwZWQgb250byB0aGUgZm9sbG93aW5nIGxpbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIG51bWJlcnMgb2Ygd2hlcmUgZWFjaCBsaW5lIHdyYXBzIHRvLCB0aGUgcmVzdWx0aW5nIGFycmF5XG4gKiB3aWxsIG9ubHkgY29udGFpbiB0aGUgdmFsdWVzIGBuZXdDb2xzYCAod2hlbiB0aGUgbGluZSBkb2VzIG5vdCBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSBhbmRcbiAqIGBuZXdDb2xzIC0gMWAgKHdoZW4gdGhlIGxpbmUgZG9lcyBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSwgZXhjZXB0IGZvciB0aGUgbGFzdCB2YWx1ZSB3aGljaFxuICogd2lsbCBjb250YWluIHRoZSByZW1haW5pbmcgaXRlbXMgdG8gZmlsbCB0aGUgbGluZS5cbiAqXG4gKiBDYWxsaW5nIHRoaXMgd2l0aCBhIGBuZXdDb2xzYCB2YWx1ZSBvZiBgMWAgd2lsbCBsb2NrIHVwLlxuICpcbiAqIEBwYXJhbSB3cmFwcGVkTGluZXMgVGhlIHdyYXBwZWQgbGluZXMgdG8gZXZhbHVhdGUuXG4gKiBAcGFyYW0gb2xkQ29scyBUaGUgY29sdW1ucyBiZWZvcmUgcmVzaXplLlxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdLCBvbGRDb2xzOiBudW1iZXIsIG5ld0NvbHM6IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgbmV3TGluZUxlbmd0aHM6IG51bWJlcltdID0gW107XG4gIGNvbnN0IGNlbGxzTmVlZGVkID0gd3JhcHBlZExpbmVzLm1hcCgobCwgaSkgPT4gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgaSwgb2xkQ29scykpLnJlZHVjZSgocCwgYykgPT4gcCArIGMpO1xuXG4gIC8vIFVzZSBzcmNDb2wgYW5kIHNyY0xpbmUgdG8gZmluZCB0aGUgbmV3IHdyYXBwaW5nIHBvaW50LCB1c2UgdGhhdCB0byBnZXQgdGhlIGNlbGxzQXZhaWxhYmxlIGFuZFxuICAvLyBsaW5lc05lZWRlZFxuICBsZXQgc3JjQ29sID0gMDtcbiAgbGV0IHNyY0xpbmUgPSAwO1xuICBsZXQgY2VsbHNBdmFpbGFibGUgPSAwO1xuICB3aGlsZSAoY2VsbHNBdmFpbGFibGUgPCBjZWxsc05lZWRlZCkge1xuICAgIGlmIChjZWxsc05lZWRlZCAtIGNlbGxzQXZhaWxhYmxlIDwgbmV3Q29scykge1xuICAgICAgLy8gQWRkIHRoZSBmaW5hbCBsaW5lIGFuZCBleGl0IHRoZSBsb29wXG4gICAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGNlbGxzTmVlZGVkIC0gY2VsbHNBdmFpbGFibGUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNyY0NvbCArPSBuZXdDb2xzO1xuICAgIGNvbnN0IG9sZFRyaW1tZWRMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lLCBvbGRDb2xzKTtcbiAgICBpZiAoc3JjQ29sID4gb2xkVHJpbW1lZExlbmd0aCkge1xuICAgICAgc3JjQ29sIC09IG9sZFRyaW1tZWRMZW5ndGg7XG4gICAgICBzcmNMaW5lKys7XG4gICAgfVxuICAgIGNvbnN0IGVuZHNXaXRoV2lkZSA9IHdyYXBwZWRMaW5lc1tzcmNMaW5lXS5nZXRXaWR0aChzcmNDb2wgLSAxKSA9PT0gMjtcbiAgICBpZiAoZW5kc1dpdGhXaWRlKSB7XG4gICAgICBzcmNDb2wtLTtcbiAgICB9XG4gICAgY29uc3QgbGluZUxlbmd0aCA9IGVuZHNXaXRoV2lkZSA/IG5ld0NvbHMgLSAxIDogbmV3Q29scztcbiAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGxpbmVMZW5ndGgpO1xuICAgIGNlbGxzQXZhaWxhYmxlICs9IGxpbmVMZW5ndGg7XG4gIH1cblxuICByZXR1cm4gbmV3TGluZUxlbmd0aHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgobGluZXM6IEJ1ZmZlckxpbmVbXSwgaTogbnVtYmVyLCBjb2xzOiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHJvdyBpbiB0aGUgd3JhcHBlZCBsaW5lLCBnZXQgdGhlIGFjdHVhbCB0cmltbWVkIGxlbmd0aFxuICBpZiAoaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xuICAgIHJldHVybiBsaW5lc1tpXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gIH1cbiAgLy8gRGV0ZWN0IHdoZXRoZXIgdGhlIGZvbGxvd2luZyBsaW5lIHN0YXJ0cyB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIgYW5kIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgbGluZVxuICAvLyBpcyBudWxsLCBpZiBzbyB0aGVuIHdlIGNhbiBiZSBwcmV0dHkgc3VyZSB0aGUgbnVsbCBjaGFyYWN0ZXIgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gdGhlIGxpbmVcbiAgLy8gbGVuZ3RoXVxuICBjb25zdCBlbmRzSW5OdWxsID0gIShsaW5lc1tpXS5oYXNDb250ZW50KGNvbHMgLSAxKSkgJiYgbGluZXNbaV0uZ2V0V2lkdGgoY29scyAtIDEpID09PSAxO1xuICBjb25zdCBmb2xsb3dpbmdMaW5lU3RhcnRzV2l0aFdpZGUgPSBsaW5lc1tpICsgMV0uZ2V0V2lkdGgoMCkgPT09IDI7XG4gIGlmIChlbmRzSW5OdWxsICYmIGZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSkge1xuICAgIHJldHVybiBjb2xzIC0gMTtcbiAgfVxuICByZXR1cm4gY29scztcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXInO1xuaW1wb3J0IHsgSUJ1ZmZlciwgSUJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogVGhlIEJ1ZmZlclNldCByZXByZXNlbnRzIHRoZSBzZXQgb2YgdHdvIGJ1ZmZlcnMgdXNlZCBieSB4dGVybSB0ZXJtaW5hbHMgKG5vcm1hbCBhbmQgYWx0KSBhbmRcbiAqIHByb3ZpZGVzIGFsc28gdXRpbGl0aWVzIGZvciB3b3JraW5nIHdpdGggdGhlbS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclNldCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQnVmZmVyU2V0IHtcbiAgcHJpdmF0ZSBfbm9ybWFsITogQnVmZmVyO1xuICBwcml2YXRlIF9hbHQhOiBCdWZmZXI7XG4gIHByaXZhdGUgX2FjdGl2ZUJ1ZmZlciE6IEJ1ZmZlcjtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkJ1ZmZlckFjdGl2YXRlID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfT4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJ1ZmZlckFjdGl2YXRlID0gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudDtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IEJ1ZmZlclNldCBmb3IgdGhlIGdpdmVuIHRlcm1pbmFsLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoJ3Njcm9sbGJhY2snLCAoKSA9PiB0aGlzLnJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoJ3RhYlN0b3BXaWR0aCcsICgpID0+IHRoaXMuc2V0dXBUYWJTdG9wcygpKSk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fbm9ybWFsID0gbmV3IEJ1ZmZlcih0cnVlLCB0aGlzLl9vcHRpb25zU2VydmljZSwgdGhpcy5fYnVmZmVyU2VydmljZSk7XG4gICAgdGhpcy5fbm9ybWFsLmZpbGxWaWV3cG9ydFJvd3MoKTtcblxuICAgIC8vIFRoZSBhbHQgYnVmZmVyIHNob3VsZCBuZXZlciBoYXZlIHNjcm9sbGJhY2suXG4gICAgLy8gU2VlIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbCNoMi1UaGUtQWx0ZXJuYXRlLVNjcmVlbi1CdWZmZXJcbiAgICB0aGlzLl9hbHQgPSBuZXcgQnVmZmVyKGZhbHNlLCB0aGlzLl9vcHRpb25zU2VydmljZSwgdGhpcy5fYnVmZmVyU2VydmljZSk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyID0gdGhpcy5fbm9ybWFsO1xuICAgIHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7XG4gICAgICBhY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbCxcbiAgICAgIGluYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHRcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhbHQoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgYWN0aXZlKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgbm9ybWFsKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fbm9ybWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX25vcm1hbC54ID0gdGhpcy5fYWx0Lng7XG4gICAgdGhpcy5fbm9ybWFsLnkgPSB0aGlzLl9hbHQueTtcbiAgICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgYWx3YXlzIGJlIGNsZWFyZWQgd2hlbiB3ZSBzd2l0Y2ggdG8gdGhlIG5vcm1hbFxuICAgIC8vIGJ1ZmZlci4gVGhpcyBmcmVlcyB1cCBtZW1vcnkgc2luY2UgdGhlIGFsdCBidWZmZXIgc2hvdWxkIGFsd2F5cyBiZSBuZXdcbiAgICAvLyB3aGVuIGFjdGl2YXRlZC5cbiAgICB0aGlzLl9hbHQuY2xlYXJBbGxNYXJrZXJzKCk7XG4gICAgdGhpcy5fYWx0LmNsZWFyKCk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyID0gdGhpcy5fbm9ybWFsO1xuICAgIHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7XG4gICAgICBhY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbCxcbiAgICAgIGluYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhbHQgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVBbHRCdWZmZXIoZmlsbEF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIgPT09IHRoaXMuX2FsdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTaW5jZSB0aGUgYWx0IGJ1ZmZlciBpcyBhbHdheXMgY2xlYXJlZCB3aGVuIHRoZSBub3JtYWwgYnVmZmVyIGlzXG4gICAgLy8gYWN0aXZhdGVkLCB3ZSB3YW50IHRvIGZpbGwgaXQgd2hlbiBzd2l0Y2hpbmcgdG8gaXQuXG4gICAgdGhpcy5fYWx0LmZpbGxWaWV3cG9ydFJvd3MoZmlsbEF0dHIpO1xuICAgIHRoaXMuX2FsdC54ID0gdGhpcy5fbm9ybWFsLng7XG4gICAgdGhpcy5fYWx0LnkgPSB0aGlzLl9ub3JtYWwueTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9hbHQ7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fYWx0LFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgYm90aCBub3JtYWwgYW5kIGFsdCBidWZmZXJzLCBhZGp1c3RpbmcgdGhlaXIgZGF0YSBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIG5ld0NvbHMgVGhlIG5ldyBudW1iZXIgb2YgY29sdW1ucy5cbiAgICogQHBhcmFtIG5ld1Jvd3MgVGhlIG5ldyBudW1iZXIgb2Ygcm93cy5cbiAgICovXG4gIHB1YmxpYyByZXNpemUobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwucmVzaXplKG5ld0NvbHMsIG5ld1Jvd3MpO1xuICAgIHRoaXMuX2FsdC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKG5ld0NvbHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSB0YWIgc3RvcHMuXG4gICAqIEBwYXJhbSBpIFRoZSBpbmRleCB0byBzdGFydCBzZXR0aW5nIHVwIHRhYiBzdG9wcyBmcm9tLlxuICAgKi9cbiAgcHVibGljIHNldHVwVGFiU3RvcHMoaT86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX25vcm1hbC5zZXR1cFRhYlN0b3BzKGkpO1xuICAgIHRoaXMuX2FsdC5zZXR1cFRhYlN0b3BzKGkpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDaGFyRGF0YSwgSUNlbGxEYXRhLCBJRXh0ZW5kZWRBdHRycyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBzdHJpbmdGcm9tQ29kZVBvaW50IH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IENIQVJfREFUQV9DSEFSX0lOREVYLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIENIQVJfREFUQV9BVFRSX0lOREVYLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSwgRXh0ZW5kZWRBdHRycyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbi8qKlxuICogQ2VsbERhdGEgLSByZXByZXNlbnRzIGEgc2luZ2xlIENlbGwgaW4gdGhlIHRlcm1pbmFsIGJ1ZmZlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENlbGxEYXRhIGV4dGVuZHMgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElDZWxsRGF0YSB7XG4gIC8qKiBIZWxwZXIgdG8gY3JlYXRlIENlbGxEYXRhIGZyb20gQ2hhckRhdGEuICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IENlbGxEYXRhIHtcbiAgICBjb25zdCBvYmogPSBuZXcgQ2VsbERhdGEoKTtcbiAgICBvYmouc2V0RnJvbUNoYXJEYXRhKHZhbHVlKTtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIC8qKiBQcmltaXRpdmVzIGZyb20gdGVybWluYWwgYnVmZmVyLiAqL1xuICBwdWJsaWMgY29udGVudCA9IDA7XG4gIHB1YmxpYyBmZyA9IDA7XG4gIHB1YmxpYyBiZyA9IDA7XG4gIHB1YmxpYyBleHRlbmRlZDogSUV4dGVuZGVkQXR0cnMgPSBuZXcgRXh0ZW5kZWRBdHRycygpO1xuICBwdWJsaWMgY29tYmluZWREYXRhID0gJyc7XG4gIC8qKiBXaGV0aGVyIGNlbGwgY29udGFpbnMgYSBjb21iaW5lZCBzdHJpbmcuICovXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuICAvKiogV2lkdGggb2YgdGhlIGNlbGwuICovXG4gIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVDtcbiAgfVxuICAvKiogSlMgc3RyaW5nIG9mIHRoZSBjb250ZW50LiAqL1xuICBwdWJsaWMgZ2V0Q2hhcnMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGE7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICByZXR1cm4gc3RyaW5nRnJvbUNvZGVQb2ludCh0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBDb2RlcG9pbnQgb2YgY2VsbFxuICAgKiBOb3RlIHRoaXMgcmV0dXJucyB0aGUgVVRGMzIgY29kZXBvaW50IG9mIHNpbmdsZSBjaGFycyxcbiAgICogaWYgY29udGVudCBpcyBhIGNvbWJpbmVkIHN0cmluZyBpdCByZXR1cm5zIHRoZSBjb2RlcG9pbnRcbiAgICogb2YgdGhlIGxhc3QgY2hhciBpbiBzdHJpbmcgdG8gYmUgaW4gbGluZSB3aXRoIGNvZGUgaW4gQ2hhckRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5pc0NvbWJpbmVkKCkpXG4gICAgICA/IHRoaXMuY29tYmluZWREYXRhLmNoYXJDb2RlQXQodGhpcy5jb21iaW5lZERhdGEubGVuZ3RoIC0gMSlcbiAgICAgIDogdGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgfVxuICAvKiogU2V0IGRhdGEgZnJvbSBDaGFyRGF0YSAqL1xuICBwdWJsaWMgc2V0RnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuZmcgPSB2YWx1ZVtDSEFSX0RBVEFfQVRUUl9JTkRFWF07XG4gICAgdGhpcy5iZyA9IDA7XG4gICAgbGV0IGNvbWJpbmVkID0gZmFsc2U7XG4gICAgLy8gc3Vycm9nYXRlcyBhbmQgY29tYmluZWQgc3RyaW5ncyBuZWVkIHNwZWNpYWwgdHJlYXRtZW50XG4gICAgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPiAyKSB7XG4gICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKTtcbiAgICAgIC8vIGlmIHRoZSAyLWNoYXIgc3RyaW5nIGlzIGEgc3Vycm9nYXRlIGNyZWF0ZSBzaW5nbGUgY29kZXBvaW50XG4gICAgICAvLyBldmVyeXRoaW5nIGVsc2UgaXMgY29tYmluZWRcbiAgICAgIGlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgxKTtcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIHRoaXMuY29udGVudCA9ICgoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY29udGVudCA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICAgIGlmIChjb21iaW5lZCkge1xuICAgICAgdGhpcy5jb21iaW5lZERhdGEgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF07XG4gICAgICB0aGlzLmNvbnRlbnQgPSBDb250ZW50LklTX0NPTUJJTkVEX01BU0sgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gIH1cbiAgLyoqIEdldCBkYXRhIGFzIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT0xPUiA9IDA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSID0gKDAgPDwgMTgpIHwgKERFRkFVTFRfQ09MT1IgPDwgOSkgfCAoMjU2IDw8IDApO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRVhUID0gMDtcblxuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9BVFRSX0lOREVYID0gMDtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCA9IDE7XG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX1dJRFRIX0lOREVYID0gMjtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ09ERV9JTkRFWCA9IDM7XG5cbi8qKlxuICogTnVsbCBjZWxsIC0gYSByZWFsIGVtcHR5IGNlbGwgKGNvbnRhaW5pbmcgbm90aGluZykuXG4gKiBOb3RlIHRoYXQgY29kZSBzaG91bGQgYWx3YXlzIGJlIDAgZm9yIGEgbnVsbCBjZWxsIGFzXG4gKiBzZXZlcmFsIHRlc3QgY29uZGl0aW9uIG9mIHRoZSBidWZmZXIgbGluZSByZWx5IG9uIHRoaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfQ0hBUiA9ICcnO1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX0NPREUgPSAwO1xuXG4vKipcbiAqIFdoaXRlc3BhY2UgY2VsbC5cbiAqIFRoaXMgaXMgbWVhbnQgYXMgYSByZXBsYWNlbWVudCBmb3IgZW1wdHkgY2VsbHMgd2hlbiBuZWVkZWRcbiAqIGR1cmluZyByZW5kZXJpbmcgbGluZXMgdG8gcHJlc2VydmUgY29ycmVjdCBhbGlnbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9DSEFSID0gJyAnO1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX0NPREUgPSAzMjtcblxuLyoqXG4gKiBCaXRtYXNrcyBmb3IgYWNjZXNzaW5nIGRhdGEgaW4gYGNvbnRlbnRgLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBDb250ZW50IHtcbiAgLyoqXG4gICAqIGJpdCAxLi4yMSAgICBjb2RlcG9pbnQsIG1heCBhbGxvd2VkIGluIFVURjMyIGlzIDB4MTBGRkZGICgyMSBiaXRzIHRha2VuKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgY29kZXBvaW50ID0gY29udGVudCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9IGNvZGVwb2ludCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgY29kZXBvaW50IDw9IDB4MTBGRkZGYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IGNvZGVwb2ludDtgXG4gICAqL1xuICBDT0RFUE9JTlRfTUFTSyA9IDB4MUZGRkZGLFxuXG4gIC8qKlxuICAgKiBiaXQgMjIgICAgICAgZmxhZyBpbmRpY2F0aW9uIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGNvbWJpbmVkIGNvbnRlbnRcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYGlzQ29tYmluZWQgPSBjb250ZW50ICYgQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIHNldDogICAgYGNvbnRlbnQgfD0gQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIGNsZWFyOiAgYGNvbnRlbnQgJj0gfkNvbnRlbnQuaXNDb21iaW5lZDtgXG4gICAqL1xuICBJU19DT01CSU5FRF9NQVNLID0gMHgyMDAwMDAsICAvLyAxIDw8IDIxXG5cbiAgLyoqXG4gICAqIGJpdCAxLi4yMiAgICBtYXNrIHRvIGNoZWNrIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueSBzdHJpbmcgZGF0YVxuICAgKiAgICAgICAgICAgICAgd2UgbmVlZCB0byBjaGVjayBmb3IgY29kZXBvaW50IGFuZCBpc0NvbWJpbmVkIGJpdHMgdG8gc2VlXG4gICAqICAgICAgICAgICAgICB3aGV0aGVyIGEgY2VsbCBjb250YWlucyBhbnl0aGluZ1xuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNFbXB0eSA9ICEoY29udGVudCAmIENvbnRlbnQuaGFzQ29udGVudClgXG4gICAqL1xuICBIQVNfQ09OVEVOVF9NQVNLID0gMHgzRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMy4uMjQgICB3Y3dpZHRoIHZhbHVlIG9mIGNlbGwsIHRha2VzIDIgYml0cyAocmFuZ2VzIGZyb20gMC4uMilcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYHdpZHRoID0gKGNvbnRlbnQgJiBDb250ZW50LndpZHRoTWFzaykgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGhhc1dpZHRoID0gY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYXMgbG9uZyBhcyB3Y3dpZHRoIGlzIGhpZ2hlc3QgdmFsdWUgaW4gYGNvbnRlbnRgOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgd2lkdGggPSBjb250ZW50ID4+IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9ICh3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQpICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dCBpZiBwcmVjb25kaXRpb24gYDAgPD0gd2lkdGggPD0gM2AgaXMgbWV0OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgY29udGVudCB8PSB3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKi9cbiAgV0lEVEhfTUFTSyA9IDB4QzAwMDAwLCAgIC8vIDMgPDwgMjJcbiAgV0lEVEhfU0hJRlQgPSAyMlxufVxuXG5leHBvcnQgY29uc3QgZW51bSBBdHRyaWJ1dGVzIHtcbiAgLyoqXG4gICAqIGJpdCAxLi44ICAgICBibHVlIGluIFJHQiwgY29sb3IgaW4gUDI1NiBhbmQgUDE2XG4gICAqL1xuICBCTFVFX01BU0sgPSAweEZGLFxuICBCTFVFX1NISUZUID0gMCxcbiAgUENPTE9SX01BU0sgPSAweEZGLFxuICBQQ09MT1JfU0hJRlQgPSAwLFxuXG4gIC8qKlxuICAgKiBiaXQgOS4uMTYgICAgZ3JlZW4gaW4gUkdCXG4gICAqL1xuICBHUkVFTl9NQVNLID0gMHhGRjAwLFxuICBHUkVFTl9TSElGVCA9IDgsXG5cbiAgLyoqXG4gICAqIGJpdCAxNy4uMjQgICByZWQgaW4gUkdCXG4gICAqL1xuICBSRURfTUFTSyA9IDB4RkYwMDAwLFxuICBSRURfU0hJRlQgPSAxNixcblxuICAvKipcbiAgICogYml0IDI1Li4yNiAgIGNvbG9yIG1vZGU6IERFRkFVTFQgKDApIHwgUDE2ICgxKSB8IFAyNTYgKDIpIHwgUkdCICgzKVxuICAgKi9cbiAgQ01fTUFTSyA9IDB4MzAwMDAwMCxcbiAgQ01fREVGQVVMVCA9IDAsXG4gIENNX1AxNiA9IDB4MTAwMDAwMCxcbiAgQ01fUDI1NiA9IDB4MjAwMDAwMCxcbiAgQ01fUkdCID0gMHgzMDAwMDAwLFxuXG4gIC8qKlxuICAgKiBiaXQgMS4uMjQgIFJHQiByb29tXG4gICAqL1xuICBSR0JfTUFTSyA9IDB4RkZGRkZGXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEZnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMlxuICAgKi9cbiAgSU5WRVJTRSA9IDB4NDAwMDAwMCxcbiAgQk9MRCA9IDB4ODAwMDAwMCxcbiAgVU5ERVJMSU5FID0gMHgxMDAwMDAwMCxcbiAgQkxJTksgPSAweDIwMDAwMDAwLFxuICBJTlZJU0lCTEUgPSAweDQwMDAwMDAwLFxuICBTVFJJS0VUSFJPVUdIID0gMHg4MDAwMDAwMCxcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gQmdGbGFncyB7XG4gIC8qKlxuICAgKiBiaXQgMjcuLjMyICh1cHBlciAyIHVudXNlZClcbiAgICovXG4gIElUQUxJQyA9IDB4NDAwMDAwMCxcbiAgRElNID0gMHg4MDAwMDAwLFxuICBIQVNfRVhURU5ERUQgPSAweDEwMDAwMDAwLFxuICBQUk9URUNURUQgPSAweDIwMDAwMDAwLFxuICBPVkVSTElORSA9IDB4NDAwMDAwMDBcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gRXh0RmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4yOVxuICAgKi9cbiAgVU5ERVJMSU5FX1NUWUxFID0gMHgxQzAwMDAwMCxcblxuICAvKipcbiAgICogYml0IDMwLi4zMlxuICAgKlxuICAgKiBBbiBvcHRpb25hbCB2YXJpYW50IGZvciB0aGUgZ2x5cGgsIHRoaXMgY2FuIGJlIHVzZWQgZm9yIGV4YW1wbGUgdG8gb2Zmc2V0IHVuZGVybGluZXMgYnkgYVxuICAgKiBudW1iZXIgb2YgcGl4ZWxzIHRvIGNyZWF0ZSBhIHBlcmZlY3QgcGF0dGVybi5cbiAgICovXG4gIFZBUklBTlRfT0ZGU0VUID0gMHhFMDAwMDAwMFxufVxuXG5leHBvcnQgY29uc3QgZW51bSBVbmRlcmxpbmVTdHlsZSB7XG4gIE5PTkUgPSAwLFxuICBTSU5HTEUgPSAxLFxuICBET1VCTEUgPSAyLFxuICBDVVJMWSA9IDMsXG4gIERPVFRFRCA9IDQsXG4gIERBU0hFRCA9IDVcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgZGlzcG9zZUFycmF5IH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSwgSU1hcmtlciB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBNYXJrZXIgaW1wbGVtZW50cyBJTWFya2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgX25leHRJZCA9IDE7XG5cbiAgcHVibGljIGlzRGlzcG9zZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWFkb25seSBfZGlzcG9zYWJsZXM6IElEaXNwb3NhYmxlW10gPSBbXTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9pZDogbnVtYmVyID0gTWFya2VyLl9uZXh0SWQrKztcbiAgcHVibGljIGdldCBpZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5faWQ7IH1cblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkRpc3Bvc2UgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRpc3Bvc2UgPSB0aGlzLl9vbkRpc3Bvc2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGxpbmU6IG51bWJlclxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLmxpbmUgPSAtMTtcbiAgICAvLyBFbWl0IGJlZm9yZSBzdXBlci5kaXNwb3NlIHN1Y2ggdGhhdCBkaXNwb3NlIGxpc3RlbmVycyBnZXQgYSBjaGFuZ2UgdG8gcmVhY3RcbiAgICB0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpO1xuICAgIGRpc3Bvc2VBcnJheSh0aGlzLl9kaXNwb3NhYmxlcyk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlcjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGRpc3Bvc2FibGU6IFQpOiBUIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGRpc3Bvc2FibGUpO1xuICAgIHJldHVybiBkaXNwb3NhYmxlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogVGhlIGNoYXJhY3RlciBzZXRzIHN1cHBvcnRlZCBieSB0aGUgdGVybWluYWwuIFRoZXNlIGVuYWJsZSBzZXZlcmFsIGxhbmd1YWdlc1xuICogdG8gYmUgcmVwcmVzZW50ZWQgd2l0aGluIHRoZSB0ZXJtaW5hbCB3aXRoIG9ubHkgOC1iaXQgZW5jb2RpbmcuIFNlZSBJU08gMjAyMlxuICogZm9yIGEgZGlzY3Vzc2lvbiBvbiBjaGFyYWN0ZXIgc2V0cy4gT25seSBWVDEwMCBjaGFyYWN0ZXIgc2V0cyBhcmUgc3VwcG9ydGVkLlxuICovXG5leHBvcnQgY29uc3QgQ0hBUlNFVFM6IHsgW2tleTogc3RyaW5nXTogSUNoYXJzZXQgfCB1bmRlZmluZWQgfSA9IHt9O1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNoYXJhY3RlciBzZXQsIFVTLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9DSEFSU0VUOiBJQ2hhcnNldCB8IHVuZGVmaW5lZCA9IENIQVJTRVRTWydCJ107XG5cbi8qKlxuICogREVDIFNwZWNpYWwgQ2hhcmFjdGVyIGFuZCBMaW5lIERyYXdpbmcgU2V0LlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQxMDItdWcvdGFibGU1LTEzLmh0bWxcbiAqIEEgbG90IG9mIGN1cnNlcyBhcHBzIHVzZSB0aGlzIGlmIHRoZXkgc2VlIFRFUk09eHRlcm0uXG4gKiB0ZXN0aW5nOiBlY2hvIC1lICdcXGUoMGFcXGUoQidcbiAqIFRoZSB4dGVybSBvdXRwdXQgc29tZXRpbWVzIHNlZW1zIHRvIGNvbmZsaWN0IHdpdGggdGhlXG4gKiByZWZlcmVuY2UgYWJvdmUuIHh0ZXJtIHNlZW1zIGluIGxpbmUgd2l0aCB0aGUgcmVmZXJlbmNlXG4gKiB3aGVuIHJ1bm5pbmcgdnR0ZXN0IGhvd2V2ZXIuXG4gKiBUaGUgdGFibGUgYmVsb3cgbm93IHVzZXMgeHRlcm0ncyBvdXRwdXQgZnJvbSB2dHRlc3QuXG4gKi9cbkNIQVJTRVRTWycwJ10gPSB7XG4gICdgJzogJ1xcdTI1YzYnLCAvLyAn4peGJ1xuICAnYSc6ICdcXHUyNTkyJywgLy8gJ+KWkidcbiAgJ2InOiAnXFx1MjQwOScsIC8vICfikIknIChIVClcbiAgJ2MnOiAnXFx1MjQwYycsIC8vICfikIwnIChGRilcbiAgJ2QnOiAnXFx1MjQwZCcsIC8vICfikI0nIChDUilcbiAgJ2UnOiAnXFx1MjQwYScsIC8vICfikIonIChMRilcbiAgJ2YnOiAnXFx1MDBiMCcsIC8vICfCsCdcbiAgJ2cnOiAnXFx1MDBiMScsIC8vICfCsSdcbiAgJ2gnOiAnXFx1MjQyNCcsIC8vICfikKQnIChOTClcbiAgJ2knOiAnXFx1MjQwYicsIC8vICfikIsnIChWVClcbiAgJ2onOiAnXFx1MjUxOCcsIC8vICfilJgnXG4gICdrJzogJ1xcdTI1MTAnLCAvLyAn4pSQJ1xuICAnbCc6ICdcXHUyNTBjJywgLy8gJ+KUjCdcbiAgJ20nOiAnXFx1MjUxNCcsIC8vICfilJQnXG4gICduJzogJ1xcdTI1M2MnLCAvLyAn4pS8J1xuICAnbyc6ICdcXHUyM2JhJywgLy8gJ+KOuidcbiAgJ3AnOiAnXFx1MjNiYicsIC8vICfijrsnXG4gICdxJzogJ1xcdTI1MDAnLCAvLyAn4pSAJ1xuICAncic6ICdcXHUyM2JjJywgLy8gJ+KOvCdcbiAgJ3MnOiAnXFx1MjNiZCcsIC8vICfijr0nXG4gICd0JzogJ1xcdTI1MWMnLCAvLyAn4pScJ1xuICAndSc6ICdcXHUyNTI0JywgLy8gJ+KUpCdcbiAgJ3YnOiAnXFx1MjUzNCcsIC8vICfilLQnXG4gICd3JzogJ1xcdTI1MmMnLCAvLyAn4pSsJ1xuICAneCc6ICdcXHUyNTAyJywgLy8gJ+KUgidcbiAgJ3knOiAnXFx1MjI2NCcsIC8vICfiiaQnXG4gICd6JzogJ1xcdTIyNjUnLCAvLyAn4omlJ1xuICAneyc6ICdcXHUwM2MwJywgLy8gJ8+AJ1xuICAnfCc6ICdcXHUyMjYwJywgLy8gJ+KJoCdcbiAgJ30nOiAnXFx1MDBhMycsIC8vICfCoydcbiAgJ34nOiAnXFx1MDBiNycgIC8vICfCtydcbn07XG5cbi8qKlxuICogQnJpdGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi01Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0EnXSA9IHtcbiAgJyMnOiAnwqMnXG59O1xuXG4vKipcbiAqIFVuaXRlZCBTdGF0ZXMgY2hhcmFjdGVyIHNldFxuICogRVNDIChCXG4gKi9cbkNIQVJTRVRTWydCJ10gPSB1bmRlZmluZWQ7XG5cbi8qKlxuICogRHV0Y2ggY2hhcmFjdGVyIHNldFxuICogRVNDICg0XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItNi5odG1sXG4gKi9cbkNIQVJTRVRTWyc0J10gPSB7XG4gICcjJzogJ8KjJyxcbiAgJ0AnOiAnwr4nLFxuICAnWyc6ICdpaicsXG4gICdcXFxcJzogJ8K9JyxcbiAgJ10nOiAnfCcsXG4gICd7JzogJ8KoJyxcbiAgJ3wnOiAnZicsXG4gICd9JzogJ8K8JyxcbiAgJ34nOiAnwrQnXG59O1xuXG4vKipcbiAqIEZpbm5pc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChDIG9yIEVTQyAoNVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTcuaHRtbFxuICovXG5DSEFSU0VUU1snQyddID1cbkNIQVJTRVRTWyc1J10gPSB7XG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6knLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogRnJlbmNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoUlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTguaHRtbFxuICovXG5DSEFSU0VUU1snUiddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8KnJyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnwqgnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBDYW5hZGlhbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi05Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1EnXSA9IHtcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDoicsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gICdgJzogJ8O0JyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnw7snXG59O1xuXG4vKipcbiAqIEdlcm1hbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEtcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMC5odG1sXG4gKi9cbkNIQVJTRVRTWydLJ10gPSB7XG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OcJyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8O8JyxcbiAgJ34nOiAnw58nXG59O1xuXG4vKipcbiAqIEl0YWxpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChZXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTEuaHRtbFxuICovXG5DSEFSU0VUU1snWSddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OpJyxcbiAgJ2AnOiAnw7knLFxuICAneyc6ICfDoCcsXG4gICd8JzogJ8OyJyxcbiAgJ30nOiAnw6gnLFxuICAnfic6ICfDrCdcbn07XG5cbi8qKlxuICogTm9yd2VnaWFuL0RhbmlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEUgb3IgRVNDICg2XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTIuaHRtbFxuICovXG5DSEFSU0VUU1snRSddID1cbkNIQVJTRVRTWyc2J10gPSB7XG4gICdAJzogJ8OEJyxcbiAgJ1snOiAnw4YnLFxuICAnXFxcXCc6ICfDmCcsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDpCcsXG4gICd7JzogJ8OmJyxcbiAgJ3wnOiAnw7gnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTcGFuaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEzLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1onXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfCpycsXG4gICdbJzogJ8KhJyxcbiAgJ1xcXFwnOiAnw5EnLFxuICAnXSc6ICfCvycsXG4gICd7JzogJ8KwJyxcbiAgJ3wnOiAnw7EnLFxuICAnfSc6ICfDpydcbn07XG5cbi8qKlxuICogU3dlZGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEggb3IgRVNDICg3XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTQuaHRtbFxuICovXG5DSEFSU0VUU1snSCddID1cbkNIQVJTRVRTWyc3J10gPSB7XG4gICdAJzogJ8OJJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDqScsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTd2lzcyBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKD1cbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xNS5odG1sXG4gKi9cbkNIQVJTRVRTWyc9J10gPSB7XG4gICcjJzogJ8O5JyxcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDqScsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgJ18nOiAnw6gnLFxuICAnYCc6ICfDtCcsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDvCcsXG4gICd+JzogJ8O7J1xufTtcbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogQzAgY29udHJvbCBjb2Rlc1xuICogU2VlID0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBDMCB7XG4gIC8qKiBOdWxsIChDYXJldCA9IF5ALCBDID0gXFwwKSAqL1xuICBleHBvcnQgY29uc3QgTlVMID0gJ1xceDAwJztcbiAgLyoqIFN0YXJ0IG9mIEhlYWRpbmcgKENhcmV0ID0gXkEpICovXG4gIGV4cG9ydCBjb25zdCBTT0ggPSAnXFx4MDEnO1xuICAvKiogU3RhcnQgb2YgVGV4dCAoQ2FyZXQgPSBeQikgKi9cbiAgZXhwb3J0IGNvbnN0IFNUWCA9ICdcXHgwMic7XG4gIC8qKiBFbmQgb2YgVGV4dCAoQ2FyZXQgPSBeQykgKi9cbiAgZXhwb3J0IGNvbnN0IEVUWCA9ICdcXHgwMyc7XG4gIC8qKiBFbmQgb2YgVHJhbnNtaXNzaW9uIChDYXJldCA9IF5EKSAqL1xuICBleHBvcnQgY29uc3QgRU9UID0gJ1xceDA0JztcbiAgLyoqIEVucXVpcnkgKENhcmV0ID0gXkUpICovXG4gIGV4cG9ydCBjb25zdCBFTlEgPSAnXFx4MDUnO1xuICAvKiogQWNrbm93bGVkZ2UgKENhcmV0ID0gXkYpICovXG4gIGV4cG9ydCBjb25zdCBBQ0sgPSAnXFx4MDYnO1xuICAvKiogQmVsbCAoQ2FyZXQgPSBeRywgQyA9IFxcYSkgKi9cbiAgZXhwb3J0IGNvbnN0IEJFTCA9ICdcXHgwNyc7XG4gIC8qKiBCYWNrc3BhY2UgKENhcmV0ID0gXkgsIEMgPSBcXGIpICovXG4gIGV4cG9ydCBjb25zdCBCUyAgPSAnXFx4MDgnO1xuICAvKiogQ2hhcmFjdGVyIFRhYnVsYXRpb24sIEhvcml6b250YWwgVGFidWxhdGlvbiAoQ2FyZXQgPSBeSSwgQyA9IFxcdCkgKi9cbiAgZXhwb3J0IGNvbnN0IEhUICA9ICdcXHgwOSc7XG4gIC8qKiBMaW5lIEZlZWQgKENhcmV0ID0gXkosIEMgPSBcXG4pICovXG4gIGV4cG9ydCBjb25zdCBMRiAgPSAnXFx4MGEnO1xuICAvKiogTGluZSBUYWJ1bGF0aW9uLCBWZXJ0aWNhbCBUYWJ1bGF0aW9uIChDYXJldCA9IF5LLCBDID0gXFx2KSAqL1xuICBleHBvcnQgY29uc3QgVlQgID0gJ1xceDBiJztcbiAgLyoqIEZvcm0gRmVlZCAoQ2FyZXQgPSBeTCwgQyA9IFxcZikgKi9cbiAgZXhwb3J0IGNvbnN0IEZGICA9ICdcXHgwYyc7XG4gIC8qKiBDYXJyaWFnZSBSZXR1cm4gKENhcmV0ID0gXk0sIEMgPSBcXHIpICovXG4gIGV4cG9ydCBjb25zdCBDUiAgPSAnXFx4MGQnO1xuICAvKiogU2hpZnQgT3V0IChDYXJldCA9IF5OKSAqL1xuICBleHBvcnQgY29uc3QgU08gID0gJ1xceDBlJztcbiAgLyoqIFNoaWZ0IEluIChDYXJldCA9IF5PKSAqL1xuICBleHBvcnQgY29uc3QgU0kgID0gJ1xceDBmJztcbiAgLyoqIERhdGEgTGluayBFc2NhcGUgKENhcmV0ID0gXlApICovXG4gIGV4cG9ydCBjb25zdCBETEUgPSAnXFx4MTAnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgT25lIChYT04pIChDYXJldCA9IF5RKSAqL1xuICBleHBvcnQgY29uc3QgREMxID0gJ1xceDExJztcbiAgLyoqIERldmljZSBDb250cm9sIFR3byAoQ2FyZXQgPSBeUikgKi9cbiAgZXhwb3J0IGNvbnN0IERDMiA9ICdcXHgxMic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBUaHJlZSAoWE9GRikgKENhcmV0ID0gXlMpICovXG4gIGV4cG9ydCBjb25zdCBEQzMgPSAnXFx4MTMnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgRm91ciAoQ2FyZXQgPSBeVCkgKi9cbiAgZXhwb3J0IGNvbnN0IERDNCA9ICdcXHgxNCc7XG4gIC8qKiBOZWdhdGl2ZSBBY2tub3dsZWRnZSAoQ2FyZXQgPSBeVSkgKi9cbiAgZXhwb3J0IGNvbnN0IE5BSyA9ICdcXHgxNSc7XG4gIC8qKiBTeW5jaHJvbm91cyBJZGxlIChDYXJldCA9IF5WKSAqL1xuICBleHBvcnQgY29uc3QgU1lOID0gJ1xceDE2JztcbiAgLyoqIEVuZCBvZiBUcmFuc21pc3Npb24gQmxvY2sgKENhcmV0ID0gXlcpICovXG4gIGV4cG9ydCBjb25zdCBFVEIgPSAnXFx4MTcnO1xuICAvKiogQ2FuY2VsIChDYXJldCA9IF5YKSAqL1xuICBleHBvcnQgY29uc3QgQ0FOID0gJ1xceDE4JztcbiAgLyoqIEVuZCBvZiBNZWRpdW0gKENhcmV0ID0gXlkpICovXG4gIGV4cG9ydCBjb25zdCBFTSAgPSAnXFx4MTknO1xuICAvKiogU3Vic3RpdHV0ZSAoQ2FyZXQgPSBeWikgKi9cbiAgZXhwb3J0IGNvbnN0IFNVQiA9ICdcXHgxYSc7XG4gIC8qKiBFc2NhcGUgKENhcmV0ID0gXlssIEMgPSBcXGUpICovXG4gIGV4cG9ydCBjb25zdCBFU0MgPSAnXFx4MWInO1xuICAvKiogRmlsZSBTZXBhcmF0b3IgKENhcmV0ID0gXlxcKSAqL1xuICBleHBvcnQgY29uc3QgRlMgID0gJ1xceDFjJztcbiAgLyoqIEdyb3VwIFNlcGFyYXRvciAoQ2FyZXQgPSBeXSkgKi9cbiAgZXhwb3J0IGNvbnN0IEdTICA9ICdcXHgxZCc7XG4gIC8qKiBSZWNvcmQgU2VwYXJhdG9yIChDYXJldCA9IF5eKSAqL1xuICBleHBvcnQgY29uc3QgUlMgID0gJ1xceDFlJztcbiAgLyoqIFVuaXQgU2VwYXJhdG9yIChDYXJldCA9IF5fKSAqL1xuICBleHBvcnQgY29uc3QgVVMgID0gJ1xceDFmJztcbiAgLyoqIFNwYWNlICovXG4gIGV4cG9ydCBjb25zdCBTUCAgPSAnXFx4MjAnO1xuICAvKiogRGVsZXRlIChDYXJldCA9IF4/KSAqL1xuICBleHBvcnQgY29uc3QgREVMID0gJ1xceDdmJztcbn1cblxuLyoqXG4gKiBDMSBjb250cm9sIGNvZGVzXG4gKiBTZWUgPSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DMF9hbmRfQzFfY29udHJvbF9jb2Rlc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEMxIHtcbiAgLyoqIHBhZGRpbmcgY2hhcmFjdGVyICovXG4gIGV4cG9ydCBjb25zdCBQQUQgPSAnXFx4ODAnO1xuICAvKiogSGlnaCBPY3RldCBQcmVzZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhPUCA9ICdcXHg4MSc7XG4gIC8qKiBCcmVhayBQZXJtaXR0ZWQgSGVyZSAqL1xuICBleHBvcnQgY29uc3QgQlBIID0gJ1xceDgyJztcbiAgLyoqIE5vIEJyZWFrIEhlcmUgKi9cbiAgZXhwb3J0IGNvbnN0IE5CSCA9ICdcXHg4Myc7XG4gIC8qKiBJbmRleCAqL1xuICBleHBvcnQgY29uc3QgSU5EID0gJ1xceDg0JztcbiAgLyoqIE5leHQgTGluZSAqL1xuICBleHBvcnQgY29uc3QgTkVMID0gJ1xceDg1JztcbiAgLyoqIFN0YXJ0IG9mIFNlbGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNTQSA9ICdcXHg4Nic7XG4gIC8qKiBFbmQgb2YgU2VsZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgRVNBID0gJ1xceDg3JztcbiAgLyoqIEhvcml6b250YWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhUUyA9ICdcXHg4OCc7XG4gIC8qKiBIb3Jpem9udGFsIFRhYnVsYXRpb24gV2l0aCBKdXN0aWZpY2F0aW9uICovXG4gIGV4cG9ydCBjb25zdCBIVEogPSAnXFx4ODknO1xuICAvKiogVmVydGljYWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IFZUUyA9ICdcXHg4YSc7XG4gIC8qKiBQYXJ0aWFsIExpbmUgRG93biAqL1xuICBleHBvcnQgY29uc3QgUExEID0gJ1xceDhiJztcbiAgLyoqIFBhcnRpYWwgTGluZSBVcCAqL1xuICBleHBvcnQgY29uc3QgUExVID0gJ1xceDhjJztcbiAgLyoqIFJldmVyc2UgSW5kZXggKi9cbiAgZXhwb3J0IGNvbnN0IFJJID0gJ1xceDhkJztcbiAgLyoqIFNpbmdsZS1TaGlmdCAyICovXG4gIGV4cG9ydCBjb25zdCBTUzIgPSAnXFx4OGUnO1xuICAvKiogU2luZ2xlLVNoaWZ0IDMgKi9cbiAgZXhwb3J0IGNvbnN0IFNTMyA9ICdcXHg4Zic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IERDUyA9ICdcXHg5MCc7XG4gIC8qKiBQcml2YXRlIFVzZSAxICovXG4gIGV4cG9ydCBjb25zdCBQVTEgPSAnXFx4OTEnO1xuICAvKiogUHJpdmF0ZSBVc2UgMiAqL1xuICBleHBvcnQgY29uc3QgUFUyID0gJ1xceDkyJztcbiAgLyoqIFNldCBUcmFuc21pdCBTdGF0ZSAqL1xuICBleHBvcnQgY29uc3QgU1RTID0gJ1xceDkzJztcbiAgLyoqIERlc3RydWN0aXZlIGJhY2tzcGFjZSwgaW50ZW5kZWQgdG8gZWxpbWluYXRlIGFtYmlndWl0eSBhYm91dCBtZWFuaW5nIG9mIEJTLiAqL1xuICBleHBvcnQgY29uc3QgQ0NIID0gJ1xceDk0JztcbiAgLyoqIE1lc3NhZ2UgV2FpdGluZyAqL1xuICBleHBvcnQgY29uc3QgTVcgPSAnXFx4OTUnO1xuICAvKiogU3RhcnQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNQQSA9ICdcXHg5Nic7XG4gIC8qKiBFbmQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IEVQQSA9ICdcXHg5Nyc7XG4gIC8qKiBTdGFydCBvZiBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IFNPUyA9ICdcXHg5OCc7XG4gIC8qKiBTaW5nbGUgR3JhcGhpYyBDaGFyYWN0ZXIgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgU0dDSSA9ICdcXHg5OSc7XG4gIC8qKiBTaW5nbGUgQ2hhcmFjdGVyIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFNDSSA9ICdcXHg5YSc7XG4gIC8qKiBDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IENTSSA9ICdcXHg5Yic7XG4gIC8qKiBTdHJpbmcgVGVybWluYXRvciAqL1xuICBleHBvcnQgY29uc3QgU1QgPSAnXFx4OWMnO1xuICAvKiogT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kICovXG4gIGV4cG9ydCBjb25zdCBPU0MgPSAnXFx4OWQnO1xuICAvKiogUHJpdmFjeSBNZXNzYWdlICovXG4gIGV4cG9ydCBjb25zdCBQTSA9ICdcXHg5ZSc7XG4gIC8qKiBBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmQgKi9cbiAgZXhwb3J0IGNvbnN0IEFQQyA9ICdcXHg5Zic7XG59XG5leHBvcnQgbmFtZXNwYWNlIEMxX0VTQ0FQRUQge1xuICBleHBvcnQgY29uc3QgU1QgPSBgJHtDMC5FU0N9XFxcXGA7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKipcbiAqIFBvbHlmaWxsIC0gQ29udmVydCBVVEYzMiBjb2RlcG9pbnQgaW50byBKUyBzdHJpbmcuXG4gKiBOb3RlOiBUaGUgYnVpbHQtaW4gU3RyaW5nLmZyb21Db2RlUG9pbnQgaGFwcGVucyB0byBiZSBtdWNoIHNsb3dlclxuICogICAgICAgZHVlIHRvIGFkZGl0aW9uYWwgc2FuaXR5IGNoZWNrcy4gV2UgY2FuIGF2b2lkIHRoZW0gc2luY2VcbiAqICAgICAgIHdlIGFsd2F5cyBvcGVyYXRlIG9uIGxlZ2FsIFVURjMyIChncmFudGVkIGJ5IHRoZSBpbnB1dCBkZWNvZGVycylcbiAqICAgICAgIGFuZCB1c2UgdGhpcyBmYXN0ZXIgdmVyc2lvbiBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQ6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMDtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZVBvaW50ID4+IDEwKSArIDB4RDgwMCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlUG9pbnQgJSAweDQwMCkgKyAweERDMDApO1xuICB9XG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGVQb2ludCk7XG59XG5cbi8qKlxuICogQ29udmVydCBVVEYzMiBjaGFyIGNvZGVzIGludG8gSlMgc3RyaW5nLlxuICogQmFzaWNhbGx5IHRoZSBzYW1lIGFzIGBzdHJpbmdGcm9tQ29kZVBvaW50YCBidXQgZm9yIG11bHRpcGxlIGNvZGVwb2ludHNcbiAqIGluIGEgbG9vcCAod2hpY2ggaXMgYSBsb3QgZmFzdGVyKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjMyVG9TdHJpbmcoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ6IG51bWJlciA9IGRhdGEubGVuZ3RoKTogc3RyaW5nIHtcbiAgbGV0IHJlc3VsdCA9ICcnO1xuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIGxldCBjb2RlcG9pbnQgPSBkYXRhW2ldO1xuICAgIGlmIChjb2RlcG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIEpTIHN0cmluZ3MgYXJlIGVuY29kZWQgYXMgVVRGMTYsIHRodXMgYSBub24gQk1QIGNvZGVwb2ludCBnZXRzIGNvbnZlcnRlZCBpbnRvIGEgc3Vycm9nYXRlXG4gICAgICAvLyBwYWlyIGNvbnZlcnNpb24gcnVsZXM6XG4gICAgICAvLyAgLSBzdWJ0cmFjdCAweDEwMDAwIGZyb20gY29kZSBwb2ludCwgbGVhdmluZyBhIDIwIGJpdCBudW1iZXJcbiAgICAgIC8vICAtIGFkZCBoaWdoIDEwIGJpdHMgdG8gMHhEODAwICAtLT4gZmlyc3Qgc3Vycm9nYXRlXG4gICAgICAvLyAgLSBhZGQgbG93IDEwIGJpdHMgdG8gMHhEQzAwICAgLS0+IHNlY29uZCBzdXJyb2dhdGVcbiAgICAgIGNvZGVwb2ludCAtPSAweDEwMDAwO1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVwb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZXBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZXBvaW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBTdHJpbmdUb1V0ZjMyIC0gZGVjb2RlcyBVVEYxNiBzZXF1ZW5jZXMgaW50byBVVEYzMiBjb2RlcG9pbnRzLlxuICogVG8ga2VlcCB0aGUgZGVjb2RlciBpbiBsaW5lIHdpdGggSlMgc3RyaW5ncyBpdCBoYW5kbGVzIHNpbmdsZSBzdXJyb2dhdGVzIGFzIFVDUzIuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdUb1V0ZjMyIHtcbiAgcHJpdmF0ZSBfaW50ZXJpbTogbnVtYmVyID0gMDtcblxuICAvKipcbiAgICogQ2xlYXJzIGludGVyaW0gYW5kIHJlc2V0cyBkZWNvZGVyIHRvIGNsZWFuIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX2ludGVyaW0gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZSBKUyBzdHJpbmcgdG8gVVRGMzIgY29kZXBvaW50cy5cbiAgICogVGhlIG1ldGhvZHMgYXNzdW1lcyBzdHJlYW0gaW5wdXQgYW5kIHdpbGwgc3RvcmUgcGFydGx5IHRyYW5zbWl0dGVkXG4gICAqIHN1cnJvZ2F0ZSBwYWlycyBhbmQgZGVjb2RlIHRoZW0gd2l0aCB0aGUgbmV4dCBkYXRhIGNodW5rLlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIGRvZXMgbm8gYm91bmQgY2hlY2tzIGZvciB0YXJnZXQsIHRoZXJlZm9yZSBtYWtlIHN1cmVcbiAgICogdGhlIHByb3ZpZGVkIGlucHV0IGRhdGEgZG9lcyBub3QgZXhjZWVkIHRoZSBzaXplIG9mIGB0YXJnZXRgLlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd3JpdHRlbiBjb2RlcG9pbnRzIGluIGB0YXJnZXRgLlxuICAgKi9cbiAgcHVibGljIGRlY29kZShpbnB1dDogc3RyaW5nLCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgc3Vycm9nYXRlIGhpZ2hcbiAgICBpZiAodGhpcy5faW50ZXJpbSkge1xuICAgICAgY29uc3Qgc2Vjb25kID0gaW5wdXQuY2hhckNvZGVBdChzdGFydFBvcysrKTtcbiAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAodGhpcy5faW50ZXJpbSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCAoVVNDMiBoYW5kbGluZylcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSB0aGlzLl9pbnRlcmltO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHNlY29uZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ludGVyaW0gPSAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBzdGFydFBvczsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9pbnRlcmltID0gY29kZTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWNvbmQgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgKFVTQzIgaGFuZGxpbmcpXG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUgPT09IDB4RkVGRikge1xuICAgICAgICAvLyBCT01cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGU7XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xuICB9XG59XG5cbi8qKlxuICogVXRmOERlY29kZXIgLSBkZWNvZGVzIFVURjggYnl0ZSBzZXF1ZW5jZXMgaW50byBVVEYzMiBjb2RlcG9pbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVXRmOFRvVXRmMzIge1xuICBwdWJsaWMgaW50ZXJpbTogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KDMpO1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgaW50ZXJpbSBieXRlcyBhbmQgcmVzZXRzIGRlY29kZXIgdG8gY2xlYW4gc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5pbnRlcmltLmZpbGwoMCk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlcyBVVEY4IGJ5dGUgc2VxdWVuY2VzIGluIGBpbnB1dGAgdG8gVVRGMzIgY29kZXBvaW50cyBpbiBgdGFyZ2V0YC5cbiAgICogVGhlIG1ldGhvZHMgYXNzdW1lcyBzdHJlYW0gaW5wdXQgYW5kIHdpbGwgc3RvcmUgcGFydGx5IHRyYW5zbWl0dGVkIGJ5dGVzXG4gICAqIGFuZCBkZWNvZGUgdGhlbSB3aXRoIHRoZSBuZXh0IGRhdGEgY2h1bmsuXG4gICAqIE5vdGU6IFRoZSBtZXRob2QgZG9lcyBubyBib3VuZCBjaGVja3MgZm9yIHRhcmdldCwgdGhlcmVmb3JlIG1ha2Ugc3VyZVxuICAgKiB0aGUgcHJvdmlkZWQgZGF0YSBjaHVuayBkb2VzIG5vdCBleGNlZWQgdGhlIHNpemUgb2YgYHRhcmdldGAuXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3cml0dGVuIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqL1xuICBwdWJsaWMgZGVjb2RlKGlucHV0OiBVaW50OEFycmF5LCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBieXRlMTogbnVtYmVyO1xuICAgIGxldCBieXRlMjogbnVtYmVyO1xuICAgIGxldCBieXRlMzogbnVtYmVyO1xuICAgIGxldCBieXRlNDogbnVtYmVyO1xuICAgIGxldCBjb2RlcG9pbnQgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgYnl0ZXNcbiAgICBpZiAodGhpcy5pbnRlcmltWzBdKSB7XG4gICAgICBsZXQgZGlzY2FyZEludGVyaW0gPSBmYWxzZTtcbiAgICAgIGxldCBjcCA9IHRoaXMuaW50ZXJpbVswXTtcbiAgICAgIGNwICY9ICgoKChjcCAmIDB4RTApID09PSAweEMwKSkgPyAweDFGIDogKCgoY3AgJiAweEYwKSA9PT0gMHhFMCkpID8gMHgwRiA6IDB4MDcpO1xuICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICBsZXQgdG1wOiBudW1iZXI7XG4gICAgICB3aGlsZSAoKHRtcCA9IHRoaXMuaW50ZXJpbVsrK3Bvc10gJiAweDNGKSAmJiBwb3MgPCA0KSB7XG4gICAgICAgIGNwIDw8PSA2O1xuICAgICAgICBjcCB8PSB0bXA7XG4gICAgICB9XG4gICAgICAvLyBtaXNzaW5nIGJ5dGVzIC0gcmVhZCBhaGVhZCBmcm9tIGlucHV0XG4gICAgICBjb25zdCB0eXBlID0gKCgodGhpcy5pbnRlcmltWzBdICYgMHhFMCkgPT09IDB4QzApKSA/IDIgOiAoKCh0aGlzLmludGVyaW1bMF0gJiAweEYwKSA9PT0gMHhFMCkpID8gMyA6IDQ7XG4gICAgICBjb25zdCBtaXNzaW5nID0gdHlwZSAtIHBvcztcbiAgICAgIHdoaWxlIChzdGFydFBvcyA8IG1pc3NpbmcpIHtcbiAgICAgICAgaWYgKHN0YXJ0UG9zID49IGxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHRtcCA9IGlucHV0W3N0YXJ0UG9zKytdO1xuICAgICAgICBpZiAoKHRtcCAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uLCBkaXNjYXJkIGludGVyaW0gYnl0ZXMgY29tcGxldGVseVxuICAgICAgICAgIHN0YXJ0UG9zLS07XG4gICAgICAgICAgZGlzY2FyZEludGVyaW0gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5lZWQgdG8gc2F2ZSBzbyB3ZSBjYW4gY29udGludWUgc2hvcnQgaW5wdXRzIGluIG5leHQgY2FsbFxuICAgICAgICAgIHRoaXMuaW50ZXJpbVtwb3MrK10gPSB0bXA7XG4gICAgICAgICAgY3AgPDw9IDY7XG4gICAgICAgICAgY3AgfD0gdG1wICYgMHgzRjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFkaXNjYXJkSW50ZXJpbSkge1xuICAgICAgICAvLyBmaW5hbCB0ZXN0IGlzIHR5cGUgZGVwZW5kZW50XG4gICAgICAgIGlmICh0eXBlID09PSAyKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHg4MCkge1xuICAgICAgICAgICAgLy8gd3Jvbmcgc3RhcnRlciBieXRlXG4gICAgICAgICAgICBzdGFydFBvcy0tO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAzKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHgwODAwIHx8IChjcCA+PSAweEQ4MDAgJiYgY3AgPD0gMHhERkZGKSB8fCBjcCA9PT0gMHhGRUZGKSB7XG4gICAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCBvciBCT01cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHgwMTAwMDAgfHwgY3AgPiAweDEwRkZGRikge1xuICAgICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW50ZXJpbS5maWxsKDApO1xuICAgIH1cblxuICAgIC8vIGxvb3AgdGhyb3VnaCBpbnB1dFxuICAgIGNvbnN0IGZvdXJTdG9wID0gbGVuZ3RoIC0gNDtcbiAgICBsZXQgaSA9IHN0YXJ0UG9zO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEFTQ0lJIHNob3J0Y3V0IHdpdGggbG9vcCB1bnJvbGxlZCB0byA0IGNvbnNlY3V0aXZlIEFTQ0lJIGNoYXJzLlxuICAgICAgICogVGhpcyBpcyBhIGNvbXByb21pc2UgYmV0d2VlbiBzcGVlZCBnYWluIGZvciBBU0NJSVxuICAgICAgICogYW5kIHBlbmFsdHkgZm9yIG5vbiBBU0NJSTpcbiAgICAgICAqIEZvciBiZXN0IEFTQ0lJIHBlcmZvcm1hbmNlIHRoZSBjaGFyIHNob3VsZCBiZSBzdG9yZWQgZGlyZWN0bHkgaW50byB0YXJnZXQsXG4gICAgICAgKiBidXQgZXZlbiBhIHNpbmdsZSBhdHRlbXB0IHRvIHdyaXRlIHRvIHRhcmdldCBhbmQgY29tcGFyZSBhZnRlcndhcmRzXG4gICAgICAgKiBwZW5hbGl6ZXMgbm9uIEFTQ0lJIHJlYWxseSBiYWQgKC01MCUpLCB0aHVzIHdlIGxvYWQgdGhlIGNoYXIgaW50byBieXRlWCBmaXJzdCxcbiAgICAgICAqIHdoaWNoIHJlZHVjZXMgQVNDSUkgcGVyZm9ybWFuY2UgYnkgfjE1JS5cbiAgICAgICAqIFRoaXMgdHJpYWwgZm9yIEFTQ0lJIHJlZHVjZXMgbm9uIEFTQ0lJIHBlcmZvcm1hbmNlIGJ5IH4xMCUgd2hpY2ggc2VlbXMgYWNjZXB0aWJsZVxuICAgICAgICogY29tcGFyZWQgdG8gdGhlIGdhaW5zLlxuICAgICAgICogTm90ZSB0aGF0IHRoaXMgb3B0aW1pemF0aW9uIG9ubHkgdGFrZXMgcGxhY2UgZm9yIDQgY29uc2VjdXRpdmUgQVNDSUkgY2hhcnMsXG4gICAgICAgKiBmb3IgYW55IHNob3J0ZXIgaXQgYmFpbHMgb3V0LiBXb3JzdCBjYXNlIC0gYWxsIDQgYnl0ZXMgYmVpbmcgcmVhZCBidXRcbiAgICAgICAqIHRocm93biBhd2F5IGR1ZSB0byB0aGUgbGFzdCBiZWluZyBhIG5vbiBBU0NJSSBjaGFyICgtMTAlIHBlcmZvcm1hbmNlKS5cbiAgICAgICAqL1xuICAgICAgd2hpbGUgKGkgPCBmb3VyU3RvcFxuICAgICAgICAmJiAhKChieXRlMSA9IGlucHV0W2ldKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGUyID0gaW5wdXRbaSArIDFdKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGUzID0gaW5wdXRbaSArIDJdKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGU0ID0gaW5wdXRbaSArIDNdKSAmIDB4ODApKVxuICAgICAge1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUxO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUyO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUzO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGU0O1xuICAgICAgICBpICs9IDQ7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlcmVhZCBieXRlMVxuICAgICAgYnl0ZTEgPSBpbnB1dFtpKytdO1xuXG4gICAgICAvLyAxIGJ5dGVcbiAgICAgIGlmIChieXRlMSA8IDB4ODApIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlMTtcblxuICAgICAgICAvLyAyIGJ5dGVzXG4gICAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4RTApID09PSAweEMwKSB7XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUyID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMiAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVwb2ludCA9IChieXRlMSAmIDB4MUYpIDw8IDYgfCAoYnl0ZTIgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBzdGFydGVyIGJ5dGVcbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG5cbiAgICAgICAgLy8gMyBieXRlc1xuICAgICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweEYwKSA9PT0gMHhFMCkge1xuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMiA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTIgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMyA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTMgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnQgPSAoYnl0ZTEgJiAweDBGKSA8PCAxMiB8IChieXRlMiAmIDB4M0YpIDw8IDYgfCAoYnl0ZTMgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4MDgwMCB8fCAoY29kZXBvaW50ID49IDB4RDgwMCAmJiBjb2RlcG9pbnQgPD0gMHhERkZGKSB8fCBjb2RlcG9pbnQgPT09IDB4RkVGRikge1xuICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50IG9yIEJPTSwgbm8gaS0tIGhlcmVcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGVwb2ludDtcblxuICAgICAgICAvLyA0IGJ5dGVzXG4gICAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4RjgpID09PSAweEYwKSB7XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUyID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMiAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVsxXSA9IGJ5dGUyO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUzID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMyAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVsxXSA9IGJ5dGUyO1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVsyXSA9IGJ5dGUzO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGU0ID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlNCAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVwb2ludCA9IChieXRlMSAmIDB4MDcpIDw8IDE4IHwgKGJ5dGUyICYgMHgzRikgPDwgMTIgfCAoYnl0ZTMgJiAweDNGKSA8PCA2IHwgKGJ5dGU0ICYgMHgzRik7XG4gICAgICAgIGlmIChjb2RlcG9pbnQgPCAweDAxMDAwMCB8fCBjb2RlcG9pbnQgPiAweDEwRkZGRikge1xuICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50LCBubyBpLS0gaGVyZVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZXBvaW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWxsZWdhbCBieXRlLCBqdXN0IHNraXBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJVW5pY29kZVZlcnNpb25Qcm92aWRlciwgVW5pY29kZUNoYXJQcm9wZXJ0aWVzLCBVbmljb2RlQ2hhcldpZHRoIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IFVuaWNvZGVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1VuaWNvZGVTZXJ2aWNlJztcblxuY29uc3QgQk1QX0NPTUJJTklORyA9IFtcbiAgWzB4MDMwMCwgMHgwMzZGXSwgWzB4MDQ4MywgMHgwNDg2XSwgWzB4MDQ4OCwgMHgwNDg5XSxcbiAgWzB4MDU5MSwgMHgwNUJEXSwgWzB4MDVCRiwgMHgwNUJGXSwgWzB4MDVDMSwgMHgwNUMyXSxcbiAgWzB4MDVDNCwgMHgwNUM1XSwgWzB4MDVDNywgMHgwNUM3XSwgWzB4MDYwMCwgMHgwNjAzXSxcbiAgWzB4MDYxMCwgMHgwNjE1XSwgWzB4MDY0QiwgMHgwNjVFXSwgWzB4MDY3MCwgMHgwNjcwXSxcbiAgWzB4MDZENiwgMHgwNkU0XSwgWzB4MDZFNywgMHgwNkU4XSwgWzB4MDZFQSwgMHgwNkVEXSxcbiAgWzB4MDcwRiwgMHgwNzBGXSwgWzB4MDcxMSwgMHgwNzExXSwgWzB4MDczMCwgMHgwNzRBXSxcbiAgWzB4MDdBNiwgMHgwN0IwXSwgWzB4MDdFQiwgMHgwN0YzXSwgWzB4MDkwMSwgMHgwOTAyXSxcbiAgWzB4MDkzQywgMHgwOTNDXSwgWzB4MDk0MSwgMHgwOTQ4XSwgWzB4MDk0RCwgMHgwOTREXSxcbiAgWzB4MDk1MSwgMHgwOTU0XSwgWzB4MDk2MiwgMHgwOTYzXSwgWzB4MDk4MSwgMHgwOTgxXSxcbiAgWzB4MDlCQywgMHgwOUJDXSwgWzB4MDlDMSwgMHgwOUM0XSwgWzB4MDlDRCwgMHgwOUNEXSxcbiAgWzB4MDlFMiwgMHgwOUUzXSwgWzB4MEEwMSwgMHgwQTAyXSwgWzB4MEEzQywgMHgwQTNDXSxcbiAgWzB4MEE0MSwgMHgwQTQyXSwgWzB4MEE0NywgMHgwQTQ4XSwgWzB4MEE0QiwgMHgwQTREXSxcbiAgWzB4MEE3MCwgMHgwQTcxXSwgWzB4MEE4MSwgMHgwQTgyXSwgWzB4MEFCQywgMHgwQUJDXSxcbiAgWzB4MEFDMSwgMHgwQUM1XSwgWzB4MEFDNywgMHgwQUM4XSwgWzB4MEFDRCwgMHgwQUNEXSxcbiAgWzB4MEFFMiwgMHgwQUUzXSwgWzB4MEIwMSwgMHgwQjAxXSwgWzB4MEIzQywgMHgwQjNDXSxcbiAgWzB4MEIzRiwgMHgwQjNGXSwgWzB4MEI0MSwgMHgwQjQzXSwgWzB4MEI0RCwgMHgwQjREXSxcbiAgWzB4MEI1NiwgMHgwQjU2XSwgWzB4MEI4MiwgMHgwQjgyXSwgWzB4MEJDMCwgMHgwQkMwXSxcbiAgWzB4MEJDRCwgMHgwQkNEXSwgWzB4MEMzRSwgMHgwQzQwXSwgWzB4MEM0NiwgMHgwQzQ4XSxcbiAgWzB4MEM0QSwgMHgwQzREXSwgWzB4MEM1NSwgMHgwQzU2XSwgWzB4MENCQywgMHgwQ0JDXSxcbiAgWzB4MENCRiwgMHgwQ0JGXSwgWzB4MENDNiwgMHgwQ0M2XSwgWzB4MENDQywgMHgwQ0NEXSxcbiAgWzB4MENFMiwgMHgwQ0UzXSwgWzB4MEQ0MSwgMHgwRDQzXSwgWzB4MEQ0RCwgMHgwRDREXSxcbiAgWzB4MERDQSwgMHgwRENBXSwgWzB4MEREMiwgMHgwREQ0XSwgWzB4MERENiwgMHgwREQ2XSxcbiAgWzB4MEUzMSwgMHgwRTMxXSwgWzB4MEUzNCwgMHgwRTNBXSwgWzB4MEU0NywgMHgwRTRFXSxcbiAgWzB4MEVCMSwgMHgwRUIxXSwgWzB4MEVCNCwgMHgwRUI5XSwgWzB4MEVCQiwgMHgwRUJDXSxcbiAgWzB4MEVDOCwgMHgwRUNEXSwgWzB4MEYxOCwgMHgwRjE5XSwgWzB4MEYzNSwgMHgwRjM1XSxcbiAgWzB4MEYzNywgMHgwRjM3XSwgWzB4MEYzOSwgMHgwRjM5XSwgWzB4MEY3MSwgMHgwRjdFXSxcbiAgWzB4MEY4MCwgMHgwRjg0XSwgWzB4MEY4NiwgMHgwRjg3XSwgWzB4MEY5MCwgMHgwRjk3XSxcbiAgWzB4MEY5OSwgMHgwRkJDXSwgWzB4MEZDNiwgMHgwRkM2XSwgWzB4MTAyRCwgMHgxMDMwXSxcbiAgWzB4MTAzMiwgMHgxMDMyXSwgWzB4MTAzNiwgMHgxMDM3XSwgWzB4MTAzOSwgMHgxMDM5XSxcbiAgWzB4MTA1OCwgMHgxMDU5XSwgWzB4MTE2MCwgMHgxMUZGXSwgWzB4MTM1RiwgMHgxMzVGXSxcbiAgWzB4MTcxMiwgMHgxNzE0XSwgWzB4MTczMiwgMHgxNzM0XSwgWzB4MTc1MiwgMHgxNzUzXSxcbiAgWzB4MTc3MiwgMHgxNzczXSwgWzB4MTdCNCwgMHgxN0I1XSwgWzB4MTdCNywgMHgxN0JEXSxcbiAgWzB4MTdDNiwgMHgxN0M2XSwgWzB4MTdDOSwgMHgxN0QzXSwgWzB4MTdERCwgMHgxN0REXSxcbiAgWzB4MTgwQiwgMHgxODBEXSwgWzB4MThBOSwgMHgxOEE5XSwgWzB4MTkyMCwgMHgxOTIyXSxcbiAgWzB4MTkyNywgMHgxOTI4XSwgWzB4MTkzMiwgMHgxOTMyXSwgWzB4MTkzOSwgMHgxOTNCXSxcbiAgWzB4MUExNywgMHgxQTE4XSwgWzB4MUIwMCwgMHgxQjAzXSwgWzB4MUIzNCwgMHgxQjM0XSxcbiAgWzB4MUIzNiwgMHgxQjNBXSwgWzB4MUIzQywgMHgxQjNDXSwgWzB4MUI0MiwgMHgxQjQyXSxcbiAgWzB4MUI2QiwgMHgxQjczXSwgWzB4MURDMCwgMHgxRENBXSwgWzB4MURGRSwgMHgxREZGXSxcbiAgWzB4MjAwQiwgMHgyMDBGXSwgWzB4MjAyQSwgMHgyMDJFXSwgWzB4MjA2MCwgMHgyMDYzXSxcbiAgWzB4MjA2QSwgMHgyMDZGXSwgWzB4MjBEMCwgMHgyMEVGXSwgWzB4MzAyQSwgMHgzMDJGXSxcbiAgWzB4MzA5OSwgMHgzMDlBXSwgWzB4QTgwNiwgMHhBODA2XSwgWzB4QTgwQiwgMHhBODBCXSxcbiAgWzB4QTgyNSwgMHhBODI2XSwgWzB4RkIxRSwgMHhGQjFFXSwgWzB4RkUwMCwgMHhGRTBGXSxcbiAgWzB4RkUyMCwgMHhGRTIzXSwgWzB4RkVGRiwgMHhGRUZGXSwgWzB4RkZGOSwgMHhGRkZCXVxuXTtcbmNvbnN0IEhJR0hfQ09NQklOSU5HID0gW1xuICBbMHgxMEEwMSwgMHgxMEEwM10sIFsweDEwQTA1LCAweDEwQTA2XSwgWzB4MTBBMEMsIDB4MTBBMEZdLFxuICBbMHgxMEEzOCwgMHgxMEEzQV0sIFsweDEwQTNGLCAweDEwQTNGXSwgWzB4MUQxNjcsIDB4MUQxNjldLFxuICBbMHgxRDE3MywgMHgxRDE4Ml0sIFsweDFEMTg1LCAweDFEMThCXSwgWzB4MUQxQUEsIDB4MUQxQURdLFxuICBbMHgxRDI0MiwgMHgxRDI0NF0sIFsweEUwMDAxLCAweEUwMDAxXSwgWzB4RTAwMjAsIDB4RTAwN0ZdLFxuICBbMHhFMDEwMCwgMHhFMDFFRl1cbl07XG5cbi8vIEJNUCBsb29rdXAgdGFibGUsIGxhenkgaW5pdGlhbGl6ZWQgZHVyaW5nIGZpcnN0IGFkZG9uIGxvYWRpbmdcbmxldCB0YWJsZTogVWludDhBcnJheTtcblxuZnVuY3Rpb24gYmlzZWFyY2godWNzOiBudW1iZXIsIGRhdGE6IG51bWJlcltdW10pOiBib29sZWFuIHtcbiAgbGV0IG1pbiA9IDA7XG4gIGxldCBtYXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGxldCBtaWQ7XG4gIGlmICh1Y3MgPCBkYXRhWzBdWzBdIHx8IHVjcyA+IGRhdGFbbWF4XVsxXSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB3aGlsZSAobWF4ID49IG1pbikge1xuICAgIG1pZCA9IChtaW4gKyBtYXgpID4+IDE7XG4gICAgaWYgKHVjcyA+IGRhdGFbbWlkXVsxXSkge1xuICAgICAgbWluID0gbWlkICsgMTtcbiAgICB9IGVsc2UgaWYgKHVjcyA8IGRhdGFbbWlkXVswXSkge1xuICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFVuaWNvZGVWNiBpbXBsZW1lbnRzIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcHVibGljIHJlYWRvbmx5IHZlcnNpb24gPSAnNic7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gaW5pdCBsb29rdXAgdGFibGUgb25jZVxuICAgIGlmICghdGFibGUpIHtcbiAgICAgIHRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzYpO1xuICAgICAgdGFibGUuZmlsbCgxKTtcbiAgICAgIHRhYmxlWzBdID0gMDtcbiAgICAgIC8vIGNvbnRyb2wgY2hhcnNcbiAgICAgIHRhYmxlLmZpbGwoMCwgMSwgMzIpO1xuICAgICAgdGFibGUuZmlsbCgwLCAweDdmLCAweGEwKTtcblxuICAgICAgLy8gYXBwbHkgd2lkZSBjaGFyIHJ1bGVzIGZpcnN0XG4gICAgICAvLyB3aWRlIGNoYXJzXG4gICAgICB0YWJsZS5maWxsKDIsIDB4MTEwMCwgMHgxMTYwKTtcbiAgICAgIHRhYmxlWzB4MjMyOV0gPSAyO1xuICAgICAgdGFibGVbMHgyMzJhXSA9IDI7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4MmU4MCwgMHhhNGQwKTtcbiAgICAgIHRhYmxlWzB4MzAzZl0gPSAxOyAgLy8gd3JvbmdseSBpbiBsYXN0IGxpbmVcblxuICAgICAgdGFibGUuZmlsbCgyLCAweGFjMDAsIDB4ZDdhNCk7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4ZjkwMCwgMHhmYjAwKTtcbiAgICAgIHRhYmxlLmZpbGwoMiwgMHhmZTEwLCAweGZlMWEpO1xuICAgICAgdGFibGUuZmlsbCgyLCAweGZlMzAsIDB4ZmU3MCk7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4ZmYwMCwgMHhmZjYxKTtcbiAgICAgIHRhYmxlLmZpbGwoMiwgMHhmZmUwLCAweGZmZTcpO1xuXG4gICAgICAvLyBhcHBseSBjb21iaW5pbmcgbGFzdCB0byBlbnN1cmUgd2Ugb3ZlcndyaXRlXG4gICAgICAvLyB3cm9uZ2x5IHdpZGUgc2V0IGNoYXJzOlxuICAgICAgLy8gICAgdGhlIG9yaWdpbmFsIGFsZ28gZXZhbHMgY29tYmluaW5nIGZpcnN0IGFuZCBmYWxsc1xuICAgICAgLy8gICAgdGhyb3VnaCB0byB3aWRlIGNoZWNrIHNvIHdlIHNpbXBseSBkbyBoZXJlIHRoZSBvcHBvc2l0ZVxuICAgICAgLy8gY29tYmluaW5nIDBcbiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk1QX0NPTUJJTklORy5sZW5ndGg7ICsrcikge1xuICAgICAgICB0YWJsZS5maWxsKDAsIEJNUF9DT01CSU5JTkdbcl1bMF0sIEJNUF9DT01CSU5JTkdbcl1bMV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd2N3aWR0aChudW06IG51bWJlcik6IFVuaWNvZGVDaGFyV2lkdGgge1xuICAgIGlmIChudW0gPCAzMikgcmV0dXJuIDA7XG4gICAgaWYgKG51bSA8IDEyNykgcmV0dXJuIDE7XG4gICAgaWYgKG51bSA8IDY1NTM2KSByZXR1cm4gdGFibGVbbnVtXSBhcyBVbmljb2RlQ2hhcldpZHRoO1xuICAgIGlmIChiaXNlYXJjaChudW0sIEhJR0hfQ09NQklOSU5HKSkgcmV0dXJuIDA7XG4gICAgaWYgKChudW0gPj0gMHgyMDAwMCAmJiBudW0gPD0gMHgyZmZmZCkgfHwgKG51bSA+PSAweDMwMDAwICYmIG51bSA8PSAweDNmZmZkKSkgcmV0dXJuIDI7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICBwdWJsaWMgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzIHtcbiAgICBsZXQgd2lkdGggPSB0aGlzLndjd2lkdGgoY29kZXBvaW50KTtcbiAgICBsZXQgc2hvdWxkSm9pbiA9IHdpZHRoID09PSAwICYmIHByZWNlZGluZyAhPT0gMDtcbiAgICBpZiAoc2hvdWxkSm9pbikge1xuICAgICAgY29uc3Qgb2xkV2lkdGggPSBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgocHJlY2VkaW5nKTtcbiAgICAgIGlmIChvbGRXaWR0aCA9PT0gMCkge1xuICAgICAgICBzaG91bGRKb2luID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKG9sZFdpZHRoID4gd2lkdGgpIHtcbiAgICAgICAgd2lkdGggPSBvbGRXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFVuaWNvZGVTZXJ2aWNlLmNyZWF0ZVByb3BlcnR5VmFsdWUoMCwgd2lkdGgsIHNob3VsZEpvaW4pO1xuICB9XG59XG4iLCAiXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuXG5kZWNsYXJlIGNvbnN0IHNldFRpbWVvdXQ6IChoYW5kbGVyOiAoKSA9PiB2b2lkLCB0aW1lb3V0PzogbnVtYmVyKSA9PiB2b2lkO1xuXG4vKipcbiAqIFNhZmV0eSB3YXRlcm1hcmsgdG8gYXZvaWQgbWVtb3J5IGV4aGF1c3Rpb24gYW5kIGJyb3dzZXIgZW5naW5lIGNyYXNoIG9uIGZhc3QgZGF0YSBpbnB1dC5cbiAqIEVuYWJsZSBmbG93IGNvbnRyb2wgdG8gYXZvaWQgdGhpcyBsaW1pdCBhbmQgbWFrZSBzdXJlIHRoYXQgeW91ciBiYWNrZW5kIGNvcnJlY3RseVxuICogcHJvcGFnYXRlcyB0aGlzIHRvIHRoZSB1bmRlcmx5aW5nIHB0eS4gKHNlZSBkb2NzIGZvciBmdXJ0aGVyIGluc3RydWN0aW9ucylcbiAqIFNpbmNlIHRoaXMgbGltaXQgaXMgbWVhbnQgYXMgYSBzYWZldHkgcGFyYWNodXRlIHRvIHByZXZlbnQgYnJvd3NlciBjcmFzaHMsXG4gKiBpdCBpcyBzZXQgdG8gYSB2ZXJ5IGhpZ2ggbnVtYmVyLiBUeXBpY2FsbHkgeHRlcm0uanMgZ2V0cyB1bnJlc3BvbnNpdmUgd2l0aFxuICogYSAxMDAgdGltZXMgbG93ZXIgbnVtYmVyICg+NTAwIGtCKS5cbiAqL1xuY29uc3QgRElTQ0FSRF9XQVRFUk1BUksgPSA1MDAwMDAwMDsgLy8gfjUwIE1CXG5cbi8qKlxuICogVGhlIG1heCBudW1iZXIgb2YgbXMgdG8gc3BlbmQgb24gd3JpdGVzIGJlZm9yZSBhbGxvd2luZyB0aGUgcmVuZGVyZXIgdG9cbiAqIGNhdGNoIHVwIHdpdGggYSAwbXMgc2V0VGltZW91dC4gQSB2YWx1ZSBvZiA8IDMzIHRvIGtlZXAgdXMgY2xvc2UgdG9cbiAqIDMwZnBzLCBhbmQgYSB2YWx1ZSBvZiA8IDE2IHRvIHRyeSB0byBydW4gYXQgNjBmcHMuIE9mIGNvdXJzZSwgdGhlIHJlYWwgRlBTXG4gKiBkZXBlbmRzIG9uIHRoZSB0aW1lIGl0IHRha2VzIGZvciB0aGUgcmVuZGVyZXIgdG8gZHJhdyB0aGUgZnJhbWUuXG4gKi9cbmNvbnN0IFdSSVRFX1RJTUVPVVRfTVMgPSAxMjtcblxuLyoqXG4gKiBUaHJlc2hvbGQgb2YgbWF4IGhlbGQgY2h1bmtzIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoYXQgd2VyZSBhbHJlYWR5IHByb2Nlc3NlZC5cbiAqIFRoaXMgaXMgYSB0cmFkZW9mZiBiZXR3ZWVuIGV4dGVuc2l2ZSB3cml0ZSBidWZmZXIgc2hpZnRzIChiYWQgcnVudGltZSkgYW5kIGhpZ2hcbiAqIG1lbW9yeSBjb25zdW1wdGlvbiBieSBkYXRhIHRoYXRzIG5vdCB1c2VkIGFueW1vcmUuXG4gKi9cbmNvbnN0IFdSSVRFX0JVRkZFUl9MRU5HVEhfVEhSRVNIT0xEID0gNTA7XG5cbmV4cG9ydCBjbGFzcyBXcml0ZUJ1ZmZlciBleHRlbmRzIERpc3Bvc2FibGUge1xuICBwcml2YXRlIF93cml0ZUJ1ZmZlcjogKHN0cmluZyB8IFVpbnQ4QXJyYXkpW10gPSBbXTtcbiAgcHJpdmF0ZSBfY2FsbGJhY2tzOiAoKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkKVtdID0gW107XG4gIHByaXZhdGUgX3BlbmRpbmdEYXRhID0gMDtcbiAgcHJpdmF0ZSBfYnVmZmVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBfaXNTeW5jV3JpdGluZyA9IGZhbHNlO1xuICBwcml2YXRlIF9zeW5jQ2FsbHMgPSAwO1xuICBwcml2YXRlIF9kaWRVc2VySW5wdXQgPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbldyaXRlUGFyc2VkID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Xcml0ZVBhcnNlZCA9IHRoaXMuX29uV3JpdGVQYXJzZWQuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYWN0aW9uOiAoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pID0+IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+KSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVVc2VySW5wdXQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGlkVXNlcklucHV0ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVbnJlbGlhYmxlLCB0byBiZSByZW1vdmVkIHNvb24uXG4gICAqL1xuICBwdWJsaWMgd3JpdGVTeW5jKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIG1heFN1YnNlcXVlbnRDYWxscz86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIHN0b3Agd3JpdGVTeW5jIHJlY3Vyc2lvbnMgd2l0aCBtYXhTdWJzZXF1ZW50Q2FsbHMgYXJndW1lbnRcbiAgICAvLyBUaGlzIGlzIGRhbmdlcm91cyB0byB1c2UgYXMgaXQgd2lsbCBsb3NlIHRoZSBjdXJyZW50IGRhdGEgY2h1bmtcbiAgICAvLyBhbmQgcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgIGlmIChtYXhTdWJzZXF1ZW50Q2FsbHMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9zeW5jQ2FsbHMgPiBtYXhTdWJzZXF1ZW50Q2FsbHMpIHtcbiAgICAgIC8vIGNvbW1lbnQgbmV4dCBsaW5lIGlmIGEgd2hvbGUgbG9vcCBibG9jayBzaG91bGQgb25seSBjb250YWluIHggYHdyaXRlU3luY2AgY2FsbHNcbiAgICAgIC8vICh0b3RhbCBmbGF0IHZzLiBkZWVwIG5lc3RlZCBsaW1pdClcbiAgICAgIHRoaXMuX3N5bmNDYWxscyA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFwcGVuZCBjaHVuayB0byBidWZmZXJcbiAgICB0aGlzLl9wZW5kaW5nRGF0YSArPSBkYXRhLmxlbmd0aDtcbiAgICB0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKHVuZGVmaW5lZCk7XG5cbiAgICAvLyBpbmNyZWFzZSByZWN1cnNpb24gY291bnRlclxuICAgIHRoaXMuX3N5bmNDYWxscysrO1xuICAgIC8vIGV4aXQgZWFybHkgaWYgYW5vdGhlciB3cml0ZVN5bmMgbG9vcCBpcyBhY3RpdmVcbiAgICBpZiAodGhpcy5faXNTeW5jV3JpdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc1N5bmNXcml0aW5nID0gdHJ1ZTtcblxuICAgIC8vIGZvcmNlIHN5bmMgcHJvY2Vzc2luZyBvbiBwZW5kaW5nIGRhdGEgY2h1bmtzIHRvIGF2b2lkIGluLWJhbmQgZGF0YSBzY3JhbWJsaW5nXG4gICAgLy8gZG9lcyB0aGUgc2FtZSBhcyBpbm5lcldyaXRlIGJ1dCB3aXRob3V0IGV2ZW50IGxvb3BcbiAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IGhlcmUgYXMgc2luZ2xlIGxvb3Agc3RlcHMgdG8gbm90IGNvcnJ1cHQgbG9vcCBzdWJqZWN0XG4gICAgLy8gYnkgYW5vdGhlciB3cml0ZVN5bmMgY2FsbCB0cmlnZ2VyZWQgZnJvbSBfYWN0aW9uXG4gICAgbGV0IGNodW5rOiBzdHJpbmcgfCBVaW50OEFycmF5IHwgdW5kZWZpbmVkO1xuICAgIHdoaWxlIChjaHVuayA9IHRoaXMuX3dyaXRlQnVmZmVyLnNoaWZ0KCkpIHtcbiAgICAgIHRoaXMuX2FjdGlvbihjaHVuayk7XG4gICAgICBjb25zdCBjYiA9IHRoaXMuX2NhbGxiYWNrcy5zaGlmdCgpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH1cbiAgICAvLyByZXNldCB0byBhdm9pZCByZXByb2Nlc3Npbmcgb2YgY2h1bmtzIHdpdGggc2NoZWR1bGVkIGlubmVyV3JpdGUgY2FsbFxuICAgIC8vIHN0b3BwaW5nIHNjaGVkdWxlZCBpbm5lcldyaXRlIGJ5IG9mZnNldCA+IGxlbmd0aCBjb25kaXRpb25cbiAgICB0aGlzLl9wZW5kaW5nRGF0YSA9IDA7XG4gICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMHg3RkZGRkZGRjtcblxuICAgIC8vIGFsbG93IGFub3RoZXIgd3JpdGVTeW5jIHRvIGxvb3BcbiAgICB0aGlzLl9pc1N5bmNXcml0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fc3luY0NhbGxzID0gMDtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fcGVuZGluZ0RhdGEgPiBESVNDQVJEX1dBVEVSTUFSSykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cml0ZSBkYXRhIGRpc2NhcmRlZCwgdXNlIGZsb3cgY29udHJvbCB0byBhdm9pZCBsb3NpbmcgZGF0YScpO1xuICAgIH1cblxuICAgIC8vIHNjaGVkdWxlIGNodW5rIHByb2Nlc3NpbmcgZm9yIG5leHQgZXZlbnQgbG9vcCBydW5cbiAgICBpZiAoIXRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aCkge1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcblxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3Qgd3JpdGUgY2FsbCBhZnRlciB0aGUgdXNlciBoYXMgZG9uZSBzb21lIGlucHV0LFxuICAgICAgLy8gcGFyc2UgaXQgaW1tZWRpYXRlbHkgdG8gbWluaW1pemUgaW5wdXQgbGF0ZW5jeSxcbiAgICAgIC8vIG90aGVyd2lzZSBzY2hlZHVsZSBmb3IgdGhlIG5leHQgZXZlbnRcbiAgICAgIGlmICh0aGlzLl9kaWRVc2VySW5wdXQpIHtcbiAgICAgICAgdGhpcy5fZGlkVXNlcklucHV0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdEYXRhICs9IGRhdGEubGVuZ3RoO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHRoaXMuX2lubmVyV3JpdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGVuZGluZ0RhdGEgKz0gZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5fd3JpdGVCdWZmZXIucHVzaChkYXRhKTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogSW5uZXIgd3JpdGUgY2FsbCwgdGhhdCBlbnRlcnMgdGhlIHNsaWNlZCBjaHVuayBwcm9jZXNzaW5nIGJ5IHRpbWluZy5cbiAgICpcbiAgICogYGxhc3RUaW1lYCBpbmRpY2F0ZXMsIHdoZW4gdGhlIGxhc3QgX2lubmVyV3JpdGUgY2FsbCBoYWQgc3RhcnRlZC5cbiAgICogSXQgaXMgdXNlZCB0byBhZ2dyZWdhdGUgYXN5bmMgaGFuZGxlciBleGVjdXRpb24gdW5kZXIgYSB0aW1lb3V0IGNvbnN0cmFpbnRcbiAgICogZWZmZWN0aXZlbHkgbG93ZXJpbmcgdGhlIHJlZHJhd2luZyBuZWVkcywgc2NoZW1hdGljYWxseTpcbiAgICpcbiAgICogICBtYWNyb1Rhc2sgX2lubmVyV3JpdGU6XG4gICAqICAgICBpZiAoRGF0ZS5ub3coKSAtIChsYXN0VGltZSB8IDApIDwgV1JJVEVfVElNRU9VVF9NUyk6XG4gICAqICAgICAgICBzY2hlZHVsZSBtaWNyb1Rhc2sgX2lubmVyV3JpdGUobGFzdFRpbWUpXG4gICAqICAgICBlbHNlOlxuICAgKiAgICAgICAgc2NoZWR1bGUgbWFjcm9UYXNrIF9pbm5lcldyaXRlKDApXG4gICAqXG4gICAqICAgb3ZlcmFsbCBleGVjdXRpb24gb3JkZXIgb24gdGFzayBxdWV1ZXM6XG4gICAqXG4gICAqICAgbWFjcm90YXNrczogIFsuLi5dICAtLT4gIF9pbm5lcldyaXRlKDApICAtLT4gIFsuLi5dICAtLT4gIHNjcmVlblVwZGF0ZSAgLS0+ICBbLi4uXVxuICAgKiAgICAgICAgIG0gIHQ6ICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgaSAgYTogICAgICAgICAgICAgICAgICBbLi4uXVxuICAgKiAgICAgICAgIGMgIHM6ICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgciAgazogICAgICAgICAgICAgIHdoaWxlIDwgdGltZW91dDpcbiAgICogICAgICAgICBvICBzOiAgICAgICAgICAgICAgICBfaW5uZXJXcml0ZSh0aW1lb3V0KVxuICAgKlxuICAgKiBgcHJvbWlzZVJlc3VsdGAgZGVwaWN0cyB0aGUgcHJvbWlzZSByZXNvbHZlIHZhbHVlIG9mIGFuIGFzeW5jIGhhbmRsZXIuXG4gICAqIFRoaXMgdmFsdWUgZ2V0cyBjYXJyaWVkIGZvcndhcmQgdGhyb3VnaCBhbGwgc2F2ZWQgc3RhY2sgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXVzZWQgcGFyc2VyIGZvciBwcm9wZXIgY29udGludWF0aW9uLlxuICAgKlxuICAgKiBOb3RlLCBmb3IgcHVyZSBzeW5jIGNvZGUgYGxhc3RUaW1lYCBhbmQgYHByb21pc2VSZXN1bHRgIGhhdmUgbm8gbWVhbmluZy5cbiAgICovXG4gIHByb3RlY3RlZCBfaW5uZXJXcml0ZShsYXN0VGltZTogbnVtYmVyID0gMCwgcHJvbWlzZVJlc3VsdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBsYXN0VGltZSB8fCBEYXRlLm5vdygpO1xuICAgIHdoaWxlICh0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGggPiB0aGlzLl9idWZmZXJPZmZzZXQpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl93cml0ZUJ1ZmZlclt0aGlzLl9idWZmZXJPZmZzZXRdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fYWN0aW9uKGRhdGEsIHByb21pc2VSZXN1bHQpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UgZ2V0IGEgcHJvbWlzZSBhcyByZXR1cm4gdmFsdWUsIHdlIHJlLXNjaGVkdWxlIHRoZSBjb250aW51YXRpb25cbiAgICAgICAgICogYXMgdGhlbmFibGUgb24gdGhlIHByb21pc2UgYW5kIGV4aXQgcmlnaHQgYXdheS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGV4aXQgaGVyZSBtZWFucywgdGhhdCB3ZSBibG9jayBpbnB1dCBwcm9jZXNzaW5nIGF0IHRoZSBjdXJyZW50IGFjdGl2ZSBjaHVuayxcbiAgICAgICAgICogdGhlIGV4YWN0IGV4ZWN1dGlvbiBwb3NpdGlvbiB3aXRoaW4gdGhlIGNodW5rIGlzIHByZXNlcnZlZCBieSB0aGUgc2F2ZWRcbiAgICAgICAgICogc3RhY2sgY29udGVudCBpbiBJbnB1dEhhbmRsZXIgYW5kIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBSZXN1bWluZyBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgZnJvbSB0aGF0IHNhdmVkIHN0YWNrIHN0YXRlLlxuICAgICAgICAgKiBBbHNvIHRoZSByZXNvbHZlZCBwcm9taXNlIHZhbHVlIGlzIHBhc3NlZCBhbG9uZyB0aGUgY2FsbHN0YWNrIHRvXG4gICAgICAgICAqIGBFc2NhcGVTZXF1ZW5jZVBhcnNlci5wYXJzZWAgdG8gY29ycmVjdGx5IHJlc3VtZSB0aGUgc3RvcHBlZCBoYW5kbGVyIGxvb3AuXG4gICAgICAgICAqXG4gICAgICAgICAqIEV4Y2VwdGlvbnMgb24gYXN5bmMgaGFuZGxlcnMgd2lsbCBiZSBsb2dnZWQgdG8gY29uc29sZSBhc3luYywgYnV0IGRvIG5vdCBpbnRlcnJ1cHRcbiAgICAgICAgICogdGhlIGlucHV0IHByb2Nlc3NpbmcgKGNvbnRpbnVlcyB3aXRoIG5leHQgaGFuZGxlciBhdCB0aGUgY3VycmVudCBpbnB1dCBwb3NpdGlvbikuXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBhIHByb21pc2UgdGFrZXMgbG9uZyB0byByZXNvbHZlLCB3ZSBzaG91bGQgc2NoZWR1bGUgY29udGludWF0aW9uIGJlaGluZCBzZXRUaW1lb3V0LlxuICAgICAgICAgKiBUaGlzIG1pZ2h0IGFscmVhZHkgYmUgdG9vIGxhdGUsIGlmIG91ciAudGhlbiBlbnRlcnMgcmVhbGx5IGxhdGUgKGV4ZWN1dG9yICsgcHJldiB0aGVuc1xuICAgICAgICAgKiB0b29rIHZlcnkgbG9uZykuIFRoaXMgY2Fubm90IGJlIHNvbHZlZCBoZXJlIGZvciB0aGUgaGFuZGxlciBpdHNlbGYgKGl0IGlzIHRoZSBoYW5kbGVyc1xuICAgICAgICAgKiByZXNwb25zaWJpbGl0eSB0byBzbGljZSBoYXJkIHdvcmspLCBidXQgd2UgY2FuIGF0IGxlYXN0IHNjaGVkdWxlIGEgc2NyZWVuIHVwZGF0ZSBhcyB3ZVxuICAgICAgICAgKiBnYWluIGNvbnRyb2wuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjb250aW51YXRpb246IChyOiBib29sZWFuKSA9PiB2b2lkID0gKHI6IGJvb2xlYW4pID0+IERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NU1xuICAgICAgICAgID8gc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlKDAsIHIpKVxuICAgICAgICAgIDogdGhpcy5faW5uZXJXcml0ZShzdGFydFRpbWUsIHIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpbWl6YXRpb24gY29uc2lkZXJhdGlvbnM6XG4gICAgICAgICAqIFRoZSBjb250aW51YXRpb24gYWJvdmUgZmF2b3JzIEZQUyBvdmVyIHRocm91Z2hwdXQgYnkgZXZhbCdpbmcgYHN0YXJ0VGltZWAgb24gcmVzb2x2ZS5cbiAgICAgICAgICogVGhpcyBtaWdodCBzY2hlZHVsZSB0b28gbWFueSBzY3JlZW4gdXBkYXRlcyB3aXRoIGJhZCB0aHJvdWdocHV0IGRyb3BzIChpbiBjYXNlIGEgc2xvd1xuICAgICAgICAgKiByZXNvbHZpbmcgaGFuZGxlciBzbGljZWQgaXRzIHdvcmsgcHJvcGVybHkgYmVoaW5kIHNldFRpbWVvdXQgY2FsbHMpLiBXZSBjYW5ub3Qgc3BvdFxuICAgICAgICAgKiB0aGlzIGNvbmRpdGlvbiBoZXJlLCBhbHNvIHRoZSByZW5kZXJlciBoYXMgbm8gd2F5IHRvIHNwb3Qgbm9uc2Vuc2UgdXBkYXRlcyBlaXRoZXIuXG4gICAgICAgICAqIEZJWE1FOiBBIHByb3BlciBmaXggZm9yIHRoaXMgd291bGQgdHJhY2sgdGhlIEZQUyBhdCB0aGUgcmVuZGVyZXIgZW50cnkgbGV2ZWwgc2VwYXJhdGVseS5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgZmF2b3Jpbmcgb2YgRlBTIHNob3dzIGJhZCB0aHJvdWdodHB1dCBpbXBhY3QsIHVzZSB0aGUgZm9sbG93aW5nIGluc3RlYWQuIEl0IGZhdm9yc1xuICAgICAgICAgKiB0aHJvdWdocHV0IGJ5IGV2YWwnaW5nIGBzdGFydFRpbWVgIHVwZnJvbnQgcHVsbGluZyBhdCBsZWFzdCBvbmUgbW9yZSBjaHVuayBpbnRvIHRoZVxuICAgICAgICAgKiBjdXJyZW50IG1pY3JvdGFzayBxdWV1ZSAoZXhlY3V0ZWQgYmVmb3JlIHNldFRpbWVvdXQpLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gY29uc3QgY29udGludWF0aW9uOiAocjogYm9vbGVhbikgPT4gdm9pZCA9IERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NU1xuICAgICAgICAvLyAgID8gciA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoMCwgcikpXG4gICAgICAgIC8vICAgOiByID0+IHRoaXMuX2lubmVyV3JpdGUoc3RhcnRUaW1lLCByKTtcblxuICAgICAgICAvLyBIYW5kbGUgZXhjZXB0aW9ucyBzeW5jaHJvbm91c2x5IHRvIGN1cnJlbnQgYmFuZCBwb3NpdGlvbiwgaWRlYTpcbiAgICAgICAgLy8gMS4gc3Bhd24gYSBzaW5nbGUgbWljcm90YXNrIHdoaWNoIHdlIGFsbG93IHRvIHRocm93IGhhcmRcbiAgICAgICAgLy8gMi4gc3Bhd24gYSBwcm9taXNlIGltbWVkaWF0ZWx5IHJlc29sdmluZyB0byBgdHJ1ZWBcbiAgICAgICAgLy8gKGV4ZWN1dGVkIG9uIHRoZSBzYW1lIHF1ZXVlLCB0aHVzIHByb3Blcmx5IGFsaWduZWQgYmVmb3JlIGNvbnRpbnVhdGlvbiBoYXBwZW5zKVxuICAgICAgICByZXN1bHQuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7dGhyb3cgZXJyO30pO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KS50aGVuKGNvbnRpbnVhdGlvbik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2IgPSB0aGlzLl9jYWxsYmFja3NbdGhpcy5fYnVmZmVyT2Zmc2V0XTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCsrO1xuICAgICAgdGhpcy5fcGVuZGluZ0RhdGEgLT0gZGF0YS5sZW5ndGg7XG5cbiAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lID49IFdSSVRFX1RJTUVPVVRfTVMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGggPiB0aGlzLl9idWZmZXJPZmZzZXQpIHtcbiAgICAgIC8vIEFsbG93IHJlbmRlcmVyIHRvIGNhdGNoIHVwIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBuZXh0IGJhdGNoXG4gICAgICAvLyB0cmltIGFscmVhZHkgcHJvY2Vzc2VkIGNodW5rcyBpZiB3ZSBhcmUgYWJvdmUgdGhyZXNob2xkXG4gICAgICBpZiAodGhpcy5fYnVmZmVyT2Zmc2V0ID4gV1JJVEVfQlVGRkVSX0xFTkdUSF9USFJFU0hPTEQpIHtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIgPSB0aGlzLl93cml0ZUJ1ZmZlci5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3Muc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5faW5uZXJXcml0ZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5fcGVuZGluZ0RhdGEgPSAwO1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgdGhpcy5fb25Xcml0ZVBhcnNlZC5maXJlKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cblxuLy8gJ3JnYjonIHJ1bGUgLSBtYXRjaGluZzogci9nL2IgfCByci9nZy9iYiB8IHJyci9nZ2cvYmJiIHwgcnJyci9nZ2dnL2JiYmIgKGhleCBkaWdpdHMpXG5jb25zdCBSR0JfUkVYID0gL14oW1xcZGEtZl0pXFwvKFtcXGRhLWZdKVxcLyhbXFxkYS1mXSkkfF4oW1xcZGEtZl17Mn0pXFwvKFtcXGRhLWZdezJ9KVxcLyhbXFxkYS1mXXsyfSkkfF4oW1xcZGEtZl17M30pXFwvKFtcXGRhLWZdezN9KVxcLyhbXFxkYS1mXXszfSkkfF4oW1xcZGEtZl17NH0pXFwvKFtcXGRhLWZdezR9KVxcLyhbXFxkYS1mXXs0fSkkLztcbi8vICcjLi4uJyBydWxlIC0gbWF0Y2hpbmcgYW55IGhleCBkaWdpdHNcbmNvbnN0IEhBU0hfUkVYID0gL15bXFxkYS1mXSskLztcblxuLyoqXG4gKiBQYXJzZSBjb2xvciBzcGVjIHRvIFJHQiB2YWx1ZXMgKDggYml0IHBlciBjaGFubmVsKS5cbiAqIFNlZSBgbWFuIHhwYXJzZWNvbG9yYCBmb3IgZGV0YWlscyBhYm91dCBjZXJ0YWluIGZvcm1hdCBzcGVjaWZpY2F0aW9ucy5cbiAqXG4gKiBTdXBwb3J0ZWQgZm9ybWF0czpcbiAqIC0gcmdiOjxyZWQ+LzxncmVlbj4vPGJsdWU+IHdpdGggPHJlZD4sIDxncmVlbj4sIDxibHVlPiBpbiBoIHwgaGggfCBoaGggfCBoaGhoXG4gKiAtICNSR0IsICNSUkdHQkIsICNSUlJHR0dCQkIsICNSUlJSR0dHR0JCQkJcbiAqXG4gKiBBbGwgb3RoZXIgZm9ybWF0cyBsaWtlIHJnYmk6IG9yIGRldmljZS1pbmRlcGVuZGVudCBzdHJpbmcgc3BlY2lmaWNhdGlvbnNcbiAqIHdpdGggZmxvYXQgbnVtYmVyaW5nIGFyZSBub3Qgc3VwcG9ydGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDb2xvcihkYXRhOiBzdHJpbmcpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICBpZiAoIWRhdGEpIHJldHVybjtcbiAgLy8gYWxzbyBoYW5kbGUgdXBwZXJjYXNlc1xuICBsZXQgbG93ID0gZGF0YS50b0xvd2VyQ2FzZSgpO1xuICBpZiAobG93LmluZGV4T2YoJ3JnYjonKSA9PT0gMCkge1xuICAgIC8vICdyZ2I6JyBzcGVjaWZpZXJcbiAgICBsb3cgPSBsb3cuc2xpY2UoNCk7XG4gICAgY29uc3QgbSA9IFJHQl9SRVguZXhlYyhsb3cpO1xuICAgIGlmIChtKSB7XG4gICAgICBjb25zdCBiYXNlID0gbVsxXSA/IDE1IDogbVs0XSA/IDI1NSA6IG1bN10gPyA0MDk1IDogNjU1MzU7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBNYXRoLnJvdW5kKHBhcnNlSW50KG1bMV0gfHwgbVs0XSB8fCBtWzddIHx8IG1bMTBdLCAxNikgLyBiYXNlICogMjU1KSxcbiAgICAgICAgTWF0aC5yb3VuZChwYXJzZUludChtWzJdIHx8IG1bNV0gfHwgbVs4XSB8fCBtWzExXSwgMTYpIC8gYmFzZSAqIDI1NSksXG4gICAgICAgIE1hdGgucm91bmQocGFyc2VJbnQobVszXSB8fCBtWzZdIHx8IG1bOV0gfHwgbVsxMl0sIDE2KSAvIGJhc2UgKiAyNTUpXG4gICAgICBdO1xuICAgIH1cbiAgfSBlbHNlIGlmIChsb3cuaW5kZXhPZignIycpID09PSAwKSB7XG4gICAgLy8gJyMnIHNwZWNpZmllclxuICAgIGxvdyA9IGxvdy5zbGljZSgxKTtcbiAgICBpZiAoSEFTSF9SRVguZXhlYyhsb3cpICYmIFszLCA2LCA5LCAxMl0uaW5jbHVkZXMobG93Lmxlbmd0aCkpIHtcbiAgICAgIGNvbnN0IGFkdiA9IGxvdy5sZW5ndGggLyAzO1xuICAgICAgY29uc3QgcmVzdWx0OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgMCwgMF07XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7ICsraSkge1xuICAgICAgICBjb25zdCBjID0gcGFyc2VJbnQobG93LnNsaWNlKGFkdiAqIGksIGFkdiAqIGkgKyBhZHYpLCAxNik7XG4gICAgICAgIHJlc3VsdFtpXSA9IGFkdiA9PT0gMSA/IGMgPDwgNCA6IGFkdiA9PT0gMiA/IGMgOiBhZHYgPT09IDMgPyBjID4+IDQgOiBjID4+IDg7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxuXG4gIC8vIE5hbWVkIGNvbG9ycyBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQgZHVlIHRvIHRoZSBsYXJnZSBhZGRpdGlvbiB0byB0aGUgeHRlcm0uanMgYnVuZGxlIHNpemVcbiAgLy8gdGhleSB3b3VsZCBhZGQuIEluIG9yZGVyIHRvIHN1cHBvcnQgbmFtZWQgY29sb3JzLCB3ZSB3b3VsZCBuZWVkIHNvbWUgd2F5IG9mIG9wdGlvbmFsbHkgbG9hZGluZ1xuICAvLyBhZGRpdGlvbmFsIHBheWxvYWRzIHNvIHN0YXJ0dXAvZG93bmxvYWQgdGltZSBpcyBub3QgYmxvYXRlZCAoc2VlICMzNTMwKS5cbn1cblxuLy8gcGFkIGhleCBvdXRwdXQgdG8gcmVxdWVzdGVkIGJpdCB3aWR0aFxuZnVuY3Rpb24gcGFkKG46IG51bWJlciwgYml0czogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IG4udG9TdHJpbmcoMTYpO1xuICBjb25zdCBzMiA9IHMubGVuZ3RoIDwgMiA/ICcwJyArIHMgOiBzO1xuICBzd2l0Y2ggKGJpdHMpIHtcbiAgICBjYXNlIDQ6XG4gICAgICByZXR1cm4gc1swXTtcbiAgICBjYXNlIDg6XG4gICAgICByZXR1cm4gczI7XG4gICAgY2FzZSAxMjpcbiAgICAgIHJldHVybiAoczIgKyBzMikuc2xpY2UoMCwgMyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzMiArIHMyO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIGdpdmVuIGNvbG9yIHRvIHJnYjouLi8uLi8uLiBzdHJpbmcgb2YgYGJpdHNgIGRlcHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SZ2JTdHJpbmcoY29sb3I6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgYml0czogbnVtYmVyID0gMTYpOiBzdHJpbmcge1xuICBjb25zdCBbciwgZywgYl0gPSBjb2xvcjtcbiAgcmV0dXJuIGByZ2I6JHtwYWQociwgYml0cyl9LyR7cGFkKGcsIGJpdHMpfS8ke3BhZChiLCBiaXRzKX1gO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBJbnRlcm5hbCBzdGF0ZXMgb2YgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFBhcnNlclN0YXRlIHtcbiAgR1JPVU5EID0gMCxcbiAgRVNDQVBFID0gMSxcbiAgRVNDQVBFX0lOVEVSTUVESUFURSA9IDIsXG4gIENTSV9FTlRSWSA9IDMsXG4gIENTSV9QQVJBTSA9IDQsXG4gIENTSV9JTlRFUk1FRElBVEUgPSA1LFxuICBDU0lfSUdOT1JFID0gNixcbiAgU09TX1BNX0FQQ19TVFJJTkcgPSA3LFxuICBPU0NfU1RSSU5HID0gOCxcbiAgRENTX0VOVFJZID0gOSxcbiAgRENTX1BBUkFNID0gMTAsXG4gIERDU19JR05PUkUgPSAxMSxcbiAgRENTX0lOVEVSTUVESUFURSA9IDEyLFxuICBEQ1NfUEFTU1RIUk9VR0ggPSAxM1xufVxuXG4vKipcbiAqIEludGVybmFsIGFjdGlvbnMgb2YgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFBhcnNlckFjdGlvbiB7XG4gIElHTk9SRSA9IDAsXG4gIEVSUk9SID0gMSxcbiAgUFJJTlQgPSAyLFxuICBFWEVDVVRFID0gMyxcbiAgT1NDX1NUQVJUID0gNCxcbiAgT1NDX1BVVCA9IDUsXG4gIE9TQ19FTkQgPSA2LFxuICBDU0lfRElTUEFUQ0ggPSA3LFxuICBQQVJBTSA9IDgsXG4gIENPTExFQ1QgPSA5LFxuICBFU0NfRElTUEFUQ0ggPSAxMCxcbiAgQ0xFQVIgPSAxMSxcbiAgRENTX0hPT0sgPSAxMixcbiAgRENTX1BVVCA9IDEzLFxuICBEQ1NfVU5IT09LID0gMTRcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBzdGF0ZXMgb2YgT3NjUGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBPc2NTdGF0ZSB7XG4gIFNUQVJUID0gMCxcbiAgSUQgPSAxLFxuICBQQVlMT0FEID0gMixcbiAgQUJPUlQgPSAzXG59XG5cbi8vIHBheWxvYWQgbGltaXQgZm9yIE9TQyBhbmQgRENTXG5leHBvcnQgY29uc3QgUEFZTE9BRF9MSU1JVCA9IDEwMDAwMDAwO1xuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSURjc0hhbmRsZXIsIElQYXJhbXMsIElIYW5kbGVyQ29sbGVjdGlvbiwgSURjc1BhcnNlciwgRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSwgSVN1YlBhcnNlclN0YWNrU3RhdGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IHV0ZjMyVG9TdHJpbmcgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9QYXJhbXMnO1xuaW1wb3J0IHsgUEFZTE9BRF9MSU1JVCB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzJztcblxuY29uc3QgRU1QVFlfSEFORExFUlM6IElEY3NIYW5kbGVyW10gPSBbXTtcblxuZXhwb3J0IGNsYXNzIERjc1BhcnNlciBpbXBsZW1lbnRzIElEY3NQYXJzZXIge1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElEY3NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2FjdGl2ZTogSURjc0hhbmRsZXJbXSA9IEVNUFRZX0hBTkRMRVJTO1xuICBwcml2YXRlIF9pZGVudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfaGFuZGxlckZiOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlID0gKCkgPT4geyB9O1xuICBwcml2YXRlIF9zdGFjazogSVN1YlBhcnNlclN0YWNrU3RhdGUgPSB7XG4gICAgcGF1c2VkOiBmYWxzZSxcbiAgICBsb29wUG9zaXRpb246IDAsXG4gICAgZmFsbFRocm91Z2g6IGZhbHNlXG4gIH07XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9ICgpID0+IHsgfTtcbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckhhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSURjc0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhckhhbmRsZXIoaWRlbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0pIGRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gIH1cblxuICBwdWJsaWMgc2V0SGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IERjc0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIC8vIGZvcmNlIGNsZWFudXAgbGVmdG92ZXIgaGFuZGxlcnNcbiAgICBpZiAodGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX3N0YWNrLnBhdXNlZCA/IHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiAtIDEgOiB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnVuaG9vayhmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICAgIHRoaXMuX2lkZW50ID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBob29rKGlkZW50OiBudW1iZXIsIHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIC8vIGFsd2F5cyByZXNldCBsZWZ0b3ZlciBoYW5kbGVyc1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLl9pZGVudCA9IGlkZW50O1xuICAgIHRoaXMuX2FjdGl2ZSA9IHRoaXMuX2hhbmRsZXJzW2lkZW50XSB8fCBFTVBUWV9IQU5ETEVSUztcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwgJ0hPT0snLCBwYXJhbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5fYWN0aXZlLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVtqXS5ob29rKHBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwgJ1BVVCcsIHV0ZjMyVG9TdHJpbmcoZGF0YSwgc3RhcnQsIGVuZCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5fYWN0aXZlLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVtqXS5wdXQoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVuaG9vayhzdWNjZXNzOiBib29sZWFuLCBwcm9taXNlUmVzdWx0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwgJ1VOSE9PSycsIHN1Y2Nlc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaGFuZGxlclJlc3VsdDogYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4gPSBmYWxzZTtcbiAgICAgIGxldCBqID0gdGhpcy5fYWN0aXZlLmxlbmd0aCAtIDE7XG4gICAgICBsZXQgZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLl9zdGFjay5wYXVzZWQpIHtcbiAgICAgICAgaiA9IHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiAtIDE7XG4gICAgICAgIGhhbmRsZXJSZXN1bHQgPSBwcm9taXNlUmVzdWx0O1xuICAgICAgICBmYWxsVGhyb3VnaCA9IHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoO1xuICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghZmFsbFRocm91Z2ggJiYgaGFuZGxlclJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS51bmhvb2soc3VjY2Vzcyk7XG4gICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gPSBqO1xuICAgICAgICAgICAgdGhpcy5fc3RhY2suZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBqLS07XG4gICAgICB9XG4gICAgICAvLyBjbGVhbnVwIGxlZnQgb3ZlciBoYW5kbGVycyAoZmFsbFRocm91Z2ggZm9yIGFzeW5jKVxuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9hY3RpdmVbal0udW5ob29rKGZhbHNlKTtcbiAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gPSBqO1xuICAgICAgICAgIHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZGVudCA9IDA7XG4gIH1cbn1cblxuLy8gcHJlZGVmaW5lIGVtcHR5IHBhcmFtcyBhcyBbMF0gKFpETSlcbmNvbnN0IEVNUFRZX1BBUkFNUyA9IG5ldyBQYXJhbXMoKTtcbkVNUFRZX1BBUkFNUy5hZGRQYXJhbSgwKTtcblxuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGNyZWF0ZSBhIERDUyBoYW5kbGVyIGZyb20gYSBzaW5nbGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBOb3RlOiBUaGUgcGF5bG9hZCBpcyBjdXJyZW50bHkgbGltaXRlZCB0byA1MCBNQiAoaGFyZGNvZGVkKS5cbiAqL1xuZXhwb3J0IGNsYXNzIERjc0hhbmRsZXIgaW1wbGVtZW50cyBJRGNzSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGEgPSAnJztcbiAgcHJpdmF0ZSBfcGFyYW1zOiBJUGFyYW1zID0gRU1QVFlfUEFSQU1TO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pIHsgfVxuXG4gIHB1YmxpYyBob29rKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIC8vIHNpbmNlIHdlIG5lZWQgdG8gcHJlc2VydmUgcGFyYW1zIHVudGlsIGB1bmhvb2tgLCB3ZSBoYXZlIHRvIGNsb25lIGl0XG4gICAgLy8gKG9ubHkgYm9ycm93ZWQgZnJvbSBwYXJzZXIgYW5kIHNwYW5zIG11bHRpcGxlIHBhcnNlciBzdGF0ZXMpXG4gICAgLy8gcGVyZiBvcHRpbWl6YXRpb246XG4gICAgLy8gY2xvbmUgb25seSwgaWYgd2UgaGF2ZSBub24gZW1wdHkgcGFyYW1zLCBvdGhlcndpc2Ugc3RpY2sgd2l0aCBkZWZhdWx0XG4gICAgdGhpcy5fcGFyYW1zID0gKHBhcmFtcy5sZW5ndGggPiAxIHx8IHBhcmFtcy5wYXJhbXNbMF0pID8gcGFyYW1zLmNsb25lKCkgOiBFTVBUWV9QQVJBTVM7XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhICs9IHV0ZjMyVG9TdHJpbmcoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgaWYgKHRoaXMuX2RhdGEubGVuZ3RoID4gUEFZTE9BRF9MSU1JVCkge1xuICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgdGhpcy5faGl0TGltaXQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1bmhvb2soc3VjY2VzczogYm9vbGVhbik6IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBsZXQgcmV0OiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChzdWNjZXNzKSB7XG4gICAgICByZXQgPSB0aGlzLl9oYW5kbGVyKHRoaXMuX2RhdGEsIHRoaXMuX3BhcmFtcyk7XG4gICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAvLyBuZWVkIHRvIGhvbGQgZGF0YSBhbmQgcGFyYW1zIHVudGlsIGByZXRgIGdvdCByZXNvbHZlZFxuICAgICAgICAvLyBkb250IGNhcmUgZm9yIGVycm9ycywgZGF0YSB3aWxsIGJlIGZyZWVkIGFueXdheSBvbiBuZXh0IHN0YXJ0XG4gICAgICAgIHJldHVybiByZXQudGhlbihyZXMgPT4ge1xuICAgICAgICAgIHRoaXMuX3BhcmFtcyA9IEVNUFRZX1BBUkFNUztcbiAgICAgICAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgICAgICAgdGhpcy5faGl0TGltaXQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcGFyYW1zID0gRU1QVFlfUEFSQU1TO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElQYXJzaW5nU3RhdGUsIElEY3NIYW5kbGVyLCBJRXNjYXBlU2VxdWVuY2VQYXJzZXIsIElQYXJhbXMsIElPc2NIYW5kbGVyLCBJSGFuZGxlckNvbGxlY3Rpb24sIENzaUhhbmRsZXJUeXBlLCBPc2NGYWxsYmFja0hhbmRsZXJUeXBlLCBJT3NjUGFyc2VyLCBFc2NIYW5kbGVyVHlwZSwgSURjc1BhcnNlciwgRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSwgSUZ1bmN0aW9uSWRlbnRpZmllciwgRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGUsIENzaUZhbGxiYWNrSGFuZGxlclR5cGUsIEVzY0ZhbGxiYWNrSGFuZGxlclR5cGUsIFByaW50SGFuZGxlclR5cGUsIFByaW50RmFsbGJhY2tIYW5kbGVyVHlwZSwgRXhlY3V0ZUhhbmRsZXJUeXBlLCBJUGFyc2VyU3RhY2tTdGF0ZSwgUGFyc2VyU3RhY2tUeXBlLCBSZXN1bWFibGVIYW5kbGVyc1R5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IFBhcnNlclN0YXRlLCBQYXJzZXJBY3Rpb24gfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IFBhcmFtcyB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvUGFyYW1zJztcbmltcG9ydCB7IE9zY1BhcnNlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvT3NjUGFyc2VyJztcbmltcG9ydCB7IERjc1BhcnNlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRGNzUGFyc2VyJztcblxuLyoqXG4gKiBUYWJsZSB2YWx1ZXMgYXJlIGdlbmVyYXRlZCBsaWtlIHRoaXM6XG4gKiAgICBpbmRleDogIGN1cnJlbnRTdGF0ZSA8PCBUYWJsZVZhbHVlLklOREVYX1NUQVRFX1NISUZUIHwgY2hhckNvZGVcbiAqICAgIHZhbHVlOiAgYWN0aW9uIDw8IFRhYmxlVmFsdWUuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0U3RhdGVcbiAqL1xuY29uc3QgZW51bSBUYWJsZUFjY2VzcyB7XG4gIFRSQU5TSVRJT05fQUNUSU9OX1NISUZUID0gNCxcbiAgVFJBTlNJVElPTl9TVEFURV9NQVNLID0gMTUsXG4gIElOREVYX1NUQVRFX1NISUZUID0gOFxufVxuXG4vKipcbiAqIFRyYW5zaXRpb24gdGFibGUgZm9yIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvblRhYmxlIHtcbiAgcHVibGljIHRhYmxlOiBVaW50OEFycmF5O1xuXG4gIGNvbnN0cnVjdG9yKGxlbmd0aDogbnVtYmVyKSB7XG4gICAgdGhpcy50YWJsZSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRlZmF1bHQgdHJhbnNpdGlvbi5cbiAgICogQHBhcmFtIGFjdGlvbiBkZWZhdWx0IGFjdGlvblxuICAgKiBAcGFyYW0gbmV4dCBkZWZhdWx0IG5leHQgc3RhdGVcbiAgICovXG4gIHB1YmxpYyBzZXREZWZhdWx0KGFjdGlvbjogUGFyc2VyQWN0aW9uLCBuZXh0OiBQYXJzZXJTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMudGFibGUuZmlsbChhY3Rpb24gPDwgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSB0cmFuc2l0aW9uIHRvIHRoZSB0cmFuc2l0aW9uIHRhYmxlLlxuICAgKiBAcGFyYW0gY29kZSBpbnB1dCBjaGFyYWN0ZXIgY29kZVxuICAgKiBAcGFyYW0gc3RhdGUgY3VycmVudCBwYXJzZXIgc3RhdGVcbiAgICogQHBhcmFtIGFjdGlvbiBwYXJzZXIgYWN0aW9uIHRvIGJlIGRvbmVcbiAgICogQHBhcmFtIG5leHQgbmV4dCBwYXJzZXIgc3RhdGVcbiAgICovXG4gIHB1YmxpYyBhZGQoY29kZTogbnVtYmVyLCBzdGF0ZTogUGFyc2VyU3RhdGUsIGFjdGlvbjogUGFyc2VyQWN0aW9uLCBuZXh0OiBQYXJzZXJTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMudGFibGVbc3RhdGUgPDwgVGFibGVBY2Nlc3MuSU5ERVhfU1RBVEVfU0hJRlQgfCBjb2RlXSA9IGFjdGlvbiA8PCBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCB8IG5leHQ7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRyYW5zaXRpb25zIGZvciBtdWx0aXBsZSBpbnB1dCBjaGFyYWN0ZXIgY29kZXMuXG4gICAqIEBwYXJhbSBjb2RlcyBpbnB1dCBjaGFyYWN0ZXIgY29kZSBhcnJheVxuICAgKiBAcGFyYW0gc3RhdGUgY3VycmVudCBwYXJzZXIgc3RhdGVcbiAgICogQHBhcmFtIGFjdGlvbiBwYXJzZXIgYWN0aW9uIHRvIGJlIGRvbmVcbiAgICogQHBhcmFtIG5leHQgbmV4dCBwYXJzZXIgc3RhdGVcbiAgICovXG4gIHB1YmxpYyBhZGRNYW55KGNvZGVzOiBudW1iZXJbXSwgc3RhdGU6IFBhcnNlclN0YXRlLCBhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRhYmxlW3N0YXRlIDw8IFRhYmxlQWNjZXNzLklOREVYX1NUQVRFX1NISUZUIHwgY29kZXNbaV1dID0gYWN0aW9uIDw8IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dDtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBQc2V1ZG8tY2hhcmFjdGVyIHBsYWNlaG9sZGVyIGZvciBwcmludGFibGUgbm9uLWFzY2lpIGNoYXJhY3RlcnMgKHVuaWNvZGUpLlxuY29uc3QgTk9OX0FTQ0lJX1BSSU5UQUJMRSA9IDB4QTA7XG5cblxuLyoqXG4gKiBWVDUwMCBjb21wYXRpYmxlIHRyYW5zaXRpb24gdGFibGUuXG4gKiBUYWtlbiBmcm9tIGh0dHBzOi8vdnQxMDAubmV0L2VtdS9kZWNfYW5zaV9wYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBWVDUwMF9UUkFOU0lUSU9OX1RBQkxFID0gKGZ1bmN0aW9uICgpOiBUcmFuc2l0aW9uVGFibGUge1xuICBjb25zdCB0YWJsZTogVHJhbnNpdGlvblRhYmxlID0gbmV3IFRyYW5zaXRpb25UYWJsZSg0MDk1KTtcblxuICAvLyByYW5nZSBtYWNybyBmb3IgYnl0ZVxuICBjb25zdCBCWVRFX1ZBTFVFUyA9IDI1NjtcbiAgY29uc3QgYmx1ZXByaW50ID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoQllURV9WQUxVRVMpKS5tYXAoKHVudXNlZDogYW55LCBpOiBudW1iZXIpID0+IGkpO1xuICBjb25zdCByID0gKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogbnVtYmVyW10gPT4gYmx1ZXByaW50LnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gIC8vIERlZmF1bHQgZGVmaW5pdGlvbnMuXG4gIGNvbnN0IFBSSU5UQUJMRVMgPSByKDB4MjAsIDB4N2YpOyAvLyAweDIwIChTUCkgaW5jbHVkZWQsIDB4N0YgKERFTCkgZXhjbHVkZWRcbiAgY29uc3QgRVhFQ1VUQUJMRVMgPSByKDB4MDAsIDB4MTgpO1xuICBFWEVDVVRBQkxFUy5wdXNoKDB4MTkpO1xuICBFWEVDVVRBQkxFUy5wdXNoLmFwcGx5KEVYRUNVVEFCTEVTLCByKDB4MWMsIDB4MjApKTtcblxuICBjb25zdCBzdGF0ZXM6IG51bWJlcltdID0gcihQYXJzZXJTdGF0ZS5HUk9VTkQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCArIDEpO1xuICBsZXQgc3RhdGU6IGFueTtcblxuICAvLyBzZXQgZGVmYXVsdCB0cmFuc2l0aW9uXG4gIHRhYmxlLnNldERlZmF1bHQoUGFyc2VyQWN0aW9uLkVSUk9SLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBwcmludGFibGVzXG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJBY3Rpb24uUFJJTlQsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIC8vIGdsb2JhbCBhbnl3aGVyZSBydWxlc1xuICBmb3IgKHN0YXRlIGluIHN0YXRlcykge1xuICAgIHRhYmxlLmFkZE1hbnkoWzB4MTgsIDB4MWEsIDB4OTksIDB4OWFdLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gICAgdGFibGUuYWRkTWFueShyKDB4ODAsIDB4OTApLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gICAgdGFibGUuYWRkTWFueShyKDB4OTAsIDB4OTgpLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gICAgdGFibGUuYWRkKDB4OWMsIHN0YXRlLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpOyAvLyBTVCBhcyB0ZXJtaW5hdG9yXG4gICAgdGFibGUuYWRkKDB4MWIsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkVTQ0FQRSk7ICAvLyBFU0NcbiAgICB0YWJsZS5hZGQoMHg5ZCwgc3RhdGUsIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpOyAgLy8gT1NDXG4gICAgdGFibGUuYWRkTWFueShbMHg5OCwgMHg5ZSwgMHg5Zl0sIHN0YXRlLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gICAgdGFibGUuYWRkKDB4OWIsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSk7ICAvLyBDU0lcbiAgICB0YWJsZS5hZGQoMHg5MCwgc3RhdGUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTsgIC8vIERDU1xuICB9XG4gIC8vIHJ1bGVzIGZvciBleGVjdXRhYmxlcyBhbmQgN2ZcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuRVNDQVBFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRVNDQVBFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUpO1xuICAvLyBvc2NcbiAgdGFibGUuYWRkKDB4NWQsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLk9TQ19TVEFSVCwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19QVVQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19QVVQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFsweDljLCAweDFiLCAweDE4LCAweDFhLCAweDA3XSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19FTkQsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIC8vIHNvcy9wbS9hcGMgZG9lcyBub3RoaW5nXG4gIHRhYmxlLmFkZE1hbnkoWzB4NTgsIDB4NWUsIDB4NWZdLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShQUklOVEFCTEVTLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICB0YWJsZS5hZGQoMHg5YywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORywgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICAvLyBjc2kgZW50cmllc1xuICB0YWJsZS5hZGQoMHg1YiwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4M2MsIDB4M2QsIDB4M2UsIDB4M2ZdLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHg0MCksIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDQwKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgLy8gZXNjX2ludGVybWVkaWF0ZVxuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg1MCksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NTEsIDB4NTgpLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4NTksIDB4NWEsIDB4NWNdLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDYwLCAweDdmKSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBkY3MgZW50cnlcbiAgdGFibGUuYWRkKDB4NTAsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDgwKSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4M2MsIDB4M2QsIDB4M2UsIDB4M2ZdLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4NDApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRENTX0hPT0ssIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uRENTX0hPT0ssIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uRENTX0hPT0ssIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1BVVCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShbMHgxYiwgMHg5YywgMHgxOCwgMHgxYV0sIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19VTkhPT0ssIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIC8vIHNwZWNpYWwgaGFuZGxpbmcgb2YgdW5pY29kZSBjaGFyc1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJBY3Rpb24uUFJJTlQsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HLCBQYXJzZXJBY3Rpb24uT1NDX1BVVCwgUGFyc2VyU3RhdGUuT1NDX1NUUklORyk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1BVVCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgcmV0dXJuIHRhYmxlO1xufSkoKTtcblxuXG4vKipcbiAqIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICogVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBBTlNJL0RFQyBjb21wYXRpYmxlIHBhcnNlciBkZXNjcmliZWQgYnlcbiAqIFBhdWwgV2lsbGlhbXMgKGh0dHBzOi8vdnQxMDAubmV0L2VtdS9kZWNfYW5zaV9wYXJzZXIpLlxuICpcbiAqIFRvIGltcGxlbWVudCBjdXN0b20gQU5TSSBjb21wbGlhbnQgZXNjYXBlIHNlcXVlbmNlcyBpdCBpcyBub3QgbmVlZGVkIHRvXG4gKiBhbHRlciB0aGlzIHBhcnNlciwgaW5zdGVhZCBjb25zaWRlciByZWdpc3RlcmluZyBhIGN1c3RvbSBoYW5kbGVyLlxuICogRm9yIG5vbiBBTlNJIGNvbXBsaWFudCBzZXF1ZW5jZXMgY2hhbmdlIHRoZSB0cmFuc2l0aW9uIHRhYmxlIHdpdGhcbiAqIHRoZSBvcHRpb25hbCBgdHJhbnNpdGlvbnNgIGNvbnN0cnVjdG9yIGFyZ3VtZW50IGFuZFxuICogcmVpbXBsZW1lbnQgdGhlIGBwYXJzZWAgbWV0aG9kLlxuICpcbiAqIFRoaXMgcGFyc2VyIGlzIGN1cnJlbnRseSBoYXJkY29kZWQgdG8gb3BlcmF0ZSBpbiBaRE0gKFplcm8gRGVmYXVsdCBNb2RlKVxuICogYXMgc3VnZ2VzdGVkIGJ5IHRoZSBvcmlnaW5hbCBwYXJzZXIsIHRodXMgZW1wdHkgcGFyYW1ldGVycyBhcmUgc2V0IHRvIDAuXG4gKiBUaGlzIHRoaXMgaXMgbm90IGluIGxpbmUgd2l0aCB0aGUgbGF0ZXN0IEVDTUEtNDggc3BlY2lmaWNhdGlvblxuICogKFpETSB3YXMgcGFydCBvZiB0aGUgZWFybHkgc3BlY3MgYW5kIGdvdCBjb21wbGV0ZWx5IHJlbW92ZWQgbGF0ZXIgb24pLlxuICpcbiAqIE90aGVyIHRoYW4gdGhlIG9yaWdpbmFsIHBhcnNlciBmcm9tIHZ0MTAwLm5ldCB0aGlzIHBhcnNlciBzdXBwb3J0c1xuICogc3ViIHBhcmFtZXRlcnMgaW4gZGlnaXRhbCBwYXJhbWV0ZXJzIHNlcGFyYXRlZCBieSBjb2xvbnMuIEVtcHR5IHN1YiBwYXJhbWV0ZXJzXG4gKiBhcmUgc2V0IHRvIC0xIChubyBaRE0gZm9yIHN1YiBwYXJhbWV0ZXJzKS5cbiAqXG4gKiBBYm91dCBwcmVmaXggYW5kIGludGVybWVkaWF0ZSBieXRlczpcbiAqIFRoaXMgcGFyc2VyIGZvbGxvd3MgdGhlIGFzc3VtcHRpb25zIG9mIHRoZSB2dDEwMC5uZXQgcGFyc2VyIHdpdGggdGhlc2UgcmVzdHJpY3Rpb25zOlxuICogLSBvbmx5IG9uZSBwcmVmaXggYnl0ZSBpcyBhbGxvd2VkIGFzIGZpcnN0IHBhcmFtZXRlciBieXRlLCBieXRlIHJhbmdlIDB4M2MgLi4gMHgzZlxuICogLSBtYXguIHR3byBpbnRlcm1lZGlhdGVzIGFyZSByZXNwZWN0ZWQsIGJ5dGUgcmFuZ2UgMHgyMCAuLiAweDJmXG4gKiBOb3RlIHRoYXQgdGhpcyBpcyBub3QgaW4gbGluZSB3aXRoIEVDTUEtNDggd2hpY2ggZG9lcyBub3QgbGltaXQgZWl0aGVyIG9mIHRob3NlLlxuICogRnVydGhlcm1vcmUgRUNNQS00OCBhbGxvd3MgdGhlIHByZWZpeCBieXRlIHJhbmdlIGF0IGFueSBwYXJhbSBieXRlIHBvc2l0aW9uLiBDdXJyZW50bHlcbiAqIHRoZXJlIGFyZSBubyBrbm93biBzZXF1ZW5jZXMgdGhhdCBmb2xsb3cgdGhlIGJyb2FkZXIgZGVmaW5pdGlvbiBvZiB0aGUgc3BlY2lmaWNhdGlvbi5cbiAqXG4gKiBUT0RPOiBpbXBsZW1lbnQgZXJyb3IgcmVjb3ZlcnkgaG9vayB2aWEgZXJyb3IgaGFuZGxlciByZXR1cm4gdmFsdWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBFc2NhcGVTZXF1ZW5jZVBhcnNlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJRXNjYXBlU2VxdWVuY2VQYXJzZXIge1xuICBwdWJsaWMgaW5pdGlhbFN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBjdXJyZW50U3RhdGU6IG51bWJlcjtcbiAgcHVibGljIHByZWNlZGluZ0pvaW5TdGF0ZTogbnVtYmVyOyAvLyBVbmljb2RlSm9pblByb3BlcnRpZXNcblxuICAvLyBidWZmZXJzIG92ZXIgc2V2ZXJhbCBwYXJzZSBjYWxsc1xuICBwcm90ZWN0ZWQgX3BhcmFtczogUGFyYW1zO1xuICBwcm90ZWN0ZWQgX2NvbGxlY3Q6IG51bWJlcjtcblxuICAvLyBoYW5kbGVyIGxvb2t1cCBjb250YWluZXJzXG4gIHByb3RlY3RlZCBfcHJpbnRIYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyczogeyBbZmxhZzogbnVtYmVyXTogRXhlY3V0ZUhhbmRsZXJUeXBlIH07XG4gIHByb3RlY3RlZCBfY3NpSGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxDc2lIYW5kbGVyVHlwZT47XG4gIHByb3RlY3RlZCBfZXNjSGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxFc2NIYW5kbGVyVHlwZT47XG4gIHByb3RlY3RlZCByZWFkb25seSBfb3NjUGFyc2VyOiBJT3NjUGFyc2VyO1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2Rjc1BhcnNlcjogSURjc1BhcnNlcjtcbiAgcHJvdGVjdGVkIF9lcnJvckhhbmRsZXI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICAvLyBmYWxsYmFjayBoYW5kbGVyc1xuICBwcm90ZWN0ZWQgX3ByaW50SGFuZGxlckZiOiBQcmludEZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfZXhlY3V0ZUhhbmRsZXJGYjogRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfY3NpSGFuZGxlckZiOiBDc2lGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJGYjogRXNjRmFsbGJhY2tIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9lcnJvckhhbmRsZXJGYjogKHN0YXRlOiBJUGFyc2luZ1N0YXRlKSA9PiBJUGFyc2luZ1N0YXRlO1xuXG4gIC8vIHBhcnNlciBzdGFjayBzYXZlIGZvciBhc3luYyBoYW5kbGVyIHN1cHBvcnRcbiAgcHJvdGVjdGVkIF9wYXJzZVN0YWNrOiBJUGFyc2VyU3RhY2tTdGF0ZSA9IHtcbiAgICBzdGF0ZTogUGFyc2VyU3RhY2tUeXBlLk5PTkUsXG4gICAgaGFuZGxlcnM6IFtdLFxuICAgIGhhbmRsZXJQb3M6IDAsXG4gICAgdHJhbnNpdGlvbjogMCxcbiAgICBjaHVua1BvczogMFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCByZWFkb25seSBfdHJhbnNpdGlvbnM6IFRyYW5zaXRpb25UYWJsZSA9IFZUNTAwX1RSQU5TSVRJT05fVEFCTEVcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gUGFyc2VyU3RhdGUuR1JPVU5EO1xuICAgIHRoaXMuY3VycmVudFN0YXRlID0gdGhpcy5pbml0aWFsU3RhdGU7XG4gICAgdGhpcy5fcGFyYW1zID0gbmV3IFBhcmFtcygpOyAvLyBkZWZhdWx0cyB0byAzMiBzdG9yYWJsZSBwYXJhbXMvc3VicGFyYW1zXG4gICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAgICAvLyBaRE1cbiAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICB0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZSA9IDA7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCBmYWxsYmFjayBoYW5kbGVycyBhbmQgaGFuZGxlciBsb29rdXAgY29udGFpbmVyc1xuICAgIHRoaXMuX3ByaW50SGFuZGxlckZiID0gKGRhdGEsIHN0YXJ0LCBlbmQpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gKGNvZGU6IG51bWJlcik6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX2NzaUhhbmRsZXJGYiA9IChpZGVudDogbnVtYmVyLCBwYXJhbXM6IElQYXJhbXMpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9lc2NIYW5kbGVyRmIgPSAoaWRlbnQ6IG51bWJlcik6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlckZiID0gKHN0YXRlOiBJUGFyc2luZ1N0YXRlKTogSVBhcnNpbmdTdGF0ZSA9PiBzdGF0ZTtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSB0aGlzLl9wcmludEhhbmRsZXJGYjtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2NzaUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9lc2NIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgdGhpcy5fY3NpSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHRoaXMuX2VzY0hhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9KSk7XG4gICAgdGhpcy5fb3NjUGFyc2VyID0gdGhpcy5yZWdpc3RlcihuZXcgT3NjUGFyc2VyKCkpO1xuICAgIHRoaXMuX2Rjc1BhcnNlciA9IHRoaXMucmVnaXN0ZXIobmV3IERjc1BhcnNlcigpKTtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSB0aGlzLl9lcnJvckhhbmRsZXJGYjtcblxuICAgIC8vIHN3YWxsb3cgN2JpdCBTVCAoRVNDK1xcKVxuICAgIHRoaXMucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdcXFxcJyB9LCAoKSA9PiB0cnVlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfaWRlbnRpZmllcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgZmluYWxSYW5nZTogbnVtYmVyW10gPSBbMHg0MCwgMHg3ZV0pOiBudW1iZXIge1xuICAgIGxldCByZXMgPSAwO1xuICAgIGlmIChpZC5wcmVmaXgpIHtcbiAgICAgIGlmIChpZC5wcmVmaXgubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ubHkgb25lIGJ5dGUgYXMgcHJlZml4IHN1cHBvcnRlZCcpO1xuICAgICAgfVxuICAgICAgcmVzID0gaWQucHJlZml4LmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAocmVzICYmIDB4M2MgPiByZXMgfHwgcmVzID4gMHgzZikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ByZWZpeCBtdXN0IGJlIGluIHJhbmdlIDB4M2MgLi4gMHgzZicpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaWQuaW50ZXJtZWRpYXRlcykge1xuICAgICAgaWYgKGlkLmludGVybWVkaWF0ZXMubGVuZ3RoID4gMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ubHkgdHdvIGJ5dGVzIGFzIGludGVybWVkaWF0ZXMgYXJlIHN1cHBvcnRlZCcpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZC5pbnRlcm1lZGlhdGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGludGVybWVkaWF0ZSA9IGlkLmludGVybWVkaWF0ZXMuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKDB4MjAgPiBpbnRlcm1lZGlhdGUgfHwgaW50ZXJtZWRpYXRlID4gMHgyZikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW50ZXJtZWRpYXRlIG11c3QgYmUgaW4gcmFuZ2UgMHgyMCAuLiAweDJmJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzIDw8PSA4O1xuICAgICAgICByZXMgfD0gaW50ZXJtZWRpYXRlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaWQuZmluYWwubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpbmFsIG11c3QgYmUgYSBzaW5nbGUgYnl0ZScpO1xuICAgIH1cbiAgICBjb25zdCBmaW5hbENvZGUgPSBpZC5maW5hbC5jaGFyQ29kZUF0KDApO1xuICAgIGlmIChmaW5hbFJhbmdlWzBdID4gZmluYWxDb2RlIHx8IGZpbmFsQ29kZSA+IGZpbmFsUmFuZ2VbMV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZmluYWwgbXVzdCBiZSBpbiByYW5nZSAke2ZpbmFsUmFuZ2VbMF19IC4uICR7ZmluYWxSYW5nZVsxXX1gKTtcbiAgICB9XG4gICAgcmVzIDw8PSA4O1xuICAgIHJlcyB8PSBmaW5hbENvZGU7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGlkZW50VG9TdHJpbmcoaWRlbnQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgcmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHdoaWxlIChpZGVudCkge1xuICAgICAgcmVzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpZGVudCAmIDB4RkYpKTtcbiAgICAgIGlkZW50ID4+PSA4O1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnJldmVyc2UoKS5qb2luKCcnKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRQcmludEhhbmRsZXIoaGFuZGxlcjogUHJpbnRIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX3ByaW50SGFuZGxlciA9IGhhbmRsZXI7XG4gIH1cbiAgcHVibGljIGNsZWFyUHJpbnRIYW5kbGVyKCk6IHZvaWQge1xuICAgIHRoaXMuX3ByaW50SGFuZGxlciA9IHRoaXMuX3ByaW50SGFuZGxlckZiO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogRXNjSGFuZGxlclR5cGUpOiBJRGlzcG9zYWJsZSB7XG4gICAgY29uc3QgaWRlbnQgPSB0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pO1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIGNsZWFyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pXSkgZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQsIFsweDMwLCAweDdlXSldO1xuICB9XG4gIHB1YmxpYyBzZXRFc2NIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgc2V0RXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nLCBoYW5kbGVyOiBFeGVjdXRlSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSA9IGhhbmRsZXI7XG4gIH1cbiAgcHVibGljIGNsZWFyRXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldKSBkZWxldGUgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV07XG4gIH1cbiAgcHVibGljIHNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IENzaUhhbmRsZXJUeXBlKTogSURpc3Bvc2FibGUge1xuICAgIGNvbnN0IGlkZW50ID0gdGhpcy5faWRlbnRpZmllcihpZCk7XG4gICAgaWYgKHRoaXMuX2NzaUhhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jc2lIYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9jc2lIYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBwdWJsaWMgY2xlYXJDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQpXSkgZGVsZXRlIHRoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQpXTtcbiAgfVxuICBwdWJsaWMgc2V0Q3NpSGFuZGxlckZhbGxiYWNrKGNhbGxiYWNrOiAoaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fY3NpSGFuZGxlckZiID0gY2FsbGJhY2s7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJEY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fZGNzUGFyc2VyLnJlZ2lzdGVySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGlkKSwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGNsZWFyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllcik6IHZvaWQge1xuICAgIHRoaXMuX2Rjc1BhcnNlci5jbGVhckhhbmRsZXIodGhpcy5faWRlbnRpZmllcihpZCkpO1xuICB9XG4gIHB1YmxpYyBzZXREY3NIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2Rjc1BhcnNlci5zZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9vc2NQYXJzZXIucmVnaXN0ZXJIYW5kbGVyKGlkZW50LCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9vc2NQYXJzZXIuY2xlYXJIYW5kbGVyKGlkZW50KTtcbiAgfVxuICBwdWJsaWMgc2V0T3NjSGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9vc2NQYXJzZXIuc2V0SGFuZGxlckZhbGxiYWNrKGhhbmRsZXIpO1xuICB9XG5cbiAgcHVibGljIHNldEVycm9ySGFuZGxlcihjYWxsYmFjazogKHN0YXRlOiBJUGFyc2luZ1N0YXRlKSA9PiBJUGFyc2luZ1N0YXRlKTogdm9pZCB7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gY2FsbGJhY2s7XG4gIH1cbiAgcHVibGljIGNsZWFyRXJyb3JIYW5kbGVyKCk6IHZvaWQge1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlciA9IHRoaXMuX2Vycm9ySGFuZGxlckZiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHBhcnNlciB0byBpbml0aWFsIHZhbHVlcy5cbiAgICpcbiAgICogVGhpcyBjYW4gYWxzbyBiZSB1c2VkIHRvIGxpZnQgdGhlIGltcHJvcGVyIGNvbnRpbnVhdGlvbiBlcnJvciBjb25kaXRpb25cbiAgICogd2hlbiBkZWFsaW5nIHdpdGggYXN5bmMgaGFuZGxlcnMuIFVzZSB0aGlzIG9ubHkgYXMgYSBsYXN0IHJlc29ydCB0byBzaWxlbmNlXG4gICAqIHRoYXQgZXJyb3Igd2hlbiB0aGUgdGVybWluYWwgaGFzIG5vIHBlbmRpbmcgZGF0YSB0byBiZSBwcm9jZXNzZWQuIE5vdGUgdGhhdFxuICAgKiB0aGUgaW50ZXJydXB0ZWQgYXN5bmMgaGFuZGxlciBtaWdodCBjb250aW51ZSBpdHMgd29yayBpbiB0aGUgZnV0dXJlIG1lc3NpbmdcbiAgICogdXAgdGhlIHRlcm1pbmFsIHN0YXRlIGV2ZW4gZnVydGhlci5cbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX29zY1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX2Rjc1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdKb2luU3RhdGUgPSAwO1xuICAgIC8vIGFib3J0IHBlbmRpbmcgY29udGludWF0aW9uIGZyb20gYXN5bmMgaGFuZGxlclxuICAgIC8vIEhlcmUgdGhlIFJFU0VUIHR5cGUgaW5kaWNhdGVzLCB0aGF0IHRoZSBuZXh0IHBhcnNlIGNhbGwgd2lsbFxuICAgIC8vIGlnbm9yZSBhbnkgc2F2ZWQgc3RhY2ssIGluc3RlYWQgY29udGludWVzIHN5bmMgd2l0aCBuZXh0IGNvZGVwb2ludCBmcm9tIEdST1VORFxuICAgIGlmICh0aGlzLl9wYXJzZVN0YWNrLnN0YXRlICE9PSBQYXJzZXJTdGFja1R5cGUuTk9ORSkge1xuICAgICAgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9IFBhcnNlclN0YWNrVHlwZS5SRVNFVDtcbiAgICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnMgPSBbXTsgLy8gYWxzbyByZWxlYXNlIGhhbmRsZXJzIHJlZlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBc3luYyBwYXJzZSBzdXBwb3J0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9wcmVzZXJ2ZVN0YWNrKFxuICAgIHN0YXRlOiBQYXJzZXJTdGFja1R5cGUsXG4gICAgaGFuZGxlcnM6IFJlc3VtYWJsZUhhbmRsZXJzVHlwZSxcbiAgICBoYW5kbGVyUG9zOiBudW1iZXIsXG4gICAgdHJhbnNpdGlvbjogbnVtYmVyLFxuICAgIGNodW5rUG9zOiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnMgPSBoYW5kbGVycztcbiAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MgPSBoYW5kbGVyUG9zO1xuICAgIHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgdGhpcy5fcGFyc2VTdGFjay5jaHVua1BvcyA9IGNodW5rUG9zO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIFVURjMyIGNvZGVwb2ludHMgaW4gYGRhdGFgIHVwIHRvIGBsZW5ndGhgLlxuICAgKlxuICAgKiBOb3RlOiBGb3Igc2V2ZXJhbCBhY3Rpb25zIHdpdGggaGlnaCBkYXRhIGxvYWQgdGhlIHBhcnNpbmcgaXMgb3B0aW1pemVkXG4gICAqIGJ5IHVzaW5nIGxvY2FsIHJlYWQgYWhlYWQgbG9vcHMgd2l0aCBoYXJkY29kZWQgY29uZGl0aW9ucyB0b1xuICAgKiBhdm9pZCBjb3N0bHkgdGFibGUgbG9va3Vwcy4gTWFrZSBzdXJlIHRoYXQgYW55IGNoYW5nZSBvZiB0YWJsZSB2YWx1ZXNcbiAgICogd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIGxvb3AgY29uZGl0aW9ucyBhcyB3ZWxsIGFuZCB2aWNlIHZlcnNhLlxuICAgKiBBZmZlY3RlZCBzdGF0ZXMvYWN0aW9uczpcbiAgICogLSBHUk9VTkQ6UFJJTlRcbiAgICogLSBDU0lfUEFSQU06UEFSQU1cbiAgICogLSBEQ1NfUEFSQU06UEFSQU1cbiAgICogLSBPU0NfU1RSSU5HOk9TQ19QVVRcbiAgICogLSBEQ1NfUEFTU1RIUk9VR0g6RENTX1BVVFxuICAgKlxuICAgKiBOb3RlIG9uIGFzeW5jaHJvbm91cyBoYW5kbGVyIHN1cHBvcnQ6XG4gICAqIEFueSBoYW5kbGVyIHJldHVybmluZyBhIHByb21pc2Ugd2lsbCBiZSB0cmVhdGVkIGFzIGFzeW5jaHJvbm91cy5cbiAgICogVG8ga2VlcCB0aGUgaW4tYmFuZCBibG9ja2luZyB3b3JraW5nIGZvciBhc3luYyBoYW5kbGVycywgYHBhcnNlYCBwYXVzZXMgZXhlY3V0aW9uLFxuICAgKiBjcmVhdGVzIGEgc3RhY2sgc2F2ZSBhbmQgcmV0dXJucyB0aGUgcHJvbWlzZSB0byB0aGUgY2FsbGVyLlxuICAgKiBGb3IgcHJvcGVyIGNvbnRpbnVhdGlvbiBvZiB0aGUgcGF1c2VkIHN0YXRlIGl0IGlzIGltcG9ydGFudFxuICAgKiB0byBhd2FpdCB0aGUgcHJvbWlzZSByZXNvbHZpbmcuIE9uIHJlc29sdmUgdGhlIHBhcnNlIG11c3QgYmUgcmVwZWF0ZWRcbiAgICogd2l0aCB0aGUgc2FtZSBjaHVuayBvZiBkYXRhIGFuZCB0aGUgcmVzb2x2ZWQgdmFsdWUgaW4gYHByb21pc2VSZXN1bHRgXG4gICAqIHVudGlsIG5vIHByb21pc2UgaXMgcmV0dXJuZWQuXG4gICAqXG4gICAqIEltcG9ydGFudDogV2l0aCBvbmx5IHN5bmMgaGFuZGxlcnMgZGVmaW5lZCwgcGFyc2luZyBpcyBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIGFzIHdlbGwuXG4gICAqIEFzIHNvb24gYXMgYW4gYXN5bmMgaGFuZGxlciBpcyBpbnZvbHZlZCwgc3luY2hyb25vdXMgcGFyc2luZyBpcyBub3QgcG9zc2libGUgYW55bW9yZS5cbiAgICpcbiAgICogQm9pbGVycGxhdGUgZm9yIHByb3BlciBwYXJzaW5nIG9mIG11bHRpcGxlIGNodW5rcyB3aXRoIGFzeW5jIGhhbmRsZXJzOlxuICAgKlxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGFzeW5jIGZ1bmN0aW9uIHBhcnNlTXVsdGlwbGVDaHVua3MoY2h1bmtzOiBVaW50MzJBcnJheVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAqICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICogICAgIGxldCByZXN1bHQ6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+O1xuICAgKiAgICAgbGV0IHByZXY6IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gICAqICAgICB3aGlsZSAocmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNodW5rLCBjaHVuay5sZW5ndGgsIHByZXYpKSB7XG4gICAqICAgICAgIHByZXYgPSBhd2FpdCByZXN1bHQ7XG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiAgIC8vIGZpbmlzaGVkIHBhcnNpbmcgYWxsIGNodW5rcy4uLlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHBhcnNlKGRhdGE6IFVpbnQzMkFycmF5LCBsZW5ndGg6IG51bWJlciwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pOiB2b2lkIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IGNvZGUgPSAwO1xuICAgIGxldCB0cmFuc2l0aW9uID0gMDtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBoYW5kbGVyUmVzdWx0OiB2b2lkIHwgYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgICAvLyByZXN1bWUgZnJvbSBhc3luYyBoYW5kbGVyXG4gICAgaWYgKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUpIHtcbiAgICAgIC8vIGFsbG93IHN5bmMgcGFyc2VyIHJlc2V0IGV2ZW4gaW4gY29udGludWF0aW9uIG1vZGVcbiAgICAgIC8vIE5vdGU6IGNhbiBiZSB1c2VkIHRvIHJlY292ZXIgcGFyc2VyIGZyb20gaW1wcm9wZXIgY29udGludWF0aW9uIGVycm9yIGJlbG93XG4gICAgICBpZiAodGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9PT0gUGFyc2VyU3RhY2tUeXBlLlJFU0VUKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPSBQYXJzZXJTdGFja1R5cGUuTk9ORTtcbiAgICAgICAgc3RhcnQgPSB0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zICsgMTsgLy8gY29udGludWUgd2l0aCBuZXh0IGNvZGVwb2ludCBpbiBHUk9VTkRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9taXNlUmVzdWx0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9PT0gUGFyc2VyU3RhY2tUeXBlLkZBSUwpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBSZWplY3QgZnVydGhlciBwYXJzaW5nIG9uIGltcHJvcGVyIGNvbnRpbnVhdGlvbiBhZnRlciBwYXVzaW5nLiBUaGlzIGlzIGEgcmVhbGx5IGJhZFxuICAgICAgICAgICAqIGNvbmRpdGlvbiB3aXRoIHNjcmV3ZWQgdXAgZXhlY3V0aW9uIG9yZGVyIGFuZCBwcm9sbHkgbWVzc2VkIHVwIHRlcm1pbmFsIHN0YXRlLFxuICAgICAgICAgICAqIHRoZXJlZm9yZSB3ZSBleGl0IGhhcmQgd2l0aCBhbiBleGNlcHRpb24gYW5kIHJlamVjdCBhbnkgZnVydGhlciBwYXJzaW5nLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogTm90ZTogV2l0aCBgVGVybWluYWwud3JpdGVgIHVzYWdlIHRoaXMgZXhjZXB0aW9uIHNob3VsZCBuZXZlciBvY2N1ciwgYXMgdGhlIHRvcCBsZXZlbFxuICAgICAgICAgICAqIGNhbGxzIGFyZSBndWFyYW50ZWVkIHRvIGhhbmRsZSBhc3luYyBjb25kaXRpb25zIHByb3Blcmx5LiBJZiB5b3UgZXZlciBlbmNvdW50ZXIgdGhpc1xuICAgICAgICAgICAqIGV4Y2VwdGlvbiBpbiB5b3VyIHRlcm1pbmFsIGludGVncmF0aW9uIGl0IGluZGljYXRlcywgdGhhdCB5b3UgaW5qZWN0ZWQgZGF0YSBjaHVua3MgdG9cbiAgICAgICAgICAgKiBgSW5wdXRIYW5kbGVyLnBhcnNlYCBvciBgRXNjYXBlU2VxdWVuY2VQYXJzZXIucGFyc2VgIHN5bmNocm9ub3VzbHkgd2l0aG91dCB3YWl0aW5nIGZvclxuICAgICAgICAgICAqIGNvbnRpbnVhdGlvbiBvZiBhIHJ1bm5pbmcgYXN5bmMgaGFuZGxlci5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEl0IGlzIHBvc3NpYmxlIHRvIGdldCByaWQgb2YgdGhpcyBlcnJvciBieSBjYWxsaW5nIGByZXNldGAuIEJ1dCBkb250IHJlbHkgb24gdGhhdCwgYXNcbiAgICAgICAgICAgKiB0aGUgcGVuZGluZyBhc3luYyBoYW5kbGVyIHN0aWxsIG1pZ2h0IG1lc3MgdXAgdGhlIHRlcm1pbmFsIGxhdGVyLiBJbnN0ZWFkIGZpeCB0aGVcbiAgICAgICAgICAgKiBmYXVsdHkgYXN5bmMgaGFuZGxpbmcsIHNvIHRoaXMgZXJyb3Igd2lsbCBub3QgYmUgdGhyb3duIGFueW1vcmUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9IFBhcnNlclN0YWNrVHlwZS5GQUlMO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW1wcm9wZXIgY29udGludWF0aW9uIGR1ZSB0byBwcmV2aW91cyBhc3luYyBoYW5kbGVyLCBnaXZpbmcgdXAgcGFyc2luZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgaGF2ZSB0byByZXN1bWUgdGhlIG9sZCBoYW5kbGVyIGxvb3AgaWY6XG4gICAgICAgIC8vIC0gcmV0dXJuIHZhbHVlIG9mIHRoZSBwcm9taXNlIHdhcyBgZmFsc2VgXG4gICAgICAgIC8vIC0gaGFuZGxlcnMgYXJlIG5vdCBleGhhdXN0ZWQgeWV0XG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycztcbiAgICAgICAgbGV0IGhhbmRsZXJQb3MgPSB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MgLSAxO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUpIHtcbiAgICAgICAgICBjYXNlIFBhcnNlclN0YWNrVHlwZS5DU0k6XG4gICAgICAgICAgICBpZiAocHJvbWlzZVJlc3VsdCA9PT0gZmFsc2UgJiYgaGFuZGxlclBvcyA+IC0xKSB7XG4gICAgICAgICAgICAgIGZvciAoOyBoYW5kbGVyUG9zID49IDA7IGhhbmRsZXJQb3MtLSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSAoaGFuZGxlcnMgYXMgQ3NpSGFuZGxlclR5cGVbXSlbaGFuZGxlclBvc10odGhpcy5fcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zID0gaGFuZGxlclBvcztcbiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycyA9IFtdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQYXJzZXJTdGFja1R5cGUuRVNDOlxuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQgPT09IGZhbHNlICYmIGhhbmRsZXJQb3MgPiAtMSkge1xuICAgICAgICAgICAgICBmb3IgKDsgaGFuZGxlclBvcyA+PSAwOyBoYW5kbGVyUG9zLS0pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gKGhhbmRsZXJzIGFzIEVzY0hhbmRsZXJUeXBlW10pW2hhbmRsZXJQb3NdKCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcyA9IGhhbmRsZXJQb3M7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgUGFyc2VyU3RhY2tUeXBlLkRDUzpcbiAgICAgICAgICAgIGNvZGUgPSBkYXRhW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdO1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2Rjc1BhcnNlci51bmhvb2soY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhLCBwcm9taXNlUmVzdWx0KTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZGUgPT09IDB4MWIpIHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgUGFyc2VyU3RhY2tUeXBlLk9TQzpcbiAgICAgICAgICAgIGNvZGUgPSBkYXRhW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdO1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX29zY1BhcnNlci5lbmQoY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhLCBwcm9taXNlUmVzdWx0KTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZGUgPT09IDB4MWIpIHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFudXAgYmVmb3JlIGNvbnRpbnVpbmcgd2l0aCB0aGUgbWFpbiBzeW5jIGxvb3BcbiAgICAgICAgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZSA9IFBhcnNlclN0YWNrVHlwZS5OT05FO1xuICAgICAgICBzdGFydCA9IHRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MgKyAxO1xuICAgICAgICB0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uICYgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9TVEFURV9NQVNLO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvbnRpbnVlIHdpdGggbWFpbiBzeW5jIGxvb3BcblxuICAgIC8vIHByb2Nlc3MgaW5wdXQgc3RyaW5nXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvZGUgPSBkYXRhW2ldO1xuXG4gICAgICAvLyBub3JtYWwgdHJhbnNpdGlvbiAmIGFjdGlvbiBsb29rdXBcbiAgICAgIHRyYW5zaXRpb24gPSB0aGlzLl90cmFuc2l0aW9ucy50YWJsZVt0aGlzLmN1cnJlbnRTdGF0ZSA8PCBUYWJsZUFjY2Vzcy5JTkRFWF9TVEFURV9TSElGVCB8IChjb2RlIDwgMHhhMCA/IGNvZGUgOiBOT05fQVNDSUlfUFJJTlRBQkxFKV07XG4gICAgICBzd2l0Y2ggKHRyYW5zaXRpb24gPj4gVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQpIHtcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uUFJJTlQ6XG4gICAgICAgICAgLy8gcmVhZCBhaGVhZCB3aXRoIGxvb3AgdW5yb2xsaW5nXG4gICAgICAgICAgLy8gTm90ZTogMHgyMCAoU1ApIGlzIGluY2x1ZGVkLCAweDdGIChERUwpIGlzIGV4Y2x1ZGVkXG4gICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyA7ICsraikge1xuICAgICAgICAgICAgaWYgKGogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCsraiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKytqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgrK2ogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVhFQ1VURTpcbiAgICAgICAgICBpZiAodGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2NvZGVdKSB0aGlzLl9leGVjdXRlSGFuZGxlcnNbY29kZV0oKTtcbiAgICAgICAgICBlbHNlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIoY29kZSk7XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdKb2luU3RhdGUgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5JR05PUkU6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkVSUk9SOlxuICAgICAgICAgIGNvbnN0IGluamVjdDogSVBhcnNpbmdTdGF0ZSA9IHRoaXMuX2Vycm9ySGFuZGxlcihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IGksXG4gICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZTogdGhpcy5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgIGNvbGxlY3Q6IHRoaXMuX2NvbGxlY3QsXG4gICAgICAgICAgICAgIHBhcmFtczogdGhpcy5fcGFyYW1zLFxuICAgICAgICAgICAgICBhYm9ydDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChpbmplY3QuYWJvcnQpIHJldHVybjtcbiAgICAgICAgICAvLyBpbmplY3QgdmFsdWVzOiBjdXJyZW50bHkgbm90IGltcGxlbWVudGVkXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSDpcbiAgICAgICAgICAvLyBUcmlnZ2VyIENTSSBIYW5kbGVyXG4gICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9jb2xsZWN0IDw8IDggfCBjb2RlXTtcbiAgICAgICAgICBsZXQgaiA9IGhhbmRsZXJzID8gaGFuZGxlcnMubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgLy8gdHJ1ZSBtZWFucyBzdWNjZXNzIGFuZCB0byBzdG9wIGJ1YmJsaW5nXG4gICAgICAgICAgICAvLyBhIHByb21pc2UgaW5kaWNhdGVzIGFuIGFzeW5jIGhhbmRsZXIgdGhhdCBuZWVkcyB0byBmaW5pc2ggYmVmb3JlIHByb2dyZXNzaW5nXG4gICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gaGFuZGxlcnNbal0odGhpcy5fcGFyYW1zKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKFBhcnNlclN0YWNrVHlwZS5DU0ksIGhhbmRsZXJzLCBqLCB0cmFuc2l0aW9uLCBpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5fY3NpSGFuZGxlckZiKHRoaXMuX2NvbGxlY3QgPDwgOCB8IGNvZGUsIHRoaXMuX3BhcmFtcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uUEFSQU06XG4gICAgICAgICAgLy8gaW5uZXIgbG9vcDogZGlnaXRzICgweDMwIC0gMHgzOSkgYW5kIDsgKDB4M2IpIGFuZCA6ICgweDNhKVxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIDB4M2I6XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAgLy8gWkRNXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgMHgzYTpcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkU3ViUGFyYW0oLTEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OiAgLy8gMHgzMCAtIDB4MzlcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkRGlnaXQoY29kZSAtIDQ4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlICgrK2kgPCBsZW5ndGggJiYgKGNvZGUgPSBkYXRhW2ldKSA+IDB4MmYgJiYgY29kZSA8IDB4M2MpO1xuICAgICAgICAgIGktLTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ09MTEVDVDpcbiAgICAgICAgICB0aGlzLl9jb2xsZWN0IDw8PSA4O1xuICAgICAgICAgIHRoaXMuX2NvbGxlY3QgfD0gY29kZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENIOlxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJzRXNjID0gdGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5fY29sbGVjdCA8PCA4IHwgY29kZV07XG4gICAgICAgICAgbGV0IGpqID0gaGFuZGxlcnNFc2MgPyBoYW5kbGVyc0VzYy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGpqID49IDA7IGpqLS0pIHtcbiAgICAgICAgICAgIC8vIHRydWUgbWVhbnMgc3VjY2VzcyBhbmQgdG8gc3RvcCBidWJibGluZ1xuICAgICAgICAgICAgLy8gYSBwcm9taXNlIGluZGljYXRlcyBhbiBhc3luYyBoYW5kbGVyIHRoYXQgbmVlZHMgdG8gZmluaXNoIGJlZm9yZSBwcm9ncmVzc2luZ1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IGhhbmRsZXJzRXNjW2pqXSgpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soUGFyc2VyU3RhY2tUeXBlLkVTQywgaGFuZGxlcnNFc2MsIGpqLCB0cmFuc2l0aW9uLCBpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqaiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2VzY0hhbmRsZXJGYih0aGlzLl9jb2xsZWN0IDw8IDggfCBjb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdKb2luU3RhdGUgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DTEVBUjpcbiAgICAgICAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfSE9PSzpcbiAgICAgICAgICB0aGlzLl9kY3NQYXJzZXIuaG9vayh0aGlzLl9jb2xsZWN0IDw8IDggfCBjb2RlLCB0aGlzLl9wYXJhbXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfUFVUOlxuICAgICAgICAgIC8vIGlubmVyIGxvb3AgLSBleGl0IERDU19QVVQ6IDB4MTgsIDB4MWEsIDB4MWIsIDB4N2YsIDB4ODAgLSAweDlmXG4gICAgICAgICAgLy8gdW5ob29rIHRyaWdnZXJlZCBieTogMHgxYiwgMHg5YyAoc3VjY2VzcykgYW5kIDB4MTgsIDB4MWEgKGFib3J0KVxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyArK2opIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pID09PSAweDE4IHx8IGNvZGUgPT09IDB4MWEgfHwgY29kZSA9PT0gMHgxYiB8fCAoY29kZSA+IDB4N2YgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2Rjc1BhcnNlci5wdXQoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LOlxuICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9kY3NQYXJzZXIudW5ob29rKGNvZGUgIT09IDB4MTggJiYgY29kZSAhPT0gMHgxYSk7XG4gICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soUGFyc2VyU3RhY2tUeXBlLkRDUywgW10sIDAsIHRyYW5zaXRpb24sIGkpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgICAgICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uT1NDX1NUQVJUOlxuICAgICAgICAgIHRoaXMuX29zY1BhcnNlci5zdGFydCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfUFVUOlxuICAgICAgICAgIC8vIGlubmVyIGxvb3A6IDB4MjAgKFNQKSBpbmNsdWRlZCwgMHg3RiAoREVMKSBpbmNsdWRlZFxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2YgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX29zY1BhcnNlci5wdXQoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfRU5EOlxuICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9vc2NQYXJzZXIuZW5kKGNvZGUgIT09IDB4MTggJiYgY29kZSAhPT0gMHgxYSk7XG4gICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlcnZlU3RhY2soUGFyc2VyU3RhY2tUeXBlLk9TQywgW10sIDAsIHRyYW5zaXRpb24sIGkpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgICAgICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gdHJhbnNpdGlvbiAmIFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fU1RBVEVfTUFTSztcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPc2NIYW5kbGVyLCBJSGFuZGxlckNvbGxlY3Rpb24sIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIsIElTdWJQYXJzZXJTdGFja1N0YXRlIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBPc2NTdGF0ZSwgUEFZTE9BRF9MSU1JVCB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IHV0ZjMyVG9TdHJpbmcgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5jb25zdCBFTVBUWV9IQU5ETEVSUzogSU9zY0hhbmRsZXJbXSA9IFtdO1xuXG5leHBvcnQgY2xhc3MgT3NjUGFyc2VyIGltcGxlbWVudHMgSU9zY1BhcnNlciB7XG4gIHByaXZhdGUgX3N0YXRlID0gT3NjU3RhdGUuU1RBUlQ7XG4gIHByaXZhdGUgX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICBwcml2YXRlIF9pZCA9IC0xO1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElPc2NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2hhbmRsZXJGYjogT3NjRmFsbGJhY2tIYW5kbGVyVHlwZSA9ICgpID0+IHsgfTtcbiAgcHJpdmF0ZSBfc3RhY2s6IElTdWJQYXJzZXJTdGFja1N0YXRlID0ge1xuICAgIHBhdXNlZDogZmFsc2UsXG4gICAgbG9vcFBvc2l0aW9uOiAwLFxuICAgIGZhbGxUaHJvdWdoOiBmYWxzZVxuICB9O1xuXG4gIHB1YmxpYyByZWdpc3RlckhhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSU9zY0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBwdWJsaWMgY2xlYXJIYW5kbGVyKGlkZW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGFuZGxlcnNbaWRlbnRdKSBkZWxldGUgdGhpcy5faGFuZGxlcnNbaWRlbnRdO1xuICB9XG4gIHB1YmxpYyBzZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogT3NjRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5faGFuZGxlckZiID0gKCkgPT4geyB9O1xuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIC8vIGZvcmNlIGNsZWFudXAgaGFuZGxlcnMgaWYgcGF5bG9hZCB3YXMgYWxyZWFkeSBzZW50XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5QQVlMT0FEKSB7XG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5fc3RhY2sucGF1c2VkID8gdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uIC0gMSA6IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0uZW5kKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RhY2sucGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gICAgdGhpcy5faWQgPSAtMTtcbiAgICB0aGlzLl9zdGF0ZSA9IE9zY1N0YXRlLlNUQVJUO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5fYWN0aXZlID0gdGhpcy5faGFuZGxlcnNbdGhpcy5faWRdIHx8IEVNUFRZX0hBTkRMRVJTO1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCAnU1RBUlQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0uc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9wdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdQVVQnLCB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0ucHV0KGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpOiB2b2lkIHtcbiAgICAvLyBhbHdheXMgcmVzZXQgbGVmdG92ZXIgaGFuZGxlcnNcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5JRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXQgZGF0YSB0byBjdXJyZW50IE9TQyBjb21tYW5kLlxuICAgKiBFeHBlY3RzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBPU0MgY29tbWFuZCBpbiB0aGUgZm9ybVxuICAgKiBPU0MgaWQgOyBwYXlsb2FkIFNUL0JFTFxuICAgKiBQYXlsb2FkIGNodW5rcyBhcmUgbm90IGZ1cnRoZXIgcHJvY2Vzc2VkIGFuZCBnZXRcbiAgICogZGlyZWN0bHkgcGFzc2VkIHRvIHRoZSBoYW5kbGVycy5cbiAgICovXG4gIHB1YmxpYyBwdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGRhdGFbc3RhcnQrK107XG4gICAgICAgIGlmIChjb2RlID09PSAweDNiKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5QQVlMT0FEO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGUgPCAweDMwIHx8IDB4MzkgPCBjb2RlKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5BQk9SVDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lkID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2lkID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pZCA9IHRoaXMuX2lkICogMTAgKyBjb2RlIC0gNDg7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCAmJiBlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIHRoaXMuX3B1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5kaWNhdGVzIGVuZCBvZiBhbiBPU0MgY29tbWFuZC5cbiAgICogV2hldGhlciB0aGUgT1NDIGdvdCBhYm9ydGVkIG9yIGZpbmlzaGVkIG5vcm1hbGx5XG4gICAqIGlzIGluZGljYXRlZCBieSBgc3VjY2Vzc2AuXG4gICAqL1xuICBwdWJsaWMgZW5kKHN1Y2Nlc3M6IGJvb2xlYW4sIHByb21pc2VSZXN1bHQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuU1RBUlQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZG8gbm90aGluZyBpZiBjb21tYW5kIHdhcyBmYXVsdHlcbiAgICBpZiAodGhpcy5fc3RhdGUgIT09IE9zY1N0YXRlLkFCT1JUKSB7XG4gICAgICAvLyBpZiB3ZSBhcmUgc3RpbGwgaW4gSUQgc3RhdGUgYW5kIGdldCBhbiBlYXJseSBlbmRcbiAgICAgIC8vIG1lYW5zIHRoYXQgdGhlIGNvbW1hbmQgaGFzIG5vIHBheWxvYWQgdGh1cyB3ZSBzdGlsbCBoYXZlXG4gICAgICAvLyB0byBhbm5vdW5jZSBTVEFSVCBhbmQgc2VuZCBFTkQgcmlnaHQgYWZ0ZXJcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuSUQpIHtcbiAgICAgICAgdGhpcy5fc3RhcnQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwgJ0VORCcsIHN1Y2Nlc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGhhbmRsZXJSZXN1bHQ6IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+ID0gZmFsc2U7XG4gICAgICAgIGxldCBqID0gdGhpcy5fYWN0aXZlLmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBmYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5fc3RhY2sucGF1c2VkKSB7XG4gICAgICAgICAgaiA9IHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiAtIDE7XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHByb21pc2VSZXN1bHQ7XG4gICAgICAgICAgZmFsbFRocm91Z2ggPSB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaDtcbiAgICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZhbGxUaHJvdWdoICYmIGhhbmRsZXJSZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fYWN0aXZlW2pdLmVuZChzdWNjZXNzKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gPSBqO1xuICAgICAgICAgICAgICB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgai0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFudXAgbGVmdCBvdmVyIGhhbmRsZXJzXG4gICAgICAgIC8vIHdlIGFsd2F5cyBoYXZlIHRvIGNhbGwgLmVuZCBmb3IgcHJvcGVyIGNsZWFudXAsXG4gICAgICAgIC8vIGhlcmUgd2UgdXNlIGBzdWNjZXNzYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgaGFuZGxlciBzaG91bGQgZXhlY3V0ZVxuICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fYWN0aXZlW2pdLmVuZChmYWxzZSk7XG4gICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uID0gajtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5TVEFSVDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbnQgY2xhc3MgdG8gYWxsb3cgYXR0YWNoaW5nIHN0cmluZyBiYXNlZCBoYW5kbGVyIGZ1bmN0aW9uc1xuICogYXMgT1NDIGhhbmRsZXJzLlxuICovXG5leHBvcnQgY2xhc3MgT3NjSGFuZGxlciBpbXBsZW1lbnRzIElPc2NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YSA9ICcnO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KSB7IH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhICs9IHV0ZjMyVG9TdHJpbmcoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgaWYgKHRoaXMuX2RhdGEubGVuZ3RoID4gUEFZTE9BRF9MSU1JVCkge1xuICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgdGhpcy5faGl0TGltaXQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbmQoc3VjY2VzczogYm9vbGVhbik6IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBsZXQgcmV0OiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChzdWNjZXNzKSB7XG4gICAgICByZXQgPSB0aGlzLl9oYW5kbGVyKHRoaXMuX2RhdGEpO1xuICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgLy8gbmVlZCB0byBob2xkIGRhdGEgdW50aWwgYHJldGAgZ290IHJlc29sdmVkXG4gICAgICAgIC8vIGRvbnQgY2FyZSBmb3IgZXJyb3JzLCBkYXRhIHdpbGwgYmUgZnJlZWQgYW55d2F5IG9uIG5leHQgc3RhcnRcbiAgICAgICAgcmV0dXJuIHJldC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJUGFyYW1zLCBQYXJhbXNBcnJheSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuXG4vLyBtYXggdmFsdWUgc3VwcG9ydGVkIGZvciBhIHNpbmdsZSBwYXJhbS9zdWJwYXJhbSAoY2xhbXBlZCB0byBwb3NpdGl2ZSBpbnQzMiByYW5nZSlcbmNvbnN0IE1BWF9WQUxVRSA9IDB4N0ZGRkZGRkY7XG4vLyBtYXggYWxsb3dlZCBzdWJwYXJhbXMgZm9yIGEgc2luZ2xlIHNlcXVlbmNlIChoYXJkY29kZWQgbGltaXRhdGlvbilcbmNvbnN0IE1BWF9TVUJQQVJBTVMgPSAyNTY7XG5cbi8qKlxuICogUGFyYW1zIHN0b3JhZ2UgY2xhc3MuXG4gKiBUaGlzIHR5cGUgaXMgdXNlZCBieSB0aGUgcGFyc2VyIHRvIGFjY3VtdWxhdGUgc2VxdWVuY2UgcGFyYW1ldGVycyBhbmQgc3ViIHBhcmFtZXRlcnNcbiAqIGFuZCB0cmFuc21pdCB0aGVtIHRvIHRoZSBpbnB1dCBoYW5kbGVyIGFjdGlvbnMuXG4gKlxuICogTk9URVM6XG4gKiAgLSBwYXJhbXMgb2JqZWN0IGZvciBhY3Rpb24gaGFuZGxlcnMgaXMgYm9ycm93ZWQsIHVzZSBgLnRvQXJyYXlgIG9yIGAuY2xvbmVgIHRvIGdldCBhIGNvcHlcbiAqICAtIG5ldmVyIHJlYWQgYmV5b25kIGBwYXJhbXMubGVuZ3RoIC0gMWAgKGxpa2VseSB0byBjb250YWluIGFyYml0cmFyeSBkYXRhKVxuICogIC0gYC5nZXRTdWJQYXJhbXNgIHJldHVybnMgYSBib3Jyb3dlZCB0eXBlZCBhcnJheSwgdXNlIGAuZ2V0U3ViUGFyYW1zQWxsYCBmb3IgY2xvbmVkIHN1YiBwYXJhbXNcbiAqICAtIGhhcmRjb2RlZCBsaW1pdGF0aW9uczpcbiAqICAgIC0gbWF4LiB2YWx1ZSBmb3IgYSBzaW5nbGUgKHN1YikgcGFyYW0gaXMgMl4zMSAtIDEgKGdyZWF0ZXIgdmFsdWVzIGFyZSBjbGFtcGVkIHRvIHRoYXQpXG4gKiAgICAtIG1heC4gMjU2IHN1YiBwYXJhbXMgcG9zc2libGVcbiAqICAgIC0gbmVnYXRpdmUgdmFsdWVzIGFyZSBub3QgYWxsb3dlZCBiZXNpZGUgLTEgKHBsYWNlaG9sZGVyIGZvciBkZWZhdWx0IHZhbHVlKVxuICpcbiAqIEFib3V0IFpETSAoWmVybyBEZWZhdWx0IE1vZGUpOlxuICogWkRNIGlzIG5vdCBvcmNoZXN0cmF0ZWQgYnkgdGhpcyBjbGFzcy4gSWYgdGhlIHBhcnNlciBpcyBpbiBaRE0sXG4gKiBpdCBzaG91bGQgYWRkIDAgZm9yIGVtcHR5IHBhcmFtcywgb3RoZXJ3aXNlIC0xLiBUaGlzIGRvZXMgbm90IGFwcGx5XG4gKiB0byBzdWJwYXJhbXMsIGVtcHR5IHN1YnBhcmFtcyBzaG91bGQgYWx3YXlzIGJlIGFkZGVkIHdpdGggLTEuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbXMgaW1wbGVtZW50cyBJUGFyYW1zIHtcbiAgLy8gcGFyYW1zIHN0b3JlIGFuZCBsZW5ndGhcbiAgcHVibGljIHBhcmFtczogSW50MzJBcnJheTtcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuXG4gIC8vIHN1YiBwYXJhbXMgc3RvcmUgYW5kIGxlbmd0aFxuICBwcm90ZWN0ZWQgX3N1YlBhcmFtczogSW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9zdWJQYXJhbXNMZW5ndGg6IG51bWJlcjtcblxuICAvLyBzdWIgcGFyYW1zIG9mZnNldHMgZnJvbSBwYXJhbTogcGFyYW0gaWR4IC0tPiBbc3RhcnQsIGVuZF0gb2Zmc2V0XG4gIHByaXZhdGUgX3N1YlBhcmFtc0lkeDogVWludDE2QXJyYXk7XG4gIHByaXZhdGUgX3JlamVjdERpZ2l0czogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcmVqZWN0U3ViRGlnaXRzOiBib29sZWFuO1xuICBwcml2YXRlIF9kaWdpdElzU3ViOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBgUGFyYW1zYCB0eXBlIGZyb20gSlMgYXJyYXkgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21BcnJheSh2YWx1ZXM6IFBhcmFtc0FycmF5KTogUGFyYW1zIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgUGFyYW1zKCk7XG4gICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICAvLyBza2lwIGxlYWRpbmcgc3ViIHBhcmFtc1xuICAgIGZvciAobGV0IGkgPSAoQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pKSA/IDEgOiAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHZhbHVlLmxlbmd0aDsgKytrKSB7XG4gICAgICAgICAgcGFyYW1zLmFkZFN1YlBhcmFtKHZhbHVlW2tdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zLmFkZFBhcmFtKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gbWF4TGVuZ3RoIG1heCBsZW5ndGggb2Ygc3RvcmFibGUgcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0gbWF4U3ViUGFyYW1zTGVuZ3RoIG1heCBsZW5ndGggb2Ygc3RvcmFibGUgc3ViIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtYXhMZW5ndGg6IG51bWJlciA9IDMyLCBwdWJsaWMgbWF4U3ViUGFyYW1zTGVuZ3RoOiBudW1iZXIgPSAzMikge1xuICAgIGlmIChtYXhTdWJQYXJhbXNMZW5ndGggPiBNQVhfU1VCUEFSQU1TKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heFN1YlBhcmFtc0xlbmd0aCBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMjU2Jyk7XG4gICAgfVxuICAgIHRoaXMucGFyYW1zID0gbmV3IEludDMyQXJyYXkobWF4TGVuZ3RoKTtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3ViUGFyYW1zID0gbmV3IEludDMyQXJyYXkobWF4U3ViUGFyYW1zTGVuZ3RoKTtcbiAgICB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPSAwO1xuICAgIHRoaXMuX3N1YlBhcmFtc0lkeCA9IG5ldyBVaW50MTZBcnJheShtYXhMZW5ndGgpO1xuICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9uZSBvYmplY3QuXG4gICAqL1xuICBwdWJsaWMgY2xvbmUoKTogUGFyYW1zIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBuZXcgUGFyYW1zKHRoaXMubWF4TGVuZ3RoLCB0aGlzLm1heFN1YlBhcmFtc0xlbmd0aCk7XG4gICAgbmV3UGFyYW1zLnBhcmFtcy5zZXQodGhpcy5wYXJhbXMpO1xuICAgIG5ld1BhcmFtcy5sZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtcy5zZXQodGhpcy5fc3ViUGFyYW1zKTtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtc0xlbmd0aCA9IHRoaXMuX3N1YlBhcmFtc0xlbmd0aDtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtc0lkeC5zZXQodGhpcy5fc3ViUGFyYW1zSWR4KTtcbiAgICBuZXdQYXJhbXMuX3JlamVjdERpZ2l0cyA9IHRoaXMuX3JlamVjdERpZ2l0cztcbiAgICBuZXdQYXJhbXMuX3JlamVjdFN1YkRpZ2l0cyA9IHRoaXMuX3JlamVjdFN1YkRpZ2l0cztcbiAgICBuZXdQYXJhbXMuX2RpZ2l0SXNTdWIgPSB0aGlzLl9kaWdpdElzU3ViO1xuICAgIHJldHVybiBuZXdQYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgSlMgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgcGFyYW1ldGVycyBhbmQgc3ViIHBhcmFtZXRlcnMuXG4gICAqIFRoZSBhcnJheSBpcyBzdHJ1Y3R1cmVkIGFzIGZvbGxvd3M6XG4gICAqICAgIHNlcXVlbmNlOiBcIjE7MjozOjQ7NTo6NlwiXG4gICAqICAgIGFycmF5ICAgOiBbMSwgMiwgWzMsIDRdLCA1LCBbLTEsIDZdXVxuICAgKi9cbiAgcHVibGljIHRvQXJyYXkoKTogUGFyYW1zQXJyYXkge1xuICAgIGNvbnN0IHJlczogUGFyYW1zQXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHJlcy5wdXNoKHRoaXMucGFyYW1zW2ldKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldID4+IDg7XG4gICAgICBjb25zdCBlbmQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gJiAweEZGO1xuICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgICByZXMucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9zdWJQYXJhbXMsIHN0YXJ0LCBlbmQpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0byBpbml0aWFsIGVtcHR5IHN0YXRlLlxuICAgKi9cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPSAwO1xuICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIGBQYXJhbXNgIG9ubHkgc3RvcmVzIHVwIHRvIGBtYXhMZW5ndGhgIHBhcmFtZXRlcnMsIGFueSBsYXRlclxuICAgKiBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLlxuICAgKiBOb3RlOiBWVCBkZXZpY2VzIG9ubHkgc3RvcmVkIHVwIHRvIDE2IHZhbHVlcywgeHRlcm0gc2VlbXMgdG9cbiAgICogc3RvcmUgdXAgdG8gMzAuXG4gICAqL1xuICBwdWJsaWMgYWRkUGFyYW0odmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5sZW5ndGggPj0gdGhpcy5tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoXSA9IHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA8PCA4IHwgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoO1xuICAgIHRoaXMucGFyYW1zW3RoaXMubGVuZ3RoKytdID0gdmFsdWUgPiBNQVhfVkFMVUUgPyBNQVhfVkFMVUUgOiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzdWIgcGFyYW1ldGVyIHZhbHVlLlxuICAgKiBUaGUgc3ViIHBhcmFtZXRlciBpcyBhdXRvbWF0aWNhbGx5IGFzc29jaWF0ZWQgd2l0aCB0aGUgbGFzdCBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIFRodXMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGFkZCBhIHN1YnBhcmFtZXRlciB3aXRob3V0IGFueSBwYXJhbWV0ZXIgYWRkZWQgeWV0LlxuICAgKiBgUGFyYW1zYCBvbmx5IHN0b3JlcyB1cCB0byBgc3ViUGFyYW1zTGVuZ3RoYCBzdWIgcGFyYW1ldGVycywgYW55IGxhdGVyXG4gICAqIHN1YiBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLlxuICAgKi9cbiAgcHVibGljIGFkZFN1YlBhcmFtKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaWdpdElzU3ViID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9yZWplY3REaWdpdHMgfHwgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoID49IHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKSB7XG4gICAgICB0aGlzLl9yZWplY3RTdWJEaWdpdHMgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPCAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZXMgbGVzc2VyIHRoYW4gLTEgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuICAgIHRoaXMuX3N1YlBhcmFtc1t0aGlzLl9zdWJQYXJhbXNMZW5ndGgrK10gPSB2YWx1ZSA+IE1BWF9WQUxVRSA/IE1BWF9WQUxVRSA6IHZhbHVlO1xuICAgIHRoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aCAtIDFdKys7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBwYXJhbWV0ZXIgYXQgaW5kZXggYGlkeGAgaGFzIHN1YiBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgcHVibGljIGhhc1N1YlBhcmFtcyhpZHg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoKHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdICYgMHhGRikgLSAodGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gPj4gOCkgPiAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc3ViIHBhcmFtZXRlcnMgZm9yIHBhcmFtZXRlciBhdCBpbmRleCBgaWR4YC5cbiAgICogTm90ZTogVGhlIHZhbHVlcyBhcmUgYm9ycm93ZWQsIHRodXMgeW91IG5lZWQgdG8gY29weVxuICAgKiB0aGUgdmFsdWVzIGlmIHlvdSBuZWVkIHRvIGhvbGQgdGhlbSBpbiBub25sb2NhbCBzY29wZS5cbiAgICovXG4gIHB1YmxpYyBnZXRTdWJQYXJhbXMoaWR4OiBudW1iZXIpOiBJbnQzMkFycmF5IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSA+PiA4O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdICYgMHhGRjtcbiAgICBpZiAoZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3ViUGFyYW1zLnN1YmFycmF5KHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHN1YiBwYXJhbWV0ZXJzIGFzIHtpZHg6IHN1YnBhcmFtc30gbWFwcGluZy5cbiAgICogTm90ZTogVGhlIHZhbHVlcyBhcmUgbm90IGJvcnJvd2VkLlxuICAgKi9cbiAgcHVibGljIGdldFN1YlBhcmFtc0FsbCgpOiB7W2lkeDogbnVtYmVyXTogSW50MzJBcnJheX0ge1xuICAgIGNvbnN0IHJlc3VsdDoge1tpZHg6IG51bWJlcl06IEludDMyQXJyYXl9ID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSA+PiA4O1xuICAgICAgY29uc3QgZW5kID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldICYgMHhGRjtcbiAgICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5fc3ViUGFyYW1zLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNpbmdsZSBkaWdpdCB2YWx1ZSB0byBjdXJyZW50IHBhcmFtZXRlci5cbiAgICogVGhpcyBpcyB1c2VkIGJ5IHRoZSBwYXJzZXIgdG8gYWNjb3VudCBkaWdpdHMgb24gYSBjaGFyIGJ5IGNoYXIgYmFzaXMuXG4gICAqL1xuICBwdWJsaWMgYWRkRGlnaXQodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBsZW5ndGg7XG4gICAgaWYgKHRoaXMuX3JlamVjdERpZ2l0c1xuICAgICAgfHwgIShsZW5ndGggPSB0aGlzLl9kaWdpdElzU3ViID8gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoIDogdGhpcy5sZW5ndGgpXG4gICAgICB8fCAodGhpcy5fZGlnaXRJc1N1YiAmJiB0aGlzLl9yZWplY3RTdWJEaWdpdHMpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLl9kaWdpdElzU3ViID8gdGhpcy5fc3ViUGFyYW1zIDogdGhpcy5wYXJhbXM7XG4gICAgY29uc3QgY3VyID0gc3RvcmVbbGVuZ3RoIC0gMV07XG4gICAgc3RvcmVbbGVuZ3RoIC0gMV0gPSB+Y3VyID8gTWF0aC5taW4oY3VyICogMTAgKyB2YWx1ZSwgTUFYX1ZBTFVFKSA6IHZhbHVlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJVGVybWluYWxBZGRvbiwgSURpc3Bvc2FibGUsIFRlcm1pbmFsIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcblxuZXhwb3J0IGludGVyZmFjZSBJTG9hZGVkQWRkb24ge1xuICBpbnN0YW5jZTogSVRlcm1pbmFsQWRkb247XG4gIGRpc3Bvc2U6ICgpID0+IHZvaWQ7XG4gIGlzRGlzcG9zZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBBZGRvbk1hbmFnZXIgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByb3RlY3RlZCBfYWRkb25zOiBJTG9hZGVkQWRkb25bXSA9IFtdO1xuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLl9hZGRvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuX2FkZG9uc1tpXS5pbnN0YW5jZS5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGxvYWRBZGRvbih0ZXJtaW5hbDogVGVybWluYWwsIGluc3RhbmNlOiBJVGVybWluYWxBZGRvbik6IHZvaWQge1xuICAgIGNvbnN0IGxvYWRlZEFkZG9uOiBJTG9hZGVkQWRkb24gPSB7XG4gICAgICBpbnN0YW5jZSxcbiAgICAgIGRpc3Bvc2U6IGluc3RhbmNlLmRpc3Bvc2UsXG4gICAgICBpc0Rpc3Bvc2VkOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fYWRkb25zLnB1c2gobG9hZGVkQWRkb24pO1xuICAgIGluc3RhbmNlLmRpc3Bvc2UgPSAoKSA9PiB0aGlzLl93cmFwcGVkQWRkb25EaXNwb3NlKGxvYWRlZEFkZG9uKTtcbiAgICBpbnN0YW5jZS5hY3RpdmF0ZSh0ZXJtaW5hbCBhcyBhbnkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfd3JhcHBlZEFkZG9uRGlzcG9zZShsb2FkZWRBZGRvbjogSUxvYWRlZEFkZG9uKTogdm9pZCB7XG4gICAgaWYgKGxvYWRlZEFkZG9uLmlzRGlzcG9zZWQpIHtcbiAgICAgIC8vIERvIG5vdGhpbmcgaWYgYWxyZWFkeSBkaXNwb3NlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2FkZG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2FkZG9uc1tpXSA9PT0gbG9hZGVkQWRkb24pIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZGlzcG9zZSBhbiBhZGRvbiB0aGF0IGhhcyBub3QgYmVlbiBsb2FkZWQnKTtcbiAgICB9XG4gICAgbG9hZGVkQWRkb24uaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgbG9hZGVkQWRkb24uZGlzcG9zZS5hcHBseShsb2FkZWRBZGRvbi5pbnN0YW5jZSk7XG4gICAgdGhpcy5fYWRkb25zLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXIgYXMgSUJ1ZmZlckFwaSwgSUJ1ZmZlckxpbmUgYXMgSUJ1ZmZlckxpbmVBcGksIElCdWZmZXJDZWxsIGFzIElCdWZmZXJDZWxsQXBpIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcbmltcG9ydCB7IElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IEJ1ZmZlckxpbmVBcGlWaWV3IH0gZnJvbSAnY29tbW9uL3B1YmxpYy9CdWZmZXJMaW5lQXBpVmlldyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyQXBpVmlldyBpbXBsZW1lbnRzIElCdWZmZXJBcGkge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9idWZmZXI6IElCdWZmZXIsXG4gICAgcHVibGljIHJlYWRvbmx5IHR5cGU6ICdub3JtYWwnIHwgJ2FsdGVybmF0ZSdcbiAgKSB7IH1cblxuICBwdWJsaWMgaW5pdChidWZmZXI6IElCdWZmZXIpOiBCdWZmZXJBcGlWaWV3IHtcbiAgICB0aGlzLl9idWZmZXIgPSBidWZmZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGN1cnNvclkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci55OyB9XG4gIHB1YmxpYyBnZXQgY3Vyc29yWCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLng7IH1cbiAgcHVibGljIGdldCB2aWV3cG9ydFkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci55ZGlzcDsgfVxuICBwdWJsaWMgZ2V0IGJhc2VZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueWJhc2U7IH1cbiAgcHVibGljIGdldCBsZW5ndGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGg7IH1cbiAgcHVibGljIGdldExpbmUoeTogbnVtYmVyKTogSUJ1ZmZlckxpbmVBcGkgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXIubGluZXMuZ2V0KHkpO1xuICAgIGlmICghbGluZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJMaW5lQXBpVmlldyhsaW5lKTtcbiAgfVxuICBwdWJsaWMgZ2V0TnVsbENlbGwoKTogSUJ1ZmZlckNlbGxBcGkgeyByZXR1cm4gbmV3IENlbGxEYXRhKCk7IH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJDZWxsIGFzIElCdWZmZXJDZWxsQXBpLCBJQnVmZmVyTGluZSBhcyBJQnVmZmVyTGluZUFwaSB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5cbmV4cG9ydCBjbGFzcyBCdWZmZXJMaW5lQXBpVmlldyBpbXBsZW1lbnRzIElCdWZmZXJMaW5lQXBpIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfbGluZTogSUJ1ZmZlckxpbmUpIHsgfVxuXG4gIHB1YmxpYyBnZXQgaXNXcmFwcGVkKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fbGluZS5pc1dyYXBwZWQ7IH1cbiAgcHVibGljIGdldCBsZW5ndGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2xpbmUubGVuZ3RoOyB9XG4gIHB1YmxpYyBnZXRDZWxsKHg6IG51bWJlciwgY2VsbD86IElCdWZmZXJDZWxsQXBpKTogSUJ1ZmZlckNlbGxBcGkgfCB1bmRlZmluZWQge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IHRoaXMuX2xpbmUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChjZWxsKSB7XG4gICAgICB0aGlzLl9saW5lLmxvYWRDZWxsKHgsIGNlbGwgYXMgSUNlbGxEYXRhKTtcbiAgICAgIHJldHVybiBjZWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbGluZS5sb2FkQ2VsbCh4LCBuZXcgQ2VsbERhdGEoKSk7XG4gIH1cbiAgcHVibGljIHRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodD86IGJvb2xlYW4sIHN0YXJ0Q29sdW1uPzogbnVtYmVyLCBlbmRDb2x1bW4/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9saW5lLnRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodCwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbik7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXIgYXMgSUJ1ZmZlckFwaSwgSUJ1ZmZlck5hbWVzcGFjZSBhcyBJQnVmZmVyTmFtZXNwYWNlQXBpIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcbmltcG9ydCB7IEJ1ZmZlckFwaVZpZXcgfSBmcm9tICdjb21tb24vcHVibGljL0J1ZmZlckFwaVZpZXcnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJQ29yZVRlcm1pbmFsIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIEJ1ZmZlck5hbWVzcGFjZUFwaSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQnVmZmVyTmFtZXNwYWNlQXBpIHtcbiAgcHJpdmF0ZSBfbm9ybWFsOiBCdWZmZXJBcGlWaWV3O1xuICBwcml2YXRlIF9hbHRlcm5hdGU6IEJ1ZmZlckFwaVZpZXc7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25CdWZmZXJDaGFuZ2UgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8SUJ1ZmZlckFwaT4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJ1ZmZlckNoYW5nZSA9IHRoaXMuX29uQnVmZmVyQ2hhbmdlLmV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElDb3JlVGVybWluYWwpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX25vcm1hbCA9IG5ldyBCdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwsICdub3JtYWwnKTtcbiAgICB0aGlzLl9hbHRlcm5hdGUgPSBuZXcgQnVmZmVyQXBpVmlldyh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0LCAnYWx0ZXJuYXRlJyk7XG4gICAgdGhpcy5fY29yZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKCkgPT4gdGhpcy5fb25CdWZmZXJDaGFuZ2UuZmlyZSh0aGlzLmFjdGl2ZSkpO1xuICB9XG4gIHB1YmxpYyBnZXQgYWN0aXZlKCk6IElCdWZmZXJBcGkge1xuICAgIGlmICh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlID09PSB0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKSB7IHJldHVybiB0aGlzLm5vcm1hbDsgfVxuICAgIGlmICh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlID09PSB0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KSB7IHJldHVybiB0aGlzLmFsdGVybmF0ZTsgfVxuICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIGJ1ZmZlciBpcyBuZWl0aGVyIG5vcm1hbCBub3IgYWx0ZXJuYXRlJyk7XG4gIH1cbiAgcHVibGljIGdldCBub3JtYWwoKTogSUJ1ZmZlckFwaSB7XG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbC5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpO1xuICB9XG4gIHB1YmxpYyBnZXQgYWx0ZXJuYXRlKCk6IElCdWZmZXJBcGkge1xuICAgIHJldHVybiB0aGlzLl9hbHRlcm5hdGUuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVBhcmFtcyB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUsIElGdW5jdGlvbklkZW50aWZpZXIsIElQYXJzZXIgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuaW1wb3J0IHsgSUNvcmVUZXJtaW5hbCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBQYXJzZXJBcGkgaW1wbGVtZW50cyBJUGFyc2VyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfY29yZTogSUNvcmVUZXJtaW5hbCkgeyB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCAocGFyYW1zOiBJUGFyYW1zKSA9PiBjYWxsYmFjayhwYXJhbXMudG9BcnJheSgpKSk7XG4gIH1cbiAgcHVibGljIGFkZENzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAocGFyYW1zOiAobnVtYmVyIHwgbnVtYmVyW10pW10pID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckRjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckRjc0hhbmRsZXIoaWQsIChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gY2FsbGJhY2soZGF0YSwgcGFyYW1zLnRvQXJyYXkoKSkpO1xuICB9XG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZywgcGFyYW06IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJEY3NIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJFc2NIYW5kbGVyKGlkLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgYWRkRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJFc2NIYW5kbGVyKGlkLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50LCBjYWxsYmFjayk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlVGVybWluYWwgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSVVuaWNvZGVIYW5kbGluZywgSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuXG5leHBvcnQgY2xhc3MgVW5pY29kZUFwaSBpbXBsZW1lbnRzIElVbmljb2RlSGFuZGxpbmcge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb3JlOiBJQ29yZVRlcm1pbmFsKSB7IH1cblxuICBwdWJsaWMgcmVnaXN0ZXIocHJvdmlkZXI6IElVbmljb2RlVmVyc2lvblByb3ZpZGVyKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS51bmljb2RlU2VydmljZS5yZWdpc3Rlcihwcm92aWRlcik7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHZlcnNpb25zKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS51bmljb2RlU2VydmljZS52ZXJzaW9ucztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlVmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb247XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZVZlcnNpb24odmVyc2lvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5fY29yZS51bmljb2RlU2VydmljZS5hY3RpdmVWZXJzaW9uID0gdmVyc2lvbjtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSwgSUJ1ZmZlckxpbmUsIFNjcm9sbFNvdXJjZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlclNldCc7XG5pbXBvcnQgeyBJQnVmZmVyLCBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNvbnN0IE1JTklNVU1fQ09MUyA9IDI7IC8vIExlc3MgdGhhbiAyIGNhbiBtZXNzIHdpdGggd2lkZSBjaGFyc1xuZXhwb3J0IGNvbnN0IE1JTklNVU1fUk9XUyA9IDE7XG5cbmV4cG9ydCBjbGFzcyBCdWZmZXJTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElCdWZmZXJTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHB1YmxpYyBjb2xzOiBudW1iZXI7XG4gIHB1YmxpYyByb3dzOiBudW1iZXI7XG4gIHB1YmxpYyBidWZmZXJzOiBJQnVmZmVyU2V0O1xuICAvKiogV2hldGhlciB0aGUgdXNlciBpcyBzY3JvbGxpbmcgKGxvY2tzIHRoZSBzY3JvbGwgcG9zaXRpb24pICovXG4gIHB1YmxpYyBpc1VzZXJTY3JvbGxpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlc2l6ZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjx7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXNpemUgPSB0aGlzLl9vblJlc2l6ZS5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25TY3JvbGwgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uU2Nyb2xsID0gdGhpcy5fb25TY3JvbGwuZXZlbnQ7XG5cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7IHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlOyB9XG5cbiAgLyoqIEFuIElCdWZmZXJsaW5lIHRvIGNsb25lL2NvcHkgZnJvbSBmb3IgbmV3IGJsYW5rIGxpbmVzICovXG4gIHByaXZhdGUgX2NhY2hlZEJsYW5rTGluZTogSUJ1ZmZlckxpbmUgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoQElPcHRpb25zU2VydmljZSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbHMgPSBNYXRoLm1heChvcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmNvbHMgfHwgMCwgTUlOSU1VTV9DT0xTKTtcbiAgICB0aGlzLnJvd3MgPSBNYXRoLm1heChvcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnJvd3MgfHwgMCwgTUlOSU1VTV9ST1dTKTtcbiAgICB0aGlzLmJ1ZmZlcnMgPSB0aGlzLnJlZ2lzdGVyKG5ldyBCdWZmZXJTZXQob3B0aW9uc1NlcnZpY2UsIHRoaXMpKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNvbHMgPSBjb2xzO1xuICAgIHRoaXMucm93cyA9IHJvd3M7XG4gICAgdGhpcy5idWZmZXJzLnJlc2l6ZShjb2xzLCByb3dzKTtcbiAgICAvLyBUT0RPOiBUaGlzIGRvZXNuJ3QgZmlyZSB3aGVuIHNjcm9sbGJhY2sgY2hhbmdlcyAtIGFkZCBhIHJlc2l6ZSBldmVudCB0byBCdWZmZXJTZXQgYW5kIGZvcndhcmRcbiAgICAvLyAgICAgICBldmVudFxuICAgIHRoaXMuX29uUmVzaXplLmZpcmUoeyBjb2xzLCByb3dzIH0pO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVycy5yZXNldCgpO1xuICAgIHRoaXMuaXNVc2VyU2Nyb2xsaW5nID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSB0ZXJtaW5hbCBkb3duIDEgcm93LCBjcmVhdGluZyBhIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBlcmFzZUF0dHIgVGhlIGF0dHJpYnV0ZSBkYXRhIHRvIHVzZSB0aGUgZm9yIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBpc1dyYXBwZWQgV2hldGhlciB0aGUgbmV3IGxpbmUgaXMgd3JhcHBlZCBmcm9tIHRoZSBwcmV2aW91cyBsaW5lLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbChlcmFzZUF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXG4gICAgbGV0IG5ld0xpbmU6IElCdWZmZXJMaW5lIHwgdW5kZWZpbmVkO1xuICAgIG5ld0xpbmUgPSB0aGlzLl9jYWNoZWRCbGFua0xpbmU7XG4gICAgaWYgKCFuZXdMaW5lIHx8IG5ld0xpbmUubGVuZ3RoICE9PSB0aGlzLmNvbHMgfHwgbmV3TGluZS5nZXRGZygwKSAhPT0gZXJhc2VBdHRyLmZnIHx8IG5ld0xpbmUuZ2V0QmcoMCkgIT09IGVyYXNlQXR0ci5iZykge1xuICAgICAgbmV3TGluZSA9IGJ1ZmZlci5nZXRCbGFua0xpbmUoZXJhc2VBdHRyLCBpc1dyYXBwZWQpO1xuICAgICAgdGhpcy5fY2FjaGVkQmxhbmtMaW5lID0gbmV3TGluZTtcbiAgICB9XG4gICAgbmV3TGluZS5pc1dyYXBwZWQgPSBpc1dyYXBwZWQ7XG5cbiAgICBjb25zdCB0b3BSb3cgPSBidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IGJvdHRvbVJvdyA9IGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b207XG5cbiAgICBpZiAoYnVmZmVyLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJ1ZmZlciBpcyBnb2luZyB0byBiZSB0cmltbWVkIGFmdGVyIGluc2VydGlvbi5cbiAgICAgIGNvbnN0IHdpbGxCdWZmZXJCZVRyaW1tZWQgPSBidWZmZXIubGluZXMuaXNGdWxsO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGxpbmUgdXNpbmcgdGhlIGZhc3Rlc3QgbWV0aG9kXG4gICAgICBpZiAoYm90dG9tUm93ID09PSBidWZmZXIubGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBpZiAod2lsbEJ1ZmZlckJlVHJpbW1lZCkge1xuICAgICAgICAgIGJ1ZmZlci5saW5lcy5yZWN5Y2xlKCkuY29weUZyb20obmV3TGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyLmxpbmVzLnB1c2gobmV3TGluZS5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShib3R0b21Sb3cgKyAxLCAwLCBuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGFkanVzdCB5YmFzZSBhbmQgeWRpc3Agd2hlbiB0aGUgYnVmZmVyIGlzIG5vdCB0cmltbWVkXG4gICAgICBpZiAoIXdpbGxCdWZmZXJCZVRyaW1tZWQpIHtcbiAgICAgICAgYnVmZmVyLnliYXNlKys7XG4gICAgICAgIC8vIE9ubHkgc2Nyb2xsIHRoZSB5ZGlzcCB3aXRoIHliYXNlIGlmIHRoZSB1c2VyIGhhcyBub3Qgc2Nyb2xsZWQgdXBcbiAgICAgICAgaWYgKCF0aGlzLmlzVXNlclNjcm9sbGluZykge1xuICAgICAgICAgIGJ1ZmZlci55ZGlzcCsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIHRoZSBidWZmZXIgaXMgZnVsbCBhbmQgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIHVwLCBrZWVwIHRoZSB0ZXh0XG4gICAgICAgIC8vIHN0YWJsZSB1bmxlc3MgeWRpc3AgaXMgcmlnaHQgYXQgdGhlIHRvcFxuICAgICAgICBpZiAodGhpcy5pc1VzZXJTY3JvbGxpbmcpIHtcbiAgICAgICAgICBidWZmZXIueWRpc3AgPSBNYXRoLm1heChidWZmZXIueWRpc3AgLSAxLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzY3JvbGxUb3AgaXMgbm9uLXplcm8gd2hpY2ggbWVhbnMgbm8gbGluZSB3aWxsIGJlIGdvaW5nIHRvIHRoZVxuICAgICAgLy8gc2Nyb2xsYmFjaywgaW5zdGVhZCB3ZSBjYW4ganVzdCBzaGlmdCB0aGVtIGluLXBsYWNlLlxuICAgICAgY29uc3Qgc2Nyb2xsUmVnaW9uSGVpZ2h0ID0gYm90dG9tUm93IC0gdG9wUm93ICsgMSAvKiBhcyBpdCdzIHplcm8tYmFzZWQgKi87XG4gICAgICBidWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0b3BSb3cgKyAxLCBzY3JvbGxSZWdpb25IZWlnaHQgLSAxLCAtMSk7XG4gICAgICBidWZmZXIubGluZXMuc2V0KGJvdHRvbVJvdywgbmV3TGluZS5jbG9uZSgpKTtcbiAgICB9XG5cbiAgICAvLyBNb3ZlIHRoZSB2aWV3cG9ydCB0byB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIgdW5sZXNzIHRoZSB1c2VyIGlzXG4gICAgLy8gc2Nyb2xsaW5nLlxuICAgIGlmICghdGhpcy5pc1VzZXJTY3JvbGxpbmcpIHtcbiAgICAgIGJ1ZmZlci55ZGlzcCA9IGJ1ZmZlci55YmFzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKGJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gZGlzcCBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIHNjcm9sbCBkb3duIChuZWdhdGl2ZSBzY3JvbGwgdXApLlxuICAgKiBAcGFyYW0gc3VwcHJlc3NTY3JvbGxFdmVudCBEb24ndCBlbWl0IHRoZSBzY3JvbGwgZXZlbnQgYXMgc2Nyb2xsTGluZXMuIFRoaXMgaXMgdXNlZFxuICAgKiB0byBhdm9pZCB1bndhbnRlZCBldmVudHMgYmVpbmcgaGFuZGxlZCBieSB0aGUgdmlld3BvcnQgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIHRoZVxuICAgKiB2aWV3cG9ydCBvcmlnaW5hbGx5LlxuICAgKi9cbiAgcHVibGljIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4sIHNvdXJjZT86IFNjcm9sbFNvdXJjZSk6IHZvaWQge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgIGlmIChkaXNwIDwgMCkge1xuICAgICAgaWYgKGJ1ZmZlci55ZGlzcCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmlzVXNlclNjcm9sbGluZyA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChkaXNwICsgYnVmZmVyLnlkaXNwID49IGJ1ZmZlci55YmFzZSkge1xuICAgICAgdGhpcy5pc1VzZXJTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRZZGlzcCA9IGJ1ZmZlci55ZGlzcDtcbiAgICBidWZmZXIueWRpc3AgPSBNYXRoLm1heChNYXRoLm1pbihidWZmZXIueWRpc3AgKyBkaXNwLCBidWZmZXIueWJhc2UpLCAwKTtcblxuICAgIC8vIE5vIGNoYW5nZSBvY2N1cnJlZCwgZG9uJ3QgdHJpZ2dlciBzY3JvbGwvcmVmcmVzaFxuICAgIGlmIChvbGRZZGlzcCA9PT0gYnVmZmVyLnlkaXNwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFzdXBwcmVzc1Njcm9sbEV2ZW50KSB7XG4gICAgICB0aGlzLl9vblNjcm9sbC5maXJlKGJ1ZmZlci55ZGlzcCk7XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcnNldFNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhcnNldFNlcnZpY2UgaW1wbGVtZW50cyBJQ2hhcnNldFNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGNoYXJzZXQ6IElDaGFyc2V0IHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgZ2xldmVsOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX2NoYXJzZXRzOiAoSUNoYXJzZXQgfCB1bmRlZmluZWQpW10gPSBbXTtcblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5jaGFyc2V0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2NoYXJzZXRzID0gW107XG4gICAgdGhpcy5nbGV2ZWwgPSAwO1xuICB9XG5cbiAgcHVibGljIHNldGdMZXZlbChnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmdsZXZlbCA9IGc7XG4gICAgdGhpcy5jaGFyc2V0ID0gdGhpcy5fY2hhcnNldHNbZ107XG4gIH1cblxuICBwdWJsaWMgc2V0Z0NoYXJzZXQoZzogbnVtYmVyLCBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuX2NoYXJzZXRzW2ddID0gY2hhcnNldDtcbiAgICBpZiAodGhpcy5nbGV2ZWwgPT09IGcpIHtcbiAgICAgIHRoaXMuY2hhcnNldCA9IGNoYXJzZXQ7XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJQ29yZU1vdXNlUHJvdG9jb2wsIElDb3JlTW91c2VFdmVudCwgQ29yZU1vdXNlRW5jb2RpbmcsIENvcmVNb3VzZUV2ZW50VHlwZSwgQ29yZU1vdXNlQnV0dG9uLCBDb3JlTW91c2VBY3Rpb24gfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuXG4vKipcbiAqIFN1cHBvcnRlZCBkZWZhdWx0IHByb3RvY29scy5cbiAqL1xuY29uc3QgREVGQVVMVF9QUk9UT0NPTFM6IHsgW2tleTogc3RyaW5nXTogSUNvcmVNb3VzZVByb3RvY29sIH0gPSB7XG4gIC8qKlxuICAgKiBOT05FXG4gICAqIEV2ZW50czogbm9uZVxuICAgKiBNb2RpZmllcnM6IG5vbmVcbiAgICovXG4gIE5PTkU6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5OT05FLFxuICAgIHJlc3RyaWN0OiAoKSA9PiBmYWxzZVxuICB9LFxuICAvKipcbiAgICogWDEwXG4gICAqIEV2ZW50czogbW91c2Vkb3duXG4gICAqIE1vZGlmaWVyczogbm9uZVxuICAgKi9cbiAgWDEwOiB7XG4gICAgZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUuRE9XTixcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gbm8gd2hlZWwsIG5vIG1vdmUsIG5vIHVwXG4gICAgICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCB8fCBlLmFjdGlvbiAhPT0gQ29yZU1vdXNlQWN0aW9uLkRPV04pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gbm8gbW9kaWZpZXJzXG4gICAgICBlLmN0cmwgPSBmYWxzZTtcbiAgICAgIGUuYWx0ID0gZmFsc2U7XG4gICAgICBlLnNoaWZ0ID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBWVDIwMFxuICAgKiBFdmVudHM6IG1vdXNlZG93biAvIG1vdXNldXAgLyB3aGVlbFxuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgVlQyMDA6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOIHwgQ29yZU1vdXNlRXZlbnRUeXBlLlVQIHwgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBubyBtb3ZlXG4gICAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIERSQUdcbiAgICogRXZlbnRzOiBtb3VzZWRvd24gLyBtb3VzZXVwIC8gd2hlZWwgLyBtb3VzZWRyYWdcbiAgICogTW9kaWZpZXJzOiBhbGxcbiAgICovXG4gIERSQUc6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOIHwgQ29yZU1vdXNlRXZlbnRUeXBlLlVQIHwgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMIHwgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcsXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIG5vIG1vdmUgd2l0aG91dCBidXR0b25cbiAgICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUgJiYgZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5OT05FKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEFOWVxuICAgKiBFdmVudHM6IGFsbCBtb3VzZSByZWxhdGVkIGV2ZW50c1xuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgQU5ZOiB7XG4gICAgZXZlbnRzOlxuICAgICAgQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUxcbiAgICAgIHwgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcgfCBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSxcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4gdHJ1ZVxuICB9XG59O1xuXG5jb25zdCBlbnVtIE1vZGlmaWVycyB7XG4gIFNISUZUID0gNCxcbiAgQUxUID0gOCxcbiAgQ1RSTCA9IDE2XG59XG5cbi8vIGhlbHBlciBmb3IgZGVmYXVsdCBlbmNvZGVycyB0byBnZW5lcmF0ZSB0aGUgZXZlbnQgY29kZS5cbmZ1bmN0aW9uIGV2ZW50Q29kZShlOiBJQ29yZU1vdXNlRXZlbnQsIGlzU0dSOiBib29sZWFuKTogbnVtYmVyIHtcbiAgbGV0IGNvZGUgPSAoZS5jdHJsID8gTW9kaWZpZXJzLkNUUkwgOiAwKSB8IChlLnNoaWZ0ID8gTW9kaWZpZXJzLlNISUZUIDogMCkgfCAoZS5hbHQgPyBNb2RpZmllcnMuQUxUIDogMCk7XG4gIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMKSB7XG4gICAgY29kZSB8PSA2NDtcbiAgICBjb2RlIHw9IGUuYWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGNvZGUgfD0gZS5idXR0b24gJiAzO1xuICAgIGlmIChlLmJ1dHRvbiAmIDQpIHtcbiAgICAgIGNvZGUgfD0gNjQ7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiAmIDgpIHtcbiAgICAgIGNvZGUgfD0gMTI4O1xuICAgIH1cbiAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICBjb2RlIHw9IENvcmVNb3VzZUFjdGlvbi5NT1ZFO1xuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5VUCAmJiAhaXNTR1IpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSAtIG9ubHkgU0dSIGNhbiByZXBvcnQgYnV0dG9uIG9uIHJlbGVhc2VcbiAgICAgIC8vIGFsbCBvdGhlcnMgaGF2ZSB0byBnbyB3aXRoIE5PTkVcbiAgICAgIGNvZGUgfD0gQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgfVxuICB9XG4gIHJldHVybiBjb2RlO1xufVxuXG5jb25zdCBTID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZGVmYXVsdCBlbmNvZGluZ3MuXG4gKi9cbmNvbnN0IERFRkFVTFRfRU5DT0RJTkdTOiB7IFtrZXk6IHN0cmluZ106IENvcmVNb3VzZUVuY29kaW5nIH0gPSB7XG4gIC8qKlxuICAgKiBERUZBVUxUIC0gQ1NJIE0gUGIgUHggUHlcbiAgICogU2luZ2xlIGJ5dGUgZW5jb2RpbmcgZm9yIGNvb3JkcyBhbmQgZXZlbnQgY29kZS5cbiAgICogQ2FuIGVuY29kZSB2YWx1ZXMgdXAgdG8gMjIzICgxLWJhc2VkKS5cbiAgICovXG4gIERFRkFVTFQ6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSBbZXZlbnRDb2RlKGUsIGZhbHNlKSArIDMyLCBlLmNvbCArIDMyLCBlLnJvdyArIDMyXTtcbiAgICAvLyBzdXByZXNzIG1vdXNlIHJlcG9ydCBpZiB3ZSBleGNlZWQgYWRkcmVzc2libGUgcmFuZ2VcbiAgICAvLyBOb3RlIHRoaXMgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSBieSBlbXVsYXRvcnNcbiAgICAvLyAtIHh0ZXJtOiAgICAgICAgIHNlbmRzIDA7MCBjb29yZHMgaW5zdGVhZFxuICAgIC8vIC0gdnRlLCBrb25zb2xlOiAgbm8gcmVwb3J0XG4gICAgaWYgKHBhcmFtc1swXSA+IDI1NSB8fCBwYXJhbXNbMV0gPiAyNTUgfHwgcGFyYW1zWzJdID4gMjU1KSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBgXFx4MWJbTSR7UyhwYXJhbXNbMF0pfSR7UyhwYXJhbXNbMV0pfSR7UyhwYXJhbXNbMl0pfWA7XG4gIH0sXG4gIC8qKlxuICAgKiBTR1IgLSBDU0kgPCBQYiA7IFB4IDsgUHkgTXxtXG4gICAqIE5vIGVuY29kaW5nIGxpbWl0YXRpb24uXG4gICAqIENhbiByZXBvcnQgYnV0dG9uIG9uIHJlbGVhc2UgYW5kIHdvcmtzIHdpdGggYSB3ZWxsIGZvcm1lZCBzZXF1ZW5jZS5cbiAgICovXG4gIFNHUjogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IGZpbmFsID0gKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uVVAgJiYgZS5idXR0b24gIT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkgPyAnbScgOiAnTSc7XG4gICAgcmV0dXJuIGBcXHgxYls8JHtldmVudENvZGUoZSwgdHJ1ZSl9OyR7ZS5jb2x9OyR7ZS5yb3d9JHtmaW5hbH1gO1xuICB9LFxuICBTR1JfUElYRUxTOiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgZmluYWwgPSAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5VUCAmJiBlLmJ1dHRvbiAhPT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMKSA/ICdtJyA6ICdNJztcbiAgICByZXR1cm4gYFxceDFiWzwke2V2ZW50Q29kZShlLCB0cnVlKX07JHtlLnh9OyR7ZS55fSR7ZmluYWx9YDtcbiAgfVxufTtcblxuLyoqXG4gKiBDb3JlTW91c2VTZXJ2aWNlXG4gKlxuICogUHJvdmlkZXMgbW91c2UgdHJhY2tpbmcgcmVwb3J0cyB3aXRoIGRpZmZlcmVudCBwcm90b2NvbHMgYW5kIGVuY29kaW5ncy5cbiAqICAtIHByb3RvY29sczogTk9ORSAoZGVmYXVsdCksIFgxMCwgVlQyMDAsIERSQUcsIEFOWVxuICogIC0gZW5jb2RpbmdzOiBERUZBVUxULCBTR1IgKFVURjgsIFVSWFZUIHJlbW92ZWQgaW4gIzI1MDcpXG4gKlxuICogQ3VzdG9tIHByb3RvY29scy9lbmNvZGluZ3MgY2FuIGJlIGFkZGVkIGJ5IGBhZGRQcm90b2NvbGAgLyBgYWRkRW5jb2RpbmdgLlxuICogVG8gYWN0aXZhdGUgYSBwcm90b2NvbC9lbmNvZGluZywgc2V0IGBhY3RpdmVQcm90b2NvbGAgLyBgYWN0aXZlRW5jb2RpbmdgLlxuICogU3dpdGNoaW5nIGEgcHJvdG9jb2wgd2lsbCBzZW5kIGEgbm90aWZpY2F0aW9uIGV2ZW50IGBvblByb3RvY29sQ2hhbmdlYFxuICogd2l0aCBhIGxpc3Qgb2YgbmVlZGVkIGV2ZW50cyB0byB0cmFjay5cbiAqXG4gKiBUaGUgc2VydmljZSBoYW5kbGVzIHRoZSBtb3VzZSB0cmFja2luZyBzdGF0ZSBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHNlbmRcbiAqIGEgdHJhY2tpbmcgcmVwb3J0IHRvIHRoZSBiYWNrZW5kIGJhc2VkIG9uIHByb3RvY29sIGFuZCBlbmNvZGluZyBsaW1pdGF0aW9ucy5cbiAqIFRvIHNlbmQgYSBtb3VzZSBldmVudCBjYWxsIGB0cmlnZ2VyTW91c2VFdmVudGAuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb3JlTW91c2VTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElDb3JlTW91c2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfcHJvdG9jb2xzOiB7IFtuYW1lOiBzdHJpbmddOiBJQ29yZU1vdXNlUHJvdG9jb2wgfSA9IHt9O1xuICBwcml2YXRlIF9lbmNvZGluZ3M6IHsgW25hbWU6IHN0cmluZ106IENvcmVNb3VzZUVuY29kaW5nIH0gPSB7fTtcbiAgcHJpdmF0ZSBfYWN0aXZlUHJvdG9jb2w6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9hY3RpdmVFbmNvZGluZzogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX2xhc3RFdmVudDogSUNvcmVNb3VzZUV2ZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25Qcm90b2NvbENoYW5nZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxDb3JlTW91c2VFdmVudFR5cGU+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Qcm90b2NvbENoYW5nZSA9ICB0aGlzLl9vblByb3RvY29sQ2hhbmdlLmV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNvcmVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvLyByZWdpc3RlciBkZWZhdWx0IHByb3RvY29scyBhbmQgZW5jb2RpbmdzXG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKERFRkFVTFRfUFJPVE9DT0xTKSkgdGhpcy5hZGRQcm90b2NvbChuYW1lLCBERUZBVUxUX1BST1RPQ09MU1tuYW1lXSk7XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKERFRkFVTFRfRU5DT0RJTkdTKSkgdGhpcy5hZGRFbmNvZGluZyhuYW1lLCBERUZBVUxUX0VOQ09ESU5HU1tuYW1lXSk7XG4gICAgLy8gY2FsbCByZXNldCB0byBzZXQgZGVmYXVsdHNcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgYWRkUHJvdG9jb2wobmFtZTogc3RyaW5nLCBwcm90b2NvbDogSUNvcmVNb3VzZVByb3RvY29sKTogdm9pZCB7XG4gICAgdGhpcy5fcHJvdG9jb2xzW25hbWVdID0gcHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgYWRkRW5jb2RpbmcobmFtZTogc3RyaW5nLCBlbmNvZGluZzogQ29yZU1vdXNlRW5jb2RpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9lbmNvZGluZ3NbbmFtZV0gPSBlbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlUHJvdG9jb2woKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFyZU1vdXNlRXZlbnRzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLmV2ZW50cyAhPT0gMDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlUHJvdG9jb2wobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm90b2NvbHNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBwcm90b2NvbCBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVQcm90b2NvbCA9IG5hbWU7XG4gICAgdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tuYW1lXS5ldmVudHMpO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVFbmNvZGluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVFbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlRW5jb2RpbmcobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9lbmNvZGluZ3NbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBlbmNvZGluZyBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVFbmNvZGluZyA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVQcm90b2NvbCA9ICdOT05FJztcbiAgICB0aGlzLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgIHRoaXMuX2xhc3RFdmVudCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBtb3VzZSBldmVudCB0byBiZSBzZW50LlxuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGV2ZW50IHBhc3NlZCBhbGwgcHJvdG9jb2wgcmVzdHJpY3Rpb25zIGFuZCBhIHJlcG9ydFxuICAgKiB3YXMgc2VudCwgb3RoZXJ3aXNlIGZhbHNlLiBUaGUgcmV0dXJuIHZhbHVlIG1heSBiZSB1c2VkIHRvIGRlY2lkZSB3aGV0aGVyXG4gICAqIHRoZSBkZWZhdWx0IGV2ZW50IGFjdGlvbiBpbiB0aGUgYm93c2VyIGNvbXBvbmVudCBzaG91bGQgYmUgb21pdHRlZC5cbiAgICpcbiAgICogTm90ZTogVGhlIG1ldGhvZCB3aWxsIGNoYW5nZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIGV2ZW50IG9iamVjdFxuICAgKiB0byBmdWxsZmlsbCBwcm90b2NvbCBhbmQgZW5jb2RpbmcgcmVzdHJpY3Rpb25zLlxuICAgKi9cbiAgcHVibGljIHRyaWdnZXJNb3VzZUV2ZW50KGU6IElDb3JlTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIHJhbmdlIGNoZWNrIGZvciBjb2wvcm93XG4gICAgaWYgKGUuY29sIDwgMCB8fCBlLmNvbCA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHNcbiAgICAgIHx8IGUucm93IDwgMCB8fCBlLnJvdyA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgbm9uc2Vuc2UgY29tYmluYXRpb25zIG9mIGJ1dHRvbiArIGFjdGlvblxuICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMICYmIGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5OT05FICYmIGUuYWN0aW9uICE9PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZS5idXR0b24gIT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCAmJiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5MRUZUIHx8IGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uUklHSFQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gcmVwb3J0IDEtYmFzZWQgY29vcmRzXG4gICAgZS5jb2wrKztcbiAgICBlLnJvdysrO1xuXG4gICAgLy8gZGVib3VuY2UgbW92ZSBldmVudHMgYXQgZ3JpZCBvciBwaXhlbCBsZXZlbFxuICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkVcbiAgICAgICYmIHRoaXMuX2xhc3RFdmVudFxuICAgICAgJiYgdGhpcy5fZXF1YWxFdmVudHModGhpcy5fbGFzdEV2ZW50LCBlLCB0aGlzLl9hY3RpdmVFbmNvZGluZyA9PT0gJ1NHUl9QSVhFTFMnKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IHByb3RvY29sIHJlc3RyaWN0aW9uc1xuICAgIGlmICghdGhpcy5fcHJvdG9jb2xzW3RoaXMuX2FjdGl2ZVByb3RvY29sXS5yZXN0cmljdChlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGVuY29kZSByZXBvcnQgYW5kIHNlbmRcbiAgICBjb25zdCByZXBvcnQgPSB0aGlzLl9lbmNvZGluZ3NbdGhpcy5fYWN0aXZlRW5jb2RpbmddKGUpO1xuICAgIGlmIChyZXBvcnQpIHtcbiAgICAgIC8vIGFsd2F5cyBzZW5kIERFRkFVTFQgYXMgYmluYXJ5IGRhdGFcbiAgICAgIGlmICh0aGlzLl9hY3RpdmVFbmNvZGluZyA9PT0gJ0RFRkFVTFQnKSB7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJCaW5hcnlFdmVudChyZXBvcnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChyZXBvcnQsIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2xhc3RFdmVudCA9IGU7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBleHBsYWluRXZlbnRzKGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlKTogeyBbZXZlbnQ6IHN0cmluZ106IGJvb2xlYW4gfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRvd246ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOKSxcbiAgICAgIHVwOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuVVApLFxuICAgICAgZHJhZzogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcpLFxuICAgICAgbW92ZTogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLk1PVkUpLFxuICAgICAgd2hlZWw6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfZXF1YWxFdmVudHMoZTE6IElDb3JlTW91c2VFdmVudCwgZTI6IElDb3JlTW91c2VFdmVudCwgcGl4ZWxzOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKHBpeGVscykge1xuICAgICAgaWYgKGUxLnggIT09IGUyLngpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChlMS55ICE9PSBlMi55KSByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlMS5jb2wgIT09IGUyLmNvbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKGUxLnJvdyAhPT0gZTIucm93KSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlMS5idXR0b24gIT09IGUyLmJ1dHRvbikgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5hY3Rpb24gIT09IGUyLmFjdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5jdHJsICE9PSBlMi5jdHJsKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmFsdCAhPT0gZTIuYWx0KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLnNoaWZ0ICE9PSBlMi5zaGlmdCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJ2NvbW1vbi9DbG9uZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElEZWNQcml2YXRlTW9kZXMsIElNb2RlcyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJTG9nU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgREVGQVVMVF9NT0RFUzogSU1vZGVzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGluc2VydE1vZGU6IGZhbHNlXG59KTtcblxuY29uc3QgREVGQVVMVF9ERUNfUFJJVkFURV9NT0RFUzogSURlY1ByaXZhdGVNb2RlcyA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBsaWNhdGlvbkN1cnNvcktleXM6IGZhbHNlLFxuICBhcHBsaWNhdGlvbktleXBhZDogZmFsc2UsXG4gIGJyYWNrZXRlZFBhc3RlTW9kZTogZmFsc2UsXG4gIG9yaWdpbjogZmFsc2UsXG4gIHJldmVyc2VXcmFwYXJvdW5kOiBmYWxzZSxcbiAgc2VuZEZvY3VzOiBmYWxzZSxcbiAgd3JhcGFyb3VuZDogdHJ1ZSAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG59KTtcblxuZXhwb3J0IGNsYXNzIENvcmVTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElDb3JlU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgaXNDdXJzb3JJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNDdXJzb3JIaWRkZW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIG1vZGVzOiBJTW9kZXM7XG4gIHB1YmxpYyBkZWNQcml2YXRlTW9kZXM6IElEZWNQcml2YXRlTW9kZXM7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25EYXRhID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRhdGEgPSB0aGlzLl9vbkRhdGEuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uVXNlcklucHV0ID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Vc2VySW5wdXQgPSB0aGlzLl9vblVzZXJJbnB1dC5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25CaW5hcnkgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQmluYXJ5ID0gdGhpcy5fb25CaW5hcnkuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFNjcm9sbFRvQm90dG9tID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b20gPSB0aGlzLl9vblJlcXVlc3RTY3JvbGxUb0JvdHRvbS5ldmVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElMb2dTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZXMgPSBjbG9uZShERUZBVUxUX01PREVTKTtcbiAgICB0aGlzLmRlY1ByaXZhdGVNb2RlcyA9IGNsb25lKERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVMpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubW9kZXMgPSBjbG9uZShERUZBVUxUX01PREVTKTtcbiAgICB0aGlzLmRlY1ByaXZhdGVNb2RlcyA9IGNsb25lKERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVMpO1xuICB9XG5cbiAgcHVibGljIHRyaWdnZXJEYXRhRXZlbnQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIC8vIFByZXZlbnRzIGFsbCBldmVudHMgdG8gcHR5IHByb2Nlc3MgaWYgc3RkaW4gaXMgZGlzYWJsZWRcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnB1dCBpcyBiZWluZyBzZW50IHRvIHRoZSB0ZXJtaW5hbCwgdGhlIHRlcm1pbmFsIHNob3VsZCBmb2N1cyB0aGUgcHJvbXB0LlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh3YXNVc2VySW5wdXQgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxPblVzZXJJbnB1dCAmJiBidWZmZXIueWJhc2UgIT09IGJ1ZmZlci55ZGlzcCkge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b20uZmlyZSgpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgb25Vc2VySW5wdXQgc28gbGlzdGVuZXJzIGNhbiByZWFjdCBhcyB3ZWxsIChlZy4gY2xlYXIgc2VsZWN0aW9uKVxuICAgIGlmICh3YXNVc2VySW5wdXQpIHtcbiAgICAgIHRoaXMuX29uVXNlcklucHV0LmZpcmUoKTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIG9uRGF0YSBBUElcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKGBzZW5kaW5nIGRhdGEgXCIke2RhdGF9XCJgLCAoKSA9PiBkYXRhLnNwbGl0KCcnKS5tYXAoZSA9PiBlLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB0aGlzLl9vbkRhdGEuZmlyZShkYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmlnZ2VyQmluYXJ5RXZlbnQoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYHNlbmRpbmcgYmluYXJ5IFwiJHtkYXRhfVwiYCwgKCkgPT4gZGF0YS5zcGxpdCgnJykubWFwKGUgPT4gZS5jaGFyQ29kZUF0KDApKSk7XG4gICAgdGhpcy5fb25CaW5hcnkuZmlyZShkYXRhKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyB3YXMgaGVhdmlseSBpbnNwaXJlZCBmcm9tIG1pY3Jvc29mdC92c2NvZGUncyBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0gKE1JVCkuXG4gKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBJSW5zdGFudGlhdGlvblNlcnZpY2UsIElTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeSc7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlQ29sbGVjdGlvbiB7XG5cbiAgcHJpdmF0ZSBfZW50cmllcyA9IG5ldyBNYXA8SVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueT4oKTtcblxuICBjb25zdHJ1Y3RvciguLi5lbnRyaWVzOiBbSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueV1bXSkge1xuICAgIGZvciAoY29uc3QgW2lkLCBzZXJ2aWNlXSBvZiBlbnRyaWVzKSB7XG4gICAgICB0aGlzLnNldChpZCwgc2VydmljZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldDxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+LCBpbnN0YW5jZTogVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2VudHJpZXMuZ2V0KGlkKTtcbiAgICB0aGlzLl9lbnRyaWVzLnNldChpZCwgaW5zdGFuY2UpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgZm9yRWFjaChjYWxsYmFjazogKGlkOiBJU2VydmljZUlkZW50aWZpZXI8YW55PiwgaW5zdGFuY2U6IGFueSkgPT4gYW55KTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fZW50cmllcy5lbnRyaWVzKCkpIHtcbiAgICAgIGNhbGxiYWNrKGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBoYXMoaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2VudHJpZXMuaGFzKGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQ8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmdldChpZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbnRpYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSUluc3RhbnRpYXRpb25TZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX3NlcnZpY2VzOiBTZXJ2aWNlQ29sbGVjdGlvbiA9IG5ldyBTZXJ2aWNlQ29sbGVjdGlvbigpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3NlcnZpY2VzLnNldChJSW5zdGFudGlhdGlvblNlcnZpY2UsIHRoaXMpO1xuICB9XG5cbiAgcHVibGljIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXJ2aWNlcy5zZXQoaWQsIGluc3RhbmNlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXJ2aWNlPFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4pOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fc2VydmljZXMuZ2V0KGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVJbnN0YW5jZTxUPihjdG9yOiBhbnksIC4uLmFyZ3M6IGFueVtdKTogVCB7XG4gICAgY29uc3Qgc2VydmljZURlcGVuZGVuY2llcyA9IGdldFNlcnZpY2VEZXBlbmRlbmNpZXMoY3Rvcikuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXG4gICAgY29uc3Qgc2VydmljZUFyZ3M6IGFueVtdID0gW107XG4gICAgZm9yIChjb25zdCBkZXBlbmRlbmN5IG9mIHNlcnZpY2VEZXBlbmRlbmNpZXMpIHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSB0aGlzLl9zZXJ2aWNlcy5nZXQoZGVwZW5kZW5jeS5pZCk7XG4gICAgICBpZiAoIXNlcnZpY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbY3JlYXRlSW5zdGFuY2VdICR7Y3Rvci5uYW1lfSBkZXBlbmRzIG9uIFVOS05PV04gc2VydmljZSAke2RlcGVuZGVuY3kuaWR9LmApO1xuICAgICAgfVxuICAgICAgc2VydmljZUFyZ3MucHVzaChzZXJ2aWNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNlcnZpY2VBcmdQb3MgPSBzZXJ2aWNlRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgPyBzZXJ2aWNlRGVwZW5kZW5jaWVzWzBdLmluZGV4IDogYXJncy5sZW5ndGg7XG5cbiAgICAvLyBjaGVjayBmb3IgYXJndW1lbnQgbWlzbWF0Y2hlcywgYWRqdXN0IHN0YXRpYyBhcmdzIGlmIG5lZWRlZFxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gZmlyc3RTZXJ2aWNlQXJnUG9zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFtjcmVhdGVJbnN0YW5jZV0gRmlyc3Qgc2VydmljZSBkZXBlbmRlbmN5IG9mICR7Y3Rvci5uYW1lfSBhdCBwb3NpdGlvbiAke2ZpcnN0U2VydmljZUFyZ1BvcyArIDF9IGNvbmZsaWN0cyB3aXRoICR7YXJncy5sZW5ndGh9IHN0YXRpYyBhcmd1bWVudHNgKTtcbiAgICB9XG5cbiAgICAvLyBub3cgY3JlYXRlIHRoZSBpbnN0YW5jZVxuICAgIHJldHVybiBuZXcgY3RvciguLi5bLi4uYXJncywgLi4uc2VydmljZUFyZ3NdKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUxvZ1NlcnZpY2UsIElPcHRpb25zU2VydmljZSwgTG9nTGV2ZWxFbnVtIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxudHlwZSBMb2dUeXBlID0gKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSkgPT4gdm9pZDtcblxuaW50ZXJmYWNlIElDb25zb2xlIHtcbiAgbG9nOiBMb2dUeXBlO1xuICBlcnJvcjogTG9nVHlwZTtcbiAgaW5mbzogTG9nVHlwZTtcbiAgdHJhY2U6IExvZ1R5cGU7XG4gIHdhcm46IExvZ1R5cGU7XG59XG5cbi8vIGNvbnNvbGUgaXMgYXZhaWxhYmxlIG9uIGJvdGggbm9kZS5qcyBhbmQgYnJvd3NlciBjb250ZXh0cyBidXQgdGhlIGNvbW1vblxuLy8gbW9kdWxlIGRvZXNuJ3QgZGVwZW5kIG9uIHRoZW0gc28gd2UgbmVlZCB0byBleHBsaWNpdGx5IGRlY2xhcmUgaXQuXG5kZWNsYXJlIGNvbnN0IGNvbnNvbGU6IElDb25zb2xlO1xuXG5jb25zdCBvcHRpb25zS2V5VG9Mb2dMZXZlbDogeyBba2V5OiBzdHJpbmddOiBMb2dMZXZlbEVudW0gfSA9IHtcbiAgdHJhY2U6IExvZ0xldmVsRW51bS5UUkFDRSxcbiAgZGVidWc6IExvZ0xldmVsRW51bS5ERUJVRyxcbiAgaW5mbzogTG9nTGV2ZWxFbnVtLklORk8sXG4gIHdhcm46IExvZ0xldmVsRW51bS5XQVJOLFxuICBlcnJvcjogTG9nTGV2ZWxFbnVtLkVSUk9SLFxuICBvZmY6IExvZ0xldmVsRW51bS5PRkZcbn07XG5cbmNvbnN0IExPR19QUkVGSVggPSAneHRlcm0uanM6ICc7XG5cbmV4cG9ydCBjbGFzcyBMb2dTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElMb2dTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX2xvZ0xldmVsOiBMb2dMZXZlbEVudW0gPSBMb2dMZXZlbEVudW0uT0ZGO1xuICBwdWJsaWMgZ2V0IGxvZ0xldmVsKCk6IExvZ0xldmVsRW51bSB7IHJldHVybiB0aGlzLl9sb2dMZXZlbDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdsb2dMZXZlbCcsICgpID0+IHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCkpKTtcblxuICAgIC8vIEZvciB0cmFjZSBsb2dnaW5nLCBhc3N1bWUgdGhlIGxhdGVzdCBjcmVhdGVkIGxvZyBzZXJ2aWNlIGlzIHZhbGlkXG4gICAgdHJhY2VMb2dnZXIgPSB0aGlzO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlTG9nTGV2ZWwoKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nTGV2ZWwgPSBvcHRpb25zS2V5VG9Mb2dMZXZlbFt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxvZ0xldmVsXTtcbiAgfVxuXG4gIHByaXZhdGUgX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMob3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25hbFBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbFBhcmFtc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcHRpb25hbFBhcmFtc1tpXSA9IG9wdGlvbmFsUGFyYW1zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbG9nKHR5cGU6IExvZ1R5cGUsIG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgdGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhvcHRpb25hbFBhcmFtcyk7XG4gICAgdHlwZS5jYWxsKGNvbnNvbGUsICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlciA/ICcnIDogTE9HX1BSRUZJWCkgKyBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgdHJhY2UobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLlRSQUNFKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LnRyYWNlLmJpbmQodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXIpID8/IGNvbnNvbGUubG9nLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5ERUJVRykge1xuICAgICAgdGhpcy5fbG9nKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyPy5kZWJ1Zy5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKSA/PyBjb25zb2xlLmxvZywgbWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5JTkZPKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LmluZm8uYmluZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcikgPz8gY29uc29sZS5pbmZvLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHdhcm4obWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLldBUk4pIHtcbiAgICAgIHRoaXMuX2xvZyh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcj8ud2Fybi5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKSA/PyBjb25zb2xlLndhcm4sIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLkVSUk9SKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LmVycm9yLmJpbmQodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXIpID8/IGNvbnNvbGUuZXJyb3IsIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cbn1cblxubGV0IHRyYWNlTG9nZ2VyOiBJTG9nU2VydmljZTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZUxvZ2dlcihsb2dnZXI6IElMb2dTZXJ2aWNlKTogdm9pZCB7XG4gIHRyYWNlTG9nZ2VyID0gbG9nZ2VyO1xufVxuXG4vKipcbiAqIEEgZGVjb3JhdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXV0b21hdGljYWxseSBsb2cgdHJhY2UgY2FsbHMgdG8gdGhlIGRlY29yYXRlZCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYWNlQ2FsbChfdGFyZ2V0OiBhbnksIGtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBhbnkpOiBhbnkge1xuICBpZiAodHlwZW9mIGRlc2NyaXB0b3IudmFsdWUgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQnKTtcbiAgfVxuICBjb25zdCBmbktleSA9ICd2YWx1ZSc7XG4gIGNvbnN0IGZuID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgZGVzY3JpcHRvcltmbktleV0gPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAvLyBFYXJseSBleGl0XG4gICAgaWYgKHRyYWNlTG9nZ2VyLmxvZ0xldmVsICE9PSBMb2dMZXZlbEVudW0uVFJBQ0UpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG5cbiAgICB0cmFjZUxvZ2dlci50cmFjZShgR2x5cGhSZW5kZXJlciMke2ZuLm5hbWV9KCR7YXJncy5tYXAoZSA9PiBKU09OLnN0cmluZ2lmeShlKSkuam9pbignLCAnKX0pYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgdHJhY2VMb2dnZXIudHJhY2UoYEdseXBoUmVuZGVyZXIjJHtmbi5uYW1lfSByZXR1cm5gLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgaXNNYWMgfSBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgQ3Vyc29yU3R5bGUsIElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEZvbnRXZWlnaHQsIElPcHRpb25zU2VydmljZSwgSVRlcm1pbmFsT3B0aW9ucyB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QVElPTlM6IFJlYWRvbmx5PFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+PiA9IHtcbiAgY29sczogODAsXG4gIHJvd3M6IDI0LFxuICBjdXJzb3JCbGluazogZmFsc2UsXG4gIGN1cnNvclN0eWxlOiAnYmxvY2snLFxuICBjdXJzb3JXaWR0aDogMSxcbiAgY3Vyc29ySW5hY3RpdmVTdHlsZTogJ291dGxpbmUnLFxuICBjdXN0b21HbHlwaHM6IHRydWUsXG4gIGRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzOiB0cnVlLFxuICBkb2N1bWVudE92ZXJyaWRlOiBudWxsLFxuICBmYXN0U2Nyb2xsTW9kaWZpZXI6ICdhbHQnLFxuICBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6IDUsXG4gIGZvbnRGYW1pbHk6ICdjb3VyaWVyLW5ldywgY291cmllciwgbW9ub3NwYWNlJyxcbiAgZm9udFNpemU6IDE1LFxuICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgZm9udFdlaWdodEJvbGQ6ICdib2xkJyxcbiAgaWdub3JlQnJhY2tldGVkUGFzdGVNb2RlOiBmYWxzZSxcbiAgbGluZUhlaWdodDogMS4wLFxuICBsZXR0ZXJTcGFjaW5nOiAwLFxuICBsaW5rSGFuZGxlcjogbnVsbCxcbiAgbG9nTGV2ZWw6ICdpbmZvJyxcbiAgbG9nZ2VyOiBudWxsLFxuICBzY3JvbGxiYWNrOiAxMDAwLFxuICBzY3JvbGxPblVzZXJJbnB1dDogdHJ1ZSxcbiAgc2Nyb2xsU2Vuc2l0aXZpdHk6IDEsXG4gIHNjcmVlblJlYWRlck1vZGU6IGZhbHNlLFxuICBzbW9vdGhTY3JvbGxEdXJhdGlvbjogMCxcbiAgbWFjT3B0aW9uSXNNZXRhOiBmYWxzZSxcbiAgbWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246IGZhbHNlLFxuICBtaW5pbXVtQ29udHJhc3RSYXRpbzogMSxcbiAgZGlzYWJsZVN0ZGluOiBmYWxzZSxcbiAgYWxsb3dQcm9wb3NlZEFwaTogZmFsc2UsXG4gIGFsbG93VHJhbnNwYXJlbmN5OiBmYWxzZSxcbiAgdGFiU3RvcFdpZHRoOiA4LFxuICB0aGVtZToge30sXG4gIHJlc2NhbGVPdmVybGFwcGluZ0dseXBoczogZmFsc2UsXG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDogaXNNYWMsXG4gIHdpbmRvd09wdGlvbnM6IHt9LFxuICB3aW5kb3dzTW9kZTogZmFsc2UsXG4gIHdpbmRvd3NQdHk6IHt9LFxuICB3b3JkU2VwYXJhdG9yOiAnICgpW117fVxcJyxcImAnLFxuICBhbHRDbGlja01vdmVzQ3Vyc29yOiB0cnVlLFxuICBjb252ZXJ0RW9sOiBmYWxzZSxcbiAgdGVybU5hbWU6ICd4dGVybScsXG4gIGNhbmNlbEV2ZW50czogZmFsc2UsXG4gIG92ZXJ2aWV3UnVsZXJXaWR0aDogMFxufTtcblxuY29uc3QgRk9OVF9XRUlHSFRfT1BUSU9OUzogRXh0cmFjdDxGb250V2VpZ2h0LCBzdHJpbmc+W10gPSBbJ25vcm1hbCcsICdib2xkJywgJzEwMCcsICcyMDAnLCAnMzAwJywgJzQwMCcsICc1MDAnLCAnNjAwJywgJzcwMCcsICc4MDAnLCAnOTAwJ107XG5cbmV4cG9ydCBjbGFzcyBPcHRpb25zU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJT3B0aW9uc1NlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIHJlYWRvbmx5IHJhd09wdGlvbnM6IFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+O1xuICBwdWJsaWMgb3B0aW9uczogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz47XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25PcHRpb25DaGFuZ2UgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8a2V5b2YgSVRlcm1pbmFsT3B0aW9ucz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbk9wdGlvbkNoYW5nZSA9IHRoaXMuX29uT3B0aW9uQ2hhbmdlLmV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8SVRlcm1pbmFsT3B0aW9ucz4pIHtcbiAgICBzdXBlcigpO1xuICAgIC8vIHNldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBlYWNoIG9wdGlvblxuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0geyAuLi5ERUZBVUxUX09QVElPTlMgfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgICBpZiAoa2V5IGluIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgZGVmYXVsdE9wdGlvbnNba2V5XSA9IHRoaXMuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24oa2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0IHVwIGdldHRlcnMgYW5kIHNldHRlcnMgZm9yIGVhY2ggb3B0aW9uXG4gICAgdGhpcy5yYXdPcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgdGhpcy5vcHRpb25zID0geyAuLi4gZGVmYXVsdE9wdGlvbnMgfTtcbiAgICB0aGlzLl9zZXR1cE9wdGlvbnMoKTtcblxuICAgIC8vIENsZWFyIG91dCBvcHRpb25zIHRoYXQgY291bGQgbGluayBvdXRzaWRlIHh0ZXJtLmpzIGFzIHRoZXkgY291bGQgZWFzaWx5IGNhdXNlIGFuIGVtYmVkZGVyXG4gICAgLy8gbWVtb3J5IGxlYWtcbiAgICB0aGlzLnJlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICB0aGlzLnJhd09wdGlvbnMubGlua0hhbmRsZXIgPSBudWxsO1xuICAgICAgdGhpcy5yYXdPcHRpb25zLmRvY3VtZW50T3ZlcnJpZGUgPSBudWxsO1xuICAgIH0pKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgcHVibGljIG9uU3BlY2lmaWNPcHRpb25DaGFuZ2U8VCBleHRlbmRzIGtleW9mIElUZXJtaW5hbE9wdGlvbnM+KGtleTogVCwgbGlzdGVuZXI6ICh2YWx1ZTogSVRlcm1pbmFsT3B0aW9uc1tUXSkgPT4gYW55KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLm9uT3B0aW9uQ2hhbmdlKGV2ZW50S2V5ID0+IHtcbiAgICAgIGlmIChldmVudEtleSA9PT0ga2V5KSB7XG4gICAgICAgIGxpc3RlbmVyKHRoaXMucmF3T3B0aW9uc1trZXldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgcHVibGljIG9uTXVsdGlwbGVPcHRpb25DaGFuZ2Uoa2V5czogKGtleW9mIElUZXJtaW5hbE9wdGlvbnMpW10sIGxpc3RlbmVyOiAoKSA9PiBhbnkpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMub25PcHRpb25DaGFuZ2UoZXZlbnRLZXkgPT4ge1xuICAgICAgaWYgKGtleXMuaW5kZXhPZihldmVudEtleSkgIT09IC0xKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXR1cE9wdGlvbnMoKTogdm9pZCB7XG4gICAgY29uc3QgZ2V0dGVyID0gKHByb3BOYW1lOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgICAgaWYgKCEocHJvcE5hbWUgaW4gREVGQVVMVF9PUFRJT05TKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG9wdGlvbiB3aXRoIGtleSBcIiR7cHJvcE5hbWV9XCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnJhd09wdGlvbnNbcHJvcE5hbWVdO1xuICAgIH07XG5cbiAgICBjb25zdCBzZXR0ZXIgPSAocHJvcE5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT4ge1xuICAgICAgaWYgKCEocHJvcE5hbWUgaW4gREVGQVVMVF9PUFRJT05TKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG9wdGlvbiB3aXRoIGtleSBcIiR7cHJvcE5hbWV9XCJgKTtcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSB0aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAvLyBEb24ndCBmaXJlIGFuIG9wdGlvbiBjaGFuZ2UgZXZlbnQgaWYgdGhleSBkaWRuJ3QgY2hhbmdlXG4gICAgICBpZiAodGhpcy5yYXdPcHRpb25zW3Byb3BOYW1lXSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5yYXdPcHRpb25zW3Byb3BOYW1lXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9vbk9wdGlvbkNoYW5nZS5maXJlKHByb3BOYW1lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiB0aGlzLnJhd09wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRlc2MgPSB7XG4gICAgICAgIGdldDogZ2V0dGVyLmJpbmQodGhpcywgcHJvcE5hbWUpLFxuICAgICAgICBzZXQ6IHNldHRlci5iaW5kKHRoaXMsIHByb3BOYW1lKVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9wdGlvbnMsIHByb3BOYW1lLCBkZXNjKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogYW55IHtcbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnY3Vyc29yU3R5bGUnOlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUgPSBERUZBVUxUX09QVElPTlNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQ3Vyc29yU3R5bGUodmFsdWUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7dmFsdWV9XCIgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yICR7a2V5fWApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnd29yZFNlcGFyYXRvcic6XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZm9udFdlaWdodCc6XG4gICAgICBjYXNlICdmb250V2VpZ2h0Qm9sZCc6XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIDEgPD0gdmFsdWUgJiYgdmFsdWUgPD0gMTAwMCkge1xuICAgICAgICAgIC8vIGFscmVhZHkgdmFsaWQgbnVtZXJpYyB2YWx1ZVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gRk9OVF9XRUlHSFRfT1BUSU9OUy5pbmNsdWRlcyh2YWx1ZSkgPyB2YWx1ZSA6IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2N1cnNvcldpZHRoJzpcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKTtcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIGZvciBib3VuZHMgY2hlY2tcbiAgICAgIGNhc2UgJ2xpbmVIZWlnaHQnOlxuICAgICAgY2FzZSAndGFiU3RvcFdpZHRoJzpcbiAgICAgICAgaWYgKHZhbHVlIDwgMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gMSwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtaW5pbXVtQ29udHJhc3RSYXRpbyc6XG4gICAgICAgIHZhbHVlID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjEsIE1hdGgucm91bmQodmFsdWUgKiAxMCkgLyAxMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Njcm9sbGJhY2snOlxuICAgICAgICB2YWx1ZSA9IE1hdGgubWluKHZhbHVlLCA0Mjk0OTY3Mjk1KTtcbiAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gMCwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmYXN0U2Nyb2xsU2Vuc2l0aXZpdHknOlxuICAgICAgY2FzZSAnc2Nyb2xsU2Vuc2l0aXZpdHknOlxuICAgICAgICBpZiAodmFsdWUgPD0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMCwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyb3dzJzpcbiAgICAgIGNhc2UgJ2NvbHMnOlxuICAgICAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gbXVzdCBiZSBudW1lcmljLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dpbmRvd3NQdHknOlxuICAgICAgICB2YWx1ZSA9IHZhbHVlID8/IHt9O1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQ3Vyc29yU3R5bGUodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBDdXJzb3JTdHlsZSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJ2Jsb2NrJyB8fCB2YWx1ZSA9PT0gJ3VuZGVybGluZScgfHwgdmFsdWUgPT09ICdiYXInO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3NjTGlua1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSU1hcmtlciwgSU9zY0xpbmtEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIE9zY0xpbmtTZXJ2aWNlIGltcGxlbWVudHMgSU9zY0xpbmtTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX25leHRJZCA9IDE7XG5cbiAgLyoqXG4gICAqIEEgbWFwIG9mIHRoZSBsaW5rIGtleSB0byBsaW5rIGVudHJ5LiBUaGlzIGlzIHVzZWQgdG8gYWRkIGFkZGl0aW9uYWwgbGluZXMgdG8gbGlua3Mgd2l0aCBpZHMuXG4gICAqL1xuICBwcml2YXRlIF9lbnRyaWVzV2l0aElkOiBNYXA8c3RyaW5nLCBJT3NjTGlua0VudHJ5V2l0aElkPiA9IG5ldyBNYXAoKTtcblxuICAvKipcbiAgICogQSBtYXAgb2YgdGhlIGxpbmsgaWQgdG8gdGhlIGxpbmsgZW50cnkuIFRoZSBcImxpbmsgaWRcIiAobnVtYmVyKSB3aGljaCBpcyB0aGUgbnVtYmVyaWNcbiAgICogcmVwcmVzZW50YXRpb24gb2YgYSB1bmlxdWUgbGluayBzaG91bGQgbm90IGJlIGNvbmZ1c2VkIHdpdGggXCJpZFwiIChzdHJpbmcpIHdoaWNoIGNvbWVzIGluIHdpdGhcbiAgICogYGlkPWAgaW4gdGhlIE9TQyBsaW5rJ3MgcHJvcGVydGllcy5cbiAgICovXG4gIHByaXZhdGUgX2RhdGFCeUxpbmtJZDogTWFwPG51bWJlciwgSU9zY0xpbmtFbnRyeU5vSWQgfCBJT3NjTGlua0VudHJ5V2l0aElkPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2VcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJMaW5rKGRhdGE6IElPc2NMaW5rRGF0YSk6IG51bWJlciB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG5cbiAgICAvLyBMaW5rcyB3aXRoIG5vIGlkIHdpbGwgb25seSBldmVyIGJlIHJlZ2lzdGVyZWQgYSBzaW5nbGUgdGltZVxuICAgIGlmIChkYXRhLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1hcmtlciA9IGJ1ZmZlci5hZGRNYXJrZXIoYnVmZmVyLnliYXNlICsgYnVmZmVyLnkpO1xuICAgICAgY29uc3QgZW50cnk6IElPc2NMaW5rRW50cnlOb0lkID0ge1xuICAgICAgICBkYXRhLFxuICAgICAgICBpZDogdGhpcy5fbmV4dElkKyssXG4gICAgICAgIGxpbmVzOiBbbWFya2VyXVxuICAgICAgfTtcbiAgICAgIG1hcmtlci5vbkRpc3Bvc2UoKCkgPT4gdGhpcy5fcmVtb3ZlTWFya2VyRnJvbUxpbmsoZW50cnksIG1hcmtlcikpO1xuICAgICAgdGhpcy5fZGF0YUJ5TGlua0lkLnNldChlbnRyeS5pZCwgZW50cnkpO1xuICAgICAgcmV0dXJuIGVudHJ5LmlkO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgbGluZSB0byB0aGUgbGluayBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGNhc3REYXRhID0gZGF0YSBhcyBSZXF1aXJlZDxJT3NjTGlua0RhdGE+O1xuICAgIGNvbnN0IGtleSA9IHRoaXMuX2dldEVudHJ5SWRLZXkoY2FzdERhdGEpO1xuICAgIGNvbnN0IG1hdGNoID0gdGhpcy5fZW50cmllc1dpdGhJZC5nZXQoa2V5KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHRoaXMuYWRkTGluZVRvTGluayhtYXRjaC5pZCwgYnVmZmVyLnliYXNlICsgYnVmZmVyLnkpO1xuICAgICAgcmV0dXJuIG1hdGNoLmlkO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbGlua1xuICAgIGNvbnN0IG1hcmtlciA9IGJ1ZmZlci5hZGRNYXJrZXIoYnVmZmVyLnliYXNlICsgYnVmZmVyLnkpO1xuICAgIGNvbnN0IGVudHJ5OiBJT3NjTGlua0VudHJ5V2l0aElkID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRJZCsrLFxuICAgICAga2V5OiB0aGlzLl9nZXRFbnRyeUlkS2V5KGNhc3REYXRhKSxcbiAgICAgIGRhdGE6IGNhc3REYXRhLFxuICAgICAgbGluZXM6IFttYXJrZXJdXG4gICAgfTtcbiAgICBtYXJrZXIub25EaXNwb3NlKCgpID0+IHRoaXMuX3JlbW92ZU1hcmtlckZyb21MaW5rKGVudHJ5LCBtYXJrZXIpKTtcbiAgICB0aGlzLl9lbnRyaWVzV2l0aElkLnNldChlbnRyeS5rZXksIGVudHJ5KTtcbiAgICB0aGlzLl9kYXRhQnlMaW5rSWQuc2V0KGVudHJ5LmlkLCBlbnRyeSk7XG4gICAgcmV0dXJuIGVudHJ5LmlkO1xuICB9XG5cbiAgcHVibGljIGFkZExpbmVUb0xpbmsobGlua0lkOiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5fZGF0YUJ5TGlua0lkLmdldChsaW5rSWQpO1xuICAgIGlmICghZW50cnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGVudHJ5LmxpbmVzLmV2ZXJ5KGUgPT4gZS5saW5lICE9PSB5KSkge1xuICAgICAgY29uc3QgbWFya2VyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuYWRkTWFya2VyKHkpO1xuICAgICAgZW50cnkubGluZXMucHVzaChtYXJrZXIpO1xuICAgICAgbWFya2VyLm9uRGlzcG9zZSgoKSA9PiB0aGlzLl9yZW1vdmVNYXJrZXJGcm9tTGluayhlbnRyeSwgbWFya2VyKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldExpbmtEYXRhKGxpbmtJZDogbnVtYmVyKTogSU9zY0xpbmtEYXRhIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YUJ5TGlua0lkLmdldChsaW5rSWQpPy5kYXRhO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0RW50cnlJZEtleShsaW5rRGF0YTogUmVxdWlyZWQ8SU9zY0xpbmtEYXRhPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2xpbmtEYXRhLmlkfTs7JHtsaW5rRGF0YS51cml9YDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZU1hcmtlckZyb21MaW5rKGVudHJ5OiBJT3NjTGlua0VudHJ5Tm9JZCB8IElPc2NMaW5rRW50cnlXaXRoSWQsIG1hcmtlcjogSU1hcmtlcik6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gZW50cnkubGluZXMuaW5kZXhPZihtYXJrZXIpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZW50cnkubGluZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBpZiAoZW50cnkubGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoZW50cnkuZGF0YS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2VudHJpZXNXaXRoSWQuZGVsZXRlKChlbnRyeSBhcyBJT3NjTGlua0VudHJ5V2l0aElkKS5rZXkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGF0YUJ5TGlua0lkLmRlbGV0ZShlbnRyeS5pZCk7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBJT3NjTGlua0VudHJ5PFQgZXh0ZW5kcyBJT3NjTGlua0RhdGE+IHtcbiAgZGF0YTogVDtcbiAgaWQ6IG51bWJlcjtcbiAgbGluZXM6IElNYXJrZXJbXTtcbn1cblxuaW50ZXJmYWNlIElPc2NMaW5rRW50cnlOb0lkIGV4dGVuZHMgSU9zY0xpbmtFbnRyeTxJT3NjTGlua0RhdGE+IHtcbn1cblxuaW50ZXJmYWNlIElPc2NMaW5rRW50cnlXaXRoSWQgZXh0ZW5kcyBJT3NjTGlua0VudHJ5PFJlcXVpcmVkPElPc2NMaW5rRGF0YT4+IHtcbiAga2V5OiBzdHJpbmc7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIHdhcyBoZWF2aWx5IGluc3BpcmVkIGZyb20gbWljcm9zb2Z0L3ZzY29kZSdzIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbSAoTUlUKS5cbiAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IERJX1RBUkdFVCA9ICdkaSR0YXJnZXQnO1xuY29uc3QgRElfREVQRU5ERU5DSUVTID0gJ2RpJGRlcGVuZGVuY2llcyc7XG5cbmV4cG9ydCBjb25zdCBzZXJ2aWNlUmVnaXN0cnk6IE1hcDxzdHJpbmcsIElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+PiA9IG5ldyBNYXAoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VEZXBlbmRlbmNpZXMoY3RvcjogYW55KTogeyBpZDogSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGluZGV4OiBudW1iZXIsIG9wdGlvbmFsOiBib29sZWFuIH1bXSB7XG4gIHJldHVybiBjdG9yW0RJX0RFUEVOREVOQ0lFU10gfHwgW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZWNvcmF0b3I8VD4oaWQ6IHN0cmluZyk6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiB7XG4gIGlmIChzZXJ2aWNlUmVnaXN0cnkuaGFzKGlkKSkge1xuICAgIHJldHVybiBzZXJ2aWNlUmVnaXN0cnkuZ2V0KGlkKSE7XG4gIH1cblxuICBjb25zdCBkZWNvcmF0b3I6IGFueSA9IGZ1bmN0aW9uICh0YXJnZXQ6IEZ1bmN0aW9uLCBrZXk6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IGFueSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQElTZXJ2aWNlTmFtZS1kZWNvcmF0b3IgY2FuIG9ubHkgYmUgdXNlZCB0byBkZWNvcmF0ZSBhIHBhcmFtZXRlcicpO1xuICAgIH1cblxuICAgIHN0b3JlU2VydmljZURlcGVuZGVuY3koZGVjb3JhdG9yLCB0YXJnZXQsIGluZGV4KTtcbiAgfTtcblxuICBkZWNvcmF0b3IudG9TdHJpbmcgPSAoKSA9PiBpZDtcblxuICBzZXJ2aWNlUmVnaXN0cnkuc2V0KGlkLCBkZWNvcmF0b3IpO1xuICByZXR1cm4gZGVjb3JhdG9yO1xufVxuXG5mdW5jdGlvbiBzdG9yZVNlcnZpY2VEZXBlbmRlbmN5KGlkOiBGdW5jdGlvbiwgdGFyZ2V0OiBGdW5jdGlvbiwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICBpZiAoKHRhcmdldCBhcyBhbnkpW0RJX1RBUkdFVF0gPT09IHRhcmdldCkge1xuICAgICh0YXJnZXQgYXMgYW55KVtESV9ERVBFTkRFTkNJRVNdLnB1c2goeyBpZCwgaW5kZXggfSk7XG4gIH0gZWxzZSB7XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX0RFUEVOREVOQ0lFU10gPSBbeyBpZCwgaW5kZXggfV07XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX1RBUkdFVF0gPSB0YXJnZXQ7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElFdmVudCwgSUV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUJ1ZmZlciwgSUJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSURlY1ByaXZhdGVNb2RlcywgSUNvcmVNb3VzZUV2ZW50LCBDb3JlTW91c2VFbmNvZGluZywgSUNvcmVNb3VzZVByb3RvY29sLCBDb3JlTW91c2VFdmVudFR5cGUsIElDaGFyc2V0LCBJV2luZG93T3B0aW9ucywgSU1vZGVzLCBJQXR0cmlidXRlRGF0YSwgU2Nyb2xsU291cmNlLCBJRGlzcG9zYWJsZSwgSUNvbG9yLCBDdXJzb3JTdHlsZSwgQ3Vyc29ySW5hY3RpdmVTdHlsZSwgSU9zY0xpbmtEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IGNyZWF0ZURlY29yYXRvciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlUmVnaXN0cnknO1xuaW1wb3J0IHsgSURlY29yYXRpb25PcHRpb25zLCBJRGVjb3JhdGlvbiwgSUxpbmtIYW5kbGVyLCBJV2luZG93c1B0eSwgSUxvZ2dlciB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5cbmV4cG9ydCBjb25zdCBJQnVmZmVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQnVmZmVyU2VydmljZT4oJ0J1ZmZlclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBjb2xzOiBudW1iZXI7XG4gIHJlYWRvbmx5IHJvd3M6IG51bWJlcjtcbiAgcmVhZG9ubHkgYnVmZmVyOiBJQnVmZmVyO1xuICByZWFkb25seSBidWZmZXJzOiBJQnVmZmVyU2V0O1xuICBpc1VzZXJTY3JvbGxpbmc6IGJvb2xlYW47XG4gIG9uUmVzaXplOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PjtcbiAgb25TY3JvbGw6IElFdmVudDxudW1iZXI+O1xuICBzY3JvbGwoZXJhc2VBdHRyOiBJQXR0cmlidXRlRGF0YSwgaXNXcmFwcGVkPzogYm9vbGVhbik6IHZvaWQ7XG4gIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4sIHNvdXJjZT86IFNjcm9sbFNvdXJjZSk6IHZvaWQ7XG4gIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJQ29yZU1vdXNlU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ29yZU1vdXNlU2VydmljZT4oJ0NvcmVNb3VzZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvcmVNb3VzZVNlcnZpY2Uge1xuICBhY3RpdmVQcm90b2NvbDogc3RyaW5nO1xuICBhY3RpdmVFbmNvZGluZzogc3RyaW5nO1xuICBhcmVNb3VzZUV2ZW50c0FjdGl2ZTogYm9vbGVhbjtcbiAgYWRkUHJvdG9jb2wobmFtZTogc3RyaW5nLCBwcm90b2NvbDogSUNvcmVNb3VzZVByb3RvY29sKTogdm9pZDtcbiAgYWRkRW5jb2RpbmcobmFtZTogc3RyaW5nLCBlbmNvZGluZzogQ29yZU1vdXNlRW5jb2RpbmcpOiB2b2lkO1xuICByZXNldCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhIG1vdXNlIGV2ZW50IHRvIGJlIHNlbnQuXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZXZlbnQgcGFzc2VkIGFsbCBwcm90b2NvbCByZXN0cmljdGlvbnMgYW5kIGEgcmVwb3J0XG4gICAqIHdhcyBzZW50LCBvdGhlcndpc2UgZmFsc2UuIFRoZSByZXR1cm4gdmFsdWUgbWF5IGJlIHVzZWQgdG8gZGVjaWRlIHdoZXRoZXJcbiAgICogdGhlIGRlZmF1bHQgZXZlbnQgYWN0aW9uIGluIHRoZSBib3dzZXIgY29tcG9uZW50IHNob3VsZCBiZSBvbWl0dGVkLlxuICAgKlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIHdpbGwgY2hhbmdlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gZXZlbnQgb2JqZWN0XG4gICAqIHRvIGZ1bGxmaWxsIHByb3RvY29sIGFuZCBlbmNvZGluZyByZXN0cmljdGlvbnMuXG4gICAqL1xuICB0cmlnZ2VyTW91c2VFdmVudChldmVudDogSUNvcmVNb3VzZUV2ZW50KTogYm9vbGVhbjtcblxuICAvKipcbiAgICogRXZlbnQgdG8gYW5ub3VuY2UgY2hhbmdlcyBpbiBtb3VzZSB0cmFja2luZy5cbiAgICovXG4gIG9uUHJvdG9jb2xDaGFuZ2U6IElFdmVudDxDb3JlTW91c2VFdmVudFR5cGU+O1xuXG4gIC8qKlxuICAgKiBIdW1hbiByZWFkYWJsZSB2ZXJzaW9uIG9mIG1vdXNlIGV2ZW50cy5cbiAgICovXG4gIGV4cGxhaW5FdmVudHMoZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUpOiB7IFtldmVudDogc3RyaW5nXTogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDb3JlU2VydmljZT4oJ0NvcmVTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsbHkgdGhlIGN1cnNvciB3aWxsIG5vdCBiZSB2aXNpYmxlIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSB0ZXJtaW5hbFxuICAgKiBpcyBmb2N1c2VkLlxuICAgKi9cbiAgaXNDdXJzb3JJbml0aWFsaXplZDogYm9vbGVhbjtcbiAgaXNDdXJzb3JIaWRkZW46IGJvb2xlYW47XG5cbiAgcmVhZG9ubHkgbW9kZXM6IElNb2RlcztcbiAgcmVhZG9ubHkgZGVjUHJpdmF0ZU1vZGVzOiBJRGVjUHJpdmF0ZU1vZGVzO1xuXG4gIHJlYWRvbmx5IG9uRGF0YTogSUV2ZW50PHN0cmluZz47XG4gIHJlYWRvbmx5IG9uVXNlcklucHV0OiBJRXZlbnQ8dm9pZD47XG4gIHJlYWRvbmx5IG9uQmluYXJ5OiBJRXZlbnQ8c3RyaW5nPjtcbiAgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b206IElFdmVudDx2b2lkPjtcblxuICByZXNldCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyB0aGUgb25EYXRhIGV2ZW50IGluIHRoZSBwdWJsaWMgQVBJLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0aGF0IGlzIGJlaW5nIGVtaXR0ZWQuXG4gICAqIEBwYXJhbSB3YXNVc2VySW5wdXQgV2hldGhlciB0aGUgZGF0YSBvcmlnaW5hdGVkIGZyb20gdGhlIHVzZXIgKGFzIG9wcG9zZWQgdG9cbiAgICogcmVzdWx0aW5nIGZyb20gcGFyc2luZyBpbmNvbWluZyBkYXRhKS4gV2hlbiB0cnVlIHRoaXMgd2lsbCBhbHNvOlxuICAgKiAtIFNjcm9sbCB0byB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIgaWYgb3B0aW9uIHNjcm9sbE9uVXNlcklucHV0IGlzIHRydWUuXG4gICAqIC0gRmlyZSB0aGUgYG9uVXNlcklucHV0YCBldmVudCAoc28gc2VsZWN0aW9uIGNhbiBiZSBjbGVhcmVkKS5cbiAgICovXG4gIHRyaWdnZXJEYXRhRXZlbnQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ/OiBib29sZWFuKTogdm9pZDtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgdGhlIG9uQmluYXJ5IGV2ZW50IGluIHRoZSBwdWJsaWMgQVBJLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0aGF0IGlzIGJlaW5nIGVtaXR0ZWQuXG4gICAqL1xuICB0cmlnZ2VyQmluYXJ5RXZlbnQoZGF0YTogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElDaGFyc2V0U2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ2hhcnNldFNlcnZpY2U+KCdDaGFyc2V0U2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ2hhcnNldFNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgZ2xldmVsOiBudW1iZXI7XG5cbiAgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogU2V0IHRoZSBHIGxldmVsIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGdcbiAgICovXG4gIHNldGdMZXZlbChnOiBudW1iZXIpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNoYXJzZXQgZm9yIHRoZSBnaXZlbiBHIGxldmVsIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGdcbiAgICogQHBhcmFtIGNoYXJzZXRcbiAgICovXG4gIHNldGdDaGFyc2V0KGc6IG51bWJlciwgY2hhcnNldDogSUNoYXJzZXQgfCB1bmRlZmluZWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZXJ2aWNlSWRlbnRpZmllcjxUPiB7XG4gICguLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gIHR5cGU6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJyYW5kZWRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG59XG5cbnR5cGUgR2V0TGVhZGluZ05vblNlcnZpY2VBcmdzPFRBcmdzIGV4dGVuZHMgYW55W10+ID0gVEFyZ3MgZXh0ZW5kcyBbXSA/IFtdXG4gIDogVEFyZ3MgZXh0ZW5kcyBbLi4uaW5mZXIgVEZpcnN0LCBpbmZlciBUTGFzdF0gPyBUTGFzdCBleHRlbmRzIElCcmFuZGVkU2VydmljZSA/IEdldExlYWRpbmdOb25TZXJ2aWNlQXJnczxURmlyc3Q+IDogVEFyZ3NcbiAgICA6IG5ldmVyO1xuXG5leHBvcnQgY29uc3QgSUluc3RhbnRpYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElJbnN0YW50aWF0aW9uU2VydmljZT4oJ0luc3RhbnRpYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW50aWF0aW9uU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkO1xuICBnZXRTZXJ2aWNlPFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4pOiBUIHwgdW5kZWZpbmVkO1xuICBjcmVhdGVJbnN0YW5jZTxDdG9yIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55LCBSIGV4dGVuZHMgSW5zdGFuY2VUeXBlPEN0b3I+Pih0OiBDdG9yLCAuLi5hcmdzOiBHZXRMZWFkaW5nTm9uU2VydmljZUFyZ3M8Q29uc3RydWN0b3JQYXJhbWV0ZXJzPEN0b3I+Pik6IFI7XG59XG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsRW51bSB7XG4gIFRSQUNFID0gMCxcbiAgREVCVUcgPSAxLFxuICBJTkZPID0gMixcbiAgV0FSTiA9IDMsXG4gIEVSUk9SID0gNCxcbiAgT0ZGID0gNVxufVxuXG5leHBvcnQgY29uc3QgSUxvZ1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUxvZ1NlcnZpY2U+KCdMb2dTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElMb2dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgbG9nTGV2ZWw6IExvZ0xldmVsRW51bTtcblxuICB0cmFjZShtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIGRlYnVnKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbiAgaW5mbyhtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIHdhcm4obWVzc2FnZTogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJT3B0aW9uc1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SU9wdGlvbnNTZXJ2aWNlPignT3B0aW9uc1NlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSU9wdGlvbnNTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJlYWQgb25seSBhY2Nlc3MgdG8gdGhlIHJhdyBvcHRpb25zIG9iamVjdCwgdGhpcyBpcyBhbiBpbnRlcm5hbC1vbmx5IGZhc3QgcGF0aCBmb3IgYWNjZXNzaW5nXG4gICAqIHNpbmdsZSBvcHRpb25zIHdpdGhvdXQgYW55IHZhbGlkYXRpb24gYXMgd2UgdHJ1c3QgVHlwZVNjcmlwdCB0byBlbmZvcmNlIGNvcnJlY3QgdXNhZ2VcbiAgICogaW50ZXJuYWxseS5cbiAgICovXG4gIHJlYWRvbmx5IHJhd09wdGlvbnM6IFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+O1xuXG4gIC8qKlxuICAgKiBPcHRpb25zIGFzIGV4cG9zZWQgdGhyb3VnaCB0aGUgcHVibGljIEFQSSwgdGhpcyBwcm9wZXJ0eSB1c2VzIGdldHRlcnMgYW5kIHNldHRlcnMgd2l0aFxuICAgKiB2YWxpZGF0aW9uIHdoaWNoIG1ha2VzIGl0IHNhZmVyIGJ1dCBzbG93ZXIuIHtAbGluayByYXdPcHRpb25zfSBzaG91bGQgYmUgdXNlZCBmb3IgcHJldHR5IG11Y2hcbiAgICogYWxsIGludGVybmFsIHVzYWdlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICAgKi9cbiAgcmVhZG9ubHkgb3B0aW9uczogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz47XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHdoZW4gYW55IG9wdGlvbiBjaGFuZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgb25PcHRpb25DaGFuZ2U6IElFdmVudDxrZXlvZiBJVGVybWluYWxPcHRpb25zPjtcblxuICAvKipcbiAgICogQWRkcyBhbiBldmVudCBsaXN0ZW5lciBmb3Igd2hlbiBhIHNwZWNpZmljIG9wdGlvbiBjaGFuZ2VzLCB0aGlzIGlzIGEgY29udmVuaWVuY2UgbWV0aG9kIHRoYXQgaXNcbiAgICogcHJlZmVycmVkIG92ZXIge0BsaW5rIG9uT3B0aW9uQ2hhbmdlfSB3aGVuIG9ubHkgYSBzaW5nbGUgb3B0aW9uIGlzIGJlaW5nIGxpc3RlbmVkIHRvLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICBvblNwZWNpZmljT3B0aW9uQ2hhbmdlPFQgZXh0ZW5kcyBrZXlvZiBJVGVybWluYWxPcHRpb25zPihrZXk6IFQsIGxpc3RlbmVyOiAoYXJnMTogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz5bVF0pID0+IGFueSk6IElEaXNwb3NhYmxlO1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIGZvciB3aGVuIGEgc2V0IG9mIHNwZWNpZmljIG9wdGlvbnMgY2hhbmdlLCB0aGlzIGlzIGEgY29udmVuaWVuY2UgbWV0aG9kXG4gICAqIHRoYXQgaXMgcHJlZmVycmVkIG92ZXIge0BsaW5rIG9uT3B0aW9uQ2hhbmdlfSB3aGVuIG11bHRpcGxlIG9wdGlvbnMgYXJlIGJlaW5nIGxpc3RlbmVkIHRvIGFuZFxuICAgKiBoYW5kbGVkIHRoZSBzYW1lIHdheS5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgb25NdWx0aXBsZU9wdGlvbkNoYW5nZShrZXlzOiAoa2V5b2YgSVRlcm1pbmFsT3B0aW9ucylbXSwgbGlzdGVuZXI6ICgpID0+IGFueSk6IElEaXNwb3NhYmxlO1xufVxuXG5leHBvcnQgdHlwZSBGb250V2VpZ2h0ID0gJ25vcm1hbCcgfCAnYm9sZCcgfCAnMTAwJyB8ICcyMDAnIHwgJzMwMCcgfCAnNDAwJyB8ICc1MDAnIHwgJzYwMCcgfCAnNzAwJyB8ICc4MDAnIHwgJzkwMCcgfCBudW1iZXI7XG5leHBvcnQgdHlwZSBMb2dMZXZlbCA9ICd0cmFjZScgfCAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElUZXJtaW5hbE9wdGlvbnMge1xuICBhbGxvd1Byb3Bvc2VkQXBpPzogYm9vbGVhbjtcbiAgYWxsb3dUcmFuc3BhcmVuY3k/OiBib29sZWFuO1xuICBhbHRDbGlja01vdmVzQ3Vyc29yPzogYm9vbGVhbjtcbiAgY29scz86IG51bWJlcjtcbiAgY29udmVydEVvbD86IGJvb2xlYW47XG4gIGN1cnNvckJsaW5rPzogYm9vbGVhbjtcbiAgY3Vyc29yU3R5bGU/OiBDdXJzb3JTdHlsZTtcbiAgY3Vyc29yV2lkdGg/OiBudW1iZXI7XG4gIGN1cnNvckluYWN0aXZlU3R5bGU/OiBDdXJzb3JJbmFjdGl2ZVN0eWxlO1xuICBjdXN0b21HbHlwaHM/OiBib29sZWFuO1xuICBkaXNhYmxlU3RkaW4/OiBib29sZWFuO1xuICBkb2N1bWVudE92ZXJyaWRlPzogYW55IHwgbnVsbDtcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM/OiBib29sZWFuO1xuICBmYXN0U2Nyb2xsTW9kaWZpZXI/OiAnbm9uZScgfCAnYWx0JyB8ICdjdHJsJyB8ICdzaGlmdCc7XG4gIGZhc3RTY3JvbGxTZW5zaXRpdml0eT86IG51bWJlcjtcbiAgZm9udFNpemU/OiBudW1iZXI7XG4gIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gIGZvbnRXZWlnaHQ/OiBGb250V2VpZ2h0O1xuICBmb250V2VpZ2h0Qm9sZD86IEZvbnRXZWlnaHQ7XG4gIGlnbm9yZUJyYWNrZXRlZFBhc3RlTW9kZT86IGJvb2xlYW47XG4gIGxldHRlclNwYWNpbmc/OiBudW1iZXI7XG4gIGxpbmVIZWlnaHQ/OiBudW1iZXI7XG4gIGxpbmtIYW5kbGVyPzogSUxpbmtIYW5kbGVyIHwgbnVsbDtcbiAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgbG9nZ2VyPzogSUxvZ2dlciB8IG51bGw7XG4gIG1hY09wdGlvbklzTWV0YT86IGJvb2xlYW47XG4gIG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uPzogYm9vbGVhbjtcbiAgbWluaW11bUNvbnRyYXN0UmF0aW8/OiBudW1iZXI7XG4gIHJlc2NhbGVPdmVybGFwcGluZ0dseXBocz86IGJvb2xlYW47XG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZD86IGJvb2xlYW47XG4gIHJvd3M/OiBudW1iZXI7XG4gIHNjcmVlblJlYWRlck1vZGU/OiBib29sZWFuO1xuICBzY3JvbGxiYWNrPzogbnVtYmVyO1xuICBzY3JvbGxPblVzZXJJbnB1dD86IGJvb2xlYW47XG4gIHNjcm9sbFNlbnNpdGl2aXR5PzogbnVtYmVyO1xuICBzbW9vdGhTY3JvbGxEdXJhdGlvbj86IG51bWJlcjtcbiAgdGFiU3RvcFdpZHRoPzogbnVtYmVyO1xuICB0aGVtZT86IElUaGVtZTtcbiAgd2luZG93c01vZGU/OiBib29sZWFuO1xuICB3aW5kb3dzUHR5PzogSVdpbmRvd3NQdHk7XG4gIHdpbmRvd09wdGlvbnM/OiBJV2luZG93T3B0aW9ucztcbiAgd29yZFNlcGFyYXRvcj86IHN0cmluZztcbiAgb3ZlcnZpZXdSdWxlcldpZHRoPzogbnVtYmVyO1xuXG4gIFtrZXk6IHN0cmluZ106IGFueTtcbiAgY2FuY2VsRXZlbnRzOiBib29sZWFuO1xuICB0ZXJtTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUaGVtZSB7XG4gIGZvcmVncm91bmQ/OiBzdHJpbmc7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIGN1cnNvcj86IHN0cmluZztcbiAgY3Vyc29yQWNjZW50Pzogc3RyaW5nO1xuICBzZWxlY3Rpb25Gb3JlZ3JvdW5kPzogc3RyaW5nO1xuICBzZWxlY3Rpb25CYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBzZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIGJsYWNrPzogc3RyaW5nO1xuICByZWQ/OiBzdHJpbmc7XG4gIGdyZWVuPzogc3RyaW5nO1xuICB5ZWxsb3c/OiBzdHJpbmc7XG4gIGJsdWU/OiBzdHJpbmc7XG4gIG1hZ2VudGE/OiBzdHJpbmc7XG4gIGN5YW4/OiBzdHJpbmc7XG4gIHdoaXRlPzogc3RyaW5nO1xuICBicmlnaHRCbGFjaz86IHN0cmluZztcbiAgYnJpZ2h0UmVkPzogc3RyaW5nO1xuICBicmlnaHRHcmVlbj86IHN0cmluZztcbiAgYnJpZ2h0WWVsbG93Pzogc3RyaW5nO1xuICBicmlnaHRCbHVlPzogc3RyaW5nO1xuICBicmlnaHRNYWdlbnRhPzogc3RyaW5nO1xuICBicmlnaHRDeWFuPzogc3RyaW5nO1xuICBicmlnaHRXaGl0ZT86IHN0cmluZztcbiAgZXh0ZW5kZWRBbnNpPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjb25zdCBJT3NjTGlua1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SU9zY0xpbmtTZXJ2aWNlPignT3NjTGlua1NlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSU9zY0xpbmtTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaW5rIHRvIHRoZSBzZXJ2aWNlLCByZXR1cm5pbmcgdGhlIGxpbmsgSUQuIFRoZSBsaW5rIGRhdGEgaXMgbWFuYWdlZCBieSB0aGlzXG4gICAqIHNlcnZpY2UgYW5kIHdpbGwgYmUgZnJlZWQgd2hlbiB0aGlzIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIGlzIHRyaW1tZWQgb2ZmIHRoZSBidWZmZXIuXG4gICAqL1xuICByZWdpc3RlckxpbmsobGlua0RhdGE6IElPc2NMaW5rRGF0YSk6IG51bWJlcjtcbiAgLyoqXG4gICAqIEFkZHMgYSBsaW5lIHRvIGEgbGluayBpZiBuZWVkZWQuXG4gICAqL1xuICBhZGRMaW5lVG9MaW5rKGxpbmtJZDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkO1xuICAvKiogR2V0IHRoZSBsaW5rIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGEgbGluayBJRC4gKi9cbiAgZ2V0TGlua0RhdGEobGlua0lkOiBudW1iZXIpOiBJT3NjTGlua0RhdGEgfCB1bmRlZmluZWQ7XG59XG5cbi8qXG4gKiBXaWR0aCBhbmQgR3JhcGhlbWVfQ2x1c3Rlcl9CcmVhayBwcm9wZXJ0aWVzIG9mIGEgY2hhcmFjdGVyIGFzIGEgYml0IG1hc2suXG4gKlxuICogYml0IDA6IHNob3VsZEpvaW4gLSBzaG91bGQgY29tYmluZSB3aXRoIHByZWNlZGluZyBjaGFyYWN0ZXIuXG4gKiBiaXQgMS4uMjogd2N3aWR0aCAtIHNlZSBVbmljb2RlQ2hhcldpZHRoLlxuICogYml0IDMuLjMxOiBjbGFzcyBvZiBjaGFyYWN0ZXIgKGN1cnJlbnRseSBvbmx5IDQgYml0cyBhcmUgdXNlZCkuXG4gKiAgIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmVkIGdyYXBoZW1lIGNsdXN0ZXJpbmcgLSBpLmUuIHdoaWNoIGNvZGVwb2ludHNcbiAqICAgYXJlIHRvIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgY29tcG91bmQgY2hhcmFjdGVyLlxuICpcbiAqIFVzZSB0aGUgVW5pY29kZVNlcnZpY2Ugc3RhdGljIGZ1bmN0aW9uIGNyZWF0ZVByb3BlcnR5VmFsdWUgdG8gY3JlYXRlIGFcbiAqIFVuaWNvZGVDaGFyUHJvcGVydGllczsgdXNlIGV4dHJhY3RTaG91bGRKb2luLCBleHRyYWN0V2lkdGgsIGFuZFxuICogZXh0cmFjdENoYXJLaW5kIHRvIGV4dHJhY3QgdGhlIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCB0eXBlIFVuaWNvZGVDaGFyUHJvcGVydGllcyA9IG51bWJlcjtcblxuLyoqXG4gKiBXaWR0aCBpbiBjb2x1bW5zIG9mIGEgY2hhcmFjdGVyLlxuICogSW4gYSBDSksgY29udGV4dCwgXCJoYWxmLXdpZHRoXCIgY2hhcmFjdGVycyAoc3VjaCBhcyBMYXRpbikgYXJlIHdpZHRoIDEsXG4gKiB3aGlsZSBcImZ1bGwtd2lkdGhcIiBjaGFyYWN0ZXJzIChzdWNoIGFzIEthbmppKSBhcmUgMiBjb2x1bW5zIHdpZGUuXG4gKiBDb21iaW5pbmcgY2hhcmFjdGVycyAoc3VjaCBhcyBhY2NlbnRzKSBhcmUgd2lkdGggMC5cbiAqL1xuZXhwb3J0IHR5cGUgVW5pY29kZUNoYXJXaWR0aCA9IDAgfCAxIHwgMjtcblxuZXhwb3J0IGNvbnN0IElVbmljb2RlU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJVW5pY29kZVNlcnZpY2U+KCdVbmljb2RlU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJVW5pY29kZVNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcbiAgLyoqIFJlZ2lzdGVyIGFuIFVuaWNvZGUgdmVyc2lvbiBwcm92aWRlci4gKi9cbiAgcmVnaXN0ZXIocHJvdmlkZXI6IElVbmljb2RlVmVyc2lvblByb3ZpZGVyKTogdm9pZDtcbiAgLyoqIFJlZ2lzdGVyZWQgVW5pY29kZSB2ZXJzaW9ucy4gKi9cbiAgcmVhZG9ubHkgdmVyc2lvbnM6IHN0cmluZ1tdO1xuICAvKiogQ3VycmVudGx5IGFjdGl2ZSB2ZXJzaW9uLiAqL1xuICBhY3RpdmVWZXJzaW9uOiBzdHJpbmc7XG4gIC8qKiBFdmVudCB0cmlnZ2VyZWQsIHdoZW4gYWN0aXZhdGUgdmVyc2lvbiBjaGFuZ2VkLiAqL1xuICByZWFkb25seSBvbkNoYW5nZTogSUV2ZW50PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgdmVyc2lvbiBkZXBlbmRlbnRcbiAgICovXG4gIHdjd2lkdGgoY29kZXBvaW50OiBudW1iZXIpOiBVbmljb2RlQ2hhcldpZHRoO1xuICBnZXRTdHJpbmdDZWxsV2lkdGgoczogc3RyaW5nKTogbnVtYmVyO1xuICAvKipcbiAgICogUmV0dXJuIGNoYXJhY3RlciB3aWR0aCBhbmQgdHlwZSBmb3IgZ3JhcGhlbWUgY2x1c3RlcmluZy5cbiAgICogSWYgcHJlY2VkaW5nICE9IDAsIGl0IGlzIHRoZSByZXR1cm4gY29kZSBmcm9tIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXI7XG4gICAqIGluIHRoYXQgY2FzZSB0aGUgcmVzdWx0IHNwZWNpZmllcyBpZiB0aGUgY2hhcmFjdGVycyBzaG91bGQgYmUgam9pbmVkLlxuICAgKi9cbiAgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcmVhZG9ubHkgdmVyc2lvbjogc3RyaW5nO1xuICB3Y3dpZHRoKHVjczogbnVtYmVyKTogVW5pY29kZUNoYXJXaWR0aDtcbiAgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgY29uc3QgSURlY29yYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElEZWNvcmF0aW9uU2VydmljZT4oJ0RlY29yYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElEZWNvcmF0aW9uU2VydmljZSBleHRlbmRzIElEaXNwb3NhYmxlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGRlY29yYXRpb25zOiBJdGVyYWJsZUl0ZXJhdG9yPElJbnRlcm5hbERlY29yYXRpb24+O1xuICByZWFkb25seSBvbkRlY29yYXRpb25SZWdpc3RlcmVkOiBJRXZlbnQ8SUludGVybmFsRGVjb3JhdGlvbj47XG4gIHJlYWRvbmx5IG9uRGVjb3JhdGlvblJlbW92ZWQ6IElFdmVudDxJSW50ZXJuYWxEZWNvcmF0aW9uPjtcbiAgcmVnaXN0ZXJEZWNvcmF0aW9uKGRlY29yYXRpb25PcHRpb25zOiBJRGVjb3JhdGlvbk9wdGlvbnMpOiBJRGVjb3JhdGlvbiB8IHVuZGVmaW5lZDtcbiAgcmVzZXQoKTogdm9pZDtcbiAgLyoqXG4gICAqIFRyaWdnZXIgYSBjYWxsYmFjayBvdmVyIHRoZSBkZWNvcmF0aW9uIGF0IGEgY2VsbCAoaW4gbm8gcGFydGljdWxhciBvcmRlcikuIFRoaXMgdXNlcyBhIGNhbGxiYWNrXG4gICAqIGluc3RlYWQgb2YgYW4gaXRlcmF0b3IgYXMgaXQncyB0eXBpY2FsbHkgdXNlZCBpbiBob3QgY29kZSBwYXRocy5cbiAgICovXG4gIGZvckVhY2hEZWNvcmF0aW9uQXRDZWxsKHg6IG51bWJlciwgbGluZTogbnVtYmVyLCBsYXllcjogJ2JvdHRvbScgfCAndG9wJyB8IHVuZGVmaW5lZCwgY2FsbGJhY2s6IChkZWNvcmF0aW9uOiBJSW50ZXJuYWxEZWNvcmF0aW9uKSA9PiB2b2lkKTogdm9pZDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUludGVybmFsRGVjb3JhdGlvbiBleHRlbmRzIElEZWNvcmF0aW9uIHtcbiAgcmVhZG9ubHkgb3B0aW9uczogSURlY29yYXRpb25PcHRpb25zO1xuICByZWFkb25seSBiYWNrZ3JvdW5kQ29sb3JSR0I6IElDb2xvciB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgZm9yZWdyb3VuZENvbG9yUkdCOiBJQ29sb3IgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IG9uUmVuZGVyRW1pdHRlcjogSUV2ZW50RW1pdHRlcjxIVE1MRWxlbWVudD47XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IFVuaWNvZGVWNiB9IGZyb20gJ2NvbW1vbi9pbnB1dC9Vbmljb2RlVjYnO1xuaW1wb3J0IHsgSVVuaWNvZGVTZXJ2aWNlLCBJVW5pY29kZVZlcnNpb25Qcm92aWRlciwgVW5pY29kZUNoYXJQcm9wZXJ0aWVzLCBVbmljb2RlQ2hhcldpZHRoIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIFVuaWNvZGVTZXJ2aWNlIGltcGxlbWVudHMgSVVuaWNvZGVTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX3Byb3ZpZGVyczoge1trZXk6IHN0cmluZ106IElVbmljb2RlVmVyc2lvblByb3ZpZGVyfSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2FjdGl2ZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX2FjdGl2ZVByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcjtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25DaGFuZ2UgPSB0aGlzLl9vbkNoYW5nZS5ldmVudDtcblxuICBwdWJsaWMgc3RhdGljIGV4dHJhY3RTaG91bGRKb2luKHZhbHVlOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHZhbHVlICYgMSkgIT09IDA7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBleHRyYWN0V2lkdGgodmFsdWU6IFVuaWNvZGVDaGFyUHJvcGVydGllcyk6IFVuaWNvZGVDaGFyV2lkdGgge1xuICAgIHJldHVybiAoKHZhbHVlID4+IDEpICYgMHgzKSBhcyBVbmljb2RlQ2hhcldpZHRoO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZXh0cmFjdENoYXJLaW5kKHZhbHVlOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBudW1iZXIge1xuICAgIHJldHVybiB2YWx1ZSA+PiAzO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlUHJvcGVydHlWYWx1ZShzdGF0ZTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBzaG91bGRKb2luOiBib29sZWFuID0gZmFsc2UpOiBVbmljb2RlQ2hhclByb3BlcnRpZXMge1xuICAgIHJldHVybiAoKHN0YXRlICYgMHhmZmZmZmYpIDw8IDMpIHwgKCh3aWR0aCAmIDMpIDw8IDEpIHwgKHNob3VsZEpvaW4/MTowKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGRlZmF1bHRQcm92aWRlciA9IG5ldyBVbmljb2RlVjYoKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGRlZmF1bHRQcm92aWRlcik7XG4gICAgdGhpcy5fYWN0aXZlID0gZGVmYXVsdFByb3ZpZGVyLnZlcnNpb247XG4gICAgdGhpcy5fYWN0aXZlUHJvdmlkZXIgPSBkZWZhdWx0UHJvdmlkZXI7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9vbkNoYW5nZS5kaXNwb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHZlcnNpb25zKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcHJvdmlkZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlVmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZVZlcnNpb24odmVyc2lvbjogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm92aWRlcnNbdmVyc2lvbl0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBVbmljb2RlIHZlcnNpb24gXCIke3ZlcnNpb259XCJgKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gdmVyc2lvbjtcbiAgICB0aGlzLl9hY3RpdmVQcm92aWRlciA9IHRoaXMuX3Byb3ZpZGVyc1t2ZXJzaW9uXTtcbiAgICB0aGlzLl9vbkNoYW5nZS5maXJlKHZlcnNpb24pO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyKHByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcik6IHZvaWQge1xuICAgIHRoaXMuX3Byb3ZpZGVyc1twcm92aWRlci52ZXJzaW9uXSA9IHByb3ZpZGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgdmVyc2lvbiBkZXBlbmRlbnQgaW50ZXJmYWNlLlxuICAgKi9cbiAgcHVibGljIHdjd2lkdGgobnVtOiBudW1iZXIpOiBVbmljb2RlQ2hhcldpZHRoIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvdmlkZXIud2N3aWR0aChudW0pO1xuICB9XG5cbiAgcHVibGljIGdldFN0cmluZ0NlbGxXaWR0aChzOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCByZXN1bHQgPSAwO1xuICAgIGxldCBwcmVjZWRpbmdJbmZvID0gMDtcbiAgICBjb25zdCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBsZXQgY29kZSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB0aGlzIHNob3VsZCBub3QgaGFwcGVuIHdpdGggc3RyaW5ncyByZXRyaWV2ZWQgZnJvbVxuICAgICAgICAgIC8vIEJ1ZmZlci50cmFuc2xhdGVUb1N0cmluZyBhcyBpdCBjb252ZXJ0cyBmcm9tIFVURi0zMlxuICAgICAgICAgIC8vIGFuZCB0aGVyZWZvcmUgYWx3YXlzIHNob3VsZCBjb250YWluIHRoZSBzZWNvbmQgcGFydFxuICAgICAgICAgIC8vIGZvciBhbnkgb3RoZXIgc3RyaW5nIHdlIHN0aWxsIGhhdmUgdG8gaGFuZGxlIGl0IHNvbWVob3c6XG4gICAgICAgICAgLy8gc2ltcGx5IHRyZWF0IHRoZSBsb25lbHkgc3Vycm9nYXRlIGZpcnN0IGFzIGEgc2luZ2xlIGNoYXIgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgICAgIHJldHVybiByZXN1bHQgKyB0aGlzLndjd2lkdGgoY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vjb25kID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAvLyBjb252ZXJ0IHN1cnJvZ2F0ZSBwYWlyIHRvIGhpZ2ggY29kZXBvaW50IG9ubHkgZm9yIHZhbGlkIHNlY29uZCBwYXJ0IChVVEYtMTYpXG4gICAgICAgIC8vIG90aGVyd2lzZSB0cmVhdCB0aGVtIGluZGVwZW5kZW50bHkgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgY29kZSA9IChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgKz0gdGhpcy53Y3dpZHRoKHNlY29uZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRJbmZvID0gdGhpcy5jaGFyUHJvcGVydGllcyhjb2RlLCBwcmVjZWRpbmdJbmZvKTtcbiAgICAgIGxldCBjaFdpZHRoID0gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKGN1cnJlbnRJbmZvKTtcbiAgICAgIGlmIChVbmljb2RlU2VydmljZS5leHRyYWN0U2hvdWxkSm9pbihjdXJyZW50SW5mbykpIHtcbiAgICAgICAgY2hXaWR0aCAtPSBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgocHJlY2VkaW5nSW5mbyk7XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gY2hXaWR0aDtcbiAgICAgIHByZWNlZGluZ0luZm8gPSBjdXJyZW50SW5mbztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBjaGFyUHJvcGVydGllcyhjb2RlcG9pbnQ6IG51bWJlciwgcHJlY2VkaW5nOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBVbmljb2RlQ2hhclByb3BlcnRpZXMge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci5jaGFyUHJvcGVydGllcyhjb2RlcG9pbnQsIHByZWNlZGluZyk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIE9yaWdpbmFsbHkgZm9ya2VkIGZyb20gKHdpdGggdGhlIGF1dGhvcidzIHBlcm1pc3Npb24pOlxuICogICBGYWJyaWNlIEJlbGxhcmQncyBqYXZhc2NyaXB0IHZ0MTAwIGZvciBqc2xpbnV4OlxuICogICBodHRwOi8vYmVsbGFyZC5vcmcvanNsaW51eC9cbiAqICAgQ29weXJpZ2h0IChjKSAyMDExIEZhYnJpY2UgQmVsbGFyZFxuICogICBUaGUgb3JpZ2luYWwgZGVzaWduIHJlbWFpbnMuIFRoZSB0ZXJtaW5hbCBpdHNlbGZcbiAqICAgaGFzIGJlZW4gZXh0ZW5kZWQgdG8gaW5jbHVkZSB4dGVybSBDU0kgY29kZXMsIGFtb25nXG4gKiAgIG90aGVyIGZlYXR1cmVzLlxuICpcbiAqIFRlcm1pbmFsIEVtdWxhdGlvbiBSZWZlcmVuY2VzOlxuICogICBodHRwOi8vdnQxMDAubmV0L1xuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLnR4dFxuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWxcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3Z0dGVzdC9cbiAqICAgaHR0cDovL3d3dy5pbndhcC5jb20vcGRwMTAvYW5zaWNvZGUudHh0XG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi80L2NvbnNvbGVfY29kZXNcbiAqICAgaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzcvdXJ4dnRcbiAqL1xuXG5pbXBvcnQgeyBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBDb3JlVGVybWluYWwgfSBmcm9tICdjb21tb24vQ29yZVRlcm1pbmFsJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgZm9yd2FyZEV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJTWFya2VyLCBJVGVybWluYWxPcHRpb25zLCBTY3JvbGxTb3VyY2UgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGVybWluYWwgZXh0ZW5kcyBDb3JlVGVybWluYWwge1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkJlbGwgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJlbGwgPSB0aGlzLl9vbkJlbGwuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQ3Vyc29yTW92ZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQ3Vyc29yTW92ZSA9IHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25UaXRsZUNoYW5nZSA9IHRoaXMucmVnaXN0ZXIobmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25UaXRsZUNoYW5nZSA9IHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQTExeUNoYXJFbWl0dGVyID0gdGhpcy5yZWdpc3RlcihuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkExMXlDaGFyID0gdGhpcy5fb25BMTF5Q2hhckVtaXR0ZXIuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQTExeVRhYkVtaXR0ZXIgPSB0aGlzLnJlZ2lzdGVyKG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQTExeVRhYiA9IHRoaXMuX29uQTExeVRhYkVtaXR0ZXIuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucyA9IHt9XG4gICkge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuXG4gICAgdGhpcy5fc2V0dXAoKTtcblxuICAgIC8vIFNldHVwIElucHV0SGFuZGxlciBsaXN0ZW5lcnNcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RCZWxsKCgpID0+IHRoaXMuYmVsbCgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVzZXQoKCkgPT4gdGhpcy5yZXNldCgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcihmb3J3YXJkRXZlbnQodGhpcy5faW5wdXRIYW5kbGVyLm9uQ3Vyc29yTW92ZSwgdGhpcy5fb25DdXJzb3JNb3ZlKSk7XG4gICAgdGhpcy5yZWdpc3Rlcihmb3J3YXJkRXZlbnQodGhpcy5faW5wdXRIYW5kbGVyLm9uVGl0bGVDaGFuZ2UsIHRoaXMuX29uVGl0bGVDaGFuZ2UpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9pbnB1dEhhbmRsZXIub25BMTF5Q2hhciwgdGhpcy5fb25BMTF5Q2hhckVtaXR0ZXIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGZvcndhcmRFdmVudCh0aGlzLl9pbnB1dEhhbmRsZXIub25BMTF5VGFiLCB0aGlzLl9vbkExMXlUYWJFbWl0dGVyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVuaWVuY2UgcHJvcGVydHkgdG8gYWN0aXZlIGJ1ZmZlci5cbiAgICovXG4gIHB1YmxpYyBnZXQgYnVmZmVyKCk6IElCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlO1xuICB9XG5cbiAgLy8gVE9ETzogU3VwcG9ydCBwYXN0ZSBoZXJlP1xuXG4gIHB1YmxpYyBnZXQgbWFya2VycygpOiBJTWFya2VyW10ge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5tYXJrZXJzO1xuICB9XG5cbiAgcHVibGljIGFkZE1hcmtlcihjdXJzb3JZT2Zmc2V0OiBudW1iZXIpOiBJTWFya2VyIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBEaXNhbGxvdyBtYXJrZXJzIG9uIHRoZSBhbHQgYnVmZmVyXG4gICAgaWYgKHRoaXMuYnVmZmVyICE9PSB0aGlzLmJ1ZmZlcnMubm9ybWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLmFkZE1hcmtlcih0aGlzLmJ1ZmZlci55YmFzZSArIHRoaXMuYnVmZmVyLnkgKyBjdXJzb3JZT2Zmc2V0KTtcbiAgfVxuXG4gIHB1YmxpYyBiZWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX29uQmVsbC5maXJlKCk7XG4gIH1cblxuICBwdWJsaWMgaW5wdXQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRhdGEsIHdhc1VzZXJJbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgdGVybWluYWwuXG4gICAqXG4gICAqIEBwYXJhbSB4IFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byByZXNpemUgdG8uXG4gICAqIEBwYXJhbSB5IFRoZSBudW1iZXIgb2Ygcm93cyB0byByZXNpemUgdG8uXG4gICAqL1xuICBwdWJsaWMgcmVzaXplKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHggPT09IHRoaXMuY29scyAmJiB5ID09PSB0aGlzLnJvd3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdXBlci5yZXNpemUoeCwgeSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGVudGlyZSBidWZmZXIsIG1ha2luZyB0aGUgcHJvbXB0IGxpbmUgdGhlIG5ldyBmaXJzdCBsaW5lLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJ1ZmZlci55YmFzZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci55ID09PSAwKSB7XG4gICAgICAvLyBEb24ndCBjbGVhciBpZiBpdCdzIGFscmVhZHkgY2xlYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIubGluZXMuc2V0KDAsIHRoaXMuYnVmZmVyLmxpbmVzLmdldCh0aGlzLmJ1ZmZlci55YmFzZSArIHRoaXMuYnVmZmVyLnkpISk7XG4gICAgdGhpcy5idWZmZXIubGluZXMubGVuZ3RoID0gMTtcbiAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IDA7XG4gICAgdGhpcy5idWZmZXIueWJhc2UgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnkgPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoeyBwb3NpdGlvbjogdGhpcy5idWZmZXIueWRpc3AsIHNvdXJjZTogU2Nyb2xsU291cmNlLlRFUk1JTkFMIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRlcm1pbmFsLlxuICAgKiBOb3RlOiBDYWxsaW5nIHRoaXMgZGlyZWN0bHkgZnJvbSBKUyBpcyBzeW5jaHJvbm91cyBidXQgZG9lcyBub3QgY2xlYXJcbiAgICogaW5wdXQgYnVmZmVycyBhbmQgZG9lcyBub3QgcmVzZXQgdGhlIHBhcnNlciwgdGh1cyB0aGUgdGVybWluYWwgd2lsbFxuICAgKiBjb250aW51ZSB0byBhcHBseSBwZW5kaW5nIGlucHV0IGRhdGEuXG4gICAqIElmIHlvdSBuZWVkIGluIGJhbmQgcmVzZXQgKHN5bmNocm9ub3VzIHdpdGggaW5wdXQgZGF0YSkgY29uc2lkZXJcbiAgICogdXNpbmcgREVDU1RSIChzb2Z0IHJlc2V0LCBDU0kgISBwKSBvciBSSVMgaW5zdGVhZCAoaGFyZCByZXNldCwgRVNDIGMpLlxuICAgKi9cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIC8qKlxuICAgICAqIFNpbmNlIF9zZXR1cCBoYW5kbGVzIGEgZnVsbCB0ZXJtaW5hbCBjcmVhdGlvbiwgd2UgaGF2ZSB0byBjYXJyeSBmb3J3YXJkXG4gICAgICogYSBmZXcgdGhpbmdzIHRoYXQgc2hvdWxkIG5vdCByZXNldC5cbiAgICAgKi9cbiAgICB0aGlzLm9wdGlvbnMucm93cyA9IHRoaXMucm93cztcbiAgICB0aGlzLm9wdGlvbnMuY29scyA9IHRoaXMuY29scztcblxuICAgIHRoaXMuX3NldHVwKCk7XG4gICAgc3VwZXIucmVzZXQoKTtcbiAgfVxufVxuIiwgIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IEJ1ZmZlck5hbWVzcGFjZUFwaSB9IGZyb20gJ2NvbW1vbi9wdWJsaWMvQnVmZmVyTmFtZXNwYWNlQXBpJztcbmltcG9ydCB7IFBhcnNlckFwaSB9IGZyb20gJ2NvbW1vbi9wdWJsaWMvUGFyc2VyQXBpJztcbmltcG9ydCB7IFVuaWNvZGVBcGkgfSBmcm9tICdjb21tb24vcHVibGljL1VuaWNvZGVBcGknO1xuaW1wb3J0IHsgSUJ1ZmZlck5hbWVzcGFjZSBhcyBJQnVmZmVyTmFtZXNwYWNlQXBpLCBJTWFya2VyLCBJTW9kZXMsIElQYXJzZXIsIElUZXJtaW5hbEFkZG9uLCBJVGVybWluYWxJbml0T25seU9wdGlvbnMsIElVbmljb2RlSGFuZGxpbmcsIFRlcm1pbmFsIGFzIElUZXJtaW5hbEFwaSB9IGZyb20gJ0B4dGVybS9oZWFkbGVzcyc7XG5pbXBvcnQgeyBUZXJtaW5hbCBhcyBUZXJtaW5hbENvcmUgfSBmcm9tICdoZWFkbGVzcy9UZXJtaW5hbCc7XG5pbXBvcnQgeyBBZGRvbk1hbmFnZXIgfSBmcm9tICdjb21tb24vcHVibGljL0FkZG9uTWFuYWdlcic7XG5pbXBvcnQgeyBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbi8qKlxuICogVGhlIHNldCBvZiBvcHRpb25zIHRoYXQgb25seSBoYXZlIGFuIGVmZmVjdCB3aGVuIHNldCBpbiB0aGUgVGVybWluYWwgY29uc3RydWN0b3IuXG4gKi9cbmNvbnN0IENPTlNUUlVDVE9SX09OTFlfT1BUSU9OUyA9IFsnY29scycsICdyb3dzJ107XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVGVybWluYWxBcGkge1xuICBwcml2YXRlIF9jb3JlOiBUZXJtaW5hbENvcmU7XG4gIHByaXZhdGUgX2FkZG9uTWFuYWdlcjogQWRkb25NYW5hZ2VyO1xuICBwcml2YXRlIF9wYXJzZXI6IElQYXJzZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2J1ZmZlcjogQnVmZmVyTmFtZXNwYWNlQXBpIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9wdWJsaWNPcHRpb25zOiBSZXF1aXJlZDxJVGVybWluYWxPcHRpb25zPjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogSVRlcm1pbmFsT3B0aW9ucyAmIElUZXJtaW5hbEluaXRPbmx5T3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9jb3JlID0gdGhpcy5yZWdpc3RlcihuZXcgVGVybWluYWxDb3JlKG9wdGlvbnMpKTtcbiAgICB0aGlzLl9hZGRvbk1hbmFnZXIgPSB0aGlzLnJlZ2lzdGVyKG5ldyBBZGRvbk1hbmFnZXIoKSk7XG5cbiAgICB0aGlzLl9wdWJsaWNPcHRpb25zID0geyAuLi4gdGhpcy5fY29yZS5vcHRpb25zIH07XG4gICAgY29uc3QgZ2V0dGVyID0gKHByb3BOYW1lOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvcmUub3B0aW9uc1twcm9wTmFtZV07XG4gICAgfTtcbiAgICBjb25zdCBzZXR0ZXIgPSAocHJvcE5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tSZWFkb25seU9wdGlvbnMocHJvcE5hbWUpO1xuICAgICAgdGhpcy5fY29yZS5vcHRpb25zW3Byb3BOYW1lXSA9IHZhbHVlO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHRoaXMuX2NvcmUub3B0aW9ucykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuX3B1YmxpY09wdGlvbnMsIHByb3BOYW1lLCB7XG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jb3JlLm9wdGlvbnNbcHJvcE5hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2hlY2tSZWFkb25seU9wdGlvbnMocHJvcE5hbWUpO1xuICAgICAgICAgIHRoaXMuX2NvcmUub3B0aW9uc1twcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBkZXNjID0ge1xuICAgICAgICBnZXQ6IGdldHRlci5iaW5kKHRoaXMsIHByb3BOYW1lKSxcbiAgICAgICAgc2V0OiBzZXR0ZXIuYmluZCh0aGlzLCBwcm9wTmFtZSlcbiAgICAgIH07XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5fcHVibGljT3B0aW9ucywgcHJvcE5hbWUsIGRlc2MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NoZWNrUmVhZG9ubHlPcHRpb25zKHByb3BOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBhbnkgY29uc3RydWN0b3Igb25seSBvcHRpb24gaXMgbW9kaWZpZWRcbiAgICAvLyBmcm9tIHRlcm1pbmFsLm9wdGlvbnNcbiAgICAvLyBNb2RpZmljYXRpb25zIGZyb20gYW55d2hlcmUgZWxzZSBhcmUgYWxsb3dlZFxuICAgIGlmIChDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMuaW5jbHVkZXMocHJvcE5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wdGlvbiBcIiR7cHJvcE5hbWV9XCIgY2FuIG9ubHkgYmUgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcmApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NoZWNrUHJvcG9zZWRBcGkoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuYWxsb3dQcm9wb3NlZEFwaSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBzZXQgdGhlIGFsbG93UHJvcG9zZWRBcGkgb3B0aW9uIHRvIHRydWUgdG8gdXNlIHByb3Bvc2VkIEFQSScpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgb25CZWxsKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uQmVsbDsgfVxuICBwdWJsaWMgZ2V0IG9uQmluYXJ5KCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnk7IH1cbiAgcHVibGljIGdldCBvbkN1cnNvck1vdmUoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25DdXJzb3JNb3ZlOyB9XG4gIHB1YmxpYyBnZXQgb25EYXRhKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25EYXRhOyB9XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkxpbmVGZWVkOyB9XG4gIHB1YmxpYyBnZXQgb25SZXNpemUoKTogSUV2ZW50PHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZTsgfVxuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGw7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZTsgfVxuXG4gIHB1YmxpYyBnZXQgcGFyc2VyKCk6IElQYXJzZXIge1xuICAgIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKTtcbiAgICBpZiAoIXRoaXMuX3BhcnNlcikge1xuICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IFBhcnNlckFwaSh0aGlzLl9jb3JlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlcjtcbiAgfVxuICBwdWJsaWMgZ2V0IHVuaWNvZGUoKTogSVVuaWNvZGVIYW5kbGluZyB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHJldHVybiBuZXcgVW5pY29kZUFwaSh0aGlzLl9jb3JlKTtcbiAgfVxuICBwdWJsaWMgZ2V0IHJvd3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUucm93czsgfVxuICBwdWJsaWMgZ2V0IGNvbHMoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUuY29sczsgfVxuICBwdWJsaWMgZ2V0IGJ1ZmZlcigpOiBJQnVmZmVyTmFtZXNwYWNlQXBpIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgaWYgKCF0aGlzLl9idWZmZXIpIHtcbiAgICAgIHRoaXMuX2J1ZmZlciA9IHRoaXMucmVnaXN0ZXIobmV3IEJ1ZmZlck5hbWVzcGFjZUFwaSh0aGlzLl9jb3JlKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9idWZmZXI7XG4gIH1cbiAgcHVibGljIGdldCBtYXJrZXJzKCk6IFJlYWRvbmx5QXJyYXk8SU1hcmtlcj4ge1xuICAgIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKTtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5tYXJrZXJzO1xuICB9XG4gIHB1YmxpYyBnZXQgbW9kZXMoKTogSU1vZGVzIHtcbiAgICBjb25zdCBtID0gdGhpcy5fY29yZS5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXM7XG4gICAgbGV0IG1vdXNlVHJhY2tpbmdNb2RlOiAnbm9uZScgfCAneDEwJyB8ICd2dDIwMCcgfCAnZHJhZycgfCAnYW55JyA9ICdub25lJztcbiAgICBzd2l0Y2ggKHRoaXMuX2NvcmUuY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCkge1xuICAgICAgY2FzZSAnWDEwJzogbW91c2VUcmFja2luZ01vZGUgPSAneDEwJzsgYnJlYWs7XG4gICAgICBjYXNlICdWVDIwMCc6IG1vdXNlVHJhY2tpbmdNb2RlID0gJ3Z0MjAwJzsgYnJlYWs7XG4gICAgICBjYXNlICdEUkFHJzogbW91c2VUcmFja2luZ01vZGUgPSAnZHJhZyc7IGJyZWFrO1xuICAgICAgY2FzZSAnQU5ZJzogbW91c2VUcmFja2luZ01vZGUgPSAnYW55JzsgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhcHBsaWNhdGlvbkN1cnNvcktleXNNb2RlOiBtLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyxcbiAgICAgIGFwcGxpY2F0aW9uS2V5cGFkTW9kZTogbS5hcHBsaWNhdGlvbktleXBhZCxcbiAgICAgIGJyYWNrZXRlZFBhc3RlTW9kZTogbS5icmFja2V0ZWRQYXN0ZU1vZGUsXG4gICAgICBpbnNlcnRNb2RlOiB0aGlzLl9jb3JlLmNvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUsXG4gICAgICBtb3VzZVRyYWNraW5nTW9kZTogbW91c2VUcmFja2luZ01vZGUsXG4gICAgICBvcmlnaW5Nb2RlOiBtLm9yaWdpbixcbiAgICAgIHJldmVyc2VXcmFwYXJvdW5kTW9kZTogbS5yZXZlcnNlV3JhcGFyb3VuZCxcbiAgICAgIHNlbmRGb2N1c01vZGU6IG0uc2VuZEZvY3VzLFxuICAgICAgd3JhcGFyb3VuZE1vZGU6IG0ud3JhcGFyb3VuZFxuICAgIH07XG4gIH1cbiAgcHVibGljIGdldCBvcHRpb25zKCk6IFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+IHtcbiAgICByZXR1cm4gdGhpcy5fcHVibGljT3B0aW9ucztcbiAgfVxuICBwdWJsaWMgc2V0IG9wdGlvbnMob3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucykge1xuICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5fcHVibGljT3B0aW9uc1twcm9wTmFtZV0gPSBvcHRpb25zW3Byb3BOYW1lXTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGlucHV0KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuaW5wdXQoZGF0YSwgd2FzVXNlcklucHV0KTtcbiAgfVxuICBwdWJsaWMgcmVzaXplKGNvbHVtbnM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1ucywgcm93cyk7XG4gICAgdGhpcy5fY29yZS5yZXNpemUoY29sdW1ucywgcm93cyk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlciA9IDApOiBJTWFya2VyIHwgdW5kZWZpbmVkIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY3Vyc29yWU9mZnNldCk7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuYWRkTWFya2VyKGN1cnNvcllPZmZzZXQpO1xuICB9XG4gIHB1YmxpYyBhZGRNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJNYXJrZXIoY3Vyc29yWU9mZnNldCk7XG4gIH1cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGFtb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxMaW5lcyhhbW91bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHBhZ2VDb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxQYWdlcyhwYWdlQ291bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFRvVG9wKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9MaW5lKGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGxpbmUpO1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9MaW5lKGxpbmUpO1xuICB9XG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmNsZWFyKCk7XG4gIH1cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGUoZGF0YSwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyB3cml0ZWxuKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGUoZGF0YSk7XG4gICAgdGhpcy5fY29yZS53cml0ZSgnXFxyXFxuJywgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnJlc2V0KCk7XG4gIH1cbiAgcHVibGljIGxvYWRBZGRvbihhZGRvbjogSVRlcm1pbmFsQWRkb24pOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIGNhdXNlIGlzc3VlcyBpZiB0aGUgYWRkb24gY2FsbHMgcmVuZGVyZXIgYXBpc1xuICAgIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcyBhcyBhbnksIGFkZG9uKTtcbiAgfVxuXG4gIHByaXZhdGUgX3ZlcmlmeUludGVnZXJzKC4uLnZhbHVlczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlID09PSBJbmZpbml0eSB8fCBpc05hTih2YWx1ZSkgfHwgdmFsdWUgJSAxICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBBUEkgb25seSBhY2NlcHRzIGludGVnZXJzJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBTaGFyZWQgdHlwZSBkZWZpbml0aW9ucyB1c2VkIGJ5IGJvdGggZnJvbnRlbmQgYW5kIGJhY2tlbmRcbiAqL1xuXG4vKipcbiAqIEhUVFAgbWV0aG9kcyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIEh0dHBNZXRob2Qge1xuICBHRVQgPSAnR0VUJyxcbiAgUE9TVCA9ICdQT1NUJyxcbiAgUFVUID0gJ1BVVCcsXG4gIERFTEVURSA9ICdERUxFVEUnLFxuICBQQVRDSCA9ICdQQVRDSCcsXG4gIEhFQUQgPSAnSEVBRCcsXG4gIE9QVElPTlMgPSAnT1BUSU9OUycsXG59XG5cbi8qKlxuICogVHlwZXMgb2Ygc2VydmVyIGV2ZW50cyB0aGF0IGNhbiBiZSByZWNlaXZlZCB2aWEgU2VydmVyLVNlbnQgRXZlbnRzIChTU0UpLlxuICogTWF0Y2hlcyB0aGUgU3dpZnQgU2VydmVyRXZlbnRUeXBlIGVudW0gZm9yIHR5cGUgc2FmZXR5IGFjcm9zcyBwbGF0Zm9ybXMuXG4gKi9cbmV4cG9ydCBlbnVtIFNlcnZlckV2ZW50VHlwZSB7XG4gIFNlc3Npb25TdGFydCA9ICdzZXNzaW9uLXN0YXJ0JyxcbiAgU2Vzc2lvbkV4aXQgPSAnc2Vzc2lvbi1leGl0JyxcbiAgQ29tbWFuZEZpbmlzaGVkID0gJ2NvbW1hbmQtZmluaXNoZWQnLFxuICBDb21tYW5kRXJyb3IgPSAnY29tbWFuZC1lcnJvcicsXG4gIEJlbGwgPSAnYmVsbCcsXG4gIENsYXVkZVR1cm4gPSAnY2xhdWRlLXR1cm4nLFxuICBDb25uZWN0ZWQgPSAnY29ubmVjdGVkJyxcbiAgVGVzdE5vdGlmaWNhdGlvbiA9ICd0ZXN0LW5vdGlmaWNhdGlvbicsXG59XG5cbi8qKlxuICogU2VydmVyIGV2ZW50IHJlY2VpdmVkIHZpYSBTZXJ2ZXItU2VudCBFdmVudHMgKFNTRSkuXG4gKiBNYXRjaGVzIHRoZSBTd2lmdCBTZXJ2ZXJFdmVudCBzdHJ1Y3QgZm9yIGNyb3NzLXBsYXRmb3JtIGNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmVyRXZlbnQge1xuICB0eXBlOiBTZXJ2ZXJFdmVudFR5cGU7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgc2Vzc2lvbk5hbWU/OiBzdHJpbmc7XG4gIGNvbW1hbmQ/OiBzdHJpbmc7XG4gIGV4aXRDb2RlPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgcHJvY2Vzc0luZm8/OiBzdHJpbmc7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nOyAvLyBJU08gODYwMSBmb3JtYXRcbiAgLy8gVGVzdCBub3RpZmljYXRpb24gc3BlY2lmaWMgZmllbGRzXG4gIHRpdGxlPzogc3RyaW5nO1xuICBib2R5Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFNlc3Npb24gc3RhdHVzIGVudW1cbiAqL1xuZXhwb3J0IHR5cGUgU2Vzc2lvblN0YXR1cyA9ICdzdGFydGluZycgfCAncnVubmluZycgfCAnZXhpdGVkJztcblxuLyoqXG4gKiBDb3JlIHNlc3Npb24gaW5mb3JtYXRpb24gc3RvcmVkIGluIHNlc3Npb24uanNvblxuICogTWluaW1hbCwgY2xlYW4gZGF0YSBwZXJzaXN0ZWQgdG8gZGlza1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25JbmZvIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjb21tYW5kOiBzdHJpbmdbXTtcbiAgd29ya2luZ0Rpcjogc3RyaW5nO1xuICBzdGF0dXM6IFNlc3Npb25TdGF0dXM7XG4gIGV4aXRDb2RlPzogbnVtYmVyO1xuICBzdGFydGVkQXQ6IHN0cmluZztcbiAgcGlkPzogbnVtYmVyO1xuICBpbml0aWFsQ29scz86IG51bWJlcjtcbiAgaW5pdGlhbFJvd3M/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBCeXRlIG9mZnNldCBvZiB0aGUgbGFzdCBjbGVhciBldmVudCBpbiB0aGUgc2Vzc2lvbiBzdGRvdXQgZmlsZS5cbiAgICogVXNlZCB0byBxdWlja2x5IHNlZWsgdG8gdGhlIG1vc3QgcmVjZW50IGNvbnRlbnQgd2hlbiByZXBsYXlpbmcgY2FzdHMuXG4gICAqL1xuICBsYXN0Q2xlYXJPZmZzZXQ/OiBudW1iZXI7XG4gIHZlcnNpb24/OiBzdHJpbmc7IC8vIFZpYmVUdW5uZWwgdmVyc2lvbiB0aGF0IGNyZWF0ZWQgdGhpcyBzZXNzaW9uXG4gIGdpdFJlcG9QYXRoPzogc3RyaW5nOyAvLyBSZXBvc2l0b3J5IHJvb3QgcGF0aFxuICBnaXRCcmFuY2g/OiBzdHJpbmc7IC8vIEN1cnJlbnQgYnJhbmNoIG5hbWVcbiAgZ2l0QWhlYWRDb3VudD86IG51bWJlcjsgLy8gQ29tbWl0cyBhaGVhZCBvZiB1cHN0cmVhbVxuICBnaXRCZWhpbmRDb3VudD86IG51bWJlcjsgLy8gQ29tbWl0cyBiZWhpbmQgdXBzdHJlYW1cbiAgZ2l0SGFzQ2hhbmdlcz86IGJvb2xlYW47IC8vIEhhcyB1bmNvbW1pdHRlZCBjaGFuZ2VzXG4gIGdpdElzV29ya3RyZWU/OiBib29sZWFuOyAvLyBJcyBhIHdvcmt0cmVlIChub3QgbWFpbiByZXBvKVxuICBnaXRNYWluUmVwb1BhdGg/OiBzdHJpbmc7IC8vIE1haW4gcmVwb3NpdG9yeSBwYXRoIChzYW1lIGFzIGdpdFJlcG9QYXRoIGlmIG5vdCB3b3JrdHJlZSlcbiAgLy8gR2l0IHN0YXR1cyBkZXRhaWxzIChub3QgcGVyc2lzdGVkIHRvIGRpc2ssIGZldGNoZWQgZHluYW1pY2FsbHkpXG4gIGdpdE1vZGlmaWVkQ291bnQ/OiBudW1iZXI7IC8vIE51bWJlciBvZiBtb2RpZmllZCBmaWxlc1xuICBnaXRVbnRyYWNrZWRDb3VudD86IG51bWJlcjsgLy8gTnVtYmVyIG9mIHVudHJhY2tlZCBmaWxlc1xuICBnaXRTdGFnZWRDb3VudD86IG51bWJlcjsgLy8gTnVtYmVyIG9mIHN0YWdlZCBmaWxlc1xuICBnaXRBZGRlZENvdW50PzogbnVtYmVyOyAvLyBOdW1iZXIgb2YgYWRkZWQgZmlsZXNcbiAgZ2l0RGVsZXRlZENvdW50PzogbnVtYmVyOyAvLyBOdW1iZXIgb2YgZGVsZXRlZCBmaWxlc1xuICAvKipcbiAgICogV2hldGhlciB0aGlzIHNlc3Npb24gd2FzIHNwYXduZWQgZnJvbSB3aXRoaW4gVmliZVR1bm5lbCBpdHNlbGYuXG4gICAqIFVzZWQgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiBkaXJlY3QgdGVybWluYWwgc2Vzc2lvbnMgYW5kIG5lc3RlZCBWaWJlVHVubmVsIHNlc3Npb25zLlxuICAgKiBTZXNzaW9ucyB3aXRoIGF0dGFjaGVkVmlhVlQ9dHJ1ZSBhcmUgc3Bhd25lZCBmcm9tIHdpdGhpbiBhbiBleGlzdGluZyBWaWJlVHVubmVsIHNlc3Npb24uXG4gICAqL1xuICBhdHRhY2hlZFZpYVZUPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBTZXNzaW9uIGFzIHJldHVybmVkIGJ5IEFQSSBlbmRwb2ludHNcbiAqIEluY2x1ZGVzIGV2ZXJ5dGhpbmcgZnJvbSBTZXNzaW9uSW5mbyBwbHVzIGFkZGl0aW9uYWwgcnVudGltZS9jb21wdXRlZCBmaWVsZHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uIGV4dGVuZHMgU2Vzc2lvbkluZm8ge1xuICBsYXN0TW9kaWZpZWQ6IHN0cmluZztcbiAgYWN0aXZlPzogYm9vbGVhbjtcblxuICAvLyBBY3Rpdml0eSBpbmZvcm1hdGlvbiAoZm9yIGR5bmFtaWMgdGl0bGUgbW9kZSlcbiAgYWN0aXZpdHlTdGF0dXM/OiB7XG4gICAgaXNBY3RpdmU6IGJvb2xlYW47XG4gICAgc3BlY2lmaWNTdGF0dXM/OiB7XG4gICAgICBhcHA6IHN0cmluZztcbiAgICAgIHN0YXR1czogc3RyaW5nO1xuICAgIH07XG4gIH07XG5cbiAgLy8gU291cmNlIGluZm9ybWF0aW9uIChmb3IgSFEgbW9kZSlcbiAgc291cmNlPzogJ2xvY2FsJyB8ICdyZW1vdGUnO1xuICByZW1vdGVJZD86IHN0cmluZztcbiAgcmVtb3RlTmFtZT86IHN0cmluZztcbiAgcmVtb3RlVXJsPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEFjdGl2aXR5IHN0YXR1cyBmb3IgYSBzZXNzaW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkFjdGl2aXR5IHtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICBzZXNzaW9uPzogU2Vzc2lvbkluZm87XG4gIHNwZWNpZmljU3RhdHVzPzoge1xuICAgIGFwcDogc3RyaW5nO1xuICAgIHN0YXR1czogc3RyaW5nO1xuICB9O1xufVxuXG4vKipcbiAqIFRlcm1pbmFsIHRpdGxlIG1hbmFnZW1lbnQgbW9kZXNcbiAqL1xuZXhwb3J0IGVudW0gVGl0bGVNb2RlIHtcbiAgTk9ORSA9ICdub25lJywgLy8gTm8gdGl0bGUgbWFuYWdlbWVudFxuICBGSUxURVIgPSAnZmlsdGVyJywgLy8gQmxvY2sgYWxsIHRpdGxlIGNoYW5nZXMgZnJvbSBhcHBzXG4gIFNUQVRJQyA9ICdzdGF0aWMnLCAvLyBTdGF0aWMgdGl0bGU6IHBhdGggXHUyMDE0IGNvbW1hbmQgXHUyMDE0IHNlc3Npb25cbiAgRFlOQU1JQyA9ICdkeW5hbWljJywgLy8gU3RhdGljICsgbGl2ZSBhY3Rpdml0eSBpbmRpY2F0b3JzXG59XG5cbi8qKlxuICogU2Vzc2lvbiBjcmVhdGlvbiBvcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNyZWF0ZU9wdGlvbnMge1xuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHdvcmtpbmdEaXI/OiBzdHJpbmc7XG4gIGNvbHM/OiBudW1iZXI7XG4gIHJvd3M/OiBudW1iZXI7XG4gIHRpdGxlTW9kZT86IFRpdGxlTW9kZTtcbiAgZ2l0UmVwb1BhdGg/OiBzdHJpbmc7XG4gIGdpdEJyYW5jaD86IHN0cmluZztcbiAgZ2l0QWhlYWRDb3VudD86IG51bWJlcjtcbiAgZ2l0QmVoaW5kQ291bnQ/OiBudW1iZXI7XG4gIGdpdEhhc0NoYW5nZXM/OiBib29sZWFuO1xuICBnaXRJc1dvcmt0cmVlPzogYm9vbGVhbjtcbiAgZ2l0TWFpblJlcG9QYXRoPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFNlc3Npb24gaW5wdXQgKGtleWJvYXJkL3NwZWNpYWwga2V5cylcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uSW5wdXQge1xuICB0ZXh0Pzogc3RyaW5nO1xuICBrZXk/OiBTcGVjaWFsS2V5O1xufVxuXG4vKipcbiAqIFNwZWNpYWwga2V5cyB0aGF0IGNhbiBiZSBzZW50IHRvIHNlc3Npb25zXG4gKi9cbmV4cG9ydCB0eXBlIFNwZWNpYWxLZXkgPVxuICB8ICdhcnJvd191cCdcbiAgfCAnYXJyb3dfZG93bidcbiAgfCAnYXJyb3dfbGVmdCdcbiAgfCAnYXJyb3dfcmlnaHQnXG4gIHwgJ2VzY2FwZSdcbiAgfCAnZW50ZXInXG4gIHwgJ2N0cmxfZW50ZXInXG4gIHwgJ3NoaWZ0X2VudGVyJ1xuICB8ICdiYWNrc3BhY2UnXG4gIHwgJ3RhYidcbiAgfCAnc2hpZnRfdGFiJ1xuICB8ICdwYWdlX3VwJ1xuICB8ICdwYWdlX2Rvd24nXG4gIHwgJ2hvbWUnXG4gIHwgJ2VuZCdcbiAgfCAnZGVsZXRlJ1xuICB8ICdmMSdcbiAgfCAnZjInXG4gIHwgJ2YzJ1xuICB8ICdmNCdcbiAgfCAnZjUnXG4gIHwgJ2Y2J1xuICB8ICdmNydcbiAgfCAnZjgnXG4gIHwgJ2Y5J1xuICB8ICdmMTAnXG4gIHwgJ2YxMSdcbiAgfCAnZjEyJztcblxuLyoqXG4gKiBQdXNoIG5vdGlmaWNhdGlvbiBzdWJzY3JpcHRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQdXNoU3Vic2NyaXB0aW9uIHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAga2V5czoge1xuICAgIHAyNTZkaDogc3RyaW5nO1xuICAgIGF1dGg6IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBTdG9yZWQgcHVzaCBzdWJzY3JpcHRpb24gd2l0aCBtZXRhZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlZFB1c2hTdWJzY3JpcHRpb24gZXh0ZW5kcyBQdXNoU3Vic2NyaXB0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgZGV2aWNlSWQ6IHN0cmluZztcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgbGFzdFVzZWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBQdXNoIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFB1c2hOb3RpZmljYXRpb25QcmVmZXJlbmNlcyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIHNlc3Npb25FeGl0OiBib29sZWFuO1xuICBzZXNzaW9uU3RhcnQ6IGJvb2xlYW47XG4gIHNlc3Npb25FcnJvcjogYm9vbGVhbjtcbiAgY29tbWFuZE5vdGlmaWNhdGlvbnM6IGJvb2xlYW47XG4gIHN5c3RlbUFsZXJ0czogYm9vbGVhbjtcbiAgc291bmRFbmFibGVkOiBib29sZWFuO1xuICB2aWJyYXRpb25FbmFibGVkOiBib29sZWFuO1xuICBjbGF1ZGVUdXJuPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBQdXNoIG5vdGlmaWNhdGlvbiB0eXBlc1xuICovXG5leHBvcnQgdHlwZSBQdXNoTm90aWZpY2F0aW9uVHlwZSA9XG4gIHwgJ3Nlc3Npb25fZXhpdCdcbiAgfCAnc2Vzc2lvbl9zdGFydCdcbiAgfCAnc2Vzc2lvbl9lcnJvcidcbiAgfCAnc3lzdGVtX2FsZXJ0J1xuICB8ICd0ZXN0JztcblxuLyoqXG4gKiBQdXNoIG5vdGlmaWNhdGlvbiBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvbkRhdGEge1xuICB0eXBlOiBQdXNoTm90aWZpY2F0aW9uVHlwZTtcbiAgdGl0bGU6IHN0cmluZztcbiAgYm9keTogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICBiYWRnZT86IHN0cmluZztcbiAgdGFnPzogc3RyaW5nO1xuICBkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIGFjdGlvbnM/OiBBcnJheTx7XG4gICAgYWN0aW9uOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBpY29uPzogc3RyaW5nO1xuICB9PjtcbiAgcmVxdWlyZUludGVyYWN0aW9uPzogYm9vbGVhbjtcbiAgc2lsZW50PzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBQdXNoIG5vdGlmaWNhdGlvbiBoaXN0b3J5IGVudHJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvbkhpc3RvcnlFbnRyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICB0eXBlOiBQdXNoTm90aWZpY2F0aW9uVHlwZTtcbiAgdGl0bGU6IHN0cmluZztcbiAgYm9keTogc3RyaW5nO1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZztcbiAgZGV2aWNlSWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGV2aWNlIHJlZ2lzdHJhdGlvbiBmb3IgcHVzaCBub3RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaERldmljZVJlZ2lzdHJhdGlvbiB7XG4gIGRldmljZUlkOiBzdHJpbmc7XG4gIHN1YnNjcmlwdGlvbjogUHVzaFN1YnNjcmlwdGlvbjtcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFNlcnZlciBzdGF0dXMgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXJ2ZXJTdGF0dXMge1xuICBtYWNBcHBDb25uZWN0ZWQ6IGJvb2xlYW47XG4gIGlzSFFNb2RlOiBib29sZWFuO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG4iLCAiLy8gTW9kdWxlLWxldmVsIHZhcmlhYmxlIHRvIHRyYWNrIGlmIGNyeXB0byBpcyBhdmFpbGFibGVcbmxldCBjcnlwdG9TdWJ0bGU6IFN1YnRsZUNyeXB0byB8IHVuZGVmaW5lZDtcblxuLy8gVHJ5IHRvIGdldCBzdWJ0bGUgY3J5cHRvIGlmIGF2YWlsYWJsZSwgYnV0IGRvbid0IHRocm93IGF0IG1vZHVsZSBsb2FkXG5pZiAoZ2xvYmFsVGhpcy5jcnlwdG8/LnN1YnRsZSkge1xuICBjcnlwdG9TdWJ0bGUgPSBnbG9iYWxUaGlzLmNyeXB0by5zdWJ0bGU7XG59XG5cbmludGVyZmFjZSBTU0hLZXkge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpY0tleTogc3RyaW5nO1xuICBwcml2YXRlS2V5OiBzdHJpbmc7XG4gIGFsZ29yaXRobTogJ0VkMjU1MTknO1xuICBlbmNyeXB0ZWQ6IGJvb2xlYW47XG4gIGZpbmdlcnByaW50OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2lnbmF0dXJlUmVzdWx0IHtcbiAgc2lnbmF0dXJlOiBzdHJpbmc7XG4gIGFsZ29yaXRobTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQnJvd3NlclNTSEFnZW50IHtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9TVE9SQUdFX0tFWSA9ICd2aWJldHVubmVsX3NzaF9rZXlzJztcbiAgcHJpdmF0ZSBrZXlzOiBNYXA8c3RyaW5nLCBTU0hLZXk+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHN0b3JhZ2VLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBjcnlwdG9FcnJvclNob3duID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoY3VzdG9tU3RvcmFnZUtleT86IHN0cmluZykge1xuICAgIHRoaXMuc3RvcmFnZUtleSA9IGN1c3RvbVN0b3JhZ2VLZXkgfHwgQnJvd3NlclNTSEFnZW50LkRFRkFVTFRfU1RPUkFHRV9LRVk7XG4gICAgdGhpcy5sb2FkS2V5c0Zyb21TdG9yYWdlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgV2ViIENyeXB0byBBUEkgaXMgYXZhaWxhYmxlIGFuZCBzaG93IGVycm9yIGlmIG5vdFxuICAgKi9cbiAgcHJpdmF0ZSBlbnN1cmVDcnlwdG9BdmFpbGFibGUoKTogdm9pZCB7XG4gICAgaWYgKCFjcnlwdG9TdWJ0bGUpIHtcbiAgICAgIGlmICghdGhpcy5jcnlwdG9FcnJvclNob3duKSB7XG4gICAgICAgIHRoaXMuc2hvd0NyeXB0b0Vycm9yKCk7XG4gICAgICAgIHRoaXMuY3J5cHRvRXJyb3JTaG93biA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYiBDcnlwdG8gQVBJIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyB1c2VyLWZyaWVuZGx5IGVycm9yIGJhbm5lciBmb3IgY3J5cHRvIHVuYXZhaWxhYmlsaXR5XG4gICAqL1xuICBwcml2YXRlIHNob3dDcnlwdG9FcnJvcigpOiB2b2lkIHtcbiAgICAvLyBDaGVjayBpZiBET00gaXMgcmVhZHlcbiAgICBpZiAoIWRvY3VtZW50LmJvZHkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYiBDcnlwdG8gQVBJIG5vdCBhdmFpbGFibGUgYW5kIERPTSBub3QgcmVhZHkgdG8gc2hvdyBlcnJvcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVjdCBpZiB3ZSdyZSBvbiBhIGxvY2FsIG5ldHdvcmsgSVBcbiAgICBjb25zdCBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICBjb25zdCBpc0xvY2FsTmV0d29yayA9IGhvc3RuYW1lLm1hdGNoKC9eKDE5MlxcLjE2OFxcLnwxMFxcLnwxNzJcXC4oMVs2LTldfDJbMC05XXwzWzAtMV0pXFwuKS8pO1xuICAgIGNvbnN0IGlzTm9uTG9jYWxob3N0ID0gaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnICYmIGhvc3RuYW1lICE9PSAnMTI3LjAuMC4xJztcblxuICAgIGxldCBlcnJvck1lc3NhZ2UgPVxuICAgICAgJ1NTSCBrZXkgb3BlcmF0aW9ucyBhcmUgdW5hdmFpbGFibGUgYmVjYXVzZSB0aGUgV2ViIENyeXB0byBBUEkgaXMgbm90IGFjY2Vzc2libGUuXFxuXFxuJztcblxuICAgIGlmIChpc0xvY2FsTmV0d29yayB8fCAoaXNOb25Mb2NhbGhvc3QgJiYgd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cDonKSkge1xuICAgICAgLy8gRGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEhUVFAgYW5kIEhUVFBTIG9uIGxvY2FsIElQc1xuICAgICAgaWYgKGlzTG9jYWxOZXR3b3JrICYmIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9XG4gICAgICAgICAgXCJFdmVuIHRob3VnaCB5b3UncmUgdXNpbmcgSFRUUFMsIGJyb3dzZXJzIGJsb2NrIHRoZSBXZWIgQ3J5cHRvIEFQSSBvbiBsb2NhbCBuZXR3b3JrIElQcy5cXG5cXG5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPVxuICAgICAgICAgICdUaGlzIGhhcHBlbnMgd2hlbiBhY2Nlc3NpbmcgVmliZVR1bm5lbCBvdmVyIEhUVFAgZnJvbSBub24tbG9jYWxob3N0IGFkZHJlc3Nlcy5cXG5cXG4nO1xuICAgICAgfVxuICAgICAgZXJyb3JNZXNzYWdlICs9ICdUbyBmaXggdGhpcywgdXNlIG9uZSBvZiB0aGVzZSBtZXRob2RzOlxcbic7XG4gICAgICBlcnJvck1lc3NhZ2UgKz0gJzEuIEFjY2VzcyB2aWEgaHR0cDovL2xvY2FsaG9zdDo0MDIwIGluc3RlYWRcXG4nO1xuICAgICAgZXJyb3JNZXNzYWdlICs9ICcgICAtIFVzZSBTU0ggdHVubmVsOiBzc2ggLUwgNDAyMDpsb2NhbGhvc3Q6NDAyMCB1c2VyQHNlcnZlclxcbic7XG4gICAgICBlcnJvck1lc3NhZ2UgKz0gJzIuIEVuYWJsZSBIVFRQUyBvbiB0aGUgc2VydmVyIChyZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbilcXG4nO1xuICAgICAgZXJyb3JNZXNzYWdlICs9XG4gICAgICAgICczLiBGb3IgQ2hyb21lOiBFbmFibGUgaW5zZWN1cmUgb3JpZ2lucyBhdCBjaHJvbWU6Ly9mbGFncy8jdW5zYWZlbHktdHJlYXQtaW5zZWN1cmUtb3JpZ2luLWFzLXNlY3VyZVxcbic7XG4gICAgICBlcnJvck1lc3NhZ2UgKz0gJyAgIC0gQWRkIHlvdXIgc2VydmVyIFVSTCAoZS5nLiwgaHR0cDovLzE5Mi4xNjguMS4xMDA6NDAyMClcXG4nO1xuICAgICAgZXJyb3JNZXNzYWdlICs9ICcgICAtIFJlc3RhcnQgQ2hyb21lIGFmdGVyIGNoYW5naW5nIHRoZSBmbGFnXFxuJztcbiAgICAgIGVycm9yTWVzc2FnZSArPSAnICAgLSBOb3RlOiBGaXJlZm94IGFsc28gZW5mb3JjZXMgdGhlc2UgcmVzdHJpY3Rpb25zIHNpbmNlIHY3NSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVycm9yTWVzc2FnZSArPSAnWW91ciBicm93c2VyIG1heSBub3Qgc3VwcG9ydCB0aGUgV2ViIENyeXB0byBBUEkgb3IgaXQgbWF5IGJlIGRpc2FibGVkLlxcbic7XG4gICAgICBlcnJvck1lc3NhZ2UgKz0gJ1BsZWFzZSB1c2UgYSBtb2Rlcm4gYnJvd3NlciAoQ2hyb21lIDYwKywgRmlyZWZveCA3NSssIFNhZmFyaSAxMSspLic7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBhcHBlbmQgc3R5bGUgaWYgbm90IGFscmVhZHkgZXhpc3RzXG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3J5cHRvLWVycm9yLXN0eWxlJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlLmlkID0gJ2NyeXB0by1lcnJvci1zdHlsZSc7XG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLmNyeXB0by1lcnJvci1iYW5uZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGMyNjI2O1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcbiAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCBiYW5uZXIgaWYgbm90IGFscmVhZHkgZXhpc3RzXG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3J5cHRvLWVycm9yLWJhbm5lcicpKSB7XG4gICAgICBjb25zdCBiYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGJhbm5lci5jbGFzc05hbWUgPSAnY3J5cHRvLWVycm9yLWJhbm5lcic7XG4gICAgICBiYW5uZXIudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhbm5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFnZW50IGlzIHJlYWR5IChhbHdheXMgdHJ1ZSBzaW5jZSBubyB1bmxvY2sgbmVlZGVkKVxuICAgKi9cbiAgaXNVbmxvY2tlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgU1NIIHByaXZhdGUga2V5IHRvIHRoZSBhZ2VudFxuICAgKi9cbiAgYXN5bmMgYWRkS2V5KG5hbWU6IHN0cmluZywgcHJpdmF0ZUtleVBFTTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0aGlzLmVuc3VyZUNyeXB0b0F2YWlsYWJsZSgpO1xuXG4gICAgLy8gQWZ0ZXIgZW5zdXJlQ3J5cHRvQXZhaWxhYmxlLCB3ZSBrbm93IGNyeXB0b1N1YnRsZSBpcyBkZWZpbmVkXG4gICAgaWYgKCFjcnlwdG9TdWJ0bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ3J5cHRvIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gUGFyc2UgYW5kIHZhbGlkYXRlIHRoZSBwcml2YXRlIGtleSAoZGV0ZWN0IGVuY3J5cHRpb24gd2l0aG91dCBkZWNyeXB0aW5nKVxuICAgICAgY29uc3Qga2V5RGF0YSA9IGF3YWl0IHRoaXMucGFyc2VQcml2YXRlS2V5KHByaXZhdGVLZXlQRU0pO1xuXG4gICAgICBjb25zdCBrZXlJZCA9IHRoaXMuZ2VuZXJhdGVLZXlJZCgpO1xuICAgICAgY29uc3Qgc3NoS2V5OiBTU0hLZXkgPSB7XG4gICAgICAgIGlkOiBrZXlJZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcHVibGljS2V5OiBrZXlEYXRhLnB1YmxpY0tleSxcbiAgICAgICAgcHJpdmF0ZUtleTogcHJpdmF0ZUtleVBFTSxcbiAgICAgICAgYWxnb3JpdGhtOiAnRWQyNTUxOScsXG4gICAgICAgIGVuY3J5cHRlZDoga2V5RGF0YS5lbmNyeXB0ZWQsXG4gICAgICAgIGZpbmdlcnByaW50OiBrZXlEYXRhLmZpbmdlcnByaW50LFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMua2V5cy5zZXQoa2V5SWQsIHNzaEtleSk7XG4gICAgICB0aGlzLnNhdmVLZXlzVG9TdG9yYWdlKCk7XG5cbiAgICAgIHJldHVybiBrZXlJZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYWRkIFNTSCBrZXk6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBTU0gga2V5IGZyb20gYWdlbnRcbiAgICovXG4gIHJlbW92ZUtleShrZXlJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5rZXlzLmRlbGV0ZShrZXlJZCk7XG4gICAgdGhpcy5zYXZlS2V5c1RvU3RvcmFnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYWxsIFNTSCBrZXlzXG4gICAqL1xuICBsaXN0S2V5cygpOiBBcnJheTxPbWl0PFNTSEtleSwgJ3ByaXZhdGVLZXknPj4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMua2V5cy52YWx1ZXMoKSkubWFwKChrZXkpID0+ICh7XG4gICAgICBpZDoga2V5LmlkLFxuICAgICAgbmFtZToga2V5Lm5hbWUsXG4gICAgICBwdWJsaWNLZXk6IGtleS5wdWJsaWNLZXksXG4gICAgICBhbGdvcml0aG06IGtleS5hbGdvcml0aG0sXG4gICAgICBlbmNyeXB0ZWQ6IGtleS5lbmNyeXB0ZWQsXG4gICAgICBmaW5nZXJwcmludDoga2V5LmZpbmdlcnByaW50LFxuICAgICAgY3JlYXRlZEF0OiBrZXkuY3JlYXRlZEF0LFxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduIGRhdGEgd2l0aCBhIHNwZWNpZmljIFNTSCBrZXlcbiAgICovXG4gIGFzeW5jIHNpZ24oa2V5SWQ6IHN0cmluZywgZGF0YTogc3RyaW5nKTogUHJvbWlzZTxTaWduYXR1cmVSZXN1bHQ+IHtcbiAgICB0aGlzLmVuc3VyZUNyeXB0b0F2YWlsYWJsZSgpO1xuXG4gICAgLy8gQWZ0ZXIgZW5zdXJlQ3J5cHRvQXZhaWxhYmxlLCB3ZSBrbm93IGNyeXB0b1N1YnRsZSBpcyBkZWZpbmVkXG4gICAgaWYgKCFjcnlwdG9TdWJ0bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ3J5cHRvIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSB0aGlzLmtleXMuZ2V0KGtleUlkKTtcbiAgICBpZiAoIWtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTU0gga2V5IG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGlmICgha2V5LnByaXZhdGVLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUHJpdmF0ZSBrZXkgbm90IGF2YWlsYWJsZSBmb3Igc2lnbmluZycpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBEZWNyeXB0IHByaXZhdGUga2V5IGlmIGVuY3J5cHRlZFxuICAgICAgbGV0IHByaXZhdGVLZXlQRU0gPSBrZXkucHJpdmF0ZUtleTtcbiAgICAgIGlmIChrZXkuZW5jcnlwdGVkKSB7XG4gICAgICAgIC8vIFByb21wdCBmb3IgcGFzc3dvcmQgaWYga2V5IGlzIGVuY3J5cHRlZFxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGF3YWl0IHRoaXMucHJvbXB0Rm9yUGFzc3dvcmQoa2V5Lm5hbWUpO1xuICAgICAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZCByZXF1aXJlZCBmb3IgZW5jcnlwdGVkIGtleScpO1xuICAgICAgICB9XG4gICAgICAgIHByaXZhdGVLZXlQRU0gPSBhd2FpdCB0aGlzLmRlY3J5cHRQcml2YXRlS2V5KGtleS5wcml2YXRlS2V5LCBwYXNzd29yZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEltcG9ydCB0aGUgcHJpdmF0ZSBrZXkgZm9yIHNpZ25pbmdcbiAgICAgIGNvbnN0IHByaXZhdGVLZXkgPSBhd2FpdCB0aGlzLmltcG9ydFByaXZhdGVLZXkocHJpdmF0ZUtleVBFTSwga2V5LmFsZ29yaXRobSk7XG5cbiAgICAgIC8vIENvbnZlcnQgY2hhbGxlbmdlIGRhdGEgdG8gYnVmZmVyIChicm93c2VyLWNvbXBhdGlibGUpXG4gICAgICBjb25zdCBkYXRhQnVmZmVyID0gdGhpcy5iYXNlNjRUb0FycmF5QnVmZmVyKGRhdGEpO1xuXG4gICAgICAvLyBTaWduIHRoZSBkYXRhXG4gICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjcnlwdG9TdWJ0bGUuc2lnbih7IG5hbWU6ICdFZDI1NTE5JyB9LCBwcml2YXRlS2V5LCBkYXRhQnVmZmVyKTtcblxuICAgICAgLy8gUmV0dXJuIGJhc2U2NCBlbmNvZGVkIHNpZ25hdHVyZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2lnbmF0dXJlOiB0aGlzLmFycmF5QnVmZmVyVG9CYXNlNjQoc2lnbmF0dXJlKSxcbiAgICAgICAgYWxnb3JpdGhtOiBrZXkuYWxnb3JpdGhtLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2lnbiBkYXRhOiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBTU0gga2V5IHBhaXIgaW4gdGhlIGJyb3dzZXJcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlS2V5UGFpcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTx7IGtleUlkOiBzdHJpbmc7IHByaXZhdGVLZXlQRU06IHN0cmluZyB9PiB7XG4gICAgdGhpcy5lbnN1cmVDcnlwdG9BdmFpbGFibGUoKTtcblxuICAgIC8vIEFmdGVyIGVuc3VyZUNyeXB0b0F2YWlsYWJsZSwgd2Uga25vdyBjcnlwdG9TdWJ0bGUgaXMgZGVmaW5lZFxuICAgIGlmICghY3J5cHRvU3VidGxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NyeXB0byBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQxMSBTU0ggQWdlbnQ6IFN0YXJ0aW5nIEVkMjU1MTkga2V5IGdlbmVyYXRpb24gZm9yIFwiJHtuYW1lfVwiYCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5UGFpciA9IGF3YWl0IGNyeXB0b1N1YnRsZS5nZW5lcmF0ZUtleShcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdFZDI1NTE5JyxcbiAgICAgICAgfSBhcyBBbGdvcml0aG1JZGVudGlmaWVyLFxuICAgICAgICB0cnVlLFxuICAgICAgICBbJ3NpZ24nLCAndmVyaWZ5J11cbiAgICAgICk7XG5cbiAgICAgIC8vIEV4cG9ydCBrZXlzXG4gICAgICBjb25zdCBjcnlwdG9LZXlQYWlyID0ga2V5UGFpciBhcyBDcnlwdG9LZXlQYWlyO1xuICAgICAgY29uc3QgcHJpdmF0ZUtleUJ1ZmZlciA9IGF3YWl0IGNyeXB0b1N1YnRsZS5leHBvcnRLZXkoJ3BrY3M4JywgY3J5cHRvS2V5UGFpci5wcml2YXRlS2V5KTtcbiAgICAgIGNvbnN0IHB1YmxpY0tleUJ1ZmZlciA9IGF3YWl0IGNyeXB0b1N1YnRsZS5leHBvcnRLZXkoJ3JhdycsIGNyeXB0b0tleVBhaXIucHVibGljS2V5KTtcblxuICAgICAgLy8gQ29udmVydCB0byBwcm9wZXIgZm9ybWF0c1xuICAgICAgbGV0IHByaXZhdGVLZXlQRU0gPSB0aGlzLmFycmF5QnVmZmVyVG9QRU0ocHJpdmF0ZUtleUJ1ZmZlciwgJ1BSSVZBVEUgS0VZJyk7XG4gICAgICBjb25zdCBwdWJsaWNLZXlTU0ggPSB0aGlzLmNvbnZlcnRFZDI1NTE5VG9TU0hQdWJsaWNLZXkocHVibGljS2V5QnVmZmVyKTtcblxuICAgICAgLy8gRW5jcnlwdCBwcml2YXRlIGtleSBpZiBwYXNzd29yZCBwcm92aWRlZFxuICAgICAgY29uc3QgaXNFbmNyeXB0ZWQgPSAhIXBhc3N3b3JkO1xuICAgICAgaWYgKHBhc3N3b3JkKSB7XG4gICAgICAgIHByaXZhdGVLZXlQRU0gPSBhd2FpdCB0aGlzLmVuY3J5cHRQcml2YXRlS2V5KHByaXZhdGVLZXlQRU0sIHBhc3N3b3JkKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qga2V5SWQgPSB0aGlzLmdlbmVyYXRlS2V5SWQoKTtcbiAgICAgIGNvbnN0IHNzaEtleTogU1NIS2V5ID0ge1xuICAgICAgICBpZDoga2V5SWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHB1YmxpY0tleTogcHVibGljS2V5U1NILFxuICAgICAgICBwcml2YXRlS2V5OiBwcml2YXRlS2V5UEVNLFxuICAgICAgICBhbGdvcml0aG06ICdFZDI1NTE5JyxcbiAgICAgICAgZW5jcnlwdGVkOiBpc0VuY3J5cHRlZCxcbiAgICAgICAgZmluZ2VycHJpbnQ6IGF3YWl0IHRoaXMuZ2VuZXJhdGVGaW5nZXJwcmludChwdWJsaWNLZXlTU0gpLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFN0b3JlIGtleSB3aXRoIHByaXZhdGUga2V5IGZvciBicm93c2VyLWJhc2VkIHNpZ25pbmdcbiAgICAgIHRoaXMua2V5cy5zZXQoa2V5SWQsIHNzaEtleSk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVLZXlzVG9TdG9yYWdlKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMTEgU1NIIEFnZW50OiBLZXkgXCIke25hbWV9XCIgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseSB3aXRoIElEOiAke2tleUlkfWApO1xuICAgICAgcmV0dXJuIHsga2V5SWQsIHByaXZhdGVLZXlQRU0gfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUga2V5IHBhaXI6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBwdWJsaWMga2V5IGluIFNTSCBmb3JtYXRcbiAgICovXG4gIGdldFB1YmxpY0tleShrZXlJZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5rZXlzLmdldChrZXlJZCk7XG4gICAgcmV0dXJuIGtleSA/IGtleS5wdWJsaWNLZXkgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwcml2YXRlIGtleSBmb3IgYSBzcGVjaWZpYyBrZXkgSURcbiAgICovXG4gIGdldFByaXZhdGVLZXkoa2V5SWQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IGtleSA9IHRoaXMua2V5cy5nZXQoa2V5SWQpO1xuICAgIHJldHVybiBrZXkgPyBrZXkucHJpdmF0ZUtleSA6IG51bGw7XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG5cbiAgcHJpdmF0ZSBhc3luYyBwYXJzZVByaXZhdGVLZXkocHJpdmF0ZUtleVBFTTogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgcHVibGljS2V5OiBzdHJpbmc7XG4gICAgYWxnb3JpdGhtOiAnRWQyNTUxOSc7XG4gICAgZmluZ2VycHJpbnQ6IHN0cmluZztcbiAgICBlbmNyeXB0ZWQ6IGJvb2xlYW47XG4gIH0+IHtcbiAgICAvLyBDaGVjayBpZiBrZXkgaXMgZW5jcnlwdGVkXG4gICAgY29uc3QgaXNFbmNyeXB0ZWQgPVxuICAgICAgcHJpdmF0ZUtleVBFTS5pbmNsdWRlcygnQkVHSU4gRU5DUllQVEVEIFBSSVZBVEUgS0VZJykgfHxcbiAgICAgIHByaXZhdGVLZXlQRU0uaW5jbHVkZXMoJ1Byb2MtVHlwZTogNCxFTkNSWVBURUQnKTtcblxuICAgIC8vIE9ubHkgc3VwcG9ydCBFZDI1NTE5IGtleXNcbiAgICBpZiAoXG4gICAgICBwcml2YXRlS2V5UEVNLmluY2x1ZGVzKCdCRUdJTiBQUklWQVRFIEtFWScpIHx8XG4gICAgICBwcml2YXRlS2V5UEVNLmluY2x1ZGVzKCdCRUdJTiBFTkNSWVBURUQgUFJJVkFURSBLRVknKVxuICAgICkge1xuICAgICAgLy8gRm9yIGltcG9ydGVkIGtleXMsIHdlIG5lZWQgdG8gZXh0cmFjdCB0aGUgcHVibGljIGtleVxuICAgICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gLSBpbiBwcm9kdWN0aW9uIHVzZSBwcm9wZXIga2V5IHBhcnNpbmdcbiAgICAgIGNvbnN0IG1vY2tQdWJsaWNLZXkgPSAnc3NoLWVkMjU1MTkgQUFBQUMzTnphQzFsWkRJMU5URTVBQUFBSUltcG9ydGVkLi4uJztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHB1YmxpY0tleTogbW9ja1B1YmxpY0tleSxcbiAgICAgICAgYWxnb3JpdGhtOiAnRWQyNTUxOScsXG4gICAgICAgIGZpbmdlcnByaW50OiBhd2FpdCB0aGlzLmdlbmVyYXRlRmluZ2VycHJpbnQobW9ja1B1YmxpY0tleSksXG4gICAgICAgIGVuY3J5cHRlZDogaXNFbmNyeXB0ZWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignT25seSBFZDI1NTE5IHByaXZhdGUga2V5cyBhcmUgc3VwcG9ydGVkJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGltcG9ydFByaXZhdGVLZXkocHJpdmF0ZUtleVBFTTogc3RyaW5nLCBfYWxnb3JpdGhtOiAnRWQyNTUxOScpOiBQcm9taXNlPENyeXB0b0tleT4ge1xuICAgIGlmICghY3J5cHRvU3VidGxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NyeXB0byBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIFBFTSBoZWFkZXJzIGFuZCBkZWNvZGVcbiAgICBjb25zdCBwZW1Db250ZW50cyA9IHByaXZhdGVLZXlQRU1cbiAgICAgIC5yZXBsYWNlKCctLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS0nLCAnJylcbiAgICAgIC5yZXBsYWNlKCctLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tJywgJycpXG4gICAgICAucmVwbGFjZSgvXFxzL2csICcnKTtcblxuICAgIGNvbnN0IGtleURhdGEgPSB0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocGVtQ29udGVudHMpO1xuXG4gICAgcmV0dXJuIGNyeXB0b1N1YnRsZS5pbXBvcnRLZXkoXG4gICAgICAncGtjczgnLFxuICAgICAga2V5RGF0YSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0VkMjU1MTknLFxuICAgICAgfSxcbiAgICAgIGZhbHNlLFxuICAgICAgWydzaWduJ11cbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBjb252ZXJ0RWQyNTUxOVRvU1NIUHVibGljS2V5KHB1YmxpY0tleUJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBzdHJpbmcge1xuICAgIC8vIENvbnZlcnQgcmF3IEVkMjU1MTkgcHVibGljIGtleSB0byBTU0ggZm9ybWF0XG4gICAgY29uc3QgcHVibGljS2V5Qnl0ZXMgPSBuZXcgVWludDhBcnJheShwdWJsaWNLZXlCdWZmZXIpO1xuXG4gICAgLy8gU1NIIEVkMjU1MTkgcHVibGljIGtleSBmb3JtYXQ6XG4gICAgLy8gc3RyaW5nIFwic3NoLWVkMjU1MTlcIiArIHN0cmluZyAoMzItYnl0ZSBwdWJsaWMga2V5KVxuICAgIGNvbnN0IGtleVR5cGUgPSAnc3NoLWVkMjU1MTknO1xuICAgIGNvbnN0IGtleVR5cGVCeXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShrZXlUeXBlKTtcblxuICAgIC8vIEJ1aWxkIHRoZSBTU0ggd2lyZSBmb3JtYXRcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCArIGtleVR5cGVCeXRlcy5sZW5ndGggKyA0ICsgcHVibGljS2V5Qnl0ZXMubGVuZ3RoKTtcbiAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuXG4gICAgLy8gV3JpdGUga2V5IHR5cGUgbGVuZ3RoIGFuZCBrZXkgdHlwZVxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwga2V5VHlwZUJ5dGVzLmxlbmd0aCwgZmFsc2UpO1xuICAgIG9mZnNldCArPSA0O1xuICAgIGJ5dGVzLnNldChrZXlUeXBlQnl0ZXMsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IGtleVR5cGVCeXRlcy5sZW5ndGg7XG5cbiAgICAvLyBXcml0ZSBwdWJsaWMga2V5IGxlbmd0aCBhbmQgcHVibGljIGtleVxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgcHVibGljS2V5Qnl0ZXMubGVuZ3RoLCBmYWxzZSk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgYnl0ZXMuc2V0KHB1YmxpY0tleUJ5dGVzLCBvZmZzZXQpO1xuXG4gICAgLy8gQmFzZTY0IGVuY29kZSB0aGUgcmVzdWx0XG4gICAgY29uc3QgYmFzZTY0S2V5ID0gdGhpcy5hcnJheUJ1ZmZlclRvQmFzZTY0KGJ1ZmZlcik7XG4gICAgcmV0dXJuIGBzc2gtZWQyNTUxOSAke2Jhc2U2NEtleX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUZpbmdlcnByaW50KHB1YmxpY0tleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIWNyeXB0b1N1YnRsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDcnlwdG8gbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBoYXNoID0gYXdhaXQgY3J5cHRvU3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGVuY29kZXIuZW5jb2RlKHB1YmxpY0tleSkpO1xuICAgIHJldHVybiB0aGlzLmFycmF5QnVmZmVyVG9CYXNlNjQoaGFzaCkuc3Vic3RyaW5nKDAsIDE2KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVLZXlJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB3aW5kb3cuY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXI6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgbGV0IGJpbmFyeSA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5KTtcbiAgfVxuXG4gIHByaXZhdGUgYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQ6IHN0cmluZyk6IEFycmF5QnVmZmVyIHtcbiAgICBjb25zdCBiaW5hcnkgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnkubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBiaW5hcnkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbiAgfVxuXG4gIHByaXZhdGUgYXJyYXlCdWZmZXJUb1BFTShidWZmZXI6IEFycmF5QnVmZmVyLCB0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJhc2U2NCA9IHRoaXMuYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXIpO1xuICAgIGNvbnN0IGxpbmVzID0gYmFzZTY0Lm1hdGNoKC8uezEsNjR9L2cpIHx8IFtdO1xuICAgIHJldHVybiBgLS0tLS1CRUdJTiAke3R5cGV9LS0tLS1cXG4ke2xpbmVzLmpvaW4oJ1xcbicpfVxcbi0tLS0tRU5EICR7dHlwZX0tLS0tLWA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRLZXlzRnJvbVN0b3JhZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleXNEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yYWdlS2V5KTtcbiAgICAgIGlmIChrZXlzRGF0YSkge1xuICAgICAgICAvLyBMb2FkIGRpcmVjdGx5IHdpdGhvdXQgZGVjcnlwdGlvblxuICAgICAgICBjb25zdCBrZXlzOiBTU0hLZXlbXSA9IEpTT04ucGFyc2Uoa2V5c0RhdGEpO1xuICAgICAgICB0aGlzLmtleXMuY2xlYXIoKTtcbiAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHRoaXMua2V5cy5zZXQoa2V5LmlkLCBrZXkpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgU1NIIGtleXMgZnJvbSBzdG9yYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVLZXlzVG9TdG9yYWdlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBrZXlzQXJyYXkgPSBBcnJheS5mcm9tKHRoaXMua2V5cy52YWx1ZXMoKSk7XG4gICAgICAvLyBTdG9yZSBkaXJlY3RseSB3aXRob3V0IGVuY3J5cHRpb25cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZUtleSwgSlNPTi5zdHJpbmdpZnkoa2V5c0FycmF5KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIFNTSCBrZXlzIHRvIHN0b3JhZ2U6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmNyeXB0IHByaXZhdGUga2V5IHdpdGggcGFzc3dvcmQgdXNpbmcgV2ViIENyeXB0byBBUElcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5jcnlwdFByaXZhdGVLZXkocHJpdmF0ZUtleVBFTTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIWNyeXB0b1N1YnRsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDcnlwdG8gbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUocHJpdmF0ZUtleVBFTSk7XG5cbiAgICAvLyBEZXJpdmUga2V5IGZyb20gcGFzc3dvcmQgdXNpbmcgUEJLREYyXG4gICAgY29uc3QgcGFzc3dvcmRLZXkgPSBhd2FpdCBjcnlwdG9TdWJ0bGUuaW1wb3J0S2V5KFxuICAgICAgJ3JhdycsXG4gICAgICBlbmNvZGVyLmVuY29kZShwYXNzd29yZCksXG4gICAgICB7IG5hbWU6ICdQQktERjInIH0sXG4gICAgICBmYWxzZSxcbiAgICAgIFsnZGVyaXZlS2V5J11cbiAgICApO1xuXG4gICAgLy8gR2VuZXJhdGUgcmFuZG9tIHNhbHRcbiAgICBjb25zdCBzYWx0ID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxNikpO1xuXG4gICAgLy8gRGVyaXZlIGVuY3J5cHRpb24ga2V5XG4gICAgY29uc3QgZW5jcnlwdGlvbktleSA9IGF3YWl0IGNyeXB0b1N1YnRsZS5kZXJpdmVLZXkoXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdQQktERjInLFxuICAgICAgICBzYWx0LFxuICAgICAgICBpdGVyYXRpb25zOiAxMDAwMDAsXG4gICAgICAgIGhhc2g6ICdTSEEtMjU2JyxcbiAgICAgIH0sXG4gICAgICBwYXNzd29yZEtleSxcbiAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxuICAgICAgZmFsc2UsXG4gICAgICBbJ2VuY3J5cHQnXVxuICAgICk7XG5cbiAgICAvLyBHZW5lcmF0ZSByYW5kb20gSVZcbiAgICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTIpKTtcblxuICAgIC8vIEVuY3J5cHQgdGhlIGRhdGFcbiAgICBjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgY3J5cHRvU3VidGxlLmVuY3J5cHQoeyBuYW1lOiAnQUVTLUdDTScsIGl2IH0sIGVuY3J5cHRpb25LZXksIGRhdGEpO1xuXG4gICAgLy8gQ29tYmluZSBzYWx0ICsgaXYgKyBlbmNyeXB0ZWQgZGF0YSBhbmQgYmFzZTY0IGVuY29kZVxuICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoc2FsdC5sZW5ndGggKyBpdi5sZW5ndGggKyBlbmNyeXB0ZWREYXRhLmJ5dGVMZW5ndGgpO1xuICAgIGNvbWJpbmVkLnNldChzYWx0LCAwKTtcbiAgICBjb21iaW5lZC5zZXQoaXYsIHNhbHQubGVuZ3RoKTtcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkRGF0YSksIHNhbHQubGVuZ3RoICsgaXYubGVuZ3RoKTtcblxuICAgIHJldHVybiBgLS0tLS1CRUdJTiBFTkNSWVBURUQgUFJJVkFURSBLRVktLS0tLVxcbiR7dGhpcy5hcnJheUJ1ZmZlclRvQmFzZTY0KGNvbWJpbmVkLmJ1ZmZlcil9XFxuLS0tLS1FTkQgRU5DUllQVEVEIFBSSVZBVEUgS0VZLS0tLS1gO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY3J5cHQgcHJpdmF0ZSBrZXkgd2l0aCBwYXNzd29yZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkZWNyeXB0UHJpdmF0ZUtleShcbiAgICBlbmNyeXB0ZWRQcml2YXRlS2V5UEVNOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghY3J5cHRvU3VidGxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NyeXB0byBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBiYXNlNjQgZGF0YVxuICAgIGNvbnN0IGJhc2U2NERhdGEgPSBlbmNyeXB0ZWRQcml2YXRlS2V5UEVNXG4gICAgICAucmVwbGFjZSgnLS0tLS1CRUdJTiBFTkNSWVBURUQgUFJJVkFURSBLRVktLS0tLScsICcnKVxuICAgICAgLnJlcGxhY2UoJy0tLS0tRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS0tLS0tJywgJycpXG4gICAgICAucmVwbGFjZSgvXFxzL2csICcnKTtcblxuICAgIGNvbnN0IGNvbWJpbmVkRGF0YSA9IHRoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjREYXRhKTtcbiAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KGNvbWJpbmVkRGF0YSk7XG5cbiAgICAvLyBFeHRyYWN0IHNhbHQsIGl2LCBhbmQgZW5jcnlwdGVkIGRhdGFcbiAgICBjb25zdCBzYWx0ID0gY29tYmluZWQuc2xpY2UoMCwgMTYpO1xuICAgIGNvbnN0IGl2ID0gY29tYmluZWQuc2xpY2UoMTYsIDI4KTtcbiAgICBjb25zdCBlbmNyeXB0ZWREYXRhID0gY29tYmluZWQuc2xpY2UoMjgpO1xuXG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuXG4gICAgLy8gRGVyaXZlIGtleSBmcm9tIHBhc3N3b3JkXG4gICAgY29uc3QgcGFzc3dvcmRLZXkgPSBhd2FpdCBjcnlwdG9TdWJ0bGUuaW1wb3J0S2V5KFxuICAgICAgJ3JhdycsXG4gICAgICBlbmNvZGVyLmVuY29kZShwYXNzd29yZCksXG4gICAgICB7IG5hbWU6ICdQQktERjInIH0sXG4gICAgICBmYWxzZSxcbiAgICAgIFsnZGVyaXZlS2V5J11cbiAgICApO1xuXG4gICAgY29uc3QgZW5jcnlwdGlvbktleSA9IGF3YWl0IGNyeXB0b1N1YnRsZS5kZXJpdmVLZXkoXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdQQktERjInLFxuICAgICAgICBzYWx0LFxuICAgICAgICBpdGVyYXRpb25zOiAxMDAwMDAsXG4gICAgICAgIGhhc2g6ICdTSEEtMjU2JyxcbiAgICAgIH0sXG4gICAgICBwYXNzd29yZEtleSxcbiAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxuICAgICAgZmFsc2UsXG4gICAgICBbJ2RlY3J5cHQnXVxuICAgICk7XG5cbiAgICAvLyBEZWNyeXB0IHRoZSBkYXRhXG4gICAgY29uc3QgZGVjcnlwdGVkRGF0YSA9IGF3YWl0IGNyeXB0b1N1YnRsZS5kZWNyeXB0KFxuICAgICAgeyBuYW1lOiAnQUVTLUdDTScsIGl2IH0sXG4gICAgICBlbmNyeXB0aW9uS2V5LFxuICAgICAgZW5jcnlwdGVkRGF0YVxuICAgICk7XG5cbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGRlY3J5cHRlZERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb21wdCB1c2VyIGZvciBwYXNzd29yZCB1c2luZyBicm93c2VyIGRpYWxvZ1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcm9tcHRGb3JQYXNzd29yZChrZXlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gd2luZG93LnByb21wdChgRW50ZXIgcGFzc3dvcmQgZm9yIFNTSCBrZXkgXCIke2tleU5hbWV9XCI6YCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBIdHRwTWV0aG9kIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3R5cGVzLmpzJztcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBCcm93c2VyU1NIQWdlbnQgfSBmcm9tICcuL3NzaC1hZ2VudC5qcyc7XG5cbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcignYXV0aC1jbGllbnQnKTtcblxuaW50ZXJmYWNlIEF1dGhSZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHRva2VuPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIGF1dGhNZXRob2Q/OiAnc3NoLWtleScgfCAncGFzc3dvcmQnO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENoYWxsZW5nZSB7XG4gIGNoYWxsZW5nZUlkOiBzdHJpbmc7XG4gIGNoYWxsZW5nZTogc3RyaW5nO1xuICBleHBpcmVzQXQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFVzZXIge1xuICB1c2VySWQ6IHN0cmluZztcbiAgdG9rZW46IHN0cmluZztcbiAgYXV0aE1ldGhvZDogJ3NzaC1rZXknIHwgJ3Bhc3N3b3JkJztcbiAgbG9naW5UaW1lOiBudW1iZXI7XG59XG5cbi8qKlxuICogQXV0aGVudGljYXRpb24gY2xpZW50IGZvciBtYW5hZ2luZyB1c2VyIGF1dGhlbnRpY2F0aW9uIHN0YXRlIGFuZCBvcGVyYXRpb25zLlxuICpcbiAqIEhhbmRsZXMgbXVsdGlwbGUgYXV0aGVudGljYXRpb24gbWV0aG9kcyBpbmNsdWRpbmcgU1NIIGtleS1iYXNlZCBhdXRoZW50aWNhdGlvblxuICogKHByaW9yaXR5KSBhbmQgcGFzc3dvcmQtYmFzZWQgYXV0aGVudGljYXRpb24gKGZhbGxiYWNrKS4gTWFuYWdlcyBhdXRoZW50aWNhdGlvblxuICogdG9rZW5zLCB1c2VyIHNlc3Npb25zLCBhbmQgcHJvdmlkZXMgYXV0aGVudGljYXRlZCBBUEkgcmVxdWVzdCBjYXBhYmlsaXRpZXMuXG4gKlxuICogRmVhdHVyZXM6XG4gKiAtIFNTSCBrZXkgYXV0aGVudGljYXRpb24gdXNpbmcgYnJvd3Nlci1iYXNlZCBTU0ggYWdlbnRcbiAqIC0gUGFzc3dvcmQgYXV0aGVudGljYXRpb24gZmFsbGJhY2tcbiAqIC0gUGVyc2lzdGVudCB0b2tlbiBzdG9yYWdlIGFuZCB2YWxpZGF0aW9uXG4gKiAtIFVzZXIgYXZhdGFyIHJldHJpZXZhbCB3aXRoIHBsYXRmb3JtLXNwZWNpZmljIHN1cHBvcnRcbiAqIC0gQXV0b21hdGljIGF1dGhlbnRpY2F0aW9uIGZsb3cgKHRyaWVzIFNTSCBrZXlzIGZpcnN0KVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhdXRoID0gbmV3IEF1dGhDbGllbnQoKTtcbiAqXG4gKiAvLyBDaGVjayBhdXRoZW50aWNhdGlvbiBzdGF0dXNcbiAqIGlmICghYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICogICAvLyBUcnkgU1NIIGtleSBhdXRoIGZpcnN0LCB0aGVuIHBhc3N3b3JkXG4gKiAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1dGguYXV0aGVudGljYXRlKHVzZXJJZCk7XG4gKiB9XG4gKlxuICogLy8gTWFrZSBhdXRoZW50aWNhdGVkIEFQSSByZXF1ZXN0c1xuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhdXRoLmZldGNoKCcvYXBpL3Nlc3Npb25zJyk7XG4gKiBgYGBcbiAqXG4gKiBAc2VlIEJyb3dzZXJTU0hBZ2VudCAtIEJyb3dzZXItYmFzZWQgU1NIIGtleSBtYW5hZ2VtZW50XG4gKiBAc2VlIHdlYi9zcmMvc2VydmVyL3JvdXRlcy9hdXRoLnRzIC0gU2VydmVyLXNpZGUgYXV0aGVudGljYXRpb24gZW5kcG9pbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoQ2xpZW50IHtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVE9LRU5fS0VZID0gJ3ZpYmV0dW5uZWxfYXV0aF90b2tlbic7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFVTRVJfS0VZID0gJ3ZpYmV0dW5uZWxfdXNlcl9kYXRhJztcblxuICBwcml2YXRlIGN1cnJlbnRVc2VyOiBVc2VyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3NoQWdlbnQ6IEJyb3dzZXJTU0hBZ2VudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNzaEFnZW50ID0gbmV3IEJyb3dzZXJTU0hBZ2VudCgpO1xuICAgIHRoaXMubG9hZEN1cnJlbnRVc2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFNTSCBhZ2VudCBpbnN0YW5jZVxuICAgKi9cbiAgZ2V0U1NIQWdlbnQoKTogQnJvd3NlclNTSEFnZW50IHtcbiAgICByZXR1cm4gdGhpcy5zc2hBZ2VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICovXG4gIGlzQXV0aGVudGljYXRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlciAhPT0gbnVsbCAmJiB0aGlzLmlzVG9rZW5WYWxpZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHVzZXIgaW5mb1xuICAgKi9cbiAgZ2V0Q3VycmVudFVzZXIoKTogVXNlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHN5c3RlbSB1c2VyIGZyb20gc2VydmVyXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50U3lzdGVtVXNlcigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2F1dGgvY3VycmVudC11c2VyJyk7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGRhdGEudXNlcklkO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IGN1cnJlbnQgdXNlcicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgY3VycmVudCBzeXN0ZW0gdXNlcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHVzZXIgYXZhdGFyIChtYWNPUyByZXR1cm5zIGJhc2U2NCwgb3RoZXJzIGdldCBnZW5lcmljKVxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckF2YXRhcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYXV0aC9hdmF0YXIvJHt1c2VySWR9YCk7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICBpZiAoZGF0YS5hdmF0YXIpIHtcbiAgICAgICAgICAvLyBJZiBpdCdzIGEgZGF0YSBVUkwgKGJhc2U2NCksIHJldHVybiBhcyBpc1xuICAgICAgICAgIGlmIChkYXRhLmF2YXRhci5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5hdmF0YXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIElmIGl0J3MgYSBmaWxlIHBhdGgsIHdlJ2QgbmVlZCB0byBoYW5kbGUgdGhhdCBkaWZmZXJlbnRseVxuICAgICAgICAgIC8vIEZvciBub3csIGZhbGwgYmFjayB0byBnZW5lcmljIGF2YXRhclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCB1c2VyIGF2YXRhcjonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGdlbmVyaWMgYXZhdGFyIFNWRyBmb3Igbm9uLW1hY09TIG9yIHdoZW4gbm8gYXZhdGFyIGZvdW5kXG4gICAgLy8gR2V0IGNvbXB1dGVkIHRoZW1lIGNvbG9ycyBmcm9tIENTUyB2YXJpYWJsZXNcbiAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuICAgIGNvbnN0IGJnQ29sb3IgPSBjb21wdXRlZFN0eWxlXG4gICAgICAuZ2V0UHJvcGVydHlWYWx1ZSgnLS1jb2xvci10ZXh0LWRpbScpXG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgLm1hcCgodikgPT4gTnVtYmVyLnBhcnNlSW50KHYpKTtcbiAgICBjb25zdCBmZ0NvbG9yID0gY29tcHV0ZWRTdHlsZVxuICAgICAgLmdldFByb3BlcnR5VmFsdWUoJy0tY29sb3ItdGV4dC1tdXRlZCcpXG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgLm1hcCgodikgPT4gTnVtYmVyLnBhcnNlSW50KHYpKTtcbiAgICBjb25zdCBiZ0NvbG9yU3RyID0gYHJnYigke2JnQ29sb3Iuam9pbignLCAnKX0pYDtcbiAgICBjb25zdCBmZ0NvbG9yU3RyID0gYHJnYigke2ZnQ29sb3Iuam9pbignLCAnKX0pYDtcblxuICAgIHJldHVybiAoXG4gICAgICAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwnICtcbiAgICAgIGJ0b2EoYFxuICAgICAgPHN2ZyB3aWR0aD1cIjQ4XCIgaGVpZ2h0PVwiNDhcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgIDxjaXJjbGUgY3g9XCIyNFwiIGN5PVwiMjRcIiByPVwiMjRcIiBmaWxsPVwiJHtiZ0NvbG9yU3RyfVwiLz5cbiAgICAgICAgPGNpcmNsZSBjeD1cIjI0XCIgY3k9XCIxOFwiIHI9XCI4XCIgZmlsbD1cIiR7ZmdDb2xvclN0cn1cIi8+XG4gICAgICAgIDxwYXRoIGQ9XCJNOCAzOGMwLTguODM3IDcuMTYzLTE2IDE2LTE2czE2IDcuMTYzIDE2IDE2XCIgZmlsbD1cIiR7ZmdDb2xvclN0cn1cIi8+XG4gICAgICA8L3N2Zz5cbiAgICBgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQXV0aGVudGljYXRlIHVzaW5nIFNTSCBrZXkgKHByaW9yaXR5IG1ldGhvZClcbiAgICovXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZVdpdGhTU0hLZXkodXNlcklkOiBzdHJpbmcsIGtleUlkOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBTU0ggYWdlbnQgaXMgdW5sb2NrZWRcbiAgICAgIGlmICghdGhpcy5zc2hBZ2VudC5pc1VubG9ja2VkKCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnU1NIIGFnZW50IGlzIGxvY2tlZCcgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGNoYWxsZW5nZVxuICAgICAgY29uc3QgY2hhbGxlbmdlID0gYXdhaXQgdGhpcy5jcmVhdGVDaGFsbGVuZ2UodXNlcklkKTtcblxuICAgICAgLy8gU2lnbiBjaGFsbGVuZ2Ugd2l0aCBTU0gga2V5XG4gICAgICBjb25zdCBzaWduYXR1cmVSZXN1bHQgPSBhd2FpdCB0aGlzLnNzaEFnZW50LnNpZ24oa2V5SWQsIGNoYWxsZW5nZS5jaGFsbGVuZ2UpO1xuICAgICAgY29uc3QgcHVibGljS2V5ID0gdGhpcy5zc2hBZ2VudC5nZXRQdWJsaWNLZXkoa2V5SWQpO1xuXG4gICAgICBpZiAoIXB1YmxpY0tleSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTU0gga2V5IG5vdCBmb3VuZCcgfTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCBhdXRoZW50aWNhdGlvbiByZXF1ZXN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2F1dGgvc3NoLWtleScsIHtcbiAgICAgICAgbWV0aG9kOiBIdHRwTWV0aG9kLlBPU1QsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY2hhbGxlbmdlSWQ6IGNoYWxsZW5nZS5jaGFsbGVuZ2VJZCxcbiAgICAgICAgICBwdWJsaWNLZXksXG4gICAgICAgICAgc2lnbmF0dXJlOiBzaWduYXR1cmVSZXN1bHQuc2lnbmF0dXJlLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBsb2dnZXIubG9nKCdcdUQ4M0RcdUREMTAgU1NIIGtleSBhdXRoIHNlcnZlciByZXNwb25zZTonLCByZXN1bHQpO1xuXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgbG9nZ2VyLmxvZygnXHUyNzA1IFNTSCBrZXkgYXV0aCBzdWNjZXNzZnVsLCBzZXR0aW5nIGN1cnJlbnQgdXNlcicpO1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRVc2VyKHtcbiAgICAgICAgICB1c2VySWQ6IHJlc3VsdC51c2VySWQsXG4gICAgICAgICAgdG9rZW46IHJlc3VsdC50b2tlbixcbiAgICAgICAgICBhdXRoTWV0aG9kOiAnc3NoLWtleScsXG4gICAgICAgICAgbG9naW5UaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZygnXHVEODNEXHVEQzY0IEN1cnJlbnQgdXNlciBzZXQ6JywgdGhpcy5nZXRDdXJyZW50VXNlcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5sb2coJ1x1Mjc0QyBTU0gga2V5IGF1dGggZmFpbGVkOicsIHJlc3VsdC5lcnJvcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignU1NIIGtleSBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnU1NIIGtleSBhdXRoZW50aWNhdGlvbiBmYWlsZWQnIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEF1dGhlbnRpY2F0ZSB1c2luZyBwYXNzd29yZCAoZmFsbGJhY2sgbWV0aG9kKVxuICAgKi9cbiAgYXN5bmMgYXV0aGVudGljYXRlV2l0aFBhc3N3b3JkKHVzZXJJZDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxBdXRoUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL3Bhc3N3b3JkJywge1xuICAgICAgICBtZXRob2Q6IEh0dHBNZXRob2QuUE9TVCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcklkLCBwYXNzd29yZCB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRVc2VyKHtcbiAgICAgICAgICB1c2VySWQ6IHJlc3VsdC51c2VySWQsXG4gICAgICAgICAgdG9rZW46IHJlc3VsdC50b2tlbixcbiAgICAgICAgICBhdXRoTWV0aG9kOiAncGFzc3dvcmQnLFxuICAgICAgICAgIGxvZ2luVGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignUGFzc3dvcmQgYXV0aGVudGljYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXV0b21hdGVkIGF1dGhlbnRpY2F0aW9uIC0gdHJpZXMgU1NIIGtleXMgZmlyc3QsIHRoZW4gcHJvbXB0cyBmb3IgcGFzc3dvcmRcbiAgICovXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8QXV0aFJlc3BvbnNlPiB7XG4gICAgbG9nZ2VyLmxvZygnXHVEODNEXHVERTgwIFN0YXJ0aW5nIFNTSCBhdXRoZW50aWNhdGlvbiBmb3IgdXNlcjonLCB1c2VySWQpO1xuXG4gICAgLy8gVHJ5IFNTSCBrZXkgYXV0aGVudGljYXRpb24gZmlyc3QgaWYgYWdlbnQgaXMgdW5sb2NrZWRcbiAgICBpZiAodGhpcy5zc2hBZ2VudC5pc1VubG9ja2VkKCkpIHtcbiAgICAgIGNvbnN0IGtleXMgPSB0aGlzLnNzaEFnZW50Lmxpc3RLZXlzKCk7XG4gICAgICBsb2dnZXIubG9nKFxuICAgICAgICAnXHVEODNEXHVEREREXHVGRTBGIEZvdW5kIFNTSCBrZXlzOicsXG4gICAgICAgIGtleXMubGVuZ3RoLFxuICAgICAgICBrZXlzLm1hcCgoaykgPT4gKHsgaWQ6IGsuaWQsIG5hbWU6IGsubmFtZSB9KSlcbiAgICAgICk7XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBcdUQ4M0RcdUREMTEgVHJ5aW5nIFNTSCBrZXk6ICR7a2V5Lm5hbWV9ICgke2tleS5pZH0pYCk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hdXRoZW50aWNhdGVXaXRoU1NIS2V5KHVzZXJJZCwga2V5LmlkKTtcbiAgICAgICAgICBsb2dnZXIubG9nKGBcdUQ4M0NcdURGQUYgU1NIIGtleSAke2tleS5uYW1lfSByZXN1bHQ6YCwgcmVzdWx0KTtcblxuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhgXHUyNzA1IEF1dGhlbnRpY2F0ZWQgd2l0aCBTU0gga2V5OiAke2tleS5uYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oYFx1Mjc0QyBTU0gga2V5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3Iga2V5ICR7a2V5Lm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIubG9nKCdcdUQ4M0RcdUREMTIgU1NIIGFnZW50IGlzIGxvY2tlZCcpO1xuICAgIH1cblxuICAgIC8vIFNTSCBrZXkgYXV0aCBmYWlsZWQgb3Igbm8ga2V5cyBhdmFpbGFibGVcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ1NTSCBrZXkgYXV0aGVudGljYXRpb24gZmFpbGVkLiBQYXNzd29yZCBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4nLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9nb3V0IHVzZXJcbiAgICovXG4gIGFzeW5jIGxvZ291dCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2FsbCBzZXJ2ZXIgbG9nb3V0IGVuZHBvaW50XG4gICAgICBpZiAodGhpcy5jdXJyZW50VXNlcj8udG9rZW4pIHtcbiAgICAgICAgYXdhaXQgZmV0Y2goJy9hcGkvYXV0aC9sb2dvdXQnLCB7XG4gICAgICAgICAgbWV0aG9kOiBIdHRwTWV0aG9kLlBPU1QsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuY3VycmVudFVzZXIudG9rZW59YCxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdTZXJ2ZXIgbG9nb3V0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIENsZWFyIGxvY2FsIHN0YXRlXG4gICAgICB0aGlzLmNsZWFyQ3VycmVudFVzZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGF1dGhvcml6YXRpb24gaGVhZGVyIGZvciBBUEkgcmVxdWVzdHNcbiAgICovXG4gIGdldEF1dGhIZWFkZXIoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXI/LnRva2VuKSB7XG4gICAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5jdXJyZW50VXNlci50b2tlbn1gIH07XG4gICAgfVxuICAgIC8vIE5vIHdhcm5pbmcgbmVlZGVkIHdoZW4gdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdXRoZW50aWNhdGVkIGZldGNoIHdyYXBwZXIgdGhhdCBhZGRzIGF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAqL1xuICBhc3luYyBmZXRjaCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RJbml0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAuLi50aGlzLmdldEF1dGhIZWFkZXIoKSxcbiAgICAgIC4uLihvcHRpb25zPy5oZWFkZXJzIHx8IHt9KSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZ5IGN1cnJlbnQgdG9rZW4gd2l0aCBzZXJ2ZXJcbiAgICovXG4gIGFzeW5jIHZlcmlmeVRva2VuKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5jdXJyZW50VXNlcj8udG9rZW4pIHJldHVybiBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2F1dGgvdmVyaWZ5Jywge1xuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmN1cnJlbnRVc2VyLnRva2VufWAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gcmVzdWx0LnZhbGlkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxvY2sgU1NIIGFnZW50IChuby1vcCBzaW5jZSB3ZSBkb24ndCB1c2UgZW5jcnlwdGlvbilcbiAgICovXG4gIGFzeW5jIHVubG9ja1NTSEFnZW50KF9wYXNzcGhyYXNlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQWx3YXlzIHVubG9ja2VkXG4gIH1cblxuICAvKipcbiAgICogTG9jayBTU0ggYWdlbnQgKG5vLW9wIHNpbmNlIHdlIGRvbid0IHVzZSBlbmNyeXB0aW9uKVxuICAgKi9cbiAgbG9ja1NTSEFnZW50KCk6IHZvaWQge1xuICAgIC8vIE5vLW9wIHNpbmNlIGFnZW50IGlzIGFsd2F5cyB1bmxvY2tlZFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIFNTSCBhZ2VudCBpcyB1bmxvY2tlZFxuICAgKi9cbiAgaXNTU0hBZ2VudFVubG9ja2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlOyAvLyBBbHdheXMgdW5sb2NrZWQgc2luY2Ugd2UgZG9uJ3QgdXNlIGVuY3J5cHRpb25cbiAgfVxuXG4gIC8vIFByaXZhdGUgbWV0aG9kc1xuXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlQ2hhbGxlbmdlKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFsbGVuZ2U+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2F1dGgvY2hhbGxlbmdlJywge1xuICAgICAgbWV0aG9kOiBIdHRwTWV0aG9kLlBPU1QsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcklkIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGF1dGhlbnRpY2F0aW9uIGNoYWxsZW5nZScpO1xuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gIH1cblxuICBwcml2YXRlIHNldEN1cnJlbnRVc2VyKHVzZXI6IFVzZXIpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcbiAgICB0aGlzLnNhdmVDdXJyZW50VXNlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckN1cnJlbnRVc2VyKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFVzZXIgPSBudWxsO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEF1dGhDbGllbnQuVE9LRU5fS0VZKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShBdXRoQ2xpZW50LlVTRVJfS0VZKTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUN1cnJlbnRVc2VyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShBdXRoQ2xpZW50LlRPS0VOX0tFWSwgdGhpcy5jdXJyZW50VXNlci50b2tlbik7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgQXV0aENsaWVudC5VU0VSX0tFWSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJJZDogdGhpcy5jdXJyZW50VXNlci51c2VySWQsXG4gICAgICAgICAgYXV0aE1ldGhvZDogdGhpcy5jdXJyZW50VXNlci5hdXRoTWV0aG9kLFxuICAgICAgICAgIGxvZ2luVGltZTogdGhpcy5jdXJyZW50VXNlci5sb2dpblRpbWUsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZEN1cnJlbnRVc2VyKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEF1dGhDbGllbnQuVE9LRU5fS0VZKTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQXV0aENsaWVudC5VU0VSX0tFWSk7XG5cbiAgICAgIGlmICh0b2tlbiAmJiB1c2VyRGF0YSkge1xuICAgICAgICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZSh1c2VyRGF0YSk7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB7XG4gICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgdXNlcklkOiB1c2VyLnVzZXJJZCxcbiAgICAgICAgICBhdXRoTWV0aG9kOiB1c2VyLmF1dGhNZXRob2QsXG4gICAgICAgICAgbG9naW5UaW1lOiB1c2VyLmxvZ2luVGltZSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBWZXJpZnkgdG9rZW4gaXMgc3RpbGwgdmFsaWRcbiAgICAgICAgdGhpcy52ZXJpZnlUb2tlbigpLnRoZW4oKHZhbGlkKSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckN1cnJlbnRVc2VyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjdXJyZW50IHVzZXI6JywgZXJyb3IpO1xuICAgICAgdGhpcy5jbGVhckN1cnJlbnRVc2VyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpc1Rva2VuVmFsaWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDaGVjayBpZiB0b2tlbiBpcyBleHBpcmVkICgyNCBob3VycylcbiAgICBjb25zdCB0b2tlbkFnZSA9IERhdGUubm93KCkgLSB0aGlzLmN1cnJlbnRVc2VyLmxvZ2luVGltZTtcbiAgICBjb25zdCBtYXhBZ2UgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuXG4gICAgcmV0dXJuIHRva2VuQWdlIDwgbWF4QWdlO1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBhdXRoQ2xpZW50ID0gbmV3IEF1dGhDbGllbnQoKTtcbiIsICJpbXBvcnQgeyBIdHRwTWV0aG9kIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3R5cGVzLmpzJztcblxuaW50ZXJmYWNlIExvZ0xldmVsIHtcbiAgbG9nOiAnbG9nJztcbiAgd2FybjogJ3dhcm4nO1xuICBlcnJvcjogJ2Vycm9yJztcbiAgZGVidWc6ICdkZWJ1Zyc7XG59XG5cbnR5cGUgTG9nTWV0aG9kID0gKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdm9pZDtcblxuaW50ZXJmYWNlIExvZ2dlciB7XG4gIGxvZzogTG9nTWV0aG9kO1xuICB3YXJuOiBMb2dNZXRob2Q7XG4gIGVycm9yOiBMb2dNZXRob2Q7XG4gIGRlYnVnOiBMb2dNZXRob2Q7XG59XG5cbmxldCBkZWJ1Z01vZGUgPSBmYWxzZTtcblxuLy8gQXV0aCBjb25maWcgY2FjaGUgdG8gcmVkdWNlIHJlZHVuZGFudCByZXF1ZXN0c1xubGV0IGF1dGhDb25maWdDYWNoZTogeyBub0F1dGg6IGJvb2xlYW47IHRpbWVzdGFtcDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcbmNvbnN0IEFVVEhfQ09ORklHX1RUTCA9IDYwMDAwOyAvLyAxIG1pbnV0ZVxuXG4vKipcbiAqIEVuYWJsZSBvciBkaXNhYmxlIGRlYnVnIG1vZGUgZm9yIGFsbCBsb2dnZXJzXG4gKiBAcGFyYW0gZW5hYmxlZCAtIFdoZXRoZXIgdG8gZW5hYmxlIGRlYnVnIGxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlYnVnTW9kZShlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gIGRlYnVnTW9kZSA9IGVuYWJsZWQ7XG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIGF1dGggY29uZmlnIGNhY2hlIChtYWlubHkgZm9yIHRlc3RpbmcpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckF1dGhDb25maWdDYWNoZSgpOiB2b2lkIHtcbiAgYXV0aENvbmZpZ0NhY2hlID0gbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgY2FjaGVkIGF1dGggY29uZmlndXJhdGlvbiBvciBmZXRjaCBpdFxuICogQHJldHVybnMgV2hldGhlciBuby1hdXRoIG1vZGUgaXMgZW5hYmxlZFxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBdXRoQ29uZmlnKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gIC8vIFJldHVybiBjYWNoZWQgdmFsdWUgaWYgc3RpbGwgdmFsaWRcbiAgaWYgKGF1dGhDb25maWdDYWNoZSAmJiBub3cgLSBhdXRoQ29uZmlnQ2FjaGUudGltZXN0YW1wIDwgQVVUSF9DT05GSUdfVFRMKSB7XG4gICAgcmV0dXJuIGF1dGhDb25maWdDYWNoZS5ub0F1dGg7XG4gIH1cblxuICAvLyBGZXRjaCBhbmQgY2FjaGUgbmV3IHZhbHVlXG4gIHRyeSB7XG4gICAgY29uc3QgY29uZmlnUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL2NvbmZpZycpO1xuICAgIGlmIChjb25maWdSZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgYXV0aENvbmZpZyA9IGF3YWl0IGNvbmZpZ1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgIGF1dGhDb25maWdDYWNoZSA9IHtcbiAgICAgICAgbm9BdXRoOiBhdXRoQ29uZmlnLm5vQXV0aCA9PT0gdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBub3csXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF1dGhDb25maWdDYWNoZS5ub0F1dGg7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBJZ25vcmUgYXV0aCBjb25maWcgZmV0Y2ggZXJyb3JzXG4gIH1cblxuICAvLyBEZWZhdWx0IHRvIGZhbHNlIGlmIGZldGNoIGZhaWxzXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgYXJndW1lbnRzIGZvciBjb25zaXN0ZW50IGxvZ2dpbmdcbiAqL1xuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzOiB1bmtub3duW10pOiB1bmtub3duW10ge1xuICByZXR1cm4gYXJncy5tYXAoKGFyZykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENvbnZlcnQgb2JqZWN0cyB0byBmb3JtYXR0ZWQgc3RyaW5ncyB0byBtYXRjaCBzZXJ2ZXIgbG9nZ2VyIGJlaGF2aW9yXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIDIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoYXJnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyZztcbiAgfSk7XG59XG5cbi8qKlxuICogU2VuZCBsb2cgdG8gc2VydmVyIGVuZHBvaW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNlbmRUb1NlcnZlcihsZXZlbDoga2V5b2YgTG9nTGV2ZWwsIG1vZHVsZTogc3RyaW5nLCBhcmdzOiB1bmtub3duW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBJbXBvcnQgYXV0aENsaWVudCBzaW5nbGV0b24gZHluYW1pY2FsbHkgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gICAgY29uc3QgeyBhdXRoQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlcnZpY2VzL2F1dGgtY2xpZW50LmpzJyk7XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGF1dGhlbnRpY2F0aW9uIGJlZm9yZSBzZW5kaW5nIGxvZ3NcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gYXV0aENsaWVudC5nZXRBdXRoSGVhZGVyKCk7XG5cbiAgICAvLyBDaGVjayBpZiBuby1hdXRoIG1vZGUgaXMgZW5hYmxlZCAoY2FjaGVkKVxuICAgIGNvbnN0IGlzTm9BdXRoTW9kZSA9IGF3YWl0IGdldEF1dGhDb25maWcoKTtcblxuICAgIC8vIFNraXAgc2VuZGluZyBsb2dzIGlmIG5vdCBhdXRoZW50aWNhdGVkIEFORCBub3QgaW4gbm8tYXV0aCBtb2RlXG4gICAgaWYgKCFhdXRoSGVhZGVyLkF1dGhvcml6YXRpb24gJiYgIWlzTm9BdXRoTW9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH07XG5cbiAgICAvLyBPbmx5IGFkZCBhdXRoIGhlYWRlciBpZiB3ZSBoYXZlIG9uZVxuICAgIGlmIChhdXRoSGVhZGVyLkF1dGhvcml6YXRpb24pIHtcbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGF1dGhIZWFkZXIuQXV0aG9yaXphdGlvbjtcbiAgICB9XG5cbiAgICBhd2FpdCBmZXRjaCgnL2FwaS9sb2dzL2NsaWVudCcsIHtcbiAgICAgIG1ldGhvZDogSHR0cE1ldGhvZC5QT1NULFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIG1vZHVsZSxcbiAgICAgICAgYXJnczogZm9ybWF0QXJncyhhcmdzKSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9IGNhdGNoIHtcbiAgICAvLyBTaWxlbnRseSBpZ25vcmUgbmV0d29yayBlcnJvcnMgdG8gYXZvaWQgaW5maW5pdGUgbG9vcHNcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsb2dnZXIgaW5zdGFuY2UgZm9yIGEgc3BlY2lmaWMgbW9kdWxlXG4gKiBAcGFyYW0gbW9kdWxlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgZm9yIGxvZyBjb250ZXh0XG4gKiBAcmV0dXJucyBMb2dnZXIgaW5zdGFuY2Ugd2l0aCBsb2csIHdhcm4sIGVycm9yLCBhbmQgZGVidWcgbWV0aG9kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9nZ2VyKG1vZHVsZU5hbWU6IHN0cmluZyk6IExvZ2dlciB7XG4gIGNvbnN0IGNyZWF0ZUxvZ01ldGhvZCA9IChsZXZlbDoga2V5b2YgTG9nTGV2ZWwpOiBMb2dNZXRob2QgPT4ge1xuICAgIHJldHVybiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB7XG4gICAgICAvLyBTa2lwIGRlYnVnIGxvZ3MgaWYgZGVidWcgbW9kZSBpcyBkaXNhYmxlZFxuICAgICAgaWYgKGxldmVsID09PSAnZGVidWcnICYmICFkZWJ1Z01vZGUpIHJldHVybjtcblxuICAgICAgLy8gTG9nIHRvIGJyb3dzZXIgY29uc29sZVxuICAgICAgY29uc29sZVtsZXZlbF0oYFske21vZHVsZU5hbWV9XWAsIC4uLmFyZ3MpO1xuXG4gICAgICAvLyBTZW5kIHRvIHNlcnZlciAoZmlyZSBhbmQgZm9yZ2V0KVxuICAgICAgc2VuZFRvU2VydmVyKGxldmVsLCBtb2R1bGVOYW1lLCBhcmdzKTtcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbG9nOiBjcmVhdGVMb2dNZXRob2QoJ2xvZycpLFxuICAgIHdhcm46IGNyZWF0ZUxvZ01ldGhvZCgnd2FybicpLFxuICAgIGVycm9yOiBjcmVhdGVMb2dNZXRob2QoJ2Vycm9yJyksXG4gICAgZGVidWc6IGNyZWF0ZUxvZ01ldGhvZCgnZGVidWcnKSxcbiAgfTtcbn1cbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIEFsbG93cyBtaW5pZmllcnMgdG8gcmVuYW1lIHJlZmVyZW5jZXMgdG8gZ2xvYmFsVGhpc1xuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgc3VwcG9ydHMgYGFkb3B0ZWRTdHlsZVNoZWV0c2AuXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHM6IGJvb2xlYW4gPVxuICBnbG9iYWwuU2hhZG93Um9vdCAmJlxuICAoZ2xvYmFsLlNoYWR5Q1NTID09PSB1bmRlZmluZWQgfHwgZ2xvYmFsLlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdykgJiZcbiAgJ2Fkb3B0ZWRTdHlsZVNoZWV0cycgaW4gRG9jdW1lbnQucHJvdG90eXBlICYmXG4gICdyZXBsYWNlJyBpbiBDU1NTdHlsZVNoZWV0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBBIENTU1Jlc3VsdCBvciBuYXRpdmUgQ1NTU3R5bGVTaGVldC5cbiAqXG4gKiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgY29uc3RydWN0aWJsZSBDU1Mgc3R5bGUgc2hlZXRzLCBDU1NTdHlsZVNoZWV0XG4gKiBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIHN0eWxpbmcgYWxvbmcgc2lkZSBDU1NSZXN1bHQgZnJvbSB0aGUgYGNzc2BcbiAqIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0T3JOYXRpdmUgPSBDU1NSZXN1bHQgfCBDU1NTdHlsZVNoZWV0O1xuXG5leHBvcnQgdHlwZSBDU1NSZXN1bHRBcnJheSA9IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlIHwgQ1NTUmVzdWx0QXJyYXk+O1xuXG4vKipcbiAqIEEgc2luZ2xlIENTU1Jlc3VsdCwgQ1NTU3R5bGVTaGVldCwgb3IgYW4gYXJyYXkgb3IgbmVzdGVkIGFycmF5cyBvZiB0aG9zZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0R3JvdXAgPSBDU1NSZXN1bHRPck5hdGl2ZSB8IENTU1Jlc3VsdEFycmF5O1xuXG5jb25zdCBjb25zdHJ1Y3Rpb25Ub2tlbiA9IFN5bWJvbCgpO1xuXG5jb25zdCBjc3NUYWdDYWNoZSA9IG5ldyBXZWFrTWFwPFRlbXBsYXRlU3RyaW5nc0FycmF5LCBDU1NTdHlsZVNoZWV0PigpO1xuXG4vKipcbiAqIEEgY29udGFpbmVyIGZvciBhIHN0cmluZyBvZiBDU1MgdGV4dCwgdGhhdCBtYXkgYmUgdXNlZCB0byBjcmVhdGUgYSBDU1NTdHlsZVNoZWV0LlxuICpcbiAqIENTU1Jlc3VsdCBpcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGBjc3NgLXRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFscyBhbmRcbiAqIGB1bnNhZmVDU1MoKWAuIEluIG9yZGVyIHRvIGVuc3VyZSB0aGF0IENTU1Jlc3VsdHMgYXJlIG9ubHkgY3JlYXRlZCB2aWEgdGhlXG4gKiBgY3NzYCB0YWcgYW5kIGB1bnNhZmVDU1MoKWAsIENTU1Jlc3VsdCBjYW5ub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBDU1NSZXN1bHQge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBbJ18kY3NzUmVzdWx0JCddID0gdHJ1ZTtcbiAgcmVhZG9ubHkgY3NzVGV4dDogc3RyaW5nO1xuICBwcml2YXRlIF9zdHlsZVNoZWV0PzogQ1NTU3R5bGVTaGVldDtcbiAgcHJpdmF0ZSBfc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBjc3NUZXh0OiBzdHJpbmcsXG4gICAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQsXG4gICAgc2FmZVRva2VuOiBzeW1ib2xcbiAgKSB7XG4gICAgaWYgKHNhZmVUb2tlbiAhPT0gY29uc3RydWN0aW9uVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0NTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICB0aGlzLl9zdHJpbmdzID0gc3RyaW5ncztcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYSBnZXR0ZXIgc28gdGhhdCBpdCdzIGxhenkuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHN0eWxlc2hlZXRzXG4gIC8vIGFyZSBub3QgY3JlYXRlZCB1bnRpbCB0aGUgZmlyc3QgZWxlbWVudCBpbnN0YW5jZSBpcyBtYWRlLlxuICBnZXQgc3R5bGVTaGVldCgpOiBDU1NTdHlsZVNoZWV0IHwgdW5kZWZpbmVkIHtcbiAgICAvLyBJZiBgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzYCBpcyB0cnVlIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXQgaXNcbiAgICAvLyBjb25zdHJ1Y3RhYmxlLlxuICAgIGxldCBzdHlsZVNoZWV0ID0gdGhpcy5fc3R5bGVTaGVldDtcbiAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5fc3RyaW5ncztcbiAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzICYmIHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgY2FjaGVhYmxlID0gc3RyaW5ncyAhPT0gdW5kZWZpbmVkICYmIHN0cmluZ3MubGVuZ3RoID09PSAxO1xuICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICBzdHlsZVNoZWV0ID0gY3NzVGFnQ2FjaGUuZ2V0KHN0cmluZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAodGhpcy5fc3R5bGVTaGVldCA9IHN0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpKS5yZXBsYWNlU3luYyhcbiAgICAgICAgICB0aGlzLmNzc1RleHRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICAgIGNzc1RhZ0NhY2hlLnNldChzdHJpbmdzLCBzdHlsZVNoZWV0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVTaGVldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3NzVGV4dDtcbiAgfVxufVxuXG50eXBlIENvbnN0cnVjdGFibGVDU1NSZXN1bHQgPSBDU1NSZXN1bHQgJiB7XG4gIG5ldyAoXG4gICAgY3NzVGV4dDogc3RyaW5nLFxuICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5IHwgdW5kZWZpbmVkLFxuICAgIHNhZmVUb2tlbjogc3ltYm9sXG4gICk6IENTU1Jlc3VsdDtcbn07XG5cbmNvbnN0IHRleHRGcm9tQ1NTUmVzdWx0ID0gKHZhbHVlOiBDU1NSZXN1bHRHcm91cCB8IG51bWJlcikgPT4ge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBpZiAoKHZhbHVlIGFzIENTU1Jlc3VsdClbJ18kY3NzUmVzdWx0JCddID09PSB0cnVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSBhcyBDU1NSZXN1bHQpLmNzc1RleHQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVmFsdWUgcGFzc2VkIHRvICdjc3MnIGZ1bmN0aW9uIG11c3QgYmUgYSAnY3NzJyBmdW5jdGlvbiByZXN1bHQ6IGAgK1xuICAgICAgICBgJHt2YWx1ZX0uIFVzZSAndW5zYWZlQ1NTJyB0byBwYXNzIG5vbi1saXRlcmFsIHZhbHVlcywgYnV0IHRha2UgY2FyZSBgICtcbiAgICAgICAgYHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LmBcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIFdyYXAgYSB2YWx1ZSBmb3IgaW50ZXJwb2xhdGlvbiBpbiBhIHtAbGlua2NvZGUgY3NzfSB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbC5cbiAqXG4gKiBUaGlzIGlzIHVuc2FmZSBiZWNhdXNlIHVudHJ1c3RlZCBDU1MgdGV4dCBjYW4gYmUgdXNlZCB0byBwaG9uZSBob21lXG4gKiBvciBleGZpbHRyYXRlIGRhdGEgdG8gYW4gYXR0YWNrZXIgY29udHJvbGxlZCBzaXRlLiBUYWtlIGNhcmUgdG8gb25seSB1c2VcbiAqIHRoaXMgd2l0aCB0cnVzdGVkIGlucHV0LlxuICovXG5leHBvcnQgY29uc3QgdW5zYWZlQ1NTID0gKHZhbHVlOiB1bmtub3duKSA9PlxuICBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpLFxuICAgIHVuZGVmaW5lZCxcbiAgICBjb25zdHJ1Y3Rpb25Ub2tlblxuICApO1xuXG4vKipcbiAqIEEgdGVtcGxhdGUgbGl0ZXJhbCB0YWcgd2hpY2ggY2FuIGJlIHVzZWQgd2l0aCBMaXRFbGVtZW50J3NcbiAqIHtAbGlua2NvZGUgTGl0RWxlbWVudC5zdHlsZXN9IHByb3BlcnR5IHRvIHNldCBlbGVtZW50IHN0eWxlcy5cbiAqXG4gKiBGb3Igc2VjdXJpdHkgcmVhc29ucywgb25seSBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgYW5kIG51bWJlciBtYXkgYmUgdXNlZCBpblxuICogZW1iZWRkZWQgZXhwcmVzc2lvbnMuIFRvIGluY29ycG9yYXRlIG5vbi1saXRlcmFsIHZhbHVlcyB7QGxpbmtjb2RlIHVuc2FmZUNTU31cbiAqIG1heSBiZSB1c2VkIGluc2lkZSBhbiBleHByZXNzaW9uLlxuICovXG5leHBvcnQgY29uc3QgY3NzID0gKFxuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSxcbiAgLi4udmFsdWVzOiAoQ1NTUmVzdWx0R3JvdXAgfCBudW1iZXIpW11cbik6IENTU1Jlc3VsdCA9PiB7XG4gIGNvbnN0IGNzc1RleHQgPVxuICAgIHN0cmluZ3MubGVuZ3RoID09PSAxXG4gICAgICA/IHN0cmluZ3NbMF1cbiAgICAgIDogdmFsdWVzLnJlZHVjZShcbiAgICAgICAgICAoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSxcbiAgICAgICAgICBzdHJpbmdzWzBdXG4gICAgICAgICk7XG4gIHJldHVybiBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICBjc3NUZXh0LFxuICAgIHN0cmluZ3MsXG4gICAgY29uc3RydWN0aW9uVG9rZW5cbiAgKTtcbn07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgZ2l2ZW4gc3R5bGVzIHRvIGEgYHNoYWRvd1Jvb3RgLiBXaGVuIFNoYWRvdyBET00gaXNcbiAqIGF2YWlsYWJsZSBidXQgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgbm90LCBzdHlsZXMgYXJlIGFwcGVuZGVkIHRvIHRoZVxuICogYHNoYWRvd1Jvb3RgIHRvIFttaW1pYyB0aGUgbmF0aXZlIGZlYXR1cmVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TaGFkb3dSb290L2Fkb3B0ZWRTdHlsZVNoZWV0cykuXG4gKiBOb3RlLCB3aGVuIHNoaW1taW5nIGlzIHVzZWQsIGFueSBzdHlsZXMgdGhhdCBhcmUgc3Vic2VxdWVudGx5IHBsYWNlZCBpbnRvXG4gKiB0aGUgc2hhZG93Um9vdCBzaG91bGQgYmUgcGxhY2VkICpiZWZvcmUqIGFueSBzaGltbWVkIGFkb3B0ZWQgc3R5bGVzLiBUaGlzXG4gKiB3aWxsIG1hdGNoIHNwZWMgYmVoYXZpb3IgdGhhdCBnaXZlcyBhZG9wdGVkIHNoZWV0cyBwcmVjZWRlbmNlIG92ZXIgc3R5bGVzIGluXG4gKiBzaGFkb3dSb290LlxuICovXG5leHBvcnQgY29uc3QgYWRvcHRTdHlsZXMgPSAoXG4gIHJlbmRlclJvb3Q6IFNoYWRvd1Jvb3QsXG4gIHN0eWxlczogQXJyYXk8Q1NTUmVzdWx0T3JOYXRpdmU+XG4pID0+IHtcbiAgaWYgKHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cykge1xuICAgIChyZW5kZXJSb290IGFzIFNoYWRvd1Jvb3QpLmFkb3B0ZWRTdHlsZVNoZWV0cyA9IHN0eWxlcy5tYXAoKHMpID0+XG4gICAgICBzIGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCA/IHMgOiBzLnN0eWxlU2hlZXQhXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGNvbnN0IHMgb2Ygc3R5bGVzKSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgY29uc3Qgbm9uY2UgPSAoZ2xvYmFsIGFzIGFueSlbJ2xpdE5vbmNlJ107XG4gICAgICBpZiAobm9uY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbm9uY2UpO1xuICAgICAgfVxuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSAocyBhcyBDU1NSZXN1bHQpLmNzc1RleHQ7XG4gICAgICByZW5kZXJSb290LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGNzc1Jlc3VsdEZyb21TdHlsZVNoZWV0ID0gKHNoZWV0OiBDU1NTdHlsZVNoZWV0KSA9PiB7XG4gIGxldCBjc3NUZXh0ID0gJyc7XG4gIGZvciAoY29uc3QgcnVsZSBvZiBzaGVldC5jc3NSdWxlcykge1xuICAgIGNzc1RleHQgKz0gcnVsZS5jc3NUZXh0O1xuICB9XG4gIHJldHVybiB1bnNhZmVDU1MoY3NzVGV4dCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q29tcGF0aWJsZVN0eWxlID1cbiAgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIHx8XG4gIChOT0RFX01PREUgJiYgZ2xvYmFsLkNTU1N0eWxlU2hlZXQgPT09IHVuZGVmaW5lZClcbiAgICA/IChzOiBDU1NSZXN1bHRPck5hdGl2ZSkgPT4gc1xuICAgIDogKHM6IENTU1Jlc3VsdE9yTmF0aXZlKSA9PlxuICAgICAgICBzIGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCA/IGNzc1Jlc3VsdEZyb21TdHlsZVNoZWV0KHMpIDogcztcbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLyoqXG4gKiBVc2UgdGhpcyBtb2R1bGUgaWYgeW91IHdhbnQgdG8gY3JlYXRlIHlvdXIgb3duIGJhc2UgY2xhc3MgZXh0ZW5kaW5nXG4gKiB7QGxpbmsgUmVhY3RpdmVFbGVtZW50fS5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7XG4gIGdldENvbXBhdGlibGVTdHlsZSxcbiAgYWRvcHRTdHlsZXMsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBDU1NSZXN1bHRPck5hdGl2ZSxcbn0gZnJvbSAnLi9jc3MtdGFnLmpzJztcbmltcG9ydCB0eXBlIHtcbiAgUmVhY3RpdmVDb250cm9sbGVyLFxuICBSZWFjdGl2ZUNvbnRyb2xsZXJIb3N0LFxufSBmcm9tICcuL3JlYWN0aXZlLWNvbnRyb2xsZXIuanMnO1xuXG4vLyBJbiB0aGUgTm9kZSBidWlsZCwgdGhpcyBpbXBvcnQgd2lsbCBiZSBpbmplY3RlZCBieSBSb2xsdXA6XG4vLyBpbXBvcnQge0hUTUxFbGVtZW50LCBjdXN0b21FbGVtZW50c30gZnJvbSAnQGxpdC1sYWJzL3Nzci1kb20tc2hpbSc7XG5cbmV4cG9ydCAqIGZyb20gJy4vY3NzLXRhZy5qcyc7XG5leHBvcnQgdHlwZSB7XG4gIFJlYWN0aXZlQ29udHJvbGxlcixcbiAgUmVhY3RpdmVDb250cm9sbGVySG9zdCxcbn0gZnJvbSAnLi9yZWFjdGl2ZS1jb250cm9sbGVyLmpzJztcblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBgcmVhZG9ubHlgIG1vZGlmaWVyIGZyb20gcHJvcGVydGllcyBpbiB0aGUgdW5pb24gSy5cbiAqXG4gKiBUaGlzIGlzIGEgc2FmZXIgd2F5IHRvIGNhc3QgYSB2YWx1ZSB0byBhIHR5cGUgd2l0aCBhIG11dGFibGUgdmVyc2lvbiBvZiBhXG4gKiByZWFkb25seSBmaWVsZCwgdGhhbiBjYXN0aW5nIHRvIGFuIGludGVyZmFjZSB3aXRoIHRoZSBmaWVsZCByZS1kZWNsYXJlZFxuICogYmVjYXVzZSBpdCBwcmVzZXJ2ZXMgdGhlIHR5cGUgb2YgYWxsIHRoZSBmaWVsZHMgYW5kIHdhcm5zIG9uIHR5cG9zLlxuICovXG50eXBlIE11dGFibGU8VCwgSyBleHRlbmRzIGtleW9mIFQ+ID0gT21pdDxULCBLPiAmIHtcbiAgLXJlYWRvbmx5IFtQIGluIGtleW9mIFBpY2s8VCwgSz5dOiBQIGV4dGVuZHMgSyA/IFRbUF0gOiBuZXZlcjtcbn07XG5cbi8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBBZGQgYGhhc093bmAgaGVyZSB3aGVuIHdlIHNoaXAgRVMyMDIyXG5jb25zdCB7XG4gIGlzLFxuICBkZWZpbmVQcm9wZXJ0eSxcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICBnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gIGdldFByb3RvdHlwZU9mLFxufSA9IE9iamVjdDtcblxuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIExldHMgYSBtaW5pZmllciByZXBsYWNlIGdsb2JhbFRoaXMgcmVmZXJlbmNlcyB3aXRoIGEgbWluaWZpZWQgbmFtZVxuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuaWYgKE5PREVfTU9ERSkge1xuICBnbG9iYWwuY3VzdG9tRWxlbWVudHMgPz89IGN1c3RvbUVsZW1lbnRzO1xufVxuXG5jb25zdCBERVZfTU9ERSA9IHRydWU7XG5cbmxldCBpc3N1ZVdhcm5pbmc6IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4gdm9pZDtcblxuY29uc3QgdHJ1c3RlZFR5cGVzID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIHt0cnVzdGVkVHlwZXM/OiB7ZW1wdHlTY3JpcHQ6ICcnfX0pXG4gIC50cnVzdGVkVHlwZXM7XG5cbi8vIFRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBodHRwczovL2NyYnVnLmNvbS85OTMyNjhcbi8vIEN1cnJlbnRseSwgYW55IGF0dHJpYnV0ZSBzdGFydGluZyB3aXRoIFwib25cIiBpcyBjb25zaWRlcmVkIHRvIGJlIGFcbi8vIFRydXN0ZWRTY3JpcHQgc291cmNlLiBTdWNoIGJvb2xlYW4gYXR0cmlidXRlcyBtdXN0IGJlIHNldCB0byB0aGUgZXF1aXZhbGVudFxuLy8gdHJ1c3RlZCBlbXB0eVNjcmlwdCB2YWx1ZS5cbmNvbnN0IGVtcHR5U3RyaW5nRm9yQm9vbGVhbkF0dHJpYnV0ZSA9IHRydXN0ZWRUeXBlc1xuICA/ICh0cnVzdGVkVHlwZXMuZW1wdHlTY3JpcHQgYXMgdW5rbm93biBhcyAnJylcbiAgOiAnJztcblxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwucmVhY3RpdmVFbGVtZW50UG9seWZpbGxTdXBwb3J0RGV2TW9kZVxuICA6IGdsb2JhbC5yZWFjdGl2ZUVsZW1lbnRQb2x5ZmlsbFN1cHBvcnQ7XG5cbmlmIChERVZfTU9ERSkge1xuICAvLyBFbnN1cmUgd2FybmluZ3MgYXJlIGlzc3VlZCBvbmx5IDF4LCBldmVuIGlmIG11bHRpcGxlIHZlcnNpb25zIG9mIExpdFxuICAvLyBhcmUgbG9hZGVkLlxuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gYCBTZWUgaHR0cHM6Ly9saXQuZGV2L21zZy8ke2NvZGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLmA7XG4gICAgaWYgKFxuICAgICAgIWdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuaGFzKHdhcm5pbmcpICYmXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMoY29kZSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbiAgICAgIGdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcblxuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaXNzdWVXYXJuaW5nKFxuICAgICAgJ2Rldi1tb2RlJyxcbiAgICAgIGBMaXQgaXMgaW4gZGV2IG1vZGUuIE5vdCByZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbiFgXG4gICAgKTtcblxuICAgIC8vIElzc3VlIHBvbHlmaWxsIHN1cHBvcnQgd2FybmluZy5cbiAgICBpZiAoZ2xvYmFsLlNoYWR5RE9NPy5pblVzZSAmJiBwb2x5ZmlsbFN1cHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAncG9seWZpbGwtc3VwcG9ydC1taXNzaW5nJyxcbiAgICAgICAgYFNoYWRvdyBET00gaXMgYmVpbmcgcG9seWZpbGxlZCB2aWEgXFxgU2hhZHlET01cXGAgYnV0IGAgK1xuICAgICAgICAgIGB0aGUgXFxgcG9seWZpbGwtc3VwcG9ydFxcYCBtb2R1bGUgaGFzIG5vdCBiZWVuIGxvYWRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQ29udGFpbnMgdHlwZXMgdGhhdCBhcmUgcGFydCBvZiB0aGUgdW5zdGFibGUgZGVidWcgQVBJLlxuICpcbiAqIEV2ZXJ5dGhpbmcgaW4gdGhpcyBBUEkgaXMgbm90IHN0YWJsZSBhbmQgbWF5IGNoYW5nZSBvciBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUsXG4gKiBldmVuIG9uIHBhdGNoIHJlbGVhc2VzLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBSZWFjdGl2ZVVuc3RhYmxlIHtcbiAgLyoqXG4gICAqIFdoZW4gTGl0IGlzIHJ1bm5pbmcgaW4gZGV2IG1vZGUgYW5kIGB3aW5kb3cuZW1pdExpdERlYnVnTG9nRXZlbnRzYCBpcyB0cnVlLFxuICAgKiB3ZSB3aWxsIGVtaXQgJ2xpdC1kZWJ1ZycgZXZlbnRzIHRvIHdpbmRvdywgd2l0aCBsaXZlIGRldGFpbHMgYWJvdXQgdGhlIHVwZGF0ZSBhbmQgcmVuZGVyXG4gICAqIGxpZmVjeWNsZS4gVGhlc2UgY2FuIGJlIHVzZWZ1bCBmb3Igd3JpdGluZyBkZWJ1ZyB0b29saW5nIGFuZCB2aXN1YWxpemF0aW9ucy5cbiAgICpcbiAgICogUGxlYXNlIGJlIGF3YXJlIHRoYXQgcnVubmluZyB3aXRoIHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHMgaGFzIHBlcmZvcm1hbmNlIG92ZXJoZWFkLFxuICAgKiBtYWtpbmcgY2VydGFpbiBvcGVyYXRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHZlcnkgY2hlYXAgKGxpa2UgYSBuby1vcCByZW5kZXIpIG11Y2ggc2xvd2VyLFxuICAgKiBiZWNhdXNlIHdlIG11c3QgY29weSBkYXRhIGFuZCBkaXNwYXRjaCBldmVudHMuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuICBleHBvcnQgbmFtZXNwYWNlIERlYnVnTG9nIHtcbiAgICBleHBvcnQgdHlwZSBFbnRyeSA9IFVwZGF0ZTtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFVwZGF0ZSB7XG4gICAgICBraW5kOiAndXBkYXRlJztcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIERlYnVnTG9nZ2luZ1dpbmRvdyB7XG4gIC8vIEV2ZW4gaW4gZGV2IG1vZGUsIHdlIGdlbmVyYWxseSBkb24ndCB3YW50IHRvIGVtaXQgdGhlc2UgZXZlbnRzLCBhcyB0aGF0J3NcbiAgLy8gYW5vdGhlciBsZXZlbCBvZiBjb3N0LCBzbyBvbmx5IGVtaXQgdGhlbSB3aGVuIERFVl9NT0RFIGlzIHRydWUgX2FuZF8gd2hlblxuICAvLyB3aW5kb3cuZW1pdExpdERlYnVnRXZlbnRzIGlzIHRydWUuXG4gIGVtaXRMaXREZWJ1Z0xvZ0V2ZW50cz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVXNlZnVsIGZvciB2aXN1YWxpemluZyBhbmQgbG9nZ2luZyBpbnNpZ2h0cyBpbnRvIHdoYXQgdGhlIExpdCB0ZW1wbGF0ZSBzeXN0ZW0gaXMgZG9pbmcuXG4gKlxuICogQ29tcGlsZWQgb3V0IG9mIHByb2QgbW9kZSBidWlsZHMuXG4gKi9cbmNvbnN0IGRlYnVnTG9nRXZlbnQgPSBERVZfTU9ERVxuICA/IChldmVudDogUmVhY3RpdmVVbnN0YWJsZS5EZWJ1Z0xvZy5FbnRyeSkgPT4ge1xuICAgICAgY29uc3Qgc2hvdWxkRW1pdCA9IChnbG9iYWwgYXMgdW5rbm93biBhcyBEZWJ1Z0xvZ2dpbmdXaW5kb3cpXG4gICAgICAgIC5lbWl0TGl0RGVidWdMb2dFdmVudHM7XG4gICAgICBpZiAoIXNob3VsZEVtaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZ2xvYmFsLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudDxSZWFjdGl2ZVVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5PignbGl0LWRlYnVnJywge1xuICAgICAgICAgIGRldGFpbDogZXZlbnQsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgOiB1bmRlZmluZWQ7XG5cbi8qXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXNcbiAqIHJlcGxhY2VkIGF0IGNvbXBpbGUgdGltZSBieSB0aGUgbXVuZ2VkIG5hbWUgZm9yIG9iamVjdFtwcm9wZXJ0eV0uIFdlIGNhbm5vdFxuICogYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lXG4gKiBiZWhhdmlvciB3aGVuIG5vdCBjb21waWxpbmcuXG4gKi9cbi8qQF9fSU5MSU5FX18qL1xuY29uc3QgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9IDxQIGV4dGVuZHMgUHJvcGVydHlLZXk+KFxuICBwcm9wOiBQLFxuICBfb2JqOiB1bmtub3duXG4pOiBQID0+IHByb3A7XG5cbi8qKlxuICogQ29udmVydHMgcHJvcGVydHkgdmFsdWVzIHRvIGFuZCBmcm9tIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlcjxUeXBlID0gdW5rbm93biwgVHlwZUhpbnQgPSB1bmtub3duPiB7XG4gIC8qKlxuICAgKiBDYWxsZWQgdG8gY29udmVydCBhbiBhdHRyaWJ1dGUgdmFsdWUgdG8gYSBwcm9wZXJ0eVxuICAgKiB2YWx1ZS5cbiAgICovXG4gIGZyb21BdHRyaWJ1dGU/KHZhbHVlOiBzdHJpbmcgfCBudWxsLCB0eXBlPzogVHlwZUhpbnQpOiBUeXBlO1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgdG8gY29udmVydCBhIHByb3BlcnR5IHZhbHVlIHRvIGFuIGF0dHJpYnV0ZVxuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogSXQgcmV0dXJucyB1bmtub3duIGluc3RlYWQgb2Ygc3RyaW5nLCB0byBiZSBjb21wYXRpYmxlIHdpdGhcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvdHJ1c3RlZC10eXBlcyAoYW5kIHNpbWlsYXIgZWZmb3J0cykuXG4gICAqL1xuICB0b0F0dHJpYnV0ZT8odmFsdWU6IFR5cGUsIHR5cGU/OiBUeXBlSGludCk6IHVua25vd247XG59XG5cbnR5cGUgQXR0cmlidXRlQ29udmVydGVyPFR5cGUgPSB1bmtub3duLCBUeXBlSGludCA9IHVua25vd24+ID1cbiAgfCBDb21wbGV4QXR0cmlidXRlQ29udmVydGVyPFR5cGU+XG4gIHwgKCh2YWx1ZTogc3RyaW5nIHwgbnVsbCwgdHlwZT86IFR5cGVIaW50KSA9PiBUeXBlKTtcblxuLyoqXG4gKiBEZWZpbmVzIG9wdGlvbnMgZm9yIGEgcHJvcGVydHkgYWNjZXNzb3IuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlEZWNsYXJhdGlvbjxUeXBlID0gdW5rbm93biwgVHlwZUhpbnQgPSB1bmtub3duPiB7XG4gIC8qKlxuICAgKiBXaGVuIHNldCB0byBgdHJ1ZWAsIGluZGljYXRlcyB0aGUgcHJvcGVydHkgaXMgaW50ZXJuYWwgcHJpdmF0ZSBzdGF0ZS4gVGhlXG4gICAqIHByb3BlcnR5IHNob3VsZCBub3QgYmUgc2V0IGJ5IHVzZXJzLiBXaGVuIHVzaW5nIFR5cGVTY3JpcHQsIHRoaXMgcHJvcGVydHlcbiAgICogc2hvdWxkIGJlIG1hcmtlZCBhcyBgcHJpdmF0ZWAgb3IgYHByb3RlY3RlZGAsIGFuZCBpdCBpcyBhbHNvIGEgY29tbW9uXG4gICAqIHByYWN0aWNlIHRvIHVzZSBhIGxlYWRpbmcgYF9gIGluIHRoZSBuYW1lLiBUaGUgcHJvcGVydHkgaXMgbm90IGFkZGVkIHRvXG4gICAqIGBvYnNlcnZlZEF0dHJpYnV0ZXNgLlxuICAgKi9cbiAgcmVhZG9ubHkgc3RhdGU/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaG93IGFuZCB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBiZWNvbWVzIGFuIG9ic2VydmVkIGF0dHJpYnV0ZS5cbiAgICogSWYgdGhlIHZhbHVlIGlzIGBmYWxzZWAsIHRoZSBwcm9wZXJ0eSBpcyBub3QgYWRkZWQgdG8gYG9ic2VydmVkQXR0cmlidXRlc2AuXG4gICAqIElmIHRydWUgb3IgYWJzZW50LCB0aGUgbG93ZXJjYXNlZCBwcm9wZXJ0eSBuYW1lIGlzIG9ic2VydmVkIChlLmcuIGBmb29CYXJgXG4gICAqIGJlY29tZXMgYGZvb2JhcmApLiBJZiBhIHN0cmluZywgdGhlIHN0cmluZyB2YWx1ZSBpcyBvYnNlcnZlZCAoZS5nXG4gICAqIGBhdHRyaWJ1dGU6ICdmb28tYmFyJ2ApLlxuICAgKi9cbiAgcmVhZG9ubHkgYXR0cmlidXRlPzogYm9vbGVhbiB8IHN0cmluZztcblxuICAvKipcbiAgICogSW5kaWNhdGVzIHRoZSB0eXBlIG9mIHRoZSBwcm9wZXJ0eS4gVGhpcyBpcyB1c2VkIG9ubHkgYXMgYSBoaW50IGZvciB0aGVcbiAgICogYGNvbnZlcnRlcmAgdG8gZGV0ZXJtaW5lIGhvdyB0byBjb252ZXJ0IHRoZSBhdHRyaWJ1dGVcbiAgICogdG8vZnJvbSBhIHByb3BlcnR5LlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZT86IFR5cGVIaW50O1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaG93IHRvIGNvbnZlcnQgdGhlIGF0dHJpYnV0ZSB0by9mcm9tIGEgcHJvcGVydHkuIElmIHRoaXMgdmFsdWVcbiAgICogaXMgYSBmdW5jdGlvbiwgaXQgaXMgdXNlZCB0byBjb252ZXJ0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgYSB0aGUgcHJvcGVydHlcbiAgICogdmFsdWUuIElmIGl0J3MgYW4gb2JqZWN0LCBpdCBjYW4gaGF2ZSBrZXlzIGZvciBgZnJvbUF0dHJpYnV0ZWAgYW5kXG4gICAqIGB0b0F0dHJpYnV0ZWAuIElmIG5vIGB0b0F0dHJpYnV0ZWAgZnVuY3Rpb24gaXMgcHJvdmlkZWQgYW5kXG4gICAqIGByZWZsZWN0YCBpcyBzZXQgdG8gYHRydWVgLCB0aGUgcHJvcGVydHkgdmFsdWUgaXMgc2V0IGRpcmVjdGx5IHRvIHRoZVxuICAgKiBhdHRyaWJ1dGUuIEEgZGVmYXVsdCBgY29udmVydGVyYCBpcyB1c2VkIGlmIG5vbmUgaXMgcHJvdmlkZWQ7IGl0IHN1cHBvcnRzXG4gICAqIGBCb29sZWFuYCwgYFN0cmluZ2AsIGBOdW1iZXJgLCBgT2JqZWN0YCwgYW5kIGBBcnJheWAuIE5vdGUsXG4gICAqIHdoZW4gYSBwcm9wZXJ0eSBjaGFuZ2VzIGFuZCB0aGUgY29udmVydGVyIGlzIHVzZWQgdG8gdXBkYXRlIHRoZSBhdHRyaWJ1dGUsXG4gICAqIHRoZSBwcm9wZXJ0eSBpcyBuZXZlciB1cGRhdGVkIGFnYWluIGFzIGEgcmVzdWx0IG9mIHRoZSBhdHRyaWJ1dGUgY2hhbmdpbmcsXG4gICAqIGFuZCB2aWNlIHZlcnNhLlxuICAgKi9cbiAgcmVhZG9ubHkgY29udmVydGVyPzogQXR0cmlidXRlQ29udmVydGVyPFR5cGUsIFR5cGVIaW50PjtcblxuICAvKipcbiAgICogSW5kaWNhdGVzIGlmIHRoZSBwcm9wZXJ0eSBzaG91bGQgcmVmbGVjdCB0byBhbiBhdHRyaWJ1dGUuXG4gICAqIElmIGB0cnVlYCwgd2hlbiB0aGUgcHJvcGVydHkgaXMgc2V0LCB0aGUgYXR0cmlidXRlIGlzIHNldCB1c2luZyB0aGVcbiAgICogYXR0cmlidXRlIG5hbWUgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIGZvciB0aGUgYGF0dHJpYnV0ZWBcbiAgICogcHJvcGVydHkgb3B0aW9uIGFuZCB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGNvbnZlcnRlZCB1c2luZyB0aGUgcnVsZXNcbiAgICogZnJvbSB0aGUgYGNvbnZlcnRlcmAgcHJvcGVydHkgb3B0aW9uLlxuICAgKi9cbiAgcmVhZG9ubHkgcmVmbGVjdD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBpbmRpY2F0ZXMgaWYgYSBwcm9wZXJ0eSBzaG91bGQgYmUgY29uc2lkZXJlZCBjaGFuZ2VkIHdoZW5cbiAgICogaXQgaXMgc2V0LiBUaGUgZnVuY3Rpb24gc2hvdWxkIHRha2UgdGhlIGBuZXdWYWx1ZWAgYW5kIGBvbGRWYWx1ZWAgYW5kXG4gICAqIHJldHVybiBgdHJ1ZWAgaWYgYW4gdXBkYXRlIHNob3VsZCBiZSByZXF1ZXN0ZWQuXG4gICAqL1xuICBoYXNDaGFuZ2VkPyh2YWx1ZTogVHlwZSwgb2xkVmFsdWU6IFR5cGUpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciBhbiBhY2Nlc3NvciB3aWxsIGJlIGNyZWF0ZWQgZm9yIHRoaXMgcHJvcGVydHkuIEJ5XG4gICAqIGRlZmF1bHQsIGFuIGFjY2Vzc29yIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciB0aGlzIHByb3BlcnR5IHRoYXQgcmVxdWVzdHMgYW5cbiAgICogdXBkYXRlIHdoZW4gc2V0LiBJZiB0aGlzIGZsYWcgaXMgYHRydWVgLCBubyBhY2Nlc3NvciB3aWxsIGJlIGNyZWF0ZWQsIGFuZFxuICAgKiBpdCB3aWxsIGJlIHRoZSB1c2VyJ3MgcmVzcG9uc2liaWxpdHkgdG8gY2FsbFxuICAgKiBgdGhpcy5yZXF1ZXN0VXBkYXRlKHByb3BlcnR5TmFtZSwgb2xkVmFsdWUpYCB0byByZXF1ZXN0IGFuIHVwZGF0ZSB3aGVuXG4gICAqIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgbm9BY2Nlc3Nvcj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBwcm9wZXJ0eSBpcyB3cmFwcGluZyBhY2Nlc3NvcnMuIFRoaXMgaXMgc2V0IGJ5IGBAcHJvcGVydHlgXG4gICAqIHRvIGNvbnRyb2wgdGhlIGluaXRpYWwgdmFsdWUgY2hhbmdlIGFuZCByZWZsZWN0aW9uIGxvZ2ljLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHdyYXBwZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGVuIGB0cnVlYCwgdXNlcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXMgdGhlIGRlZmF1bHQgdmFsdWUsXG4gICAqIHdoaWNoIGNoYW5nZXMgaG93IGF0dHJpYnV0ZXMgYXJlIGhhbmRsZWQ6XG4gICAqICAtIFRoZSBpbml0aWFsIHZhbHVlIGRvZXMgKm5vdCogcmVmbGVjdCwgZXZlbiBpZiB0aGUgYHJlZmxlY3RgIG9wdGlvbiBpcyBgdHJ1ZWAuXG4gICAqICAgIFN1YnNlcXVlbnQgY2hhbmdlcyB0byB0aGUgcHJvcGVydHkgd2lsbCByZWZsZWN0LCBldmVuIGlmIHRoZXkgYXJlIGVxdWFsIHRvIHRoZVxuICAgKiAgICAgZGVmYXVsdCB2YWx1ZS5cbiAgICogIC0gV2hlbiB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQsIHRoZSBwcm9wZXJ0eSBpcyBzZXQgdG8gdGhlIGRlZmF1bHQgdmFsdWVcbiAgICogIC0gVGhlIGluaXRpYWwgdmFsdWUgd2lsbCBub3QgdHJpZ2dlciBhbiBvbGQgdmFsdWUgaW4gdGhlIGBjaGFuZ2VkUHJvcGVydGllc2AgbWFwXG4gICAqICAgIGFyZ3VtZW50IHRvIHVwZGF0ZSBsaWZlY3ljbGUgbWV0aG9kcy5cbiAgICpcbiAgICogV2hlbiBzZXQsIHByb3BlcnRpZXMgbXVzdCBiZSBpbml0aWFsaXplZCwgZWl0aGVyIHdpdGggYSBmaWVsZCBpbml0aWFsaXplciwgb3IgYW5cbiAgICogYXNzaWdubWVudCBpbiB0aGUgY29uc3RydWN0b3IuIE5vdCBpbml0aWFsaXppbmcgdGhlIHByb3BlcnR5IG1heSBsZWFkIHRvXG4gICAqIGltcHJvcGVyIGhhbmRsaW5nIG9mIHN1YnNlcXVlbnQgcHJvcGVydHkgYXNzaWdubWVudHMuXG4gICAqXG4gICAqIFdoaWxlIHRoaXMgYmVoYXZpb3IgaXMgb3B0LWluLCBtb3N0IHByb3BlcnRpZXMgdGhhdCByZWZsZWN0IHRvIGF0dHJpYnV0ZXMgc2hvdWxkXG4gICAqIHVzZSBgdXNlRGVmYXVsdDogdHJ1ZWAgc28gdGhhdCB0aGVpciBpbml0aWFsIHZhbHVlcyBkbyBub3QgcmVmbGVjdC5cbiAgICovXG4gIHVzZURlZmF1bHQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIE1hcCBvZiBwcm9wZXJ0aWVzIHRvIFByb3BlcnR5RGVjbGFyYXRpb24gb3B0aW9ucy4gRm9yIGVhY2ggcHJvcGVydHkgYW5cbiAqIGFjY2Vzc29yIGlzIG1hZGUsIGFuZCB0aGUgcHJvcGVydHkgaXMgcHJvY2Vzc2VkIGFjY29yZGluZyB0byB0aGVcbiAqIFByb3BlcnR5RGVjbGFyYXRpb24gb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eURlY2xhcmF0aW9ucyB7XG4gIHJlYWRvbmx5IFtrZXk6IHN0cmluZ106IFByb3BlcnR5RGVjbGFyYXRpb247XG59XG5cbnR5cGUgUHJvcGVydHlEZWNsYXJhdGlvbk1hcCA9IE1hcDxQcm9wZXJ0eUtleSwgUHJvcGVydHlEZWNsYXJhdGlvbj47XG5cbnR5cGUgQXR0cmlidXRlTWFwID0gTWFwPHN0cmluZywgUHJvcGVydHlLZXk+O1xuXG4vKipcbiAqIEEgTWFwIG9mIHByb3BlcnR5IGtleXMgdG8gdmFsdWVzLlxuICpcbiAqIFRha2VzIGFuIG9wdGlvbmFsIHR5cGUgcGFyYW1ldGVyIFQsIHdoaWNoIHdoZW4gc3BlY2lmaWVkIGFzIGEgbm9uLWFueSxcbiAqIG5vbi11bmtub3duIHR5cGUsIHdpbGwgbWFrZSB0aGUgTWFwIG1vcmUgc3Ryb25nbHktdHlwZWQsIGFzc29jaWF0aW5nIHRoZSBtYXBcbiAqIGtleXMgd2l0aCB0aGVpciBjb3JyZXNwb25kaW5nIHZhbHVlIHR5cGUgb24gVC5cbiAqXG4gKiBVc2UgYFByb3BlcnR5VmFsdWVzPHRoaXM+YCB3aGVuIG92ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LnVwZGF0ZSgpIGFuZFxuICogb3RoZXIgbGlmZWN5Y2xlIG1ldGhvZHMgaW4gb3JkZXIgdG8gZ2V0IHN0cm9uZ2VyIHR5cGUtY2hlY2tpbmcgb24ga2V5c1xuICogYW5kIHZhbHVlcy5cbiAqL1xuLy8gVGhpcyB0eXBlIGlzIGNvbmRpdGlvbmFsIHNvIHRoYXQgaWYgdGhlIHBhcmFtZXRlciBUIGlzIG5vdCBzcGVjaWZpZWQsIG9yXG4vLyBpcyBgYW55YCwgdGhlIHR5cGUgd2lsbCBpbmNsdWRlIGBNYXA8UHJvcGVydHlLZXksIHVua25vd24+YC4gU2luY2UgVCBpcyBub3Rcbi8vIGdpdmVuIGluIHRoZSB1c2VzIG9mIFByb3BlcnR5VmFsdWVzIGluIHRoaXMgZmlsZSwgYWxsIHVzZXMgaGVyZSBmYWxsYmFjayB0b1xuLy8gbWVhbmluZyBgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPmAsIGJ1dCBpZiBhIGRldmVsb3BlciB1c2VzXG4vLyBgUHJvcGVydHlWYWx1ZXM8dGhpcz5gIChvciBhbnkgb3RoZXIgdmFsdWUgZm9yIFQpIHRoZXkgd2lsbCBnZXQgYVxuLy8gc3Ryb25nbHktdHlwZWQgTWFwIHR5cGUuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IHR5cGUgUHJvcGVydHlWYWx1ZXM8VCA9IGFueT4gPSBUIGV4dGVuZHMgb2JqZWN0XG4gID8gUHJvcGVydHlWYWx1ZU1hcDxUPlxuICA6IE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj47XG5cbi8qKlxuICogRG8gbm90IHVzZSwgaW5zdGVhZCBwcmVmZXIge0BsaW5rY29kZSBQcm9wZXJ0eVZhbHVlc30uXG4gKi9cbi8vIFRoaXMgdHlwZSBtdXN0IGJlIGV4cG9ydGVkIHN1Y2ggdGhhdCBKYXZhU2NyaXB0IGdlbmVyYXRlZCBieSB0aGUgR29vZ2xlXG4vLyBDbG9zdXJlIENvbXBpbGVyIGNhbiBpbXBvcnQgYSB0eXBlIHJlZmVyZW5jZS5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlWYWx1ZU1hcDxUPiBleHRlbmRzIE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj4ge1xuICBnZXQ8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBUW0tdIHwgdW5kZWZpbmVkO1xuICBzZXQ8SyBleHRlbmRzIGtleW9mIFQ+KGtleTogSywgdmFsdWU6IFRbS10pOiB0aGlzO1xuICBoYXM8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBib29sZWFuO1xuICBkZWxldGU8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbnZlcnRlcjogQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlciA9IHtcbiAgdG9BdHRyaWJ1dGUodmFsdWU6IHVua25vd24sIHR5cGU/OiB1bmtub3duKTogdW5rbm93biB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyBlbXB0eVN0cmluZ0ZvckJvb2xlYW5BdHRyaWJ1dGUgOiBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgLy8gaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCBwYXNzIHRoaXMgdGhyb3VnaFxuICAgICAgICAvLyB0byBhbGxvdyByZW1vdmluZy9ubyBjaGFuZ2UgYmVoYXZpb3IuXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIGZyb21BdHRyaWJ1dGUodmFsdWU6IHN0cmluZyB8IG51bGwsIHR5cGU/OiB1bmtub3duKSB7XG4gICAgbGV0IGZyb21WYWx1ZTogdW5rbm93biA9IHZhbHVlO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICBmcm9tVmFsdWUgPSB2YWx1ZSAhPT0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgZnJvbVZhbHVlID0gdmFsdWUgPT09IG51bGwgPyBudWxsIDogTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9iamVjdDpcbiAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgIC8vIERvICpub3QqIGdlbmVyYXRlIGV4Y2VwdGlvbiB3aGVuIGludmFsaWQgSlNPTiBpcyBzZXQgYXMgZWxlbWVudHNcbiAgICAgICAgLy8gZG9uJ3Qgbm9ybWFsbHkgY29tcGxhaW4gb24gYmVpbmcgbWlzLWNvbmZpZ3VyZWQuXG4gICAgICAgIC8vIFRPRE8oc29ydmVsbCk6IERvIGdlbmVyYXRlIGV4Y2VwdGlvbiBpbiAqZGV2IG1vZGUqLlxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEFzc2VydCB0byBhZGhlcmUgdG8gQmF6ZWwncyBcIm11c3QgdHlwZSBhc3NlcnQgSlNPTiBwYXJzZVwiIHJ1bGUuXG4gICAgICAgICAgZnJvbVZhbHVlID0gSlNPTi5wYXJzZSh2YWx1ZSEpIGFzIHVua25vd247XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBmcm9tVmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbVZhbHVlO1xuICB9LFxufTtcblxuZXhwb3J0IGludGVyZmFjZSBIYXNDaGFuZ2VkIHtcbiAgKHZhbHVlOiB1bmtub3duLCBvbGQ6IHVua25vd24pOiBib29sZWFuO1xufVxuXG4vKipcbiAqIENoYW5nZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGRpZmZlcmVudCBmcm9tIGBvbGRWYWx1ZWAuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IGZvciBhIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgY29uc3Qgbm90RXF1YWw6IEhhc0NoYW5nZWQgPSAodmFsdWU6IHVua25vd24sIG9sZDogdW5rbm93bik6IGJvb2xlYW4gPT5cbiAgIWlzKHZhbHVlLCBvbGQpO1xuXG5jb25zdCBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbiA9IHtcbiAgYXR0cmlidXRlOiB0cnVlLFxuICB0eXBlOiBTdHJpbmcsXG4gIGNvbnZlcnRlcjogZGVmYXVsdENvbnZlcnRlcixcbiAgcmVmbGVjdDogZmFsc2UsXG4gIHVzZURlZmF1bHQ6IGZhbHNlLFxuICBoYXNDaGFuZ2VkOiBub3RFcXVhbCxcbn07XG5cbi8qKlxuICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIG9uZSBvZiB0aGUgc3VwcG9ydGVkIGRldiBtb2RlIHdhcm5pbmcgY2F0ZWdvcmllcy5cbiAqL1xuZXhwb3J0IHR5cGUgV2FybmluZ0tpbmQgPVxuICB8ICdjaGFuZ2UtaW4tdXBkYXRlJ1xuICB8ICdtaWdyYXRpb24nXG4gIHwgJ2FzeW5jLXBlcmZvcm0tdXBkYXRlJztcblxuZXhwb3J0IHR5cGUgSW5pdGlhbGl6ZXIgPSAoZWxlbWVudDogUmVhY3RpdmVFbGVtZW50KSA9PiB2b2lkO1xuXG4vLyBUZW1wb3JhcnksIHVudGlsIGdvb2dsZTMgaXMgb24gVHlwZVNjcmlwdCA1LjJcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFN5bWJvbENvbnN0cnVjdG9yIHtcbiAgICByZWFkb25seSBtZXRhZGF0YTogdW5pcXVlIHN5bWJvbDtcbiAgfVxufVxuXG4vLyBFbnN1cmUgbWV0YWRhdGEgaXMgZW5hYmxlZC4gVHlwZVNjcmlwdCBkb2VzIG5vdCBwb2x5ZmlsbFxuLy8gU3ltYm9sLm1ldGFkYXRhLCBzbyB3ZSBtdXN0IGVuc3VyZSB0aGF0IGl0IGV4aXN0cy5cbihTeW1ib2wgYXMge21ldGFkYXRhOiBzeW1ib2x9KS5tZXRhZGF0YSA/Pz0gU3ltYm9sKCdtZXRhZGF0YScpO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIFRoaXMgaXMgcHVibGljIGdsb2JhbCBBUEksIGRvIG5vdCBjaGFuZ2UhXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgdmFyIGxpdFByb3BlcnR5TWV0YWRhdGE6IFdlYWtNYXA8XG4gICAgb2JqZWN0LFxuICAgIE1hcDxQcm9wZXJ0eUtleSwgUHJvcGVydHlEZWNsYXJhdGlvbj5cbiAgPjtcbn1cblxuLy8gTWFwIGZyb20gYSBjbGFzcydzIG1ldGFkYXRhIG9iamVjdCB0byBwcm9wZXJ0eSBvcHRpb25zXG4vLyBOb3RlIHRoYXQgd2UgbXVzdCB1c2UgbnVsbGlzaC1jb2FsZXNjaW5nIGFzc2lnbm1lbnQgc28gdGhhdCB3ZSBvbmx5IHVzZSBvbmVcbi8vIG1hcCBldmVuIGlmIHdlIGxvYWQgbXVsdGlwbGUgdmVyc2lvbiBvZiB0aGlzIG1vZHVsZS5cbmdsb2JhbC5saXRQcm9wZXJ0eU1ldGFkYXRhID8/PSBuZXcgV2Vha01hcDxcbiAgb2JqZWN0LFxuICBNYXA8UHJvcGVydHlLZXksIFByb3BlcnR5RGVjbGFyYXRpb24+XG4+KCk7XG5cbi8qKlxuICogQmFzZSBlbGVtZW50IGNsYXNzIHdoaWNoIG1hbmFnZXMgZWxlbWVudCBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzLiBXaGVuXG4gKiBwcm9wZXJ0aWVzIGNoYW5nZSwgdGhlIGB1cGRhdGVgIG1ldGhvZCBpcyBhc3luY2hyb25vdXNseSBjYWxsZWQuIFRoaXMgbWV0aG9kXG4gKiBzaG91bGQgYmUgc3VwcGxpZWQgYnkgc3ViY2xhc3NlcyB0byByZW5kZXIgdXBkYXRlcyBhcyBkZXNpcmVkLlxuICogQG5vSW5oZXJpdERvY1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVhY3RpdmVFbGVtZW50XG4gIC8vIEluIHRoZSBOb2RlIGJ1aWxkLCB0aGlzIGBleHRlbmRzYCBjbGF1c2Ugd2lsbCBiZSBzdWJzdGl0dXRlZCB3aXRoXG4gIC8vIGAoZ2xvYmFsVGhpcy5IVE1MRWxlbWVudCA/PyBIVE1MRWxlbWVudClgLlxuICAvL1xuICAvLyBUaGlzIHdheSwgd2Ugd2lsbCBmaXJzdCBwcmVmZXIgYW55IGdsb2JhbCBgSFRNTEVsZW1lbnRgIHBvbHlmaWxsIHRoYXQgdGhlXG4gIC8vIHVzZXIgaGFzIGFzc2lnbmVkLCBhbmQgdGhlbiBmYWxsIGJhY2sgdG8gdGhlIGBIVE1MRWxlbWVudGAgc2hpbSB3aGljaCBoYXNcbiAgLy8gYmVlbiBpbXBvcnRlZCAoc2VlIG5vdGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUgYWJvdXQgaG93IHRoaXMgaW1wb3J0IGlzXG4gIC8vIGdlbmVyYXRlZCBieSBSb2xsdXApLiBOb3RlIHRoYXQgdGhlIGBIVE1MRWxlbWVudGAgdmFyaWFibGUgaGFzIGJlZW5cbiAgLy8gc2hhZG93ZWQgYnkgdGhpcyBpbXBvcnQsIHNvIGl0IG5vIGxvbmdlciByZWZlcnMgdG8gdGhlIGdsb2JhbC5cbiAgZXh0ZW5kcyBIVE1MRWxlbWVudFxuICBpbXBsZW1lbnRzIFJlYWN0aXZlQ29udHJvbGxlckhvc3RcbntcbiAgLy8gTm90ZTogdGhlc2UgYXJlIHBhdGNoZWQgaW4gb25seSBpbiBERVZfTU9ERS5cbiAgLyoqXG4gICAqIFJlYWQgb3Igc2V0IGFsbCB0aGUgZW5hYmxlZCB3YXJuaW5nIGNhdGVnb3JpZXMgZm9yIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgb25seSB1c2VkIGluIGRldmVsb3BtZW50IGJ1aWxkcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IGRldi1tb2RlXG4gICAqL1xuICBzdGF0aWMgZW5hYmxlZFdhcm5pbmdzPzogV2FybmluZ0tpbmRbXTtcblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBnaXZlbiB3YXJuaW5nIGNhdGVnb3J5IGZvciB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBvbmx5IGV4aXN0cyBpbiBkZXZlbG9wbWVudCBidWlsZHMsIHNvIGl0IHNob3VsZCBiZSBhY2Nlc3NlZFxuICAgKiB3aXRoIGEgZ3VhcmQgbGlrZTpcbiAgICpcbiAgICogYGBgdHNcbiAgICogLy8gRW5hYmxlIGZvciBhbGwgUmVhY3RpdmVFbGVtZW50IHN1YmNsYXNzZXNcbiAgICogUmVhY3RpdmVFbGVtZW50LmVuYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqXG4gICAqIC8vIEVuYWJsZSBmb3Igb25seSBNeUVsZW1lbnQgYW5kIHN1YmNsYXNzZXNcbiAgICogTXlFbGVtZW50LmVuYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgZGV2LW1vZGVcbiAgICovXG4gIHN0YXRpYyBlbmFibGVXYXJuaW5nPzogKHdhcm5pbmdLaW5kOiBXYXJuaW5nS2luZCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogRGlzYWJsZSB0aGUgZ2l2ZW4gd2FybmluZyBjYXRlZ29yeSBmb3IgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgb25seSBleGlzdHMgaW4gZGV2ZWxvcG1lbnQgYnVpbGRzLCBzbyBpdCBzaG91bGQgYmUgYWNjZXNzZWRcbiAgICogd2l0aCBhIGd1YXJkIGxpa2U6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIC8vIERpc2FibGUgZm9yIGFsbCBSZWFjdGl2ZUVsZW1lbnQgc3ViY2xhc3Nlc1xuICAgKiBSZWFjdGl2ZUVsZW1lbnQuZGlzYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqXG4gICAqIC8vIERpc2FibGUgZm9yIG9ubHkgTXlFbGVtZW50IGFuZCBzdWJjbGFzc2VzXG4gICAqIE15RWxlbWVudC5kaXNhYmxlV2FybmluZz8uKCdtaWdyYXRpb24nKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBkZXYtbW9kZVxuICAgKi9cbiAgc3RhdGljIGRpc2FibGVXYXJuaW5nPzogKHdhcm5pbmdLaW5kOiBXYXJuaW5nS2luZCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQWRkcyBhbiBpbml0aWFsaXplciBmdW5jdGlvbiB0byB0aGUgY2xhc3MgdGhhdCBpcyBjYWxsZWQgZHVyaW5nIGluc3RhbmNlXG4gICAqIGNvbnN0cnVjdGlvbi5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGNvZGUgdGhhdCBydW5zIGFnYWluc3QgYSBgUmVhY3RpdmVFbGVtZW50YFxuICAgKiBzdWJjbGFzcywgc3VjaCBhcyBhIGRlY29yYXRvciwgdGhhdCBuZWVkcyB0byBkbyB3b3JrIGZvciBlYWNoXG4gICAqIGluc3RhbmNlLCBzdWNoIGFzIHNldHRpbmcgdXAgYSBgUmVhY3RpdmVDb250cm9sbGVyYC5cbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgbXlEZWNvcmF0b3IgPSAodGFyZ2V0OiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50LCBrZXk6IHN0cmluZykgPT4ge1xuICAgKiAgIHRhcmdldC5hZGRJbml0aWFsaXplcigoaW5zdGFuY2U6IFJlYWN0aXZlRWxlbWVudCkgPT4ge1xuICAgKiAgICAgLy8gVGhpcyBpcyBydW4gZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiB0aGUgZWxlbWVudFxuICAgKiAgICAgbmV3IE15Q29udHJvbGxlcihpbnN0YW5jZSk7XG4gICAqICAgfSk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIERlY29yYXRpbmcgYSBmaWVsZCB3aWxsIHRoZW4gY2F1c2UgZWFjaCBpbnN0YW5jZSB0byBydW4gYW4gaW5pdGlhbGl6ZXJcbiAgICogdGhhdCBhZGRzIGEgY29udHJvbGxlcjpcbiAgICpcbiAgICogYGBgdHNcbiAgICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAqICAgQG15RGVjb3JhdG9yIGZvbztcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogSW5pdGlhbGl6ZXJzIGFyZSBzdG9yZWQgcGVyLWNvbnN0cnVjdG9yLiBBZGRpbmcgYW4gaW5pdGlhbGl6ZXIgdG8gYVxuICAgKiBzdWJjbGFzcyBkb2VzIG5vdCBhZGQgaXQgdG8gYSBzdXBlcmNsYXNzLiBTaW5jZSBpbml0aWFsaXplcnMgYXJlIHJ1biBpblxuICAgKiBjb25zdHJ1Y3RvcnMsIGluaXRpYWxpemVycyB3aWxsIHJ1biBpbiBvcmRlciBvZiB0aGUgY2xhc3MgaGllcmFyY2h5LFxuICAgKiBzdGFydGluZyB3aXRoIHN1cGVyY2xhc3NlcyBhbmQgcHJvZ3Jlc3NpbmcgdG8gdGhlIGluc3RhbmNlJ3MgY2xhc3MuXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBzdGF0aWMgYWRkSW5pdGlhbGl6ZXIoaW5pdGlhbGl6ZXI6IEluaXRpYWxpemVyKSB7XG4gICAgdGhpcy5fX3ByZXBhcmUoKTtcbiAgICAodGhpcy5faW5pdGlhbGl6ZXJzID8/PSBbXSkucHVzaChpbml0aWFsaXplcik7XG4gIH1cblxuICBzdGF0aWMgX2luaXRpYWxpemVycz86IEluaXRpYWxpemVyW107XG5cbiAgLypcbiAgICogRHVlIHRvIGNsb3N1cmUgY29tcGlsZXIgRVM2IGNvbXBpbGF0aW9uIGJ1Z3MsIEBub2NvbGxhcHNlIGlzIHJlcXVpcmVkIG9uXG4gICAqIGFsbCBzdGF0aWMgbWV0aG9kcyBhbmQgcHJvcGVydGllcyB3aXRoIGluaXRpYWxpemVycy4gIFJlZmVyZW5jZTpcbiAgICogLSBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzE3NzZcbiAgICovXG5cbiAgLyoqXG4gICAqIE1hcHMgYXR0cmlidXRlIG5hbWVzIHRvIHByb3BlcnRpZXM7IGZvciBleGFtcGxlIGBmb29iYXJgIGF0dHJpYnV0ZSB0b1xuICAgKiBgZm9vQmFyYCBwcm9wZXJ0eS4gQ3JlYXRlZCBsYXppbHkgb24gdXNlciBzdWJjbGFzc2VzIHdoZW4gZmluYWxpemluZyB0aGVcbiAgICogY2xhc3MuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXA6IEF0dHJpYnV0ZU1hcDtcblxuICAvKipcbiAgICogTWFya3MgY2xhc3MgYXMgaGF2aW5nIGJlZW4gZmluYWxpemVkLCB3aGljaCBpbmNsdWRlcyBjcmVhdGluZyBwcm9wZXJ0aWVzXG4gICAqIGZyb20gYHN0YXRpYyBwcm9wZXJ0aWVzYCwgYnV0IGRvZXMgKm5vdCogaW5jbHVkZSBhbGwgcHJvcGVydGllcyBjcmVhdGVkXG4gICAqIGZyb20gZGVjb3JhdG9ycy5cbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgZmluYWxpemVkOiB0cnVlIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBNZW1vaXplZCBsaXN0IG9mIGFsbCBlbGVtZW50IHByb3BlcnRpZXMsIGluY2x1ZGluZyBhbnkgc3VwZXJjbGFzc1xuICAgKiBwcm9wZXJ0aWVzLiBDcmVhdGVkIGxhemlseSBvbiB1c2VyIHN1YmNsYXNzZXMgd2hlbiBmaW5hbGl6aW5nIHRoZSBjbGFzcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBlbGVtZW50UHJvcGVydGllczogUHJvcGVydHlEZWNsYXJhdGlvbk1hcDtcblxuICAvKipcbiAgICogVXNlci1zdXBwbGllZCBvYmplY3QgdGhhdCBtYXBzIHByb3BlcnR5IG5hbWVzIHRvIGBQcm9wZXJ0eURlY2xhcmF0aW9uYFxuICAgKiBvYmplY3RzIGNvbnRhaW5pbmcgb3B0aW9ucyBmb3IgY29uZmlndXJpbmcgcmVhY3RpdmUgcHJvcGVydGllcy4gV2hlblxuICAgKiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCB0aGUgZWxlbWVudCB3aWxsIHVwZGF0ZSBhbmQgcmVuZGVyLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHByb3BlcnRpZXMgYXJlIHB1YmxpYyBmaWVsZHMsIGFuZCBhcyBzdWNoLCB0aGV5IHNob3VsZCBiZVxuICAgKiBjb25zaWRlcmVkIGFzIHByaW1hcmlseSBzZXR0YWJsZSBieSBlbGVtZW50IHVzZXJzLCBlaXRoZXIgdmlhIGF0dHJpYnV0ZSBvclxuICAgKiB0aGUgcHJvcGVydHkgaXRzZWxmLlxuICAgKlxuICAgKiBHZW5lcmFsbHksIHByb3BlcnRpZXMgdGhhdCBhcmUgY2hhbmdlZCBieSB0aGUgZWxlbWVudCBzaG91bGQgYmUgcHJpdmF0ZSBvclxuICAgKiBwcm90ZWN0ZWQgZmllbGRzIGFuZCBzaG91bGQgdXNlIHRoZSBgc3RhdGU6IHRydWVgIG9wdGlvbi4gUHJvcGVydGllc1xuICAgKiBtYXJrZWQgYXMgYHN0YXRlYCBkbyBub3QgcmVmbGVjdCBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZVxuICAgKlxuICAgKiBIb3dldmVyLCBzb21ldGltZXMgZWxlbWVudCBjb2RlIGRvZXMgbmVlZCB0byBzZXQgYSBwdWJsaWMgcHJvcGVydHkuIFRoaXNcbiAgICogc2hvdWxkIHR5cGljYWxseSBvbmx5IGJlIGRvbmUgaW4gcmVzcG9uc2UgdG8gdXNlciBpbnRlcmFjdGlvbiwgYW5kIGFuIGV2ZW50XG4gICAqIHNob3VsZCBiZSBmaXJlZCBpbmZvcm1pbmcgdGhlIHVzZXI7IGZvciBleGFtcGxlLCBhIGNoZWNrYm94IHNldHMgaXRzXG4gICAqIGBjaGVja2VkYCBwcm9wZXJ0eSB3aGVuIGNsaWNrZWQgYW5kIGZpcmVzIGEgYGNoYW5nZWRgIGV2ZW50LiBNdXRhdGluZ1xuICAgKiBwdWJsaWMgcHJvcGVydGllcyBzaG91bGQgdHlwaWNhbGx5IG5vdCBiZSBkb25lIGZvciBub24tcHJpbWl0aXZlIChvYmplY3Qgb3JcbiAgICogYXJyYXkpIHByb3BlcnRpZXMuIEluIG90aGVyIGNhc2VzIHdoZW4gYW4gZWxlbWVudCBuZWVkcyB0byBtYW5hZ2Ugc3RhdGUsIGFcbiAgICogcHJpdmF0ZSBwcm9wZXJ0eSBzZXQgd2l0aCB0aGUgYHN0YXRlOiB0cnVlYCBvcHRpb24gc2hvdWxkIGJlIHVzZWQuIFdoZW5cbiAgICogbmVlZGVkLCBzdGF0ZSBwcm9wZXJ0aWVzIGNhbiBiZSBpbml0aWFsaXplZCB2aWEgcHVibGljIHByb3BlcnRpZXMgdG9cbiAgICogZmFjaWxpdGF0ZSBjb21wbGV4IGludGVyYWN0aW9ucy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBwcm9wZXJ0aWVzOiBQcm9wZXJ0eURlY2xhcmF0aW9ucztcblxuICAvKipcbiAgICogTWVtb2l6ZWQgbGlzdCBvZiBhbGwgZWxlbWVudCBzdHlsZXMuXG4gICAqIENyZWF0ZWQgbGF6aWx5IG9uIHVzZXIgc3ViY2xhc3NlcyB3aGVuIGZpbmFsaXppbmcgdGhlIGNsYXNzLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgc3R5bGVzXG4gICAqL1xuICBzdGF0aWMgZWxlbWVudFN0eWxlczogQXJyYXk8Q1NTUmVzdWx0T3JOYXRpdmU+ID0gW107XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC4gVGhlIHN0eWxlcyBzaG91bGQgYmUgZGVmaW5lZFxuICAgKiB1c2luZyB0aGUge0BsaW5rY29kZSBjc3N9IHRhZyBmdW5jdGlvbiwgdmlhIGNvbnN0cnVjdGlibGUgc3R5bGVzaGVldHMsIG9yXG4gICAqIGltcG9ydGVkIGZyb20gbmF0aXZlIENTUyBtb2R1bGUgc2NyaXB0cy5cbiAgICpcbiAgICogTm90ZSBvbiBDb250ZW50IFNlY3VyaXR5IFBvbGljeTpcbiAgICpcbiAgICogRWxlbWVudCBzdHlsZXMgYXJlIGltcGxlbWVudGVkIHdpdGggYDxzdHlsZT5gIHRhZ3Mgd2hlbiB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAqIHN1cHBvcnQgYWRvcHRlZCBTdHlsZVNoZWV0cy4gVG8gdXNlIHN1Y2ggYDxzdHlsZT5gIHRhZ3Mgd2l0aCB0aGUgc3R5bGUtc3JjXG4gICAqIENTUCBkaXJlY3RpdmUsIHRoZSBzdHlsZS1zcmMgdmFsdWUgbXVzdCBlaXRoZXIgaW5jbHVkZSAndW5zYWZlLWlubGluZScgb3JcbiAgICogYG5vbmNlLTxiYXNlNjQtdmFsdWU+YCB3aXRoIGA8YmFzZTY0LXZhbHVlPmAgcmVwbGFjZWQgYmUgYSBzZXJ2ZXItZ2VuZXJhdGVkXG4gICAqIG5vbmNlLlxuICAgKlxuICAgKiBUbyBwcm92aWRlIGEgbm9uY2UgdG8gdXNlIG9uIGdlbmVyYXRlZCBgPHN0eWxlPmAgZWxlbWVudHMsIHNldFxuICAgKiBgd2luZG93LmxpdE5vbmNlYCB0byBhIHNlcnZlci1nZW5lcmF0ZWQgbm9uY2UgaW4geW91ciBwYWdlJ3MgSFRNTCwgYmVmb3JlXG4gICAqIGxvYWRpbmcgYXBwbGljYXRpb24gY29kZTpcbiAgICpcbiAgICogYGBgaHRtbFxuICAgKiA8c2NyaXB0PlxuICAgKiAgIC8vIEdlbmVyYXRlZCBhbmQgdW5pcXVlIHBlciByZXF1ZXN0OlxuICAgKiAgIHdpbmRvdy5saXROb25jZSA9ICdhMWIyYzNkNCc7XG4gICAqIDwvc2NyaXB0PlxuICAgKiBgYGBcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHN0eWxlc1xuICAgKi9cbiAgc3RhdGljIHN0eWxlcz86IENTU1Jlc3VsdEdyb3VwO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IGF0dHJpYnV0ZXNcbiAgICovXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIC8vIEVuc3VyZSB3ZSd2ZSBjcmVhdGVkIGFsbCBwcm9wZXJ0aWVzXG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIC8vIHRoaXMuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIGlzIG9ubHkgdW5kZWZpbmVkIGFmdGVyIGZpbmFsaXplKCkgaW5cbiAgICAvLyBSZWFjdGl2ZUVsZW1lbnQgaXRzZWxmLiBSZWFjdGl2ZUVsZW1lbnQub2JzZXJ2ZWRBdHRyaWJ1dGVzIGlzIG9ubHlcbiAgICAvLyBhY2Nlc3NlZCB3aXRoIFJlYWN0aXZlRWxlbWVudCBhcyB0aGUgcmVjZWl2ZXIgd2hlbiBhIHN1YmNsYXNzIG9yIG1peGluXG4gICAgLy8gY2FsbHMgc3VwZXIub2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwICYmIFsuLi50aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5rZXlzKCldXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX19pbnN0YW5jZVByb3BlcnRpZXM/OiBQcm9wZXJ0eVZhbHVlcyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHByb3BlcnR5IGFjY2Vzc29yIG9uIHRoZSBlbGVtZW50IHByb3RvdHlwZSBpZiBvbmUgZG9lcyBub3QgZXhpc3RcbiAgICogYW5kIHN0b3JlcyBhIHtAbGlua2NvZGUgUHJvcGVydHlEZWNsYXJhdGlvbn0gZm9yIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZVxuICAgKiBnaXZlbiBvcHRpb25zLiBUaGUgcHJvcGVydHkgc2V0dGVyIGNhbGxzIHRoZSBwcm9wZXJ0eSdzIGBoYXNDaGFuZ2VkYFxuICAgKiBwcm9wZXJ0eSBvcHRpb24gb3IgdXNlcyBhIHN0cmljdCBpZGVudGl0eSBjaGVjayB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3RcbiAgICogdG8gcmVxdWVzdCBhbiB1cGRhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIG1heSBiZSBvdmVycmlkZGVuIHRvIGN1c3RvbWl6ZSBwcm9wZXJ0aWVzOyBob3dldmVyLFxuICAgKiB3aGVuIGRvaW5nIHNvLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGBzdXBlci5jcmVhdGVQcm9wZXJ0eWAgdG8gZW5zdXJlXG4gICAqIHRoZSBwcm9wZXJ0eSBpcyBzZXR1cCBjb3JyZWN0bHkuIFRoaXMgbWV0aG9kIGNhbGxzXG4gICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgIGludGVybmFsbHkgdG8gZ2V0IGEgZGVzY3JpcHRvciB0byBpbnN0YWxsLlxuICAgKiBUbyBjdXN0b21pemUgd2hhdCBwcm9wZXJ0aWVzIGRvIHdoZW4gdGhleSBhcmUgZ2V0IG9yIHNldCwgb3ZlcnJpZGVcbiAgICogYGdldFByb3BlcnR5RGVzY3JpcHRvcmAuIFRvIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBwcm9wZXJ0eSxcbiAgICogaW1wbGVtZW50IGBjcmVhdGVQcm9wZXJ0eWAgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBzdGF0aWMgY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucykge1xuICAgKiAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtteU9wdGlvbjogdHJ1ZX0pO1xuICAgKiAgIHN1cGVyLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVByb3BlcnR5KFxuICAgIG5hbWU6IFByb3BlcnR5S2V5LFxuICAgIG9wdGlvbnM6IFByb3BlcnR5RGVjbGFyYXRpb24gPSBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvblxuICApIHtcbiAgICAvLyBJZiB0aGlzIGlzIGEgc3RhdGUgcHJvcGVydHksIGZvcmNlIHRoZSBhdHRyaWJ1dGUgdG8gZmFsc2UuXG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcbiAgICAgIChvcHRpb25zIGFzIE11dGFibGU8UHJvcGVydHlEZWNsYXJhdGlvbiwgJ2F0dHJpYnV0ZSc+KS5hdHRyaWJ1dGUgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fX3ByZXBhcmUoKTtcbiAgICAvLyBXaGV0aGVyIHRoaXMgcHJvcGVydHkgaXMgd3JhcHBpbmcgYWNjZXNzb3JzLlxuICAgIC8vIEhlbHBzIGNvbnRyb2wgdGhlIGluaXRpYWwgdmFsdWUgY2hhbmdlIGFuZCByZWZsZWN0aW9uIGxvZ2ljLlxuICAgIGlmICh0aGlzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUob3B0aW9ucyk7XG4gICAgICBvcHRpb25zLndyYXBwZWQgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLnNldChuYW1lLCBvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMubm9BY2Nlc3Nvcikge1xuICAgICAgY29uc3Qga2V5ID0gREVWX01PREVcbiAgICAgICAgPyAvLyBVc2UgU3ltYm9sLmZvciBpbiBkZXYgbW9kZSB0byBtYWtlIGl0IGVhc2llciB0byBtYWludGFpbiBzdGF0ZVxuICAgICAgICAgIC8vIHdoZW4gZG9pbmcgSE1SLlxuICAgICAgICAgIFN5bWJvbC5mb3IoYCR7U3RyaW5nKG5hbWUpfSAoQHByb3BlcnR5KCkgY2FjaGUpYClcbiAgICAgICAgOiBTeW1ib2woKTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAgaWYgKGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGJlIGRlZmluZWQgb24gdGhlIGdpdmVuIG5hbWVkIHByb3BlcnR5LlxuICAgKiBJZiBubyBkZXNjcmlwdG9yIGlzIHJldHVybmVkLCB0aGUgcHJvcGVydHkgd2lsbCBub3QgYmVjb21lIGFuIGFjY2Vzc29yLlxuICAgKiBGb3IgZXhhbXBsZSxcbiAgICpcbiAgICogYGBgdHNcbiAgICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAqICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpIHtcbiAgICogICAgIGNvbnN0IGRlZmF1bHREZXNjcmlwdG9yID1cbiAgICogICAgICAgICBzdXBlci5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICogICAgIGNvbnN0IHNldHRlciA9IGRlZmF1bHREZXNjcmlwdG9yLnNldDtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGdldDogZGVmYXVsdERlc2NyaXB0b3IuZ2V0LFxuICAgKiAgICAgICBzZXQodmFsdWUpIHtcbiAgICogICAgICAgICBzZXR0ZXIuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAqICAgICAgICAgLy8gY3VzdG9tIGFjdGlvbi5cbiAgICogICAgICAgfSxcbiAgICogICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgKiAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBnZXRQcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgbmFtZTogUHJvcGVydHlLZXksXG4gICAga2V5OiBzdHJpbmcgfCBzeW1ib2wsXG4gICAgb3B0aW9uczogUHJvcGVydHlEZWNsYXJhdGlvblxuICApOiBQcm9wZXJ0eURlc2NyaXB0b3IgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHtnZXQsIHNldH0gPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5wcm90b3R5cGUsIG5hbWUpID8/IHtcbiAgICAgIGdldCh0aGlzOiBSZWFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba2V5IGFzIGtleW9mIHR5cGVvZiB0aGlzXTtcbiAgICAgIH0sXG4gICAgICBzZXQodGhpczogUmVhY3RpdmVFbGVtZW50LCB2OiB1bmtub3duKSB7XG4gICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZyB8IHN5bWJvbCwgdW5rbm93bj4pW2tleV0gPSB2O1xuICAgICAgfSxcbiAgICB9O1xuICAgIGlmIChERVZfTU9ERSAmJiBnZXQgPT0gbnVsbCkge1xuICAgICAgaWYgKCd2YWx1ZScgaW4gKGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLnByb3RvdHlwZSwgbmFtZSkgPz8ge30pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRmllbGQgJHtKU09OLnN0cmluZ2lmeShTdHJpbmcobmFtZSkpfSBvbiBgICtcbiAgICAgICAgICAgIGAke3RoaXMubmFtZX0gd2FzIGRlY2xhcmVkIGFzIGEgcmVhY3RpdmUgcHJvcGVydHkgYCArXG4gICAgICAgICAgICBgYnV0IGl0J3MgYWN0dWFsbHkgZGVjbGFyZWQgYXMgYSB2YWx1ZSBvbiB0aGUgcHJvdG90eXBlLiBgICtcbiAgICAgICAgICAgIGBVc3VhbGx5IHRoaXMgaXMgZHVlIHRvIHVzaW5nIEBwcm9wZXJ0eSBvciBAc3RhdGUgb24gYSBtZXRob2QuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAncmVhY3RpdmUtcHJvcGVydHktd2l0aG91dC1nZXR0ZXInLFxuICAgICAgICBgRmllbGQgJHtKU09OLnN0cmluZ2lmeShTdHJpbmcobmFtZSkpfSBvbiBgICtcbiAgICAgICAgICBgJHt0aGlzLm5hbWV9IHdhcyBkZWNsYXJlZCBhcyBhIHJlYWN0aXZlIHByb3BlcnR5IGAgK1xuICAgICAgICAgIGBidXQgaXQgZG9lcyBub3QgaGF2ZSBhIGdldHRlci4gVGhpcyB3aWxsIGJlIGFuIGVycm9yIGluIGEgYCArXG4gICAgICAgICAgYGZ1dHVyZSB2ZXJzaW9uIG9mIExpdC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZ2V0LFxuICAgICAgc2V0KHRoaXM6IFJlYWN0aXZlRWxlbWVudCwgdmFsdWU6IHVua25vd24pIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQ/LmNhbGwodGhpcyk7XG4gICAgICAgIHNldD8uY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSwgb3B0aW9ucyk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByb3BlcnR5IG9wdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICogVGhlc2Ugb3B0aW9ucyBhcmUgZGVmaW5lZCB3aXRoIGEgYFByb3BlcnR5RGVjbGFyYXRpb25gIHZpYSB0aGUgYHByb3BlcnRpZXNgXG4gICAqIG9iamVjdCBvciB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIGFuZCBhcmUgcmVnaXN0ZXJlZCBpblxuICAgKiBgY3JlYXRlUHJvcGVydHkoLi4uKWAuXG4gICAqXG4gICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIFwiZmluYWxcIiBhbmQgbm90IG92ZXJyaWRkZW4uIFRvXG4gICAqIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBnaXZlbiBwcm9wZXJ0eSwgb3ZlcnJpZGVcbiAgICoge0BsaW5rY29kZSBjcmVhdGVQcm9wZXJ0eX0uXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBmaW5hbFxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgc3RhdGljIGdldFByb3BlcnR5T3B0aW9ucyhuYW1lOiBQcm9wZXJ0eUtleSkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLmdldChuYW1lKSA/PyBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjtcbiAgfVxuXG4gIC8vIFRlbXBvcmFyeSwgdW50aWwgZ29vZ2xlMyBpcyBvbiBUeXBlU2NyaXB0IDUuMlxuICBkZWNsYXJlIHN0YXRpYyBbU3ltYm9sLm1ldGFkYXRhXTogb2JqZWN0ICYgUmVjb3JkPFByb3BlcnR5S2V5LCB1bmtub3duPjtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgc3RhdGljIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBjbGFzcyB1c2VkIGluIGJvb2trZWVwaW5nXG4gICAqIGZvciBlbGVtZW50IHByb3BlcnRpZXMsIGluaXRpYWxpemVycywgZXRjLlxuICAgKlxuICAgKiBDYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGJ5IGNvZGUgdGhhdCBuZWVkcyB0byBlbnN1cmUgdGhlc2VcbiAgICogcHJvcGVydGllcyBleGlzdCBiZWZvcmUgdXNpbmcgdGhlbS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgc3VwZXJjbGFzcyBpcyBmaW5hbGl6ZWQgc28gdGhhdCBpbmhlcml0ZWRcbiAgICogcHJvcGVydHkgbWV0YWRhdGEgY2FuIGJlIGNvcGllZCBkb3duLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX19wcmVwYXJlKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZWxlbWVudFByb3BlcnRpZXMnLCB0aGlzKSlcbiAgICApIHtcbiAgICAgIC8vIEFscmVhZHkgcHJlcGFyZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmluYWxpemUgYW55IHN1cGVyY2xhc3Nlc1xuICAgIGNvbnN0IHN1cGVyQ3RvciA9IGdldFByb3RvdHlwZU9mKHRoaXMpIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQ7XG4gICAgc3VwZXJDdG9yLmZpbmFsaXplKCk7XG5cbiAgICAvLyBDcmVhdGUgb3duIHNldCBvZiBpbml0aWFsaXplcnMgZm9yIHRoaXMgY2xhc3MgaWYgYW55IGV4aXN0IG9uIHRoZVxuICAgIC8vIHN1cGVyY2xhc3MgYW5kIGNvcHkgdGhlbSBkb3duLiBOb3RlLCBmb3IgYSBzbWFsbCBwZXJmIGJvb3N0LCBhdm9pZFxuICAgIC8vIGNyZWF0aW5nIGluaXRpYWxpemVycyB1bmxlc3MgbmVlZGVkLlxuICAgIGlmIChzdXBlckN0b3IuX2luaXRpYWxpemVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9pbml0aWFsaXplcnMgPSBbLi4uc3VwZXJDdG9yLl9pbml0aWFsaXplcnNdO1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXplIGVsZW1lbnRQcm9wZXJ0aWVzIGZyb20gdGhlIHN1cGVyY2xhc3NcbiAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzID0gbmV3IE1hcChzdXBlckN0b3IuZWxlbWVudFByb3BlcnRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmlzaGVzIHNldHRpbmcgdXAgdGhlIGNsYXNzIHNvIHRoYXQgaXQncyByZWFkeSB0byBiZSByZWdpc3RlcmVkXG4gICAqIGFzIGEgY3VzdG9tIGVsZW1lbnQgYW5kIGluc3RhbnRpYXRlZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IHRoZSBSZWFjdGl2ZUVsZW1lbnQub2JzZXJ2ZWRBdHRyaWJ1dGVzIGdldHRlci5cbiAgICogSWYgeW91IG92ZXJyaWRlIHRoZSBvYnNlcnZlZEF0dHJpYnV0ZXMgZ2V0dGVyLCB5b3UgbXVzdCBlaXRoZXIgY2FsbFxuICAgKiBzdXBlci5vYnNlcnZlZEF0dHJpYnV0ZXMgdG8gdHJpZ2dlciBmaW5hbGl6YXRpb24sIG9yIGNhbGwgZmluYWxpemUoKVxuICAgKiB5b3Vyc2VsZi5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgZmluYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZmluYWxpemVkJywgdGhpcykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9fcHJlcGFyZSgpO1xuXG4gICAgLy8gQ3JlYXRlIHByb3BlcnRpZXMgZnJvbSB0aGUgc3RhdGljIHByb3BlcnRpZXMgYmxvY2s6XG4gICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgncHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBjb25zdCBwcm9wS2V5cyA9IFtcbiAgICAgICAgLi4uZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcyksXG4gICAgICAgIC4uLmdldE93blByb3BlcnR5U3ltYm9scyhwcm9wcyksXG4gICAgICBdIGFzIEFycmF5PGtleW9mIHR5cGVvZiBwcm9wcz47XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgcHJvcEtleXMpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVQcm9wZXJ0eShwLCBwcm9wc1twXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHByb3BlcnRpZXMgZnJvbSBzdGFuZGFyZCBkZWNvcmF0b3IgbWV0YWRhdGE6XG4gICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzW1N5bWJvbC5tZXRhZGF0YV07XG4gICAgaWYgKG1ldGFkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbGl0UHJvcGVydHlNZXRhZGF0YS5nZXQobWV0YWRhdGEpO1xuICAgICAgaWYgKHByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtwLCBvcHRpb25zXSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50UHJvcGVydGllcy5zZXQocCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIGF0dHJpYnV0ZS10by1wcm9wZXJ0eSBtYXBcbiAgICB0aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IFtwLCBvcHRpb25zXSBvZiB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCBhdHRyID0gdGhpcy5fX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwLCBvcHRpb25zKTtcbiAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuc2V0KGF0dHIsIHApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudFN0eWxlcyA9IHRoaXMuZmluYWxpemVTdHlsZXModGhpcy5zdHlsZXMpO1xuXG4gICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnY3JlYXRlUHJvcGVydHknKSkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgJ25vLW92ZXJyaWRlLWNyZWF0ZS1wcm9wZXJ0eScsXG4gICAgICAgICAgJ092ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LmNyZWF0ZVByb3BlcnR5KCkgaXMgZGVwcmVjYXRlZC4gJyArXG4gICAgICAgICAgICAnVGhlIG92ZXJyaWRlIHdpbGwgbm90IGJlIGNhbGxlZCB3aXRoIHN0YW5kYXJkIGRlY29yYXRvcnMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnZ2V0UHJvcGVydHlEZXNjcmlwdG9yJykpIHtcbiAgICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAgICduby1vdmVycmlkZS1nZXQtcHJvcGVydHktZGVzY3JpcHRvcicsXG4gICAgICAgICAgJ092ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LmdldFByb3BlcnR5RGVzY3JpcHRvcigpIGlzIGRlcHJlY2F0ZWQuICcgK1xuICAgICAgICAgICAgJ1RoZSBvdmVycmlkZSB3aWxsIG5vdCBiZSBjYWxsZWQgd2l0aCBzdGFuZGFyZCBkZWNvcmF0b3JzJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpb25zIHVzZWQgd2hlbiBjYWxsaW5nIGBhdHRhY2hTaGFkb3dgLiBTZXQgdGhpcyBwcm9wZXJ0eSB0byBjdXN0b21pemVcbiAgICogdGhlIG9wdGlvbnMgZm9yIHRoZSBzaGFkb3dSb290OyBmb3IgZXhhbXBsZSwgdG8gY3JlYXRlIGEgY2xvc2VkXG4gICAqIHNoYWRvd1Jvb3Q6IGB7bW9kZTogJ2Nsb3NlZCd9YC5cbiAgICpcbiAgICogTm90ZSwgdGhlc2Ugb3B0aW9ucyBhcmUgdXNlZCBpbiBgY3JlYXRlUmVuZGVyUm9vdGAuIElmIHRoaXMgbWV0aG9kXG4gICAqIGlzIGN1c3RvbWl6ZWQsIG9wdGlvbnMgc2hvdWxkIGJlIHJlc3BlY3RlZCBpZiBwb3NzaWJsZS5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgc3RhdGljIHNoYWRvd1Jvb3RPcHRpb25zOiBTaGFkb3dSb290SW5pdCA9IHttb2RlOiAnb3Blbid9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyB0aGUgc3R5bGVzIHRoZSB1c2VyIHN1cHBsaWVkIHZpYSB0aGUgYHN0YXRpYyBzdHlsZXNgIHByb3BlcnR5IGFuZFxuICAgKiByZXR1cm5zIHRoZSBhcnJheSBvZiBzdHlsZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuXG4gICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGludGVncmF0ZSBpbnRvIGEgc3R5bGUgbWFuYWdlbWVudCBzeXN0ZW0uXG4gICAqXG4gICAqIFN0eWxlcyBhcmUgZGVkdXBsaWNhdGVkIHByZXNlcnZpbmcgdGhlIF9sYXN0XyBpbnN0YW5jZSBpbiB0aGUgbGlzdC4gVGhpc1xuICAgKiBpcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkdXBsaWNhdGVkIHN0eWxlcyB0aGF0IGNhbiBvY2N1clxuICAgKiBlc3BlY2lhbGx5IHdoZW4gY29tcG9zaW5nIHZpYSBzdWJjbGFzc2luZy4gVGhlIGxhc3QgaXRlbSBpcyBrZXB0IHRvIHRyeVxuICAgKiB0byBwcmVzZXJ2ZSB0aGUgY2FzY2FkZSBvcmRlciB3aXRoIHRoZSBhc3N1bXB0aW9uIHRoYXQgaXQncyBtb3N0IGltcG9ydGFudFxuICAgKiB0aGF0IGxhc3QgYWRkZWQgc3R5bGVzIG92ZXJyaWRlIHByZXZpb3VzIHN0eWxlcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHN0eWxlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbGl6ZVN0eWxlcyhcbiAgICBzdHlsZXM/OiBDU1NSZXN1bHRHcm91cFxuICApOiBBcnJheTxDU1NSZXN1bHRPck5hdGl2ZT4ge1xuICAgIGNvbnN0IGVsZW1lbnRTdHlsZXMgPSBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZXMpKSB7XG4gICAgICAvLyBEZWR1cGUgdGhlIGZsYXR0ZW5lZCBhcnJheSBpbiByZXZlcnNlIG9yZGVyIHRvIHByZXNlcnZlIHRoZSBsYXN0IGl0ZW1zLlxuICAgICAgLy8gQ2FzdGluZyB0byBBcnJheTx1bmtub3duPiB3b3JrcyBhcm91bmQgVFMgZXJyb3IgdGhhdFxuICAgICAgLy8gYXBwZWFycyB0byBjb21lIGZyb20gdHJ5aW5nIHRvIGZsYXR0ZW4gYSB0eXBlIENTU1Jlc3VsdEFycmF5LlxuICAgICAgY29uc3Qgc2V0ID0gbmV3IFNldCgoc3R5bGVzIGFzIEFycmF5PHVua25vd24+KS5mbGF0KEluZmluaXR5KS5yZXZlcnNlKCkpO1xuICAgICAgLy8gVGhlbiBwcmVzZXJ2ZSBvcmlnaW5hbCBvcmRlciBieSBhZGRpbmcgdGhlIHNldCBpdGVtcyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChjb25zdCBzIG9mIHNldCkge1xuICAgICAgICBlbGVtZW50U3R5bGVzLnVuc2hpZnQoZ2V0Q29tcGF0aWJsZVN0eWxlKHMgYXMgQ1NTUmVzdWx0T3JOYXRpdmUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0eWxlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBlbGVtZW50U3R5bGVzLnB1c2goZ2V0Q29tcGF0aWJsZVN0eWxlKHN0eWxlcykpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudFN0eWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBOb2RlIG9yIFNoYWRvd1Jvb3QgaW50byB3aGljaCBlbGVtZW50IERPTSBzaG91bGQgYmUgcmVuZGVyZWQuIERlZmF1bHRzXG4gICAqIHRvIGFuIG9wZW4gc2hhZG93Um9vdC5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcmVhZG9ubHkgcmVuZGVyUm9vdCE6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudDtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSBgbmFtZWAuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShcbiAgICBuYW1lOiBQcm9wZXJ0eUtleSxcbiAgICBvcHRpb25zOiBQcm9wZXJ0eURlY2xhcmF0aW9uXG4gICkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG9wdGlvbnMuYXR0cmlidXRlO1xuICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGZhbHNlXG4gICAgICA/IHVuZGVmaW5lZFxuICAgICAgOiB0eXBlb2YgYXR0cmlidXRlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGF0dHJpYnV0ZVxuICAgICAgICA6IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICAgID8gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBJbml0aWFsaXplIHRvIGFuIHVucmVzb2x2ZWQgUHJvbWlzZSBzbyB3ZSBjYW4gbWFrZSBzdXJlIHRoZSBlbGVtZW50IGhhc1xuICAvLyBjb25uZWN0ZWQgYmVmb3JlIGZpcnN0IHVwZGF0ZS5cbiAgcHJpdmF0ZSBfX3VwZGF0ZVByb21pc2UhOiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZXJlIGlzIGEgcGVuZGluZyB1cGRhdGUgYXMgYSByZXN1bHQgb2YgY2FsbGluZyBgcmVxdWVzdFVwZGF0ZSgpYC5cbiAgICogU2hvdWxkIG9ubHkgYmUgcmVhZC5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIGlzVXBkYXRlUGVuZGluZyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJcyBzZXQgdG8gYHRydWVgIGFmdGVyIHRoZSBmaXJzdCB1cGRhdGUuIFRoZSBlbGVtZW50IGNvZGUgY2Fubm90IGFzc3VtZVxuICAgKiB0aGF0IGByZW5kZXJSb290YCBleGlzdHMgYmVmb3JlIHRoZSBlbGVtZW50IGBoYXNVcGRhdGVkYC5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIGhhc1VwZGF0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogTWFwIHdpdGgga2V5cyBmb3IgYW55IHByb3BlcnRpZXMgdGhhdCBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3RcbiAgICogdXBkYXRlIGN5Y2xlIHdpdGggcHJldmlvdXMgdmFsdWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF8kY2hhbmdlZFByb3BlcnRpZXMhOiBQcm9wZXJ0eVZhbHVlcztcblxuICAvKipcbiAgICogUmVjb3JkcyBwcm9wZXJ0eSBkZWZhdWx0IHZhbHVlcyB3aGVuIHRoZVxuICAgKiBgdXNlRGVmYXVsdGAgb3B0aW9uIGlzIHVzZWQuXG4gICAqL1xuICBwcml2YXRlIF9fZGVmYXVsdFZhbHVlcz86IE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj47XG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgcmVmbGVjdGVkIHdoZW4gdXBkYXRlZC5cbiAgICovXG4gIHByaXZhdGUgX19yZWZsZWN0aW5nUHJvcGVydGllcz86IFNldDxQcm9wZXJ0eUtleT47XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgY3VycmVudGx5IHJlZmxlY3RpbmcgcHJvcGVydHlcbiAgICovXG4gIHByaXZhdGUgX19yZWZsZWN0aW5nUHJvcGVydHk6IFByb3BlcnR5S2V5IHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFNldCBvZiBjb250cm9sbGVycy5cbiAgICovXG4gIHByaXZhdGUgX19jb250cm9sbGVycz86IFNldDxSZWFjdGl2ZUNvbnRyb2xsZXI+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2luaXRpYWxpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBvbmx5IG92ZXJyaWRlIHBvaW50IGZvciBjdXN0b21pemluZyB3b3JrIGRvbmUgd2hlbiBlbGVtZW50c1xuICAgKiBhcmUgY29uc3RydWN0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9faW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLl9fdXBkYXRlUHJvbWlzZSA9IG5ldyBQcm9taXNlPGJvb2xlYW4+KFxuICAgICAgKHJlcykgPT4gKHRoaXMuZW5hYmxlVXBkYXRpbmcgPSByZXMpXG4gICAgKTtcbiAgICB0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgLy8gVGhpcyBlbnF1ZXVlcyBhIG1pY3JvdGFzayB0aGF0IG11c3QgcnVuIGJlZm9yZSB0aGUgZmlyc3QgdXBkYXRlLCBzbyBpdFxuICAgIC8vIG11c3QgYmUgY2FsbGVkIGJlZm9yZSByZXF1ZXN0VXBkYXRlKClcbiAgICB0aGlzLl9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgIC8vIGVuc3VyZXMgZmlyc3QgdXBkYXRlIHdpbGwgYmUgY2F1Z2h0IGJ5IGFuIGVhcmx5IGFjY2VzcyBvZlxuICAgIC8vIGB1cGRhdGVDb21wbGV0ZWBcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5faW5pdGlhbGl6ZXJzPy5mb3JFYWNoKChpKSA9PlxuICAgICAgaSh0aGlzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgdG8gcGFydGljaXBhdGUgaW4gdGhlIGVsZW1lbnQncyByZWFjdGl2ZVxuICAgKiB1cGRhdGUgY3ljbGUuIFRoZSBlbGVtZW50IGF1dG9tYXRpY2FsbHkgY2FsbHMgaW50byBhbnkgcmVnaXN0ZXJlZFxuICAgKiBjb250cm9sbGVycyBkdXJpbmcgaXRzIGxpZmVjeWNsZSBjYWxsYmFja3MuXG4gICAqXG4gICAqIElmIHRoZSBlbGVtZW50IGlzIGNvbm5lY3RlZCB3aGVuIGBhZGRDb250cm9sbGVyKClgIGlzIGNhbGxlZCwgdGhlXG4gICAqIGNvbnRyb2xsZXIncyBgaG9zdENvbm5lY3RlZCgpYCBjYWxsYmFjayB3aWxsIGJlIGltbWVkaWF0ZWx5IGNhbGxlZC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICBhZGRDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgICh0aGlzLl9fY29udHJvbGxlcnMgPz89IG5ldyBTZXQoKSkuYWRkKGNvbnRyb2xsZXIpO1xuICAgIC8vIElmIGEgY29udHJvbGxlciBpcyBhZGRlZCBhZnRlciB0aGUgZWxlbWVudCBoYXMgYmVlbiBjb25uZWN0ZWQsXG4gICAgLy8gY2FsbCBob3N0Q29ubmVjdGVkLiBOb3RlLCByZS11c2luZyBleGlzdGVuY2Ugb2YgYHJlbmRlclJvb3RgIGhlcmVcbiAgICAvLyAod2hpY2ggaXMgc2V0IGluIGNvbm5lY3RlZENhbGxiYWNrKSB0byBhdm9pZCB0aGUgbmVlZCB0byB0cmFjayBhXG4gICAgLy8gZmlyc3QgY29ubmVjdGVkIHN0YXRlLlxuICAgIGlmICh0aGlzLnJlbmRlclJvb3QgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICBjb250cm9sbGVyLmhvc3RDb25uZWN0ZWQ/LigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgZnJvbSB0aGUgZWxlbWVudC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICByZW1vdmVDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZGVsZXRlKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpeGVzIGFueSBwcm9wZXJ0aWVzIHNldCBvbiB0aGUgaW5zdGFuY2UgYmVmb3JlIHVwZ3JhZGUgdGltZS5cbiAgICogT3RoZXJ3aXNlIHRoZXNlIHdvdWxkIHNoYWRvdyB0aGUgYWNjZXNzb3IgYW5kIGJyZWFrIHRoZXNlIHByb3BlcnRpZXMuXG4gICAqIFRoZSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgaW4gYSBNYXAgd2hpY2ggaXMgcGxheWVkIGJhY2sgYWZ0ZXIgdGhlXG4gICAqIGNvbnN0cnVjdG9yIHJ1bnMuXG4gICAqL1xuICBwcml2YXRlIF9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBpbnN0YW5jZVByb3BlcnRpZXMgPSBuZXcgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPigpO1xuICAgIGNvbnN0IGVsZW1lbnRQcm9wZXJ0aWVzID0gKHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudClcbiAgICAgIC5lbGVtZW50UHJvcGVydGllcztcbiAgICBmb3IgKGNvbnN0IHAgb2YgZWxlbWVudFByb3BlcnRpZXMua2V5cygpIGFzIEl0ZXJhYmxlSXRlcmF0b3I8a2V5b2YgdGhpcz4pIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIGluc3RhbmNlUHJvcGVydGllcy5zZXQocCwgdGhpc1twXSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2VQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzID0gaW5zdGFuY2VQcm9wZXJ0aWVzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub2RlIGludG8gd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIHJlbmRlciBhbmQgYnkgZGVmYXVsdFxuICAgKiBjcmVhdGVzIGFuZCByZXR1cm5zIGFuIG9wZW4gc2hhZG93Um9vdC4gSW1wbGVtZW50IHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGVcbiAgICogZWxlbWVudCdzIERPTSBpcyByZW5kZXJlZC4gRm9yIGV4YW1wbGUsIHRvIHJlbmRlciBpbnRvIHRoZSBlbGVtZW50J3NcbiAgICogY2hpbGROb2RlcywgcmV0dXJuIGB0aGlzYC5cbiAgICpcbiAgICogQHJldHVybiBSZXR1cm5zIGEgbm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIGNyZWF0ZVJlbmRlclJvb3QoKTogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgICBjb25zdCByZW5kZXJSb290ID1cbiAgICAgIHRoaXMuc2hhZG93Um9vdCA/P1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coXG4gICAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLnNoYWRvd1Jvb3RPcHRpb25zXG4gICAgICApO1xuICAgIGFkb3B0U3R5bGVzKFxuICAgICAgcmVuZGVyUm9vdCxcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVsZW1lbnRTdHlsZXNcbiAgICApO1xuICAgIHJldHVybiByZW5kZXJSb290O1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIGZpcnN0IGNvbm5lY3Rpb24sIGNyZWF0ZXMgdGhlIGVsZW1lbnQncyByZW5kZXJSb290LCBzZXRzIHVwXG4gICAqIGVsZW1lbnQgc3R5bGluZywgYW5kIGVuYWJsZXMgdXBkYXRpbmcuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIC8vIENyZWF0ZSByZW5kZXJSb290IGJlZm9yZSBjb250cm9sbGVycyBgaG9zdENvbm5lY3RlZGBcbiAgICAodGhpcyBhcyBNdXRhYmxlPHR5cGVvZiB0aGlzLCAncmVuZGVyUm9vdCc+KS5yZW5kZXJSb290ID8/PVxuICAgICAgdGhpcy5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgdGhpcy5lbmFibGVVcGRhdGluZyh0cnVlKTtcbiAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdENvbm5lY3RlZD8uKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIGZpbmFsIGFuZCBub3Qgb3ZlcnJpZGRlbi4gSXQgaXNcbiAgICogb3ZlcnJpZGRlbiBvbiB0aGUgZWxlbWVudCBpbnN0YW5jZSB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0cmlnZ2VycyB0aGUgZmlyc3RcbiAgICogdXBkYXRlLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIGVuYWJsZVVwZGF0aW5nKF9yZXF1ZXN0ZWRVcGRhdGU6IGJvb2xlYW4pIHt9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBmb3IgYHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClgIGluIGV4dGVuc2lvbnMgd2hpbGVcbiAgICogcmVzZXJ2aW5nIHRoZSBwb3NzaWJpbGl0eSBvZiBtYWtpbmcgbm9uLWJyZWFraW5nIGZlYXR1cmUgYWRkaXRpb25zXG4gICAqIHdoZW4gZGlzY29ubmVjdGluZyBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZm9yRWFjaCgoYykgPT4gYy5ob3N0RGlzY29ubmVjdGVkPy4oKSk7XG4gIH1cblxuICAvKipcbiAgICogU3luY2hyb25pemVzIHByb3BlcnR5IHZhbHVlcyB3aGVuIGF0dHJpYnV0ZXMgY2hhbmdlLlxuICAgKlxuICAgKiBTcGVjaWZpY2FsbHksIHdoZW4gYW4gYXR0cmlidXRlIGlzIHNldCwgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgaXMgc2V0LlxuICAgKiBZb3Ugc2hvdWxkIHJhcmVseSBuZWVkIHRvIGltcGxlbWVudCB0aGlzIGNhbGxiYWNrLiBJZiB0aGlzIG1ldGhvZCBpc1xuICAgKiBvdmVycmlkZGVuLCBgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIF9vbGQsIHZhbHVlKWAgbXVzdCBiZVxuICAgKiBjYWxsZWQuXG4gICAqXG4gICAqIFNlZSBbcmVzcG9uZGluZyB0byBhdHRyaWJ1dGUgY2hhbmdlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9jb21wb25lbnRzL1VzaW5nX2N1c3RvbV9lbGVtZW50cyNyZXNwb25kaW5nX3RvX2F0dHJpYnV0ZV9jaGFuZ2VzKVxuICAgKiBvbiBNRE4gZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLlxuICAgKiBAY2F0ZWdvcnkgYXR0cmlidXRlc1xuICAgKi9cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBfb2xkOiBzdHJpbmcgfCBudWxsLFxuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsXG4gICkge1xuICAgIHRoaXMuXyRhdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX19wcm9wZXJ0eVRvQXR0cmlidXRlKG5hbWU6IFByb3BlcnR5S2V5LCB2YWx1ZTogdW5rbm93bikge1xuICAgIGNvbnN0IGVsZW1Qcm9wZXJ0aWVzOiBQcm9wZXJ0eURlY2xhcmF0aW9uTWFwID0gKFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50XG4gICAgKS5lbGVtZW50UHJvcGVydGllcztcbiAgICBjb25zdCBvcHRpb25zID0gZWxlbVByb3BlcnRpZXMuZ2V0KG5hbWUpITtcbiAgICBjb25zdCBhdHRyID0gKFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50XG4gICAgKS5fX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbiAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMucmVmbGVjdCA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgY29udmVydGVyID1cbiAgICAgICAgKG9wdGlvbnMuY29udmVydGVyIGFzIENvbXBsZXhBdHRyaWJ1dGVDb252ZXJ0ZXIpPy50b0F0dHJpYnV0ZSAhPT1cbiAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgICAgPyAob3B0aW9ucy5jb252ZXJ0ZXIgYXMgQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlcilcbiAgICAgICAgICA6IGRlZmF1bHRDb252ZXJ0ZXI7XG4gICAgICBjb25zdCBhdHRyVmFsdWUgPSBjb252ZXJ0ZXIudG9BdHRyaWJ1dGUhKHZhbHVlLCBvcHRpb25zLnR5cGUpO1xuICAgICAgaWYgKFxuICAgICAgICBERVZfTU9ERSAmJlxuICAgICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKFxuICAgICAgICAgICdtaWdyYXRpb24nXG4gICAgICAgICkgJiZcbiAgICAgICAgYXR0clZhbHVlID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgJ3VuZGVmaW5lZC1hdHRyaWJ1dGUtdmFsdWUnLFxuICAgICAgICAgIGBUaGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgJHtuYW1lIGFzIHN0cmluZ30gcHJvcGVydHkgaXMgYCArXG4gICAgICAgICAgICBgdW5kZWZpbmVkIG9uIGVsZW1lbnQgJHt0aGlzLmxvY2FsTmFtZX0uIFRoZSBhdHRyaWJ1dGUgd2lsbCBiZSBgICtcbiAgICAgICAgICAgIGByZW1vdmVkLCBidXQgaW4gdGhlIHByZXZpb3VzIHZlcnNpb24gb2YgXFxgUmVhY3RpdmVFbGVtZW50XFxgLCBgICtcbiAgICAgICAgICAgIGB0aGUgYXR0cmlidXRlIHdvdWxkIG5vdCBoYXZlIGNoYW5nZWQuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8gVHJhY2sgaWYgdGhlIHByb3BlcnR5IGlzIGJlaW5nIHJlZmxlY3RlZCB0byBhdm9pZFxuICAgICAgLy8gc2V0dGluZyB0aGUgcHJvcGVydHkgYWdhaW4gdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLiBOb3RlOlxuICAgICAgLy8gMS4gdGhpcyB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIGZhY3QgdGhhdCB0aGUgY2FsbGJhY2sgaXMgc3luY2hyb25vdXMuXG4gICAgICAvLyAyLiB3aWxsIGJlaGF2ZSBpbmNvcnJlY3RseSBpZiBtdWx0aXBsZSBhdHRyaWJ1dGVzIGFyZSBpbiB0aGUgcmVhY3Rpb25cbiAgICAgIC8vIHN0YWNrIGF0IHRpbWUgb2YgY2FsbGluZy4gSG93ZXZlciwgc2luY2Ugd2UgcHJvY2VzcyBhdHRyaWJ1dGVzXG4gICAgICAvLyBpbiBgdXBkYXRlYCB0aGlzIHNob3VsZCBub3QgYmUgcG9zc2libGUgKG9yIGFuIGV4dHJlbWUgY29ybmVyIGNhc2VcbiAgICAgIC8vIHRoYXQgd2UnZCBsaWtlIHRvIGRpc2NvdmVyKS5cbiAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IG5hbWU7XG4gICAgICBpZiAoYXR0clZhbHVlID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyVmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgIH1cbiAgICAgIC8vIG1hcmsgc3RhdGUgbm90IHJlZmxlY3RpbmdcbiAgICAgIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydHkgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRhdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50O1xuICAgIC8vIE5vdGUsIGhpbnQgdGhpcyBhcyBhbiBgQXR0cmlidXRlTWFwYCBzbyBjbG9zdXJlIGNsZWFybHkgdW5kZXJzdGFuZHNcbiAgICAvLyB0aGUgdHlwZTsgaXQgaGFzIGlzc3VlcyB3aXRoIHRyYWNraW5nIHR5cGVzIHRocm91Z2ggc3RhdGljc1xuICAgIGNvbnN0IHByb3BOYW1lID0gKGN0b3IuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIGFzIEF0dHJpYnV0ZU1hcCkuZ2V0KG5hbWUpO1xuICAgIC8vIFVzZSB0cmFja2luZyBpbmZvIHRvIGF2b2lkIHJlZmxlY3RpbmcgYSBwcm9wZXJ0eSB2YWx1ZSB0byBhbiBhdHRyaWJ1dGVcbiAgICAvLyBpZiBpdCB3YXMganVzdCBzZXQgYmVjYXVzZSB0aGUgYXR0cmlidXRlIGNoYW5nZWQuXG4gICAgaWYgKHByb3BOYW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSAhPT0gcHJvcE5hbWUpIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhwcm9wTmFtZSk7XG4gICAgICBjb25zdCBjb252ZXJ0ZXIgPVxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jb252ZXJ0ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICA/IHtmcm9tQXR0cmlidXRlOiBvcHRpb25zLmNvbnZlcnRlcn1cbiAgICAgICAgICA6IG9wdGlvbnMuY29udmVydGVyPy5mcm9tQXR0cmlidXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jb252ZXJ0ZXJcbiAgICAgICAgICAgIDogZGVmYXVsdENvbnZlcnRlcjtcbiAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IHByb3BOYW1lO1xuICAgICAgY29uc3QgY29udmVydGVkVmFsdWUgPSBjb252ZXJ0ZXIuZnJvbUF0dHJpYnV0ZSEodmFsdWUsIG9wdGlvbnMudHlwZSk7XG4gICAgICB0aGlzW3Byb3BOYW1lIGFzIGtleW9mIHRoaXNdID1cbiAgICAgICAgY29udmVydGVkVmFsdWUgPz9cbiAgICAgICAgdGhpcy5fX2RlZmF1bHRWYWx1ZXM/LmdldChwcm9wTmFtZSkgPz9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgKGNvbnZlcnRlZFZhbHVlIGFzIGFueSk7XG4gICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnR5ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdHMgYW4gdXBkYXRlIHdoaWNoIGlzIHByb2Nlc3NlZCBhc3luY2hyb25vdXNseS4gVGhpcyBzaG91bGQgYmUgY2FsbGVkXG4gICAqIHdoZW4gYW4gZWxlbWVudCBzaG91bGQgdXBkYXRlIGJhc2VkIG9uIHNvbWUgc3RhdGUgbm90IHRyaWdnZXJlZCBieSBzZXR0aW5nXG4gICAqIGEgcmVhY3RpdmUgcHJvcGVydHkuIEluIHRoaXMgY2FzZSwgcGFzcyBubyBhcmd1bWVudHMuIEl0IHNob3VsZCBhbHNvIGJlXG4gICAqIGNhbGxlZCB3aGVuIG1hbnVhbGx5IGltcGxlbWVudGluZyBhIHByb3BlcnR5IHNldHRlci4gSW4gdGhpcyBjYXNlLCBwYXNzIHRoZVxuICAgKiBwcm9wZXJ0eSBgbmFtZWAgYW5kIGBvbGRWYWx1ZWAgdG8gZW5zdXJlIHRoYXQgYW55IGNvbmZpZ3VyZWQgcHJvcGVydHlcbiAgICogb3B0aW9ucyBhcmUgaG9ub3JlZC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgbmFtZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAqIEBwYXJhbSBvbGRWYWx1ZSBvbGQgdmFsdWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gb3B0aW9ucyBwcm9wZXJ0eSBvcHRpb25zIHRvIHVzZSBpbnN0ZWFkIG9mIHRoZSBwcmV2aW91c2x5XG4gICAqICAgICBjb25maWd1cmVkIG9wdGlvbnNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHJlcXVlc3RVcGRhdGUoXG4gICAgbmFtZT86IFByb3BlcnR5S2V5LFxuICAgIG9sZFZhbHVlPzogdW5rbm93bixcbiAgICBvcHRpb25zPzogUHJvcGVydHlEZWNsYXJhdGlvblxuICApOiB2b2lkIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGEgcHJvcGVydHkga2V5LCBwZXJmb3JtIHByb3BlcnR5IHVwZGF0ZSBzdGVwcy5cbiAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoREVWX01PREUgJiYgKG5hbWUgYXMgdW5rbm93bikgaW5zdGFuY2VvZiBFdmVudCkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgYGAsXG4gICAgICAgICAgYFRoZSByZXF1ZXN0VXBkYXRlKCkgbWV0aG9kIHdhcyBjYWxsZWQgd2l0aCBhbiBFdmVudCBhcyB0aGUgcHJvcGVydHkgbmFtZS4gVGhpcyBpcyBwcm9iYWJseSBhIG1pc3Rha2UgY2F1c2VkIGJ5IGJpbmRpbmcgdGhpcy5yZXF1ZXN0VXBkYXRlIGFzIGFuIGV2ZW50IGxpc3RlbmVyLiBJbnN0ZWFkIGJpbmQgYSBmdW5jdGlvbiB0aGF0IHdpbGwgY2FsbCBpdCB3aXRoIG5vIGFyZ3VtZW50czogKCkgPT4gdGhpcy5yZXF1ZXN0VXBkYXRlKClgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50O1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzW25hbWUgYXMga2V5b2YgdGhpc107XG4gICAgICBvcHRpb25zID8/PSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhuYW1lKTtcbiAgICAgIGNvbnN0IGNoYW5nZWQgPVxuICAgICAgICAob3B0aW9ucy5oYXNDaGFuZ2VkID8/IG5vdEVxdWFsKShuZXdWYWx1ZSwgb2xkVmFsdWUpIHx8XG4gICAgICAgIC8vIFdoZW4gdGhlcmUgaXMgbm8gY2hhbmdlLCBjaGVjayBhIGNvcm5lciBjYXNlIHRoYXQgY2FuIG9jY3VyIHdoZW5cbiAgICAgICAgLy8gMS4gdGhlcmUncyBhIGluaXRpYWwgdmFsdWUgd2hpY2ggd2FzIG5vdCByZWZsZWN0ZWRcbiAgICAgICAgLy8gMi4gdGhlIHByb3BlcnR5IGlzIHN1YnNlcXVlbnRseSBzZXQgdG8gdGhpcyB2YWx1ZS5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGUsIGBwcm9wOiB7dXNlRGVmYXVsdDogdHJ1ZSwgcmVmbGVjdDogdHJ1ZX1gXG4gICAgICAgIC8vIGFuZCBlbC5wcm9wID0gJ2ZvbycuIFRoaXMgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBjaGFuZ2UgaWYgdGhlXG4gICAgICAgIC8vIGF0dHJpYnV0ZSBpcyBub3Qgc2V0IGJlY2F1c2Ugd2Ugd2lsbCBub3cgcmVmbGVjdCB0aGUgcHJvcGVydHkgdG8gdGhlIGF0dHJpYnV0ZS5cbiAgICAgICAgKG9wdGlvbnMudXNlRGVmYXVsdCAmJlxuICAgICAgICAgIG9wdGlvbnMucmVmbGVjdCAmJlxuICAgICAgICAgIG5ld1ZhbHVlID09PSB0aGlzLl9fZGVmYXVsdFZhbHVlcz8uZ2V0KG5hbWUpICYmXG4gICAgICAgICAgIXRoaXMuaGFzQXR0cmlidXRlKGN0b3IuX19hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucykhKSk7XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB0aGlzLl8kY2hhbmdlUHJvcGVydHkobmFtZSwgb2xkVmFsdWUsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWJvcnQgdGhlIHJlcXVlc3QgaWYgdGhlIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBjaGFuZ2VkLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmlzVXBkYXRlUGVuZGluZyA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuX191cGRhdGVQcm9taXNlID0gdGhpcy5fX2VucXVldWVVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfJGNoYW5nZVByb3BlcnR5KFxuICAgIG5hbWU6IFByb3BlcnR5S2V5LFxuICAgIG9sZFZhbHVlOiB1bmtub3duLFxuICAgIHt1c2VEZWZhdWx0LCByZWZsZWN0LCB3cmFwcGVkfTogUHJvcGVydHlEZWNsYXJhdGlvbixcbiAgICBpbml0aWFsaXplVmFsdWU/OiB1bmtub3duXG4gICkge1xuICAgIC8vIFJlY29yZCBkZWZhdWx0IHZhbHVlIHdoZW4gdXNlRGVmYXVsdCBpcyB1c2VkLiBUaGlzIGFsbG93cyB1cyB0b1xuICAgIC8vIHJlc3RvcmUgdGhpcyB2YWx1ZSB3aGVuIHRoZSBhdHRyaWJ1dGUgaXMgcmVtb3ZlZC5cbiAgICBpZiAodXNlRGVmYXVsdCAmJiAhKHRoaXMuX19kZWZhdWx0VmFsdWVzID8/PSBuZXcgTWFwKCkpLmhhcyhuYW1lKSkge1xuICAgICAgdGhpcy5fX2RlZmF1bHRWYWx1ZXMuc2V0KFxuICAgICAgICBuYW1lLFxuICAgICAgICBpbml0aWFsaXplVmFsdWUgPz8gb2xkVmFsdWUgPz8gdGhpc1tuYW1lIGFzIGtleW9mIHRoaXNdXG4gICAgICApO1xuICAgICAgLy8gaWYgdGhpcyBpcyBub3Qgd3JhcHBpbmcgYW4gYWNjZXNzb3IsIGl0IG11c3QgYmUgYW4gaW5pdGlhbCBzZXR0aW5nXG4gICAgICAvLyBhbmQgaW4gdGhpcyBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIHJlY29yZCB0aGUgY2hhbmdlIG9yIHJlZmxlY3QuXG4gICAgICBpZiAod3JhcHBlZCAhPT0gdHJ1ZSB8fCBpbml0aWFsaXplVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBDcmVhdGUgYSBiZW5jaG1hcmsgb2YgTWFwLmhhcygpICsgTWFwLnNldChcbiAgICAvLyB2cyBqdXN0IE1hcC5zZXQoKVxuICAgIGlmICghdGhpcy5fJGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgICAgLy8gT24gdGhlIGluaXRpYWwgY2hhbmdlLCB0aGUgb2xkIHZhbHVlIHNob3VsZCBiZSBgdW5kZWZpbmVkYCwgZXhjZXB0XG4gICAgICAvLyB3aXRoIGB1c2VEZWZhdWx0YFxuICAgICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQgJiYgIXVzZURlZmF1bHQpIHtcbiAgICAgICAgb2xkVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMuc2V0KG5hbWUsIG9sZFZhbHVlKTtcbiAgICB9XG4gICAgLy8gQWRkIHRvIHJlZmxlY3RpbmcgcHJvcGVydGllcyBzZXQuXG4gICAgLy8gTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCBldmVyeSBjaGFuZ2UgaGFzIGEgY2hhbmNlIHRvIGFkZCB0aGVcbiAgICAvLyBwcm9wZXJ0eSB0byBgX19yZWZsZWN0aW5nUHJvcGVydGllc2AuIFRoaXMgZW5zdXJlcyBzZXR0aW5nXG4gICAgLy8gYXR0cmlidXRlICsgcHJvcGVydHkgcmVmbGVjdHMgY29ycmVjdGx5LlxuICAgIGlmIChyZWZsZWN0ID09PSB0cnVlICYmIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydHkgIT09IG5hbWUpIHtcbiAgICAgICh0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPz89IG5ldyBTZXQ8UHJvcGVydHlLZXk+KCkpLmFkZChuYW1lKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgZWxlbWVudCB0byBhc3luY2hyb25vdXNseSB1cGRhdGUuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIF9fZW5xdWV1ZVVwZGF0ZSgpIHtcbiAgICB0aGlzLmlzVXBkYXRlUGVuZGluZyA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEVuc3VyZSBhbnkgcHJldmlvdXMgdXBkYXRlIGhhcyByZXNvbHZlZCBiZWZvcmUgdXBkYXRpbmcuXG4gICAgICAvLyBUaGlzIGBhd2FpdGAgYWxzbyBlbnN1cmVzIHRoYXQgcHJvcGVydHkgY2hhbmdlcyBhcmUgYmF0Y2hlZC5cbiAgICAgIGF3YWl0IHRoaXMuX191cGRhdGVQcm9taXNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFJlZmlyZSBhbnkgcHJldmlvdXMgZXJyb3JzIGFzeW5jIHNvIHRoZXkgZG8gbm90IGRpc3J1cHQgdGhlIHVwZGF0ZVxuICAgICAgLy8gY3ljbGUuIEVycm9ycyBhcmUgcmVmaXJlZCBzbyBkZXZlbG9wZXJzIGhhdmUgYSBjaGFuY2UgdG8gb2JzZXJ2ZVxuICAgICAgLy8gdGhlbSwgYW5kIHRoaXMgY2FuIGJlIGRvbmUgYnkgaW1wbGVtZW50aW5nXG4gICAgICAvLyBgd2luZG93Lm9udW5oYW5kbGVkcmVqZWN0aW9uYC5cbiAgICAgIFByb21pc2UucmVqZWN0KGUpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAgLy8gSWYgYHNjaGVkdWxlVXBkYXRlYCByZXR1cm5zIGEgUHJvbWlzZSwgd2UgYXdhaXQgaXQuIFRoaXMgaXMgZG9uZSB0b1xuICAgIC8vIGVuYWJsZSBjb29yZGluYXRpbmcgdXBkYXRlcyB3aXRoIGEgc2NoZWR1bGVyLiBOb3RlLCB0aGUgcmVzdWx0IGlzXG4gICAgLy8gY2hlY2tlZCB0byBhdm9pZCBkZWxheWluZyBhbiBhZGRpdGlvbmFsIG1pY3JvdGFzayB1bmxlc3Mgd2UgbmVlZCB0by5cbiAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGF3YWl0IHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuICF0aGlzLmlzVXBkYXRlUGVuZGluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgYW4gZWxlbWVudCB1cGRhdGUuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZVxuICAgKiB0aW1pbmcgb2YgdXBkYXRlcyBieSByZXR1cm5pbmcgYSBQcm9taXNlLiBUaGUgdXBkYXRlIHdpbGwgYXdhaXQgdGhlXG4gICAqIHJldHVybmVkIFByb21pc2UsIGFuZCB5b3Ugc2hvdWxkIHJlc29sdmUgdGhlIFByb21pc2UgdG8gYWxsb3cgdGhlIHVwZGF0ZVxuICAgKiB0byBwcm9jZWVkLiBJZiB0aGlzIG1ldGhvZCBpcyBvdmVycmlkZGVuLCBgc3VwZXIuc2NoZWR1bGVVcGRhdGUoKWBcbiAgICogbXVzdCBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEZvciBpbnN0YW5jZSwgdG8gc2NoZWR1bGUgdXBkYXRlcyB0byBvY2N1ciBqdXN0IGJlZm9yZSB0aGUgbmV4dCBmcmFtZTpcbiAgICpcbiAgICogYGBgdHNcbiAgICogb3ZlcnJpZGUgcHJvdGVjdGVkIGFzeW5jIHNjaGVkdWxlVXBkYXRlKCk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgKiAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSk7XG4gICAqICAgc3VwZXIuc2NoZWR1bGVVcGRhdGUoKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBzY2hlZHVsZVVwZGF0ZSgpOiB2b2lkIHwgUHJvbWlzZTx1bmtub3duPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wZXJmb3JtVXBkYXRlKCk7XG4gICAgaWYgKFxuICAgICAgREVWX01PREUgJiZcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVuYWJsZWRXYXJuaW5ncyEuaW5jbHVkZXMoXG4gICAgICAgICdhc3luYy1wZXJmb3JtLXVwZGF0ZSdcbiAgICAgICkgJiZcbiAgICAgIHR5cGVvZiAocmVzdWx0IGFzIHVua25vd24gYXMgUHJvbWlzZTx1bmtub3duPiB8IHVuZGVmaW5lZCk/LnRoZW4gPT09XG4gICAgICAgICdmdW5jdGlvbidcbiAgICApIHtcbiAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgJ2FzeW5jLXBlcmZvcm0tdXBkYXRlJyxcbiAgICAgICAgYEVsZW1lbnQgJHt0aGlzLmxvY2FsTmFtZX0gcmV0dXJuZWQgYSBQcm9taXNlIGZyb20gcGVyZm9ybVVwZGF0ZSgpLiBgICtcbiAgICAgICAgICBgVGhpcyBiZWhhdmlvciBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgYCArXG4gICAgICAgICAgYHZlcnNpb24gb2YgUmVhY3RpdmVFbGVtZW50LmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYW4gZWxlbWVudCB1cGRhdGUuIE5vdGUsIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZHVyaW5nIHRoZVxuICAgKiB1cGRhdGUsIGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgd2lsbCBub3QgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBDYWxsIGBwZXJmb3JtVXBkYXRlKClgIHRvIGltbWVkaWF0ZWx5IHByb2Nlc3MgYSBwZW5kaW5nIHVwZGF0ZS4gVGhpcyBzaG91bGRcbiAgICogZ2VuZXJhbGx5IG5vdCBiZSBuZWVkZWQsIGJ1dCBpdCBjYW4gYmUgZG9uZSBpbiByYXJlIGNhc2VzIHdoZW4geW91IG5lZWQgdG9cbiAgICogdXBkYXRlIHN5bmNocm9ub3VzbHkuXG4gICAqXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgcGVyZm9ybVVwZGF0ZSgpOiB2b2lkIHtcbiAgICAvLyBBYm9ydCBhbnkgdXBkYXRlIGlmIG9uZSBpcyBub3QgcGVuZGluZyB3aGVuIHRoaXMgaXMgY2FsbGVkLlxuICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBgcGVyZm9ybVVwZGF0ZWAgaXMgY2FsbGVkIGVhcmx5IHRvIFwiZmx1c2hcIlxuICAgIC8vIHRoZSB1cGRhdGUuXG4gICAgaWYgKCF0aGlzLmlzVXBkYXRlUGVuZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWJ1Z0xvZ0V2ZW50Py4oe2tpbmQ6ICd1cGRhdGUnfSk7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIC8vIENyZWF0ZSByZW5kZXJSb290IGJlZm9yZSBmaXJzdCB1cGRhdGUuIFRoaXMgb2NjdXJzIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAgICAgIC8vIGJ1dCBpcyBkb25lIGhlcmUgdG8gc3VwcG9ydCBvdXQgb2YgdHJlZSBjYWxscyB0byBgZW5hYmxlVXBkYXRpbmdgL2BwZXJmb3JtVXBkYXRlYC5cbiAgICAgICh0aGlzIGFzIE11dGFibGU8dHlwZW9mIHRoaXMsICdyZW5kZXJSb290Jz4pLnJlbmRlclJvb3QgPz89XG4gICAgICAgIHRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpO1xuICAgICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICAgIC8vIFByb2R1Y2Ugd2FybmluZyBpZiBhbnkgcmVhY3RpdmUgcHJvcGVydGllcyBvbiB0aGUgcHJvdG90eXBlIGFyZVxuICAgICAgICAvLyBzaGFkb3dlZCBieSBjbGFzcyBmaWVsZHMuIEluc3RhbmNlIGZpZWxkcyBzZXQgYmVmb3JlIHVwZ3JhZGUgYXJlXG4gICAgICAgIC8vIGRlbGV0ZWQgYnkgdGhpcyBwb2ludCwgc28gYW55IG93biBwcm9wZXJ0eSBpcyBjYXVzZWQgYnkgY2xhc3MgZmllbGRcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24gaW4gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBzaGFkb3dlZFByb3BlcnRpZXMgPSBbLi4uY3Rvci5lbGVtZW50UHJvcGVydGllcy5rZXlzKCldLmZpbHRlcihcbiAgICAgICAgICAocCkgPT4gdGhpcy5oYXNPd25Qcm9wZXJ0eShwKSAmJiBwIGluIGdldFByb3RvdHlwZU9mKHRoaXMpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzaGFkb3dlZFByb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBvbiBlbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9IHdpbGwgbm90IGAgK1xuICAgICAgICAgICAgICBgdHJpZ2dlciB1cGRhdGVzIGFzIGV4cGVjdGVkIGJlY2F1c2UgdGhleSBhcmUgc2V0IHVzaW5nIGNsYXNzIGAgK1xuICAgICAgICAgICAgICBgZmllbGRzOiAke3NoYWRvd2VkUHJvcGVydGllcy5qb2luKCcsICcpfS4gYCArXG4gICAgICAgICAgICAgIGBOYXRpdmUgY2xhc3MgZmllbGRzIGFuZCBzb21lIGNvbXBpbGVkIG91dHB1dCB3aWxsIG92ZXJ3cml0ZSBgICtcbiAgICAgICAgICAgICAgYGFjY2Vzc29ycyB1c2VkIGZvciBkZXRlY3RpbmcgY2hhbmdlcy4gU2VlIGAgK1xuICAgICAgICAgICAgICBgaHR0cHM6Ly9saXQuZGV2L21zZy9jbGFzcy1maWVsZC1zaGFkb3dpbmcgYCArXG4gICAgICAgICAgICAgIGBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gTWl4aW4gaW5zdGFuY2UgcHJvcGVydGllcyBvbmNlLCBpZiB0aGV5IGV4aXN0LlxuICAgICAgaWYgKHRoaXMuX19pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IHNob3VsZCB3ZSB1c2UgdGhlIHN0b3JlZCB2YWx1ZT8gQ291bGQgYSBuZXcgdmFsdWVcbiAgICAgICAgLy8gaGF2ZSBiZWVuIHNldCBzaW5jZSB3ZSBzdG9yZWQgdGhlIG93biBwcm9wZXJ0eSB2YWx1ZT9cbiAgICAgICAgZm9yIChjb25zdCBbcCwgdmFsdWVdIG9mIHRoaXMuX19pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICB0aGlzW3AgYXMga2V5b2YgdGhpc10gPSB2YWx1ZSBhcyB0aGlzW2tleW9mIHRoaXNdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19pbnN0YW5jZVByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICAvLyBUcmlnZ2VyIGluaXRpYWwgdmFsdWUgcmVmbGVjdGlvbiBhbmQgcG9wdWxhdGUgdGhlIGluaXRpYWxcbiAgICAgIC8vIGBjaGFuZ2VkUHJvcGVydGllc2AgbWFwLCBidXQgb25seSBmb3IgdGhlIGNhc2Ugb2YgcHJvcGVydGllcyBjcmVhdGVkXG4gICAgICAvLyB2aWEgYGNyZWF0ZVByb3BlcnR5YCBvbiBhY2Nlc3NvcnMsIHdoaWNoIHdpbGwgbm90IGhhdmUgYWxyZWFkeVxuICAgICAgLy8gcG9wdWxhdGVkIHRoZSBgY2hhbmdlZFByb3BlcnRpZXNgIG1hcCBzaW5jZSB0aGV5IGFyZSBub3Qgc2V0LlxuICAgICAgLy8gV2UgY2FuJ3Qga25vdyBpZiB0aGVzZSBhY2Nlc3NvcnMgaGFkIGluaXRpYWxpemVycywgc28gd2UganVzdCBzZXRcbiAgICAgIC8vIHRoZW0gYW55d2F5IC0gYSBkaWZmZXJlbmNlIGZyb20gZXhwZXJpbWVudGFsIGRlY29yYXRvcnMgb24gZmllbGRzIGFuZFxuICAgICAgLy8gc3RhbmRhcmQgZGVjb3JhdG9ycyBvbiBhdXRvLWFjY2Vzc29ycy5cbiAgICAgIC8vIEZvciBjb250ZXh0IHNlZTpcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L3B1bGwvNDE4MyNpc3N1ZWNvbW1lbnQtMTcxMTk1OTYzNVxuICAgICAgY29uc3QgZWxlbWVudFByb3BlcnRpZXMgPSAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KVxuICAgICAgICAuZWxlbWVudFByb3BlcnRpZXM7XG4gICAgICBpZiAoZWxlbWVudFByb3BlcnRpZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBbcCwgb3B0aW9uc10gb2YgZWxlbWVudFByb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb25zdCB7d3JhcHBlZH0gPSBvcHRpb25zO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1twIGFzIGtleW9mIHRoaXNdO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHdyYXBwZWQgPT09IHRydWUgJiZcbiAgICAgICAgICAgICF0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMuaGFzKHApICYmXG4gICAgICAgICAgICB2YWx1ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl8kY2hhbmdlUHJvcGVydHkocCwgdW5kZWZpbmVkLCBvcHRpb25zLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICBjb25zdCBjaGFuZ2VkUHJvcGVydGllcyA9IHRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcztcbiAgICB0cnkge1xuICAgICAgc2hvdWxkVXBkYXRlID0gdGhpcy5zaG91bGRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICB0aGlzLndpbGxVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdFVwZGF0ZT8uKCkpO1xuICAgICAgICB0aGlzLnVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9fbWFya1VwZGF0ZWQoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBQcmV2ZW50IGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgZnJvbSBydW5uaW5nIHdoZW4gdGhlcmUncyBhblxuICAgICAgLy8gdXBkYXRlIGV4Y2VwdGlvbi5cbiAgICAgIHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgLy8gRW5zdXJlIGVsZW1lbnQgY2FuIGFjY2VwdCBhZGRpdGlvbmFsIHVwZGF0ZXMgYWZ0ZXIgYW4gZXhjZXB0aW9uLlxuICAgICAgdGhpcy5fX21hcmtVcGRhdGVkKCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICAvLyBUaGUgdXBkYXRlIGlzIG5vIGxvbmdlciBjb25zaWRlcmVkIHBlbmRpbmcgYW5kIGZ1cnRoZXIgdXBkYXRlcyBhcmUgbm93IGFsbG93ZWQuXG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy5fJGRpZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgYmVmb3JlIGB1cGRhdGUoKWAgdG8gY29tcHV0ZSB2YWx1ZXMgbmVlZGVkIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgKlxuICAgKiBJbXBsZW1lbnQgYHdpbGxVcGRhdGVgIHRvIGNvbXB1dGUgcHJvcGVydHkgdmFsdWVzIHRoYXQgZGVwZW5kIG9uIG90aGVyXG4gICAqIHByb3BlcnRpZXMgYW5kIGFyZSB1c2VkIGluIHRoZSByZXN0IG9mIHRoZSB1cGRhdGUgcHJvY2Vzcy5cbiAgICpcbiAgICogYGBgdHNcbiAgICogd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xuICAgKiAgIC8vIG9ubHkgbmVlZCB0byBjaGVjayBjaGFuZ2VkIHByb3BlcnRpZXMgZm9yIGFuIGV4cGVuc2l2ZSBjb21wdXRhdGlvbi5cbiAgICogICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdmaXJzdE5hbWUnKSB8fCBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2xhc3ROYW1lJykpIHtcbiAgICogICAgIHRoaXMuc2hhID0gY29tcHV0ZVNIQShgJHt0aGlzLmZpcnN0TmFtZX0gJHt0aGlzLmxhc3ROYW1lfWApO1xuICAgKiAgIH1cbiAgICogfVxuICAgKlxuICAgKiByZW5kZXIoKSB7XG4gICAqICAgcmV0dXJuIGh0bWxgU0hBOiAke3RoaXMuc2hhfWA7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgd2lsbFVwZGF0ZShfY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7fVxuXG4gIC8vIE5vdGUsIHRoaXMgaXMgYW4gb3ZlcnJpZGUgcG9pbnQgZm9yIHBvbHlmaWxsLXN1cHBvcnQuXG4gIC8vIEBpbnRlcm5hbFxuICBfJGRpZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdFVwZGF0ZWQ/LigpKTtcbiAgICBpZiAoIXRoaXMuaGFzVXBkYXRlZCkge1xuICAgICAgdGhpcy5oYXNVcGRhdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoXG4gICAgICBERVZfTU9ERSAmJlxuICAgICAgdGhpcy5pc1VwZGF0ZVBlbmRpbmcgJiZcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVuYWJsZWRXYXJuaW5ncyEuaW5jbHVkZXMoXG4gICAgICAgICdjaGFuZ2UtaW4tdXBkYXRlJ1xuICAgICAgKVxuICAgICkge1xuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAnY2hhbmdlLWluLXVwZGF0ZScsXG4gICAgICAgIGBFbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9IHNjaGVkdWxlZCBhbiB1cGRhdGUgYCArXG4gICAgICAgICAgYChnZW5lcmFsbHkgYmVjYXVzZSBhIHByb3BlcnR5IHdhcyBzZXQpIGAgK1xuICAgICAgICAgIGBhZnRlciBhbiB1cGRhdGUgY29tcGxldGVkLCBjYXVzaW5nIGEgbmV3IHVwZGF0ZSB0byBiZSBzY2hlZHVsZWQuIGAgK1xuICAgICAgICAgIGBUaGlzIGlzIGluZWZmaWNpZW50IGFuZCBzaG91bGQgYmUgYXZvaWRlZCB1bmxlc3MgdGhlIG5leHQgdXBkYXRlIGAgK1xuICAgICAgICAgIGBjYW4gb25seSBiZSBzY2hlZHVsZWQgYXMgYSBzaWRlIGVmZmVjdCBvZiB0aGUgcHJldmlvdXMgdXBkYXRlLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfX21hcmtVcGRhdGVkKCkge1xuICAgIHRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmlzVXBkYXRlUGVuZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZWxlbWVudCBoYXMgY29tcGxldGVkIHVwZGF0aW5nLlxuICAgKiBUaGUgUHJvbWlzZSB2YWx1ZSBpcyBhIGJvb2xlYW4gdGhhdCBpcyBgdHJ1ZWAgaWYgdGhlIGVsZW1lbnQgY29tcGxldGVkIHRoZVxuICAgKiB1cGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLiBUaGUgUHJvbWlzZSByZXN1bHQgaXMgYGZhbHNlYCBpZlxuICAgKiBhIHByb3BlcnR5IHdhcyBzZXQgaW5zaWRlIGB1cGRhdGVkKClgLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgYW5cbiAgICogZXhjZXB0aW9uIHdhcyB0aHJvd24gZHVyaW5nIHRoZSB1cGRhdGUuXG4gICAqXG4gICAqIFRvIGF3YWl0IGFkZGl0aW9uYWwgYXN5bmNocm9ub3VzIHdvcmssIG92ZXJyaWRlIHRoZSBgZ2V0VXBkYXRlQ29tcGxldGVgXG4gICAqIG1ldGhvZC4gRm9yIGV4YW1wbGUsIGl0IGlzIHNvbWV0aW1lcyB1c2VmdWwgdG8gYXdhaXQgYSByZW5kZXJlZCBlbGVtZW50XG4gICAqIGJlZm9yZSBmdWxmaWxsaW5nIHRoaXMgUHJvbWlzZS4gVG8gZG8gdGhpcywgZmlyc3QgYXdhaXRcbiAgICogYHN1cGVyLmdldFVwZGF0ZUNvbXBsZXRlKClgLCB0aGVuIGFueSBzdWJzZXF1ZW50IHN0YXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIEEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSB1cGRhdGUgY29tcGxldGVkXG4gICAqICAgICB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBnZXQgdXBkYXRlQ29tcGxldGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBwb2ludCBmb3IgdGhlIGB1cGRhdGVDb21wbGV0ZWAgcHJvbWlzZS5cbiAgICpcbiAgICogSXQgaXMgbm90IHNhZmUgdG8gb3ZlcnJpZGUgdGhlIGB1cGRhdGVDb21wbGV0ZWAgZ2V0dGVyIGRpcmVjdGx5IGR1ZSB0byBhXG4gICAqIGxpbWl0YXRpb24gaW4gVHlwZVNjcmlwdCB3aGljaCBtZWFucyBpdCBpcyBub3QgcG9zc2libGUgdG8gY2FsbCBhXG4gICAqIHN1cGVyY2xhc3MgZ2V0dGVyIChlLmcuIGBzdXBlci51cGRhdGVDb21wbGV0ZS50aGVuKC4uLilgKSB3aGVuIHRoZSB0YXJnZXRcbiAgICogbGFuZ3VhZ2UgaXMgRVM1IChodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMzOCkuXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZGVuIGluc3RlYWQuIEZvciBleGFtcGxlOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICogICBvdmVycmlkZSBhc3luYyBnZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICogICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN1cGVyLmdldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAqICAgICBhd2FpdCB0aGlzLl9teUNoaWxkLnVwZGF0ZUNvbXBsZXRlO1xuICAgKiAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4gQSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0aGF0IHJlc29sdmVzIHRvIHRydWUgaWYgdGhlIHVwZGF0ZSBjb21wbGV0ZWRcbiAgICogICAgIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBnZXRVcGRhdGVDb21wbGV0ZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5fX3VwZGF0ZVByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciBvciBub3QgYHVwZGF0ZSgpYCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgcmVxdWVzdHNcbiAgICogYW4gdXBkYXRlLiBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJucyBgdHJ1ZWAsIGJ1dCB0aGlzIGNhbiBiZVxuICAgKiBjdXN0b21pemVkIHRvIGNvbnRyb2wgd2hlbiB0byB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGVsZW1lbnQuIFRoaXMgbWV0aG9kIHJlZmxlY3RzIHByb3BlcnR5IHZhbHVlcyB0byBhdHRyaWJ1dGVzLlxuICAgKiBJdCBjYW4gYmUgb3ZlcnJpZGRlbiB0byByZW5kZXIgYW5kIGtlZXAgdXBkYXRlZCBlbGVtZW50IERPTS5cbiAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXJcbiAgICogYW5vdGhlciB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCB1cGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIC8vIFRoZSBmb3JFYWNoKCkgZXhwcmVzc2lvbiB3aWxsIG9ubHkgcnVuIHdoZW4gX19yZWZsZWN0aW5nUHJvcGVydGllcyBpc1xuICAgIC8vIGRlZmluZWQsIGFuZCBpdCByZXR1cm5zIHVuZGVmaW5lZCwgc2V0dGluZyBfX3JlZmxlY3RpbmdQcm9wZXJ0aWVzIHRvXG4gICAgLy8gdW5kZWZpbmVkXG4gICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0aWVzICYmPSB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnRpZXMuZm9yRWFjaCgocCkgPT5cbiAgICAgIHRoaXMuX19wcm9wZXJ0eVRvQXR0cmlidXRlKHAsIHRoaXNbcCBhcyBrZXlvZiB0aGlzXSlcbiAgICApIGFzIHVuZGVmaW5lZDtcbiAgICB0aGlzLl9fbWFya1VwZGF0ZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW5ldmVyIHRoZSBlbGVtZW50IGlzIHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtXG4gICAqIHBvc3QtdXBkYXRpbmcgdGFza3MgdmlhIERPTSBBUElzLCBmb3IgZXhhbXBsZSwgZm9jdXNpbmcgYW4gZWxlbWVudC5cbiAgICpcbiAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG8gdXBkYXRlXG4gICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICpcbiAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge31cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGZpcnN0IHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtIG9uZSB0aW1lXG4gICAqIHdvcmsgb24gdGhlIGVsZW1lbnQgYWZ0ZXIgdXBkYXRlLlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBmaXJzdFVwZGF0ZWQoKSB7XG4gICAqICAgdGhpcy5yZW5kZXJSb290LmdldEVsZW1lbnRCeUlkKCdteS10ZXh0LWFyZWEnKS5mb2N1cygpO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICogYWdhaW4gYWZ0ZXIgdGhpcyB1cGRhdGUgY3ljbGUgY29tcGxldGVzLlxuICAgKlxuICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHt9XG59XG4vLyBBc3NpZ25lZCBoZXJlIHRvIHdvcmsgYXJvdW5kIGEganNjb21waWxlciBidWcgd2l0aCBzdGF0aWMgZmllbGRzXG4vLyB3aGVuIGNvbXBpbGluZyB0byBFUzUuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMxNzdcbihSZWFjdGl2ZUVsZW1lbnQgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilbXG4gIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2VsZW1lbnRQcm9wZXJ0aWVzJywgUmVhY3RpdmVFbGVtZW50KVxuXSA9IG5ldyBNYXAoKTtcbihSZWFjdGl2ZUVsZW1lbnQgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilbXG4gIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2ZpbmFsaXplZCcsIFJlYWN0aXZlRWxlbWVudClcbl0gPSBuZXcgTWFwKCk7XG5cbi8vIEFwcGx5IHBvbHlmaWxscyBpZiBhdmFpbGFibGVcbnBvbHlmaWxsU3VwcG9ydD8uKHtSZWFjdGl2ZUVsZW1lbnR9KTtcblxuLy8gRGV2IG1vZGUgd2FybmluZ3MuLi5cbmlmIChERVZfTU9ERSkge1xuICAvLyBEZWZhdWx0IHdhcm5pbmcgc2V0LlxuICBSZWFjdGl2ZUVsZW1lbnQuZW5hYmxlZFdhcm5pbmdzID0gW1xuICAgICdjaGFuZ2UtaW4tdXBkYXRlJyxcbiAgICAnYXN5bmMtcGVyZm9ybS11cGRhdGUnLFxuICBdO1xuICBjb25zdCBlbnN1cmVPd25XYXJuaW5ncyA9IGZ1bmN0aW9uIChjdG9yOiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KSB7XG4gICAgaWYgKFxuICAgICAgIWN0b3IuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZW5hYmxlZFdhcm5pbmdzJywgY3RvcikpXG4gICAgKSB7XG4gICAgICBjdG9yLmVuYWJsZWRXYXJuaW5ncyA9IGN0b3IuZW5hYmxlZFdhcm5pbmdzIS5zbGljZSgpO1xuICAgIH1cbiAgfTtcbiAgUmVhY3RpdmVFbGVtZW50LmVuYWJsZVdhcm5pbmcgPSBmdW5jdGlvbiAoXG4gICAgdGhpczogdHlwZW9mIFJlYWN0aXZlRWxlbWVudCxcbiAgICB3YXJuaW5nOiBXYXJuaW5nS2luZFxuICApIHtcbiAgICBlbnN1cmVPd25XYXJuaW5ncyh0aGlzKTtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZFdhcm5pbmdzIS5pbmNsdWRlcyh3YXJuaW5nKSkge1xuICAgICAgdGhpcy5lbmFibGVkV2FybmluZ3MhLnB1c2god2FybmluZyk7XG4gICAgfVxuICB9O1xuICBSZWFjdGl2ZUVsZW1lbnQuZGlzYWJsZVdhcm5pbmcgPSBmdW5jdGlvbiAoXG4gICAgdGhpczogdHlwZW9mIFJlYWN0aXZlRWxlbWVudCxcbiAgICB3YXJuaW5nOiBXYXJuaW5nS2luZFxuICApIHtcbiAgICBlbnN1cmVPd25XYXJuaW5ncyh0aGlzKTtcbiAgICBjb25zdCBpID0gdGhpcy5lbmFibGVkV2FybmluZ3MhLmluZGV4T2Yod2FybmluZyk7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgdGhpcy5lbmFibGVkV2FybmluZ3MhLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH07XG59XG5cbi8vIElNUE9SVEFOVDogZG8gbm90IGNoYW5nZSB0aGUgcHJvcGVydHkgbmFtZSBvciB0aGUgYXNzaWdubWVudCBleHByZXNzaW9uLlxuLy8gVGhpcyBsaW5lIHdpbGwgYmUgdXNlZCBpbiByZWdleGVzIHRvIHNlYXJjaCBmb3IgUmVhY3RpdmVFbGVtZW50IHVzYWdlLlxuKGdsb2JhbC5yZWFjdGl2ZUVsZW1lbnRWZXJzaW9ucyA/Pz0gW10pLnB1c2goJzIuMS4xJyk7XG5pZiAoREVWX01PREUgJiYgZ2xvYmFsLnJlYWN0aXZlRWxlbWVudFZlcnNpb25zLmxlbmd0aCA+IDEpIHtcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIGlzc3VlV2FybmluZyEoXG4gICAgICAnbXVsdGlwbGUtdmVyc2lvbnMnLFxuICAgICAgYE11bHRpcGxlIHZlcnNpb25zIG9mIExpdCBsb2FkZWQuIExvYWRpbmcgbXVsdGlwbGUgdmVyc2lvbnMgYCArXG4gICAgICAgIGBpcyBub3QgcmVjb21tZW5kZWQuYFxuICAgICk7XG4gIH0pO1xufVxuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG4vLyBJTVBPUlRBTlQ6IHRoZXNlIGltcG9ydHMgbXVzdCBiZSB0eXBlLW9ubHlcbmltcG9ydCB0eXBlIHtEaXJlY3RpdmUsIERpcmVjdGl2ZVJlc3VsdCwgUGFydEluZm99IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbmltcG9ydCB0eXBlIHtUcnVzdGVkSFRNTCwgVHJ1c3RlZFR5cGVzV2luZG93fSBmcm9tICd0cnVzdGVkLXR5cGVzL2xpYi9pbmRleC5qcyc7XG5cbmNvbnN0IERFVl9NT0RFID0gdHJ1ZTtcbmNvbnN0IEVOQUJMRV9FWFRSQV9TRUNVUklUWV9IT09LUyA9IHRydWU7XG5jb25zdCBFTkFCTEVfU0hBRFlET01fTk9QQVRDSCA9IHRydWU7XG5jb25zdCBOT0RFX01PREUgPSBmYWxzZTtcblxuLy8gQWxsb3dzIG1pbmlmaWVycyB0byByZW5hbWUgcmVmZXJlbmNlcyB0byBnbG9iYWxUaGlzXG5jb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzO1xuXG4vKipcbiAqIENvbnRhaW5zIHR5cGVzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIHVuc3RhYmxlIGRlYnVnIEFQSS5cbiAqXG4gKiBFdmVyeXRoaW5nIGluIHRoaXMgQVBJIGlzIG5vdCBzdGFibGUgYW5kIG1heSBjaGFuZ2Ugb3IgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLFxuICogZXZlbiBvbiBwYXRjaCByZWxlYXNlcy5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl0VW5zdGFibGUge1xuICAvKipcbiAgICogV2hlbiBMaXQgaXMgcnVubmluZyBpbiBkZXYgbW9kZSBhbmQgYHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHNgIGlzIHRydWUsXG4gICAqIHdlIHdpbGwgZW1pdCAnbGl0LWRlYnVnJyBldmVudHMgdG8gd2luZG93LCB3aXRoIGxpdmUgZGV0YWlscyBhYm91dCB0aGUgdXBkYXRlIGFuZCByZW5kZXJcbiAgICogbGlmZWN5Y2xlLiBUaGVzZSBjYW4gYmUgdXNlZnVsIGZvciB3cml0aW5nIGRlYnVnIHRvb2xpbmcgYW5kIHZpc3VhbGl6YXRpb25zLlxuICAgKlxuICAgKiBQbGVhc2UgYmUgYXdhcmUgdGhhdCBydW5uaW5nIHdpdGggd2luZG93LmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cyBoYXMgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsXG4gICAqIG1ha2luZyBjZXJ0YWluIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgdmVyeSBjaGVhcCAobGlrZSBhIG5vLW9wIHJlbmRlcikgbXVjaCBzbG93ZXIsXG4gICAqIGJlY2F1c2Ugd2UgbXVzdCBjb3B5IGRhdGEgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gIGV4cG9ydCBuYW1lc3BhY2UgRGVidWdMb2cge1xuICAgIGV4cG9ydCB0eXBlIEVudHJ5ID1cbiAgICAgIHwgVGVtcGxhdGVQcmVwXG4gICAgICB8IFRlbXBsYXRlSW5zdGFudGlhdGVkXG4gICAgICB8IFRlbXBsYXRlSW5zdGFudGlhdGVkQW5kVXBkYXRlZFxuICAgICAgfCBUZW1wbGF0ZVVwZGF0aW5nXG4gICAgICB8IEJlZ2luUmVuZGVyXG4gICAgICB8IEVuZFJlbmRlclxuICAgICAgfCBDb21taXRQYXJ0RW50cnlcbiAgICAgIHwgU2V0UGFydFZhbHVlO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVQcmVwIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBwcmVwJztcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5O1xuICAgICAgY2xvbmFibGVUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICAgIHBhcnRzOiBUZW1wbGF0ZVBhcnRbXTtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBCZWdpblJlbmRlciB7XG4gICAgICBraW5kOiAnYmVnaW4gcmVuZGVyJztcbiAgICAgIGlkOiBudW1iZXI7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50O1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIHBhcnQ6IENoaWxkUGFydCB8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBFbmRSZW5kZXIge1xuICAgICAga2luZDogJ2VuZCByZW5kZXInO1xuICAgICAgaWQ6IG51bWJlcjtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQ7XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgICAgcGFydDogQ2hpbGRQYXJ0O1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFRlbXBsYXRlSW5zdGFudGlhdGVkIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBpbnN0YW50aWF0ZWQnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIGZyYWdtZW50OiBOb2RlO1xuICAgICAgcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+O1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVJbnN0YW50aWF0ZWRBbmRVcGRhdGVkIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBpbnN0YW50aWF0ZWQgYW5kIHVwZGF0ZWQnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIGZyYWdtZW50OiBOb2RlO1xuICAgICAgcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+O1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVVcGRhdGluZyB7XG4gICAgICBraW5kOiAndGVtcGxhdGUgdXBkYXRpbmcnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIHBhcnRzOiBBcnJheTxQYXJ0IHwgdW5kZWZpbmVkPjtcbiAgICAgIHZhbHVlczogdW5rbm93bltdO1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFNldFBhcnRWYWx1ZSB7XG4gICAgICBraW5kOiAnc2V0IHBhcnQnO1xuICAgICAgcGFydDogUGFydDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgdmFsdWVJbmRleDogbnVtYmVyO1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgICB0ZW1wbGF0ZUluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgIH1cblxuICAgIGV4cG9ydCB0eXBlIENvbW1pdFBhcnRFbnRyeSA9XG4gICAgICB8IENvbW1pdE5vdGhpbmdUb0NoaWxkRW50cnlcbiAgICAgIHwgQ29tbWl0VGV4dFxuICAgICAgfCBDb21taXROb2RlXG4gICAgICB8IENvbW1pdEF0dHJpYnV0ZVxuICAgICAgfCBDb21taXRQcm9wZXJ0eVxuICAgICAgfCBDb21taXRCb29sZWFuQXR0cmlidXRlXG4gICAgICB8IENvbW1pdEV2ZW50TGlzdGVuZXJcbiAgICAgIHwgQ29tbWl0VG9FbGVtZW50QmluZGluZztcblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0Tm90aGluZ1RvQ2hpbGRFbnRyeSB7XG4gICAgICBraW5kOiAnY29tbWl0IG5vdGhpbmcgdG8gY2hpbGQnO1xuICAgICAgc3RhcnQ6IENoaWxkTm9kZTtcbiAgICAgIGVuZDogQ2hpbGROb2RlIHwgbnVsbDtcbiAgICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUgfCB1bmRlZmluZWQ7XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0VGV4dCB7XG4gICAgICBraW5kOiAnY29tbWl0IHRleHQnO1xuICAgICAgbm9kZTogVGV4dDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdE5vZGUge1xuICAgICAga2luZDogJ2NvbW1pdCBub2RlJztcbiAgICAgIHN0YXJ0OiBOb2RlO1xuICAgICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSB8IHVuZGVmaW5lZDtcbiAgICAgIHZhbHVlOiBOb2RlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdEF0dHJpYnV0ZSB7XG4gICAgICBraW5kOiAnY29tbWl0IGF0dHJpYnV0ZSc7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0UHJvcGVydHkge1xuICAgICAga2luZDogJ2NvbW1pdCBwcm9wZXJ0eSc7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0Qm9vbGVhbkF0dHJpYnV0ZSB7XG4gICAgICBraW5kOiAnY29tbWl0IGJvb2xlYW4gYXR0cmlidXRlJztcbiAgICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICB2YWx1ZTogYm9vbGVhbjtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb21taXRFdmVudExpc3RlbmVyIHtcbiAgICAgIGtpbmQ6ICdjb21taXQgZXZlbnQgbGlzdGVuZXInO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb2xkTGlzdGVuZXI6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgICAgLy8gVHJ1ZSBpZiB3ZSdyZSByZW1vdmluZyB0aGUgb2xkIGV2ZW50IGxpc3RlbmVyIChlLmcuIGJlY2F1c2Ugc2V0dGluZ3MgY2hhbmdlZCwgb3IgdmFsdWUgaXMgbm90aGluZylcbiAgICAgIHJlbW92ZUxpc3RlbmVyOiBib29sZWFuO1xuICAgICAgLy8gVHJ1ZSBpZiB3ZSdyZSBhZGRpbmcgYSBuZXcgZXZlbnQgbGlzdGVuZXIgKGUuZy4gYmVjYXVzZSBmaXJzdCByZW5kZXIsIG9yIHNldHRpbmdzIGNoYW5nZWQpXG4gICAgICBhZGRMaXN0ZW5lcjogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdFRvRWxlbWVudEJpbmRpbmcge1xuICAgICAga2luZDogJ2NvbW1pdCB0byBlbGVtZW50IGJpbmRpbmcnO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIERlYnVnTG9nZ2luZ1dpbmRvdyB7XG4gIC8vIEV2ZW4gaW4gZGV2IG1vZGUsIHdlIGdlbmVyYWxseSBkb24ndCB3YW50IHRvIGVtaXQgdGhlc2UgZXZlbnRzLCBhcyB0aGF0J3NcbiAgLy8gYW5vdGhlciBsZXZlbCBvZiBjb3N0LCBzbyBvbmx5IGVtaXQgdGhlbSB3aGVuIERFVl9NT0RFIGlzIHRydWUgX2FuZF8gd2hlblxuICAvLyB3aW5kb3cuZW1pdExpdERlYnVnRXZlbnRzIGlzIHRydWUuXG4gIGVtaXRMaXREZWJ1Z0xvZ0V2ZW50cz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVXNlZnVsIGZvciB2aXN1YWxpemluZyBhbmQgbG9nZ2luZyBpbnNpZ2h0cyBpbnRvIHdoYXQgdGhlIExpdCB0ZW1wbGF0ZSBzeXN0ZW0gaXMgZG9pbmcuXG4gKlxuICogQ29tcGlsZWQgb3V0IG9mIHByb2QgbW9kZSBidWlsZHMuXG4gKi9cbmNvbnN0IGRlYnVnTG9nRXZlbnQgPSBERVZfTU9ERVxuICA/IChldmVudDogTGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnkpID0+IHtcbiAgICAgIGNvbnN0IHNob3VsZEVtaXQgPSAoZ2xvYmFsIGFzIHVua25vd24gYXMgRGVidWdMb2dnaW5nV2luZG93KVxuICAgICAgICAuZW1pdExpdERlYnVnTG9nRXZlbnRzO1xuICAgICAgaWYgKCFzaG91bGRFbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGdsb2JhbC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8TGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnk+KCdsaXQtZGVidWcnLCB7XG4gICAgICAgICAgZGV0YWlsOiBldmVudCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICA6IHVuZGVmaW5lZDtcbi8vIFVzZWQgZm9yIGNvbm5lY3RpbmcgYmVnaW5SZW5kZXIgYW5kIGVuZFJlbmRlciBldmVudHMgd2hlbiB0aGVyZSBhcmUgbmVzdGVkXG4vLyByZW5kZXJzIHdoZW4gZXJyb3JzIGFyZSB0aHJvd24gcHJldmVudGluZyBhbiBlbmRSZW5kZXIgZXZlbnQgZnJvbSBiZWluZ1xuLy8gY2FsbGVkLlxubGV0IGRlYnVnTG9nUmVuZGVySWQgPSAwO1xuXG5sZXQgaXNzdWVXYXJuaW5nOiAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmlmIChERVZfTU9ERSkge1xuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gY29kZVxuICAgICAgPyBgIFNlZSBodHRwczovL2xpdC5kZXYvbXNnLyR7Y29kZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICAgOiAnJztcbiAgICBpZiAoXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMod2FybmluZykgJiZcbiAgICAgICFnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MhLmhhcyhjb2RlKVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKHdhcm5pbmcpO1xuICAgICAgZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5hZGQod2FybmluZyk7XG4gICAgfVxuICB9O1xuXG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAnZGV2LW1vZGUnLFxuICAgICAgYExpdCBpcyBpbiBkZXYgbW9kZS4gTm90IHJlY29tbWVuZGVkIGZvciBwcm9kdWN0aW9uIWBcbiAgICApO1xuICB9KTtcbn1cblxuY29uc3Qgd3JhcCA9XG4gIEVOQUJMRV9TSEFEWURPTV9OT1BBVENIICYmXG4gIGdsb2JhbC5TaGFkeURPTT8uaW5Vc2UgJiZcbiAgZ2xvYmFsLlNoYWR5RE9NPy5ub1BhdGNoID09PSB0cnVlXG4gICAgPyAoZ2xvYmFsLlNoYWR5RE9NIS53cmFwIGFzIDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gVClcbiAgICA6IDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gbm9kZTtcblxuY29uc3QgdHJ1c3RlZFR5cGVzID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIFRydXN0ZWRUeXBlc1dpbmRvdykudHJ1c3RlZFR5cGVzO1xuXG4vKipcbiAqIE91ciBUcnVzdGVkVHlwZVBvbGljeSBmb3IgSFRNTCB3aGljaCBpcyBkZWNsYXJlZCB1c2luZyB0aGUgaHRtbCB0ZW1wbGF0ZVxuICogdGFnIGZ1bmN0aW9uLlxuICpcbiAqIFRoYXQgSFRNTCBpcyBhIGRldmVsb3Blci1hdXRob3JlZCBjb25zdGFudCwgYW5kIGlzIHBhcnNlZCB3aXRoIGlubmVySFRNTFxuICogYmVmb3JlIGFueSB1bnRydXN0ZWQgZXhwcmVzc2lvbnMgaGF2ZSBiZWVuIG1peGVkIGluLiBUaGVyZWZvciBpdCBpc1xuICogY29uc2lkZXJlZCBzYWZlIGJ5IGNvbnN0cnVjdGlvbi5cbiAqL1xuY29uc3QgcG9saWN5ID0gdHJ1c3RlZFR5cGVzXG4gID8gdHJ1c3RlZFR5cGVzLmNyZWF0ZVBvbGljeSgnbGl0LWh0bWwnLCB7XG4gICAgICBjcmVhdGVIVE1MOiAocykgPT4gcyxcbiAgICB9KVxuICA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBVc2VkIHRvIHNhbml0aXplIGFueSB2YWx1ZSBiZWZvcmUgaXQgaXMgd3JpdHRlbiBpbnRvIHRoZSBET00uIFRoaXMgY2FuIGJlXG4gKiB1c2VkIHRvIGltcGxlbWVudCBhIHNlY3VyaXR5IHBvbGljeSBvZiBhbGxvd2VkIGFuZCBkaXNhbGxvd2VkIHZhbHVlcyBpblxuICogb3JkZXIgdG8gcHJldmVudCBYU1MgYXR0YWNrcy5cbiAqXG4gKiBPbmUgd2F5IG9mIHVzaW5nIHRoaXMgY2FsbGJhY2sgd291bGQgYmUgdG8gY2hlY2sgYXR0cmlidXRlcyBhbmQgcHJvcGVydGllc1xuICogYWdhaW5zdCBhIGxpc3Qgb2YgaGlnaCByaXNrIGZpZWxkcywgYW5kIHJlcXVpcmUgdGhhdCB2YWx1ZXMgd3JpdHRlbiB0byBzdWNoXG4gKiBmaWVsZHMgYmUgaW5zdGFuY2VzIG9mIGEgY2xhc3Mgd2hpY2ggaXMgc2FmZSBieSBjb25zdHJ1Y3Rpb24uIENsb3N1cmUncyBTYWZlXG4gKiBIVE1MIFR5cGVzIGlzIG9uZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHRlY2huaXF1ZSAoXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3NhZmUtaHRtbC10eXBlcy9ibG9iL21hc3Rlci9kb2Mvc2FmZWh0bWwtdHlwZXMubWQpLlxuICogVGhlIFRydXN0ZWRUeXBlcyBwb2x5ZmlsbCBpbiBBUEktb25seSBtb2RlIGNvdWxkIGFsc28gYmUgdXNlZCBhcyBhIGJhc2lzXG4gKiBmb3IgdGhpcyB0ZWNobmlxdWUgKGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL3RydXN0ZWQtdHlwZXMpLlxuICpcbiAqIEBwYXJhbSBub2RlIFRoZSBIVE1MIG5vZGUgKHVzdWFsbHkgZWl0aGVyIGEgI3RleHQgbm9kZSBvciBhbiBFbGVtZW50KSB0aGF0XG4gKiAgICAgaXMgYmVpbmcgd3JpdHRlbiB0by4gTm90ZSB0aGF0IHRoaXMgaXMganVzdCBhbiBleGVtcGxhciBub2RlLCB0aGUgd3JpdGVcbiAqICAgICBtYXkgdGFrZSBwbGFjZSBhZ2FpbnN0IGFub3RoZXIgaW5zdGFuY2Ugb2YgdGhlIHNhbWUgY2xhc3Mgb2Ygbm9kZS5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIGFuIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eSAoZm9yIGV4YW1wbGUsICdocmVmJykuXG4gKiBAcGFyYW0gdHlwZSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgd3JpdGUgdGhhdCdzIGFib3V0IHRvIGJlIHBlcmZvcm1lZCB3aWxsXG4gKiAgICAgYmUgdG8gYSBwcm9wZXJ0eSBvciBhIG5vZGUuXG4gKiBAcmV0dXJuIEEgZnVuY3Rpb24gdGhhdCB3aWxsIHNhbml0aXplIHRoaXMgY2xhc3Mgb2Ygd3JpdGVzLlxuICovXG5leHBvcnQgdHlwZSBTYW5pdGl6ZXJGYWN0b3J5ID0gKFxuICBub2RlOiBOb2RlLFxuICBuYW1lOiBzdHJpbmcsXG4gIHR5cGU6ICdwcm9wZXJ0eScgfCAnYXR0cmlidXRlJ1xuKSA9PiBWYWx1ZVNhbml0aXplcjtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHdoaWNoIGNhbiBzYW5pdGl6ZSB2YWx1ZXMgdGhhdCB3aWxsIGJlIHdyaXR0ZW4gdG8gYSBzcGVjaWZpYyBraW5kXG4gKiBvZiBET00gc2luay5cbiAqXG4gKiBTZWUgU2FuaXRpemVyRmFjdG9yeS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNhbml0aXplLiBXaWxsIGJlIHRoZSBhY3R1YWwgdmFsdWUgcGFzc2VkIGludG9cbiAqICAgICB0aGUgbGl0LWh0bWwgdGVtcGxhdGUgbGl0ZXJhbCwgc28gdGhpcyBjb3VsZCBiZSBvZiBhbnkgdHlwZS5cbiAqIEByZXR1cm4gVGhlIHZhbHVlIHRvIHdyaXRlIHRvIHRoZSBET00uIFVzdWFsbHkgdGhlIHNhbWUgYXMgdGhlIGlucHV0IHZhbHVlLFxuICogICAgIHVubGVzcyBzYW5pdGl6YXRpb24gaXMgbmVlZGVkLlxuICovXG5leHBvcnQgdHlwZSBWYWx1ZVNhbml0aXplciA9ICh2YWx1ZTogdW5rbm93bikgPT4gdW5rbm93bjtcblxuY29uc3QgaWRlbnRpdHlGdW5jdGlvbjogVmFsdWVTYW5pdGl6ZXIgPSAodmFsdWU6IHVua25vd24pID0+IHZhbHVlO1xuY29uc3Qgbm9vcFNhbml0aXplcjogU2FuaXRpemVyRmFjdG9yeSA9IChcbiAgX25vZGU6IE5vZGUsXG4gIF9uYW1lOiBzdHJpbmcsXG4gIF90eXBlOiAncHJvcGVydHknIHwgJ2F0dHJpYnV0ZSdcbikgPT4gaWRlbnRpdHlGdW5jdGlvbjtcblxuLyoqIFNldHMgdGhlIGdsb2JhbCBzYW5pdGl6ZXIgZmFjdG9yeS4gKi9cbmNvbnN0IHNldFNhbml0aXplciA9IChuZXdTYW5pdGl6ZXI6IFNhbml0aXplckZhY3RvcnkpID0+IHtcbiAgaWYgKCFFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNhbml0aXplckZhY3RvcnlJbnRlcm5hbCAhPT0gbm9vcFNhbml0aXplcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBBdHRlbXB0ZWQgdG8gb3ZlcndyaXRlIGV4aXN0aW5nIGxpdC1odG1sIHNlY3VyaXR5IHBvbGljeS5gICtcbiAgICAgICAgYCBzZXRTYW5pdGl6ZURPTVZhbHVlRmFjdG9yeSBzaG91bGQgYmUgY2FsbGVkIGF0IG1vc3Qgb25jZS5gXG4gICAgKTtcbiAgfVxuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBuZXdTYW5pdGl6ZXI7XG59O1xuXG4vKipcbiAqIE9ubHkgdXNlZCBpbiBpbnRlcm5hbCB0ZXN0cywgbm90IGEgcGFydCBvZiB0aGUgcHVibGljIEFQSS5cbiAqL1xuY29uc3QgX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlID0gKCkgPT4ge1xuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBub29wU2FuaXRpemVyO1xufTtcblxuY29uc3QgY3JlYXRlU2FuaXRpemVyOiBTYW5pdGl6ZXJGYWN0b3J5ID0gKG5vZGUsIG5hbWUsIHR5cGUpID0+IHtcbiAgcmV0dXJuIHNhbml0aXplckZhY3RvcnlJbnRlcm5hbChub2RlLCBuYW1lLCB0eXBlKTtcbn07XG5cbi8vIEFkZGVkIHRvIGFuIGF0dHJpYnV0ZSBuYW1lIHRvIG1hcmsgdGhlIGF0dHJpYnV0ZSBhcyBib3VuZCBzbyB3ZSBjYW4gZmluZFxuLy8gaXQgZWFzaWx5LlxuY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuXG4vLyBUaGlzIG1hcmtlciBpcyB1c2VkIGluIG1hbnkgc3ludGFjdGljIHBvc2l0aW9ucyBpbiBIVE1MLCBzbyBpdCBtdXN0IGJlXG4vLyBhIHZhbGlkIGVsZW1lbnQgbmFtZSBhbmQgYXR0cmlidXRlIG5hbWUuIFdlIGRvbid0IHN1cHBvcnQgZHluYW1pYyBuYW1lcyAoeWV0KVxuLy8gYnV0IHRoaXMgYXQgbGVhc3QgZW5zdXJlcyB0aGF0IHRoZSBwYXJzZSB0cmVlIGlzIGNsb3NlciB0byB0aGUgdGVtcGxhdGVcbi8vIGludGVudGlvbi5cbmNvbnN0IG1hcmtlciA9IGBsaXQkJHtNYXRoLnJhbmRvbSgpLnRvRml4ZWQoOSkuc2xpY2UoMil9JGA7XG5cbi8vIFN0cmluZyB1c2VkIHRvIHRlbGwgaWYgYSBjb21tZW50IGlzIGEgbWFya2VyIGNvbW1lbnRcbmNvbnN0IG1hcmtlck1hdGNoID0gJz8nICsgbWFya2VyO1xuXG4vLyBUZXh0IHVzZWQgdG8gaW5zZXJ0IGEgY29tbWVudCBtYXJrZXIgbm9kZS4gV2UgdXNlIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25cbi8vIHN5bnRheCBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgc21hbGxlciwgYnV0IHBhcnNlcyBhcyBhIGNvbW1lbnQgbm9kZS5cbmNvbnN0IG5vZGVNYXJrZXIgPSBgPCR7bWFya2VyTWF0Y2h9PmA7XG5cbmNvbnN0IGQgPVxuICBOT0RFX01PREUgJiYgZ2xvYmFsLmRvY3VtZW50ID09PSB1bmRlZmluZWRcbiAgICA/ICh7XG4gICAgICAgIGNyZWF0ZVRyZWVXYWxrZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuICAgICAgfSBhcyB1bmtub3duIGFzIERvY3VtZW50KVxuICAgIDogZG9jdW1lbnQ7XG5cbi8vIENyZWF0ZXMgYSBkeW5hbWljIG1hcmtlci4gV2UgbmV2ZXIgaGF2ZSB0byBzZWFyY2ggZm9yIHRoZXNlIGluIHRoZSBET00uXG5jb25zdCBjcmVhdGVNYXJrZXIgPSAoKSA9PiBkLmNyZWF0ZUNvbW1lbnQoJycpO1xuXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10eXBlb2Ytb3BlcmF0b3JcbnR5cGUgUHJpbWl0aXZlID0gbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBzeW1ib2wgfCBiaWdpbnQ7XG5jb25zdCBpc1ByaW1pdGl2ZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFByaW1pdGl2ZSA9PlxuICB2YWx1ZSA9PT0gbnVsbCB8fCAodHlwZW9mIHZhbHVlICE9ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZSAhPSAnZnVuY3Rpb24nKTtcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuY29uc3QgaXNJdGVyYWJsZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEl0ZXJhYmxlPHVua25vd24+ID0+XG4gIGlzQXJyYXkodmFsdWUpIHx8XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHR5cGVvZiAodmFsdWUgYXMgYW55KT8uW1N5bWJvbC5pdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG5cbmNvbnN0IFNQQUNFX0NIQVIgPSBgWyBcXHRcXG5cXGZcXHJdYDtcbmNvbnN0IEFUVFJfVkFMVUVfQ0hBUiA9IGBbXiBcXHRcXG5cXGZcXHJcIidcXGA8Pj1dYDtcbmNvbnN0IE5BTUVfQ0hBUiA9IGBbXlxcXFxzXCInPj0vXWA7XG5cbi8vIFRoZXNlIHJlZ2V4ZXMgcmVwcmVzZW50IHRoZSBmaXZlIHBhcnNpbmcgc3RhdGVzIHRoYXQgd2UgY2FyZSBhYm91dCBpbiB0aGVcbi8vIFRlbXBsYXRlJ3MgSFRNTCBzY2FubmVyLiBUaGV5IG1hdGNoIHRoZSAqZW5kKiBvZiB0aGUgc3RhdGUgdGhleSdyZSBuYW1lZFxuLy8gYWZ0ZXIuXG4vLyBEZXBlbmRpbmcgb24gdGhlIG1hdGNoLCB3ZSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlLiBJZiB0aGVyZSdzIG5vIG1hdGNoLFxuLy8gd2Ugc3RheSBpbiB0aGUgc2FtZSBzdGF0ZS5cbi8vIE5vdGUgdGhhdCB0aGUgcmVnZXhlcyBhcmUgc3RhdGVmdWwuIFdlIHV0aWxpemUgbGFzdEluZGV4IGFuZCBzeW5jIGl0XG4vLyBhY3Jvc3MgdGhlIG11bHRpcGxlIHJlZ2V4ZXMgdXNlZC4gSW4gYWRkaXRpb24gdG8gdGhlIGZpdmUgcmVnZXhlcyBiZWxvd1xuLy8gd2UgYWxzbyBkeW5hbWljYWxseSBjcmVhdGUgYSByZWdleCB0byBmaW5kIHRoZSBtYXRjaGluZyBlbmQgdGFncyBmb3IgcmF3XG4vLyB0ZXh0IGVsZW1lbnRzLlxuXG4vKipcbiAqIEVuZCBvZiB0ZXh0IGlzOiBgPGAgZm9sbG93ZWQgYnk6XG4gKiAgIChjb21tZW50IHN0YXJ0KSBvciAodGFnKSBvciAoZHluYW1pYyB0YWcgYmluZGluZylcbiAqL1xuY29uc3QgdGV4dEVuZFJlZ2V4ID0gLzwoPzooIS0tfFxcL1teYS16QS1aXSl8KFxcLz9bYS16QS1aXVtePlxcc10qKXwoXFwvPyQpKS9nO1xuY29uc3QgQ09NTUVOVF9TVEFSVCA9IDE7XG5jb25zdCBUQUdfTkFNRSA9IDI7XG5jb25zdCBEWU5BTUlDX1RBR19OQU1FID0gMztcblxuY29uc3QgY29tbWVudEVuZFJlZ2V4ID0gLy0tPi9nO1xuLyoqXG4gKiBDb21tZW50cyBub3Qgc3RhcnRlZCB3aXRoIDwhLS0sIGxpa2UgPC97LCBjYW4gYmUgZW5kZWQgYnkgYSBzaW5nbGUgYD5gXG4gKi9cbmNvbnN0IGNvbW1lbnQyRW5kUmVnZXggPSAvPi9nO1xuXG4vKipcbiAqIFRoZSB0YWdFbmQgcmVnZXggbWF0Y2hlcyB0aGUgZW5kIG9mIHRoZSBcImluc2lkZSBhbiBvcGVuaW5nXCIgdGFnIHN5bnRheFxuICogcG9zaXRpb24uIEl0IGVpdGhlciBtYXRjaGVzIGEgYD5gLCBhbiBhdHRyaWJ1dGUtbGlrZSBzZXF1ZW5jZSwgb3IgdGhlIGVuZFxuICogb2YgdGhlIHN0cmluZyBhZnRlciBhIHNwYWNlIChhdHRyaWJ1dGUtbmFtZSBwb3NpdGlvbiBlbmRpbmcpLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxcdFxcblxcZlxcclwiIGFyZSBIVE1MIHNwYWNlIGNoYXJhY3RlcnM6XG4gKiBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jYXNjaWktd2hpdGVzcGFjZVxuICpcbiAqIFNvIGFuIGF0dHJpYnV0ZSBpczpcbiAqICAqIFRoZSBuYW1lOiBhbnkgY2hhcmFjdGVyIGV4Y2VwdCBhIHdoaXRlc3BhY2UgY2hhcmFjdGVyLCAoXCIpLCAoJyksIFwiPlwiLFxuICogICAgXCI9XCIsIG9yIFwiL1wiLiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBIVE1MIHNwZWMgd2hpY2ggYWxzbyBleGNsdWRlcyBjb250cm9sIGNoYXJhY3RlcnMuXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5jb25zdCB0YWdFbmRSZWdleCA9IG5ldyBSZWdFeHAoXG4gIGA+fCR7U1BBQ0VfQ0hBUn0oPzooJHtOQU1FX0NIQVJ9KykoJHtTUEFDRV9DSEFSfSo9JHtTUEFDRV9DSEFSfSooPzoke0FUVFJfVkFMVUVfQ0hBUn18KFwifCcpfCkpfCQpYCxcbiAgJ2cnXG4pO1xuY29uc3QgRU5USVJFX01BVENIID0gMDtcbmNvbnN0IEFUVFJJQlVURV9OQU1FID0gMTtcbmNvbnN0IFNQQUNFU19BTkRfRVFVQUxTID0gMjtcbmNvbnN0IFFVT1RFX0NIQVIgPSAzO1xuXG5jb25zdCBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCA9IC8nL2c7XG5jb25zdCBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCA9IC9cIi9nO1xuLyoqXG4gKiBNYXRjaGVzIHRoZSByYXcgdGV4dCBlbGVtZW50cy5cbiAqXG4gKiBDb21tZW50cyBhcmUgbm90IHBhcnNlZCB3aXRoaW4gcmF3IHRleHQgZWxlbWVudHMsIHNvIHdlIG5lZWQgdG8gc2VhcmNoIHRoZWlyXG4gKiB0ZXh0IGNvbnRlbnQgZm9yIG1hcmtlciBzdHJpbmdzLlxuICovXG5jb25zdCByYXdUZXh0RWxlbWVudCA9IC9eKD86c2NyaXB0fHN0eWxlfHRleHRhcmVhfHRpdGxlKSQvaTtcblxuLyoqIFRlbXBsYXRlUmVzdWx0IHR5cGVzICovXG5jb25zdCBIVE1MX1JFU1VMVCA9IDE7XG5jb25zdCBTVkdfUkVTVUxUID0gMjtcbmNvbnN0IE1BVEhNTF9SRVNVTFQgPSAzO1xuXG50eXBlIFJlc3VsdFR5cGUgPSB0eXBlb2YgSFRNTF9SRVNVTFQgfCB0eXBlb2YgU1ZHX1JFU1VMVCB8IHR5cGVvZiBNQVRITUxfUkVTVUxUO1xuXG4vLyBUZW1wbGF0ZVBhcnQgdHlwZXNcbi8vIElNUE9SVEFOVDogdGhlc2UgbXVzdCBtYXRjaCB0aGUgdmFsdWVzIGluIFBhcnRUeXBlXG5jb25zdCBBVFRSSUJVVEVfUEFSVCA9IDE7XG5jb25zdCBDSElMRF9QQVJUID0gMjtcbmNvbnN0IFBST1BFUlRZX1BBUlQgPSAzO1xuY29uc3QgQk9PTEVBTl9BVFRSSUJVVEVfUEFSVCA9IDQ7XG5jb25zdCBFVkVOVF9QQVJUID0gNTtcbmNvbnN0IEVMRU1FTlRfUEFSVCA9IDY7XG5jb25zdCBDT01NRU5UX1BBUlQgPSA3O1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiB0aGUgdGVtcGxhdGUgdGFnIGZ1bmN0aW9ucywge0BsaW5rY29kZSBodG1sfSBhbmRcbiAqIHtAbGlua2NvZGUgc3ZnfSB3aGVuIGl0IGhhc24ndCBiZWVuIGNvbXBpbGVkIGJ5IEBsaXQtbGFicy9jb21waWxlci5cbiAqXG4gKiBBIGBUZW1wbGF0ZVJlc3VsdGAgb2JqZWN0IGhvbGRzIGFsbCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYSB0ZW1wbGF0ZVxuICogZXhwcmVzc2lvbiByZXF1aXJlZCB0byByZW5kZXIgaXQ6IHRoZSB0ZW1wbGF0ZSBzdHJpbmdzLCBleHByZXNzaW9uIHZhbHVlcyxcbiAqIGFuZCB0eXBlIG9mIHRlbXBsYXRlIChodG1sIG9yIHN2ZykuXG4gKlxuICogYFRlbXBsYXRlUmVzdWx0YCBvYmplY3RzIGRvIG5vdCBjcmVhdGUgYW55IERPTSBvbiB0aGVpciBvd24uIFRvIGNyZWF0ZSBvclxuICogdXBkYXRlIERPTSB5b3UgbmVlZCB0byByZW5kZXIgdGhlIGBUZW1wbGF0ZVJlc3VsdGAuIFNlZVxuICogW1JlbmRlcmluZ10oaHR0cHM6Ly9saXQuZGV2L2RvY3MvY29tcG9uZW50cy9yZW5kZXJpbmcpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqL1xuZXhwb3J0IHR5cGUgVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPSB7XG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBUO1xuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbiAgdmFsdWVzOiB1bmtub3duW107XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgYSB0ZW1wbGF0ZSByZXN1bHQgdGhhdCBtYXkgYmUgZWl0aGVyIHVuY29tcGlsZWQgb3IgY29tcGlsZWQuXG4gKlxuICogSW4gdGhlIGZ1dHVyZSwgVGVtcGxhdGVSZXN1bHQgd2lsbCBiZSB0aGlzIHR5cGUuIElmIHlvdSB3YW50IHRvIGV4cGxpY2l0bHlcbiAqIG5vdGUgdGhhdCBhIHRlbXBsYXRlIHJlc3VsdCBpcyBwb3RlbnRpYWxseSBjb21waWxlZCwgeW91IGNhbiByZWZlcmVuY2UgdGhpc1xuICogdHlwZSBhbmQgaXQgd2lsbCBjb250aW51ZSB0byBiZWhhdmUgdGhlIHNhbWUgdGhyb3VnaCB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uXG4gKiBvZiBMaXQuIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IgY29kZSB0aGF0IHdhbnRzIHRvIHByZXBhcmUgZm9yIHRoZSBuZXh0XG4gKiBtYWpvciB2ZXJzaW9uIG9mIExpdC5cbiAqL1xuZXhwb3J0IHR5cGUgTWF5YmVDb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPVxuICB8IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPlxuICB8IENvbXBpbGVkVGVtcGxhdGVSZXN1bHQ7XG5cbi8qKlxuICogVGhlIHJldHVybiB0eXBlIG9mIHRoZSB0ZW1wbGF0ZSB0YWcgZnVuY3Rpb25zLCB7QGxpbmtjb2RlIGh0bWx9IGFuZFxuICoge0BsaW5rY29kZSBzdmd9LlxuICpcbiAqIEEgYFRlbXBsYXRlUmVzdWx0YCBvYmplY3QgaG9sZHMgYWxsIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhIHRlbXBsYXRlXG4gKiBleHByZXNzaW9uIHJlcXVpcmVkIHRvIHJlbmRlciBpdDogdGhlIHRlbXBsYXRlIHN0cmluZ3MsIGV4cHJlc3Npb24gdmFsdWVzLFxuICogYW5kIHR5cGUgb2YgdGVtcGxhdGUgKGh0bWwgb3Igc3ZnKS5cbiAqXG4gKiBgVGVtcGxhdGVSZXN1bHRgIG9iamVjdHMgZG8gbm90IGNyZWF0ZSBhbnkgRE9NIG9uIHRoZWlyIG93bi4gVG8gY3JlYXRlIG9yXG4gKiB1cGRhdGUgRE9NIHlvdSBuZWVkIHRvIHJlbmRlciB0aGUgYFRlbXBsYXRlUmVzdWx0YC4gU2VlXG4gKiBbUmVuZGVyaW5nXShodHRwczovL2xpdC5kZXYvZG9jcy9jb21wb25lbnRzL3JlbmRlcmluZykgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gTGl0IDQsIHRoaXMgdHlwZSB3aWxsIGJlIGFuIGFsaWFzIG9mXG4gKiBNYXliZUNvbXBpbGVkVGVtcGxhdGVSZXN1bHQsIHNvIHRoYXQgY29kZSB3aWxsIGdldCB0eXBlIGVycm9ycyBpZiBpdCBhc3N1bWVzXG4gKiB0aGF0IExpdCB0ZW1wbGF0ZXMgYXJlIG5vdCBjb21waWxlZC4gV2hlbiBkZWxpYmVyYXRlbHkgd29ya2luZyB3aXRoIG9ubHlcbiAqIG9uZSwgdXNlIGVpdGhlciB7QGxpbmtjb2RlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHR9IG9yXG4gKiB7QGxpbmtjb2RlIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdH0gZXhwbGljaXRseS5cbiAqL1xuZXhwb3J0IHR5cGUgVGVtcGxhdGVSZXN1bHQ8VCBleHRlbmRzIFJlc3VsdFR5cGUgPSBSZXN1bHRUeXBlPiA9XG4gIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPjtcblxuZXhwb3J0IHR5cGUgSFRNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIEhUTUxfUkVTVUxUPjtcblxuZXhwb3J0IHR5cGUgU1ZHVGVtcGxhdGVSZXN1bHQgPSBUZW1wbGF0ZVJlc3VsdDx0eXBlb2YgU1ZHX1JFU1VMVD47XG5cbmV4cG9ydCB0eXBlIE1hdGhNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIE1BVEhNTF9SRVNVTFQ+O1xuXG4vKipcbiAqIEEgVGVtcGxhdGVSZXN1bHQgdGhhdCBoYXMgYmVlbiBjb21waWxlZCBieSBAbGl0LWxhYnMvY29tcGlsZXIsIHNraXBwaW5nIHRoZVxuICogcHJlcGFyZSBzdGVwLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQge1xuICAvLyBUaGlzIGlzIGEgZmFjdG9yeSBpbiBvcmRlciB0byBtYWtlIHRlbXBsYXRlIGluaXRpYWxpemF0aW9uIGxhenlcbiAgLy8gYW5kIGFsbG93IFNoYWR5UmVuZGVyT3B0aW9ucyBzY29wZSB0byBiZSBwYXNzZWQgaW4uXG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBDb21waWxlZFRlbXBsYXRlO1xuICB2YWx1ZXM6IHVua25vd25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21waWxlZFRlbXBsYXRlIGV4dGVuZHMgT21pdDxUZW1wbGF0ZSwgJ2VsJz4ge1xuICAvLyBlbCBpcyBvdmVycmlkZGVuIHRvIGJlIG9wdGlvbmFsLiBXZSBpbml0aWFsaXplIGl0IG9uIGZpcnN0IHJlbmRlclxuICBlbD86IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbiAgLy8gVGhlIHByZXBhcmVkIEhUTUwgc3RyaW5nIHRvIGNyZWF0ZSBhIHRlbXBsYXRlIGVsZW1lbnQgZnJvbS5cbiAgLy8gVGhlIHR5cGUgaXMgYSBUZW1wbGF0ZVN0cmluZ3NBcnJheSB0byBndWFyYW50ZWUgdGhhdCB0aGUgdmFsdWUgY2FtZSBmcm9tXG4gIC8vIHNvdXJjZSBjb2RlLCBwcmV2ZW50aW5nIGEgSlNPTiBpbmplY3Rpb24gYXR0YWNrLlxuICBoOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0ZW1wbGF0ZSBsaXRlcmFsIHRhZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBUZW1wbGF0ZVJlc3VsdCB3aXRoXG4gKiB0aGUgZ2l2ZW4gcmVzdWx0IHR5cGUuXG4gKi9cbmNvbnN0IHRhZyA9XG4gIDxUIGV4dGVuZHMgUmVzdWx0VHlwZT4odHlwZTogVCkgPT5cbiAgKHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LCAuLi52YWx1ZXM6IHVua25vd25bXSk6IFRlbXBsYXRlUmVzdWx0PFQ+ID0+IHtcbiAgICAvLyBXYXJuIGFnYWluc3QgdGVtcGxhdGVzIG9jdGFsIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICAvLyBXZSBkbyB0aGlzIGhlcmUgcmF0aGVyIHRoYW4gaW4gcmVuZGVyIHNvIHRoYXQgdGhlIHdhcm5pbmcgaXMgY2xvc2VyIHRvIHRoZVxuICAgIC8vIHRlbXBsYXRlIGRlZmluaXRpb24uXG4gICAgaWYgKERFVl9NT0RFICYmIHN0cmluZ3Muc29tZSgocykgPT4gcyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnU29tZSB0ZW1wbGF0ZSBzdHJpbmdzIGFyZSB1bmRlZmluZWQuXFxuJyArXG4gICAgICAgICAgJ1RoaXMgaXMgcHJvYmFibHkgY2F1c2VkIGJ5IGlsbGVnYWwgb2N0YWwgZXNjYXBlIHNlcXVlbmNlcy4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIEltcG9ydCBzdGF0aWMtaHRtbC5qcyByZXN1bHRzIGluIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aGljaCBnMyBkb2Vzbid0XG4gICAgICAvLyBoYW5kbGUuIEluc3RlYWQgd2Uga25vdyB0aGF0IHN0YXRpYyB2YWx1ZXMgbXVzdCBoYXZlIHRoZSBmaWVsZFxuICAgICAgLy8gYF8kbGl0U3RhdGljJGAuXG4gICAgICBpZiAoXG4gICAgICAgIHZhbHVlcy5zb21lKCh2YWwpID0+ICh2YWwgYXMge18kbGl0U3RhdGljJDogdW5rbm93bn0pPy5bJ18kbGl0U3RhdGljJCddKVxuICAgICAgKSB7XG4gICAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgICAnJyxcbiAgICAgICAgICBgU3RhdGljIHZhbHVlcyAnbGl0ZXJhbCcgb3IgJ3Vuc2FmZVN0YXRpYycgY2Fubm90IGJlIHVzZWQgYXMgdmFsdWVzIHRvIG5vbi1zdGF0aWMgdGVtcGxhdGVzLlxcbmAgK1xuICAgICAgICAgICAgYFBsZWFzZSB1c2UgdGhlIHN0YXRpYyAnaHRtbCcgdGFnIGZ1bmN0aW9uLiBTZWUgaHR0cHM6Ly9saXQuZGV2L2RvY3MvdGVtcGxhdGVzL2V4cHJlc3Npb25zLyNzdGF0aWMtZXhwcmVzc2lvbnNgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgWydfJGxpdFR5cGUkJ106IHR5cGUsXG4gICAgICBzdHJpbmdzLFxuICAgICAgdmFsdWVzLFxuICAgIH07XG4gIH07XG5cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGhlYWRlciA9ICh0aXRsZTogc3RyaW5nKSA9PiBodG1sYDxoMT4ke3RpdGxlfTwvaDE+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgaHRtbGAgdGFnIHJldHVybnMgYSBkZXNjcmlwdGlvbiBvZiB0aGUgRE9NIHRvIHJlbmRlciBhcyBhIHZhbHVlLiBJdCBpc1xuICogbGF6eSwgbWVhbmluZyBubyB3b3JrIGlzIGRvbmUgdW50aWwgdGhlIHRlbXBsYXRlIGlzIHJlbmRlcmVkLiBXaGVuIHJlbmRlcmluZyxcbiAqIGlmIGEgdGVtcGxhdGUgY29tZXMgZnJvbSB0aGUgc2FtZSBleHByZXNzaW9uIGFzIGEgcHJldmlvdXNseSByZW5kZXJlZCByZXN1bHQsXG4gKiBpdCdzIGVmZmljaWVudGx5IHVwZGF0ZWQgaW5zdGVhZCBvZiByZXBsYWNlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSB0YWcoSFRNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHJlY3QgPSBzdmdgPHJlY3Qgd2lkdGg9XCIxMFwiIGhlaWdodD1cIjEwXCI+PC9yZWN0PmA7XG4gKlxuICogY29uc3QgbXlJbWFnZSA9IGh0bWxgXG4gKiAgIDxzdmcgdmlld0JveD1cIjAgMCAxMCAxMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAqICAgICAke3JlY3R9XG4gKiAgIDwvc3ZnPmA7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYHN2Z2AgKnRhZyBmdW5jdGlvbiogc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgU1ZHIGZyYWdtZW50cywgb3IgZWxlbWVudHNcbiAqIHRoYXQgd291bGQgYmUgY29udGFpbmVkICoqaW5zaWRlKiogYW4gYDxzdmc+YCBIVE1MIGVsZW1lbnQuIEEgY29tbW9uIGVycm9yIGlzXG4gKiBwbGFjaW5nIGFuIGA8c3ZnPmAgKmVsZW1lbnQqIGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIGBzdmdgIHRhZ1xuICogZnVuY3Rpb24uIFRoZSBgPHN2Zz5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZCB3aXRoaW4gYVxuICogdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gU1ZHIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIFNWRyBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlIGVsZW1lbnQnc1xuICogc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYW4gYDxzdmc+YCBIVE1MXG4gKiBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3Qgc3ZnID0gdGFnKFNWR19SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIE1hdGhNTCBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IG51bSA9IG1hdGhtbGA8bW4+MTwvbW4+YDtcbiAqXG4gKiBjb25zdCBlcSA9IGh0bWxgXG4gKiAgIDxtYXRoPlxuICogICAgICR7bnVtfVxuICogICA8L21hdGg+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgbWF0aG1sYCAqdGFnIGZ1bmN0aW9uKiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBNYXRoTUwgZnJhZ21lbnRzLCBvclxuICogZWxlbWVudHMgdGhhdCB3b3VsZCBiZSBjb250YWluZWQgKippbnNpZGUqKiBhIGA8bWF0aD5gIEhUTUwgZWxlbWVudC4gQSBjb21tb25cbiAqIGVycm9yIGlzIHBsYWNpbmcgYSBgPG1hdGg+YCAqZWxlbWVudCogaW4gYSB0ZW1wbGF0ZSB0YWdnZWQgd2l0aCB0aGUgYG1hdGhtbGBcbiAqIHRhZyBmdW5jdGlvbi4gVGhlIGA8bWF0aD5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZFxuICogd2l0aGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gTWF0aE1MIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIE1hdGhNTCBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlXG4gKiBlbGVtZW50J3Mgc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYSBgPG1hdGg+YFxuICogSFRNTCBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3QgbWF0aG1sID0gdGFnKE1BVEhNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSBTeW1ib2wuZm9yKCdsaXQtbm9DaGFuZ2UnKTtcblxuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIENoaWxkUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgYnV0dG9uID0gaHRtbGAke1xuICogIHVzZXIuaXNBZG1pblxuICogICAgPyBodG1sYDxidXR0b24+REVMRVRFPC9idXR0b24+YFxuICogICAgOiBub3RoaW5nXG4gKiB9YDtcbiAqIGBgYFxuICpcbiAqIFByZWZlciB1c2luZyBgbm90aGluZ2Agb3ZlciBvdGhlciBmYWxzeSB2YWx1ZXMgYXMgaXQgcHJvdmlkZXMgYSBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBiZXR3ZWVuIHZhcmlvdXMgZXhwcmVzc2lvbiBiaW5kaW5nIGNvbnRleHRzLlxuICpcbiAqIEluIGNoaWxkIGV4cHJlc3Npb25zLCBgdW5kZWZpbmVkYCwgYG51bGxgLCBgJydgLCBhbmQgYG5vdGhpbmdgIGFsbCBiZWhhdmUgdGhlXG4gKiBzYW1lIGFuZCByZW5kZXIgbm8gbm9kZXMuIEluIGF0dHJpYnV0ZSBleHByZXNzaW9ucywgYG5vdGhpbmdgIF9yZW1vdmVzXyB0aGVcbiAqIGF0dHJpYnV0ZSwgd2hpbGUgYHVuZGVmaW5lZGAgYW5kIGBudWxsYCB3aWxsIHJlbmRlciBhbiBlbXB0eSBzdHJpbmcuIEluXG4gKiBwcm9wZXJ0eSBleHByZXNzaW9ucyBgbm90aGluZ2AgYmVjb21lcyBgdW5kZWZpbmVkYC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSBTeW1ib2wuZm9yKCdsaXQtbm90aGluZycpO1xuXG4vKipcbiAqIFRoZSBjYWNoZSBvZiBwcmVwYXJlZCB0ZW1wbGF0ZXMsIGtleWVkIGJ5IHRoZSB0YWdnZWQgVGVtcGxhdGVTdHJpbmdzQXJyYXlcbiAqIGFuZCBfbm90XyBhY2NvdW50aW5nIGZvciB0aGUgc3BlY2lmaWMgdGVtcGxhdGUgdGFnIHVzZWQuIFRoaXMgbWVhbnMgdGhhdFxuICogdGVtcGxhdGUgdGFncyBjYW5ub3QgYmUgZHluYW1pYyAtIHRoZXkgbXVzdCBzdGF0aWNhbGx5IGJlIG9uZSBvZiBodG1sLCBzdmcsXG4gKiBvciBhdHRyLiBUaGlzIHJlc3RyaWN0aW9uIHNpbXBsaWZpZXMgdGhlIGNhY2hlIGxvb2t1cCwgd2hpY2ggaXMgb24gdGhlIGhvdFxuICogcGF0aCBmb3IgcmVuZGVyaW5nLlxuICovXG5jb25zdCB0ZW1wbGF0ZUNhY2hlID0gbmV3IFdlYWtNYXA8VGVtcGxhdGVTdHJpbmdzQXJyYXksIFRlbXBsYXRlPigpO1xuXG4vKipcbiAqIE9iamVjdCBzcGVjaWZ5aW5nIG9wdGlvbnMgZm9yIGNvbnRyb2xsaW5nIGxpdC1odG1sIHJlbmRlcmluZy4gTm90ZSB0aGF0XG4gKiB3aGlsZSBgcmVuZGVyYCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIGBjb250YWluZXJgIChhbmRcbiAqIGByZW5kZXJCZWZvcmVgIHJlZmVyZW5jZSBub2RlKSB0byBlZmZpY2llbnRseSB1cGRhdGUgdGhlIHJlbmRlcmVkIGNvbnRlbnQsXG4gKiBvbmx5IHRoZSBvcHRpb25zIHBhc3NlZCBpbiBkdXJpbmcgdGhlIGZpcnN0IHJlbmRlciBhcmUgcmVzcGVjdGVkIGR1cmluZ1xuICogdGhlIGxpZmV0aW1lIG9mIHJlbmRlcnMgdG8gdGhhdCB1bmlxdWUgYGNvbnRhaW5lcmAgKyBgcmVuZGVyQmVmb3JlYFxuICogY29tYmluYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdG8gdXNlIGFzIHRoZSBgdGhpc2AgdmFsdWUgZm9yIGV2ZW50IGxpc3RlbmVycy4gSXQncyBvZnRlblxuICAgKiB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gdGhlIGhvc3QgY29tcG9uZW50IHJlbmRlcmluZyBhIHRlbXBsYXRlLlxuICAgKi9cbiAgaG9zdD86IG9iamVjdDtcbiAgLyoqXG4gICAqIEEgRE9NIG5vZGUgYmVmb3JlIHdoaWNoIHRvIHJlbmRlciBjb250ZW50IGluIHRoZSBjb250YWluZXIuXG4gICAqL1xuICByZW5kZXJCZWZvcmU/OiBDaGlsZE5vZGUgfCBudWxsO1xuICAvKipcbiAgICogTm9kZSB1c2VkIGZvciBjbG9uaW5nIHRoZSB0ZW1wbGF0ZSAoYGltcG9ydE5vZGVgIHdpbGwgYmUgY2FsbGVkIG9uIHRoaXNcbiAgICogbm9kZSkuIFRoaXMgY29udHJvbHMgdGhlIGBvd25lckRvY3VtZW50YCBvZiB0aGUgcmVuZGVyZWQgRE9NLCBhbG9uZyB3aXRoXG4gICAqIGFueSBpbmhlcml0ZWQgY29udGV4dC4gRGVmYXVsdHMgdG8gdGhlIGdsb2JhbCBgZG9jdW1lbnRgLlxuICAgKi9cbiAgY3JlYXRpb25TY29wZT86IHtpbXBvcnROb2RlKG5vZGU6IE5vZGUsIGRlZXA/OiBib29sZWFuKTogTm9kZX07XG4gIC8qKlxuICAgKiBUaGUgaW5pdGlhbCBjb25uZWN0ZWQgc3RhdGUgZm9yIHRoZSB0b3AtbGV2ZWwgcGFydCBiZWluZyByZW5kZXJlZC4gSWYgbm9cbiAgICogYGlzQ29ubmVjdGVkYCBvcHRpb24gaXMgc2V0LCBgQXN5bmNEaXJlY3RpdmVgcyB3aWxsIGJlIGNvbm5lY3RlZCBieVxuICAgKiBkZWZhdWx0LiBTZXQgdG8gYGZhbHNlYCBpZiB0aGUgaW5pdGlhbCByZW5kZXIgb2NjdXJzIGluIGEgZGlzY29ubmVjdGVkIHRyZWVcbiAgICogYW5kIGBBc3luY0RpcmVjdGl2ZWBzIHNob3VsZCBzZWUgYGlzQ29ubmVjdGVkID09PSBmYWxzZWAgZm9yIHRoZWlyIGluaXRpYWxcbiAgICogcmVuZGVyLiBUaGUgYHBhcnQuc2V0Q29ubmVjdGVkKClgIG1ldGhvZCBtdXN0IGJlIHVzZWQgc3Vic2VxdWVudCB0byBpbml0aWFsXG4gICAqIHJlbmRlciB0byBjaGFuZ2UgdGhlIGNvbm5lY3RlZCBzdGF0ZSBvZiB0aGUgcGFydC5cbiAgICovXG4gIGlzQ29ubmVjdGVkPzogYm9vbGVhbjtcbn1cblxuY29uc3Qgd2Fsa2VyID0gZC5jcmVhdGVUcmVlV2Fsa2VyKFxuICBkLFxuICAxMjkgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR9ICovXG4pO1xuXG5sZXQgc2FuaXRpemVyRmFjdG9yeUludGVybmFsOiBTYW5pdGl6ZXJGYWN0b3J5ID0gbm9vcFNhbml0aXplcjtcblxuLy9cbi8vIENsYXNzZXMgb25seSBiZWxvdyBoZXJlLCBjb25zdCB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgb25seSBhYm92ZSBoZXJlLi4uXG4vL1xuLy8gS2VlcGluZyB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgYW5kIGNsYXNzZXMgdG9nZXRoZXIgaW1wcm92ZXMgbWluaWZpY2F0aW9uLlxuLy8gSW50ZXJmYWNlcyBhbmQgdHlwZSBhbGlhc2VzIGNhbiBiZSBpbnRlcmxlYXZlZCBmcmVlbHkuXG4vL1xuXG4vLyBUeXBlIGZvciBjbGFzc2VzIHRoYXQgaGF2ZSBhIGBfZGlyZWN0aXZlYCBvciBgX2RpcmVjdGl2ZXNbXWAgZmllbGQsIHVzZWQgYnlcbi8vIGByZXNvbHZlRGlyZWN0aXZlYFxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RpdmVQYXJlbnQge1xuICBfJHBhcmVudD86IERpcmVjdGl2ZVBhcmVudDtcbiAgXyRpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgX19kaXJlY3RpdmU/OiBEaXJlY3RpdmU7XG4gIF9fZGlyZWN0aXZlcz86IEFycmF5PERpcmVjdGl2ZSB8IHVuZGVmaW5lZD47XG59XG5cbmZ1bmN0aW9uIHRydXN0RnJvbVRlbXBsYXRlU3RyaW5nKFxuICB0c2E6IFRlbXBsYXRlU3RyaW5nc0FycmF5LFxuICBzdHJpbmdGcm9tVFNBOiBzdHJpbmdcbik6IFRydXN0ZWRIVE1MIHtcbiAgLy8gQSBzZWN1cml0eSBjaGVjayB0byBwcmV2ZW50IHNwb29maW5nIG9mIExpdCB0ZW1wbGF0ZSByZXN1bHRzLlxuICAvLyBJbiB0aGUgZnV0dXJlLCB3ZSBtYXkgYmUgYWJsZSB0byByZXBsYWNlIHRoaXMgd2l0aCBBcnJheS5pc1RlbXBsYXRlT2JqZWN0LFxuICAvLyB0aG91Z2ggd2UgbWlnaHQgbmVlZCB0byBtYWtlIHRoYXQgY2hlY2sgaW5zaWRlIG9mIHRoZSBodG1sIGFuZCBzdmdcbiAgLy8gZnVuY3Rpb25zLCBiZWNhdXNlIHByZWNvbXBpbGVkIHRlbXBsYXRlcyBkb24ndCBjb21lIGluIGFzXG4gIC8vIFRlbXBsYXRlU3RyaW5nQXJyYXkgb2JqZWN0cy5cbiAgaWYgKCFpc0FycmF5KHRzYSkgfHwgIXRzYS5oYXNPd25Qcm9wZXJ0eSgncmF3JykpIHtcbiAgICBsZXQgbWVzc2FnZSA9ICdpbnZhbGlkIHRlbXBsYXRlIHN0cmluZ3MgYXJyYXknO1xuICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgbWVzc2FnZSA9IGBcbiAgICAgICAgICBJbnRlcm5hbCBFcnJvcjogZXhwZWN0ZWQgdGVtcGxhdGUgc3RyaW5ncyB0byBiZSBhbiBhcnJheVxuICAgICAgICAgIHdpdGggYSAncmF3JyBmaWVsZC4gRmFraW5nIGEgdGVtcGxhdGUgc3RyaW5ncyBhcnJheSBieVxuICAgICAgICAgIGNhbGxpbmcgaHRtbCBvciBzdmcgbGlrZSBhbiBvcmRpbmFyeSBmdW5jdGlvbiBpcyBlZmZlY3RpdmVseVxuICAgICAgICAgIHRoZSBzYW1lIGFzIGNhbGxpbmcgdW5zYWZlSHRtbCBhbmQgY2FuIGxlYWQgdG8gbWFqb3Igc2VjdXJpdHlcbiAgICAgICAgICBpc3N1ZXMsIGUuZy4gb3BlbmluZyB5b3VyIGNvZGUgdXAgdG8gWFNTIGF0dGFja3MuXG4gICAgICAgICAgSWYgeW91J3JlIHVzaW5nIHRoZSBodG1sIG9yIHN2ZyB0YWdnZWQgdGVtcGxhdGUgZnVuY3Rpb25zIG5vcm1hbGx5XG4gICAgICAgICAgYW5kIHN0aWxsIHNlZWluZyB0aGlzIGVycm9yLCBwbGVhc2UgZmlsZSBhIGJ1ZyBhdFxuICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L2lzc3Vlcy9uZXc/dGVtcGxhdGU9YnVnX3JlcG9ydC5tZFxuICAgICAgICAgIGFuZCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgYnVpbGQgdG9vbGluZywgaWYgYW55LlxuICAgICAgICBgXG4gICAgICAgIC50cmltKClcbiAgICAgICAgLnJlcGxhY2UoL1xcbiAqL2csICdcXG4nKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBwb2xpY3kgIT09IHVuZGVmaW5lZFxuICAgID8gcG9saWN5LmNyZWF0ZUhUTUwoc3RyaW5nRnJvbVRTQSlcbiAgICA6IChzdHJpbmdGcm9tVFNBIGFzIHVua25vd24gYXMgVHJ1c3RlZEhUTUwpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSFRNTCBzdHJpbmcgZm9yIHRoZSBnaXZlbiBUZW1wbGF0ZVN0cmluZ3NBcnJheSBhbmQgcmVzdWx0IHR5cGVcbiAqIChIVE1MIG9yIFNWRyksIGFsb25nIHdpdGggdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpblxuICogdGVtcGxhdGUgb3JkZXIuIFRoZSBIVE1MIGNvbnRhaW5zIGNvbW1lbnQgbWFya2VycyBkZW5vdGluZyB0aGUgYENoaWxkUGFydGBzXG4gKiBhbmQgc3VmZml4ZXMgb24gYm91bmQgYXR0cmlidXRlcyBkZW5vdGluZyB0aGUgYEF0dHJpYnV0ZVBhcnRzYC5cbiAqXG4gKiBAcGFyYW0gc3RyaW5ncyB0ZW1wbGF0ZSBzdHJpbmdzIGFycmF5XG4gKiBAcGFyYW0gdHlwZSBIVE1MIG9yIFNWR1xuICogQHJldHVybiBBcnJheSBjb250YWluaW5nIGBbaHRtbCwgYXR0ck5hbWVzXWAgKGFycmF5IHJldHVybmVkIGZvciB0ZXJzZW5lc3MsXG4gKiAgICAgdG8gYXZvaWQgb2JqZWN0IGZpZWxkcyBzaW5jZSB0aGlzIGNvZGUgaXMgc2hhcmVkIHdpdGggbm9uLW1pbmlmaWVkIFNTUlxuICogICAgIGNvZGUpXG4gKi9cbmNvbnN0IGdldFRlbXBsYXRlSHRtbCA9IChcbiAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXksXG4gIHR5cGU6IFJlc3VsdFR5cGVcbik6IFtUcnVzdGVkSFRNTCwgQXJyYXk8c3RyaW5nPl0gPT4ge1xuICAvLyBJbnNlcnQgbWFrZXJzIGludG8gdGhlIHRlbXBsYXRlIEhUTUwgdG8gcmVwcmVzZW50IHRoZSBwb3NpdGlvbiBvZlxuICAvLyBiaW5kaW5ncy4gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzdHJpbmdzIHRvIGRldGVybWluZSB0aGVcbiAgLy8gc3ludGFjdGljIHBvc2l0aW9uIG9mIHRoZSBiaW5kaW5ncy4gVGhleSBjYW4gYmUgaW4gdGV4dCBwb3NpdGlvbiwgd2hlcmVcbiAgLy8gd2UgaW5zZXJ0IGFuIEhUTUwgY29tbWVudCwgYXR0cmlidXRlIHZhbHVlIHBvc2l0aW9uLCB3aGVyZSB3ZSBpbnNlcnQgYVxuICAvLyBzZW50aW5lbCBzdHJpbmcgYW5kIHJlLXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSwgb3IgaW5zaWRlIGEgdGFnIHdoZXJlXG4gIC8vIHdlIGluc2VydCB0aGUgc2VudGluZWwgc3RyaW5nLlxuICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAvLyBTdG9yZXMgdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpbiB0aGUgb3JkZXIgb2YgdGhlaXJcbiAgLy8gcGFydHMuIEVsZW1lbnRQYXJ0cyBhcmUgYWxzbyByZWZsZWN0ZWQgaW4gdGhpcyBhcnJheSBhcyB1bmRlZmluZWRcbiAgLy8gcmF0aGVyIHRoYW4gYSBzdHJpbmcsIHRvIGRpc2FtYmlndWF0ZSBmcm9tIGF0dHJpYnV0ZSBiaW5kaW5ncy5cbiAgY29uc3QgYXR0ck5hbWVzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGxldCBodG1sID1cbiAgICB0eXBlID09PSBTVkdfUkVTVUxUID8gJzxzdmc+JyA6IHR5cGUgPT09IE1BVEhNTF9SRVNVTFQgPyAnPG1hdGg+JyA6ICcnO1xuXG4gIC8vIFdoZW4gd2UncmUgaW5zaWRlIGEgcmF3IHRleHQgdGFnIChub3QgaXQncyB0ZXh0IGNvbnRlbnQpLCB0aGUgcmVnZXhcbiAgLy8gd2lsbCBzdGlsbCBiZSB0YWdSZWdleCBzbyB3ZSBjYW4gZmluZCBhdHRyaWJ1dGVzLCBidXQgd2lsbCBzd2l0Y2ggdG9cbiAgLy8gdGhpcyByZWdleCB3aGVuIHRoZSB0YWcgZW5kcy5cbiAgbGV0IHJhd1RleHRFbmRSZWdleDogUmVnRXhwIHwgdW5kZWZpbmVkO1xuXG4gIC8vIFRoZSBjdXJyZW50IHBhcnNpbmcgc3RhdGUsIHJlcHJlc2VudGVkIGFzIGEgcmVmZXJlbmNlIHRvIG9uZSBvZiB0aGVcbiAgLy8gcmVnZXhlc1xuICBsZXQgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBjb25zdCBzID0gc3RyaW5nc1tpXTtcbiAgICAvLyBUaGUgaW5kZXggb2YgdGhlIGVuZCBvZiB0aGUgbGFzdCBhdHRyaWJ1dGUgbmFtZS4gV2hlbiB0aGlzIGlzXG4gICAgLy8gcG9zaXRpdmUgYXQgZW5kIG9mIGEgc3RyaW5nLCBpdCBtZWFucyB3ZSdyZSBpbiBhbiBhdHRyaWJ1dGUgdmFsdWVcbiAgICAvLyBwb3NpdGlvbiBhbmQgbmVlZCB0byByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAgICAvLyBXZSBhbHNvIHVzZSBhIHNwZWNpYWwgdmFsdWUgb2YgLTIgdG8gaW5kaWNhdGUgdGhhdCB3ZSBlbmNvdW50ZXJlZFxuICAgIC8vIHRoZSBlbmQgb2YgYSBzdHJpbmcgaW4gYXR0cmlidXRlIG5hbWUgcG9zaXRpb24uXG4gICAgbGV0IGF0dHJOYW1lRW5kSW5kZXggPSAtMTtcbiAgICBsZXQgYXR0ck5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2ghOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuXG4gICAgLy8gVGhlIGNvbmRpdGlvbnMgaW4gdGhpcyBsb29wIGhhbmRsZSB0aGUgY3VycmVudCBwYXJzZSBzdGF0ZSwgYW5kIHRoZVxuICAgIC8vIGFzc2lnbm1lbnRzIHRvIHRoZSBgcmVnZXhgIHZhcmlhYmxlIGFyZSB0aGUgc3RhdGUgdHJhbnNpdGlvbnMuXG4gICAgd2hpbGUgKGxhc3RJbmRleCA8IHMubGVuZ3RoKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgd2Ugc3RhcnQgc2VhcmNoaW5nIGZyb20gd2hlcmUgd2UgcHJldmlvdXNseSBsZWZ0IG9mZlxuICAgICAgcmVnZXgubGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgbWF0Y2ggPSByZWdleC5leGVjKHMpO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGFzdEluZGV4ID0gcmVnZXgubGFzdEluZGV4O1xuICAgICAgaWYgKHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdID09PSAnIS0tJykge1xuICAgICAgICAgIHJlZ2V4ID0gY29tbWVudEVuZFJlZ2V4O1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBXZSBzdGFydGVkIGEgd2VpcmQgY29tbWVudCwgbGlrZSA8L3tcbiAgICAgICAgICByZWdleCA9IGNvbW1lbnQyRW5kUmVnZXg7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbVEFHX05BTUVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAocmF3VGV4dEVsZW1lbnQudGVzdChtYXRjaFtUQUdfTkFNRV0pKSB7XG4gICAgICAgICAgICAvLyBSZWNvcmQgaWYgd2UgZW5jb3VudGVyIGEgcmF3LXRleHQgZWxlbWVudC4gV2UnbGwgc3dpdGNoIHRvXG4gICAgICAgICAgICAvLyB0aGlzIHJlZ2V4IGF0IHRoZSBlbmQgb2YgdGhlIHRhZy5cbiAgICAgICAgICAgIHJhd1RleHRFbmRSZWdleCA9IG5ldyBSZWdFeHAoYDwvJHttYXRjaFtUQUdfTkFNRV19YCwgJ2cnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaFtEWU5BTUlDX1RBR19OQU1FXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICdCaW5kaW5ncyBpbiB0YWcgbmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2Ugc3RhdGljIHRlbXBsYXRlcyBpbnN0ZWFkLiAnICtcbiAgICAgICAgICAgICAgICAnU2VlIGh0dHBzOi8vbGl0LmRldi9kb2NzL3RlbXBsYXRlcy9leHByZXNzaW9ucy8jc3RhdGljLWV4cHJlc3Npb25zJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdleCA9PT0gdGFnRW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0VOVElSRV9NQVRDSF0gPT09ICc+Jykge1xuICAgICAgICAgIC8vIEVuZCBvZiBhIHRhZy4gSWYgd2UgaGFkIHN0YXJ0ZWQgYSByYXctdGV4dCBlbGVtZW50LCB1c2UgdGhhdFxuICAgICAgICAgIC8vIHJlZ2V4XG4gICAgICAgICAgcmVnZXggPSByYXdUZXh0RW5kUmVnZXggPz8gdGV4dEVuZFJlZ2V4O1xuICAgICAgICAgIC8vIFdlIG1heSBiZSBlbmRpbmcgYW4gdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLCBzbyBtYWtlIHN1cmUgd2VcbiAgICAgICAgICAvLyBjbGVhciBhbnkgcGVuZGluZyBhdHRyTmFtZUVuZEluZGV4XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IC0xO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0FUVFJJQlVURV9OQU1FXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gQXR0cmlidXRlIG5hbWUgcG9zaXRpb25cbiAgICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID0gLTI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IHJlZ2V4Lmxhc3RJbmRleCAtIG1hdGNoW1NQQUNFU19BTkRfRVFVQUxTXS5sZW5ndGg7XG4gICAgICAgICAgYXR0ck5hbWUgPSBtYXRjaFtBVFRSSUJVVEVfTkFNRV07XG4gICAgICAgICAgcmVnZXggPVxuICAgICAgICAgICAgbWF0Y2hbUVVPVEVfQ0hBUl0gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IHRhZ0VuZFJlZ2V4XG4gICAgICAgICAgICAgIDogbWF0Y2hbUVVPVEVfQ0hBUl0gPT09ICdcIidcbiAgICAgICAgICAgICAgICA/IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4XG4gICAgICAgICAgICAgICAgOiBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcmVnZXggPT09IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4IHx8XG4gICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleFxuICAgICAgKSB7XG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2V4ID09PSBjb21tZW50RW5kUmVnZXggfHwgcmVnZXggPT09IGNvbW1lbnQyRW5kUmVnZXgpIHtcbiAgICAgICAgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3Qgb25lIG9mIHRoZSBmaXZlIHN0YXRlIHJlZ2V4ZXMsIHNvIGl0IG11c3QgYmUgdGhlIGR5bmFtaWNhbGx5XG4gICAgICAgIC8vIGNyZWF0ZWQgcmF3IHRleHQgcmVnZXggYW5kIHdlJ3JlIGF0IHRoZSBjbG9zZSBvZiB0aGF0IGVsZW1lbnQuXG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICAgIHJhd1RleHRFbmRSZWdleCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgYSBhdHRyTmFtZUVuZEluZGV4LCB3aGljaCBpbmRpY2F0ZXMgdGhhdCB3ZSBzaG91bGRcbiAgICAgIC8vIHJld3JpdGUgdGhlIGF0dHJpYnV0ZSBuYW1lLCBhc3NlcnQgdGhhdCB3ZSdyZSBpbiBhIHZhbGlkIGF0dHJpYnV0ZVxuICAgICAgLy8gcG9zaXRpb24gLSBlaXRoZXIgaW4gYSB0YWcsIG9yIGEgcXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgIGNvbnNvbGUuYXNzZXJ0KFxuICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID09PSAtMSB8fFxuICAgICAgICAgIHJlZ2V4ID09PSB0YWdFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCxcbiAgICAgICAgJ3VuZXhwZWN0ZWQgcGFyc2Ugc3RhdGUgQidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gV2UgaGF2ZSBmb3VyIGNhc2VzOlxuICAgIC8vICAxLiBXZSdyZSBpbiB0ZXh0IHBvc2l0aW9uLCBhbmQgbm90IGluIGEgcmF3IHRleHQgZWxlbWVudFxuICAgIC8vICAgICAocmVnZXggPT09IHRleHRFbmRSZWdleCk6IGluc2VydCBhIGNvbW1lbnQgbWFya2VyLlxuICAgIC8vICAyLiBXZSBoYXZlIGEgbm9uLW5lZ2F0aXZlIGF0dHJOYW1lRW5kSW5kZXggd2hpY2ggbWVhbnMgd2UgbmVlZCB0b1xuICAgIC8vICAgICByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSB0byBhZGQgYSBib3VuZCBhdHRyaWJ1dGUgc3VmZml4LlxuICAgIC8vICAzLiBXZSdyZSBhdCB0aGUgbm9uLWZpcnN0IGJpbmRpbmcgaW4gYSBtdWx0aS1iaW5kaW5nIGF0dHJpYnV0ZSwgdXNlIGFcbiAgICAvLyAgICAgcGxhaW4gbWFya2VyLlxuICAgIC8vICA0LiBXZSdyZSBzb21ld2hlcmUgZWxzZSBpbnNpZGUgdGhlIHRhZy4gSWYgd2UncmUgaW4gYXR0cmlidXRlIG5hbWVcbiAgICAvLyAgICAgcG9zaXRpb24gKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yKSwgYWRkIGEgc2VxdWVudGlhbCBzdWZmaXggdG9cbiAgICAvLyAgICAgZ2VuZXJhdGUgYSB1bmlxdWUgYXR0cmlidXRlIG5hbWUuXG5cbiAgICAvLyBEZXRlY3QgYSBiaW5kaW5nIG5leHQgdG8gc2VsZi1jbG9zaW5nIHRhZyBlbmQgYW5kIGluc2VydCBhIHNwYWNlIHRvXG4gICAgLy8gc2VwYXJhdGUgdGhlIG1hcmtlciBmcm9tIHRoZSB0YWcgZW5kOlxuICAgIGNvbnN0IGVuZCA9XG4gICAgICByZWdleCA9PT0gdGFnRW5kUmVnZXggJiYgc3RyaW5nc1tpICsgMV0uc3RhcnRzV2l0aCgnLz4nKSA/ICcgJyA6ICcnO1xuICAgIGh0bWwgKz1cbiAgICAgIHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXhcbiAgICAgICAgPyBzICsgbm9kZU1hcmtlclxuICAgICAgICA6IGF0dHJOYW1lRW5kSW5kZXggPj0gMFxuICAgICAgICAgID8gKGF0dHJOYW1lcy5wdXNoKGF0dHJOYW1lISksXG4gICAgICAgICAgICBzLnNsaWNlKDAsIGF0dHJOYW1lRW5kSW5kZXgpICtcbiAgICAgICAgICAgICAgYm91bmRBdHRyaWJ1dGVTdWZmaXggK1xuICAgICAgICAgICAgICBzLnNsaWNlKGF0dHJOYW1lRW5kSW5kZXgpKSArXG4gICAgICAgICAgICBtYXJrZXIgK1xuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgOiBzICsgbWFya2VyICsgKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yID8gaSA6IGVuZCk7XG4gIH1cblxuICBjb25zdCBodG1sUmVzdWx0OiBzdHJpbmcgfCBUcnVzdGVkSFRNTCA9XG4gICAgaHRtbCArXG4gICAgKHN0cmluZ3NbbF0gfHwgJzw/PicpICtcbiAgICAodHlwZSA9PT0gU1ZHX1JFU1VMVCA/ICc8L3N2Zz4nIDogdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCA/ICc8L21hdGg+JyA6ICcnKTtcblxuICAvLyBSZXR1cm5lZCBhcyBhbiBhcnJheSBmb3IgdGVyc2VuZXNzXG4gIHJldHVybiBbdHJ1c3RGcm9tVGVtcGxhdGVTdHJpbmcoc3RyaW5ncywgaHRtbFJlc3VsdCksIGF0dHJOYW1lc107XG59O1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdHlwZSB7VGVtcGxhdGV9O1xuY2xhc3MgVGVtcGxhdGUge1xuICAvKiogQGludGVybmFsICovXG4gIGVsITogSFRNTFRlbXBsYXRlRWxlbWVudDtcblxuICBwYXJ0czogQXJyYXk8VGVtcGxhdGVQYXJ0PiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAge3N0cmluZ3MsIFsnXyRsaXRUeXBlJCddOiB0eXBlfTogVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0LFxuICAgIG9wdGlvbnM/OiBSZW5kZXJPcHRpb25zXG4gICkge1xuICAgIGxldCBub2RlOiBOb2RlIHwgbnVsbDtcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICBsZXQgYXR0ck5hbWVJbmRleCA9IDA7XG4gICAgY29uc3QgcGFydENvdW50ID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcblxuICAgIC8vIENyZWF0ZSB0ZW1wbGF0ZSBlbGVtZW50XG4gICAgY29uc3QgW2h0bWwsIGF0dHJOYW1lc10gPSBnZXRUZW1wbGF0ZUh0bWwoc3RyaW5ncywgdHlwZSk7XG4gICAgdGhpcy5lbCA9IFRlbXBsYXRlLmNyZWF0ZUVsZW1lbnQoaHRtbCwgb3B0aW9ucyk7XG4gICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gdGhpcy5lbC5jb250ZW50O1xuXG4gICAgLy8gUmUtcGFyZW50IFNWRyBvciBNYXRoTUwgbm9kZXMgaW50byB0ZW1wbGF0ZSByb290XG4gICAgaWYgKHR5cGUgPT09IFNWR19SRVNVTFQgfHwgdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuZWwuY29udGVudC5maXJzdENoaWxkITtcbiAgICAgIHdyYXBwZXIucmVwbGFjZVdpdGgoLi4ud3JhcHBlci5jaGlsZE5vZGVzKTtcbiAgICB9XG5cbiAgICAvLyBXYWxrIHRoZSB0ZW1wbGF0ZSB0byBmaW5kIGJpbmRpbmcgbWFya2VycyBhbmQgY3JlYXRlIFRlbXBsYXRlUGFydHNcbiAgICB3aGlsZSAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgIT09IG51bGwgJiYgcGFydHMubGVuZ3RoIDwgcGFydENvdW50KSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBpZiAoREVWX01PREUpIHtcbiAgICAgICAgICBjb25zdCB0YWcgPSAobm9kZSBhcyBFbGVtZW50KS5sb2NhbE5hbWU7XG4gICAgICAgICAgLy8gV2FybiBpZiBgdGV4dGFyZWFgIGluY2x1ZGVzIGFuIGV4cHJlc3Npb24gYW5kIHRocm93IGlmIGB0ZW1wbGF0ZWBcbiAgICAgICAgICAvLyBkb2VzIHNpbmNlIHRoZXNlIGFyZSBub3Qgc3VwcG9ydGVkLiBXZSBkbyB0aGlzIGJ5IGNoZWNraW5nXG4gICAgICAgICAgLy8gaW5uZXJIVE1MIGZvciBhbnl0aGluZyB0aGF0IGxvb2tzIGxpa2UgYSBtYXJrZXIuIFRoaXMgY2F0Y2hlc1xuICAgICAgICAgIC8vIGNhc2VzIGxpa2UgYmluZGluZ3MgaW4gdGV4dGFyZWEgdGhlcmUgbWFya2VycyB0dXJuIGludG8gdGV4dCBub2Rlcy5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvXig/OnRleHRhcmVhfHRlbXBsYXRlKSQvaSEudGVzdCh0YWcpICYmXG4gICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5pbm5lckhUTUwuaW5jbHVkZXMobWFya2VyKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbSA9XG4gICAgICAgICAgICAgIGBFeHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUgXFxgJHt0YWd9XFxgIGAgK1xuICAgICAgICAgICAgICBgZWxlbWVudHMuIFNlZSBodHRwczovL2xpdC5kZXYvbXNnL2V4cHJlc3Npb24taW4tJHt0YWd9IGZvciBtb3JlIGAgK1xuICAgICAgICAgICAgICBgaW5mb3JtYXRpb24uYDtcbiAgICAgICAgICAgIGlmICh0YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgICAgICAgfSBlbHNlIGlzc3VlV2FybmluZygnJywgbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBmb3IgYXR0ZW1wdGVkIGR5bmFtaWMgdGFnIG5hbWVzLCB3ZSBkb24ndFxuICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGJpbmRpbmdJbmRleCwgYW5kIGl0J2xsIGJlIG9mZiBieSAxIGluIHRoZSBlbGVtZW50XG4gICAgICAgIC8vIGFuZCBvZmYgYnkgdHdvIGFmdGVyIGl0LlxuICAgICAgICBpZiAoKG5vZGUgYXMgRWxlbWVudCkuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZU5hbWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChuYW1lLmVuZHNXaXRoKGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICBjb25zdCByZWFsTmFtZSA9IGF0dHJOYW1lc1thdHRyTmFtZUluZGV4KytdO1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZShuYW1lKSE7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSB2YWx1ZS5zcGxpdChtYXJrZXIpO1xuICAgICAgICAgICAgICBjb25zdCBtID0gLyhbLj9AXSk/KC4qKS8uZXhlYyhyZWFsTmFtZSkhO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBVFRSSUJVVEVfUEFSVCxcbiAgICAgICAgICAgICAgICBpbmRleDogbm9kZUluZGV4LFxuICAgICAgICAgICAgICAgIG5hbWU6IG1bMl0sXG4gICAgICAgICAgICAgICAgc3RyaW5nczogc3RhdGljcyxcbiAgICAgICAgICAgICAgICBjdG9yOlxuICAgICAgICAgICAgICAgICAgbVsxXSA9PT0gJy4nXG4gICAgICAgICAgICAgICAgICAgID8gUHJvcGVydHlQYXJ0XG4gICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJz8nXG4gICAgICAgICAgICAgICAgICAgICAgPyBCb29sZWFuQXR0cmlidXRlUGFydFxuICAgICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJ0AnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IEV2ZW50UGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBBdHRyaWJ1dGVQYXJ0LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLnN0YXJ0c1dpdGgobWFya2VyKSkge1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBFTEVNRU5UX1BBUlQsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5vZGVJbmRleCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IGJlbmNobWFyayB0aGUgcmVnZXggYWdhaW5zdCB0ZXN0aW5nIGZvciBlYWNoXG4gICAgICAgIC8vIG9mIHRoZSAzIHJhdyB0ZXh0IGVsZW1lbnQgbmFtZXMuXG4gICAgICAgIGlmIChyYXdUZXh0RWxlbWVudC50ZXN0KChub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWUpKSB7XG4gICAgICAgICAgLy8gRm9yIHJhdyB0ZXh0IGVsZW1lbnRzIHdlIG5lZWQgdG8gc3BsaXQgdGhlIHRleHQgY29udGVudCBvblxuICAgICAgICAgIC8vIG1hcmtlcnMsIGNyZWF0ZSBhIFRleHQgbm9kZSBmb3IgZWFjaCBzZWdtZW50LCBhbmQgY3JlYXRlXG4gICAgICAgICAgLy8gYSBUZW1wbGF0ZVBhcnQgZm9yIGVhY2ggbWFya2VyLlxuICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSAobm9kZSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCEuc3BsaXQobWFya2VyKTtcbiAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGxhc3RJbmRleCA+IDApIHtcbiAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnRleHRDb250ZW50ID0gdHJ1c3RlZFR5cGVzXG4gICAgICAgICAgICAgID8gKHRydXN0ZWRUeXBlcy5lbXB0eVNjcmlwdCBhcyB1bmtub3duIGFzICcnKVxuICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdGV4dCBub2RlIGZvciBlYWNoIGxpdGVyYWwgc2VjdGlvblxuICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3IgY2hpbGQgcGFydHNcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkuYXBwZW5kKHN0cmluZ3NbaV0sIGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgICAgICAgLy8gV2FsayBwYXN0IHRoZSBtYXJrZXIgbm9kZSB3ZSBqdXN0IGFkZGVkXG4gICAgICAgICAgICAgIHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHt0eXBlOiBDSElMRF9QQVJULCBpbmRleDogKytub2RlSW5kZXh9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdGUgYmVjYXVzZSB0aGlzIG1hcmtlciBpcyBhZGRlZCBhZnRlciB0aGUgd2Fsa2VyJ3MgY3VycmVudFxuICAgICAgICAgICAgLy8gbm9kZSwgaXQgd2lsbCBiZSB3YWxrZWQgdG8gaW4gdGhlIG91dGVyIGxvb3AgKGFuZCBpZ25vcmVkKSwgc29cbiAgICAgICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gYWRqdXN0IG5vZGVJbmRleCBoZXJlXG4gICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5hcHBlbmQoc3RyaW5nc1tsYXN0SW5kZXhdLCBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IChub2RlIGFzIENvbW1lbnQpLmRhdGE7XG4gICAgICAgIGlmIChkYXRhID09PSBtYXJrZXJNYXRjaCkge1xuICAgICAgICAgIHBhcnRzLnB1c2goe3R5cGU6IENISUxEX1BBUlQsIGluZGV4OiBub2RlSW5kZXh9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgaSA9IC0xO1xuICAgICAgICAgIHdoaWxlICgoaSA9IChub2RlIGFzIENvbW1lbnQpLmRhdGEuaW5kZXhPZihtYXJrZXIsIGkgKyAxKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBDb21tZW50IG5vZGUgaGFzIGEgYmluZGluZyBtYXJrZXIgaW5zaWRlLCBtYWtlIGFuIGluYWN0aXZlIHBhcnRcbiAgICAgICAgICAgIC8vIFRoZSBiaW5kaW5nIHdvbid0IHdvcmssIGJ1dCBzdWJzZXF1ZW50IGJpbmRpbmdzIHdpbGxcbiAgICAgICAgICAgIHBhcnRzLnB1c2goe3R5cGU6IENPTU1FTlRfUEFSVCwgaW5kZXg6IG5vZGVJbmRleH0pO1xuICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgZW5kIG9mIHRoZSBtYXRjaFxuICAgICAgICAgICAgaSArPSBtYXJrZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vZGVJbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgZHVwbGljYXRlIGF0dHJpYnV0ZSBvbiBhIHRhZywgdGhlbiB3aGVuIHRoZSB0YWcgaXNcbiAgICAgIC8vIHBhcnNlZCBpbnRvIGFuIGVsZW1lbnQgdGhlIGF0dHJpYnV0ZSBnZXRzIGRlLWR1cGxpY2F0ZWQuIFdlIGNhbiBkZXRlY3RcbiAgICAgIC8vIHRoaXMgbWlzbWF0Y2ggaWYgd2UgaGF2ZW4ndCBwcmVjaXNlbHkgY29uc3VtZWQgZXZlcnkgYXR0cmlidXRlIG5hbWVcbiAgICAgIC8vIHdoZW4gcHJlcGFyaW5nIHRoZSB0ZW1wbGF0ZS4gVGhpcyB3b3JrcyBiZWNhdXNlIGBhdHRyTmFtZXNgIGlzIGJ1aWx0XG4gICAgICAvLyBmcm9tIHRoZSB0ZW1wbGF0ZSBzdHJpbmcgYW5kIGBhdHRyTmFtZUluZGV4YCBjb21lcyBmcm9tIHByb2Nlc3NpbmcgdGhlXG4gICAgICAvLyByZXN1bHRpbmcgRE9NLlxuICAgICAgaWYgKGF0dHJOYW1lcy5sZW5ndGggIT09IGF0dHJOYW1lSW5kZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEZXRlY3RlZCBkdXBsaWNhdGUgYXR0cmlidXRlIGJpbmRpbmdzLiBUaGlzIG9jY3VycyBpZiB5b3VyIHRlbXBsYXRlIGAgK1xuICAgICAgICAgICAgYGhhcyBkdXBsaWNhdGUgYXR0cmlidXRlcyBvbiBhbiBlbGVtZW50IHRhZy4gRm9yIGV4YW1wbGUgYCArXG4gICAgICAgICAgICBgXCI8aW5wdXQgP2Rpc2FibGVkPVxcJHt0cnVlfSA/ZGlzYWJsZWQ9XFwke2ZhbHNlfT5cIiBjb250YWlucyBhIGAgK1xuICAgICAgICAgICAgYGR1cGxpY2F0ZSBcImRpc2FibGVkXCIgYXR0cmlidXRlLiBUaGUgZXJyb3Igd2FzIGRldGVjdGVkIGluIGAgK1xuICAgICAgICAgICAgYHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6IFxcbmAgK1xuICAgICAgICAgICAgJ2AnICtcbiAgICAgICAgICAgIHN0cmluZ3Muam9pbignJHsuLi59JykgK1xuICAgICAgICAgICAgJ2AnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgY291bGQgc2V0IHdhbGtlci5jdXJyZW50Tm9kZSB0byBhbm90aGVyIG5vZGUgaGVyZSB0byBwcmV2ZW50IGEgbWVtb3J5XG4gICAgLy8gbGVhaywgYnV0IGV2ZXJ5IHRpbWUgd2UgcHJlcGFyZSBhIHRlbXBsYXRlLCB3ZSBpbW1lZGlhdGVseSByZW5kZXIgaXRcbiAgICAvLyBhbmQgcmUtdXNlIHRoZSB3YWxrZXIgaW4gbmV3IFRlbXBsYXRlSW5zdGFuY2UuX2Nsb25lKCkuXG4gICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBwcmVwJyxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMsXG4gICAgICAgIGNsb25hYmxlVGVtcGxhdGU6IHRoaXMuZWwsXG4gICAgICAgIHBhcnRzOiB0aGlzLnBhcnRzLFxuICAgICAgICBzdHJpbmdzLFxuICAgICAgfSk7XG4gIH1cblxuICAvLyBPdmVycmlkZGVuIHZpYSBgbGl0SHRtbFBvbHlmaWxsU3VwcG9ydGAgdG8gcHJvdmlkZSBwbGF0Zm9ybSBzdXBwb3J0LlxuICAvKiogQG5vY29sbGFwc2UgKi9cbiAgc3RhdGljIGNyZWF0ZUVsZW1lbnQoaHRtbDogVHJ1c3RlZEhUTUwsIF9vcHRpb25zPzogUmVuZGVyT3B0aW9ucykge1xuICAgIGNvbnN0IGVsID0gZC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgIGVsLmlubmVySFRNTCA9IGh0bWwgYXMgdW5rbm93biBhcyBzdHJpbmc7XG4gICAgcmV0dXJuIGVsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzY29ubmVjdGFibGUge1xuICBfJHBhcmVudD86IERpc2Nvbm5lY3RhYmxlO1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+O1xuICAvLyBSYXRoZXIgdGhhbiBob2xkIGNvbm5lY3Rpb24gc3RhdGUgb24gaW5zdGFuY2VzLCBEaXNjb25uZWN0YWJsZXMgcmVjdXJzaXZlbHlcbiAgLy8gZmV0Y2ggdGhlIGNvbm5lY3Rpb24gc3RhdGUgZnJvbSB0aGUgUm9vdFBhcnQgdGhleSBhcmUgY29ubmVjdGVkIGluIHZpYVxuICAvLyBnZXR0ZXJzIHVwIHRoZSBEaXNjb25uZWN0YWJsZSB0cmVlIHZpYSBfJHBhcmVudCByZWZlcmVuY2VzLiBUaGlzIHB1c2hlcyB0aGVcbiAgLy8gY29zdCBvZiB0cmFja2luZyB0aGUgaXNDb25uZWN0ZWQgc3RhdGUgdG8gYEFzeW5jRGlyZWN0aXZlc2AsIGFuZCBhdm9pZHNcbiAgLy8gbmVlZGluZyB0byBwYXNzIGFsbCBEaXNjb25uZWN0YWJsZXMgKHBhcnRzLCB0ZW1wbGF0ZSBpbnN0YW5jZXMsIGFuZFxuICAvLyBkaXJlY3RpdmVzKSB0aGVpciBjb25uZWN0aW9uIHN0YXRlIGVhY2ggdGltZSBpdCBjaGFuZ2VzLCB3aGljaCB3b3VsZCBiZVxuICAvLyBjb3N0bHkgZm9yIHRyZWVzIHRoYXQgaGF2ZSBubyBBc3luY0RpcmVjdGl2ZXMuXG4gIF8kaXNDb25uZWN0ZWQ6IGJvb2xlYW47XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVEaXJlY3RpdmUoXG4gIHBhcnQ6IENoaWxkUGFydCB8IEF0dHJpYnV0ZVBhcnQgfCBFbGVtZW50UGFydCxcbiAgdmFsdWU6IHVua25vd24sXG4gIHBhcmVudDogRGlyZWN0aXZlUGFyZW50ID0gcGFydCxcbiAgYXR0cmlidXRlSW5kZXg/OiBudW1iZXJcbik6IHVua25vd24ge1xuICAvLyBCYWlsIGVhcmx5IGlmIHRoZSB2YWx1ZSBpcyBleHBsaWNpdGx5IG5vQ2hhbmdlLiBOb3RlLCB0aGlzIG1lYW5zIGFueVxuICAvLyBuZXN0ZWQgZGlyZWN0aXZlIGlzIHN0aWxsIGF0dGFjaGVkIGFuZCBpcyBub3QgcnVuLlxuICBpZiAodmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGxldCBjdXJyZW50RGlyZWN0aXZlID1cbiAgICBhdHRyaWJ1dGVJbmRleCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IChwYXJlbnQgYXMgQXR0cmlidXRlUGFydCkuX19kaXJlY3RpdmVzPy5bYXR0cmlidXRlSW5kZXhdXG4gICAgICA6IChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgRWxlbWVudFBhcnQgfCBEaXJlY3RpdmUpLl9fZGlyZWN0aXZlO1xuICBjb25zdCBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IgPSBpc1ByaW1pdGl2ZSh2YWx1ZSlcbiAgICA/IHVuZGVmaW5lZFxuICAgIDogLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICAgICh2YWx1ZSBhcyBEaXJlY3RpdmVSZXN1bHQpWydfJGxpdERpcmVjdGl2ZSQnXTtcbiAgaWYgKGN1cnJlbnREaXJlY3RpdmU/LmNvbnN0cnVjdG9yICE9PSBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IpIHtcbiAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIGN1cnJlbnREaXJlY3RpdmU/LlsnXyRub3RpZnlEaXJlY3RpdmVDb25uZWN0aW9uQ2hhbmdlZCddPy4oZmFsc2UpO1xuICAgIGlmIChuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VycmVudERpcmVjdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudERpcmVjdGl2ZSA9IG5ldyBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IocGFydCBhcyBQYXJ0SW5mbyk7XG4gICAgICBjdXJyZW50RGlyZWN0aXZlLl8kaW5pdGlhbGl6ZShwYXJ0LCBwYXJlbnQsIGF0dHJpYnV0ZUluZGV4KTtcbiAgICB9XG4gICAgaWYgKGF0dHJpYnV0ZUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICgocGFyZW50IGFzIEF0dHJpYnV0ZVBhcnQpLl9fZGlyZWN0aXZlcyA/Pz0gW10pW2F0dHJpYnV0ZUluZGV4XSA9XG4gICAgICAgIGN1cnJlbnREaXJlY3RpdmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgRGlyZWN0aXZlKS5fX2RpcmVjdGl2ZSA9IGN1cnJlbnREaXJlY3RpdmU7XG4gICAgfVxuICB9XG4gIGlmIChjdXJyZW50RGlyZWN0aXZlICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IHJlc29sdmVEaXJlY3RpdmUoXG4gICAgICBwYXJ0LFxuICAgICAgY3VycmVudERpcmVjdGl2ZS5fJHJlc29sdmUocGFydCwgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCkudmFsdWVzKSxcbiAgICAgIGN1cnJlbnREaXJlY3RpdmUsXG4gICAgICBhdHRyaWJ1dGVJbmRleFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgdHlwZSB7VGVtcGxhdGVJbnN0YW5jZX07XG4vKipcbiAqIEFuIHVwZGF0ZWFibGUgaW5zdGFuY2Ugb2YgYSBUZW1wbGF0ZS4gSG9sZHMgcmVmZXJlbmNlcyB0byB0aGUgUGFydHMgdXNlZCB0b1xuICogdXBkYXRlIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZS5cbiAqL1xuY2xhc3MgVGVtcGxhdGVJbnN0YW5jZSBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgXyR0ZW1wbGF0ZTogVGVtcGxhdGU7XG4gIF8kcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+ID0gW107XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHBhcmVudDogQ2hpbGRQYXJ0O1xuICAvKiogQGludGVybmFsICovXG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT4gPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IodGVtcGxhdGU6IFRlbXBsYXRlLCBwYXJlbnQ6IENoaWxkUGFydCkge1xuICAgIHRoaXMuXyR0ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gIH1cblxuICAvLyBDYWxsZWQgYnkgQ2hpbGRQYXJ0IHBhcmVudE5vZGUgZ2V0dGVyXG4gIGdldCBwYXJlbnROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50LnBhcmVudE5vZGU7XG4gIH1cblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Ll8kaXNDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBUaGlzIG1ldGhvZCBpcyBzZXBhcmF0ZSBmcm9tIHRoZSBjb25zdHJ1Y3RvciBiZWNhdXNlIHdlIG5lZWQgdG8gcmV0dXJuIGFcbiAgLy8gRG9jdW1lbnRGcmFnbWVudCBhbmQgd2UgZG9uJ3Qgd2FudCB0byBob2xkIG9udG8gaXQgd2l0aCBhbiBpbnN0YW5jZSBmaWVsZC5cbiAgX2Nsb25lKG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCB7XG4gICAgICBlbDoge2NvbnRlbnR9LFxuICAgICAgcGFydHM6IHBhcnRzLFxuICAgIH0gPSB0aGlzLl8kdGVtcGxhdGU7XG4gICAgY29uc3QgZnJhZ21lbnQgPSAob3B0aW9ucz8uY3JlYXRpb25TY29wZSA/PyBkKS5pbXBvcnROb2RlKGNvbnRlbnQsIHRydWUpO1xuICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGZyYWdtZW50O1xuXG4gICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSE7XG4gICAgbGV0IG5vZGVJbmRleCA9IDA7XG4gICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgbGV0IHRlbXBsYXRlUGFydCA9IHBhcnRzWzBdO1xuXG4gICAgd2hpbGUgKHRlbXBsYXRlUGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAobm9kZUluZGV4ID09PSB0ZW1wbGF0ZVBhcnQuaW5kZXgpIHtcbiAgICAgICAgbGV0IHBhcnQ6IFBhcnQgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0ZW1wbGF0ZVBhcnQudHlwZSA9PT0gQ0hJTERfUEFSVCkge1xuICAgICAgICAgIHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgICAgICAgbm9kZSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIG5vZGUubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVQYXJ0LnR5cGUgPT09IEFUVFJJQlVURV9QQVJUKSB7XG4gICAgICAgICAgcGFydCA9IG5ldyB0ZW1wbGF0ZVBhcnQuY3RvcihcbiAgICAgICAgICAgIG5vZGUgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhcnQubmFtZSxcbiAgICAgICAgICAgIHRlbXBsYXRlUGFydC5zdHJpbmdzLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlUGFydC50eXBlID09PSBFTEVNRU5UX1BBUlQpIHtcbiAgICAgICAgICBwYXJ0ID0gbmV3IEVsZW1lbnRQYXJ0KG5vZGUgYXMgSFRNTEVsZW1lbnQsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuXyRwYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICB0ZW1wbGF0ZVBhcnQgPSBwYXJ0c1srK3BhcnRJbmRleF07XG4gICAgICB9XG4gICAgICBpZiAobm9kZUluZGV4ICE9PSB0ZW1wbGF0ZVBhcnQ/LmluZGV4KSB7XG4gICAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSE7XG4gICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBXZSBuZWVkIHRvIHNldCB0aGUgY3VycmVudE5vZGUgYXdheSBmcm9tIHRoZSBjbG9uZWQgdHJlZSBzbyB0aGF0IHdlXG4gICAgLy8gZG9uJ3QgaG9sZCBvbnRvIHRoZSB0cmVlIGV2ZW4gaWYgdGhlIHRyZWUgaXMgZGV0YWNoZWQgYW5kIHNob3VsZCBiZVxuICAgIC8vIGZyZWVkLlxuICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGQ7XG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG5cbiAgX3VwZGF0ZSh2YWx1ZXM6IEFycmF5PHVua25vd24+KSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLl8kcGFydHMpIHtcbiAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAga2luZDogJ3NldCBwYXJ0JyxcbiAgICAgICAgICAgIHBhcnQsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVzW2ldLFxuICAgICAgICAgICAgdmFsdWVJbmRleDogaSxcbiAgICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICAgIHRlbXBsYXRlSW5zdGFuY2U6IHRoaXMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIGlmICgocGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5zdHJpbmdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAocGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5fJHNldFZhbHVlKHZhbHVlcywgcGFydCBhcyBBdHRyaWJ1dGVQYXJ0LCBpKTtcbiAgICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHZhbHVlcyB0aGUgcGFydCBjb25zdW1lcyBpcyBwYXJ0LnN0cmluZ3MubGVuZ3RoIC0gMVxuICAgICAgICAgIC8vIHNpbmNlIHZhbHVlcyBhcmUgaW4gYmV0d2VlbiB0ZW1wbGF0ZSBzcGFucy4gV2UgaW5jcmVtZW50IGkgYnkgMVxuICAgICAgICAgIC8vIGxhdGVyIGluIHRoZSBsb29wLCBzbyBpbmNyZW1lbnQgaXQgYnkgcGFydC5zdHJpbmdzLmxlbmd0aCAtIDIgaGVyZVxuICAgICAgICAgIGkgKz0gKHBhcnQgYXMgQXR0cmlidXRlUGFydCkuc3RyaW5ncyEubGVuZ3RoIC0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0Ll8kc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cbiAgfVxufVxuXG4vKlxuICogUGFydHNcbiAqL1xudHlwZSBBdHRyaWJ1dGVUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBBVFRSSUJVVEVfUEFSVDtcbiAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBjdG9yOiB0eXBlb2YgQXR0cmlidXRlUGFydDtcbiAgcmVhZG9ubHkgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xufTtcbnR5cGUgQ2hpbGRUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBDSElMRF9QQVJUO1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xufTtcbnR5cGUgRWxlbWVudFRlbXBsYXRlUGFydCA9IHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIEVMRU1FTlRfUEFSVDtcbiAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcbn07XG50eXBlIENvbW1lbnRUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBDT01NRU5UX1BBUlQ7XG4gIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEEgVGVtcGxhdGVQYXJ0IHJlcHJlc2VudHMgYSBkeW5hbWljIHBhcnQgaW4gYSB0ZW1wbGF0ZSwgYmVmb3JlIHRoZSB0ZW1wbGF0ZVxuICogaXMgaW5zdGFudGlhdGVkLiBXaGVuIGEgdGVtcGxhdGUgaXMgaW5zdGFudGlhdGVkIFBhcnRzIGFyZSBjcmVhdGVkIGZyb21cbiAqIFRlbXBsYXRlUGFydHMuXG4gKi9cbnR5cGUgVGVtcGxhdGVQYXJ0ID1cbiAgfCBDaGlsZFRlbXBsYXRlUGFydFxuICB8IEF0dHJpYnV0ZVRlbXBsYXRlUGFydFxuICB8IEVsZW1lbnRUZW1wbGF0ZVBhcnRcbiAgfCBDb21tZW50VGVtcGxhdGVQYXJ0O1xuXG5leHBvcnQgdHlwZSBQYXJ0ID1cbiAgfCBDaGlsZFBhcnRcbiAgfCBBdHRyaWJ1dGVQYXJ0XG4gIHwgUHJvcGVydHlQYXJ0XG4gIHwgQm9vbGVhbkF0dHJpYnV0ZVBhcnRcbiAgfCBFbGVtZW50UGFydFxuICB8IEV2ZW50UGFydDtcblxuZXhwb3J0IHR5cGUge0NoaWxkUGFydH07XG5jbGFzcyBDaGlsZFBhcnQgaW1wbGVtZW50cyBEaXNjb25uZWN0YWJsZSB7XG4gIHJlYWRvbmx5IHR5cGUgPSBDSElMRF9QQVJUO1xuICByZWFkb25seSBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICBfJGNvbW1pdHRlZFZhbHVlOiB1bmtub3duID0gbm90aGluZztcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfX2RpcmVjdGl2ZT86IERpcmVjdGl2ZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHN0YXJ0Tm9kZTogQ2hpbGROb2RlO1xuICAvKiogQGludGVybmFsICovXG4gIF8kZW5kTm9kZTogQ2hpbGROb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBfdGV4dFNhbml0aXplcjogVmFsdWVTYW5pdGl6ZXIgfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlIHwgdW5kZWZpbmVkO1xuICAvKipcbiAgICogQ29ubmVjdGlvbiBzdGF0ZSBmb3IgUm9vdFBhcnRzIG9ubHkgKGkuZS4gQ2hpbGRQYXJ0IHdpdGhvdXQgXyRwYXJlbnRcbiAgICogcmV0dXJuZWQgZnJvbSB0b3AtbGV2ZWwgYHJlbmRlcmApLiBUaGlzIGZpZWxkIGlzIHVudXNlZCBvdGhlcndpc2UuIFRoZVxuICAgKiBpbnRlbnRpb24gd291bGQgYmUgY2xlYXJlciBpZiB3ZSBtYWRlIGBSb290UGFydGAgYSBzdWJjbGFzcyBvZiBgQ2hpbGRQYXJ0YFxuICAgKiB3aXRoIHRoaXMgZmllbGQgKGFuZCBhIGRpZmZlcmVudCBfJGlzQ29ubmVjdGVkIGdldHRlciksIGJ1dCB0aGUgc3ViY2xhc3NcbiAgICogY2F1c2VkIGEgcGVyZiByZWdyZXNzaW9uLCBwb3NzaWJseSBkdWUgdG8gbWFraW5nIGNhbGwgc2l0ZXMgcG9seW1vcnBoaWMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX19pc0Nvbm5lY3RlZDogYm9vbGVhbjtcblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIC8vIENoaWxkUGFydHMgdGhhdCBhcmUgbm90IGF0IHRoZSByb290IHNob3VsZCBhbHdheXMgYmUgY3JlYXRlZCB3aXRoIGFcbiAgICAvLyBwYXJlbnQ7IG9ubHkgUm9vdENoaWxkTm9kZSdzIHdvbid0LCBzbyB0aGV5IHJldHVybiB0aGUgbG9jYWwgaXNDb25uZWN0ZWRcbiAgICAvLyBzdGF0ZVxuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Py5fJGlzQ29ubmVjdGVkID8/IHRoaXMuX19pc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIFRoZSBmb2xsb3dpbmcgZmllbGRzIHdpbGwgYmUgcGF0Y2hlZCBvbnRvIENoaWxkUGFydHMgd2hlbiByZXF1aXJlZCBieVxuICAvLyBBc3luY0RpcmVjdGl2ZVxuICAvKiogQGludGVybmFsICovXG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT4gPSB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8oXG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW4sXG4gICAgcmVtb3ZlRnJvbVBhcmVudD86IGJvb2xlYW4sXG4gICAgZnJvbT86IG51bWJlclxuICApOiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF8kcmVwYXJlbnREaXNjb25uZWN0YWJsZXM/KHBhcmVudDogRGlzY29ubmVjdGFibGUpOiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXJ0Tm9kZTogQ2hpbGROb2RlLFxuICAgIGVuZE5vZGU6IENoaWxkTm9kZSB8IG51bGwsXG4gICAgcGFyZW50OiBUZW1wbGF0ZUluc3RhbmNlIHwgQ2hpbGRQYXJ0IHwgdW5kZWZpbmVkLFxuICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgdGhpcy5fJHN0YXJ0Tm9kZSA9IHN0YXJ0Tm9kZTtcbiAgICB0aGlzLl8kZW5kTm9kZSA9IGVuZE5vZGU7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIE5vdGUgX19pc0Nvbm5lY3RlZCBpcyBvbmx5IGV2ZXIgYWNjZXNzZWQgb24gUm9vdFBhcnRzIChpLmUuIHdoZW4gdGhlcmUgaXNcbiAgICAvLyBubyBfJHBhcmVudCk7IHRoZSB2YWx1ZSBvbiBhIG5vbi1yb290LXBhcnQgaXMgXCJkb24ndCBjYXJlXCIsIGJ1dCBjaGVja2luZ1xuICAgIC8vIGZvciBwYXJlbnQgd291bGQgYmUgbW9yZSBjb2RlXG4gICAgdGhpcy5fX2lzQ29ubmVjdGVkID0gb3B0aW9ucz8uaXNDb25uZWN0ZWQgPz8gdHJ1ZTtcbiAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAvLyBFeHBsaWNpdGx5IGluaXRpYWxpemUgZm9yIGNvbnNpc3RlbnQgY2xhc3Mgc2hhcGUuXG4gICAgICB0aGlzLl90ZXh0U2FuaXRpemVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcGFyZW50IG5vZGUgaW50byB3aGljaCB0aGUgcGFydCByZW5kZXJzIGl0cyBjb250ZW50LlxuICAgKlxuICAgKiBBIENoaWxkUGFydCdzIGNvbnRlbnQgY29uc2lzdHMgb2YgYSByYW5nZSBvZiBhZGphY2VudCBjaGlsZCBub2RlcyBvZlxuICAgKiBgLnBhcmVudE5vZGVgLCBwb3NzaWJseSBib3JkZXJlZCBieSAnbWFya2VyIG5vZGVzJyAoYC5zdGFydE5vZGVgIGFuZFxuICAgKiBgLmVuZE5vZGVgKS5cbiAgICpcbiAgICogLSBJZiBib3RoIGAuc3RhcnROb2RlYCBhbmQgYC5lbmROb2RlYCBhcmUgbm9uLW51bGwsIHRoZW4gdGhlIHBhcnQncyBjb250ZW50XG4gICAqIGNvbnNpc3RzIG9mIGFsbCBzaWJsaW5ncyBiZXR3ZWVuIGAuc3RhcnROb2RlYCBhbmQgYC5lbmROb2RlYCwgZXhjbHVzaXZlbHkuXG4gICAqXG4gICAqIC0gSWYgYC5zdGFydE5vZGVgIGlzIG5vbi1udWxsIGJ1dCBgLmVuZE5vZGVgIGlzIG51bGwsIHRoZW4gdGhlIHBhcnQnc1xuICAgKiBjb250ZW50IGNvbnNpc3RzIG9mIGFsbCBzaWJsaW5ncyBmb2xsb3dpbmcgYC5zdGFydE5vZGVgLCB1cCB0byBhbmRcbiAgICogaW5jbHVkaW5nIHRoZSBsYXN0IGNoaWxkIG9mIGAucGFyZW50Tm9kZWAuIElmIGAuZW5kTm9kZWAgaXMgbm9uLW51bGwsIHRoZW5cbiAgICogYC5zdGFydE5vZGVgIHdpbGwgYWx3YXlzIGJlIG5vbi1udWxsLlxuICAgKlxuICAgKiAtIElmIGJvdGggYC5lbmROb2RlYCBhbmQgYC5zdGFydE5vZGVgIGFyZSBudWxsLCB0aGVuIHRoZSBwYXJ0J3MgY29udGVudFxuICAgKiBjb25zaXN0cyBvZiBhbGwgY2hpbGQgbm9kZXMgb2YgYC5wYXJlbnROb2RlYC5cbiAgICovXG4gIGdldCBwYXJlbnROb2RlKCk6IE5vZGUge1xuICAgIGxldCBwYXJlbnROb2RlOiBOb2RlID0gd3JhcCh0aGlzLl8kc3RhcnROb2RlKS5wYXJlbnROb2RlITtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl8kcGFyZW50O1xuICAgIGlmIChcbiAgICAgIHBhcmVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBwYXJlbnROb2RlPy5ub2RlVHlwZSA9PT0gMTEgLyogTm9kZS5ET0NVTUVOVF9GUkFHTUVOVCAqL1xuICAgICkge1xuICAgICAgLy8gSWYgdGhlIHBhcmVudE5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LCBpdCBtYXkgYmUgYmVjYXVzZSB0aGUgRE9NIGlzXG4gICAgICAvLyBzdGlsbCBpbiB0aGUgY2xvbmVkIGZyYWdtZW50IGR1cmluZyBpbml0aWFsIHJlbmRlcjsgaWYgc28sIGdldCB0aGUgcmVhbFxuICAgICAgLy8gcGFyZW50Tm9kZSB0aGUgcGFydCB3aWxsIGJlIGNvbW1pdHRlZCBpbnRvIGJ5IGFza2luZyB0aGUgcGFyZW50LlxuICAgICAgcGFyZW50Tm9kZSA9IChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgVGVtcGxhdGVJbnN0YW5jZSkucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBhcnQncyBsZWFkaW5nIG1hcmtlciBub2RlLCBpZiBhbnkuIFNlZSBgLnBhcmVudE5vZGVgIGZvciBtb3JlXG4gICAqIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgZ2V0IHN0YXJ0Tm9kZSgpOiBOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuXyRzdGFydE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBhcnQncyB0cmFpbGluZyBtYXJrZXIgbm9kZSwgaWYgYW55LiBTZWUgYC5wYXJlbnROb2RlYCBmb3IgbW9yZVxuICAgKiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGdldCBlbmROb2RlKCk6IE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fJGVuZE5vZGU7XG4gIH1cblxuICBfJHNldFZhbHVlKHZhbHVlOiB1bmtub3duLCBkaXJlY3RpdmVQYXJlbnQ6IERpcmVjdGl2ZVBhcmVudCA9IHRoaXMpOiB2b2lkIHtcbiAgICBpZiAoREVWX01PREUgJiYgdGhpcy5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUaGlzIFxcYENoaWxkUGFydFxcYCBoYXMgbm8gXFxgcGFyZW50Tm9kZVxcYCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBhY2NlcHQgYSB2YWx1ZS4gVGhpcyBsaWtlbHkgbWVhbnMgdGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGUgcGFydCB3YXMgbWFuaXB1bGF0ZWQgaW4gYW4gdW5zdXBwb3J0ZWQgd2F5IG91dHNpZGUgb2YgTGl0J3MgY29udHJvbCBzdWNoIHRoYXQgdGhlIHBhcnQncyBtYXJrZXIgbm9kZXMgd2VyZSBlamVjdGVkIGZyb20gRE9NLiBGb3IgZXhhbXBsZSwgc2V0dGluZyB0aGUgZWxlbWVudCdzIFxcYGlubmVySFRNTFxcYCBvciBcXGB0ZXh0Q29udGVudFxcYCBjYW4gZG8gdGhpcy5gXG4gICAgICApO1xuICAgIH1cbiAgICB2YWx1ZSA9IHJlc29sdmVEaXJlY3RpdmUodGhpcywgdmFsdWUsIGRpcmVjdGl2ZVBhcmVudCk7XG4gICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgLy8gTm9uLXJlbmRlcmluZyBjaGlsZCB2YWx1ZXMuIEl0J3MgaW1wb3J0YW50IHRoYXQgdGhlc2UgZG8gbm90IHJlbmRlclxuICAgICAgLy8gZW1wdHkgdGV4dCBub2RlcyB0byBhdm9pZCBpc3N1ZXMgd2l0aCBwcmV2ZW50aW5nIGRlZmF1bHQgPHNsb3Q+XG4gICAgICAvLyBmYWxsYmFjayBjb250ZW50LlxuICAgICAgaWYgKHZhbHVlID09PSBub3RoaW5nIHx8IHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIGlmICh0aGlzLl8kY29tbWl0dGVkVmFsdWUgIT09IG5vdGhpbmcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICAgICAga2luZDogJ2NvbW1pdCBub3RoaW5nIHRvIGNoaWxkJyxcbiAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMuXyRzdGFydE5vZGUsXG4gICAgICAgICAgICAgIGVuZDogdGhpcy5fJGVuZE5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudDogdGhpcy5fJHBhcmVudCxcbiAgICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fJGNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gbm90aGluZztcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAmJiB2YWx1ZSAhPT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIH0gZWxzZSBpZiAoKHZhbHVlIGFzIFRlbXBsYXRlUmVzdWx0KVsnXyRsaXRUeXBlJCddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NvbW1pdFRlbXBsYXRlUmVzdWx0KHZhbHVlIGFzIFRlbXBsYXRlUmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKCh2YWx1ZSBhcyBOb2RlKS5ub2RlVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoREVWX01PREUgJiYgdGhpcy5vcHRpb25zPy5ob3N0ID09PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jb21taXRUZXh0KFxuICAgICAgICAgIGBbcHJvYmFibGUgbWlzdGFrZTogcmVuZGVyZWQgYSB0ZW1wbGF0ZSdzIGhvc3QgaW4gaXRzZWxmIGAgK1xuICAgICAgICAgICAgYChjb21tb25seSBjYXVzZWQgYnkgd3JpdGluZyBcXCR7dGhpc30gaW4gYSB0ZW1wbGF0ZV1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgQXR0ZW1wdGVkIHRvIHJlbmRlciB0aGUgdGVtcGxhdGUgaG9zdGAsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgYGluc2lkZSBpdHNlbGYuIFRoaXMgaXMgYWxtb3N0IGFsd2F5cyBhIG1pc3Rha2UsIGFuZCBpbiBkZXYgbW9kZSBgLFxuICAgICAgICAgIGB3ZSByZW5kZXIgc29tZSB3YXJuaW5nIHRleHQuIEluIHByb2R1Y3Rpb24gaG93ZXZlciwgd2UnbGwgYCxcbiAgICAgICAgICBgcmVuZGVyIGl0LCB3aGljaCB3aWxsIHVzdWFsbHkgcmVzdWx0IGluIGFuIGVycm9yLCBhbmQgc29tZXRpbWVzIGAsXG4gICAgICAgICAgYGluIHRoZSBlbGVtZW50IGRpc2FwcGVhcmluZyBmcm9tIHRoZSBET00uYFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9jb21taXROb2RlKHZhbHVlIGFzIE5vZGUpO1xuICAgIH0gZWxzZSBpZiAoaXNJdGVyYWJsZSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuX2NvbW1pdEl0ZXJhYmxlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2ssIHdpbGwgcmVuZGVyIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgIHRoaXMuX2NvbW1pdFRleHQodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2luc2VydDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkge1xuICAgIHJldHVybiB3cmFwKHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkucGFyZW50Tm9kZSEpLmluc2VydEJlZm9yZShcbiAgICAgIG5vZGUsXG4gICAgICB0aGlzLl8kZW5kTm9kZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9jb21taXROb2RlKHZhbHVlOiBOb2RlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuXyRjbGVhcigpO1xuICAgICAgaWYgKFxuICAgICAgICBFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MgJiZcbiAgICAgICAgc2FuaXRpemVyRmFjdG9yeUludGVybmFsICE9PSBub29wU2FuaXRpemVyXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgcGFyZW50Tm9kZU5hbWUgPSB0aGlzLl8kc3RhcnROb2RlLnBhcmVudE5vZGU/Lm5vZGVOYW1lO1xuICAgICAgICBpZiAocGFyZW50Tm9kZU5hbWUgPT09ICdTVFlMRScgfHwgcGFyZW50Tm9kZU5hbWUgPT09ICdTQ1JJUFQnKSB7XG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnRm9yYmlkZGVuJztcbiAgICAgICAgICBpZiAoREVWX01PREUpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlTmFtZSA9PT0gJ1NUWUxFJykge1xuICAgICAgICAgICAgICBtZXNzYWdlID1cbiAgICAgICAgICAgICAgICBgTGl0IGRvZXMgbm90IHN1cHBvcnQgYmluZGluZyBpbnNpZGUgc3R5bGUgbm9kZXMuIGAgK1xuICAgICAgICAgICAgICAgIGBUaGlzIGlzIGEgc2VjdXJpdHkgcmlzaywgYXMgc3R5bGUgaW5qZWN0aW9uIGF0dGFja3MgY2FuIGAgK1xuICAgICAgICAgICAgICAgIGBleGZpbHRyYXRlIGRhdGEgYW5kIHNwb29mIFVJcy4gYCArXG4gICAgICAgICAgICAgICAgYENvbnNpZGVyIGluc3RlYWQgdXNpbmcgY3NzXFxgLi4uXFxgIGxpdGVyYWxzIGAgK1xuICAgICAgICAgICAgICAgIGB0byBjb21wb3NlIHN0eWxlcywgYW5kIGRvIGR5bmFtaWMgc3R5bGluZyB3aXRoIGAgK1xuICAgICAgICAgICAgICAgIGBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIDo6cGFydHMsIDxzbG90PnMsIGAgK1xuICAgICAgICAgICAgICAgIGBhbmQgYnkgbXV0YXRpbmcgdGhlIERPTSByYXRoZXIgdGhhbiBzdHlsZXNoZWV0cy5gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSA9XG4gICAgICAgICAgICAgICAgYExpdCBkb2VzIG5vdCBzdXBwb3J0IGJpbmRpbmcgaW5zaWRlIHNjcmlwdCBub2Rlcy4gYCArXG4gICAgICAgICAgICAgICAgYFRoaXMgaXMgYSBzZWN1cml0eSByaXNrLCBhcyBpdCBjb3VsZCBhbGxvdyBhcmJpdHJhcnkgYCArXG4gICAgICAgICAgICAgICAgYGNvZGUgZXhlY3V0aW9uLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAnY29tbWl0IG5vZGUnLFxuICAgICAgICAgIHN0YXJ0OiB0aGlzLl8kc3RhcnROb2RlLFxuICAgICAgICAgIHBhcmVudDogdGhpcy5fJHBhcmVudCxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IHRoaXMuX2luc2VydCh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY29tbWl0VGV4dCh2YWx1ZTogdW5rbm93bik6IHZvaWQge1xuICAgIC8vIElmIHRoZSBjb21taXR0ZWQgdmFsdWUgaXMgYSBwcmltaXRpdmUgaXQgbWVhbnMgd2UgY2FsbGVkIF9jb21taXRUZXh0IG9uXG4gICAgLy8gdGhlIHByZXZpb3VzIHJlbmRlciwgYW5kIHdlIGtub3cgdGhhdCB0aGlzLl8kc3RhcnROb2RlLm5leHRTaWJsaW5nIGlzIGFcbiAgICAvLyBUZXh0IG5vZGUuIFdlIGNhbiBub3cganVzdCByZXBsYWNlIHRoZSB0ZXh0IGNvbnRlbnQgKC5kYXRhKSBvZiB0aGUgbm9kZS5cbiAgICBpZiAoXG4gICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgIT09IG5vdGhpbmcgJiZcbiAgICAgIGlzUHJpbWl0aXZlKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSlcbiAgICApIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB3cmFwKHRoaXMuXyRzdGFydE5vZGUpLm5leHRTaWJsaW5nIGFzIFRleHQ7XG4gICAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXh0U2FuaXRpemVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLl90ZXh0U2FuaXRpemVyID0gY3JlYXRlU2FuaXRpemVyKG5vZGUsICdkYXRhJywgJ3Byb3BlcnR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLl90ZXh0U2FuaXRpemVyKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JyxcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAobm9kZSBhcyBUZXh0KS5kYXRhID0gdmFsdWUgYXMgc3RyaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gZC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICAgIHRoaXMuX2NvbW1pdE5vZGUodGV4dE5vZGUpO1xuICAgICAgICAvLyBXaGVuIHNldHRpbmcgdGV4dCBjb250ZW50LCBmb3Igc2VjdXJpdHkgcHVycG9zZXMgaXQgbWF0dGVycyBhIGxvdFxuICAgICAgICAvLyB3aGF0IHRoZSBwYXJlbnQgaXMuIEZvciBleGFtcGxlLCA8c3R5bGU+IGFuZCA8c2NyaXB0PiBuZWVkIHRvIGJlXG4gICAgICAgIC8vIGhhbmRsZWQgd2l0aCBjYXJlLCB3aGlsZSA8c3Bhbj4gZG9lcyBub3QuIFNvIGZpcnN0IHdlIG5lZWQgdG8gcHV0IGFcbiAgICAgICAgLy8gdGV4dCBub2RlIGludG8gdGhlIGRvY3VtZW50LCB0aGVuIHdlIGNhbiBzYW5pdGl6ZSBpdHMgY29udGVudC5cbiAgICAgICAgaWYgKHRoaXMuX3RleHRTYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuX3RleHRTYW5pdGl6ZXIgPSBjcmVhdGVTYW5pdGl6ZXIodGV4dE5vZGUsICdkYXRhJywgJ3Byb3BlcnR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLl90ZXh0U2FuaXRpemVyKHZhbHVlKTtcbiAgICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JyxcbiAgICAgICAgICAgIG5vZGU6IHRleHROb2RlLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIHRleHROb2RlLmRhdGEgPSB2YWx1ZSBhcyBzdHJpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb21taXROb2RlKGQuY3JlYXRlVGV4dE5vZGUodmFsdWUgYXMgc3RyaW5nKSk7XG4gICAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICAgIGtpbmQ6ICdjb21taXQgdGV4dCcsXG4gICAgICAgICAgICBub2RlOiB3cmFwKHRoaXMuXyRzdGFydE5vZGUpLm5leHRTaWJsaW5nIGFzIFRleHQsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBwcml2YXRlIF9jb21taXRUZW1wbGF0ZVJlc3VsdChcbiAgICByZXN1bHQ6IFRlbXBsYXRlUmVzdWx0IHwgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdFxuICApOiB2b2lkIHtcbiAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIGNvbnN0IHt2YWx1ZXMsIFsnXyRsaXRUeXBlJCddOiB0eXBlfSA9IHJlc3VsdDtcbiAgICAvLyBJZiAkbGl0VHlwZSQgaXMgYSBudW1iZXIsIHJlc3VsdCBpcyBhIHBsYWluIFRlbXBsYXRlUmVzdWx0IGFuZCB3ZSBnZXRcbiAgICAvLyB0aGUgdGVtcGxhdGUgZnJvbSB0aGUgdGVtcGxhdGUgY2FjaGUuIElmIG5vdCwgcmVzdWx0IGlzIGFcbiAgICAvLyBDb21waWxlZFRlbXBsYXRlUmVzdWx0IGFuZCBfJGxpdFR5cGUkIGlzIGEgQ29tcGlsZWRUZW1wbGF0ZSBhbmQgd2UgbmVlZFxuICAgIC8vIHRvIGNyZWF0ZSB0aGUgPHRlbXBsYXRlPiBlbGVtZW50IHRoZSBmaXJzdCB0aW1lIHdlIHNlZSBpdC5cbiAgICBjb25zdCB0ZW1wbGF0ZTogVGVtcGxhdGUgfCBDb21waWxlZFRlbXBsYXRlID1cbiAgICAgIHR5cGVvZiB0eXBlID09PSAnbnVtYmVyJ1xuICAgICAgICA/IHRoaXMuXyRnZXRUZW1wbGF0ZShyZXN1bHQgYXMgVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0KVxuICAgICAgICA6ICh0eXBlLmVsID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICh0eXBlLmVsID0gVGVtcGxhdGUuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgdHJ1c3RGcm9tVGVtcGxhdGVTdHJpbmcodHlwZS5oLCB0eXBlLmhbMF0pLFxuICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgICkpLFxuICAgICAgICAgIHR5cGUpO1xuXG4gICAgaWYgKCh0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgVGVtcGxhdGVJbnN0YW5jZSk/Ll8kdGVtcGxhdGUgPT09IHRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSB1cGRhdGluZycsXG4gICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgaW5zdGFuY2U6IHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBUZW1wbGF0ZUluc3RhbmNlLFxuICAgICAgICAgIHBhcnRzOiAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIFRlbXBsYXRlSW5zdGFuY2UpLl8kcGFydHMsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgfSk7XG4gICAgICAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIFRlbXBsYXRlSW5zdGFuY2UpLl91cGRhdGUodmFsdWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVGVtcGxhdGVJbnN0YW5jZSh0ZW1wbGF0ZSBhcyBUZW1wbGF0ZSwgdGhpcyk7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSh0aGlzLm9wdGlvbnMpO1xuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAndGVtcGxhdGUgaW5zdGFudGlhdGVkJyxcbiAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICBwYXJ0czogaW5zdGFuY2UuXyRwYXJ0cyxcbiAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICB9KTtcbiAgICAgIGluc3RhbmNlLl91cGRhdGUodmFsdWVzKTtcbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ3RlbXBsYXRlIGluc3RhbnRpYXRlZCBhbmQgdXBkYXRlZCcsXG4gICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgcGFydHM6IGluc3RhbmNlLl8kcGFydHMsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgIGZyYWdtZW50LFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgfSk7XG4gICAgICB0aGlzLl9jb21taXROb2RlKGZyYWdtZW50KTtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IGluc3RhbmNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIE92ZXJyaWRkZW4gdmlhIGBsaXRIdG1sUG9seWZpbGxTdXBwb3J0YCB0byBwcm92aWRlIHBsYXRmb3JtIHN1cHBvcnQuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRnZXRUZW1wbGF0ZShyZXN1bHQ6IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCkge1xuICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGVtcGxhdGVDYWNoZS5zZXQocmVzdWx0LnN0cmluZ3MsICh0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQpKSk7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbW1pdEl0ZXJhYmxlKHZhbHVlOiBJdGVyYWJsZTx1bmtub3duPik6IHZvaWQge1xuICAgIC8vIEZvciBhbiBJdGVyYWJsZSwgd2UgY3JlYXRlIGEgbmV3IEluc3RhbmNlUGFydCBwZXIgaXRlbSwgdGhlbiBzZXQgaXRzXG4gICAgLy8gdmFsdWUgdG8gdGhlIGl0ZW0uIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9mIG92ZXJoZWFkIGZvciBldmVyeSBpdGVtIGluXG4gICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgLy8gb2YgVGVtcGxhdGVSZXN1bHRzIHRoYXQgd2lsbCBiZSBjb21tb25seSByZXR1cm5lZCBmcm9tIGV4cHJlc3Npb25zIGxpa2U6XG4gICAgLy8gYXJyYXkubWFwKChpKSA9PiBodG1sYCR7aX1gKSwgYnkgcmV1c2luZyBleGlzdGluZyBUZW1wbGF0ZUluc3RhbmNlcy5cblxuICAgIC8vIElmIHZhbHVlIGlzIGFuIGFycmF5LCB0aGVuIHRoZSBwcmV2aW91cyByZW5kZXIgd2FzIG9mIGFuXG4gICAgLy8gaXRlcmFibGUgYW5kIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgQ2hpbGRQYXJ0cyBmcm9tIHRoZSBwcmV2aW91c1xuICAgIC8vIHJlbmRlci4gSWYgdmFsdWUgaXMgbm90IGFuIGFycmF5LCBjbGVhciB0aGlzIHBhcnQgYW5kIG1ha2UgYSBuZXdcbiAgICAvLyBhcnJheSBmb3IgQ2hpbGRQYXJ0cy5cbiAgICBpZiAoIWlzQXJyYXkodGhpcy5fJGNvbW1pdHRlZFZhbHVlKSkge1xuICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gW107XG4gICAgICB0aGlzLl8kY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyBMZXRzIHVzIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaXRlbXMgd2Ugc3RhbXBlZCBzbyB3ZSBjYW4gY2xlYXIgbGVmdG92ZXJcbiAgICAvLyBpdGVtcyBmcm9tIGEgcHJldmlvdXMgcmVuZGVyXG4gICAgY29uc3QgaXRlbVBhcnRzID0gdGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIENoaWxkUGFydFtdO1xuICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgIGxldCBpdGVtUGFydDogQ2hpbGRQYXJ0IHwgdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICBpZiAocGFydEluZGV4ID09PSBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIElmIG5vIGV4aXN0aW5nIHBhcnQsIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IHRlc3QgcGVyZiBpbXBhY3Qgb2YgYWx3YXlzIGNyZWF0aW5nIHR3byBwYXJ0c1xuICAgICAgICAvLyBpbnN0ZWFkIG9mIHNoYXJpbmcgcGFydHMgYmV0d2VlbiBub2Rlc1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGl0L2xpdC9pc3N1ZXMvMTI2NlxuICAgICAgICBpdGVtUGFydHMucHVzaChcbiAgICAgICAgICAoaXRlbVBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0KGNyZWF0ZU1hcmtlcigpKSxcbiAgICAgICAgICAgIHRoaXMuX2luc2VydChjcmVhdGVNYXJrZXIoKSksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zXG4gICAgICAgICAgKSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldXNlIGFuIGV4aXN0aW5nIHBhcnRcbiAgICAgICAgaXRlbVBhcnQgPSBpdGVtUGFydHNbcGFydEluZGV4XTtcbiAgICAgIH1cbiAgICAgIGl0ZW1QYXJ0Ll8kc2V0VmFsdWUoaXRlbSk7XG4gICAgICBwYXJ0SW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAocGFydEluZGV4IDwgaXRlbVBhcnRzLmxlbmd0aCkge1xuICAgICAgLy8gaXRlbVBhcnRzIGFsd2F5cyBoYXZlIGVuZCBub2Rlc1xuICAgICAgdGhpcy5fJGNsZWFyKFxuICAgICAgICBpdGVtUGFydCAmJiB3cmFwKGl0ZW1QYXJ0Ll8kZW5kTm9kZSEpLm5leHRTaWJsaW5nLFxuICAgICAgICBwYXJ0SW5kZXhcbiAgICAgICk7XG4gICAgICAvLyBUcnVuY2F0ZSB0aGUgcGFydHMgYXJyYXkgc28gX3ZhbHVlIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICBpdGVtUGFydHMubGVuZ3RoID0gcGFydEluZGV4O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBub2RlcyBjb250YWluZWQgd2l0aGluIHRoaXMgUGFydCBmcm9tIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydCBTdGFydCBub2RlIHRvIGNsZWFyIGZyb20sIGZvciBjbGVhcmluZyBhIHN1YnNldCBvZiB0aGUgcGFydCdzXG4gICAqICAgICBET00gKHVzZWQgd2hlbiB0cnVuY2F0aW5nIGl0ZXJhYmxlcylcbiAgICogQHBhcmFtIGZyb20gIFdoZW4gYHN0YXJ0YCBpcyBzcGVjaWZpZWQsIHRoZSBpbmRleCB3aXRoaW4gdGhlIGl0ZXJhYmxlIGZyb21cbiAgICogICAgIHdoaWNoIENoaWxkUGFydHMgYXJlIGJlaW5nIHJlbW92ZWQsIHVzZWQgZm9yIGRpc2Nvbm5lY3RpbmcgZGlyZWN0aXZlc1xuICAgKiAgICAgaW4gdGhvc2UgUGFydHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgXyRjbGVhcihcbiAgICBzdGFydDogQ2hpbGROb2RlIHwgbnVsbCA9IHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkubmV4dFNpYmxpbmcsXG4gICAgZnJvbT86IG51bWJlclxuICApIHtcbiAgICB0aGlzLl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQ/LihmYWxzZSwgdHJ1ZSwgZnJvbSk7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSB0aGlzLl8kZW5kTm9kZSkge1xuICAgICAgLy8gVGhlIG5vbi1udWxsIGFzc2VydGlvbiBpcyBzYWZlIGJlY2F1c2UgaWYgXyRzdGFydE5vZGUubmV4dFNpYmxpbmcgaXNcbiAgICAgIC8vIG51bGwsIHRoZW4gXyRlbmROb2RlIGlzIGFsc28gbnVsbCwgYW5kIHdlIHdvdWxkIG5vdCBoYXZlIGVudGVyZWQgdGhpc1xuICAgICAgLy8gbG9vcC5cbiAgICAgIGNvbnN0IG4gPSB3cmFwKHN0YXJ0ISkubmV4dFNpYmxpbmc7XG4gICAgICB3cmFwKHN0YXJ0ISkucmVtb3ZlKCk7XG4gICAgICBzdGFydCA9IG47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIFJvb3RQYXJ0J3MgYGlzQ29ubmVjdGVkYC4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kXG4gICAqIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBgUm9vdFBhcnRgcyAodGhlIGBDaGlsZFBhcnRgIHJldHVybmVkIGZyb20gYVxuICAgKiB0b3AtbGV2ZWwgYHJlbmRlcigpYCBjYWxsKS4gSXQgaGFzIG5vIGVmZmVjdCBvbiBub24tcm9vdCBDaGlsZFBhcnRzLlxuICAgKiBAcGFyYW0gaXNDb25uZWN0ZWQgV2hldGhlciB0byBzZXRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRDb25uZWN0ZWQoaXNDb25uZWN0ZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5fJHBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9faXNDb25uZWN0ZWQgPSBpc0Nvbm5lY3RlZDtcbiAgICAgIHRoaXMuXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8uKGlzQ29ubmVjdGVkKTtcbiAgICB9IGVsc2UgaWYgKERFVl9NT0RFKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdwYXJ0LnNldENvbm5lY3RlZCgpIG1heSBvbmx5IGJlIGNhbGxlZCBvbiBhICcgK1xuICAgICAgICAgICdSb290UGFydCByZXR1cm5lZCBmcm9tIHJlbmRlcigpLidcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQSB0b3AtbGV2ZWwgYENoaWxkUGFydGAgcmV0dXJuZWQgZnJvbSBgcmVuZGVyYCB0aGF0IG1hbmFnZXMgdGhlIGNvbm5lY3RlZFxuICogc3RhdGUgb2YgYEFzeW5jRGlyZWN0aXZlYHMgY3JlYXRlZCB0aHJvdWdob3V0IHRoZSB0cmVlIGJlbG93IGl0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvb3RQYXJ0IGV4dGVuZHMgQ2hpbGRQYXJ0IHtcbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbm5lY3Rpb24gc3RhdGUgZm9yIGBBc3luY0RpcmVjdGl2ZWBzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyByb290XG4gICAqIENoaWxkUGFydC5cbiAgICpcbiAgICogbGl0LWh0bWwgZG9lcyBub3QgYXV0b21hdGljYWxseSBtb25pdG9yIHRoZSBjb25uZWN0ZWRuZXNzIG9mIERPTSByZW5kZXJlZDtcbiAgICogYXMgc3VjaCwgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBjYWxsZXIgdG8gYHJlbmRlcmAgdG8gZW5zdXJlIHRoYXRcbiAgICogYHBhcnQuc2V0Q29ubmVjdGVkKGZhbHNlKWAgaXMgY2FsbGVkIGJlZm9yZSB0aGUgcGFydCBvYmplY3QgaXMgcG90ZW50aWFsbHlcbiAgICogZGlzY2FyZGVkLCB0byBlbnN1cmUgdGhhdCBgQXN5bmNEaXJlY3RpdmVgcyBoYXZlIGEgY2hhbmNlIHRvIGRpc3Bvc2Ugb2ZcbiAgICogYW55IHJlc291cmNlcyBiZWluZyBoZWxkLiBJZiBhIGBSb290UGFydGAgdGhhdCB3YXMgcHJldmlvdXNseVxuICAgKiBkaXNjb25uZWN0ZWQgaXMgc3Vic2VxdWVudGx5IHJlLWNvbm5lY3RlZCAoYW5kIGl0cyBgQXN5bmNEaXJlY3RpdmVgcyBzaG91bGRcbiAgICogcmUtY29ubmVjdCksIGBzZXRDb25uZWN0ZWQodHJ1ZSlgIHNob3VsZCBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBwYXJhbSBpc0Nvbm5lY3RlZCBXaGV0aGVyIGRpcmVjdGl2ZXMgd2l0aGluIHRoaXMgdHJlZSBzaG91bGQgYmUgY29ubmVjdGVkXG4gICAqIG9yIG5vdFxuICAgKi9cbiAgc2V0Q29ubmVjdGVkKGlzQ29ubmVjdGVkOiBib29sZWFuKTogdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUge0F0dHJpYnV0ZVBhcnR9O1xuY2xhc3MgQXR0cmlidXRlUGFydCBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgcmVhZG9ubHkgdHlwZTpcbiAgICB8IHR5cGVvZiBBVFRSSUJVVEVfUEFSVFxuICAgIHwgdHlwZW9mIFBST1BFUlRZX1BBUlRcbiAgICB8IHR5cGVvZiBCT09MRUFOX0FUVFJJQlVURV9QQVJUXG4gICAgfCB0eXBlb2YgRVZFTlRfUEFSVCA9IEFUVFJJQlVURV9QQVJUO1xuICByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBJZiB0aGlzIGF0dHJpYnV0ZSBwYXJ0IHJlcHJlc2VudHMgYW4gaW50ZXJwb2xhdGlvbiwgdGhpcyBjb250YWlucyB0aGVcbiAgICogc3RhdGljIHN0cmluZ3Mgb2YgdGhlIGludGVycG9sYXRpb24uIEZvciBzaW5nbGUtdmFsdWUsIGNvbXBsZXRlIGJpbmRpbmdzLFxuICAgKiB0aGlzIGlzIHVuZGVmaW5lZC5cbiAgICovXG4gIHJlYWRvbmx5IHN0cmluZ3M/OiBSZWFkb25seUFycmF5PHN0cmluZz47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRjb21taXR0ZWRWYWx1ZTogdW5rbm93biB8IEFycmF5PHVua25vd24+ID0gbm90aGluZztcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfX2RpcmVjdGl2ZXM/OiBBcnJheTxEaXJlY3RpdmUgfCB1bmRlZmluZWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF8kcGFyZW50OiBEaXNjb25uZWN0YWJsZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+ID0gdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBfc2FuaXRpemVyOiBWYWx1ZVNhbml0aXplciB8IHVuZGVmaW5lZDtcblxuICBnZXQgdGFnTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gIH1cblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Ll8kaXNDb25uZWN0ZWQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUsXG4gICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZFxuICApIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmIChzdHJpbmdzLmxlbmd0aCA+IDIgfHwgc3RyaW5nc1swXSAhPT0gJycgfHwgc3RyaW5nc1sxXSAhPT0gJycpIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5ldyBBcnJheShzdHJpbmdzLmxlbmd0aCAtIDEpLmZpbGwobmV3IFN0cmluZygpKTtcbiAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5vdGhpbmc7XG4gICAgfVxuICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgIHRoaXMuX3Nhbml0aXplciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhpcyBwYXJ0IGJ5IHJlc29sdmluZyB0aGUgdmFsdWUgZnJvbSBwb3NzaWJseSBtdWx0aXBsZVxuICAgKiB2YWx1ZXMgYW5kIHN0YXRpYyBzdHJpbmdzIGFuZCBjb21taXR0aW5nIGl0IHRvIHRoZSBET00uXG4gICAqIElmIHRoaXMgcGFydCBpcyBzaW5nbGUtdmFsdWVkLCBgdGhpcy5fc3RyaW5nc2Agd2lsbCBiZSB1bmRlZmluZWQsIGFuZCB0aGVcbiAgICogbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgdmFsdWUgYXJndW1lbnQuIElmIHRoaXMgcGFydCBpc1xuICAgKiBtdWx0aS12YWx1ZSwgYHRoaXMuX3N0cmluZ3NgIHdpbGwgYmUgZGVmaW5lZCwgYW5kIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAqIHdpdGggdGhlIHZhbHVlIGFycmF5IG9mIHRoZSBwYXJ0J3Mgb3duaW5nIFRlbXBsYXRlSW5zdGFuY2UsIGFuZCBhbiBvZmZzZXRcbiAgICogaW50byB0aGUgdmFsdWUgYXJyYXkgZnJvbSB3aGljaCB0aGUgdmFsdWVzIHNob3VsZCBiZSByZWFkLlxuICAgKiBUaGlzIG1ldGhvZCBpcyBvdmVybG9hZGVkIHRoaXMgd2F5IHRvIGVsaW1pbmF0ZSBzaG9ydC1saXZlZCBhcnJheSBzbGljZXNcbiAgICogb2YgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHZhbHVlcywgYW5kIGFsbG93IGEgZmFzdC1wYXRoIGZvciBzaW5nbGUtdmFsdWVkXG4gICAqIHBhcnRzLlxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHBhcnQgdmFsdWUsIG9yIGFuIGFycmF5IG9mIHZhbHVlcyBmb3IgbXVsdGktdmFsdWVkIHBhcnRzXG4gICAqIEBwYXJhbSB2YWx1ZUluZGV4IHRoZSBpbmRleCB0byBzdGFydCByZWFkaW5nIHZhbHVlcyBmcm9tLiBgdW5kZWZpbmVkYCBmb3JcbiAgICogICBzaW5nbGUtdmFsdWVkIHBhcnRzXG4gICAqIEBwYXJhbSBub0NvbW1pdCBjYXVzZXMgdGhlIHBhcnQgdG8gbm90IGNvbW1pdCBpdHMgdmFsdWUgdG8gdGhlIERPTS4gVXNlZFxuICAgKiAgIGluIGh5ZHJhdGlvbiB0byBwcmltZSBhdHRyaWJ1dGUgcGFydHMgd2l0aCB0aGVpciBmaXJzdC1yZW5kZXJlZCB2YWx1ZSxcbiAgICogICBidXQgbm90IHNldCB0aGUgYXR0cmlidXRlLCBhbmQgaW4gU1NSIHRvIG5vLW9wIHRoZSBET00gb3BlcmF0aW9uIGFuZFxuICAgKiAgIGNhcHR1cmUgdGhlIHZhbHVlIGZvciBzZXJpYWxpemF0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF8kc2V0VmFsdWUoXG4gICAgdmFsdWU6IHVua25vd24gfCBBcnJheTx1bmtub3duPixcbiAgICBkaXJlY3RpdmVQYXJlbnQ6IERpcmVjdGl2ZVBhcmVudCA9IHRoaXMsXG4gICAgdmFsdWVJbmRleD86IG51bWJlcixcbiAgICBub0NvbW1pdD86IGJvb2xlYW5cbiAgKSB7XG4gICAgY29uc3Qgc3RyaW5ncyA9IHRoaXMuc3RyaW5ncztcblxuICAgIC8vIFdoZXRoZXIgYW55IG9mIHRoZSB2YWx1ZXMgaGFzIGNoYW5nZWQsIGZvciBkaXJ0eS1jaGVja2luZ1xuICAgIGxldCBjaGFuZ2UgPSBmYWxzZTtcblxuICAgIGlmIChzdHJpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbmdsZS12YWx1ZSBiaW5kaW5nIGNhc2VcbiAgICAgIHZhbHVlID0gcmVzb2x2ZURpcmVjdGl2ZSh0aGlzLCB2YWx1ZSwgZGlyZWN0aXZlUGFyZW50LCAwKTtcbiAgICAgIGNoYW5nZSA9XG4gICAgICAgICFpc1ByaW1pdGl2ZSh2YWx1ZSkgfHxcbiAgICAgICAgKHZhbHVlICE9PSB0aGlzLl8kY29tbWl0dGVkVmFsdWUgJiYgdmFsdWUgIT09IG5vQ2hhbmdlKTtcbiAgICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEludGVycG9sYXRpb24gY2FzZVxuICAgICAgY29uc3QgdmFsdWVzID0gdmFsdWUgYXMgQXJyYXk8dW5rbm93bj47XG4gICAgICB2YWx1ZSA9IHN0cmluZ3NbMF07XG5cbiAgICAgIGxldCBpLCB2O1xuICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIHYgPSByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIHZhbHVlc1t2YWx1ZUluZGV4ISArIGldLCBkaXJlY3RpdmVQYXJlbnQsIGkpO1xuXG4gICAgICAgIGlmICh2ID09PSBub0NoYW5nZSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyLXByb3ZpZGVkIHZhbHVlIGlzIGBub0NoYW5nZWAsIHVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICB2ID0gKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBBcnJheTx1bmtub3duPilbaV07XG4gICAgICAgIH1cbiAgICAgICAgY2hhbmdlIHx8PVxuICAgICAgICAgICFpc1ByaW1pdGl2ZSh2KSB8fCB2ICE9PSAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIEFycmF5PHVua25vd24+KVtpXTtcbiAgICAgICAgaWYgKHYgPT09IG5vdGhpbmcpIHtcbiAgICAgICAgICB2YWx1ZSA9IG5vdGhpbmc7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IG5vdGhpbmcpIHtcbiAgICAgICAgICB2YWx1ZSArPSAodiA/PyAnJykgKyBzdHJpbmdzW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBhbHdheXMgcmVjb3JkIGVhY2ggdmFsdWUsIGV2ZW4gaWYgb25lIGlzIGBub3RoaW5nYCwgZm9yIGZ1dHVyZVxuICAgICAgICAvLyBjaGFuZ2UgZGV0ZWN0aW9uLlxuICAgICAgICAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIEFycmF5PHVua25vd24+KVtpXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2UgJiYgIW5vQ29tbWl0KSB7XG4gICAgICB0aGlzLl9jb21taXRWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY29tbWl0VmFsdWUodmFsdWU6IHVua25vd24pIHtcbiAgICBpZiAodmFsdWUgPT09IG5vdGhpbmcpIHtcbiAgICAgICh3cmFwKHRoaXMuZWxlbWVudCkgYXMgRWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKHRoaXMubmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nhbml0aXplciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5fc2FuaXRpemVyID0gc2FuaXRpemVyRmFjdG9yeUludGVybmFsKFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSdcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdGhpcy5fc2FuaXRpemVyKHZhbHVlID8/ICcnKTtcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ2NvbW1pdCBhdHRyaWJ1dGUnLFxuICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICh3cmFwKHRoaXMuZWxlbWVudCkgYXMgRWxlbWVudCkuc2V0QXR0cmlidXRlKFxuICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICh2YWx1ZSA/PyAnJykgYXMgc3RyaW5nXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7UHJvcGVydHlQYXJ0fTtcbmNsYXNzIFByb3BlcnR5UGFydCBleHRlbmRzIEF0dHJpYnV0ZVBhcnQge1xuICBvdmVycmlkZSByZWFkb25seSB0eXBlID0gUFJPUEVSVFlfUEFSVDtcblxuICAvKiogQGludGVybmFsICovXG4gIG92ZXJyaWRlIF9jb21taXRWYWx1ZSh2YWx1ZTogdW5rbm93bikge1xuICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgIGlmICh0aGlzLl9zYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9zYW5pdGl6ZXIgPSBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwoXG4gICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAncHJvcGVydHknXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHRoaXMuX3Nhbml0aXplcih2YWx1ZSk7XG4gICAgfVxuICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICBraW5kOiAnY29tbWl0IHByb3BlcnR5JyxcbiAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICh0aGlzLmVsZW1lbnQgYXMgYW55KVt0aGlzLm5hbWVdID0gdmFsdWUgPT09IG5vdGhpbmcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7Qm9vbGVhbkF0dHJpYnV0ZVBhcnR9O1xuY2xhc3MgQm9vbGVhbkF0dHJpYnV0ZVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgdHlwZSA9IEJPT0xFQU5fQVRUUklCVVRFX1BBUlQ7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBvdmVycmlkZSBfY29tbWl0VmFsdWUodmFsdWU6IHVua25vd24pIHtcbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ2NvbW1pdCBib29sZWFuIGF0dHJpYnV0ZScsXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB2YWx1ZTogISEodmFsdWUgJiYgdmFsdWUgIT09IG5vdGhpbmcpLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICAod3JhcCh0aGlzLmVsZW1lbnQpIGFzIEVsZW1lbnQpLnRvZ2dsZUF0dHJpYnV0ZShcbiAgICAgIHRoaXMubmFtZSxcbiAgICAgICEhdmFsdWUgJiYgdmFsdWUgIT09IG5vdGhpbmdcbiAgICApO1xuICB9XG59XG5cbnR5cGUgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zID0gRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCAmXG4gIFBhcnRpYWw8QWRkRXZlbnRMaXN0ZW5lck9wdGlvbnM+O1xuXG4vKipcbiAqIEFuIEF0dHJpYnV0ZVBhcnQgdGhhdCBtYW5hZ2VzIGFuIGV2ZW50IGxpc3RlbmVyIHZpYSBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lci5cbiAqXG4gKiBUaGlzIHBhcnQgd29ya3MgYnkgYWRkaW5nIGl0c2VsZiBhcyB0aGUgZXZlbnQgbGlzdGVuZXIgb24gYW4gZWxlbWVudCwgdGhlblxuICogZGVsZWdhdGluZyB0byB0aGUgdmFsdWUgcGFzc2VkIHRvIGl0LiBUaGlzIHJlZHVjZXMgdGhlIG51bWJlciBvZiBjYWxscyB0b1xuICogYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIgaWYgdGhlIGxpc3RlbmVyIGNoYW5nZXMgZnJlcXVlbnRseSwgc3VjaCBhcyB3aGVuIGFuXG4gKiBpbmxpbmUgZnVuY3Rpb24gaXMgdXNlZCBhcyBhIGxpc3RlbmVyLlxuICpcbiAqIEJlY2F1c2UgZXZlbnQgb3B0aW9ucyBhcmUgcGFzc2VkIHdoZW4gYWRkaW5nIGxpc3RlbmVycywgd2UgbXVzdCB0YWtlIGNhc2VcbiAqIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBwYXJ0IGFzIGEgbGlzdGVuZXIgd2hlbiB0aGUgZXZlbnQgb3B0aW9ucyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCB0eXBlIHtFdmVudFBhcnR9O1xuY2xhc3MgRXZlbnRQYXJ0IGV4dGVuZHMgQXR0cmlidXRlUGFydCB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHR5cGUgPSBFVkVOVF9QQVJUO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBzdHJpbmdzOiBSZWFkb25seUFycmF5PHN0cmluZz4sXG4gICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSxcbiAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MsIHBhcmVudCwgb3B0aW9ucyk7XG5cbiAgICBpZiAoREVWX01PREUgJiYgdGhpcy5zdHJpbmdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEEgXFxgPCR7ZWxlbWVudC5sb2NhbE5hbWV9PlxcYCBoYXMgYSBcXGBAJHtuYW1lfT0uLi5cXGAgbGlzdGVuZXIgd2l0aCBgICtcbiAgICAgICAgICAnaW52YWxpZCBjb250ZW50LiBFdmVudCBsaXN0ZW5lcnMgaW4gdGVtcGxhdGVzIG11c3QgaGF2ZSBleGFjdGx5ICcgK1xuICAgICAgICAgICdvbmUgZXhwcmVzc2lvbiBhbmQgbm8gc3Vycm91bmRpbmcgdGV4dC4nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV2ZW50UGFydCBkb2VzIG5vdCB1c2UgdGhlIGJhc2UgXyRzZXRWYWx1ZS9fcmVzb2x2ZVZhbHVlIGltcGxlbWVudGF0aW9uXG4gIC8vIHNpbmNlIHRoZSBkaXJ0eSBjaGVja2luZyBpcyBtb3JlIGNvbXBsZXhcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBvdmVycmlkZSBfJHNldFZhbHVlKFxuICAgIG5ld0xpc3RlbmVyOiB1bmtub3duLFxuICAgIGRpcmVjdGl2ZVBhcmVudDogRGlyZWN0aXZlUGFyZW50ID0gdGhpc1xuICApIHtcbiAgICBuZXdMaXN0ZW5lciA9XG4gICAgICByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIG5ld0xpc3RlbmVyLCBkaXJlY3RpdmVQYXJlbnQsIDApID8/IG5vdGhpbmc7XG4gICAgaWYgKG5ld0xpc3RlbmVyID09PSBub0NoYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRMaXN0ZW5lciA9IHRoaXMuXyRjb21taXR0ZWRWYWx1ZTtcblxuICAgIC8vIElmIHRoZSBuZXcgdmFsdWUgaXMgbm90aGluZyBvciBhbnkgb3B0aW9ucyBjaGFuZ2Ugd2UgaGF2ZSB0byByZW1vdmUgdGhlXG4gICAgLy8gcGFydCBhcyBhIGxpc3RlbmVyLlxuICAgIGNvbnN0IHNob3VsZFJlbW92ZUxpc3RlbmVyID1cbiAgICAgIChuZXdMaXN0ZW5lciA9PT0gbm90aGluZyAmJiBvbGRMaXN0ZW5lciAhPT0gbm90aGluZykgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLmNhcHR1cmUgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLmNhcHR1cmUgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLm9uY2UgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLm9uY2UgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLnBhc3NpdmUgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLnBhc3NpdmU7XG5cbiAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIG5vdCBub3RoaW5nIGFuZCB3ZSByZW1vdmVkIHRoZSBsaXN0ZW5lciwgd2UgaGF2ZVxuICAgIC8vIHRvIGFkZCB0aGUgcGFydCBhcyBhIGxpc3RlbmVyLlxuICAgIGNvbnN0IHNob3VsZEFkZExpc3RlbmVyID1cbiAgICAgIG5ld0xpc3RlbmVyICE9PSBub3RoaW5nICYmXG4gICAgICAob2xkTGlzdGVuZXIgPT09IG5vdGhpbmcgfHwgc2hvdWxkUmVtb3ZlTGlzdGVuZXIpO1xuXG4gICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgIGtpbmQ6ICdjb21taXQgZXZlbnQgbGlzdGVuZXInLFxuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgdmFsdWU6IG5ld0xpc3RlbmVyLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJlbW92ZUxpc3RlbmVyOiBzaG91bGRSZW1vdmVMaXN0ZW5lcixcbiAgICAgICAgYWRkTGlzdGVuZXI6IHNob3VsZEFkZExpc3RlbmVyLFxuICAgICAgICBvbGRMaXN0ZW5lcixcbiAgICAgIH0pO1xuICAgIGlmIChzaG91bGRSZW1vdmVMaXN0ZW5lcikge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgdGhpcyxcbiAgICAgICAgb2xkTGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkQWRkTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIG5ld0xpc3RlbmVyIGFzIEV2ZW50TGlzdGVuZXJXaXRoT3B0aW9uc1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gbmV3TGlzdGVuZXI7XG4gIH1cblxuICBoYW5kbGVFdmVudChldmVudDogRXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlLmNhbGwodGhpcy5vcHRpb25zPy5ob3N0ID8/IHRoaXMuZWxlbWVudCwgZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIEV2ZW50TGlzdGVuZXJPYmplY3QpLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUge0VsZW1lbnRQYXJ0fTtcbmNsYXNzIEVsZW1lbnRQYXJ0IGltcGxlbWVudHMgRGlzY29ubmVjdGFibGUge1xuICByZWFkb25seSB0eXBlID0gRUxFTUVOVF9QQVJUO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX19kaXJlY3RpdmU/OiBEaXJlY3RpdmU7XG5cbiAgLy8gVGhpcyBpcyB0byBlbnN1cmUgdGhhdCBldmVyeSBQYXJ0IGhhcyBhIF8kY29tbWl0dGVkVmFsdWVcbiAgXyRjb21taXR0ZWRWYWx1ZTogdW5kZWZpbmVkO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRwYXJlbnQhOiBEaXNjb25uZWN0YWJsZTtcblxuICAvKiogQGludGVybmFsICovXG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT4gPSB1bmRlZmluZWQ7XG5cbiAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZWxlbWVudDogRWxlbWVudCxcbiAgICBwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlLFxuICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLy8gU2VlIGNvbW1lbnQgaW4gRGlzY29ubmVjdGFibGUgaW50ZXJmYWNlIGZvciB3aHkgdGhpcyBpcyBhIGdldHRlclxuICBnZXQgXyRpc0Nvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fJHBhcmVudC5fJGlzQ29ubmVjdGVkO1xuICB9XG5cbiAgXyRzZXRWYWx1ZSh2YWx1ZTogdW5rbm93bik6IHZvaWQge1xuICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICBraW5kOiAnY29tbWl0IHRvIGVsZW1lbnQgYmluZGluZycsXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIH0pO1xuICAgIHJlc29sdmVEaXJlY3RpdmUodGhpcywgdmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogRU5EIFVTRVJTIFNIT1VMRCBOT1QgUkVMWSBPTiBUSElTIE9CSkVDVC5cbiAqXG4gKiBQcml2YXRlIGV4cG9ydHMgZm9yIHVzZSBieSBvdGhlciBMaXQgcGFja2FnZXMsIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5XG4gKiBleHRlcm5hbCB1c2Vycy5cbiAqXG4gKiBXZSBjdXJyZW50bHkgZG8gbm90IG1ha2UgYSBtYW5nbGVkIHJvbGx1cCBidWlsZCBvZiB0aGUgbGl0LXNzciBjb2RlLiBJbiBvcmRlclxuICogdG8ga2VlcCBhIG51bWJlciBvZiAob3RoZXJ3aXNlIHByaXZhdGUpIHRvcC1sZXZlbCBleHBvcnRzIG1hbmdsZWQgaW4gdGhlXG4gKiBjbGllbnQgc2lkZSBjb2RlLCB3ZSBleHBvcnQgYSBfJExIIG9iamVjdCBjb250YWluaW5nIHRob3NlIG1lbWJlcnMgKG9yXG4gKiBoZWxwZXIgbWV0aG9kcyBmb3IgYWNjZXNzaW5nIHByaXZhdGUgZmllbGRzIG9mIHRob3NlIG1lbWJlcnMpLCBhbmQgdGhlblxuICogcmUtZXhwb3J0IHRoZW0gZm9yIHVzZSBpbiBsaXQtc3NyLiBUaGlzIGtlZXBzIGxpdC1zc3IgYWdub3N0aWMgdG8gd2hldGhlciB0aGVcbiAqIGNsaWVudC1zaWRlIGNvZGUgaXMgYmVpbmcgdXNlZCBpbiBgZGV2YCBtb2RlIG9yIGBwcm9kYCBtb2RlLlxuICpcbiAqIFRoaXMgaGFzIGEgdW5pcXVlIG5hbWUsIHRvIGRpc2FtYmlndWF0ZSBpdCBmcm9tIHByaXZhdGUgZXhwb3J0cyBpblxuICogbGl0LWVsZW1lbnQsIHdoaWNoIHJlLWV4cG9ydHMgYWxsIG9mIGxpdC1odG1sLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBfJExIID0ge1xuICAvLyBVc2VkIGluIGxpdC1zc3JcbiAgX2JvdW5kQXR0cmlidXRlU3VmZml4OiBib3VuZEF0dHJpYnV0ZVN1ZmZpeCxcbiAgX21hcmtlcjogbWFya2VyLFxuICBfbWFya2VyTWF0Y2g6IG1hcmtlck1hdGNoLFxuICBfSFRNTF9SRVNVTFQ6IEhUTUxfUkVTVUxULFxuICBfZ2V0VGVtcGxhdGVIdG1sOiBnZXRUZW1wbGF0ZUh0bWwsXG4gIC8vIFVzZWQgaW4gdGVzdHMgYW5kIHByaXZhdGUtc3NyLXN1cHBvcnRcbiAgX1RlbXBsYXRlSW5zdGFuY2U6IFRlbXBsYXRlSW5zdGFuY2UsXG4gIF9pc0l0ZXJhYmxlOiBpc0l0ZXJhYmxlLFxuICBfcmVzb2x2ZURpcmVjdGl2ZTogcmVzb2x2ZURpcmVjdGl2ZSxcbiAgX0NoaWxkUGFydDogQ2hpbGRQYXJ0LFxuICBfQXR0cmlidXRlUGFydDogQXR0cmlidXRlUGFydCxcbiAgX0Jvb2xlYW5BdHRyaWJ1dGVQYXJ0OiBCb29sZWFuQXR0cmlidXRlUGFydCxcbiAgX0V2ZW50UGFydDogRXZlbnRQYXJ0LFxuICBfUHJvcGVydHlQYXJ0OiBQcm9wZXJ0eVBhcnQsXG4gIF9FbGVtZW50UGFydDogRWxlbWVudFBhcnQsXG59O1xuXG4vLyBBcHBseSBwb2x5ZmlsbHMgaWYgYXZhaWxhYmxlXG5jb25zdCBwb2x5ZmlsbFN1cHBvcnQgPSBERVZfTU9ERVxuICA/IGdsb2JhbC5saXRIdG1sUG9seWZpbGxTdXBwb3J0RGV2TW9kZVxuICA6IGdsb2JhbC5saXRIdG1sUG9seWZpbGxTdXBwb3J0O1xucG9seWZpbGxTdXBwb3J0Py4oVGVtcGxhdGUsIENoaWxkUGFydCk7XG5cbi8vIElNUE9SVEFOVDogZG8gbm90IGNoYW5nZSB0aGUgcHJvcGVydHkgbmFtZSBvciB0aGUgYXNzaWdubWVudCBleHByZXNzaW9uLlxuLy8gVGhpcyBsaW5lIHdpbGwgYmUgdXNlZCBpbiByZWdleGVzIHRvIHNlYXJjaCBmb3IgbGl0LWh0bWwgdXNhZ2UuXG4oZ2xvYmFsLmxpdEh0bWxWZXJzaW9ucyA/Pz0gW10pLnB1c2goJzMuMy4xJyk7XG5pZiAoREVWX01PREUgJiYgZ2xvYmFsLmxpdEh0bWxWZXJzaW9ucy5sZW5ndGggPiAxKSB7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmchKFxuICAgICAgJ211bHRpcGxlLXZlcnNpb25zJyxcbiAgICAgIGBNdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXQgbG9hZGVkLiBgICtcbiAgICAgICAgYExvYWRpbmcgbXVsdGlwbGUgdmVyc2lvbnMgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgICApO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgdmFsdWUsIHVzdWFsbHkgYSBsaXQtaHRtbCBUZW1wbGF0ZVJlc3VsdCwgdG8gdGhlIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIGV4YW1wbGUgcmVuZGVycyB0aGUgdGV4dCBcIkhlbGxvLCBab2UhXCIgaW5zaWRlIGEgcGFyYWdyYXBoIHRhZywgYXBwZW5kaW5nXG4gKiBpdCB0byB0aGUgY29udGFpbmVyIGBkb2N1bWVudC5ib2R5YC5cbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtodG1sLCByZW5kZXJ9IGZyb20gJ2xpdCc7XG4gKlxuICogY29uc3QgbmFtZSA9IFwiWm9lXCI7XG4gKiByZW5kZXIoaHRtbGA8cD5IZWxsbywgJHtuYW1lfSE8L3A+YCwgZG9jdW1lbnQuYm9keSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmFsdWUgQW55IFtyZW5kZXJhYmxlXG4gKiAgIHZhbHVlXShodHRwczovL2xpdC5kZXYvZG9jcy90ZW1wbGF0ZXMvZXhwcmVzc2lvbnMvI2NoaWxkLWV4cHJlc3Npb25zKSxcbiAqICAgdHlwaWNhbGx5IGEge0BsaW5rY29kZSBUZW1wbGF0ZVJlc3VsdH0gY3JlYXRlZCBieSBldmFsdWF0aW5nIGEgdGVtcGxhdGUgdGFnXG4gKiAgIGxpa2Uge0BsaW5rY29kZSBodG1sfSBvciB7QGxpbmtjb2RlIHN2Z30uXG4gKiBAcGFyYW0gY29udGFpbmVyIEEgRE9NIGNvbnRhaW5lciB0byByZW5kZXIgdG8uIFRoZSBmaXJzdCByZW5kZXIgd2lsbCBhcHBlbmRcbiAqICAgdGhlIHJlbmRlcmVkIHZhbHVlIHRvIHRoZSBjb250YWluZXIsIGFuZCBzdWJzZXF1ZW50IHJlbmRlcnMgd2lsbFxuICogICBlZmZpY2llbnRseSB1cGRhdGUgdGhlIHJlbmRlcmVkIHZhbHVlIGlmIHRoZSBzYW1lIHJlc3VsdCB0eXBlIHdhc1xuICogICBwcmV2aW91c2x5IHJlbmRlcmVkIHRoZXJlLlxuICogQHBhcmFtIG9wdGlvbnMgU2VlIHtAbGlua2NvZGUgUmVuZGVyT3B0aW9uc30gZm9yIG9wdGlvbnMgZG9jdW1lbnRhdGlvbi5cbiAqIEBzZWVcbiAqIHtAbGluayBodHRwczovL2xpdC5kZXYvZG9jcy9saWJyYXJpZXMvc3RhbmRhbG9uZS10ZW1wbGF0ZXMvI3JlbmRlcmluZy1saXQtaHRtbC10ZW1wbGF0ZXN8IFJlbmRlcmluZyBMaXQgSFRNTCBUZW1wbGF0ZXN9XG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAoXG4gIHZhbHVlOiB1bmtub3duLFxuICBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCxcbiAgb3B0aW9ucz86IFJlbmRlck9wdGlvbnNcbik6IFJvb3RQYXJ0ID0+IHtcbiAgaWYgKERFVl9NT0RFICYmIGNvbnRhaW5lciA9PSBudWxsKSB7XG4gICAgLy8gR2l2ZSBhIGNsZWFyZXIgZXJyb3IgbWVzc2FnZSB0aGFuXG4gICAgLy8gICAgIFVuY2F1Z2h0IFR5cGVFcnJvcjogQ2Fubm90IHJlYWQgcHJvcGVydGllcyBvZiBudWxsIChyZWFkaW5nXG4gICAgLy8gICAgICdfJGxpdFBhcnQkJylcbiAgICAvLyB3aGljaCByZWFkcyBsaWtlIGFuIGludGVybmFsIExpdCBlcnJvci5cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgY29udGFpbmVyIHRvIHJlbmRlciBpbnRvIG1heSBub3QgYmUgJHtjb250YWluZXJ9YCk7XG4gIH1cbiAgY29uc3QgcmVuZGVySWQgPSBERVZfTU9ERSA/IGRlYnVnTG9nUmVuZGVySWQrKyA6IDA7XG4gIGNvbnN0IHBhcnRPd25lck5vZGUgPSBvcHRpb25zPy5yZW5kZXJCZWZvcmUgPz8gY29udGFpbmVyO1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBsZXQgcGFydDogQ2hpbGRQYXJ0ID0gKHBhcnRPd25lck5vZGUgYXMgYW55KVsnXyRsaXRQYXJ0JCddO1xuICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgZGVidWdMb2dFdmVudCh7XG4gICAgICBraW5kOiAnYmVnaW4gcmVuZGVyJyxcbiAgICAgIGlkOiByZW5kZXJJZCxcbiAgICAgIHZhbHVlLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHBhcnQsXG4gICAgfSk7XG4gIGlmIChwYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBlbmROb2RlID0gb3B0aW9ucz8ucmVuZGVyQmVmb3JlID8/IG51bGw7XG4gICAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIChwYXJ0T3duZXJOb2RlIGFzIGFueSlbJ18kbGl0UGFydCQnXSA9IHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgZW5kTm9kZSksXG4gICAgICBlbmROb2RlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgb3B0aW9ucyA/PyB7fVxuICAgICk7XG4gIH1cbiAgcGFydC5fJHNldFZhbHVlKHZhbHVlKTtcbiAgZGVidWdMb2dFdmVudCAmJlxuICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAga2luZDogJ2VuZCByZW5kZXInLFxuICAgICAgaWQ6IHJlbmRlcklkLFxuICAgICAgdmFsdWUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBvcHRpb25zLFxuICAgICAgcGFydCxcbiAgICB9KTtcbiAgcmV0dXJuIHBhcnQgYXMgUm9vdFBhcnQ7XG59O1xuXG5pZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gIHJlbmRlci5zZXRTYW5pdGl6ZXIgPSBzZXRTYW5pdGl6ZXI7XG4gIHJlbmRlci5jcmVhdGVTYW5pdGl6ZXIgPSBjcmVhdGVTYW5pdGl6ZXI7XG4gIGlmIChERVZfTU9ERSkge1xuICAgIHJlbmRlci5fdGVzdE9ubHlDbGVhclNhbml0aXplckZhY3RvcnlEb05vdENhbGxPckVsc2UgPVxuICAgICAgX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogVGhlIG1haW4gTGl0RWxlbWVudCBtb2R1bGUsIHdoaWNoIGRlZmluZXMgdGhlIHtAbGlua2NvZGUgTGl0RWxlbWVudH0gYmFzZVxuICogY2xhc3MgYW5kIHJlbGF0ZWQgQVBJcy5cbiAqXG4gKiBMaXRFbGVtZW50IGNvbXBvbmVudHMgY2FuIGRlZmluZSBhIHRlbXBsYXRlIGFuZCBhIHNldCBvZiBvYnNlcnZlZFxuICogcHJvcGVydGllcy4gQ2hhbmdpbmcgYW4gb2JzZXJ2ZWQgcHJvcGVydHkgdHJpZ2dlcnMgYSByZS1yZW5kZXIgb2YgdGhlXG4gKiBlbGVtZW50LlxuICpcbiAqIEltcG9ydCB7QGxpbmtjb2RlIExpdEVsZW1lbnR9IGFuZCB7QGxpbmtjb2RlIGh0bWx9IGZyb20gdGhpcyBtb2R1bGUgdG9cbiAqIGNyZWF0ZSBhIGNvbXBvbmVudDpcbiAqXG4gKiAgYGBganNcbiAqIGltcG9ydCB7TGl0RWxlbWVudCwgaHRtbH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuICpcbiAqIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICpcbiAqICAgLy8gRGVjbGFyZSBvYnNlcnZlZCBwcm9wZXJ0aWVzXG4gKiAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgYWRqZWN0aXZlOiB7fVxuICogICAgIH1cbiAqICAgfVxuICpcbiAqICAgY29uc3RydWN0b3IoKSB7XG4gKiAgICAgdGhpcy5hZGplY3RpdmUgPSAnYXdlc29tZSc7XG4gKiAgIH1cbiAqXG4gKiAgIC8vIERlZmluZSB0aGUgZWxlbWVudCdzIHRlbXBsYXRlXG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gaHRtbGA8cD55b3VyICR7YWRqZWN0aXZlfSB0ZW1wbGF0ZSBoZXJlPC9wPmA7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWVsZW1lbnQnLCBNeUVsZW1lbnQpO1xuICogYGBgXG4gKlxuICogYExpdEVsZW1lbnRgIGV4dGVuZHMge0BsaW5rY29kZSBSZWFjdGl2ZUVsZW1lbnR9IGFuZCBhZGRzIGxpdC1odG1sXG4gKiB0ZW1wbGF0aW5nLiBUaGUgYFJlYWN0aXZlRWxlbWVudGAgY2xhc3MgaXMgcHJvdmlkZWQgZm9yIHVzZXJzIHRoYXQgd2FudCB0b1xuICogYnVpbGQgdGhlaXIgb3duIGN1c3RvbSBlbGVtZW50IGJhc2UgY2xhc3NlcyB0aGF0IGRvbid0IHVzZSBsaXQtaHRtbC5cbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuaW1wb3J0IHtQcm9wZXJ0eVZhbHVlcywgUmVhY3RpdmVFbGVtZW50fSBmcm9tICdAbGl0L3JlYWN0aXZlLWVsZW1lbnQnO1xuaW1wb3J0IHtyZW5kZXIsIFJlbmRlck9wdGlvbnMsIG5vQ2hhbmdlLCBSb290UGFydH0gZnJvbSAnbGl0LWh0bWwnO1xuZXhwb3J0ICogZnJvbSAnQGxpdC9yZWFjdGl2ZS1lbGVtZW50JztcbmV4cG9ydCAqIGZyb20gJ2xpdC1odG1sJztcblxuaW1wb3J0IHtMaXRVbnN0YWJsZX0gZnJvbSAnbGl0LWh0bWwnO1xuaW1wb3J0IHtSZWFjdGl2ZVVuc3RhYmxlfSBmcm9tICdAbGl0L3JlYWN0aXZlLWVsZW1lbnQnO1xuXG4vKipcbiAqIENvbnRhaW5zIHR5cGVzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIHVuc3RhYmxlIGRlYnVnIEFQSS5cbiAqXG4gKiBFdmVyeXRoaW5nIGluIHRoaXMgQVBJIGlzIG5vdCBzdGFibGUgYW5kIG1heSBjaGFuZ2Ugb3IgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLFxuICogZXZlbiBvbiBwYXRjaCByZWxlYXNlcy5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgVW5zdGFibGUge1xuICAvKipcbiAgICogV2hlbiBMaXQgaXMgcnVubmluZyBpbiBkZXYgbW9kZSBhbmQgYHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHNgIGlzIHRydWUsXG4gICAqIHdlIHdpbGwgZW1pdCAnbGl0LWRlYnVnJyBldmVudHMgdG8gd2luZG93LCB3aXRoIGxpdmUgZGV0YWlscyBhYm91dCB0aGUgdXBkYXRlIGFuZCByZW5kZXJcbiAgICogbGlmZWN5Y2xlLiBUaGVzZSBjYW4gYmUgdXNlZnVsIGZvciB3cml0aW5nIGRlYnVnIHRvb2xpbmcgYW5kIHZpc3VhbGl6YXRpb25zLlxuICAgKlxuICAgKiBQbGVhc2UgYmUgYXdhcmUgdGhhdCBydW5uaW5nIHdpdGggd2luZG93LmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cyBoYXMgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsXG4gICAqIG1ha2luZyBjZXJ0YWluIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgdmVyeSBjaGVhcCAobGlrZSBhIG5vLW9wIHJlbmRlcikgbXVjaCBzbG93ZXIsXG4gICAqIGJlY2F1c2Ugd2UgbXVzdCBjb3B5IGRhdGEgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gIGV4cG9ydCBuYW1lc3BhY2UgRGVidWdMb2cge1xuICAgIGV4cG9ydCB0eXBlIEVudHJ5ID1cbiAgICAgIHwgTGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnlcbiAgICAgIHwgUmVhY3RpdmVVbnN0YWJsZS5EZWJ1Z0xvZy5FbnRyeTtcbiAgfVxufVxuLypcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xuLypAX19JTkxJTkVfXyovXG5jb25zdCBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5ID0gPFAgZXh0ZW5kcyBQcm9wZXJ0eUtleT4oXG4gIHByb3A6IFAsXG4gIF9vYmo6IHVua25vd25cbik6IFAgPT4gcHJvcDtcblxuY29uc3QgREVWX01PREUgPSB0cnVlO1xuLy8gQWxsb3dzIG1pbmlmaWVycyB0byByZW5hbWUgcmVmZXJlbmNlcyB0byBnbG9iYWxUaGlzXG5jb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzO1xuXG5sZXQgaXNzdWVXYXJuaW5nOiAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmlmIChERVZfTU9ERSkge1xuICAvLyBFbnN1cmUgd2FybmluZ3MgYXJlIGlzc3VlZCBvbmx5IDF4LCBldmVuIGlmIG11bHRpcGxlIHZlcnNpb25zIG9mIExpdFxuICAvLyBhcmUgbG9hZGVkLlxuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gYCBTZWUgaHR0cHM6Ly9saXQuZGV2L21zZy8ke2NvZGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLmA7XG4gICAgaWYgKFxuICAgICAgIWdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuaGFzKHdhcm5pbmcpICYmXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMoY29kZSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbiAgICAgIGdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBCYXNlIGVsZW1lbnQgY2xhc3MgdGhhdCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcywgYW5kXG4gKiByZW5kZXJzIGEgbGl0LWh0bWwgdGVtcGxhdGUuXG4gKlxuICogVG8gZGVmaW5lIGEgY29tcG9uZW50LCBzdWJjbGFzcyBgTGl0RWxlbWVudGAgYW5kIGltcGxlbWVudCBhXG4gKiBgcmVuZGVyYCBtZXRob2QgdG8gcHJvdmlkZSB0aGUgY29tcG9uZW50J3MgdGVtcGxhdGUuIERlZmluZSBwcm9wZXJ0aWVzXG4gKiB1c2luZyB0aGUge0BsaW5rY29kZSBMaXRFbGVtZW50LnByb3BlcnRpZXMgcHJvcGVydGllc30gcHJvcGVydHkgb3IgdGhlXG4gKiB7QGxpbmtjb2RlIHByb3BlcnR5fSBkZWNvcmF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXRFbGVtZW50IGV4dGVuZHMgUmVhY3RpdmVFbGVtZW50IHtcbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgc3RhdGljIFsnXyRsaXRFbGVtZW50JCddID0gdHJ1ZTtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcmVhZG9ubHkgcmVuZGVyT3B0aW9uczogUmVuZGVyT3B0aW9ucyA9IHtob3N0OiB0aGlzfTtcblxuICBwcml2YXRlIF9fY2hpbGRQYXJ0OiBSb290UGFydCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgY29uc3QgcmVuZGVyUm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAvLyBXaGVuIGFkb3B0ZWRTdHlsZVNoZWV0cyBhcmUgc2hpbW1lZCwgdGhleSBhcmUgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAvLyBzaGFkb3dSb290IGJ5IGNyZWF0ZVJlbmRlclJvb3QuIEFkanVzdCB0aGUgcmVuZGVyQmVmb3JlIG5vZGUgc28gdGhhdFxuICAgIC8vIGFueSBzdHlsZXMgaW4gTGl0IGNvbnRlbnQgcmVuZGVyIGJlZm9yZSBhZG9wdGVkU3R5bGVTaGVldHMuIFRoaXMgaXNcbiAgICAvLyBpbXBvcnRhbnQgc28gdGhhdCBhZG9wdGVkU3R5bGVTaGVldHMgaGF2ZSBwcmVjZWRlbmNlIG92ZXIgc3R5bGVzIGluXG4gICAgLy8gdGhlIHNoYWRvd1Jvb3QuXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zLnJlbmRlckJlZm9yZSA/Pz0gcmVuZGVyUm9vdCEuZmlyc3RDaGlsZCBhcyBDaGlsZE5vZGU7XG4gICAgcmV0dXJuIHJlbmRlclJvb3Q7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXNcbiAgICogYW5kIGNhbGxzIGByZW5kZXJgIHRvIHJlbmRlciBET00gdmlhIGxpdC1odG1sLiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlXG4gICAqIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciBhbm90aGVyIHVwZGF0ZS5cbiAgICogQHBhcmFtIGNoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIC8vIFNldHRpbmcgcHJvcGVydGllcyBpbiBgcmVuZGVyYCBzaG91bGQgbm90IHRyaWdnZXIgYW4gdXBkYXRlLiBTaW5jZVxuICAgIC8vIHVwZGF0ZXMgYXJlIGFsbG93ZWQgYWZ0ZXIgc3VwZXIudXBkYXRlLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGByZW5kZXJgXG4gICAgLy8gYmVmb3JlIHRoYXQuXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnJlbmRlcigpO1xuICAgIGlmICghdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLnJlbmRlck9wdGlvbnMuaXNDb25uZWN0ZWQgPSB0aGlzLmlzQ29ubmVjdGVkO1xuICAgIH1cbiAgICBzdXBlci51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgIHRoaXMuX19jaGlsZFBhcnQgPSByZW5kZXIodmFsdWUsIHRoaXMucmVuZGVyUm9vdCwgdGhpcy5yZW5kZXJPcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhZGRlZCB0byB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIEluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCB5b3Ugc2hvdWxkIHNldHVwIHRhc2tzIHRoYXQgc2hvdWxkIG9ubHkgb2NjdXIgd2hlblxuICAgKiB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIGRvY3VtZW50LiBUaGUgbW9zdCBjb21tb24gb2YgdGhlc2UgaXNcbiAgICogYWRkaW5nIGV2ZW50IGxpc3RlbmVycyB0byBub2RlcyBleHRlcm5hbCB0byB0aGUgZWxlbWVudCwgbGlrZSBhIGtleWRvd25cbiAgICogZXZlbnQgaGFuZGxlciBhZGRlZCB0byB0aGUgd2luZG93LlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICogICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgKiAgIGFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogVHlwaWNhbGx5LCBhbnl0aGluZyBkb25lIGluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCBzaG91bGQgYmUgdW5kb25lIHdoZW4gdGhlXG4gICAqIGVsZW1lbnQgaXMgZGlzY29ubmVjdGVkLCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAuXG4gICAqXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIG92ZXJyaWRlIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fX2NoaWxkUGFydD8uc2V0Q29ubmVjdGVkKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIFRoaXMgY2FsbGJhY2sgaXMgdGhlIG1haW4gc2lnbmFsIHRvIHRoZSBlbGVtZW50IHRoYXQgaXQgbWF5IG5vIGxvbmdlciBiZVxuICAgKiB1c2VkLiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAgc2hvdWxkIGVuc3VyZSB0aGF0IG5vdGhpbmcgaXMgaG9sZGluZyBhXG4gICAqIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCAoc3VjaCBhcyBldmVudCBsaXN0ZW5lcnMgYWRkZWQgdG8gbm9kZXMgZXh0ZXJuYWxcbiAgICogdG8gdGhlIGVsZW1lbnQpLCBzbyB0aGF0IGl0IGlzIGZyZWUgdG8gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgKiAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAqICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQW4gZWxlbWVudCBtYXkgYmUgcmUtY29ubmVjdGVkIGFmdGVyIGJlaW5nIGRpc2Nvbm5lY3RlZC5cbiAgICpcbiAgICogQGNhdGVnb3J5IGxpZmVjeWNsZVxuICAgKi9cbiAgb3ZlcnJpZGUgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9fY2hpbGRQYXJ0Py5zZXRDb25uZWN0ZWQoZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgb24gZWFjaCB1cGRhdGUgdG8gcGVyZm9ybSByZW5kZXJpbmcgdGFza3MuIFRoaXMgbWV0aG9kIG1heSByZXR1cm5cbiAgICogYW55IHZhbHVlIHJlbmRlcmFibGUgYnkgbGl0LWh0bWwncyBgQ2hpbGRQYXJ0YCAtIHR5cGljYWxseSBhXG4gICAqIGBUZW1wbGF0ZVJlc3VsdGAuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyXG4gICAqIHRoZSBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB1bmtub3duIHtcbiAgICByZXR1cm4gbm9DaGFuZ2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICpcbiAqIE5vdGUgdGhpcyBwcm9wZXJ0eSBuYW1lIGlzIGEgc3RyaW5nIHRvIHByZXZlbnQgYnJlYWtpbmcgQ2xvc3VyZSBKUyBDb21waWxlclxuICogb3B0aW1pemF0aW9ucy4gU2VlIEBsaXQvcmVhY3RpdmUtZWxlbWVudCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuKExpdEVsZW1lbnQgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilbXG4gIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2ZpbmFsaXplZCcsIExpdEVsZW1lbnQpXG5dID0gdHJ1ZTtcblxuLy8gSW5zdGFsbCBoeWRyYXRpb24gaWYgYXZhaWxhYmxlXG5nbG9iYWwubGl0RWxlbWVudEh5ZHJhdGVTdXBwb3J0Py4oe0xpdEVsZW1lbnR9KTtcblxuLy8gQXBwbHkgcG9seWZpbGxzIGlmIGF2YWlsYWJsZVxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydERldk1vZGVcbiAgOiBnbG9iYWwubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydDtcbnBvbHlmaWxsU3VwcG9ydD8uKHtMaXRFbGVtZW50fSk7XG5cbi8qKlxuICogRU5EIFVTRVJTIFNIT1VMRCBOT1QgUkVMWSBPTiBUSElTIE9CSkVDVC5cbiAqXG4gKiBQcml2YXRlIGV4cG9ydHMgZm9yIHVzZSBieSBvdGhlciBMaXQgcGFja2FnZXMsIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5XG4gKiBleHRlcm5hbCB1c2Vycy5cbiAqXG4gKiBXZSBjdXJyZW50bHkgZG8gbm90IG1ha2UgYSBtYW5nbGVkIHJvbGx1cCBidWlsZCBvZiB0aGUgbGl0LXNzciBjb2RlLiBJbiBvcmRlclxuICogdG8ga2VlcCBhIG51bWJlciBvZiAob3RoZXJ3aXNlIHByaXZhdGUpIHRvcC1sZXZlbCBleHBvcnRzICBtYW5nbGVkIGluIHRoZVxuICogY2xpZW50IHNpZGUgY29kZSwgd2UgZXhwb3J0IGEgXyRMRSBvYmplY3QgY29udGFpbmluZyB0aG9zZSBtZW1iZXJzIChvclxuICogaGVscGVyIG1ldGhvZHMgZm9yIGFjY2Vzc2luZyBwcml2YXRlIGZpZWxkcyBvZiB0aG9zZSBtZW1iZXJzKSwgYW5kIHRoZW5cbiAqIHJlLWV4cG9ydCB0aGVtIGZvciB1c2UgaW4gbGl0LXNzci4gVGhpcyBrZWVwcyBsaXQtc3NyIGFnbm9zdGljIHRvIHdoZXRoZXIgdGhlXG4gKiBjbGllbnQtc2lkZSBjb2RlIGlzIGJlaW5nIHVzZWQgaW4gYGRldmAgbW9kZSBvciBgcHJvZGAgbW9kZS5cbiAqXG4gKiBUaGlzIGhhcyBhIHVuaXF1ZSBuYW1lLCB0byBkaXNhbWJpZ3VhdGUgaXQgZnJvbSBwcml2YXRlIGV4cG9ydHMgaW5cbiAqIGxpdC1odG1sLCBzaW5jZSB0aGlzIG1vZHVsZSByZS1leHBvcnRzIGFsbCBvZiBsaXQtaHRtbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgXyRMRSA9IHtcbiAgXyRhdHRyaWJ1dGVUb1Byb3BlcnR5OiAoXG4gICAgZWw6IExpdEVsZW1lbnQsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsXG4gICkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIChlbCBhcyBhbnkpLl8kYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gIH0sXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBfJGNoYW5nZWRQcm9wZXJ0aWVzOiAoZWw6IExpdEVsZW1lbnQpID0+IChlbCBhcyBhbnkpLl8kY2hhbmdlZFByb3BlcnRpZXMsXG59O1xuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIExpdEVsZW1lbnQgdXNhZ2UuXG4oZ2xvYmFsLmxpdEVsZW1lbnRWZXJzaW9ucyA/Pz0gW10pLnB1c2goJzQuMi4xJyk7XG5pZiAoREVWX01PREUgJiYgZ2xvYmFsLmxpdEVsZW1lbnRWZXJzaW9ucy5sZW5ndGggPiAxKSB7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmchKFxuICAgICAgJ211bHRpcGxlLXZlcnNpb25zJyxcbiAgICAgIGBNdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXQgbG9hZGVkLiBMb2FkaW5nIG11bHRpcGxlIHZlcnNpb25zIGAgK1xuICAgICAgICBgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgICApO1xuICB9KTtcbn1cbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLypcbiAqIElNUE9SVEFOVDogRm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0c2lja2xlIGFuZCB0aGUgQ2xvc3VyZSBKUyBjb21waWxlciwgYWxsXG4gKiBwcm9wZXJ0eSBkZWNvcmF0b3JzIChidXQgbm90IGNsYXNzIGRlY29yYXRvcnMpIGluIHRoaXMgZmlsZSB0aGF0IGhhdmVcbiAqIGFuIEBFeHBvcnREZWNvcmF0ZWRJdGVtcyBhbm5vdGF0aW9uIG11c3QgYmUgZGVmaW5lZCBhcyBhIHJlZ3VsYXIgZnVuY3Rpb24sXG4gKiBub3QgYW4gYXJyb3cgZnVuY3Rpb24uXG4gKi9cblxuaW1wb3J0IHR5cGUge0NvbnN0cnVjdG9yfSBmcm9tICcuL2Jhc2UuanMnO1xuXG4vKipcbiAqIEFsbG93IGZvciBjdXN0b20gZWxlbWVudCBjbGFzc2VzIHdpdGggcHJpdmF0ZSBjb25zdHJ1Y3RvcnNcbiAqL1xudHlwZSBDdXN0b21FbGVtZW50Q2xhc3MgPSBPbWl0PHR5cGVvZiBIVE1MRWxlbWVudCwgJ25ldyc+O1xuXG5leHBvcnQgdHlwZSBDdXN0b21FbGVtZW50RGVjb3JhdG9yID0ge1xuICAvLyBsZWdhY3lcbiAgKGNsczogQ3VzdG9tRWxlbWVudENsYXNzKTogdm9pZDtcblxuICAvLyBzdGFuZGFyZFxuICAoXG4gICAgdGFyZ2V0OiBDdXN0b21FbGVtZW50Q2xhc3MsXG4gICAgY29udGV4dDogQ2xhc3NEZWNvcmF0b3JDb250ZXh0PENvbnN0cnVjdG9yPEhUTUxFbGVtZW50Pj5cbiAgKTogdm9pZDtcbn07XG5cbi8qKlxuICogQ2xhc3MgZGVjb3JhdG9yIGZhY3RvcnkgdGhhdCBkZWZpbmVzIHRoZSBkZWNvcmF0ZWQgY2xhc3MgYXMgYSBjdXN0b20gZWxlbWVudC5cbiAqXG4gKiBgYGBqc1xuICogQGN1c3RvbUVsZW1lbnQoJ215LWVsZW1lbnQnKVxuICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gaHRtbGBgO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIEBjYXRlZ29yeSBEZWNvcmF0b3JcbiAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgbmFtZSBvZiB0aGUgY3VzdG9tIGVsZW1lbnQgdG8gZGVmaW5lLlxuICovXG5leHBvcnQgY29uc3QgY3VzdG9tRWxlbWVudCA9XG4gICh0YWdOYW1lOiBzdHJpbmcpOiBDdXN0b21FbGVtZW50RGVjb3JhdG9yID0+XG4gIChcbiAgICBjbGFzc09yVGFyZ2V0OiBDdXN0b21FbGVtZW50Q2xhc3MgfCBDb25zdHJ1Y3RvcjxIVE1MRWxlbWVudD4sXG4gICAgY29udGV4dD86IENsYXNzRGVjb3JhdG9yQ29udGV4dDxDb25zdHJ1Y3RvcjxIVE1MRWxlbWVudD4+XG4gICkgPT4ge1xuICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIoKCkgPT4ge1xuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXG4gICAgICAgICAgdGFnTmFtZSxcbiAgICAgICAgICBjbGFzc09yVGFyZ2V0IGFzIEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvclxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBjbGFzc09yVGFyZ2V0IGFzIEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3Rvcik7XG4gICAgfVxuICB9O1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG4vKlxuICogSU1QT1JUQU5UOiBGb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRzaWNrbGUgYW5kIHRoZSBDbG9zdXJlIEpTIGNvbXBpbGVyLCBhbGxcbiAqIHByb3BlcnR5IGRlY29yYXRvcnMgKGJ1dCBub3QgY2xhc3MgZGVjb3JhdG9ycykgaW4gdGhpcyBmaWxlIHRoYXQgaGF2ZVxuICogYW4gQEV4cG9ydERlY29yYXRlZEl0ZW1zIGFubm90YXRpb24gbXVzdCBiZSBkZWZpbmVkIGFzIGEgcmVndWxhciBmdW5jdGlvbixcbiAqIG5vdCBhbiBhcnJvdyBmdW5jdGlvbi5cbiAqL1xuXG5pbXBvcnQge1xuICB0eXBlIFByb3BlcnR5RGVjbGFyYXRpb24sXG4gIHR5cGUgUmVhY3RpdmVFbGVtZW50LFxuICBkZWZhdWx0Q29udmVydGVyLFxuICBub3RFcXVhbCxcbn0gZnJvbSAnLi4vcmVhY3RpdmUtZWxlbWVudC5qcyc7XG5pbXBvcnQgdHlwZSB7SW50ZXJmYWNlfSBmcm9tICcuL2Jhc2UuanMnO1xuXG5jb25zdCBERVZfTU9ERSA9IHRydWU7XG5cbmxldCBpc3N1ZVdhcm5pbmc6IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4gdm9pZDtcblxuaWYgKERFVl9NT0RFKSB7XG4gIC8vIEVuc3VyZSB3YXJuaW5ncyBhcmUgaXNzdWVkIG9ubHkgMXgsIGV2ZW4gaWYgbXVsdGlwbGUgdmVyc2lvbnMgb2YgTGl0XG4gIC8vIGFyZSBsb2FkZWQuXG4gIGdsb2JhbFRoaXMubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gYCBTZWUgaHR0cHM6Ly9saXQuZGV2L21zZy8ke2NvZGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLmA7XG4gICAgaWYgKFxuICAgICAgIWdsb2JhbFRoaXMubGl0SXNzdWVkV2FybmluZ3MhLmhhcyh3YXJuaW5nKSAmJlxuICAgICAgIWdsb2JhbFRoaXMubGl0SXNzdWVkV2FybmluZ3MhLmhhcyhjb2RlKVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKHdhcm5pbmcpO1xuICAgICAgZ2xvYmFsVGhpcy5saXRJc3N1ZWRXYXJuaW5ncyEuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gT3ZlcmxvYWRzIGZvciBwcm9wZXJ0eSBkZWNvcmF0b3Igc28gdGhhdCBUeXBlU2NyaXB0IGNhbiBpbmZlciB0aGUgY29ycmVjdFxuLy8gcmV0dXJuIHR5cGUgd2hlbiBhIGRlY29yYXRvciBpcyB1c2VkIGFzIGFuIGFjY2Vzc29yIGRlY29yYXRvciBvciBhIHNldHRlclxuLy8gZGVjb3JhdG9yLlxuZXhwb3J0IHR5cGUgUHJvcGVydHlEZWNvcmF0b3IgPSB7XG4gIC8vIGFjY2Vzc29yIGRlY29yYXRvciBzaWduYXR1cmVcbiAgPEMgZXh0ZW5kcyBJbnRlcmZhY2U8UmVhY3RpdmVFbGVtZW50PiwgVj4oXG4gICAgdGFyZ2V0OiBDbGFzc0FjY2Vzc29yRGVjb3JhdG9yVGFyZ2V0PEMsIFY+LFxuICAgIGNvbnRleHQ6IENsYXNzQWNjZXNzb3JEZWNvcmF0b3JDb250ZXh0PEMsIFY+XG4gICk6IENsYXNzQWNjZXNzb3JEZWNvcmF0b3JSZXN1bHQ8QywgVj47XG5cbiAgLy8gc2V0dGVyIGRlY29yYXRvciBzaWduYXR1cmVcbiAgPEMgZXh0ZW5kcyBJbnRlcmZhY2U8UmVhY3RpdmVFbGVtZW50PiwgVj4oXG4gICAgdGFyZ2V0OiAodmFsdWU6IFYpID0+IHZvaWQsXG4gICAgY29udGV4dDogQ2xhc3NTZXR0ZXJEZWNvcmF0b3JDb250ZXh0PEMsIFY+XG4gICk6ICh0aGlzOiBDLCB2YWx1ZTogVikgPT4gdm9pZDtcblxuICAvLyBsZWdhY3kgZGVjb3JhdG9yIHNpZ25hdHVyZVxuICAoXG4gICAgcHJvdG9PckRlc2NyaXB0b3I6IE9iamVjdCxcbiAgICBuYW1lOiBQcm9wZXJ0eUtleSxcbiAgICBkZXNjcmlwdG9yPzogUHJvcGVydHlEZXNjcmlwdG9yXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgKTogYW55O1xufTtcblxuY29uc3QgbGVnYWN5UHJvcGVydHkgPSAoXG4gIG9wdGlvbnM6IFByb3BlcnR5RGVjbGFyYXRpb24gfCB1bmRlZmluZWQsXG4gIHByb3RvOiBPYmplY3QsXG4gIG5hbWU6IFByb3BlcnR5S2V5XG4pID0+IHtcbiAgY29uc3QgaGFzT3duUHJvcGVydHkgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgKHByb3RvLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAvLyBGb3IgYWNjZXNzb3JzICh3aGljaCBoYXZlIGEgZGVzY3JpcHRvciBvbiB0aGUgcHJvdG90eXBlKSB3ZSBuZWVkIHRvXG4gIC8vIHJldHVybiBhIGRlc2NyaXB0b3IsIG90aGVyd2lzZSBUeXBlU2NyaXB0IG92ZXJ3cml0ZXMgdGhlIGRlc2NyaXB0b3Igd2VcbiAgLy8gZGVmaW5lIGluIGNyZWF0ZVByb3BlcnR5KCkgd2l0aCB0aGUgb3JpZ2luYWwgZGVzY3JpcHRvci4gV2UgZG9uJ3QgZG8gdGhpc1xuICAvLyBmb3IgZmllbGRzLCB3aGljaCBkb24ndCBoYXZlIGEgZGVzY3JpcHRvciwgYmVjYXVzZSB0aGlzIGNvdWxkIG92ZXJ3cml0ZVxuICAvLyBkZXNjcmlwdG9yIGRlZmluZWQgYnkgb3RoZXIgZGVjb3JhdG9ycy5cbiAgcmV0dXJuIGhhc093blByb3BlcnR5XG4gICAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBuYW1lKVxuICAgIDogdW5kZWZpbmVkO1xufTtcblxuLy8gVGhpcyBpcyBkdXBsaWNhdGVkIGZyb20gYSBzaW1pbGFyIHZhcmlhYmxlIGluIHJlYWN0aXZlLWVsZW1lbnQudHMsIGJ1dFxuLy8gYWN0dWFsbHkgbWFrZXMgc2Vuc2UgdG8gaGF2ZSB0aGlzIGRlZmF1bHQgZGVmaW5lZCB3aXRoIHRoZSBkZWNvcmF0b3IsIHNvXG4vLyB0aGF0IGRpZmZlcmVudCBkZWNvcmF0b3JzIGNvdWxkIGhhdmUgZGlmZmVyZW50IGRlZmF1bHRzLlxuY29uc3QgZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb246IFByb3BlcnR5RGVjbGFyYXRpb24gPSB7XG4gIGF0dHJpYnV0ZTogdHJ1ZSxcbiAgdHlwZTogU3RyaW5nLFxuICBjb252ZXJ0ZXI6IGRlZmF1bHRDb252ZXJ0ZXIsXG4gIHJlZmxlY3Q6IGZhbHNlLFxuICBoYXNDaGFuZ2VkOiBub3RFcXVhbCxcbn07XG5cbi8vIFRlbXBvcmFyeSB0eXBlLCB1bnRpbCBnb29nbGUzIGlzIG9uIFR5cGVTY3JpcHQgNS4yXG50eXBlIFN0YW5kYXJkUHJvcGVydHlDb250ZXh0PEMsIFY+ID0gKFxuICB8IENsYXNzQWNjZXNzb3JEZWNvcmF0b3JDb250ZXh0PEMsIFY+XG4gIHwgQ2xhc3NTZXR0ZXJEZWNvcmF0b3JDb250ZXh0PEMsIFY+XG4pICYge21ldGFkYXRhOiBvYmplY3R9O1xuXG4vKipcbiAqIFdyYXBzIGEgY2xhc3MgYWNjZXNzb3Igb3Igc2V0dGVyIHNvIHRoYXQgYHJlcXVlc3RVcGRhdGUoKWAgaXMgY2FsbGVkIHdpdGggdGhlXG4gKiBwcm9wZXJ0eSBuYW1lIGFuZCBvbGQgdmFsdWUgd2hlbiB0aGUgYWNjZXNzb3IgaXMgc2V0LlxuICovXG5leHBvcnQgY29uc3Qgc3RhbmRhcmRQcm9wZXJ0eSA9IDxDIGV4dGVuZHMgSW50ZXJmYWNlPFJlYWN0aXZlRWxlbWVudD4sIFY+KFxuICBvcHRpb25zOiBQcm9wZXJ0eURlY2xhcmF0aW9uID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24sXG4gIHRhcmdldDogQ2xhc3NBY2Nlc3NvckRlY29yYXRvclRhcmdldDxDLCBWPiB8ICgodmFsdWU6IFYpID0+IHZvaWQpLFxuICBjb250ZXh0OiBTdGFuZGFyZFByb3BlcnR5Q29udGV4dDxDLCBWPlxuKTogQ2xhc3NBY2Nlc3NvckRlY29yYXRvclJlc3VsdDxDLCBWPiB8ICgodGhpczogQywgdmFsdWU6IFYpID0+IHZvaWQpID0+IHtcbiAgY29uc3Qge2tpbmQsIG1ldGFkYXRhfSA9IGNvbnRleHQ7XG5cbiAgaWYgKERFVl9NT0RFICYmIG1ldGFkYXRhID09IG51bGwpIHtcbiAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAnbWlzc2luZy1jbGFzcy1tZXRhZGF0YScsXG4gICAgICBgVGhlIGNsYXNzICR7dGFyZ2V0fSBpcyBtaXNzaW5nIGRlY29yYXRvciBtZXRhZGF0YS4gVGhpcyBgICtcbiAgICAgICAgYGNvdWxkIG1lYW4gdGhhdCB5b3UncmUgdXNpbmcgYSBjb21waWxlciB0aGF0IHN1cHBvcnRzIGRlY29yYXRvcnMgYCArXG4gICAgICAgIGBidXQgZG9lc24ndCBzdXBwb3J0IGRlY29yYXRvciBtZXRhZGF0YSwgc3VjaCBhcyBUeXBlU2NyaXB0IDUuMS4gYCArXG4gICAgICAgIGBQbGVhc2UgdXBkYXRlIHlvdXIgY29tcGlsZXIuYFxuICAgICk7XG4gIH1cblxuICAvLyBTdG9yZSB0aGUgcHJvcGVydHkgb3B0aW9uc1xuICBsZXQgcHJvcGVydGllcyA9IGdsb2JhbFRoaXMubGl0UHJvcGVydHlNZXRhZGF0YS5nZXQobWV0YWRhdGEpO1xuICBpZiAocHJvcGVydGllcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZ2xvYmFsVGhpcy5saXRQcm9wZXJ0eU1ldGFkYXRhLnNldChtZXRhZGF0YSwgKHByb3BlcnRpZXMgPSBuZXcgTWFwKCkpKTtcbiAgfVxuICBpZiAoa2luZCA9PT0gJ3NldHRlcicpIHtcbiAgICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zKTtcbiAgICBvcHRpb25zLndyYXBwZWQgPSB0cnVlO1xuICB9XG4gIHByb3BlcnRpZXMuc2V0KGNvbnRleHQubmFtZSwgb3B0aW9ucyk7XG5cbiAgaWYgKGtpbmQgPT09ICdhY2Nlc3NvcicpIHtcbiAgICAvLyBTdGFuZGFyZCBkZWNvcmF0b3JzIGNhbm5vdCBkeW5hbWljYWxseSBtb2RpZnkgdGhlIGNsYXNzLCBzbyB3ZSBjYW4ndFxuICAgIC8vIHJlcGxhY2UgYSBmaWVsZCB3aXRoIGFjY2Vzc29ycy4gVGhlIHVzZXIgbXVzdCB1c2UgdGhlIG5ldyBgYWNjZXNzb3JgXG4gICAgLy8ga2V5d29yZCBpbnN0ZWFkLlxuICAgIGNvbnN0IHtuYW1lfSA9IGNvbnRleHQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldCh0aGlzOiBSZWFjdGl2ZUVsZW1lbnQsIHY6IFYpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSAoXG4gICAgICAgICAgdGFyZ2V0IGFzIENsYXNzQWNjZXNzb3JEZWNvcmF0b3JUYXJnZXQ8QywgVj5cbiAgICAgICAgKS5nZXQuY2FsbCh0aGlzIGFzIHVua25vd24gYXMgQyk7XG4gICAgICAgICh0YXJnZXQgYXMgQ2xhc3NBY2Nlc3NvckRlY29yYXRvclRhcmdldDxDLCBWPikuc2V0LmNhbGwoXG4gICAgICAgICAgdGhpcyBhcyB1bmtub3duIGFzIEMsXG4gICAgICAgICAgdlxuICAgICAgICApO1xuICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUsIG9wdGlvbnMpO1xuICAgICAgfSxcbiAgICAgIGluaXQodGhpczogUmVhY3RpdmVFbGVtZW50LCB2OiBWKTogViB7XG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLl8kY2hhbmdlUHJvcGVydHkobmFtZSwgdW5kZWZpbmVkLCBvcHRpb25zLCB2KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdjtcbiAgICAgIH0sXG4gICAgfSBhcyB1bmtub3duIGFzIENsYXNzQWNjZXNzb3JEZWNvcmF0b3JSZXN1bHQ8QywgVj47XG4gIH0gZWxzZSBpZiAoa2luZCA9PT0gJ3NldHRlcicpIHtcbiAgICBjb25zdCB7bmFtZX0gPSBjb250ZXh0O1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogUmVhY3RpdmVFbGVtZW50LCB2YWx1ZTogVikge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzW25hbWUgYXMga2V5b2YgUmVhY3RpdmVFbGVtZW50XTtcbiAgICAgICh0YXJnZXQgYXMgKHZhbHVlOiBWKSA9PiB2b2lkKS5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSwgb3B0aW9ucyk7XG4gICAgfSBhcyB1bmtub3duIGFzICh0aGlzOiBDLCB2YWx1ZTogVikgPT4gdm9pZDtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGRlY29yYXRvciBsb2NhdGlvbjogJHtraW5kfWApO1xufTtcblxuLyoqXG4gKiBBIGNsYXNzIGZpZWxkIG9yIGFjY2Vzc29yIGRlY29yYXRvciB3aGljaCBjcmVhdGVzIGEgcmVhY3RpdmUgcHJvcGVydHkgdGhhdFxuICogcmVmbGVjdHMgYSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSB2YWx1ZS4gV2hlbiBhIGRlY29yYXRlZCBwcm9wZXJ0eSBpcyBzZXRcbiAqIHRoZSBlbGVtZW50IHdpbGwgdXBkYXRlIGFuZCByZW5kZXIuIEEge0BsaW5rY29kZSBQcm9wZXJ0eURlY2xhcmF0aW9ufSBtYXlcbiAqIG9wdGlvbmFsbHkgYmUgc3VwcGxpZWQgdG8gY29uZmlndXJlIHByb3BlcnR5IGZlYXR1cmVzLlxuICpcbiAqIFRoaXMgZGVjb3JhdG9yIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIHB1YmxpYyBmaWVsZHMuIEFzIHB1YmxpYyBmaWVsZHMsXG4gKiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBjb25zaWRlcmVkIGFzIHByaW1hcmlseSBzZXR0YWJsZSBieSBlbGVtZW50IHVzZXJzLFxuICogZWl0aGVyIHZpYSBhdHRyaWJ1dGUgb3IgdGhlIHByb3BlcnR5IGl0c2VsZi5cbiAqXG4gKiBHZW5lcmFsbHksIHByb3BlcnRpZXMgdGhhdCBhcmUgY2hhbmdlZCBieSB0aGUgZWxlbWVudCBzaG91bGQgYmUgcHJpdmF0ZSBvclxuICogcHJvdGVjdGVkIGZpZWxkcyBhbmQgc2hvdWxkIHVzZSB0aGUge0BsaW5rY29kZSBzdGF0ZX0gZGVjb3JhdG9yLlxuICpcbiAqIEhvd2V2ZXIsIHNvbWV0aW1lcyBlbGVtZW50IGNvZGUgZG9lcyBuZWVkIHRvIHNldCBhIHB1YmxpYyBwcm9wZXJ0eS4gVGhpc1xuICogc2hvdWxkIHR5cGljYWxseSBvbmx5IGJlIGRvbmUgaW4gcmVzcG9uc2UgdG8gdXNlciBpbnRlcmFjdGlvbiwgYW5kIGFuIGV2ZW50XG4gKiBzaG91bGQgYmUgZmlyZWQgaW5mb3JtaW5nIHRoZSB1c2VyOyBmb3IgZXhhbXBsZSwgYSBjaGVja2JveCBzZXRzIGl0c1xuICogYGNoZWNrZWRgIHByb3BlcnR5IHdoZW4gY2xpY2tlZCBhbmQgZmlyZXMgYSBgY2hhbmdlZGAgZXZlbnQuIE11dGF0aW5nIHB1YmxpY1xuICogcHJvcGVydGllcyBzaG91bGQgdHlwaWNhbGx5IG5vdCBiZSBkb25lIGZvciBub24tcHJpbWl0aXZlIChvYmplY3Qgb3IgYXJyYXkpXG4gKiBwcm9wZXJ0aWVzLiBJbiBvdGhlciBjYXNlcyB3aGVuIGFuIGVsZW1lbnQgbmVlZHMgdG8gbWFuYWdlIHN0YXRlLCBhIHByaXZhdGVcbiAqIHByb3BlcnR5IGRlY29yYXRlZCB2aWEgdGhlIHtAbGlua2NvZGUgc3RhdGV9IGRlY29yYXRvciBzaG91bGQgYmUgdXNlZC4gV2hlblxuICogbmVlZGVkLCBzdGF0ZSBwcm9wZXJ0aWVzIGNhbiBiZSBpbml0aWFsaXplZCB2aWEgcHVibGljIHByb3BlcnRpZXMgdG9cbiAqIGZhY2lsaXRhdGUgY29tcGxleCBpbnRlcmFjdGlvbnMuXG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcbiAqICAgY2xpY2tlZCA9IGZhbHNlO1xuICogfVxuICogYGBgXG4gKiBAY2F0ZWdvcnkgRGVjb3JhdG9yXG4gKiBARXhwb3J0RGVjb3JhdGVkSXRlbXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5KG9wdGlvbnM/OiBQcm9wZXJ0eURlY2xhcmF0aW9uKTogUHJvcGVydHlEZWNvcmF0b3Ige1xuICByZXR1cm4gPEMgZXh0ZW5kcyBJbnRlcmZhY2U8UmVhY3RpdmVFbGVtZW50PiwgVj4oXG4gICAgcHJvdG9PclRhcmdldDpcbiAgICAgIHwgb2JqZWN0XG4gICAgICB8IENsYXNzQWNjZXNzb3JEZWNvcmF0b3JUYXJnZXQ8QywgVj5cbiAgICAgIHwgKCh2YWx1ZTogVikgPT4gdm9pZCksXG4gICAgbmFtZU9yQ29udGV4dDpcbiAgICAgIHwgUHJvcGVydHlLZXlcbiAgICAgIHwgQ2xhc3NBY2Nlc3NvckRlY29yYXRvckNvbnRleHQ8QywgVj5cbiAgICAgIHwgQ2xhc3NTZXR0ZXJEZWNvcmF0b3JDb250ZXh0PEMsIFY+XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgKTogYW55ID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIG5hbWVPckNvbnRleHQgPT09ICdvYmplY3QnXG4gICAgICAgID8gc3RhbmRhcmRQcm9wZXJ0eTxDLCBWPihcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBwcm90b09yVGFyZ2V0IGFzXG4gICAgICAgICAgICAgIHwgQ2xhc3NBY2Nlc3NvckRlY29yYXRvclRhcmdldDxDLCBWPlxuICAgICAgICAgICAgICB8ICgodmFsdWU6IFYpID0+IHZvaWQpLFxuICAgICAgICAgICAgbmFtZU9yQ29udGV4dCBhcyBTdGFuZGFyZFByb3BlcnR5Q29udGV4dDxDLCBWPlxuICAgICAgICAgIClcbiAgICAgICAgOiBsZWdhY3lQcm9wZXJ0eShcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBwcm90b09yVGFyZ2V0IGFzIE9iamVjdCxcbiAgICAgICAgICAgIG5hbWVPckNvbnRleHQgYXMgUHJvcGVydHlLZXlcbiAgICAgICAgICApXG4gICAgKSBhcyBQcm9wZXJ0eURlY29yYXRvcjtcbiAgfTtcbn1cbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLypcbiAqIElNUE9SVEFOVDogRm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0c2lja2xlIGFuZCB0aGUgQ2xvc3VyZSBKUyBjb21waWxlciwgYWxsXG4gKiBwcm9wZXJ0eSBkZWNvcmF0b3JzIChidXQgbm90IGNsYXNzIGRlY29yYXRvcnMpIGluIHRoaXMgZmlsZSB0aGF0IGhhdmVcbiAqIGFuIEBFeHBvcnREZWNvcmF0ZWRJdGVtcyBhbm5vdGF0aW9uIG11c3QgYmUgZGVmaW5lZCBhcyBhIHJlZ3VsYXIgZnVuY3Rpb24sXG4gKiBub3QgYW4gYXJyb3cgZnVuY3Rpb24uXG4gKi9cblxuaW1wb3J0IHtwcm9wZXJ0eX0gZnJvbSAnLi9wcm9wZXJ0eS5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEZWNsYXJhdGlvbjxUeXBlID0gdW5rbm93bj4ge1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IGluZGljYXRlcyBpZiBhIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGNoYW5nZWQgd2hlblxuICAgKiBpdCBpcyBzZXQuIFRoZSBmdW5jdGlvbiBzaG91bGQgdGFrZSB0aGUgYG5ld1ZhbHVlYCBhbmQgYG9sZFZhbHVlYCBhbmRcbiAgICogcmV0dXJuIGB0cnVlYCBpZiBhbiB1cGRhdGUgc2hvdWxkIGJlIHJlcXVlc3RlZC5cbiAgICovXG4gIGhhc0NoYW5nZWQ/KHZhbHVlOiBUeXBlLCBvbGRWYWx1ZTogVHlwZSk6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgdXNlIFN0YXRlRGVjbGFyYXRpb25cbiAqL1xuZXhwb3J0IHR5cGUgSW50ZXJuYWxQcm9wZXJ0eURlY2xhcmF0aW9uPFR5cGUgPSB1bmtub3duPiA9XG4gIFN0YXRlRGVjbGFyYXRpb248VHlwZT47XG5cbi8qKlxuICogRGVjbGFyZXMgYSBwcml2YXRlIG9yIHByb3RlY3RlZCByZWFjdGl2ZSBwcm9wZXJ0eSB0aGF0IHN0aWxsIHRyaWdnZXJzXG4gKiB1cGRhdGVzIHRvIHRoZSBlbGVtZW50IHdoZW4gaXQgY2hhbmdlcy4gSXQgZG9lcyBub3QgcmVmbGVjdCBmcm9tIHRoZVxuICogY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUuXG4gKlxuICogUHJvcGVydGllcyBkZWNsYXJlZCB0aGlzIHdheSBtdXN0IG5vdCBiZSB1c2VkIGZyb20gSFRNTCBvciBIVE1MIHRlbXBsYXRpbmdcbiAqIHN5c3RlbXMsIHRoZXkncmUgc29sZWx5IGZvciBwcm9wZXJ0aWVzIGludGVybmFsIHRvIHRoZSBlbGVtZW50LiBUaGVzZVxuICogcHJvcGVydGllcyBtYXkgYmUgcmVuYW1lZCBieSBvcHRpbWl6YXRpb24gdG9vbHMgbGlrZSBjbG9zdXJlIGNvbXBpbGVyLlxuICogQGNhdGVnb3J5IERlY29yYXRvclxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhdGUob3B0aW9ucz86IFN0YXRlRGVjbGFyYXRpb24pIHtcbiAgcmV0dXJuIHByb3BlcnR5KHtcbiAgICAuLi5vcHRpb25zLFxuICAgIC8vIEFkZCBib3RoIGBzdGF0ZWAgYW5kIGBhdHRyaWJ1dGVgIGJlY2F1c2Ugd2UgZm91bmQgYSB0aGlyZCBwYXJ0eVxuICAgIC8vIGNvbnRyb2xsZXIgdGhhdCBpcyBrZXlpbmcgb2ZmIG9mIFByb3BlcnR5T3B0aW9ucy5zdGF0ZSB0byBkZXRlcm1pbmVcbiAgICAvLyB3aGV0aGVyIGEgZmllbGQgaXMgYSBwcml2YXRlIGludGVybmFsIHByb3BlcnR5IG9yIG5vdC5cbiAgICBzdGF0ZTogdHJ1ZSxcbiAgICBhdHRyaWJ1dGU6IGZhbHNlLFxuICB9KTtcbn1cbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuaW1wb3J0IHtcbiAgXyRMSCxcbiAgUGFydCxcbiAgRGlyZWN0aXZlUGFyZW50LFxuICBDb21waWxlZFRlbXBsYXRlUmVzdWx0LFxuICBNYXliZUNvbXBpbGVkVGVtcGxhdGVSZXN1bHQsXG4gIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCxcbn0gZnJvbSAnLi9saXQtaHRtbC5qcyc7XG5pbXBvcnQge1xuICBEaXJlY3RpdmVSZXN1bHQsXG4gIERpcmVjdGl2ZUNsYXNzLFxuICBQYXJ0SW5mbyxcbiAgQXR0cmlidXRlUGFydEluZm8sXG59IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbnR5cGUgUHJpbWl0aXZlID0gbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBzeW1ib2wgfCBiaWdpbnQ7XG5cbmNvbnN0IHtfQ2hpbGRQYXJ0OiBDaGlsZFBhcnR9ID0gXyRMSDtcblxudHlwZSBDaGlsZFBhcnQgPSBJbnN0YW5jZVR5cGU8dHlwZW9mIENoaWxkUGFydD47XG5cbmNvbnN0IEVOQUJMRV9TSEFEWURPTV9OT1BBVENIID0gdHJ1ZTtcblxuY29uc3Qgd3JhcCA9XG4gIEVOQUJMRV9TSEFEWURPTV9OT1BBVENIICYmXG4gIHdpbmRvdy5TaGFkeURPTT8uaW5Vc2UgJiZcbiAgd2luZG93LlNoYWR5RE9NPy5ub1BhdGNoID09PSB0cnVlXG4gICAgPyB3aW5kb3cuU2hhZHlET00hLndyYXBcbiAgICA6IChub2RlOiBOb2RlKSA9PiBub2RlO1xuXG4vKipcbiAqIFRlc3RzIGlmIGEgdmFsdWUgaXMgYSBwcmltaXRpdmUgdmFsdWUuXG4gKlxuICogU2VlIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXR5cGVvZi1vcGVyYXRvclxuICovXG5leHBvcnQgY29uc3QgaXNQcmltaXRpdmUgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBQcmltaXRpdmUgPT5cbiAgdmFsdWUgPT09IG51bGwgfHwgKHR5cGVvZiB2YWx1ZSAhPSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUgIT0gJ2Z1bmN0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBUZW1wbGF0ZVJlc3VsdFR5cGUgPSB7XG4gIEhUTUw6IDEsXG4gIFNWRzogMixcbiAgTUFUSE1MOiAzLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgVGVtcGxhdGVSZXN1bHRUeXBlID1cbiAgKHR5cGVvZiBUZW1wbGF0ZVJlc3VsdFR5cGUpW2tleW9mIHR5cGVvZiBUZW1wbGF0ZVJlc3VsdFR5cGVdO1xuXG50eXBlIElzVGVtcGxhdGVSZXN1bHQgPSB7XG4gICh2YWw6IHVua25vd24pOiB2YWwgaXMgTWF5YmVDb21waWxlZFRlbXBsYXRlUmVzdWx0O1xuICA8VCBleHRlbmRzIFRlbXBsYXRlUmVzdWx0VHlwZT4oXG4gICAgdmFsOiB1bmtub3duLFxuICAgIHR5cGU6IFRcbiAgKTogdmFsIGlzIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPjtcbn07XG5cbi8qKlxuICogVGVzdHMgaWYgYSB2YWx1ZSBpcyBhIFRlbXBsYXRlUmVzdWx0IG9yIGEgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVGVtcGxhdGVSZXN1bHQ6IElzVGVtcGxhdGVSZXN1bHQgPSAoXG4gIHZhbHVlOiB1bmtub3duLFxuICB0eXBlPzogVGVtcGxhdGVSZXN1bHRUeXBlXG4pOiB2YWx1ZSBpcyBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQgPT5cbiAgdHlwZSA9PT0gdW5kZWZpbmVkXG4gICAgPyAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgKHZhbHVlIGFzIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCk/LlsnXyRsaXRUeXBlJCddICE9PSB1bmRlZmluZWRcbiAgICA6ICh2YWx1ZSBhcyBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQpPy5bJ18kbGl0VHlwZSQnXSA9PT0gdHlwZTtcblxuLyoqXG4gKiBUZXN0cyBpZiBhIHZhbHVlIGlzIGEgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdCA9IChcbiAgdmFsdWU6IHVua25vd25cbik6IHZhbHVlIGlzIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQgPT4ge1xuICByZXR1cm4gKHZhbHVlIGFzIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQpPy5bJ18kbGl0VHlwZSQnXT8uaCAhPSBudWxsO1xufTtcblxuLyoqXG4gKiBUZXN0cyBpZiBhIHZhbHVlIGlzIGEgRGlyZWN0aXZlUmVzdWx0LlxuICovXG5leHBvcnQgY29uc3QgaXNEaXJlY3RpdmVSZXN1bHQgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBEaXJlY3RpdmVSZXN1bHQgPT5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCk/LlsnXyRsaXREaXJlY3RpdmUkJ10gIT09IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIERpcmVjdGl2ZSBjbGFzcyBmb3IgYSBEaXJlY3RpdmVSZXN1bHRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpcmVjdGl2ZUNsYXNzID0gKHZhbHVlOiB1bmtub3duKTogRGlyZWN0aXZlQ2xhc3MgfCB1bmRlZmluZWQgPT5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCk/LlsnXyRsaXREaXJlY3RpdmUkJ107XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciBhIHBhcnQgaGFzIG9ubHkgYSBzaW5nbGUtZXhwcmVzc2lvbiB3aXRoIG5vIHN0cmluZ3MgdG9cbiAqIGludGVycG9sYXRlIGJldHdlZW4uXG4gKlxuICogT25seSBBdHRyaWJ1dGVQYXJ0IGFuZCBQcm9wZXJ0eVBhcnQgY2FuIGhhdmUgbXVsdGlwbGUgZXhwcmVzc2lvbnMuXG4gKiBNdWx0aS1leHByZXNzaW9uIHBhcnRzIGhhdmUgYSBgc3RyaW5nc2AgcHJvcGVydHkgYW5kIHNpbmdsZS1leHByZXNzaW9uXG4gKiBwYXJ0cyBkbyBub3QuXG4gKi9cbmV4cG9ydCBjb25zdCBpc1NpbmdsZUV4cHJlc3Npb24gPSAocGFydDogUGFydEluZm8pID0+XG4gIChwYXJ0IGFzIEF0dHJpYnV0ZVBhcnRJbmZvKS5zdHJpbmdzID09PSB1bmRlZmluZWQ7XG5cbmNvbnN0IGNyZWF0ZU1hcmtlciA9ICgpID0+IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuXG4vKipcbiAqIEluc2VydHMgYSBDaGlsZFBhcnQgaW50byB0aGUgZ2l2ZW4gY29udGFpbmVyIENoaWxkUGFydCdzIERPTSwgZWl0aGVyIGF0IHRoZVxuICogZW5kIG9mIHRoZSBjb250YWluZXIgQ2hpbGRQYXJ0LCBvciBiZWZvcmUgdGhlIG9wdGlvbmFsIGByZWZQYXJ0YC5cbiAqXG4gKiBUaGlzIGRvZXMgbm90IGFkZCB0aGUgcGFydCB0byB0aGUgY29udGFpbmVyUGFydCdzIGNvbW1pdHRlZCB2YWx1ZS4gVGhhdCBtdXN0XG4gKiBiZSBkb25lIGJ5IGNhbGxlcnMuXG4gKlxuICogQHBhcmFtIGNvbnRhaW5lclBhcnQgUGFydCB3aXRoaW4gd2hpY2ggdG8gYWRkIHRoZSBuZXcgQ2hpbGRQYXJ0XG4gKiBAcGFyYW0gcmVmUGFydCBQYXJ0IGJlZm9yZSB3aGljaCB0byBhZGQgdGhlIG5ldyBDaGlsZFBhcnQ7IHdoZW4gb21pdHRlZCB0aGVcbiAqICAgICBwYXJ0IGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGBjb250YWluZXJQYXJ0YFxuICogQHBhcmFtIHBhcnQgUGFydCB0byBpbnNlcnQsIG9yIHVuZGVmaW5lZCB0byBjcmVhdGUgYSBuZXcgcGFydFxuICovXG5leHBvcnQgY29uc3QgaW5zZXJ0UGFydCA9IChcbiAgY29udGFpbmVyUGFydDogQ2hpbGRQYXJ0LFxuICByZWZQYXJ0PzogQ2hpbGRQYXJ0LFxuICBwYXJ0PzogQ2hpbGRQYXJ0XG4pOiBDaGlsZFBhcnQgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSB3cmFwKGNvbnRhaW5lclBhcnQuXyRzdGFydE5vZGUpLnBhcmVudE5vZGUhO1xuXG4gIGNvbnN0IHJlZk5vZGUgPVxuICAgIHJlZlBhcnQgPT09IHVuZGVmaW5lZCA/IGNvbnRhaW5lclBhcnQuXyRlbmROb2RlIDogcmVmUGFydC5fJHN0YXJ0Tm9kZTtcblxuICBpZiAocGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3Qgc3RhcnROb2RlID0gd3JhcChjb250YWluZXIpLmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgcmVmTm9kZSk7XG4gICAgY29uc3QgZW5kTm9kZSA9IHdyYXAoY29udGFpbmVyKS5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIHJlZk5vZGUpO1xuICAgIHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgc3RhcnROb2RlLFxuICAgICAgZW5kTm9kZSxcbiAgICAgIGNvbnRhaW5lclBhcnQsXG4gICAgICBjb250YWluZXJQYXJ0Lm9wdGlvbnNcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGVuZE5vZGUgPSB3cmFwKHBhcnQuXyRlbmROb2RlISkubmV4dFNpYmxpbmc7XG4gICAgY29uc3Qgb2xkUGFyZW50ID0gcGFydC5fJHBhcmVudDtcbiAgICBjb25zdCBwYXJlbnRDaGFuZ2VkID0gb2xkUGFyZW50ICE9PSBjb250YWluZXJQYXJ0O1xuICAgIGlmIChwYXJlbnRDaGFuZ2VkKSB7XG4gICAgICBwYXJ0Ll8kcmVwYXJlbnREaXNjb25uZWN0YWJsZXM/Lihjb250YWluZXJQYXJ0KTtcbiAgICAgIC8vIE5vdGUgdGhhdCBhbHRob3VnaCBgXyRyZXBhcmVudERpc2Nvbm5lY3RhYmxlc2AgdXBkYXRlcyB0aGUgcGFydCdzXG4gICAgICAvLyBgXyRwYXJlbnRgIHJlZmVyZW5jZSBhZnRlciB1bmxpbmtpbmcgZnJvbSBpdHMgY3VycmVudCBwYXJlbnQsIHRoYXRcbiAgICAgIC8vIG1ldGhvZCBvbmx5IGV4aXN0cyBpZiBEaXNjb25uZWN0YWJsZXMgYXJlIHByZXNlbnQsIHNvIHdlIG5lZWQgdG9cbiAgICAgIC8vIHVuY29uZGl0aW9uYWxseSBzZXQgaXQgaGVyZVxuICAgICAgcGFydC5fJHBhcmVudCA9IGNvbnRhaW5lclBhcnQ7XG4gICAgICAvLyBTaW5jZSB0aGUgXyRpc0Nvbm5lY3RlZCBnZXR0ZXIgaXMgc29tZXdoYXQgY29zdGx5LCBvbmx5XG4gICAgICAvLyByZWFkIGl0IG9uY2Ugd2Uga25vdyB0aGUgc3VidHJlZSBoYXMgZGlyZWN0aXZlcyB0aGF0IG5lZWRcbiAgICAgIC8vIHRvIGJlIG5vdGlmaWVkXG4gICAgICBsZXQgbmV3Q29ubmVjdGlvblN0YXRlO1xuICAgICAgaWYgKFxuICAgICAgICBwYXJ0Ll8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAobmV3Q29ubmVjdGlvblN0YXRlID0gY29udGFpbmVyUGFydC5fJGlzQ29ubmVjdGVkKSAhPT1cbiAgICAgICAgICBvbGRQYXJlbnQhLl8kaXNDb25uZWN0ZWRcbiAgICAgICkge1xuICAgICAgICBwYXJ0Ll8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQobmV3Q29ubmVjdGlvblN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuZE5vZGUgIT09IHJlZk5vZGUgfHwgcGFyZW50Q2hhbmdlZCkge1xuICAgICAgbGV0IHN0YXJ0OiBOb2RlIHwgbnVsbCA9IHBhcnQuXyRzdGFydE5vZGU7XG4gICAgICB3aGlsZSAoc3RhcnQgIT09IGVuZE5vZGUpIHtcbiAgICAgICAgY29uc3QgbjogTm9kZSB8IG51bGwgPSB3cmFwKHN0YXJ0ISkubmV4dFNpYmxpbmc7XG4gICAgICAgIHdyYXAoY29udGFpbmVyKS5pbnNlcnRCZWZvcmUoc3RhcnQhLCByZWZOb2RlKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0O1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiBhIFBhcnQuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCB0byBzZXQvdXBkYXRlIHRoZSB2YWx1ZSBvZiB1c2VyLWNyZWF0ZWRcbiAqIHBhcnRzIChpLmUuIHRob3NlIGNyZWF0ZWQgdXNpbmcgYGluc2VydFBhcnRgKTsgaXQgc2hvdWxkIG5vdCBiZSB1c2VkXG4gKiBieSBkaXJlY3RpdmVzIHRvIHNldCB0aGUgdmFsdWUgb2YgdGhlIGRpcmVjdGl2ZSdzIGNvbnRhaW5lciBwYXJ0LiBEaXJlY3RpdmVzXG4gKiBzaG91bGQgcmV0dXJuIGEgdmFsdWUgZnJvbSBgdXBkYXRlYC9gcmVuZGVyYCB0byB1cGRhdGUgdGhlaXIgcGFydCBzdGF0ZS5cbiAqXG4gKiBGb3IgZGlyZWN0aXZlcyB0aGF0IHJlcXVpcmUgc2V0dGluZyB0aGVpciBwYXJ0IHZhbHVlIGFzeW5jaHJvbm91c2x5LCB0aGV5XG4gKiBzaG91bGQgZXh0ZW5kIGBBc3luY0RpcmVjdGl2ZWAgYW5kIGNhbGwgYHRoaXMuc2V0VmFsdWUoKWAuXG4gKlxuICogQHBhcmFtIHBhcnQgUGFydCB0byBzZXRcbiAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSB0byBzZXRcbiAqIEBwYXJhbSBpbmRleCBGb3IgYEF0dHJpYnV0ZVBhcnRgcywgdGhlIGluZGV4IHRvIHNldFxuICogQHBhcmFtIGRpcmVjdGl2ZVBhcmVudCBVc2VkIGludGVybmFsbHk7IHNob3VsZCBub3QgYmUgc2V0IGJ5IHVzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IHNldENoaWxkUGFydFZhbHVlID0gPFQgZXh0ZW5kcyBDaGlsZFBhcnQ+KFxuICBwYXJ0OiBULFxuICB2YWx1ZTogdW5rbm93bixcbiAgZGlyZWN0aXZlUGFyZW50OiBEaXJlY3RpdmVQYXJlbnQgPSBwYXJ0XG4pOiBUID0+IHtcbiAgcGFydC5fJHNldFZhbHVlKHZhbHVlLCBkaXJlY3RpdmVQYXJlbnQpO1xuICByZXR1cm4gcGFydDtcbn07XG5cbi8vIEEgc2VudGluZWwgdmFsdWUgdGhhdCBjYW4gbmV2ZXIgYXBwZWFyIGFzIGEgcGFydCB2YWx1ZSBleGNlcHQgd2hlbiBzZXQgYnlcbi8vIGxpdmUoKS4gVXNlZCB0byBmb3JjZSBhIGRpcnR5LWNoZWNrIHRvIGZhaWwgYW5kIGNhdXNlIGEgcmUtcmVuZGVyLlxuY29uc3QgUkVTRVRfVkFMVUUgPSB7fTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjb21taXR0ZWQgdmFsdWUgb2YgYSBDaGlsZFBhcnQgZGlyZWN0bHkgd2l0aG91dCB0cmlnZ2VyaW5nIHRoZVxuICogY29tbWl0IHN0YWdlIG9mIHRoZSBwYXJ0LlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGluIGNhc2VzIHdoZXJlIGEgZGlyZWN0aXZlIG5lZWRzIHRvIHVwZGF0ZSB0aGUgcGFydCBzdWNoXG4gKiB0aGF0IHRoZSBuZXh0IHVwZGF0ZSBkZXRlY3RzIGEgdmFsdWUgY2hhbmdlIG9yIG5vdC4gV2hlbiB2YWx1ZSBpcyBvbWl0dGVkLFxuICogdGhlIG5leHQgdXBkYXRlIHdpbGwgYmUgZ3VhcmFudGVlZCB0byBiZSBkZXRlY3RlZCBhcyBhIGNoYW5nZS5cbiAqXG4gKiBAcGFyYW0gcGFydFxuICogQHBhcmFtIHZhbHVlXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDb21taXR0ZWRWYWx1ZSA9IChwYXJ0OiBQYXJ0LCB2YWx1ZTogdW5rbm93biA9IFJFU0VUX1ZBTFVFKSA9PlxuICAocGFydC5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWUpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGNvbW1pdHRlZCB2YWx1ZSBvZiBhIENoaWxkUGFydC5cbiAqXG4gKiBUaGUgY29tbWl0dGVkIHZhbHVlIGlzIHVzZWQgZm9yIGNoYW5nZSBkZXRlY3Rpb24gYW5kIGVmZmljaWVudCB1cGRhdGVzIG9mXG4gKiB0aGUgcGFydC4gSXQgY2FuIGRpZmZlciBmcm9tIHRoZSB2YWx1ZSBzZXQgYnkgdGhlIHRlbXBsYXRlIG9yIGRpcmVjdGl2ZSBpblxuICogY2FzZXMgd2hlcmUgdGhlIHRlbXBsYXRlIHZhbHVlIGlzIHRyYW5zZm9ybWVkIGJlZm9yZSBiZWluZyBjb21taXR0ZWQuXG4gKlxuICogLSBgVGVtcGxhdGVSZXN1bHRgcyBhcmUgY29tbWl0dGVkIGFzIGEgYFRlbXBsYXRlSW5zdGFuY2VgXG4gKiAtIEl0ZXJhYmxlcyBhcmUgY29tbWl0dGVkIGFzIGBBcnJheTxDaGlsZFBhcnQ+YFxuICogLSBBbGwgb3RoZXIgdHlwZXMgYXJlIGNvbW1pdHRlZCBhcyB0aGUgdGVtcGxhdGUgdmFsdWUgb3IgdmFsdWUgcmV0dXJuZWQgb3JcbiAqICAgc2V0IGJ5IGEgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSBwYXJ0XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb21taXR0ZWRWYWx1ZSA9IChwYXJ0OiBDaGlsZFBhcnQpID0+IHBhcnQuXyRjb21taXR0ZWRWYWx1ZTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgQ2hpbGRQYXJ0IGZyb20gdGhlIERPTSwgaW5jbHVkaW5nIGFueSBvZiBpdHMgY29udGVudCBhbmQgbWFya2Vycy5cbiAqXG4gKiBOb3RlOiBUaGUgb25seSBkaWZmZXJlbmNlIGJldHdlZW4gdGhpcyBhbmQgY2xlYXJQYXJ0KCkgaXMgdGhhdCB0aGlzIGFsc29cbiAqIHJlbW92ZXMgdGhlIHBhcnQncyBzdGFydCBub2RlLiBUaGlzIG1lYW5zIHRoYXQgdGhlIENoaWxkUGFydCBtdXN0IG93biBpdHNcbiAqIHN0YXJ0IG5vZGUsIGllIGl0IG11c3QgYmUgYSBtYXJrZXIgbm9kZSBzcGVjaWZpY2FsbHkgZm9yIHRoaXMgcGFydCBhbmQgbm90IGFuXG4gKiBhbmNob3IgZnJvbSBzdXJyb3VuZGluZyBjb250ZW50LlxuICpcbiAqIEBwYXJhbSBwYXJ0IFRoZSBQYXJ0IHRvIHJlbW92ZVxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlUGFydCA9IChwYXJ0OiBDaGlsZFBhcnQpID0+IHtcbiAgcGFydC5fJGNsZWFyKCk7XG4gIHBhcnQuXyRzdGFydE5vZGUucmVtb3ZlKCk7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYXJQYXJ0ID0gKHBhcnQ6IENoaWxkUGFydCkgPT4ge1xuICBwYXJ0Ll8kY2xlYXIoKTtcbn07XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbmltcG9ydCB7RGlzY29ubmVjdGFibGUsIFBhcnR9IGZyb20gJy4vbGl0LWh0bWwuanMnO1xuXG5leHBvcnQge1xuICBBdHRyaWJ1dGVQYXJ0LFxuICBCb29sZWFuQXR0cmlidXRlUGFydCxcbiAgQ2hpbGRQYXJ0LFxuICBFbGVtZW50UGFydCxcbiAgRXZlbnRQYXJ0LFxuICBQYXJ0LFxuICBQcm9wZXJ0eVBhcnQsXG59IGZyb20gJy4vbGl0LWh0bWwuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpcmVjdGl2ZUNsYXNzIHtcbiAgbmV3IChwYXJ0OiBQYXJ0SW5mbyk6IERpcmVjdGl2ZTtcbn1cblxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgdHlwZSBleHRyYWN0cyB0aGUgc2lnbmF0dXJlIG9mIGEgZGlyZWN0aXZlIGNsYXNzJ3MgcmVuZGVyKClcbiAqIG1ldGhvZCBzbyB3ZSBjYW4gdXNlIGl0IGZvciB0aGUgdHlwZSBvZiB0aGUgZ2VuZXJhdGVkIGRpcmVjdGl2ZSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgRGlyZWN0aXZlUGFyYW1ldGVyczxDIGV4dGVuZHMgRGlyZWN0aXZlPiA9IFBhcmFtZXRlcnM8Q1sncmVuZGVyJ10+O1xuXG4vKipcbiAqIEEgZ2VuZXJhdGVkIGRpcmVjdGl2ZSBmdW5jdGlvbiBkb2Vzbid0IGV2YWx1YXRlIHRoZSBkaXJlY3RpdmUsIGJ1dCBqdXN0XG4gKiByZXR1cm5zIGEgRGlyZWN0aXZlUmVzdWx0IG9iamVjdCB0aGF0IGNhcHR1cmVzIHRoZSBhcmd1bWVudHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGlyZWN0aXZlUmVzdWx0PEMgZXh0ZW5kcyBEaXJlY3RpdmVDbGFzcyA9IERpcmVjdGl2ZUNsYXNzPiB7XG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIFsnXyRsaXREaXJlY3RpdmUkJ106IEM7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgdmFsdWVzOiBEaXJlY3RpdmVQYXJhbWV0ZXJzPEluc3RhbmNlVHlwZTxDPj47XG59XG5cbmV4cG9ydCBjb25zdCBQYXJ0VHlwZSA9IHtcbiAgQVRUUklCVVRFOiAxLFxuICBDSElMRDogMixcbiAgUFJPUEVSVFk6IDMsXG4gIEJPT0xFQU5fQVRUUklCVVRFOiA0LFxuICBFVkVOVDogNSxcbiAgRUxFTUVOVDogNixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIFBhcnRUeXBlID0gKHR5cGVvZiBQYXJ0VHlwZSlba2V5b2YgdHlwZW9mIFBhcnRUeXBlXTtcblxuZXhwb3J0IGludGVyZmFjZSBDaGlsZFBhcnRJbmZvIHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIFBhcnRUeXBlLkNISUxEO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF0dHJpYnV0ZVBhcnRJbmZvIHtcbiAgcmVhZG9ubHkgdHlwZTpcbiAgICB8IHR5cGVvZiBQYXJ0VHlwZS5BVFRSSUJVVEVcbiAgICB8IHR5cGVvZiBQYXJ0VHlwZS5QUk9QRVJUWVxuICAgIHwgdHlwZW9mIFBhcnRUeXBlLkJPT0xFQU5fQVRUUklCVVRFXG4gICAgfCB0eXBlb2YgUGFydFR5cGUuRVZFTlQ7XG4gIHJlYWRvbmx5IHN0cmluZ3M/OiBSZWFkb25seUFycmF5PHN0cmluZz47XG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbiAgcmVhZG9ubHkgdGFnTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRQYXJ0SW5mbyB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBQYXJ0VHlwZS5FTEVNRU5UO1xufVxuXG4vKipcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBwYXJ0IGEgZGlyZWN0aXZlIGlzIGJvdW5kIHRvLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBjaGVja2luZyB0aGF0IGEgZGlyZWN0aXZlIGlzIGF0dGFjaGVkIHRvIGEgdmFsaWQgcGFydCxcbiAqIHN1Y2ggYXMgd2l0aCBkaXJlY3RpdmUgdGhhdCBjYW4gb25seSBiZSB1c2VkIG9uIGF0dHJpYnV0ZSBiaW5kaW5ncy5cbiAqL1xuZXhwb3J0IHR5cGUgUGFydEluZm8gPSBDaGlsZFBhcnRJbmZvIHwgQXR0cmlidXRlUGFydEluZm8gfCBFbGVtZW50UGFydEluZm87XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVzZXItZmFjaW5nIGRpcmVjdGl2ZSBmdW5jdGlvbiBmcm9tIGEgRGlyZWN0aXZlIGNsYXNzLiBUaGlzXG4gKiBmdW5jdGlvbiBoYXMgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyB0aGUgZGlyZWN0aXZlJ3MgcmVuZGVyKCkgbWV0aG9kLlxuICovXG5leHBvcnQgY29uc3QgZGlyZWN0aXZlID1cbiAgPEMgZXh0ZW5kcyBEaXJlY3RpdmVDbGFzcz4oYzogQykgPT5cbiAgKC4uLnZhbHVlczogRGlyZWN0aXZlUGFyYW1ldGVyczxJbnN0YW5jZVR5cGU8Qz4+KTogRGlyZWN0aXZlUmVzdWx0PEM+ID0+ICh7XG4gICAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICBbJ18kbGl0RGlyZWN0aXZlJCddOiBjLFxuICAgIHZhbHVlcyxcbiAgfSk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY3JlYXRpbmcgY3VzdG9tIGRpcmVjdGl2ZXMuIFVzZXJzIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcyxcbiAqIGltcGxlbWVudCBgcmVuZGVyYCBhbmQvb3IgYHVwZGF0ZWAsIGFuZCB0aGVuIHBhc3MgdGhlaXIgc3ViY2xhc3MgdG9cbiAqIGBkaXJlY3RpdmVgLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRGlyZWN0aXZlIGltcGxlbWVudHMgRGlzY29ubmVjdGFibGUge1xuICAvL0BpbnRlcm5hbFxuICBfX3BhcnQhOiBQYXJ0O1xuICAvL0BpbnRlcm5hbFxuICBfX2F0dHJpYnV0ZUluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIC8vQGludGVybmFsXG4gIF9fZGlyZWN0aXZlPzogRGlyZWN0aXZlO1xuXG4gIC8vQGludGVybmFsXG4gIF8kcGFyZW50ITogRGlzY29ubmVjdGFibGU7XG5cbiAgLy8gVGhlc2Ugd2lsbCBvbmx5IGV4aXN0IG9uIHRoZSBBc3luY0RpcmVjdGl2ZSBzdWJjbGFzc1xuICAvL0BpbnRlcm5hbFxuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+O1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAvL0BpbnRlcm5hbFxuICBbJ18kbm90aWZ5RGlyZWN0aXZlQ29ubmVjdGlvbkNoYW5nZWQnXT8oaXNDb25uZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKF9wYXJ0SW5mbzogUGFydEluZm8pIHt9XG5cbiAgLy8gU2VlIGNvbW1lbnQgaW4gRGlzY29ubmVjdGFibGUgaW50ZXJmYWNlIGZvciB3aHkgdGhpcyBpcyBhIGdldHRlclxuICBnZXQgXyRpc0Nvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fJHBhcmVudC5fJGlzQ29ubmVjdGVkO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGluaXRpYWxpemUoXG4gICAgcGFydDogUGFydCxcbiAgICBwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlLFxuICAgIGF0dHJpYnV0ZUluZGV4OiBudW1iZXIgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgdGhpcy5fX3BhcnQgPSBwYXJ0O1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5fX2F0dHJpYnV0ZUluZGV4ID0gYXR0cmlidXRlSW5kZXg7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHJlc29sdmUocGFydDogUGFydCwgcHJvcHM6IEFycmF5PHVua25vd24+KTogdW5rbm93biB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKHBhcnQsIHByb3BzKTtcbiAgfVxuXG4gIGFic3RyYWN0IHJlbmRlciguLi5wcm9wczogQXJyYXk8dW5rbm93bj4pOiB1bmtub3duO1xuXG4gIHVwZGF0ZShfcGFydDogUGFydCwgcHJvcHM6IEFycmF5PHVua25vd24+KTogdW5rbm93biB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKC4uLnByb3BzKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG4vKipcbiAqIE92ZXJ2aWV3OlxuICpcbiAqIFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFkZCBzdXBwb3J0IGZvciBhbiBhc3luYyBgc2V0VmFsdWVgIEFQSSBhbmRcbiAqIGBkaXNjb25uZWN0ZWRgIGNhbGxiYWNrIHRvIGRpcmVjdGl2ZXMgd2l0aCB0aGUgbGVhc3QgaW1wYWN0IG9uIHRoZSBjb3JlXG4gKiBydW50aW1lIG9yIHBheWxvYWQgd2hlbiB0aGF0IGZlYXR1cmUgaXMgbm90IHVzZWQuXG4gKlxuICogVGhlIHN0cmF0ZWd5IGlzIHRvIGludHJvZHVjZSBhIGBBc3luY0RpcmVjdGl2ZWAgc3ViY2xhc3Mgb2ZcbiAqIGBEaXJlY3RpdmVgIHRoYXQgY2xpbWJzIHRoZSBcInBhcmVudFwiIHRyZWUgaW4gaXRzIGNvbnN0cnVjdG9yIHRvIG5vdGUgd2hpY2hcbiAqIGJyYW5jaGVzIG9mIGxpdC1odG1sJ3MgXCJsb2dpY2FsIHRyZWVcIiBvZiBkYXRhIHN0cnVjdHVyZXMgY29udGFpbiBzdWNoXG4gKiBkaXJlY3RpdmVzIGFuZCB0aHVzIG5lZWQgdG8gYmUgY3Jhd2xlZCB3aGVuIGEgc3VidHJlZSBpcyBiZWluZyBjbGVhcmVkIChvclxuICogbWFudWFsbHkgZGlzY29ubmVjdGVkKSBpbiBvcmRlciB0byBydW4gdGhlIGBkaXNjb25uZWN0ZWRgIGNhbGxiYWNrLlxuICpcbiAqIFRoZSBcIm5vZGVzXCIgb2YgdGhlIGxvZ2ljYWwgdHJlZSBpbmNsdWRlIFBhcnRzLCBUZW1wbGF0ZUluc3RhbmNlcyAoZm9yIHdoZW4gYVxuICogVGVtcGxhdGVSZXN1bHQgaXMgY29tbWl0dGVkIHRvIGEgdmFsdWUgb2YgYSBDaGlsZFBhcnQpLCBhbmQgRGlyZWN0aXZlczsgdGhlc2VcbiAqIGFsbCBpbXBsZW1lbnQgYSBjb21tb24gaW50ZXJmYWNlIGNhbGxlZCBgRGlzY29ubmVjdGFibGVDaGlsZGAuIEVhY2ggaGFzIGFcbiAqIGBfJHBhcmVudGAgcmVmZXJlbmNlIHdoaWNoIGlzIHNldCBkdXJpbmcgY29uc3RydWN0aW9uIGluIHRoZSBjb3JlIGNvZGUsIGFuZCBhXG4gKiBgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuYCBmaWVsZCB3aGljaCBpcyBpbml0aWFsbHkgdW5kZWZpbmVkLlxuICpcbiAqIFRoZSBzcGFyc2UgdHJlZSBjcmVhdGVkIGJ5IG1lYW5zIG9mIHRoZSBgQXN5bmNEaXJlY3RpdmVgIGNvbnN0cnVjdG9yXG4gKiBjcmF3bGluZyB1cCB0aGUgYF8kcGFyZW50YCB0cmVlIGFuZCBwbGFjaW5nIGEgYF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbmAgU2V0XG4gKiBvbiBlYWNoIHBhcmVudCB0aGF0IGluY2x1ZGVzIGVhY2ggY2hpbGQgdGhhdCBjb250YWlucyBhXG4gKiBgQXN5bmNEaXJlY3RpdmVgIGRpcmVjdGx5IG9yIHRyYW5zaXRpdmVseSB2aWEgaXRzIGNoaWxkcmVuLiBJbiBvcmRlciB0b1xuICogbm90aWZ5IGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlcyBhbmQgZGlzY29ubmVjdCAob3IgcmVjb25uZWN0KSBhIHRyZWUsIHRoZVxuICogYF8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWRgIEFQSSBpcyBwYXRjaGVkIG9udG8gQ2hpbGRQYXJ0cyBhcyBhIGRpcmVjdGl2ZVxuICogY2xpbWJzIHRoZSBwYXJlbnQgdHJlZSwgd2hpY2ggaXMgY2FsbGVkIGJ5IHRoZSBjb3JlIHdoZW4gY2xlYXJpbmcgYSBwYXJ0IGlmXG4gKiBpdCBleGlzdHMuIFdoZW4gY2FsbGVkLCB0aGF0IG1ldGhvZCBpdGVyYXRlcyBvdmVyIHRoZSBzcGFyc2UgdHJlZSBvZlxuICogU2V0PERpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4+IGJ1aWx0IHVwIGJ5IEFzeW5jRGlyZWN0aXZlcywgYW5kIGNhbGxzXG4gKiBgXyRub3RpZnlEaXJlY3RpdmVDb25uZWN0aW9uQ2hhbmdlZGAgb24gYW55IGRpcmVjdGl2ZXMgdGhhdCBhcmUgZW5jb3VudGVyZWRcbiAqIGluIHRoYXQgdHJlZSwgcnVubmluZyB0aGUgcmVxdWlyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEEgZ2l2ZW4gXCJsb2dpY2FsIHRyZWVcIiBvZiBsaXQtaHRtbCBkYXRhLXN0cnVjdHVyZXMgbWlnaHQgbG9vayBsaWtlIHRoaXM6XG4gKlxuICogIENoaWxkUGFydChOMSkgXyRkQz1bRDIsVDNdXG4gKiAgIC5fZGlyZWN0aXZlXG4gKiAgICAgQXN5bmNEaXJlY3RpdmUoRDIpXG4gKiAgIC5fdmFsdWUgLy8gdXNlciB2YWx1ZSB3YXMgVGVtcGxhdGVSZXN1bHRcbiAqICAgICBUZW1wbGF0ZUluc3RhbmNlKFQzKSBfJGRDPVtBNCxBNixOMTAsTjEyXVxuICogICAgICAuXyRwYXJ0c1tdXG4gKiAgICAgICAgQXR0cmlidXRlUGFydChBNCkgXyRkQz1bRDVdXG4gKiAgICAgICAgIC5fZGlyZWN0aXZlc1tdXG4gKiAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDUpXG4gKiAgICAgICAgQXR0cmlidXRlUGFydChBNikgXyRkQz1bRDcsRDhdXG4gKiAgICAgICAgIC5fZGlyZWN0aXZlc1tdXG4gKiAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDcpXG4gKiAgICAgICAgICAgRGlyZWN0aXZlKEQ4KSBfJGRDPVtEOV1cbiAqICAgICAgICAgICAgLl9kaXJlY3RpdmVcbiAqICAgICAgICAgICAgICBBc3luY0RpcmVjdGl2ZShEOSlcbiAqICAgICAgICBDaGlsZFBhcnQoTjEwKSBfJGRDPVtEMTFdXG4gKiAgICAgICAgIC5fZGlyZWN0aXZlXG4gKiAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDExKVxuICogICAgICAgICAuX3ZhbHVlXG4gKiAgICAgICAgICAgc3RyaW5nXG4gKiAgICAgICAgQ2hpbGRQYXJ0KE4xMikgXyRkQz1bRDEzLE4xNCxOMTZdXG4gKiAgICAgICAgIC5fZGlyZWN0aXZlXG4gKiAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDEzKVxuICogICAgICAgICAuX3ZhbHVlIC8vIHVzZXIgdmFsdWUgd2FzIGl0ZXJhYmxlXG4gKiAgICAgICAgICAgQXJyYXk8Q2hpbGRQYXJ0PlxuICogICAgICAgICAgICAgQ2hpbGRQYXJ0KE4xNCkgXyRkQz1bRDE1XVxuICogICAgICAgICAgICAgIC5fdmFsdWVcbiAqICAgICAgICAgICAgICAgIHN0cmluZ1xuICogICAgICAgICAgICAgQ2hpbGRQYXJ0KE4xNikgXyRkQz1bRDE3LFQxOF1cbiAqICAgICAgICAgICAgICAuX2RpcmVjdGl2ZVxuICogICAgICAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDE3KVxuICogICAgICAgICAgICAgIC5fdmFsdWUgLy8gdXNlciB2YWx1ZSB3YXMgVGVtcGxhdGVSZXN1bHRcbiAqICAgICAgICAgICAgICAgIFRlbXBsYXRlSW5zdGFuY2UoVDE4KSBfJGRDPVtBMTksQTIxLE4yNV1cbiAqICAgICAgICAgICAgICAgICAuXyRwYXJ0c1tdXG4gKiAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVQYXJ0KEExOSkgXyRkQz1bRDIwXVxuICogICAgICAgICAgICAgICAgICAgIC5fZGlyZWN0aXZlc1tdXG4gKiAgICAgICAgICAgICAgICAgICAgICBBc3luY0RpcmVjdGl2ZShEMjApXG4gKiAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVQYXJ0KEEyMSkgXyRkQz1bMjIsMjNdXG4gKiAgICAgICAgICAgICAgICAgICAgLl9kaXJlY3RpdmVzW11cbiAqICAgICAgICAgICAgICAgICAgICAgIEFzeW5jRGlyZWN0aXZlKEQyMilcbiAqICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGl2ZShEMjMpIF8kZEM9W0QyNF1cbiAqICAgICAgICAgICAgICAgICAgICAgICAuX2RpcmVjdGl2ZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNEaXJlY3RpdmUoRDI0KVxuICogICAgICAgICAgICAgICAgICAgQ2hpbGRQYXJ0KE4yNSkgXyRkQz1bRDI2XVxuICogICAgICAgICAgICAgICAgICAgIC5fZGlyZWN0aXZlXG4gKiAgICAgICAgICAgICAgICAgICAgICBBc3luY0RpcmVjdGl2ZShEMjYpXG4gKiAgICAgICAgICAgICAgICAgICAgLl92YWx1ZVxuICogICAgICAgICAgICAgICAgICAgICAgc3RyaW5nXG4gKlxuICogRXhhbXBsZSAxOiBUaGUgZGlyZWN0aXZlIGluIENoaWxkUGFydChOMTIpIHVwZGF0ZXMgYW5kIHJldHVybnMgYG5vdGhpbmdgLiBUaGVcbiAqIENoaWxkUGFydCB3aWxsIF9jbGVhcigpIGl0c2VsZiwgYW5kIHNvIHdlIG5lZWQgdG8gZGlzY29ubmVjdCB0aGUgXCJ2YWx1ZVwiIG9mXG4gKiB0aGUgQ2hpbGRQYXJ0IChidXQgbm90IGl0cyBkaXJlY3RpdmUpLiBJbiB0aGlzIGNhc2UsIHdoZW4gYF9jbGVhcigpYCBjYWxsc1xuICogYF8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQoKWAsIHdlIGRvbid0IGl0ZXJhdGUgYWxsIG9mIHRoZVxuICogXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuLCByYXRoZXIgd2UgZG8gYSB2YWx1ZS1zcGVjaWZpYyBkaXNjb25uZWN0aW9uOiBpLmUuXG4gKiBzaW5jZSB0aGUgX3ZhbHVlIHdhcyBhbiBBcnJheTxDaGlsZFBhcnQ+IChiZWNhdXNlIGFuIGl0ZXJhYmxlIGhhZCBiZWVuXG4gKiBjb21taXR0ZWQpLCB3ZSBpdGVyYXRlIHRoZSBhcnJheSBvZiBDaGlsZFBhcnRzIChOMTQsIE4xNikgYW5kIHJ1blxuICogYHNldENvbm5lY3RlZGAgb24gdGhlbSAod2hpY2ggZG9lcyByZWN1cnNlIGRvd24gdGhlIGZ1bGwgdHJlZSBvZlxuICogYF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbmAgYmVsb3cgaXQsIGFuZCBhbHNvIHJlbW92ZXMgTjE0IGFuZCBOMTYgZnJvbSBOMTInc1xuICogYF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbmApLiBPbmNlIHRoZSB2YWx1ZXMgaGF2ZSBiZWVuIGRpc2Nvbm5lY3RlZCwgd2UgdGhlblxuICogY2hlY2sgd2hldGhlciB0aGUgQ2hpbGRQYXJ0KE4xMikncyBsaXN0IG9mIGBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW5gIGlzIGVtcHR5XG4gKiAoYW5kIHdvdWxkIHJlbW92ZSBpdCBmcm9tIGl0cyBwYXJlbnQgVGVtcGxhdGVJbnN0YW5jZShUMykgaWYgc28pLCBidXQgc2luY2VcbiAqIGl0IHdvdWxkIHN0aWxsIGNvbnRhaW4gaXRzIGRpcmVjdGl2ZSBEMTMsIGl0IHN0YXlzIGluIHRoZSBkaXNjb25uZWN0YWJsZVxuICogdHJlZS5cbiAqXG4gKiBFeGFtcGxlIDI6IEluIHRoZSBjb3Vyc2Ugb2YgRXhhbXBsZSAxLCBgc2V0Q29ubmVjdGVkYCB3aWxsIHJlYWNoXG4gKiBDaGlsZFBhcnQoTjE2KTsgaW4gdGhpcyBjYXNlIHRoZSBlbnRpcmUgcGFydCBpcyBiZWluZyBkaXNjb25uZWN0ZWQsIHNvIHdlXG4gKiBzaW1wbHkgaXRlcmF0ZSBhbGwgb2YgTjE2J3MgYF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbmAgKEQxNyxUMTgpIGFuZFxuICogcmVjdXJzaXZlbHkgcnVuIGBzZXRDb25uZWN0ZWRgIG9uIHRoZW0uIE5vdGUgdGhhdCB3ZSBvbmx5IHJlbW92ZSBjaGlsZHJlblxuICogZnJvbSBgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuYCBmb3IgdGhlIHRvcC1sZXZlbCB2YWx1ZXMgYmVpbmcgZGlzY29ubmVjdGVkXG4gKiBvbiBhIGNsZWFyOyBkb2luZyB0aGlzIGJvb2trZWVwaW5nIGxvd2VyIGluIHRoZSB0cmVlIGlzIHdhc3RlZnVsIHNpbmNlIGl0J3NcbiAqIGFsbCBiZWluZyB0aHJvd24gYXdheS5cbiAqXG4gKiBFeGFtcGxlIDM6IElmIHRoZSBMaXRFbGVtZW50IGNvbnRhaW5pbmcgdGhlIGVudGlyZSB0cmVlIGFib3ZlIGJlY29tZXNcbiAqIGRpc2Nvbm5lY3RlZCwgaXQgd2lsbCBydW4gYGNoaWxkUGFydC5zZXRDb25uZWN0ZWQoKWAgKHdoaWNoIGNhbGxzXG4gKiBgY2hpbGRQYXJ0Ll8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQoKWAgaWYgaXQgZXhpc3RzKTsgaW4gdGhpcyBjYXNlLCB3ZVxuICogcmVjdXJzaXZlbHkgcnVuIGBzZXRDb25uZWN0ZWQoKWAgb3ZlciB0aGUgZW50aXJlIHRyZWUsIHdpdGhvdXQgcmVtb3ZpbmcgYW55XG4gKiBjaGlsZHJlbiBmcm9tIGBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW5gLCBzaW5jZSB0aGlzIHRyZWUgaXMgcmVxdWlyZWQgdG9cbiAqIHJlLWNvbm5lY3QgdGhlIHRyZWUsIHdoaWNoIGRvZXMgdGhlIHNhbWUgb3BlcmF0aW9uLCBzaW1wbHkgcGFzc2luZ1xuICogYGlzQ29ubmVjdGVkOiB0cnVlYCBkb3duIHRoZSB0cmVlLCBzaWduYWxpbmcgd2hpY2ggY2FsbGJhY2sgdG8gcnVuLlxuICovXG5cbmltcG9ydCB7QXR0cmlidXRlUGFydCwgQ2hpbGRQYXJ0LCBEaXNjb25uZWN0YWJsZSwgUGFydH0gZnJvbSAnLi9saXQtaHRtbC5qcyc7XG5pbXBvcnQge2lzU2luZ2xlRXhwcmVzc2lvbn0gZnJvbSAnLi9kaXJlY3RpdmUtaGVscGVycy5qcyc7XG5pbXBvcnQge0RpcmVjdGl2ZSwgUGFydEluZm8sIFBhcnRUeXBlfSBmcm9tICcuL2RpcmVjdGl2ZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RpcmVjdGl2ZS5qcyc7XG5cbmNvbnN0IERFVl9NT0RFID0gdHJ1ZTtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSB3YWxrcyBkb3duIHRoZSB0cmVlIG9mIFBhcnRzL1RlbXBsYXRlSW5zdGFuY2VzL0RpcmVjdGl2ZXMgdG8gc2V0XG4gKiB0aGUgY29ubmVjdGVkIHN0YXRlIG9mIGRpcmVjdGl2ZXMgYW5kIHJ1biBgZGlzY29ubmVjdGVkYC8gYHJlY29ubmVjdGVkYFxuICogY2FsbGJhY2tzLlxuICpcbiAqIEByZXR1cm4gVHJ1ZSBpZiB0aGVyZSB3ZXJlIGNoaWxkcmVuIHRvIGRpc2Nvbm5lY3Q7IGZhbHNlIG90aGVyd2lzZVxuICovXG5jb25zdCBub3RpZnlDaGlsZHJlbkNvbm5lY3RlZENoYW5nZWQgPSAoXG4gIHBhcmVudDogRGlzY29ubmVjdGFibGUsXG4gIGlzQ29ubmVjdGVkOiBib29sZWFuXG4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnQuXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuO1xuICBpZiAoY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGNvbnN0IG9iaiBvZiBjaGlsZHJlbikge1xuICAgIC8vIFRoZSBleGlzdGVuY2Ugb2YgYF8kbm90aWZ5RGlyZWN0aXZlQ29ubmVjdGlvbkNoYW5nZWRgIGlzIHVzZWQgYXMgYSBcImJyYW5kXCIgdG9cbiAgICAvLyBkaXNhbWJpZ3VhdGUgQXN5bmNEaXJlY3RpdmVzIGZyb20gb3RoZXIgRGlzY29ubmVjdGFibGVDaGlsZHJlblxuICAgIC8vIChhcyBvcHBvc2VkIHRvIHVzaW5nIGFuIGluc3RhbmNlb2YgY2hlY2sgdG8ga25vdyB3aGVuIHRvIGNhbGwgaXQpOyB0aGVcbiAgICAvLyByZWR1bmRhbmN5IG9mIFwiRGlyZWN0aXZlXCIgaW4gdGhlIEFQSSBuYW1lIGlzIHRvIGF2b2lkIGNvbmZsaWN0aW5nIHdpdGhcbiAgICAvLyBgXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZGAsIHdoaWNoIGV4aXN0cyBgQ2hpbGRQYXJ0c2Agd2hpY2ggYXJlIGFsc28gaW5cbiAgICAvLyB0aGlzIGxpc3RcbiAgICAvLyBEaXNjb25uZWN0IERpcmVjdGl2ZSAoYW5kIGFueSBuZXN0ZWQgZGlyZWN0aXZlcyBjb250YWluZWQgd2l0aGluKVxuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgKG9iaiBhcyBBc3luY0RpcmVjdGl2ZSlbJ18kbm90aWZ5RGlyZWN0aXZlQ29ubmVjdGlvbkNoYW5nZWQnXT8uKFxuICAgICAgaXNDb25uZWN0ZWQsXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgLy8gRGlzY29ubmVjdCBQYXJ0L1RlbXBsYXRlSW5zdGFuY2VcbiAgICBub3RpZnlDaGlsZHJlbkNvbm5lY3RlZENoYW5nZWQob2JqLCBpc0Nvbm5lY3RlZCk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGdpdmVuIGNoaWxkIGZyb20gaXRzIHBhcmVudCBsaXN0IG9mIGRpc2Nvbm5lY3RhYmxlIGNoaWxkcmVuLCBhbmRcbiAqIGlmIHRoZSBwYXJlbnQgbGlzdCBiZWNvbWVzIGVtcHR5IGFzIGEgcmVzdWx0LCByZW1vdmVzIHRoZSBwYXJlbnQgZnJvbSBpdHNcbiAqIHBhcmVudCwgYW5kIHNvIGZvcnRoIHVwIHRoZSB0cmVlIHdoZW4gdGhhdCBjYXVzZXMgc3Vic2VxdWVudCBwYXJlbnQgbGlzdHMgdG9cbiAqIGJlY29tZSBlbXB0eS5cbiAqL1xuY29uc3QgcmVtb3ZlRGlzY29ubmVjdGFibGVGcm9tUGFyZW50ID0gKG9iajogRGlzY29ubmVjdGFibGUpID0+IHtcbiAgbGV0IHBhcmVudCwgY2hpbGRyZW47XG4gIGRvIHtcbiAgICBpZiAoKHBhcmVudCA9IG9iai5fJHBhcmVudCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNoaWxkcmVuID0gcGFyZW50Ll8kZGlzY29ubmVjdGFibGVDaGlsZHJlbiE7XG4gICAgY2hpbGRyZW4uZGVsZXRlKG9iaik7XG4gICAgb2JqID0gcGFyZW50O1xuICB9IHdoaWxlIChjaGlsZHJlbj8uc2l6ZSA9PT0gMCk7XG59O1xuXG5jb25zdCBhZGREaXNjb25uZWN0YWJsZVRvUGFyZW50ID0gKG9iajogRGlzY29ubmVjdGFibGUpID0+IHtcbiAgLy8gQ2xpbWIgdGhlIHBhcmVudCB0cmVlLCBjcmVhdGluZyBhIHNwYXJzZSB0cmVlIG9mIGNoaWxkcmVuIG5lZWRpbmdcbiAgLy8gZGlzY29ubmVjdGlvblxuICBmb3IgKGxldCBwYXJlbnQ7IChwYXJlbnQgPSBvYmouXyRwYXJlbnQpOyBvYmogPSBwYXJlbnQpIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBwYXJlbnQuXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuO1xuICAgIGlmIChjaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwYXJlbnQuXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuID0gY2hpbGRyZW4gPSBuZXcgU2V0KCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZHJlbi5oYXMob2JqKSkge1xuICAgICAgLy8gT25jZSB3ZSd2ZSByZWFjaGVkIGEgcGFyZW50IHRoYXQgYWxyZWFkeSBjb250YWlucyB0aGlzIGNoaWxkLCB3ZVxuICAgICAgLy8gY2FuIHNob3J0LWNpcmN1aXRcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjaGlsZHJlbi5hZGQob2JqKTtcbiAgICBpbnN0YWxsRGlzY29ubmVjdEFQSShwYXJlbnQpO1xuICB9XG59O1xuXG4vKipcbiAqIENoYW5nZXMgdGhlIHBhcmVudCByZWZlcmVuY2Ugb2YgdGhlIENoaWxkUGFydCwgYW5kIHVwZGF0ZXMgdGhlIHNwYXJzZSB0cmVlIG9mXG4gKiBEaXNjb25uZWN0YWJsZSBjaGlsZHJlbiBhY2NvcmRpbmdseS5cbiAqXG4gKiBOb3RlLCB0aGlzIG1ldGhvZCB3aWxsIGJlIHBhdGNoZWQgb250byBDaGlsZFBhcnQgaW5zdGFuY2VzIGFuZCBjYWxsZWQgZnJvbVxuICogdGhlIGNvcmUgY29kZSB3aGVuIHBhcnRzIGFyZSBtb3ZlZCBiZXR3ZWVuIGRpZmZlcmVudCBwYXJlbnRzLlxuICovXG5mdW5jdGlvbiByZXBhcmVudERpc2Nvbm5lY3RhYmxlcyh0aGlzOiBDaGlsZFBhcnQsIG5ld1BhcmVudDogRGlzY29ubmVjdGFibGUpIHtcbiAgaWYgKHRoaXMuXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICByZW1vdmVEaXNjb25uZWN0YWJsZUZyb21QYXJlbnQodGhpcyk7XG4gICAgdGhpcy5fJHBhcmVudCA9IG5ld1BhcmVudDtcbiAgICBhZGREaXNjb25uZWN0YWJsZVRvUGFyZW50KHRoaXMpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuXyRwYXJlbnQgPSBuZXdQYXJlbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBjb25uZWN0ZWQgc3RhdGUgb24gYW55IGRpcmVjdGl2ZXMgY29udGFpbmVkIHdpdGhpbiB0aGUgY29tbWl0dGVkXG4gKiB2YWx1ZSBvZiB0aGlzIHBhcnQgKGkuZS4gd2l0aGluIGEgVGVtcGxhdGVJbnN0YW5jZSBvciBpdGVyYWJsZSBvZlxuICogQ2hpbGRQYXJ0cykgYW5kIHJ1bnMgdGhlaXIgYGRpc2Nvbm5lY3RlZGAvYHJlY29ubmVjdGVkYHMsIGFzIHdlbGwgYXMgd2l0aGluXG4gKiBhbnkgZGlyZWN0aXZlcyBzdG9yZWQgb24gdGhlIENoaWxkUGFydCAod2hlbiBgdmFsdWVPbmx5YCBpcyBmYWxzZSkuXG4gKlxuICogYGlzQ2xlYXJpbmdWYWx1ZWAgc2hvdWxkIGJlIHBhc3NlZCBhcyBgdHJ1ZWAgb24gYSB0b3AtbGV2ZWwgcGFydCB0aGF0IGlzXG4gKiBjbGVhcmluZyBpdHNlbGYsIGFuZCBub3QgYXMgYSByZXN1bHQgb2YgcmVjdXJzaXZlbHkgZGlzY29ubmVjdGluZyBkaXJlY3RpdmVzXG4gKiBhcyBwYXJ0IG9mIGEgYGNsZWFyYCBvcGVyYXRpb24gaGlnaGVyIHVwIHRoZSB0cmVlLiBUaGlzIGJvdGggZW5zdXJlcyB0aGF0IGFueVxuICogZGlyZWN0aXZlIG9uIHRoaXMgQ2hpbGRQYXJ0IHRoYXQgcHJvZHVjZWQgYSB2YWx1ZSB0aGF0IGNhdXNlZCB0aGUgY2xlYXJcbiAqIG9wZXJhdGlvbiBpcyBub3QgZGlzY29ubmVjdGVkLCBhbmQgYWxzbyBzZXJ2ZXMgYXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cbiAqIHRvIGF2b2lkIG5lZWRsZXNzIGJvb2trZWVwaW5nIHdoZW4gYSBzdWJ0cmVlIGlzIGdvaW5nIGF3YXk7IHdoZW4gY2xlYXJpbmcgYVxuICogc3VidHJlZSwgb25seSB0aGUgdG9wLW1vc3QgcGFydCBuZWVkIHRvIHJlbW92ZSBpdHNlbGYgZnJvbSB0aGUgcGFyZW50LlxuICpcbiAqIGBmcm9tUGFydEluZGV4YCBpcyBwYXNzZWQgb25seSBpbiB0aGUgY2FzZSBvZiBhIHBhcnRpYWwgYF9jbGVhcmAgcnVubmluZyBhcyBhXG4gKiByZXN1bHQgb2YgdHJ1bmNhdGluZyBhbiBpdGVyYWJsZS5cbiAqXG4gKiBOb3RlLCB0aGlzIG1ldGhvZCB3aWxsIGJlIHBhdGNoZWQgb250byBDaGlsZFBhcnQgaW5zdGFuY2VzIGFuZCBjYWxsZWQgZnJvbSB0aGVcbiAqIGNvcmUgY29kZSB3aGVuIHBhcnRzIGFyZSBjbGVhcmVkIG9yIHRoZSBjb25uZWN0aW9uIHN0YXRlIGlzIGNoYW5nZWQgYnkgdGhlXG4gKiB1c2VyLlxuICovXG5mdW5jdGlvbiBub3RpZnlDaGlsZFBhcnRDb25uZWN0ZWRDaGFuZ2VkKFxuICB0aGlzOiBDaGlsZFBhcnQsXG4gIGlzQ29ubmVjdGVkOiBib29sZWFuLFxuICBpc0NsZWFyaW5nVmFsdWUgPSBmYWxzZSxcbiAgZnJvbVBhcnRJbmRleCA9IDBcbikge1xuICBjb25zdCB2YWx1ZSA9IHRoaXMuXyRjb21taXR0ZWRWYWx1ZTtcbiAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLl8kZGlzY29ubmVjdGFibGVDaGlsZHJlbjtcbiAgaWYgKGNoaWxkcmVuID09PSB1bmRlZmluZWQgfHwgY2hpbGRyZW4uc2l6ZSA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNDbGVhcmluZ1ZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAvLyBJdGVyYWJsZSBjYXNlOiBBbnkgQ2hpbGRQYXJ0cyBjcmVhdGVkIGJ5IHRoZSBpdGVyYWJsZSBzaG91bGQgYmVcbiAgICAgIC8vIGRpc2Nvbm5lY3RlZCBhbmQgcmVtb3ZlZCBmcm9tIHRoaXMgQ2hpbGRQYXJ0J3MgZGlzY29ubmVjdGFibGVcbiAgICAgIC8vIGNoaWxkcmVuIChzdGFydGluZyBhdCBgZnJvbVBhcnRJbmRleGAgaW4gdGhlIGNhc2Ugb2YgdHJ1bmNhdGlvbilcbiAgICAgIGZvciAobGV0IGkgPSBmcm9tUGFydEluZGV4OyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbm90aWZ5Q2hpbGRyZW5Db25uZWN0ZWRDaGFuZ2VkKHZhbHVlW2ldLCBmYWxzZSk7XG4gICAgICAgIHJlbW92ZURpc2Nvbm5lY3RhYmxlRnJvbVBhcmVudCh2YWx1ZVtpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAvLyBUZW1wbGF0ZUluc3RhbmNlIGNhc2U6IElmIHRoZSB2YWx1ZSBoYXMgZGlzY29ubmVjdGFibGUgY2hpbGRyZW4gKHdpbGxcbiAgICAgIC8vIG9ubHkgYmUgaW4gdGhlIGNhc2UgdGhhdCBpdCBpcyBhIFRlbXBsYXRlSW5zdGFuY2UpLCB3ZSBkaXNjb25uZWN0IGl0XG4gICAgICAvLyBhbmQgcmVtb3ZlIGl0IGZyb20gdGhpcyBDaGlsZFBhcnQncyBkaXNjb25uZWN0YWJsZSBjaGlsZHJlblxuICAgICAgbm90aWZ5Q2hpbGRyZW5Db25uZWN0ZWRDaGFuZ2VkKHZhbHVlIGFzIERpc2Nvbm5lY3RhYmxlLCBmYWxzZSk7XG4gICAgICByZW1vdmVEaXNjb25uZWN0YWJsZUZyb21QYXJlbnQodmFsdWUgYXMgRGlzY29ubmVjdGFibGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBub3RpZnlDaGlsZHJlbkNvbm5lY3RlZENoYW5nZWQodGhpcywgaXNDb25uZWN0ZWQpO1xuICB9XG59XG5cbi8qKlxuICogUGF0Y2hlcyBkaXNjb25uZWN0aW9uIEFQSSBvbnRvIENoaWxkUGFydHMuXG4gKi9cbmNvbnN0IGluc3RhbGxEaXNjb25uZWN0QVBJID0gKG9iajogRGlzY29ubmVjdGFibGUpID0+IHtcbiAgaWYgKChvYmogYXMgQ2hpbGRQYXJ0KS50eXBlID09IFBhcnRUeXBlLkNISUxEKSB7XG4gICAgKG9iaiBhcyBDaGlsZFBhcnQpLl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQgPz89XG4gICAgICBub3RpZnlDaGlsZFBhcnRDb25uZWN0ZWRDaGFuZ2VkO1xuICAgIChvYmogYXMgQ2hpbGRQYXJ0KS5fJHJlcGFyZW50RGlzY29ubmVjdGFibGVzID8/PSByZXBhcmVudERpc2Nvbm5lY3RhYmxlcztcbiAgfVxufTtcblxuLyoqXG4gKiBBbiBhYnN0cmFjdCBgRGlyZWN0aXZlYCBiYXNlIGNsYXNzIHdob3NlIGBkaXNjb25uZWN0ZWRgIG1ldGhvZCB3aWxsIGJlXG4gKiBjYWxsZWQgd2hlbiB0aGUgcGFydCBjb250YWluaW5nIHRoZSBkaXJlY3RpdmUgaXMgY2xlYXJlZCBhcyBhIHJlc3VsdCBvZlxuICogcmUtcmVuZGVyaW5nLCBvciB3aGVuIHRoZSB1c2VyIGNhbGxzIGBwYXJ0LnNldENvbm5lY3RlZChmYWxzZSlgIG9uXG4gKiBhIHBhcnQgdGhhdCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBjb250YWluaW5nIHRoZSBkaXJlY3RpdmUgKGFzIGhhcHBlbnNcbiAqIHdoZW4gZS5nLiBhIExpdEVsZW1lbnQgZGlzY29ubmVjdHMgZnJvbSB0aGUgRE9NKS5cbiAqXG4gKiBJZiBgcGFydC5zZXRDb25uZWN0ZWQodHJ1ZSlgIGlzIHN1YnNlcXVlbnRseSBjYWxsZWQgb24gYVxuICogY29udGFpbmluZyBwYXJ0LCB0aGUgZGlyZWN0aXZlJ3MgYHJlY29ubmVjdGVkYCBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgcHJpb3JcbiAqIHRvIGl0cyBuZXh0IGB1cGRhdGVgL2ByZW5kZXJgIGNhbGxiYWNrcy4gV2hlbiBpbXBsZW1lbnRpbmcgYGRpc2Nvbm5lY3RlZGAsXG4gKiBgcmVjb25uZWN0ZWRgIHNob3VsZCBhbHNvIGJlIGltcGxlbWVudGVkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCByZWNvbm5lY3Rpb24uXG4gKlxuICogTm90ZSB0aGF0IHVwZGF0ZXMgbWF5IG9jY3VyIHdoaWxlIHRoZSBkaXJlY3RpdmUgaXMgZGlzY29ubmVjdGVkLiBBcyBzdWNoLFxuICogZGlyZWN0aXZlcyBzaG91bGQgZ2VuZXJhbGx5IGNoZWNrIHRoZSBgdGhpcy5pc0Nvbm5lY3RlZGAgZmxhZyBkdXJpbmdcbiAqIHJlbmRlci91cGRhdGUgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaXQgaXMgc2FmZSB0byBzdWJzY3JpYmUgdG8gcmVzb3VyY2VzXG4gKiB0aGF0IG1heSBwcmV2ZW50IGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFzeW5jRGlyZWN0aXZlIGV4dGVuZHMgRGlyZWN0aXZlIHtcbiAgLy8gQXMgb3Bwb3NlZCB0byBvdGhlciBEaXNjb25uZWN0YWJsZXMsIEFzeW5jRGlyZWN0aXZlcyBhbHdheXMgZ2V0IG5vdGlmaWVkXG4gIC8vIHdoZW4gdGhlIFJvb3RQYXJ0IGNvbm5lY3Rpb24gY2hhbmdlcywgc28gdGhlIHB1YmxpYyBgaXNDb25uZWN0ZWRgXG4gIC8vIGlzIGEgbG9jYWxseSBzdG9yZWQgdmFyaWFibGUgaW5pdGlhbGl6ZWQgdmlhIGl0cyBwYXJ0J3MgZ2V0dGVyIGFuZCBzeW5jZWRcbiAgLy8gdmlhIGBfJG5vdGlmeURpcmVjdGl2ZUNvbm5lY3Rpb25DaGFuZ2VkYC4gVGhpcyBpcyBjaGVhcGVyIHRoYW4gdXNpbmdcbiAgLy8gdGhlIF8kaXNDb25uZWN0ZWQgZ2V0dGVyLCB3aGljaCBoYXMgdG8gbG9vayBiYWNrIHVwIHRoZSB0cmVlIGVhY2ggdGltZS5cbiAgLyoqXG4gICAqIFRoZSBjb25uZWN0aW9uIHN0YXRlIGZvciB0aGlzIERpcmVjdGl2ZS5cbiAgICovXG4gIGlzQ29ubmVjdGVkITogYm9vbGVhbjtcblxuICAvLyBAaW50ZXJuYWxcbiAgb3ZlcnJpZGUgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuPzogU2V0PERpc2Nvbm5lY3RhYmxlPiA9IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIHBhcnQgd2l0aCBpbnRlcm5hbCBmaWVsZHNcbiAgICogQHBhcmFtIHBhcnRcbiAgICogQHBhcmFtIHBhcmVudFxuICAgKiBAcGFyYW0gYXR0cmlidXRlSW5kZXhcbiAgICovXG4gIG92ZXJyaWRlIF8kaW5pdGlhbGl6ZShcbiAgICBwYXJ0OiBQYXJ0LFxuICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUsXG4gICAgYXR0cmlidXRlSW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZFxuICApIHtcbiAgICBzdXBlci5fJGluaXRpYWxpemUocGFydCwgcGFyZW50LCBhdHRyaWJ1dGVJbmRleCk7XG4gICAgYWRkRGlzY29ubmVjdGFibGVUb1BhcmVudCh0aGlzKTtcbiAgICB0aGlzLmlzQ29ubmVjdGVkID0gcGFydC5fJGlzQ29ubmVjdGVkO1xuICB9XG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIC8qKlxuICAgKiBDYWxsZWQgZnJvbSB0aGUgY29yZSBjb2RlIHdoZW4gYSBkaXJlY3RpdmUgaXMgZ29pbmcgYXdheSBmcm9tIGEgcGFydCAoaW5cbiAgICogd2hpY2ggY2FzZSBgc2hvdWxkUmVtb3ZlRnJvbVBhcmVudGAgc2hvdWxkIGJlIHRydWUpLCBhbmQgZnJvbSB0aGVcbiAgICogYHNldENoaWxkcmVuQ29ubmVjdGVkYCBoZWxwZXIgZnVuY3Rpb24gd2hlbiByZWN1cnNpdmVseSBjaGFuZ2luZyB0aGVcbiAgICogY29ubmVjdGlvbiBzdGF0ZSBvZiBhIHRyZWUgKGluIHdoaWNoIGNhc2UgYHNob3VsZFJlbW92ZUZyb21QYXJlbnRgIHNob3VsZFxuICAgKiBiZSBmYWxzZSkuXG4gICAqXG4gICAqIEBwYXJhbSBpc0Nvbm5lY3RlZFxuICAgKiBAcGFyYW0gaXNDbGVhcmluZ0RpcmVjdGl2ZSAtIFRydWUgd2hlbiB0aGUgZGlyZWN0aXZlIGl0c2VsZiBpcyBiZWluZ1xuICAgKiAgICAgcmVtb3ZlZDsgZmFsc2Ugd2hlbiB0aGUgdHJlZSBpcyBiZWluZyBkaXNjb25uZWN0ZWRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBvdmVycmlkZSBbJ18kbm90aWZ5RGlyZWN0aXZlQ29ubmVjdGlvbkNoYW5nZWQnXShcbiAgICBpc0Nvbm5lY3RlZDogYm9vbGVhbixcbiAgICBpc0NsZWFyaW5nRGlyZWN0aXZlID0gdHJ1ZVxuICApIHtcbiAgICBpZiAoaXNDb25uZWN0ZWQgIT09IHRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBpc0Nvbm5lY3RlZDtcbiAgICAgIGlmIChpc0Nvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLnJlY29ubmVjdGVkPy4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdGVkPy4oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ2xlYXJpbmdEaXJlY3RpdmUpIHtcbiAgICAgIG5vdGlmeUNoaWxkcmVuQ29ubmVjdGVkQ2hhbmdlZCh0aGlzLCBpc0Nvbm5lY3RlZCk7XG4gICAgICByZW1vdmVEaXNjb25uZWN0YWJsZUZyb21QYXJlbnQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBkaXJlY3RpdmUncyBQYXJ0IG91dHNpZGUgdGhlIG5vcm1hbCBgdXBkYXRlYC9gcmVuZGVyYFxuICAgKiBsaWZlY3ljbGUgb2YgYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgZnJvbSBhIGRpcmVjdGl2ZSdzIGB1cGRhdGVgXG4gICAqIG9yIGByZW5kZXJgLlxuICAgKlxuICAgKiBAcGFyYW0gZGlyZWN0aXZlIFRoZSBkaXJlY3RpdmUgdG8gdXBkYXRlXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0XG4gICAqL1xuICBzZXRWYWx1ZSh2YWx1ZTogdW5rbm93bikge1xuICAgIGlmIChpc1NpbmdsZUV4cHJlc3Npb24odGhpcy5fX3BhcnQgYXMgdW5rbm93biBhcyBQYXJ0SW5mbykpIHtcbiAgICAgIHRoaXMuX19wYXJ0Ll8kc2V0VmFsdWUodmFsdWUsIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzLl9fYXR0cmlidXRlSW5kZXggd2lsbCBiZSBkZWZpbmVkIGluIHRoaXMgY2FzZSwgYnV0XG4gICAgICAvLyBhc3NlcnQgaXQgaW4gZGV2IG1vZGVcbiAgICAgIGlmIChERVZfTU9ERSAmJiB0aGlzLl9fYXR0cmlidXRlSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHRoaXMuX19hdHRyaWJ1dGVJbmRleCB0byBiZSBhIG51bWJlcmApO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3VmFsdWVzID0gWy4uLih0aGlzLl9fcGFydC5fJGNvbW1pdHRlZFZhbHVlIGFzIEFycmF5PHVua25vd24+KV07XG4gICAgICBuZXdWYWx1ZXNbdGhpcy5fX2F0dHJpYnV0ZUluZGV4IV0gPSB2YWx1ZTtcbiAgICAgICh0aGlzLl9fcGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5fJHNldFZhbHVlKG5ld1ZhbHVlcywgdGhpcywgMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVzZXIgY2FsbGJhY2tzIGZvciBpbXBsZW1lbnRpbmcgbG9naWMgdG8gcmVsZWFzZSBhbnkgcmVzb3VyY2VzL3N1YnNjcmlwdGlvbnNcbiAgICogdGhhdCBtYXkgaGF2ZSBiZWVuIHJldGFpbmVkIGJ5IHRoaXMgZGlyZWN0aXZlLiBTaW5jZSBkaXJlY3RpdmVzIG1heSBhbHNvIGJlXG4gICAqIHJlLWNvbm5lY3RlZCwgYHJlY29ubmVjdGVkYCBzaG91bGQgYWxzbyBiZSBpbXBsZW1lbnRlZCB0byByZXN0b3JlIHRoZVxuICAgKiB3b3JraW5nIHN0YXRlIG9mIHRoZSBkaXJlY3RpdmUgcHJpb3IgdG8gdGhlIG5leHQgcmVuZGVyLlxuICAgKi9cbiAgcHJvdGVjdGVkIGRpc2Nvbm5lY3RlZCgpIHt9XG4gIHByb3RlY3RlZCByZWNvbm5lY3RlZCgpIHt9XG59XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5pbXBvcnQge25vdGhpbmcsIEVsZW1lbnRQYXJ0fSBmcm9tICcuLi9saXQtaHRtbC5qcyc7XG5pbXBvcnQge2RpcmVjdGl2ZSwgQXN5bmNEaXJlY3RpdmV9IGZyb20gJy4uL2FzeW5jLWRpcmVjdGl2ZS5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBSZWYgb2JqZWN0LCB3aGljaCBpcyBjb250YWluZXIgZm9yIGEgcmVmZXJlbmNlIHRvIGFuIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVSZWYgPSA8VCA9IEVsZW1lbnQ+KCkgPT4gbmV3IFJlZjxUPigpO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IGhvbGRzIGEgcmVmIHZhbHVlLlxuICovXG5jbGFzcyBSZWY8VCA9IEVsZW1lbnQ+IHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IEVsZW1lbnQgdmFsdWUgb2YgdGhlIHJlZiwgb3IgZWxzZSBgdW5kZWZpbmVkYCBpZiB0aGUgcmVmIGlzIG5vXG4gICAqIGxvbmdlciByZW5kZXJlZC5cbiAgICovXG4gIHJlYWRvbmx5IHZhbHVlPzogVDtcbn1cblxuZXhwb3J0IHR5cGUge1JlZn07XG5cbmludGVyZmFjZSBSZWZJbnRlcm5hbCB7XG4gIHZhbHVlOiBFbGVtZW50IHwgdW5kZWZpbmVkO1xufVxuXG4vLyBXaGVuIGNhbGxiYWNrcyBhcmUgdXNlZCBmb3IgcmVmcywgdGhpcyBtYXAgdHJhY2tzIHRoZSBsYXN0IHZhbHVlIHRoZSBjYWxsYmFja1xuLy8gd2FzIGNhbGxlZCB3aXRoLCBmb3IgZW5zdXJpbmcgYSBkaXJlY3RpdmUgZG9lc24ndCBjbGVhciB0aGUgcmVmIGlmIHRoZSByZWZcbi8vIGhhcyBhbHJlYWR5IGJlZW4gcmVuZGVyZWQgdG8gYSBuZXcgc3BvdC4gSXQgaXMgZG91YmxlLWtleWVkIG9uIGJvdGggdGhlXG4vLyBjb250ZXh0IChgb3B0aW9ucy5ob3N0YCkgYW5kIHRoZSBjYWxsYmFjaywgc2luY2Ugd2UgYXV0by1iaW5kIGNsYXNzIG1ldGhvZHNcbi8vIHRvIGBvcHRpb25zLmhvc3RgLlxuY29uc3QgbGFzdEVsZW1lbnRGb3JDb250ZXh0QW5kQ2FsbGJhY2sgPSBuZXcgV2Vha01hcDxcbiAgb2JqZWN0LFxuICBXZWFrTWFwPEZ1bmN0aW9uLCBFbGVtZW50IHwgdW5kZWZpbmVkPlxuPigpO1xuXG5leHBvcnQgdHlwZSBSZWZPckNhbGxiYWNrPFQgPSBFbGVtZW50PiA9IFJlZjxUPiB8ICgoZWw6IFQgfCB1bmRlZmluZWQpID0+IHZvaWQpO1xuXG5jbGFzcyBSZWZEaXJlY3RpdmUgZXh0ZW5kcyBBc3luY0RpcmVjdGl2ZSB7XG4gIHByaXZhdGUgX2VsZW1lbnQ/OiBFbGVtZW50O1xuICBwcml2YXRlIF9yZWY/OiBSZWZPckNhbGxiYWNrO1xuICBwcml2YXRlIF9jb250ZXh0Pzogb2JqZWN0O1xuXG4gIHJlbmRlcihfcmVmPzogUmVmT3JDYWxsYmFjaykge1xuICAgIHJldHVybiBub3RoaW5nO1xuICB9XG5cbiAgb3ZlcnJpZGUgdXBkYXRlKHBhcnQ6IEVsZW1lbnRQYXJ0LCBbcmVmXTogUGFyYW1ldGVyczx0aGlzWydyZW5kZXInXT4pIHtcbiAgICBjb25zdCByZWZDaGFuZ2VkID0gcmVmICE9PSB0aGlzLl9yZWY7XG4gICAgaWYgKHJlZkNoYW5nZWQgJiYgdGhpcy5fcmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFRoZSByZWYgcGFzc2VkIHRvIHRoZSBkaXJlY3RpdmUgaGFzIGNoYW5nZWQ7XG4gICAgICAvLyB1bnNldCB0aGUgcHJldmlvdXMgcmVmJ3MgdmFsdWVcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZlZhbHVlKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGlmIChyZWZDaGFuZ2VkIHx8IHRoaXMuX2xhc3RFbGVtZW50Rm9yUmVmICE9PSB0aGlzLl9lbGVtZW50KSB7XG4gICAgICAvLyBXZSBlaXRoZXIgZ290IGEgbmV3IHJlZiBvciB0aGlzIGlzIHRoZSBmaXJzdCByZW5kZXI7XG4gICAgICAvLyBzdG9yZSB0aGUgcmVmL2VsZW1lbnQgJiB1cGRhdGUgdGhlIHJlZiB2YWx1ZVxuICAgICAgdGhpcy5fcmVmID0gcmVmO1xuICAgICAgdGhpcy5fY29udGV4dCA9IHBhcnQub3B0aW9ucz8uaG9zdDtcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZlZhbHVlKCh0aGlzLl9lbGVtZW50ID0gcGFydC5lbGVtZW50KSk7XG4gICAgfVxuICAgIHJldHVybiBub3RoaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlUmVmVmFsdWUoZWxlbWVudDogRWxlbWVudCB8IHVuZGVmaW5lZCkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIElmIHRoZSBjdXJyZW50IHJlZiB3YXMgY2FsbGVkIHdpdGggYSBwcmV2aW91cyB2YWx1ZSwgY2FsbCB3aXRoXG4gICAgICAvLyBgdW5kZWZpbmVkYDsgV2UgZG8gdGhpcyB0byBlbnN1cmUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgaW4gYSBjb25zaXN0ZW50XG4gICAgICAvLyB3YXkgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGEgcmVmIG1pZ2h0IGJlIG1vdmluZyB1cCBpbiB0aGUgdHJlZSAoaW5cbiAgICAgIC8vIHdoaWNoIGNhc2UgaXQgd291bGQgb3RoZXJ3aXNlIGJlIGNhbGxlZCB3aXRoIHRoZSBuZXcgdmFsdWUgYmVmb3JlIHRoZVxuICAgICAgLy8gcHJldmlvdXMgb25lIHVuc2V0cyBpdCkgYW5kIGRvd24gaW4gdGhlIHRyZWUgKHdoZXJlIGl0IHdvdWxkIGJlIHVuc2V0XG4gICAgICAvLyBiZWZvcmUgYmVpbmcgc2V0KS4gTm90ZSB0aGF0IGVsZW1lbnQgbG9va3VwIGlzIGtleWVkIGJ5XG4gICAgICAvLyBib3RoIHRoZSBjb250ZXh0IGFuZCB0aGUgY2FsbGJhY2ssIHNpbmNlIHdlIGFsbG93IHBhc3NpbmcgdW5ib3VuZFxuICAgICAgLy8gZnVuY3Rpb25zIHRoYXQgYXJlIGNhbGxlZCBvbiBvcHRpb25zLmhvc3QsIGFuZCB3ZSB3YW50IHRvIHRyZWF0XG4gICAgICAvLyB0aGVzZSBhcyB1bmlxdWUgXCJpbnN0YW5jZXNcIiBvZiBhIGZ1bmN0aW9uLlxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuX2NvbnRleHQgPz8gZ2xvYmFsVGhpcztcbiAgICAgIGxldCBsYXN0RWxlbWVudEZvckNhbGxiYWNrID1cbiAgICAgICAgbGFzdEVsZW1lbnRGb3JDb250ZXh0QW5kQ2FsbGJhY2suZ2V0KGNvbnRleHQpO1xuICAgICAgaWYgKGxhc3RFbGVtZW50Rm9yQ2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsYXN0RWxlbWVudEZvckNhbGxiYWNrID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgbGFzdEVsZW1lbnRGb3JDb250ZXh0QW5kQ2FsbGJhY2suc2V0KGNvbnRleHQsIGxhc3RFbGVtZW50Rm9yQ2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3RFbGVtZW50Rm9yQ2FsbGJhY2suZ2V0KHRoaXMuX3JlZikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9yZWYuY2FsbCh0aGlzLl9jb250ZXh0LCB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgbGFzdEVsZW1lbnRGb3JDYWxsYmFjay5zZXQodGhpcy5fcmVmLCBlbGVtZW50KTtcbiAgICAgIC8vIENhbGwgdGhlIHJlZiB3aXRoIHRoZSBuZXcgZWxlbWVudCB2YWx1ZVxuICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9yZWYuY2FsbCh0aGlzLl9jb250ZXh0LCBlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgKHRoaXMuX3JlZiBhcyBSZWZJbnRlcm5hbCkhLnZhbHVlID0gZWxlbWVudDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfbGFzdEVsZW1lbnRGb3JSZWYoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLl9yZWYgPT09ICdmdW5jdGlvbidcbiAgICAgID8gbGFzdEVsZW1lbnRGb3JDb250ZXh0QW5kQ2FsbGJhY2tcbiAgICAgICAgICAuZ2V0KHRoaXMuX2NvbnRleHQgPz8gZ2xvYmFsVGhpcylcbiAgICAgICAgICA/LmdldCh0aGlzLl9yZWYpXG4gICAgICA6IHRoaXMuX3JlZj8udmFsdWU7XG4gIH1cblxuICBvdmVycmlkZSBkaXNjb25uZWN0ZWQoKSB7XG4gICAgLy8gT25seSBjbGVhciB0aGUgYm94IGlmIG91ciBlbGVtZW50IGlzIHN0aWxsIHRoZSBvbmUgaW4gaXQgKGkuZS4gYW5vdGhlclxuICAgIC8vIGRpcmVjdGl2ZSBpbnN0YW5jZSBoYXNuJ3QgcmVuZGVyZWQgaXRzIGVsZW1lbnQgdG8gaXQgYmVmb3JlIHVzKTsgdGhhdFxuICAgIC8vIG9ubHkgaGFwcGVucyBpbiB0aGUgZXZlbnQgb2YgdGhlIGRpcmVjdGl2ZSBiZWluZyBjbGVhcmVkIChub3QgdmlhIG1hbnVhbFxuICAgIC8vIGRpc2Nvbm5lY3Rpb24pXG4gICAgaWYgKHRoaXMuX2xhc3RFbGVtZW50Rm9yUmVmID09PSB0aGlzLl9lbGVtZW50KSB7XG4gICAgICB0aGlzLl91cGRhdGVSZWZWYWx1ZSh1bmRlZmluZWQpO1xuICAgIH1cbiAgfVxuXG4gIG92ZXJyaWRlIHJlY29ubmVjdGVkKCkge1xuICAgIC8vIElmIHdlIHdlcmUgbWFudWFsbHkgZGlzY29ubmVjdGVkLCB3ZSBjYW4gc2FmZWx5IHB1dCBvdXIgZWxlbWVudCBiYWNrIGluXG4gICAgLy8gdGhlIGJveCwgc2luY2Ugbm8gcmVuZGVyaW5nIGNvdWxkIGhhdmUgb2NjdXJyZWQgdG8gY2hhbmdlIGl0cyBzdGF0ZVxuICAgIHRoaXMuX3VwZGF0ZVJlZlZhbHVlKHRoaXMuX2VsZW1lbnQpO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgYSBSZWYgb2JqZWN0IG9yIGNhbGxzIGEgcmVmIGNhbGxiYWNrIHdpdGggdGhlIGVsZW1lbnQgaXQnc1xuICogYm91bmQgdG8uXG4gKlxuICogQSBSZWYgb2JqZWN0IGFjdHMgYXMgYSBjb250YWluZXIgZm9yIGEgcmVmZXJlbmNlIHRvIGFuIGVsZW1lbnQuIEEgcmVmXG4gKiBjYWxsYmFjayBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gZWxlbWVudCBhcyBpdHMgb25seSBhcmd1bWVudC5cbiAqXG4gKiBUaGUgcmVmIGRpcmVjdGl2ZSBzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgUmVmIG9iamVjdCBvciBjYWxscyB0aGUgcmVmIGNhbGxiYWNrXG4gKiBkdXJpbmcgcmVuZGVyaW5nLCBpZiB0aGUgcmVmZXJlbmNlZCBlbGVtZW50IGNoYW5nZWQuXG4gKlxuICogTm90ZTogSWYgYSByZWYgY2FsbGJhY2sgaXMgcmVuZGVyZWQgdG8gYSBkaWZmZXJlbnQgZWxlbWVudCBwb3NpdGlvbiBvciBpc1xuICogcmVtb3ZlZCBpbiBhIHN1YnNlcXVlbnQgcmVuZGVyLCBpdCB3aWxsIGZpcnN0IGJlIGNhbGxlZCB3aXRoIGB1bmRlZmluZWRgLFxuICogZm9sbG93ZWQgYnkgYW5vdGhlciBjYWxsIHdpdGggdGhlIG5ldyBlbGVtZW50IGl0IHdhcyByZW5kZXJlZCB0byAoaWYgYW55KS5cbiAqXG4gKiBgYGBqc1xuICogLy8gVXNpbmcgUmVmIG9iamVjdFxuICogY29uc3QgaW5wdXRSZWYgPSBjcmVhdGVSZWYoKTtcbiAqIHJlbmRlcihodG1sYDxpbnB1dCAke3JlZihpbnB1dFJlZil9PmAsIGNvbnRhaW5lcik7XG4gKiBpbnB1dFJlZi52YWx1ZS5mb2N1cygpO1xuICpcbiAqIC8vIFVzaW5nIGNhbGxiYWNrXG4gKiBjb25zdCBjYWxsYmFjayA9IChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC5mb2N1cygpO1xuICogcmVuZGVyKGh0bWxgPGlucHV0ICR7cmVmKGNhbGxiYWNrKX0+YCwgY29udGFpbmVyKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgcmVmID0gZGlyZWN0aXZlKFJlZkRpcmVjdGl2ZSk7XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGNsYXNzIHRoYXQgcG93ZXJzIHRoaXMgZGlyZWN0aXZlLiBOZWNlc3NhcnkgZm9yIG5hbWluZyB0aGVcbiAqIGRpcmVjdGl2ZSdzIHJldHVybiB0eXBlLlxuICovXG5leHBvcnQgdHlwZSB7UmVmRGlyZWN0aXZlfTtcbiIsICIvKipcbiAqIFRlcm1pbmFsIENvbXBvbmVudFxuICpcbiAqIEZ1bGwgdGVybWluYWwgaW1wbGVtZW50YXRpb24gd2l0aCB4dGVybS5qcyBmb3IgcmVuZGVyaW5nIGFuZCBpbnB1dCBoYW5kbGluZy5cbiAqIFN1cHBvcnRzIGNvcHkvcGFzdGUsIFVSTCBoaWdobGlnaHRpbmcsIGN1c3RvbSBzY3JvbGxpbmcsIGFuZCByZXNwb25zaXZlIHNpemluZy5cbiAqXG4gKiBAZmlyZXMgdGVybWluYWwtcmVhZHkgLSBXaGVuIHRlcm1pbmFsIGlzIGluaXRpYWxpemVkIGFuZCByZWFkeVxuICogQGZpcmVzIHRlcm1pbmFsLWlucHV0IC0gV2hlbiB1c2VyIHR5cGVzIChkZXRhaWw6IHN0cmluZylcbiAqIEBmaXJlcyB0ZXJtaW5hbC1yZXNpemUgLSBXaGVuIHRlcm1pbmFsIGlzIHJlc2l6ZWQgKGRldGFpbDogeyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9KVxuICogQGZpcmVzIHVybC1jbGlja2VkIC0gV2hlbiBhIFVSTCBpcyBjbGlja2VkIChkZXRhaWw6IHN0cmluZylcbiAqL1xuXG5pbXBvcnQgeyB0eXBlIElCdWZmZXJDZWxsLCB0eXBlIElCdWZmZXJMaW5lLCBUZXJtaW5hbCBhcyBYdGVybVRlcm1pbmFsIH0gZnJvbSAnQHh0ZXJtL2hlYWRsZXNzJztcbmltcG9ydCB7IGh0bWwsIExpdEVsZW1lbnQsIHR5cGUgUHJvcGVydHlWYWx1ZXMgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgcHJvY2Vzc0tleWJvYXJkU2hvcnRjdXRzIH0gZnJvbSAnLi4vdXRpbHMva2V5Ym9hcmQtc2hvcnRjdXQtaGlnaGxpZ2h0ZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IFRlcm1pbmFsUHJlZmVyZW5jZXNNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvdGVybWluYWwtcHJlZmVyZW5jZXMuanMnO1xuaW1wb3J0IHsgVEVSTUlOQUxfVEhFTUVTLCB0eXBlIFRlcm1pbmFsVGhlbWVJZCB9IGZyb20gJy4uL3V0aWxzL3Rlcm1pbmFsLXRoZW1lcy5qcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50VGhlbWUgfSBmcm9tICcuLi91dGlscy90aGVtZS11dGlscy5qcyc7XG5pbXBvcnQgeyBVcmxIaWdobGlnaHRlciB9IGZyb20gJy4uL3V0aWxzL3VybC1oaWdobGlnaHRlcic7XG5cbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcigndGVybWluYWwnKTtcblxuQGN1c3RvbUVsZW1lbnQoJ3ZpYmUtdGVybWluYWwnKVxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIC8vIERpc2FibGUgc2hhZG93IERPTSBmb3IgVGFpbHdpbmQgY29tcGF0aWJpbGl0eSBhbmQgbmF0aXZlIHRleHQgc2VsZWN0aW9uXG4gIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBIVE1MRWxlbWVudDtcbiAgfVxuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBzZXNzaW9uSWQgPSAnJztcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIHNlc3Npb25TdGF0dXMgPSAncnVubmluZyc7IC8vIFRyYWNrIHNlc3Npb24gc3RhdHVzIGZvciBjdXJzb3IgY29udHJvbFxuICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSkgY29scyA9IDgwO1xuICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSkgcm93cyA9IDI0O1xuICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSkgZm9udFNpemUgPSAxNDtcbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KSBmaXRIb3Jpem9udGFsbHkgPSBmYWxzZTtcbiAgQHByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pIG1heENvbHMgPSAwOyAvLyAwIG1lYW5zIG5vIGxpbWl0XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSB0aGVtZTogVGVybWluYWxUaGVtZUlkID0gJ2F1dG8nO1xuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pIGRpc2FibGVDbGljayA9IGZhbHNlOyAvLyBEaXNhYmxlIGNsaWNrIGhhbmRsaW5nIChmb3IgbW9iaWxlIGRpcmVjdCBrZXlib2FyZClcbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KSBoaWRlU2Nyb2xsQnV0dG9uID0gZmFsc2U7IC8vIEhpZGUgc2Nyb2xsLXRvLWJvdHRvbSBidXR0b25cbiAgQHByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pIGluaXRpYWxDb2xzID0gMDsgLy8gSW5pdGlhbCB0ZXJtaW5hbCB3aWR0aCBmcm9tIHNlc3Npb24gY3JlYXRpb25cbiAgQHByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pIGluaXRpYWxSb3dzID0gMDsgLy8gSW5pdGlhbCB0ZXJtaW5hbCBoZWlnaHQgZnJvbSBzZXNzaW9uIGNyZWF0aW9uXG5cbiAgcHJpdmF0ZSBvcmlnaW5hbEZvbnRTaXplOiBudW1iZXIgPSAxNDtcbiAgdXNlck92ZXJyaWRlV2lkdGggPSBmYWxzZTsgLy8gVHJhY2sgaWYgdXNlciBtYW51YWxseSBzZWxlY3RlZCBhIHdpZHRoIChwdWJsaWMgZm9yIHNlc3Npb24tdmlldyBhY2Nlc3MpXG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSB0ZXJtaW5hbDogWHRlcm1UZXJtaW5hbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF92aWV3cG9ydFkgPSAwOyAvLyBDdXJyZW50IHNjcm9sbCBwb3NpdGlvbiBpbiBwaXhlbHNcbiAgQHN0YXRlKCkgcHJpdmF0ZSBmb2xsb3dDdXJzb3JFbmFibGVkID0gdHJ1ZTsgLy8gV2hldGhlciB0byBmb2xsb3cgY3Vyc29yIG9uIHdyaXRlc1xuICBwcml2YXRlIHByb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlOyAvLyBGbGFnIHRvIHByZXZlbnQgc3RhdGUgdXBkYXRlcyBkdXJpbmcgcHJvZ3JhbW1hdGljIHNjcm9sbGluZ1xuXG4gIC8vIERlYnVnIHBlcmZvcm1hbmNlIHRyYWNraW5nXG4gIHByaXZhdGUgZGVidWdNb2RlID0gZmFsc2U7XG4gIHByaXZhdGUgcmVuZGVyQ291bnQgPSAwO1xuICBwcml2YXRlIHRvdGFsUmVuZGVyVGltZSA9IDA7XG4gIHByaXZhdGUgX2xhc3RGaXRUaW1lPzogbnVtYmVyO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcblxuICBnZXQgdmlld3BvcnRZKCkge1xuICAgIHJldHVybiB0aGlzLl92aWV3cG9ydFk7XG4gIH1cblxuICBzZXQgdmlld3BvcnRZKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl92aWV3cG9ydFkgPSB2YWx1ZTtcbiAgfVxuICBAc3RhdGUoKSBwcml2YXRlIGFjdHVhbFJvd3MgPSAyNDsgLy8gUm93cyB0aGF0IGZpdCBpbiB2aWV3cG9ydFxuICBAc3RhdGUoKSBwcml2YXRlIGN1cnNvclZpc2libGUgPSB0cnVlOyAvLyBUcmFjayBjdXJzb3IgdmlzaWJpbGl0eSBzdGF0ZVxuXG4gIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGV4cGxpY2l0U2l6ZVNldCA9IGZhbHNlOyAvLyBGbGFnIHRvIHByZXZlbnQgYXV0by1yZXNpemUgd2hlbiBzaXplIGlzIGV4cGxpY2l0bHkgc2V0XG5cbiAgLy8gVmlydHVhbCBzY3JvbGxpbmcgb3B0aW1pemF0aW9uXG4gIHByaXZhdGUgcmVuZGVyUGVuZGluZyA9IGZhbHNlO1xuICBwcml2YXRlIG1vbWVudHVtVmVsb2NpdHlZID0gMDtcbiAgcHJpdmF0ZSBtb21lbnR1bVZlbG9jaXR5WCA9IDA7XG4gIHByaXZhdGUgbW9tZW50dW1BbmltYXRpb246IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1vYmlsZVdpZHRoUmVzaXplQ29tcGxldGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwZW5kaW5nUmVzaXplOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0Q29scyA9IDA7XG4gIHByaXZhdGUgbGFzdFJvd3MgPSAwO1xuICBwcml2YXRlIGlzTW9iaWxlID0gZmFsc2U7XG4gIHByaXZhdGUgbW9iaWxlSW5pdGlhbFJlc2l6ZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gT3BlcmF0aW9uIHF1ZXVlIGZvciBiYXRjaGluZyBidWZmZXIgbW9kaWZpY2F0aW9uc1xuICBwcml2YXRlIG9wZXJhdGlvblF1ZXVlOiAoKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pW10gPSBbXTtcblxuICBwcml2YXRlIHF1ZXVlUmVuZGVyT3BlcmF0aW9uKG9wZXJhdGlvbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcbiAgICB0aGlzLm9wZXJhdGlvblF1ZXVlLnB1c2gob3BlcmF0aW9uKTtcblxuICAgIGlmICghdGhpcy5yZW5kZXJQZW5kaW5nKSB7XG4gICAgICB0aGlzLnJlbmRlclBlbmRpbmcgPSB0cnVlO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9jZXNzT3BlcmF0aW9uUXVldWUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAvLyBPbmx5IGNsZWFyIHJlbmRlclBlbmRpbmcgd2hlbiBxdWV1ZSBpcyB0cnVseSBlbXB0eVxuICAgICAgICAgIGlmICh0aGlzLm9wZXJhdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVxdWVzdFJlbmRlckJ1ZmZlcigpIHtcbiAgICBsb2dnZXIuZGVidWcoJ1JlcXVlc3RpbmcgcmVuZGVyIGJ1ZmZlciB1cGRhdGUnKTtcbiAgICB0aGlzLnF1ZXVlUmVuZGVyT3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRXhlY3V0aW5nIHJlbmRlciBvcGVyYXRpb24nKTtcbiAgICAgIHRoaXMucmVuZGVyQnVmZmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NPcGVyYXRpb25RdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBNQVhfRlJBTUVfVElNRSA9IDg7IC8vIFRhcmdldCB+MTIwZnBzLCB5aWVsZCBtb3JlIGZyZXF1ZW50bHkgZm9yIGJldHRlciB0b3VjaCByZXNwb25zaXZlbmVzc1xuXG4gICAgLy8gUHJvY2VzcyBxdWV1ZWQgb3BlcmF0aW9ucywgYnV0IHlpZWxkIHBlcmlvZGljYWxseVxuICAgIHdoaWxlICh0aGlzLm9wZXJhdGlvblF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmIChvcGVyYXRpb24pIHtcbiAgICAgICAgYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIGJlZW4gcnVubmluZyB0b28gbG9uZ1xuICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID4gTUFYX0ZSQU1FX1RJTUUgJiYgdGhpcy5vcGVyYXRpb25RdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFN0aWxsIGhhdmUgbW9yZSBvcGVyYXRpb25zLCB5aWVsZCBjb250cm9sIGFuZCBjb250aW51ZSBpbiBuZXh0IGZyYW1lXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc09wZXJhdGlvblF1ZXVlKCkudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjsgLy8gRXhpdCBlYXJseSB0byBsZXQgYnJvd3NlciBwcm9jZXNzIGV2ZW50c1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsbCBvcGVyYXRpb25zIGNvbXBsZXRlLCByZW5kZXIgdGhlIGJ1ZmZlclxuICAgIHRoaXMucmVuZGVyQnVmZmVyKCk7XG5cbiAgICAvLyBDbGVhciByZW5kZXJQZW5kaW5nIGZsYWcgd2hlbiB0cnVseSBkb25lXG4gICAgaWYgKHRoaXMub3BlcmF0aW9uUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnJlbmRlclBlbmRpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRoZW1lT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbnN0IHByZWZzID0gVGVybWluYWxQcmVmZXJlbmNlc01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLnRoZW1lID0gcHJlZnMuZ2V0VGhlbWUoKTtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGRlYnVnIG1vZGVcbiAgICB0aGlzLmRlYnVnTW9kZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuaGFzKCdkZWJ1ZycpO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHRoZW1lIGNoYW5nZXMgKG9ubHkgd2hlbiB1c2luZyBhdXRvIHRoZW1lKVxuICAgIHRoaXMudGhlbWVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnRlcm1pbmFsICYmIHRoaXMudGhlbWUgPT09ICdhdXRvJykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0F1dG8gdGhlbWUgZGV0ZWN0ZWQgc3lzdGVtIGNoYW5nZSwgdXBkYXRpbmcgdGVybWluYWwnKTtcbiAgICAgICAgdGhpcy50ZXJtaW5hbC5vcHRpb25zLnRoZW1lID0gdGhpcy5nZXRUZXJtaW5hbFRoZW1lKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVybWluYWxDb2xvclByb3BlcnRpZXModGhpcy5nZXRUZXJtaW5hbFRoZW1lKCkpO1xuICAgICAgICB0aGlzLnJlcXVlc3RSZW5kZXJCdWZmZXIoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50aGVtZSAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnSWdub3Jpbmcgc3lzdGVtIHRoZW1lIGNoYW5nZSAtIGV4cGxpY2l0IHRoZW1lIHNlbGVjdGVkOicsIHRoaXMudGhlbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy50aGVtZU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2RhdGEtdGhlbWUnXSxcbiAgICB9KTtcblxuICAgIC8vIFJlc3RvcmUgdXNlciBvdmVycmlkZSBwcmVmZXJlbmNlIGlmIHdlIGhhdmUgYSBzZXNzaW9uSWRcbiAgICBpZiAodGhpcy5zZXNzaW9uSWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGB0ZXJtaW5hbC13aWR0aC1vdmVycmlkZS0ke3RoaXMuc2Vzc2lvbklkfWApO1xuICAgICAgICBpZiAoc3RvcmVkICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy51c2VyT3ZlcnJpZGVXaWR0aCA9IHN0b3JlZCA9PT0gJ3RydWUnO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UgbWlnaHQgYmUgdW5hdmFpbGFibGUgKGUuZy4sIHByaXZhdGUgYnJvd3NpbmcgbW9kZSlcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHRlcm1pbmFsIHdpZHRoIHByZWZlcmVuY2UgZnJvbSBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgLy8gTG9hZCB1c2VyIHdpZHRoIG92ZXJyaWRlIHByZWZlcmVuY2Ugd2hlbiBzZXNzaW9uSWQgY2hhbmdlc1xuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3Nlc3Npb25JZCcpICYmIHRoaXMuc2Vzc2lvbklkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGVybWluYWwtd2lkdGgtb3ZlcnJpZGUtJHt0aGlzLnNlc3Npb25JZH1gKTtcbiAgICAgICAgaWYgKHN0b3JlZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMudXNlck92ZXJyaWRlV2lkdGggPSBzdG9yZWQgPT09ICd0cnVlJztcbiAgICAgICAgICAvLyBBcHBseSB0aGUgbG9hZGVkIHByZWZlcmVuY2UgaW1tZWRpYXRlbHlcbiAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFJlc2l6ZSgncHJvcGVydHktY2hhbmdlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UgbWlnaHQgYmUgdW5hdmFpbGFibGUgKGUuZy4sIHByaXZhdGUgYnJvd3NpbmcgbW9kZSlcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHRlcm1pbmFsIHdpZHRoIHByZWZlcmVuY2UgZnJvbSBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2NvbHMnKSB8fCBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3Jvd3MnKSkge1xuICAgICAgaWYgKHRoaXMudGVybWluYWwgJiYgIXRoaXMuZXhwbGljaXRTaXplU2V0KSB7XG4gICAgICAgIHRoaXMucmVpbml0aWFsaXplVGVybWluYWwoKTtcbiAgICAgIH1cbiAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIHByb2Nlc3NpbmdcbiAgICAgIHRoaXMuZXhwbGljaXRTaXplU2V0ID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2ZvbnRTaXplJykpIHtcbiAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIGZvbnQgc2l6ZSB3aGVuIGl0IGNoYW5nZXMgKGJ1dCBub3QgZHVyaW5nIGhvcml6b250YWwgZml0dGluZylcbiAgICAgIGlmICghdGhpcy5maXRIb3Jpem9udGFsbHkpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEZvbnRTaXplID0gdGhpcy5mb250U2l6ZTtcbiAgICAgIH1cbiAgICAgIC8vIFJlY2FsY3VsYXRlIHRlcm1pbmFsIGRpbWVuc2lvbnMgd2hlbiBmb250IHNpemUgY2hhbmdlc1xuICAgICAgaWYgKHRoaXMudGVybWluYWwgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCdwcm9wZXJ0eS1jaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnZml0SG9yaXpvbnRhbGx5JykpIHtcbiAgICAgIGlmICghdGhpcy5maXRIb3Jpem9udGFsbHkpIHtcbiAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBmb250IHNpemUgd2hlbiB0dXJuaW5nIG9mZiBob3Jpem9udGFsIGZpdHRpbmdcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IHRoaXMub3JpZ2luYWxGb250U2l6ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVxdWVzdFJlc2l6ZSgncHJvcGVydHktY2hhbmdlJyk7XG4gICAgfVxuICAgIC8vIElmIG1heENvbHMgY2hhbmdlZCwgdHJpZ2dlciBhIHJlc2l6ZVxuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ21heENvbHMnKSkge1xuICAgICAgaWYgKHRoaXMudGVybWluYWwgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCdwcm9wZXJ0eS1jaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCd0aGVtZScpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ1Rlcm1pbmFsIHRoZW1lIGNoYW5nZWQgdG86JywgdGhpcy50aGVtZSk7XG4gICAgICBpZiAodGhpcy50ZXJtaW5hbD8ub3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXNvbHZlZFRoZW1lID0gdGhpcy5nZXRUZXJtaW5hbFRoZW1lKCk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQXBwbHlpbmcgdGVybWluYWwgdGhlbWU6JywgdGhpcy50aGVtZSk7XG4gICAgICAgIHRoaXMudGVybWluYWwub3B0aW9ucy50aGVtZSA9IHJlc29sdmVkVGhlbWU7XG5cbiAgICAgICAgLy8gVXBkYXRlIENTUyBjdXN0b20gcHJvcGVydGllcyBmb3IgdGVybWluYWwgY29sb3JzXG4gICAgICAgIHRoaXMudXBkYXRlVGVybWluYWxDb2xvclByb3BlcnRpZXMocmVzb2x2ZWRUaGVtZSk7XG5cbiAgICAgICAgLy8gRm9yY2UgY29tcGxldGUgSFRNTCByZWdlbmVyYXRpb24gdG8gcGljayB1cCBuZXcgY29sb3JzXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgIC8vIENsZWFyIHRoZSBjb250YWluZXIgZmlyc3RcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcmNlIGltbWVkaWF0ZSBidWZmZXIgcmUtcmVuZGVyIHdpdGggbmV3IGNvbG9yc1xuICAgICAgICB0aGlzLnJlcXVlc3RSZW5kZXJCdWZmZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdObyB0ZXJtaW5hbCBpbnN0YW5jZSBmb3VuZCBmb3IgdGhlbWUgdXBkYXRlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgaWYgKHRoaXMudGhlbWVPYnNlcnZlcikge1xuICAgICAgdGhpcy50aGVtZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBzZXQgdXNlciBvdmVycmlkZSB3aGVuIHdpZHRoIGlzIG1hbnVhbGx5IHNlbGVjdGVkXG4gIHNldFVzZXJPdmVycmlkZVdpZHRoKG92ZXJyaWRlOiBib29sZWFuKSB7XG4gICAgdGhpcy51c2VyT3ZlcnJpZGVXaWR0aCA9IG92ZXJyaWRlO1xuXG4gICAgLy8gUmVzZXQgbW9iaWxlIHdpZHRoIHJlc2l6ZSBjb21wbGV0ZSBmbGFnIHdoZW4gdXNlciBtYW51YWxseSBjaGFuZ2VzIHdpZHRoXG4gICAgLy8gVGhpcyBhbGxvd3MgdGhlIG5ldyB3aWR0aCB0byBiZSBhcHBsaWVkXG4gICAgaWYgKHRoaXMuaXNNb2JpbGUgJiYgb3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMubW9iaWxlV2lkdGhSZXNpemVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdbVGVybWluYWxdIE1vYmlsZTogUmVzZXR0aW5nIHdpZHRoIHJlc2l6ZSBibG9jayBmb3IgdXNlci1pbml0aWF0ZWQgY2hhbmdlJyk7XG4gICAgfVxuXG4gICAgLy8gUGVyc2lzdCB0aGUgcHJlZmVyZW5jZVxuICAgIGlmICh0aGlzLnNlc3Npb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHRlcm1pbmFsLXdpZHRoLW92ZXJyaWRlLSR7dGhpcy5zZXNzaW9uSWR9YCwgU3RyaW5nKG92ZXJyaWRlKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UgbWlnaHQgYmUgdW5hdmFpbGFibGUgb3IgcXVvdGEgZXhjZWVkZWRcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBzYXZlIHRlcm1pbmFsIHdpZHRoIHByZWZlcmVuY2UgdG8gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJpZ2dlciBhIHJlc2l6ZSB0byBhcHBseSB0aGUgbmV3IHNldHRpbmdcbiAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgIHRoaXMucmVxdWVzdFJlc2l6ZSgncHJvcGVydHktY2hhbmdlJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwKCkge1xuICAgIC8vIFN0b3AgbW9tZW50dW0gYW5pbWF0aW9uXG4gICAgaWYgKHRoaXMubW9tZW50dW1BbmltYXRpb24pIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubW9tZW50dW1BbmltYXRpb24pO1xuICAgICAgdGhpcy5tb21lbnR1bUFuaW1hdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGVuZGluZ1Jlc2l6ZSkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5wZW5kaW5nUmVzaXplKTtcbiAgICAgIHRoaXMucGVuZGluZ1Jlc2l6ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9iaWxlSW5pdGlhbFJlc2l6ZVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1vYmlsZUluaXRpYWxSZXNpemVUaW1lb3V0KTtcbiAgICAgIHRoaXMubW9iaWxlSW5pdGlhbFJlc2l6ZVRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRlcm1pbmFsKSB7XG4gICAgICB0aGlzLnRlcm1pbmFsLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMudGVybWluYWwgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZpcnN0VXBkYXRlZCgpIHtcbiAgICAvLyBTdG9yZSB0aGUgaW5pdGlhbCBmb250IHNpemUgYXMgb3JpZ2luYWxcbiAgICB0aGlzLm9yaWdpbmFsRm9udFNpemUgPSB0aGlzLmZvbnRTaXplO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0ZXJtaW5hbCBpbW1lZGlhdGVseVxuXG4gICAgdGhpcy5pbml0aWFsaXplVGVybWluYWwoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVxdWVzdFJlc2l6ZShzb3VyY2U6IHN0cmluZykge1xuICAgIC8vIFVwZGF0ZSBtb2JpbGUgc3RhdGUgdXNpbmcgd2luZG93IHdpZHRoIGZvciBjb25zaXN0ZW5jeSB3aXRoIGFwcC50c1xuICAgIC8vIFRoaXMgZW5zdXJlcyBDaHJvbWUgbW9iaWxlIHNpbXVsYXRpb24gd29ya3MgY29ycmVjdGx5XG4gICAgY29uc3QgTU9CSUxFX0JSRUFLUE9JTlQgPSA3Njg7IC8vIFNhbWUgYXMgQlJFQUtQT0lOVFMuTU9CSUxFXG4gICAgdGhpcy5pc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDwgTU9CSUxFX0JSRUFLUE9JTlQ7XG5cbiAgICBsb2dnZXIuZGVidWcoXG4gICAgICBgW1Rlcm1pbmFsXSBSZXNpemUgcmVxdWVzdGVkIGZyb20gJHtzb3VyY2V9IChtb2JpbGU6ICR7dGhpcy5pc01vYmlsZX0sIHdpZHRoOiAke3dpbmRvdy5pbm5lcldpZHRofSlgXG4gICAgKTtcblxuICAgIC8vIENhbmNlbCBhbnkgcGVuZGluZyByZXNpemVcbiAgICBpZiAodGhpcy5wZW5kaW5nUmVzaXplKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnBlbmRpbmdSZXNpemUpO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIHJlc2l6ZSBmb3IgbmV4dCBhbmltYXRpb24gZnJhbWVcbiAgICB0aGlzLnBlbmRpbmdSZXNpemUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5maXRUZXJtaW5hbChzb3VyY2UpO1xuICAgICAgdGhpcy5wZW5kaW5nUmVzaXplID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgLy8gT24gbW9iaWxlLCBwcmV2ZW50IFdJRFRIIGNoYW5nZXMgYWZ0ZXIgaW5pdGlhbCBzZXR1cCwgYnV0IGFsbG93IEhFSUdIVCBjaGFuZ2VzXG4gICAgLy8gRXhjZXB0aW9uOiBBbGxvdyB3aWR0aCBjaGFuZ2VzIHdoZW4gdXNlciBoYXMgbWFudWFsbHkgc2VsZWN0ZWQgYSB3aWR0aCB0aHJvdWdoIHNldHRpbmdzXG4gICAgaWYgKHRoaXMuaXNNb2JpbGUgJiYgdGhpcy5tb2JpbGVXaWR0aFJlc2l6ZUNvbXBsZXRlICYmICF0aGlzLnVzZXJPdmVycmlkZVdpZHRoKSB7XG4gICAgICAvLyBDaGVjayBpZiBvbmx5IGhlaWdodCBjaGFuZ2VkIChhbGxvdyBrZXlib2FyZCByZXNpemVzKVxuICAgICAgY29uc3Qgd2lkdGhDaGFuZ2VkID0gdGhpcy5sYXN0Q29scyAhPT0gY29scztcbiAgICAgIGNvbnN0IGhlaWdodENoYW5nZWQgPSB0aGlzLmxhc3RSb3dzICE9PSByb3dzO1xuXG4gICAgICBpZiAod2lkdGhDaGFuZ2VkKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgW1Rlcm1pbmFsXSBQcmV2ZW50aW5nIFdJRFRIIHJlc2l6ZSBvbiBtb2JpbGUgKHdpZHRoIGFscmVhZHkgc2V0KWApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChoZWlnaHRDaGFuZ2VkKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICBgW1Rlcm1pbmFsXSBBbGxvd2luZyBIRUlHSFQgcmVzaXplIG9uIG1vYmlsZTogJHt0aGlzLmxhc3RSb3dzfSBcdTIxOTIgJHtyb3dzfSByb3dzYFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmxhc3RSb3dzID0gcm93cztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBkaW1lbnNpb25zIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBjb25zdCBjaGFuZ2VkID0gdGhpcy5sYXN0Q29scyAhPT0gY29scyB8fCB0aGlzLmxhc3RSb3dzICE9PSByb3dzO1xuXG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYFtUZXJtaW5hbF0gRGltZW5zaW9ucyBjaGFuZ2VkOiAke3RoaXMubGFzdENvbHN9eCR7dGhpcy5sYXN0Um93c30gXHUyMTkyICR7Y29sc314JHtyb3dzfWBcbiAgICAgICk7XG4gICAgICB0aGlzLmxhc3RDb2xzID0gY29scztcbiAgICAgIHRoaXMubGFzdFJvd3MgPSByb3dzO1xuXG4gICAgICAvLyBNYXJrIG1vYmlsZSBXSURUSCByZXNpemUgYXMgY29tcGxldGUgYWZ0ZXIgZmlyc3QgcmVzaXplXG4gICAgICBpZiAodGhpcy5pc01vYmlsZSAmJiAhdGhpcy5tb2JpbGVXaWR0aFJlc2l6ZUNvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMubW9iaWxlV2lkdGhSZXNpemVDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgW1Rlcm1pbmFsXSBNb2JpbGUgV0lEVEggcmVzaXplIGNvbXBsZXRlIC0gYmxvY2tpbmcgZnV0dXJlIHdpZHRoIGNoYW5nZXNgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlZDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVybWluYWxUaGVtZSgpIHtcbiAgICBsZXQgdGhlbWVJZCA9IHRoaXMudGhlbWU7XG5cbiAgICBpZiAodGhlbWVJZCA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGVtZUlkID0gZ2V0Q3VycmVudFRoZW1lKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJlc2V0ID0gVEVSTUlOQUxfVEhFTUVTLmZpbmQoKHQpID0+IHQuaWQgPT09IHRoZW1lSWQpIHx8IFRFUk1JTkFMX1RIRU1FU1swXTtcbiAgICByZXR1cm4geyAuLi5wcmVzZXQuY29sb3JzIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgZm9yIHRlcm1pbmFsIGNvbG9ycyBiYXNlZCBvbiB0aGVtZVxuICAgKiBUaGlzIGFsbG93cyB0aGUgYWxyZWFkeS1yZW5kZXJlZCBIVE1MIHRvIGltbWVkaWF0ZWx5IHBpY2sgdXAgbmV3IGNvbG9yc1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbENvbG9yUHJvcGVydGllcyh0aGVtZUNvbG9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xuICAgIGxvZ2dlci5kZWJ1ZygnVXBkYXRpbmcgdGVybWluYWwgQ1NTIGNvbG9yIHByb3BlcnRpZXMnKTtcblxuICAgIC8vIFN0YW5kYXJkIDE2IGNvbG9ycyBtYXBwaW5nIGZyb20gWFRlcm0uanMgdGhlbWUgdG8gQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzXG4gICAgY29uc3QgY29sb3JNYXBwaW5nID0ge1xuICAgICAgYmxhY2s6IDAsXG4gICAgICByZWQ6IDEsXG4gICAgICBncmVlbjogMixcbiAgICAgIHllbGxvdzogMyxcbiAgICAgIGJsdWU6IDQsXG4gICAgICBtYWdlbnRhOiA1LFxuICAgICAgY3lhbjogNixcbiAgICAgIHdoaXRlOiA3LFxuICAgICAgYnJpZ2h0QmxhY2s6IDgsXG4gICAgICBicmlnaHRSZWQ6IDksXG4gICAgICBicmlnaHRHcmVlbjogMTAsXG4gICAgICBicmlnaHRZZWxsb3c6IDExLFxuICAgICAgYnJpZ2h0Qmx1ZTogMTIsXG4gICAgICBicmlnaHRNYWdlbnRhOiAxMyxcbiAgICAgIGJyaWdodEN5YW46IDE0LFxuICAgICAgYnJpZ2h0V2hpdGU6IDE1LFxuICAgIH07XG5cbiAgICAvLyBVcGRhdGUgdGhlIENTUyBjdXN0b20gcHJvcGVydGllc1xuICAgIE9iamVjdC5lbnRyaWVzKGNvbG9yTWFwcGluZykuZm9yRWFjaCgoW2NvbG9yTmFtZSwgY29sb3JJbmRleF0pID0+IHtcbiAgICAgIGlmICh0aGVtZUNvbG9yc1tjb2xvck5hbWVdKSB7XG4gICAgICAgIGNvbnN0IGNzc1Byb3BlcnR5ID0gYC0tdGVybWluYWwtY29sb3ItJHtjb2xvckluZGV4fWA7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShjc3NQcm9wZXJ0eSwgdGhlbWVDb2xvcnNbY29sb3JOYW1lXSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgU2V0IENTUyBwcm9wZXJ0eSAke2Nzc1Byb3BlcnR5fTpgLCB0aGVtZUNvbG9yc1tjb2xvck5hbWVdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBtYWluIHRlcm1pbmFsIGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3JzXG4gICAgaWYgKHRoZW1lQ29sb3JzLmZvcmVncm91bmQpIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10ZXJtaW5hbC1mb3JlZ3JvdW5kJywgdGhlbWVDb2xvcnMuZm9yZWdyb3VuZCk7XG4gICAgICBsb2dnZXIuZGVidWcoJ1NldCB0ZXJtaW5hbCBmb3JlZ3JvdW5kIGNvbG9yOicsIHRoZW1lQ29sb3JzLmZvcmVncm91bmQpO1xuICAgIH1cbiAgICBpZiAodGhlbWVDb2xvcnMuYmFja2dyb3VuZCkge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXRlcm1pbmFsLWJhY2tncm91bmQnLCB0aGVtZUNvbG9ycy5iYWNrZ3JvdW5kKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnU2V0IHRlcm1pbmFsIGJhY2tncm91bmQgY29sb3I6JywgdGhlbWVDb2xvcnMuYmFja2dyb3VuZCk7XG4gICAgfVxuXG4gICAgbG9nZ2VyLmRlYnVnKCdDU1MgdGVybWluYWwgY29sb3IgcHJvcGVydGllcyB1cGRhdGVkJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUZXJtaW5hbCgpIHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdpbml0aWFsaXplVGVybWluYWwgc3RhcnRpbmcnKTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuXG4gICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMucXVlcnlTZWxlY3RvcignI3Rlcm1pbmFsLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdUZXJtaW5hbCBjb250YWluZXIgbm90IGZvdW5kJyk7XG4gICAgICAgIGxvZ2dlci5lcnJvcigndGVybWluYWwgY29udGFpbmVyIG5vdCBmb3VuZCcsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnVGVybWluYWwgY29udGFpbmVyIGZvdW5kLCBwcm9jZWVkaW5nIHdpdGggc2V0dXAnKTtcblxuICAgICAgYXdhaXQgdGhpcy5zZXR1cFRlcm1pbmFsKCk7XG4gICAgICB0aGlzLnNldHVwUmVzaXplKCk7XG4gICAgICB0aGlzLnNldHVwU2Nyb2xsaW5nKCk7XG5cbiAgICAgIC8vIEVuc3VyZSB0ZXJtaW5hbCBzdGFydHMgYXQgdGhlIHRvcFxuICAgICAgdGhpcy52aWV3cG9ydFkgPSAwO1xuICAgICAgaWYgKHRoaXMudGVybWluYWwpIHtcbiAgICAgICAgdGhpcy50ZXJtaW5hbC5zY3JvbGxUb1RvcCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdmYWlsZWQgdG8gaW5pdGlhbGl6ZSB0ZXJtaW5hbDonLCBlcnJvcik7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlaW5pdGlhbGl6ZVRlcm1pbmFsKCkge1xuICAgIGlmICh0aGlzLnRlcm1pbmFsKSB7XG4gICAgICAvLyBGb3JjZSBsYXlvdXQvcmVmbG93IHNvIGNvbnRhaW5lciBnZXRzIGl0cyBwcm9wZXIgaGVpZ2h0XG4gICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgLy8gRm9yY2UgbGF5b3V0IHJlZmxvdyBieSBhY2Nlc3Npbmcgb2Zmc2V0SGVpZ2h0XG4gICAgICAgIHZvaWQgdGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgY29scyBhbmQgcm93cyBhcmUgdmFsaWQgbnVtYmVycyBiZWZvcmUgcmVzaXppbmdcbiAgICAgIGNvbnN0IHNhZmVDb2xzID0gTnVtYmVyLmlzRmluaXRlKHRoaXMuY29scykgPyBNYXRoLmZsb29yKHRoaXMuY29scykgOiA4MDtcbiAgICAgIGNvbnN0IHNhZmVSb3dzID0gTnVtYmVyLmlzRmluaXRlKHRoaXMucm93cykgPyBNYXRoLmZsb29yKHRoaXMucm93cykgOiAyNDtcbiAgICAgIHRoaXMudGVybWluYWwucmVzaXplKHNhZmVDb2xzLCBzYWZlUm93cyk7XG4gICAgICB0aGlzLnJlcXVlc3RSZXNpemUoJ3Byb3BlcnR5LWNoYW5nZScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBUZXJtaW5hbCgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIHJlZ3VsYXIgdGVybWluYWwgYnV0IGRvbid0IGNhbGwgLm9wZW4oKSB0byBtYWtlIGl0IGhlYWRsZXNzXG4gICAgICB0aGlzLnRlcm1pbmFsID0gbmV3IFh0ZXJtVGVybWluYWwoe1xuICAgICAgICBjdXJzb3JCbGluazogdHJ1ZSxcbiAgICAgICAgY3Vyc29yU3R5bGU6ICdibG9jaycsXG4gICAgICAgIGN1cnNvcldpZHRoOiAxLFxuICAgICAgICBsaW5lSGVpZ2h0OiAxLjIsXG4gICAgICAgIGxldHRlclNwYWNpbmc6IDAsXG4gICAgICAgIHNjcm9sbGJhY2s6IDEwMDAwLFxuICAgICAgICBhbGxvd1Byb3Bvc2VkQXBpOiB0cnVlLFxuICAgICAgICBhbGxvd1RyYW5zcGFyZW5jeTogZmFsc2UsXG4gICAgICAgIGNvbnZlcnRFb2w6IHRydWUsXG4gICAgICAgIGRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzOiB0cnVlLFxuICAgICAgICBtaW5pbXVtQ29udHJhc3RSYXRpbzogMSxcbiAgICAgICAgbWFjT3B0aW9uSXNNZXRhOiB0cnVlLFxuICAgICAgICBhbHRDbGlja01vdmVzQ3Vyc29yOiB0cnVlLFxuICAgICAgICByaWdodENsaWNrU2VsZWN0c1dvcmQ6IGZhbHNlLFxuICAgICAgICB3b3JkU2VwYXJhdG9yOiAnICgpW117fVxcJ1wiYCcsXG4gICAgICAgIHRoZW1lOiB0aGlzLmdldFRlcm1pbmFsVGhlbWUoKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZXQgdGVybWluYWwgc2l6ZSAtIGRvbid0IGNhbGwgLm9wZW4oKSB0byBrZWVwIGl0IGhlYWRsZXNzXG4gICAgICB0aGlzLnRlcm1pbmFsLnJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG5cbiAgICAgIC8vIEZvcmNlIGluaXRpYWwgcmVuZGVyIG9mIHRoZSBidWZmZXJcbiAgICAgIHRoaXMucmVxdWVzdFJlbmRlckJ1ZmZlcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ2ZhaWxlZCB0byBjcmVhdGUgdGVybWluYWw6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtZWFzdXJlQ2hhcmFjdGVyV2lkdGgoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm4gODtcblxuICAgIC8vIENyZWF0ZSB0ZW1wb3JhcnkgZWxlbWVudCB3aXRoIHNhbWUgc3R5bGVzIGFzIHRlcm1pbmFsIGNvbnRlbnQsIGF0dGFjaGVkIHRvIGNvbnRhaW5lclxuICAgIGNvbnN0IG1lYXN1cmVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG1lYXN1cmVFbC5jbGFzc05hbWUgPSAndGVybWluYWwtbGluZSc7XG4gICAgbWVhc3VyZUVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBtZWFzdXJlRWwuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIG1lYXN1cmVFbC5zdHlsZS50b3AgPSAnMCc7XG4gICAgbWVhc3VyZUVsLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgbWVhc3VyZUVsLnN0eWxlLmZvbnRTaXplID0gYCR7dGhpcy5mb250U2l6ZX1weGA7XG4gICAgbWVhc3VyZUVsLnN0eWxlLmZvbnRGYW1pbHkgPSAnSGFjayBOZXJkIEZvbnQgTW9ubywgRmlyYSBDb2RlLCBtb25vc3BhY2UnO1xuXG4gICAgLy8gVXNlIGEgbWl4IG9mIGNoYXJhY3RlcnMgdGhhdCByZXByZXNlbnQgdHlwaWNhbCB0ZXJtaW5hbCBjb250ZW50XG4gICAgY29uc3QgdGVzdFN0cmluZyA9XG4gICAgICAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODkhQCMkJV4mKigpXystPVtde318OzosLjw+Pyc7XG4gICAgY29uc3QgcmVwZWF0Q291bnQgPSBNYXRoLmNlaWwodGhpcy5jb2xzIC8gdGVzdFN0cmluZy5sZW5ndGgpO1xuICAgIGNvbnN0IHRlc3RDb250ZW50ID0gdGVzdFN0cmluZy5yZXBlYXQocmVwZWF0Q291bnQpLnN1YnN0cmluZygwLCB0aGlzLmNvbHMpO1xuICAgIG1lYXN1cmVFbC50ZXh0Q29udGVudCA9IHRlc3RDb250ZW50O1xuXG4gICAgLy8gQXR0YWNoIHRvIGNvbnRhaW5lciBzbyBpdCBpbmhlcml0cyBhbGwgdGhlIHByb3BlciBDU1MgY29udGV4dFxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKG1lYXN1cmVFbCk7XG4gICAgY29uc3QgbWVhc3VyZVJlY3QgPSBtZWFzdXJlRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgYWN0dWFsQ2hhcldpZHRoID0gbWVhc3VyZVJlY3Qud2lkdGggLyB0aGlzLmNvbHM7XG4gICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQobWVhc3VyZUVsKTtcblxuICAgIC8vIEVuc3VyZSB3ZSByZXR1cm4gYSB2YWxpZCBudW1iZXJcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKGFjdHVhbENoYXJXaWR0aCkgJiYgYWN0dWFsQ2hhcldpZHRoID4gMCA/IGFjdHVhbENoYXJXaWR0aCA6IDg7XG4gIH1cblxuICBwcml2YXRlIGZpdFRlcm1pbmFsKHNvdXJjZT86IHN0cmluZykge1xuICAgIGlmICghdGhpcy50ZXJtaW5hbCB8fCAhdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdbVGVybWluYWxdIENhbm5vdCBmaXQgdGVybWluYWw6IHRlcm1pbmFsIG9yIGNvbnRhaW5lciBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RGaXQgPSB0aGlzLl9sYXN0Rml0VGltZSA/IHRpbWVzdGFtcCAtIHRoaXMuX2xhc3RGaXRUaW1lIDogMDtcbiAgICB0aGlzLl9sYXN0Rml0VGltZSA9IHRpbWVzdGFtcDtcblxuICAgIGxvZ2dlci5kZWJ1ZyhgW1Rlcm1pbmFsXSBcdUQ4M0RcdURDRjEgZml0VGVybWluYWwgY2FsbGVkYCwge1xuICAgICAgc291cmNlOiBzb3VyY2UgfHwgJ3Vua25vd24nLFxuICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUsXG4gICAgICB3aW5kb3dXaWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICB0aW1lU2luY2VMYXN0Rml0LFxuICAgICAgY29sczogdGhpcy5jb2xzLFxuICAgICAgcm93czogdGhpcy5yb3dzLFxuICAgICAgYWN0dWFsUm93czogdGhpcy5hY3R1YWxSb3dzLFxuICAgICAgYnVmZmVyTGVuZ3RoOiB0aGlzLnRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUubGVuZ3RoLFxuICAgIH0pO1xuXG4gICAgLy8gVXNlIHRoZSBjbGFzcyBwcm9wZXJ0eSBpbnN0ZWFkIG9mIHJlY2hlY2tpbmdcbiAgICBpZiAodGhpcy5pc01vYmlsZSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgW1Rlcm1pbmFsXSBNb2JpbGUgZGV0ZWN0ZWQgaW4gZml0VGVybWluYWwgLSBzb3VyY2U6ICR7c291cmNlfSwgdXNlckFnZW50OiAke25hdmlnYXRvci51c2VyQWdlbnR9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBfb2xkQWN0dWFsUm93cyA9IHRoaXMuYWN0dWFsUm93cztcbiAgICBjb25zdCBvbGRMaW5lSGVpZ2h0ID0gdGhpcy5mb250U2l6ZSAqIDEuMjtcbiAgICBjb25zdCB3YXNBdEJvdHRvbSA9IHRoaXMuaXNTY3JvbGxlZFRvQm90dG9tKCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gaW4gdGVybXMgb2YgY29udGVudCBsaW5lcyAoYmVmb3JlIGFueSBjaGFuZ2VzKVxuICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxMaW5lcyA9IG9sZExpbmVIZWlnaHQgPiAwID8gdGhpcy52aWV3cG9ydFkgLyBvbGRMaW5lSGVpZ2h0IDogMDtcblxuICAgIGlmICh0aGlzLmZpdEhvcml6b250YWxseSkge1xuICAgICAgLy8gSG9yaXpvbnRhbCBmaXR0aW5nOiBjYWxjdWxhdGUgZm9udFNpemUgdG8gZml0IHRoaXMuY29scyBjaGFyYWN0ZXJzIGluIGNvbnRhaW5lciB3aWR0aFxuICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSB0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IHRoaXMuY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgIGNvbnN0IHRhcmdldENoYXJXaWR0aCA9IGNvbnRhaW5lcldpZHRoIC8gdGhpcy5jb2xzO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgZm9udFNpemUgbmVlZGVkIGZvciB0YXJnZXQgY2hhcmFjdGVyIHdpZHRoXG4gICAgICAvLyBVc2UgY3VycmVudCBmb250IHNpemUgYXMgc3RhcnRpbmcgcG9pbnQgYW5kIG1lYXN1cmUgYWN0dWFsIGNoYXJhY3RlciB3aWR0aFxuICAgICAgY29uc3QgY3VycmVudENoYXJXaWR0aCA9IHRoaXMubWVhc3VyZUNoYXJhY3RlcldpZHRoKCk7XG4gICAgICBjb25zdCBzY2FsZUZhY3RvciA9IHRhcmdldENoYXJXaWR0aCAvIGN1cnJlbnRDaGFyV2lkdGg7XG4gICAgICBjb25zdCBjYWxjdWxhdGVkRm9udFNpemUgPSB0aGlzLmZvbnRTaXplICogc2NhbGVGYWN0b3I7XG4gICAgICBjb25zdCBuZXdGb250U2l6ZSA9IE1hdGgubWF4KDQsIE1hdGgubWluKDMyLCBjYWxjdWxhdGVkRm9udFNpemUpKTtcblxuICAgICAgdGhpcy5mb250U2l6ZSA9IG5ld0ZvbnRTaXplO1xuXG4gICAgICAvLyBBbHNvIGZpdCByb3dzIHRvIHVzZSBmdWxsIGNvbnRhaW5lciBoZWlnaHQgd2l0aCB0aGUgbmV3IGZvbnQgc2l6ZVxuICAgICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICBjb25zdCBmaXR0ZWRSb3dzID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihjb250YWluZXJIZWlnaHQgLyBsaW5lSGVpZ2h0KSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBib3RoIGFjdHVhbFJvd3MgYW5kIHRoZSB0ZXJtaW5hbCdzIGFjdHVhbCByb3cgY291bnRcbiAgICAgIHRoaXMuYWN0dWFsUm93cyA9IGZpdHRlZFJvd3M7XG4gICAgICB0aGlzLnJvd3MgPSBmaXR0ZWRSb3dzO1xuXG4gICAgICAvLyBSZXNpemUgdGhlIHRlcm1pbmFsIHRvIHRoZSBuZXcgZGltZW5zaW9uc1xuICAgICAgaWYgKHRoaXMudGVybWluYWwpIHtcbiAgICAgICAgLy8gRW5zdXJlIGNvbHMgYW5kIHJvd3MgYXJlIHZhbGlkIG51bWJlcnMgYmVmb3JlIHJlc2l6aW5nXG4gICAgICAgIGNvbnN0IHNhZmVDb2xzID0gTnVtYmVyLmlzRmluaXRlKHRoaXMuY29scykgPyBNYXRoLmZsb29yKHRoaXMuY29scykgOiA4MDtcbiAgICAgICAgY29uc3Qgc2FmZVJvd3MgPSBOdW1iZXIuaXNGaW5pdGUodGhpcy5yb3dzKSA/IE1hdGguZmxvb3IodGhpcy5yb3dzKSA6IDI0O1xuXG4gICAgICAgIC8vIFNhdmUgb2xkIGRpbWVuc2lvbnMgYmVmb3JlIHNob3VsZFJlc2l6ZSB1cGRhdGVzIHRoZW1cbiAgICAgICAgY29uc3Qgb2xkQ29scyA9IHRoaXMubGFzdENvbHM7XG4gICAgICAgIGNvbnN0IG9sZFJvd3MgPSB0aGlzLmxhc3RSb3dzO1xuXG4gICAgICAgIC8vIFVzZSByZXNpemUgY29vcmRpbmF0b3IgdG8gY2hlY2sgaWYgd2Ugc2hvdWxkIGFjdHVhbGx5IHJlc2l6ZVxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNpemUoc2FmZUNvbHMsIHNhZmVSb3dzKSkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVzaXppbmcgdGVybWluYWwgKCR7c291cmNlIHx8ICd1bmtub3duJ30pOiAke3NhZmVDb2xzfXgke3NhZmVSb3dzfWApO1xuICAgICAgICAgIHRoaXMudGVybWluYWwucmVzaXplKHNhZmVDb2xzLCBzYWZlUm93cyk7XG5cbiAgICAgICAgICAvLyBEaXNwYXRjaCByZXNpemUgZXZlbnQgZm9yIGJhY2tlbmQgc3luY2hyb25pemF0aW9uXG4gICAgICAgICAgLy8gSW5jbHVkZSBtb2JpbGUgZmxhZyBhbmQgd2hldGhlciB0aGlzIGlzIGhlaWdodC1vbmx5IGNoYW5nZVxuICAgICAgICAgIGNvbnN0IGlzV2lkdGhDaGFuZ2UgPSBzYWZlQ29scyAhPT0gb2xkQ29scztcbiAgICAgICAgICBjb25zdCBpc0hlaWdodE9ubHlDaGFuZ2UgPSAhaXNXaWR0aENoYW5nZSAmJiBzYWZlUm93cyAhPT0gb2xkUm93cztcblxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudCgndGVybWluYWwtcmVzaXplJywge1xuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBjb2xzOiBzYWZlQ29scyxcbiAgICAgICAgICAgICAgICByb3dzOiBzYWZlUm93cyxcbiAgICAgICAgICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSxcbiAgICAgICAgICAgICAgICBpc0hlaWdodE9ubHlDaGFuZ2UsXG4gICAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2UgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgU2tpcHBpbmcgcmVzaXplICgke3NvdXJjZSB8fCAndW5rbm93bid9KTogZGltZW5zaW9ucyB1bmNoYW5nZWRgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3JtYWwgbW9kZTogY2FsY3VsYXRlIGJvdGggY29scyBhbmQgcm93cyBiYXNlZCBvbiBjb250YWluZXIgc2l6ZVxuICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSB0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aCB8fCA4MDA7IC8vIERlZmF1bHQgd2lkdGggaWYgY29udGFpbmVyIG5vdCByZWFkeVxuICAgICAgY29uc3QgY29udGFpbmVySGVpZ2h0ID0gdGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0IHx8IDYwMDsgLy8gRGVmYXVsdCBoZWlnaHQgaWYgY29udGFpbmVyIG5vdCByZWFkeVxuICAgICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICBjb25zdCBjaGFyV2lkdGggPSB0aGlzLm1lYXN1cmVDaGFyYWN0ZXJXaWR0aCgpO1xuXG4gICAgICAvLyBFbnN1cmUgY2hhcldpZHRoIGlzIHZhbGlkIGJlZm9yZSBkaXZpc2lvblxuICAgICAgY29uc3Qgc2FmZUNoYXJXaWR0aCA9IE51bWJlci5pc0Zpbml0ZShjaGFyV2lkdGgpICYmIGNoYXJXaWR0aCA+IDAgPyBjaGFyV2lkdGggOiA4OyAvLyBEZWZhdWx0IGNoYXIgd2lkdGhcbiAgICAgIC8vIFN1YnRyYWN0IDEgdG8gcHJldmVudCBob3Jpem9udGFsIHNjcm9sbGJhciBkdWUgdG8gcm91bmRpbmcvYm9yZGVyIGlzc3Vlc1xuICAgICAgY29uc3QgY2FsY3VsYXRlZENvbHMgPSBNYXRoLm1heCgyMCwgTWF0aC5mbG9vcihjb250YWluZXJXaWR0aCAvIHNhZmVDaGFyV2lkdGgpKSAtIDE7XG5cbiAgICAgIC8vIEFwcGx5IGNvbnN0cmFpbnRzIGluIG9yZGVyIG9mIHByaW9yaXR5OlxuICAgICAgLy8gMS4gSWYgdXNlciBoYXMgbWFudWFsbHkgc2VsZWN0ZWQgYSBzcGVjaWZpYyB3aWR0aCAobWF4Q29scyA+IDApLCB1c2UgdGhhdCBhcyB0aGUgbGltaXRcbiAgICAgIC8vIDIuIElmIHVzZXIgaGFzIGV4cGxpY2l0bHkgc2VsZWN0ZWQgXCJ1bmxpbWl0ZWRcIiAobWF4Q29scyA9IDAgd2l0aCB1c2VyT3ZlcnJpZGVXaWR0aCksIHVzZSBmdWxsIHdpZHRoXG4gICAgICAvLyAzLiBGb3IgdHVubmVsZWQgc2Vzc2lvbnMgKGZ3ZF8qKSwgaWYgd2UgaGF2ZSBpbml0aWFsIGRpbWVuc2lvbnMgYW5kIG5vIHVzZXIgb3ZlcnJpZGUsIGxpbWl0IHRvIGluaXRpYWwgd2lkdGhcbiAgICAgIC8vIDQuIE90aGVyd2lzZSwgdXNlIGNhbGN1bGF0ZWQgd2lkdGggKHVubGltaXRlZClcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHR1bm5lbGVkIHNlc3Npb24gKGZyb20gdnQgY29tbWFuZClcbiAgICAgIGNvbnN0IGlzVHVubmVsZWRTZXNzaW9uID0gdGhpcy5zZXNzaW9uSWQuc3RhcnRzV2l0aCgnZndkXycpO1xuXG4gICAgICBpZiAodGhpcy5tYXhDb2xzID4gMCkge1xuICAgICAgICAvLyBVc2VyIGhhcyBtYW51YWxseSBzZWxlY3RlZCBhIHNwZWNpZmljIHdpZHRoIGxpbWl0XG4gICAgICAgIHRoaXMuY29scyA9IE1hdGgubWluKGNhbGN1bGF0ZWRDb2xzLCB0aGlzLm1heENvbHMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJPdmVycmlkZVdpZHRoKSB7XG4gICAgICAgIC8vIFVzZXIgaGFzIGV4cGxpY2l0bHkgc2VsZWN0ZWQgXCJ1bmxpbWl0ZWRcIiAtIHVzZSBmdWxsIHdpZHRoXG4gICAgICAgIHRoaXMuY29scyA9IGNhbGN1bGF0ZWRDb2xzO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmluaXRpYWxDb2xzID4gMCAmJiBpc1R1bm5lbGVkU2Vzc2lvbikge1xuICAgICAgICAvLyBPbmx5IGFwcGx5IGluaXRpYWwgd2lkdGggcmVzdHJpY3Rpb24gZm9yIHR1bm5lbGVkIHNlc3Npb25zXG4gICAgICAgIHRoaXMuY29scyA9IE1hdGgubWluKGNhbGN1bGF0ZWRDb2xzLCB0aGlzLmluaXRpYWxDb2xzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIGNvbnN0cmFpbnRzIC0gdXNlIGZ1bGwgd2lkdGggKGZvciBmcm9udGVuZC1jcmVhdGVkIHNlc3Npb25zIG9yIHNlc3Npb25zIHdpdGhvdXQgaW5pdGlhbCBkaW1lbnNpb25zKVxuICAgICAgICB0aGlzLmNvbHMgPSBjYWxjdWxhdGVkQ29scztcbiAgICAgIH1cbiAgICAgIHRoaXMucm93cyA9IE1hdGgubWF4KDYsIE1hdGguZmxvb3IoY29udGFpbmVySGVpZ2h0IC8gbGluZUhlaWdodCkpO1xuICAgICAgdGhpcy5hY3R1YWxSb3dzID0gdGhpcy5yb3dzO1xuXG4gICAgICAvLyBSZXNpemUgdGhlIHRlcm1pbmFsIHRvIHRoZSBuZXcgZGltZW5zaW9uc1xuICAgICAgaWYgKHRoaXMudGVybWluYWwpIHtcbiAgICAgICAgLy8gRW5zdXJlIGNvbHMgYW5kIHJvd3MgYXJlIHZhbGlkIG51bWJlcnMgYmVmb3JlIHJlc2l6aW5nXG4gICAgICAgIGNvbnN0IHNhZmVDb2xzID0gTnVtYmVyLmlzRmluaXRlKHRoaXMuY29scykgPyBNYXRoLmZsb29yKHRoaXMuY29scykgOiA4MDtcbiAgICAgICAgY29uc3Qgc2FmZVJvd3MgPSBOdW1iZXIuaXNGaW5pdGUodGhpcy5yb3dzKSA/IE1hdGguZmxvb3IodGhpcy5yb3dzKSA6IDI0O1xuXG4gICAgICAgIC8vIFNhdmUgb2xkIGRpbWVuc2lvbnMgYmVmb3JlIHNob3VsZFJlc2l6ZSB1cGRhdGVzIHRoZW1cbiAgICAgICAgY29uc3Qgb2xkQ29scyA9IHRoaXMubGFzdENvbHM7XG4gICAgICAgIGNvbnN0IG9sZFJvd3MgPSB0aGlzLmxhc3RSb3dzO1xuXG4gICAgICAgIC8vIFVzZSByZXNpemUgY29vcmRpbmF0b3IgdG8gY2hlY2sgaWYgd2Ugc2hvdWxkIGFjdHVhbGx5IHJlc2l6ZVxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNpemUoc2FmZUNvbHMsIHNhZmVSb3dzKSkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVzaXppbmcgdGVybWluYWwgKCR7c291cmNlIHx8ICd1bmtub3duJ30pOiAke3NhZmVDb2xzfXgke3NhZmVSb3dzfWApO1xuICAgICAgICAgIHRoaXMudGVybWluYWwucmVzaXplKHNhZmVDb2xzLCBzYWZlUm93cyk7XG5cbiAgICAgICAgICAvLyBEaXNwYXRjaCByZXNpemUgZXZlbnQgZm9yIGJhY2tlbmQgc3luY2hyb25pemF0aW9uXG4gICAgICAgICAgLy8gSW5jbHVkZSBtb2JpbGUgZmxhZyBhbmQgd2hldGhlciB0aGlzIGlzIGhlaWdodC1vbmx5IGNoYW5nZVxuICAgICAgICAgIGNvbnN0IGlzV2lkdGhDaGFuZ2UgPSBzYWZlQ29scyAhPT0gb2xkQ29scztcbiAgICAgICAgICBjb25zdCBpc0hlaWdodE9ubHlDaGFuZ2UgPSAhaXNXaWR0aENoYW5nZSAmJiBzYWZlUm93cyAhPT0gb2xkUm93cztcblxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudCgndGVybWluYWwtcmVzaXplJywge1xuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBjb2xzOiBzYWZlQ29scyxcbiAgICAgICAgICAgICAgICByb3dzOiBzYWZlUm93cyxcbiAgICAgICAgICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSxcbiAgICAgICAgICAgICAgICBpc0hlaWdodE9ubHlDaGFuZ2UsXG4gICAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2UgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgU2tpcHBpbmcgcmVzaXplICgke3NvdXJjZSB8fCAndW5rbm93bid9KTogZGltZW5zaW9ucyB1bmNoYW5nZWRgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlY2FsY3VsYXRlIHZpZXdwb3J0WSBiYXNlZCBvbiBuZXcgbGluZUhlaWdodCBhbmQgYWN0dWFsUm93c1xuICAgIGlmICh0aGlzLnRlcm1pbmFsKSB7XG4gICAgICBjb25zdCBidWZmZXIgPSB0aGlzLnRlcm1pbmFsLmJ1ZmZlci5hY3RpdmU7XG4gICAgICBjb25zdCBuZXdMaW5lSGVpZ2h0ID0gdGhpcy5mb250U2l6ZSAqIDEuMjtcbiAgICAgIGNvbnN0IG1heFNjcm9sbFBpeGVscyA9IE1hdGgubWF4KDAsIChidWZmZXIubGVuZ3RoIC0gdGhpcy5hY3R1YWxSb3dzKSAqIG5ld0xpbmVIZWlnaHQpO1xuXG4gICAgICBpZiAod2FzQXRCb3R0b20pIHtcbiAgICAgICAgLy8gSWYgd2Ugd2VyZSBhdCBib3R0b20sIHN0YXkgYXQgYm90dG9tIHdpdGggbmV3IGNvbnN0cmFpbnRzXG4gICAgICAgIHRoaXMudmlld3BvcnRZID0gbWF4U2Nyb2xsUGl4ZWxzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29udmVydCB0aGUgc2Nyb2xsIHBvc2l0aW9uIGZyb20gb2xkIGxpbmVIZWlnaHQgdG8gbmV3IGxpbmVIZWlnaHRcbiAgICAgICAgY29uc3QgbmV3Vmlld3BvcnRZID0gY3VycmVudFNjcm9sbExpbmVzICogbmV3TGluZUhlaWdodDtcbiAgICAgICAgY29uc3QgY2xhbXBlZFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGxQaXhlbHMsIG5ld1ZpZXdwb3J0WSkpO1xuICAgICAgICB0aGlzLnZpZXdwb3J0WSA9IGNsYW1wZWRZO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsd2F5cyB0cmlnZ2VyIGEgcmVuZGVyIGFmdGVyIGZpdCBjaGFuZ2VzXG4gICAgdGhpcy5yZXF1ZXN0UmVuZGVyQnVmZmVyKCk7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwUmVzaXplKCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgIC8vIFNldCB0aGUgY2xhc3MgcHJvcGVydHkgdXNpbmcgd2luZG93IHdpZHRoIGZvciBjb25zaXN0ZW5jeSB3aXRoIGFwcC50c1xuICAgIGNvbnN0IE1PQklMRV9CUkVBS1BPSU5UID0gNzY4OyAvLyBTYW1lIGFzIEJSRUFLUE9JTlRTLk1PQklMRVxuICAgIHRoaXMuaXNNb2JpbGUgPSB3aW5kb3cuaW5uZXJXaWR0aCA8IE1PQklMRV9CUkVBS1BPSU5UO1xuICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgIGBbVGVybWluYWxdIFNldHRpbmcgdXAgcmVzaXplIC0gaXNNb2JpbGU6ICR7dGhpcy5pc01vYmlsZX0sIHdpZHRoOiAke3dpbmRvdy5pbm5lcldpZHRofSwgdXNlckFnZW50OiAke25hdmlnYXRvci51c2VyQWdlbnR9YFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5pc01vYmlsZSkge1xuICAgICAgLy8gT24gbW9iaWxlOiBEbyBpbml0aWFsIHJlc2l6ZSB0byBzZXQgd2lkdGgsIHRoZW4gYWxsb3cgSEVJR0hUIGNoYW5nZXMgb25seSAoZm9yIGtleWJvYXJkKVxuICAgICAgbG9nZ2VyLmRlYnVnKCdbVGVybWluYWxdIE1vYmlsZSBkZXRlY3RlZCAtIHNjaGVkdWxpbmcgaW5pdGlhbCByZXNpemUgaW4gMjAwbXMnKTtcbiAgICAgIHRoaXMubW9iaWxlSW5pdGlhbFJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdbVGVybWluYWxdIE1vYmlsZTogRXhlY3V0aW5nIGluaXRpYWwgcmVzaXplJyk7XG4gICAgICAgIHRoaXMuZml0VGVybWluYWwoJ2luaXRpYWwtbW9iaWxlLW9ubHknKTtcbiAgICAgICAgLy8gVGhhdCdzIGl0IC0gbm8gb2JzZXJ2ZXJzLCBubyBldmVudCBsaXN0ZW5lcnMsIG5vdGhpbmdcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICdbVGVybWluYWxdIE1vYmlsZTogSW5pdGlhbCB3aWR0aCBzZXQsIGZ1dHVyZSBXSURUSCByZXNpemVzIGJsb2NrZWQgKGhlaWdodCBhbGxvd2VkIGZvciBrZXlib2FyZCknXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubW9iaWxlSW5pdGlhbFJlc2l6ZVRpbWVvdXQgPSBudWxsOyAvLyBDbGVhciByZWZlcmVuY2UgYWZ0ZXIgZXhlY3V0aW9uXG4gICAgICB9LCAyMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZXNrdG9wOiBOb3JtYWwgcmVzaXplIGhhbmRsaW5nIHdpdGggb2JzZXJ2ZXJzXG4gICAgICBsb2dnZXIuZGVidWcoJ1tUZXJtaW5hbF0gRGVza3RvcCBkZXRlY3RlZCAtIHNldHRpbmcgdXAgcmVzaXplIG9ic2VydmVycycpO1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnW1Rlcm1pbmFsXSBSZXNpemVPYnNlcnZlciB0cmlnZ2VyZWQnKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCdSZXNpemVPYnNlcnZlcicpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIpO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1tUZXJtaW5hbF0gV2luZG93IHJlc2l6ZSBldmVudCB0cmlnZ2VyZWQnKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCd3aW5kb3ctcmVzaXplJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRGVza3RvcDogaW1tZWRpYXRlIGluaXRpYWwgcmVzaXplXG4gICAgICBsb2dnZXIuZGVidWcoJ1tUZXJtaW5hbF0gRGVza3RvcDogUmVxdWVzdGluZyBpbml0aWFsIHJlc2l6ZScpO1xuICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCdpbml0aWFsLWRlc2t0b3AnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwU2Nyb2xsaW5nKCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgIC8vIEhhbmRsZSB3aGVlbCBldmVudHMgd2l0aCBwaXhlbC1iYXNlZCBzY3JvbGxpbmcgKGJvdGggdmVydGljYWwgYW5kIGhvcml6b250YWwpXG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd3aGVlbCcsXG4gICAgICAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICAgIGxldCBkZWx0YVBpeGVsc1kgPSAwO1xuICAgICAgICBsZXQgZGVsdGFQaXhlbHNYID0gMDtcblxuICAgICAgICAvLyBDb252ZXJ0IHdoZWVsIGRlbHRhcyB0byBwaXhlbHMgYmFzZWQgb24gZGVsdGFNb2RlXG4gICAgICAgIHN3aXRjaCAoZS5kZWx0YU1vZGUpIHtcbiAgICAgICAgICBjYXNlIFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMOlxuICAgICAgICAgICAgLy8gQWxyZWFkeSBpbiBwaXhlbHNcbiAgICAgICAgICAgIGRlbHRhUGl4ZWxzWSA9IGUuZGVsdGFZO1xuICAgICAgICAgICAgZGVsdGFQaXhlbHNYID0gZS5kZWx0YVg7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkU6XG4gICAgICAgICAgICAvLyBDb252ZXJ0IGxpbmVzIHRvIHBpeGVsc1xuICAgICAgICAgICAgZGVsdGFQaXhlbHNZID0gZS5kZWx0YVkgKiBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgZGVsdGFQaXhlbHNYID0gZS5kZWx0YVggKiBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFOlxuICAgICAgICAgICAgLy8gQ29udmVydCBwYWdlcyB0byBwaXhlbHMgKGFzc3VtZSBwYWdlID0gdmlld3BvcnQgaGVpZ2h0KVxuICAgICAgICAgICAgZGVsdGFQaXhlbHNZID0gZS5kZWx0YVkgKiAodGhpcy5hY3R1YWxSb3dzICogbGluZUhlaWdodCk7XG4gICAgICAgICAgICBkZWx0YVBpeGVsc1ggPSBlLmRlbHRhWCAqICh0aGlzLmFjdHVhbFJvd3MgKiBsaW5lSGVpZ2h0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwbHkgc2NhbGluZyBmb3IgY29tZm9ydGFibGUgc2Nyb2xsaW5nIHNwZWVkXG4gICAgICAgIGNvbnN0IHNjcm9sbFNjYWxlID0gMC41O1xuICAgICAgICBkZWx0YVBpeGVsc1kgKj0gc2Nyb2xsU2NhbGU7XG4gICAgICAgIGRlbHRhUGl4ZWxzWCAqPSBzY3JvbGxTY2FsZTtcblxuICAgICAgICAvLyBBcHBseSB2ZXJ0aWNhbCBzY3JvbGxpbmcgKG91ciBjdXN0b20gcGl4ZWwtYmFzZWQpXG4gICAgICAgIGlmIChNYXRoLmFicyhkZWx0YVBpeGVsc1kpID4gMCkge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsVmlld3BvcnRQaXhlbHMoZGVsdGFQaXhlbHNZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IGhvcml6b250YWwgc2Nyb2xsaW5nIChuYXRpdmUgYnJvd3NlciBzY3JvbGxMZWZ0KSAtIG9ubHkgaWYgbm90IGluIGhvcml6b250YWwgZml0IG1vZGVcbiAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhUGl4ZWxzWCkgPiAwICYmICF0aGlzLmZpdEhvcml6b250YWxseSAmJiB0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnNjcm9sbExlZnQgKz0gZGVsdGFQaXhlbHNYO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBwYXNzaXZlOiBmYWxzZSB9XG4gICAgKTtcblxuICAgIC8vIFRvdWNoIHNjcm9sbGluZyB3aXRoIG1vbWVudHVtXG4gICAgbGV0IGlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgbGV0IGxhc3RZID0gMDtcbiAgICBsZXQgbGFzdFggPSAwO1xuICAgIGxldCB0b3VjaEhpc3Rvcnk6IEFycmF5PHsgeTogbnVtYmVyOyB4OiBudW1iZXI7IHRpbWU6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgY29uc3QgaGFuZGxlUG9pbnRlckRvd24gPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAvLyBPbmx5IGhhbmRsZSB0b3VjaCBwb2ludGVycywgbm90IG1vdXNlXG4gICAgICBpZiAoZS5wb2ludGVyVHlwZSAhPT0gJ3RvdWNoJyB8fCAhZS5pc1ByaW1hcnkpIHJldHVybjtcblxuICAgICAgLy8gU3RvcCBhbnkgZXhpc3RpbmcgbW9tZW50dW1cbiAgICAgIGlmICh0aGlzLm1vbWVudHVtQW5pbWF0aW9uKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubW9tZW50dW1BbmltYXRpb24pO1xuICAgICAgICB0aGlzLm1vbWVudHVtQW5pbWF0aW9uID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgIGxhc3RZID0gZS5jbGllbnRZO1xuICAgICAgbGFzdFggPSBlLmNsaWVudFg7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdG91Y2ggdHJhY2tpbmdcbiAgICAgIHRvdWNoSGlzdG9yeSA9IFt7IHk6IGUuY2xpZW50WSwgeDogZS5jbGllbnRYLCB0aW1lOiBwZXJmb3JtYW5jZS5ub3coKSB9XTtcblxuICAgICAgLy8gQ2FwdHVyZSB0aGUgcG9pbnRlciBzbyB3ZSBjb250aW51ZSB0byByZWNlaXZlIGV2ZW50cyBldmVuIGlmIERPTSByZWJ1aWxkc1xuICAgICAgdGhpcy5jb250YWluZXI/LnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUG9pbnRlck1vdmUgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAvLyBPbmx5IGhhbmRsZSB0b3VjaCBwb2ludGVycyB0aGF0IHdlIGhhdmUgY2FwdHVyZWRcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnIHx8ICF0aGlzLmNvbnRhaW5lcj8uaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRZID0gZS5jbGllbnRZO1xuICAgICAgY29uc3QgY3VycmVudFggPSBlLmNsaWVudFg7XG4gICAgICBjb25zdCBkZWx0YVkgPSBsYXN0WSAtIGN1cnJlbnRZOyAvLyBQb3NpdGl2ZSA9IHNjcm9sbCBkb3duLCBuZWdhdGl2ZSA9IHNjcm9sbCB1cFxuICAgICAgY29uc3QgZGVsdGFYID0gbGFzdFggLSBjdXJyZW50WDsgLy8gUG9zaXRpdmUgPSBzY3JvbGwgcmlnaHQsIG5lZ2F0aXZlID0gc2Nyb2xsIGxlZnRcblxuICAgICAgLy8gVHJhY2sgdG91Y2ggaGlzdG9yeSBmb3IgdmVsb2NpdHkgY2FsY3VsYXRpb24gKGtlZXAgbGFzdCA1IHBvaW50cylcbiAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgdG91Y2hIaXN0b3J5LnB1c2goeyB5OiBjdXJyZW50WSwgeDogY3VycmVudFgsIHRpbWU6IG5vdyB9KTtcbiAgICAgIGlmICh0b3VjaEhpc3RvcnkubGVuZ3RoID4gNSkge1xuICAgICAgICB0b3VjaEhpc3Rvcnkuc2hpZnQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhcnQgc2Nyb2xsaW5nIGlmIHdlJ3ZlIG1vdmVkIG1vcmUgdGhhbiBhIGZldyBwaXhlbHNcbiAgICAgIGlmICghaXNTY3JvbGxpbmcgJiYgKE1hdGguYWJzKGRlbHRhWSkgPiA1IHx8IE1hdGguYWJzKGRlbHRhWCkgPiA1KSkge1xuICAgICAgICBpc1Njcm9sbGluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNTY3JvbGxpbmcpIHJldHVybjtcblxuICAgICAgLy8gVmVydGljYWwgc2Nyb2xsaW5nIChvdXIgY3VzdG9tIHBpeGVsLWJhc2VkKVxuICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWSkgPiAwKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlld3BvcnRQaXhlbHMoZGVsdGFZKTtcbiAgICAgICAgbGFzdFkgPSBjdXJyZW50WTtcbiAgICAgIH1cblxuICAgICAgLy8gSG9yaXpvbnRhbCBzY3JvbGxpbmcgKG5hdGl2ZSBicm93c2VyIHNjcm9sbExlZnQpIC0gb25seSBpZiBub3QgaW4gaG9yaXpvbnRhbCBmaXQgbW9kZVxuICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiAwICYmICF0aGlzLmZpdEhvcml6b250YWxseSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zY3JvbGxMZWZ0ICs9IGRlbHRhWDtcbiAgICAgICAgbGFzdFggPSBjdXJyZW50WDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUG9pbnRlclVwID0gKGU6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgLy8gT25seSBoYW5kbGUgdG91Y2ggcG9pbnRlcnNcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnKSByZXR1cm47XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBtb21lbnR1bSBpZiB3ZSB3ZXJlIHNjcm9sbGluZ1xuICAgICAgaWYgKGlzU2Nyb2xsaW5nICYmIHRvdWNoSGlzdG9yeS5sZW5ndGggPj0gMikge1xuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgY29uc3QgcmVjZW50ID0gdG91Y2hIaXN0b3J5W3RvdWNoSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkZXIgPSB0b3VjaEhpc3RvcnlbdG91Y2hIaXN0b3J5Lmxlbmd0aCAtIDJdO1xuXG4gICAgICAgIGNvbnN0IHRpbWVEaWZmID0gbm93IC0gb2xkZXIudGltZTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VZID0gcmVjZW50LnkgLSBvbGRlci55O1xuICAgICAgICBjb25zdCBkaXN0YW5jZVggPSByZWNlbnQueCAtIG9sZGVyLng7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHZlbG9jaXR5IGluIHBpeGVscyBwZXIgbWlsbGlzZWNvbmRcbiAgICAgICAgY29uc3QgdmVsb2NpdHlZID0gdGltZURpZmYgPiAwID8gLWRpc3RhbmNlWSAvIHRpbWVEaWZmIDogMDsgLy8gTmVnYXRpdmUgZm9yIHNjcm9sbCBkaXJlY3Rpb25cbiAgICAgICAgY29uc3QgdmVsb2NpdHlYID0gdGltZURpZmYgPiAwID8gLWRpc3RhbmNlWCAvIHRpbWVEaWZmIDogMDtcblxuICAgICAgICAvLyBTdGFydCBtb21lbnR1bSBpZiB2ZWxvY2l0eSBpcyBhYm92ZSB0aHJlc2hvbGRcbiAgICAgICAgY29uc3QgbWluVmVsb2NpdHkgPSAwLjM7IC8vIHBpeGVscyBwZXIgbXNcbiAgICAgICAgaWYgKE1hdGguYWJzKHZlbG9jaXR5WSkgPiBtaW5WZWxvY2l0eSB8fCBNYXRoLmFicyh2ZWxvY2l0eVgpID4gbWluVmVsb2NpdHkpIHtcbiAgICAgICAgICB0aGlzLnN0YXJ0TW9tZW50dW0odmVsb2NpdHlZLCB2ZWxvY2l0eVgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbGVhc2UgcG9pbnRlciBjYXB0dXJlXG4gICAgICB0aGlzLmNvbnRhaW5lcj8ucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUG9pbnRlckNhbmNlbCA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgIC8vIE9ubHkgaGFuZGxlIHRvdWNoIHBvaW50ZXJzXG4gICAgICBpZiAoZS5wb2ludGVyVHlwZSAhPT0gJ3RvdWNoJykgcmV0dXJuO1xuXG4gICAgICAvLyBSZWxlYXNlIHBvaW50ZXIgY2FwdHVyZVxuICAgICAgdGhpcy5jb250YWluZXI/LnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgfTtcblxuICAgIC8vIEF0dGFjaCBwb2ludGVyIGV2ZW50cyB0byB0aGUgY29udGFpbmVyICh0b3VjaCBvbmx5KVxuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgaGFuZGxlUG9pbnRlckRvd24pO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgaGFuZGxlUG9pbnRlck1vdmUpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZVBvaW50ZXJVcCk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIGhhbmRsZVBvaW50ZXJDYW5jZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY3JvbGxWaWV3cG9ydFBpeGVscyhkZWx0YVBpeGVsczogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLnRlcm1pbmFsKSByZXR1cm47XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLnRlcm1pbmFsLmJ1ZmZlci5hY3RpdmU7XG4gICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgY29uc3QgbWF4U2Nyb2xsUGl4ZWxzID0gTWF0aC5tYXgoMCwgKGJ1ZmZlci5sZW5ndGggLSB0aGlzLmFjdHVhbFJvd3MpICogbGluZUhlaWdodCk7XG5cbiAgICBjb25zdCBuZXdWaWV3cG9ydFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGxQaXhlbHMsIHRoaXMudmlld3BvcnRZICsgZGVsdGFQaXhlbHMpKTtcblxuICAgIC8vIE9ubHkgcmVuZGVyIGlmIHdlIGFjdHVhbGx5IG1vdmVkXG4gICAgaWYgKG5ld1ZpZXdwb3J0WSAhPT0gdGhpcy52aWV3cG9ydFkpIHtcbiAgICAgIHRoaXMudmlld3BvcnRZID0gbmV3Vmlld3BvcnRZO1xuXG4gICAgICAvLyBVcGRhdGUgZm9sbG93IGN1cnNvciBzdGF0ZSBiYXNlZCBvbiBzY3JvbGwgcG9zaXRpb25cbiAgICAgIHRoaXMudXBkYXRlRm9sbG93Q3Vyc29yU3RhdGUoKTtcbiAgICAgIHRoaXMucmVxdWVzdFJlbmRlckJ1ZmZlcigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRNb21lbnR1bSh2ZWxvY2l0eVk6IG51bWJlciwgdmVsb2NpdHlYOiBudW1iZXIpIHtcbiAgICAvLyBTdG9yZSBtb21lbnR1bSB2ZWxvY2l0aWVzXG4gICAgdGhpcy5tb21lbnR1bVZlbG9jaXR5WSA9IHZlbG9jaXR5WSAqIDE2OyAvLyBDb252ZXJ0IGZyb20gcGl4ZWxzL21zIHRvIHBpeGVscy9mcmFtZSAoYXNzdW1pbmcgNjBmcHMpXG4gICAgdGhpcy5tb21lbnR1bVZlbG9jaXR5WCA9IHZlbG9jaXR5WCAqIDE2O1xuXG4gICAgLy8gQ2FuY2VsIGFueSBleGlzdGluZyBtb21lbnR1bVxuICAgIGlmICh0aGlzLm1vbWVudHVtQW5pbWF0aW9uKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm1vbWVudHVtQW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydCBtb21lbnR1bSBhbmltYXRpb25cbiAgICB0aGlzLmFuaW1hdGVNb21lbnR1bSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhbmltYXRlTW9tZW50dW0oKSB7XG4gICAgY29uc3QgbWluVmVsb2NpdHkgPSAwLjE7IC8vIFN0b3Agd2hlbiB2ZWxvY2l0eSBnZXRzIHZlcnkgc21hbGxcbiAgICBjb25zdCBkZWNheUZhY3RvciA9IDAuOTI7IC8vIEV4cG9uZW50aWFsIGRlY2F5IHBlciBmcmFtZVxuXG4gICAgLy8gQXBwbHkgY3VycmVudCB2ZWxvY2l0eSB0byBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBkZWx0YVkgPSB0aGlzLm1vbWVudHVtVmVsb2NpdHlZO1xuICAgIGNvbnN0IGRlbHRhWCA9IHRoaXMubW9tZW50dW1WZWxvY2l0eVg7XG5cbiAgICBsZXQgc2Nyb2xsZWQgPSBmYWxzZTtcblxuICAgIC8vIEFwcGx5IHZlcnRpY2FsIG1vbWVudHVtXG4gICAgaWYgKE1hdGguYWJzKGRlbHRhWSkgPiBtaW5WZWxvY2l0eSkge1xuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy50ZXJtaW5hbD8uYnVmZmVyLmFjdGl2ZTtcbiAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICAgIGNvbnN0IG1heFNjcm9sbFBpeGVscyA9IE1hdGgubWF4KDAsIChidWZmZXIubGVuZ3RoIC0gdGhpcy5hY3R1YWxSb3dzKSAqIGxpbmVIZWlnaHQpO1xuICAgICAgICBjb25zdCBuZXdWaWV3cG9ydFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGxQaXhlbHMsIHRoaXMudmlld3BvcnRZICsgZGVsdGFZKSk7XG5cbiAgICAgICAgaWYgKG5ld1ZpZXdwb3J0WSAhPT0gdGhpcy52aWV3cG9ydFkpIHtcbiAgICAgICAgICB0aGlzLnZpZXdwb3J0WSA9IG5ld1ZpZXdwb3J0WTtcbiAgICAgICAgICBzY3JvbGxlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgZm9sbG93IGN1cnNvciBzdGF0ZSBmb3IgbW9tZW50dW0gc2Nyb2xsaW5nIHRvb1xuICAgICAgICAgIHRoaXMudXBkYXRlRm9sbG93Q3Vyc29yU3RhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBIaXQgYm91bmRhcnksIHN0b3AgdmVydGljYWwgbW9tZW50dW1cbiAgICAgICAgICB0aGlzLm1vbWVudHVtVmVsb2NpdHlZID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGhvcml6b250YWwgbW9tZW50dW0gKG9ubHkgaWYgbm90IGluIGhvcml6b250YWwgZml0IG1vZGUpXG4gICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiBtaW5WZWxvY2l0eSAmJiAhdGhpcy5maXRIb3Jpem9udGFsbHkgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGNvbnN0IG5ld1Njcm9sbExlZnQgPSB0aGlzLmNvbnRhaW5lci5zY3JvbGxMZWZ0ICsgZGVsdGFYO1xuICAgICAgdGhpcy5jb250YWluZXIuc2Nyb2xsTGVmdCA9IG5ld1Njcm9sbExlZnQ7XG4gICAgICBzY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gRGVjYXkgdmVsb2NpdGllc1xuICAgIHRoaXMubW9tZW50dW1WZWxvY2l0eVkgKj0gZGVjYXlGYWN0b3I7XG4gICAgdGhpcy5tb21lbnR1bVZlbG9jaXR5WCAqPSBkZWNheUZhY3RvcjtcblxuICAgIC8vIENvbnRpbnVlIGFuaW1hdGlvbiBpZiB2ZWxvY2l0aWVzIGFyZSBzdGlsbCBzaWduaWZpY2FudFxuICAgIGlmIChcbiAgICAgIE1hdGguYWJzKHRoaXMubW9tZW50dW1WZWxvY2l0eVkpID4gbWluVmVsb2NpdHkgfHxcbiAgICAgIE1hdGguYWJzKHRoaXMubW9tZW50dW1WZWxvY2l0eVgpID4gbWluVmVsb2NpdHlcbiAgICApIHtcbiAgICAgIHRoaXMubW9tZW50dW1BbmltYXRpb24gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFuaW1hdGVNb21lbnR1bSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlbmRlciBpZiB3ZSBzY3JvbGxlZCAtIHVzZSBkaXJlY3QgY2FsbCBkdXJpbmcgbW9tZW50dW0gdG8gYXZvaWQgUkFGIGNvbmZsaWN0c1xuICAgICAgaWYgKHNjcm9sbGVkKSB7XG4gICAgICAgIHRoaXMucmVuZGVyQnVmZmVyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1vbWVudHVtIGZpbmlzaGVkXG4gICAgICB0aGlzLm1vbWVudHVtQW5pbWF0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMubW9tZW50dW1WZWxvY2l0eVkgPSAwO1xuICAgICAgdGhpcy5tb21lbnR1bVZlbG9jaXR5WCA9IDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJCdWZmZXIoKSB7XG4gICAgaWYgKCF0aGlzLnRlcm1pbmFsIHx8ICF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ3JlbmRlckJ1ZmZlciBjYWxsZWQgYnV0IG1pc3NpbmcgdGVybWluYWwgb3IgY29udGFpbmVyJywge1xuICAgICAgICBoYXNUZXJtaW5hbDogISF0aGlzLnRlcm1pbmFsLFxuICAgICAgICBoYXNDb250YWluZXI6ICEhdGhpcy5jb250YWluZXIsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsb2dnZXIuZGVidWcoJ3JlbmRlckJ1ZmZlciBleGVjdXRpbmcnKTtcblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHRoaXMuZGVidWdNb2RlID8gcGVyZm9ybWFuY2Uubm93KCkgOiAwO1xuXG4gICAgLy8gSW5jcmVtZW50IHJlbmRlciBjb3VudCBpbW1lZGlhdGVseVxuICAgIGlmICh0aGlzLmRlYnVnTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJDb3VudCsrO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZTtcbiAgICBjb25zdCBidWZmZXJMZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuICAgIGNvbnN0IGxpbmVIZWlnaHQgPSB0aGlzLmZvbnRTaXplICogMS4yO1xuXG4gICAgLy8gQ29udmVydCBwaXhlbCBzY3JvbGwgcG9zaXRpb24gdG8gZnJhY3Rpb25hbCBsaW5lIHBvc2l0aW9uXG4gICAgY29uc3Qgc3RhcnRSb3dGbG9hdCA9IHRoaXMudmlld3BvcnRZIC8gbGluZUhlaWdodDtcbiAgICBjb25zdCBzdGFydFJvdyA9IE1hdGguZmxvb3Ioc3RhcnRSb3dGbG9hdCk7XG4gICAgY29uc3QgcGl4ZWxPZmZzZXQgPSAoc3RhcnRSb3dGbG9hdCAtIHN0YXJ0Um93KSAqIGxpbmVIZWlnaHQ7XG5cbiAgICAvLyBCdWlsZCBjb21wbGV0ZSBpbm5lckhUTUwgc3RyaW5nXG4gICAgbGV0IGh0bWwgPSAnJztcbiAgICBjb25zdCBjZWxsID0gYnVmZmVyLmdldE51bGxDZWxsKCk7XG5cbiAgICAvLyBHZXQgY3Vyc29yIHBvc2l0aW9uXG4gICAgY29uc3QgY3Vyc29yWCA9IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZS5jdXJzb3JYO1xuICAgIGNvbnN0IGN1cnNvclkgPSB0aGlzLnRlcm1pbmFsLmJ1ZmZlci5hY3RpdmUuY3Vyc29yWSArIHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZS52aWV3cG9ydFk7XG5cbiAgICAvLyBSZW5kZXIgZXhhY3RseSBhY3R1YWxSb3dzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFjdHVhbFJvd3M7IGkrKykge1xuICAgICAgY29uc3Qgcm93ID0gc3RhcnRSb3cgKyBpO1xuXG4gICAgICAvLyBBcHBseSBwaXhlbCBvZmZzZXQgdG8gQUxMIGxpbmVzIGZvciBzbW9vdGggc2Nyb2xsaW5nXG4gICAgICBjb25zdCBzdHlsZSA9IHBpeGVsT2Zmc2V0ID4gMCA/IGAgc3R5bGU9XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLSR7cGl4ZWxPZmZzZXR9cHgpO1wiYCA6ICcnO1xuXG4gICAgICBpZiAocm93ID49IGJ1ZmZlckxlbmd0aCkge1xuICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwidGVybWluYWwtbGluZVwiJHtzdHlsZX0+PC9kaXY+YDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIuZ2V0TGluZShyb3cpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0ZXJtaW5hbC1saW5lXCIke3N0eWxlfT48L2Rpdj5gO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgY3Vyc29yIGlzIG9uIHRoaXMgbGluZSAocmVsYXRpdmUgdG8gdmlld3BvcnQpXG4gICAgICBjb25zdCBpc0N1cnNvckxpbmUgPSByb3cgPT09IGN1cnNvclk7XG4gICAgICBjb25zdCBsaW5lQ29udGVudCA9IHRoaXMucmVuZGVyTGluZShcbiAgICAgICAgbGluZSxcbiAgICAgICAgY2VsbCxcbiAgICAgICAgaXNDdXJzb3JMaW5lICYmIHRoaXMuY3Vyc29yVmlzaWJsZSA/IGN1cnNvclggOiAtMVxuICAgICAgKTtcblxuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInRlcm1pbmFsLWxpbmVcIiR7c3R5bGV9PiR7bGluZUNvbnRlbnQgfHwgJyd9PC9kaXY+YDtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGNvbXBsZXRlIGlubmVySFRNTCBhdCBvbmNlXG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgIC8vIFByb2Nlc3MgbGlua3MgYWZ0ZXIgcmVuZGVyaW5nXG4gICAgVXJsSGlnaGxpZ2h0ZXIucHJvY2Vzc0xpbmtzKHRoaXMuY29udGFpbmVyKTtcblxuICAgIC8vIFByb2Nlc3Mga2V5Ym9hcmQgc2hvcnRjdXRzIGFmdGVyIHJlbmRlcmluZ1xuICAgIHByb2Nlc3NLZXlib2FyZFNob3J0Y3V0cyh0aGlzLmNvbnRhaW5lciwgdGhpcy5oYW5kbGVTaG9ydGN1dENsaWNrKTtcblxuICAgIC8vIFRyYWNrIHJlbmRlciBwZXJmb3JtYW5jZSBpbiBkZWJ1ZyBtb2RlXG4gICAgaWYgKHRoaXMuZGVidWdNb2RlKSB7XG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIHRoaXMudG90YWxSZW5kZXJUaW1lICs9IHRoaXMubGFzdFJlbmRlclRpbWU7XG5cbiAgICAgIC8vIEZvcmNlIGNvbXBvbmVudCByZS1yZW5kZXIgdG8gdXBkYXRlIGRlYnVnIG92ZXJsYXlcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTGluZShsaW5lOiBJQnVmZmVyTGluZSwgY2VsbDogSUJ1ZmZlckNlbGwsIGN1cnNvckNvbDogbnVtYmVyID0gLTEpOiBzdHJpbmcge1xuICAgIGxldCBodG1sID0gJyc7XG4gICAgbGV0IGN1cnJlbnRDaGFycyA9ICcnO1xuICAgIGxldCBjdXJyZW50Q2xhc3NlcyA9ICcnO1xuICAgIGxldCBjdXJyZW50U3R5bGUgPSAnJztcblxuICAgIGNvbnN0IGVzY2FwZUh0bWwgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxuICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgICAgIC5yZXBsYWNlKC8nL2csICcmIzM5OycpO1xuICAgIH07XG5cbiAgICBjb25zdCBmbHVzaEdyb3VwID0gKCkgPT4ge1xuICAgICAgaWYgKGN1cnJlbnRDaGFycykge1xuICAgICAgICBjb25zdCBlc2NhcGVkQ2hhcnMgPSBlc2NhcGVIdG1sKGN1cnJlbnRDaGFycyk7XG4gICAgICAgIGh0bWwgKz0gYDxzcGFuIGNsYXNzPVwiJHtjdXJyZW50Q2xhc3Nlc31cIiR7Y3VycmVudFN0eWxlID8gYCBzdHlsZT1cIiR7Y3VycmVudFN0eWxlfVwiYCA6ICcnfT4ke2VzY2FwZWRDaGFyc308L3NwYW4+YDtcbiAgICAgICAgY3VycmVudENoYXJzID0gJyc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFByb2Nlc3MgZWFjaCBjZWxsIGluIHRoZSBsaW5lXG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgbGluZS5sZW5ndGg7IGNvbCsrKSB7XG4gICAgICBsaW5lLmdldENlbGwoY29sLCBjZWxsKTtcbiAgICAgIGlmICghY2VsbCkgY29udGludWU7XG5cbiAgICAgIC8vIFhUZXJtLmpzIGNlbGwgQVBJIC0gdXNlIHx8ICcgJyB0byBlbnN1cmUgd2UgZ2V0IGEgc3BhY2UgZm9yIGVtcHR5IGNlbGxzXG4gICAgICBjb25zdCBjaGFyID0gY2VsbC5nZXRDaGFycygpIHx8ICcgJztcbiAgICAgIGNvbnN0IHdpZHRoID0gY2VsbC5nZXRXaWR0aCgpO1xuXG4gICAgICAvLyBTa2lwIHplcm8td2lkdGggY2VsbHMgKHBhcnQgb2Ygd2lkZSBjaGFyYWN0ZXJzKVxuICAgICAgaWYgKHdpZHRoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgLy8gR2V0IHN0eWxpbmcgYXR0cmlidXRlc1xuICAgICAgbGV0IGNsYXNzZXMgPSAndGVybWluYWwtY2hhcic7XG4gICAgICBsZXQgc3R5bGUgPSAnJztcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gICAgICBjb25zdCBpc0N1cnNvciA9IGNvbCA9PT0gY3Vyc29yQ29sO1xuICAgICAgaWYgKGlzQ3Vyc29yKSB7XG4gICAgICAgIGNsYXNzZXMgKz0gJyBjdXJzb3InO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgZm9yZWdyb3VuZCBjb2xvclxuICAgICAgY29uc3QgZmcgPSBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICAgIGlmIChmZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmcgPT09ICdudW1iZXInICYmIGZnID49IDAgJiYgZmcgPD0gMjU1KSB7XG4gICAgICAgICAgLy8gU3RhbmRhcmQgcGFsZXR0ZSBjb2xvciAoMC0yNTUpXG4gICAgICAgICAgc3R5bGUgKz0gYGNvbG9yOiB2YXIoLS10ZXJtaW5hbC1jb2xvci0ke2ZnfSk7YDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmcgPT09ICdudW1iZXInICYmIGZnID4gMjU1KSB7XG4gICAgICAgICAgLy8gMjQtYml0IFJHQiBjb2xvciAtIGNvbnZlcnQgdG8gQ1NTIGhleFxuICAgICAgICAgIGNvbnN0IHIgPSAoZmcgPj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBjb25zdCBnID0gKGZnID4+IDgpICYgMHhmZjtcbiAgICAgICAgICBjb25zdCBiID0gZmcgJiAweGZmO1xuICAgICAgICAgIHN0eWxlICs9IGBjb2xvcjogcmdiKCR7cn0sICR7Z30sICR7Yn0pO2A7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGJhY2tncm91bmQgY29sb3JcbiAgICAgIGNvbnN0IGJnID0gY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICBpZiAoYmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIGJnID09PSAnbnVtYmVyJyAmJiBiZyA+PSAwICYmIGJnIDw9IDI1NSkge1xuICAgICAgICAgIC8vIFN0YW5kYXJkIHBhbGV0dGUgY29sb3IgKDAtMjU1KVxuICAgICAgICAgIHN0eWxlICs9IGBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10ZXJtaW5hbC1jb2xvci0ke2JnfSk7YDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYmcgPT09ICdudW1iZXInICYmIGJnID4gMjU1KSB7XG4gICAgICAgICAgLy8gMjQtYml0IFJHQiBjb2xvciAtIGNvbnZlcnQgdG8gQ1NTIGhleFxuICAgICAgICAgIGNvbnN0IHIgPSAoYmcgPj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBjb25zdCBnID0gKGJnID4+IDgpICYgMHhmZjtcbiAgICAgICAgICBjb25zdCBiID0gYmcgJiAweGZmO1xuICAgICAgICAgIHN0eWxlICs9IGBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoJHtyfSwgJHtnfSwgJHtifSk7YDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGV4dCBhdHRyaWJ1dGVzL2ZsYWdzXG4gICAgICBjb25zdCBpc0JvbGQgPSBjZWxsLmlzQm9sZCgpO1xuICAgICAgY29uc3QgaXNJdGFsaWMgPSBjZWxsLmlzSXRhbGljKCk7XG4gICAgICBjb25zdCBpc1VuZGVybGluZSA9IGNlbGwuaXNVbmRlcmxpbmUoKTtcbiAgICAgIGNvbnN0IGlzRGltID0gY2VsbC5pc0RpbSgpO1xuICAgICAgY29uc3QgaXNJbnZlcnNlID0gY2VsbC5pc0ludmVyc2UoKTtcbiAgICAgIGNvbnN0IGlzSW52aXNpYmxlID0gY2VsbC5pc0ludmlzaWJsZSgpO1xuICAgICAgY29uc3QgaXNTdHJpa2V0aHJvdWdoID0gY2VsbC5pc1N0cmlrZXRocm91Z2goKTtcbiAgICAgIGNvbnN0IGlzT3ZlcmxpbmUgPSBjZWxsLmlzT3ZlcmxpbmUoKTtcblxuICAgICAgaWYgKGlzQm9sZCkgY2xhc3NlcyArPSAnIGJvbGQnO1xuICAgICAgaWYgKGlzSXRhbGljKSBjbGFzc2VzICs9ICcgaXRhbGljJztcbiAgICAgIGlmIChpc1VuZGVybGluZSkgY2xhc3NlcyArPSAnIHVuZGVybGluZSc7XG4gICAgICBpZiAoaXNEaW0pIGNsYXNzZXMgKz0gJyBkaW0nO1xuICAgICAgaWYgKGlzU3RyaWtldGhyb3VnaCkgY2xhc3NlcyArPSAnIHN0cmlrZXRocm91Z2gnO1xuICAgICAgaWYgKGlzT3ZlcmxpbmUpIGNsYXNzZXMgKz0gJyBvdmVybGluZSc7XG5cbiAgICAgIC8vIEhhbmRsZSBpbnZlcnNlIGNvbG9yc1xuICAgICAgaWYgKGlzSW52ZXJzZSkge1xuICAgICAgICAvLyBTd2FwIGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3JzXG4gICAgICAgIGNvbnN0IHRlbXBGZyA9IHN0eWxlLm1hdGNoKC9jb2xvcjogKFteO10rKTsvKT8uWzFdO1xuICAgICAgICBjb25zdCB0ZW1wQmcgPSBzdHlsZS5tYXRjaCgvYmFja2dyb3VuZC1jb2xvcjogKFteO10rKTsvKT8uWzFdO1xuXG4gICAgICAgIC8vIFVzZSB0aGVtZSBjb2xvcnMgYXMgZGVmYXVsdHNcbiAgICAgICAgY29uc3QgZGVmYXVsdEZnID0gJ3ZhcigtLXRlcm1pbmFsLWZvcmVncm91bmQsICNlNGU0ZTQpJztcbiAgICAgICAgY29uc3QgZGVmYXVsdEJnID0gJ3ZhcigtLXRlcm1pbmFsLWJhY2tncm91bmQsICMwYTBhMGEpJztcblxuICAgICAgICAvLyBEZXRlcm1pbmUgYWN0dWFsIGZvcmVncm91bmQgYW5kIGJhY2tncm91bmRcbiAgICAgICAgY29uc3QgYWN0dWFsRmcgPSB0ZW1wRmcgfHwgZGVmYXVsdEZnO1xuICAgICAgICBjb25zdCBhY3R1YWxCZyA9IHRlbXBCZyB8fCBkZWZhdWx0Qmc7XG5cbiAgICAgICAgLy8gQ2xlYXIgZXhpc3Rpbmcgc3R5bGUgYW5kIHJlYnVpbGQgd2l0aCBzd2FwcGVkIGNvbG9yc1xuICAgICAgICBzdHlsZSA9ICcnO1xuXG4gICAgICAgIC8vIFNldCBzd2FwcGVkIGNvbG9yc1xuICAgICAgICBzdHlsZSArPSBgY29sb3I6ICR7YWN0dWFsQmd9O2A7XG4gICAgICAgIHN0eWxlICs9IGBiYWNrZ3JvdW5kLWNvbG9yOiAke2FjdHVhbEZnfTtgO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBjdXJzb3Igc3R5bGluZyBhZnRlciBpbnZlcnNlIHRvIGVuc3VyZSBpdCB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICBpZiAoaXNDdXJzb3IpIHtcbiAgICAgICAgc3R5bGUgKz0gYGJhY2tncm91bmQtY29sb3I6IHJnYih2YXIoLS1jb2xvci1wcmltYXJ5KSk7YDtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGludmlzaWJsZSB0ZXh0XG4gICAgICBpZiAoaXNJbnZpc2libGUpIHtcbiAgICAgICAgc3R5bGUgKz0gJ29wYWNpdHk6IDA7JztcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgc3R5bGluZyBjaGFuZ2VkIC0gaWYgc28sIGZsdXNoIGN1cnJlbnQgZ3JvdXBcbiAgICAgIGlmIChjbGFzc2VzICE9PSBjdXJyZW50Q2xhc3NlcyB8fCBzdHlsZSAhPT0gY3VycmVudFN0eWxlKSB7XG4gICAgICAgIGZsdXNoR3JvdXAoKTtcbiAgICAgICAgY3VycmVudENsYXNzZXMgPSBjbGFzc2VzO1xuICAgICAgICBjdXJyZW50U3R5bGUgPSBzdHlsZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNoYXJhY3RlciB0byBjdXJyZW50IGdyb3VwXG4gICAgICBjdXJyZW50Q2hhcnMgKz0gY2hhcjtcbiAgICB9XG5cbiAgICAvLyBGbHVzaCBmaW5hbCBncm91cFxuICAgIGZsdXNoR3JvdXAoKTtcblxuICAgIHJldHVybiBodG1sO1xuICB9XG5cbiAgLyoqXG4gICAqIERPTSBUZXJtaW5hbCBQdWJsaWMgQVBJXG4gICAqXG4gICAqIFRoaXMgY29tcG9uZW50IHByb3ZpZGVzIGEgRE9NLWJhc2VkIHRlcm1pbmFsIHJlbmRlcmVyIHdpdGggWFRlcm0uanMgYmFja2VuZC5cbiAgICogQWxsIGJ1ZmZlci1tb2RpZnlpbmcgb3BlcmF0aW9ucyBhcmUgcXVldWVkIGFuZCBleGVjdXRlZCBpbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICogdG8gZW5zdXJlIG9wdGltYWwgYmF0Y2hpbmcgYW5kIHJlbmRlcmluZyBwZXJmb3JtYW5jZS5cbiAgICovXG5cbiAgLy8gPT09IEJVRkZFUiBNT0RJRklDQVRJT04gTUVUSE9EUyAoUXVldWVkKSA9PT1cblxuICAvKipcbiAgICogV3JpdGUgZGF0YSB0byB0aGUgdGVybWluYWwgYnVmZmVyLlxuICAgKiBAcGFyYW0gZGF0YSAtIFN0cmluZyBkYXRhIHRvIHdyaXRlIChzdXBwb3J0cyBBTlNJIGVzY2FwZSBzZXF1ZW5jZXMpXG4gICAqIEBwYXJhbSBmb2xsb3dDdXJzb3IgLSBJZiB0cnVlLCBhdXRvbWF0aWNhbGx5IHNjcm9sbCB0byBrZWVwIGN1cnNvciB2aXNpYmxlIChkZWZhdWx0OiB0cnVlKVxuICAgKi9cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZywgZm9sbG93Q3Vyc29yOiBib29sZWFuID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy50ZXJtaW5hbCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ1Rlcm1pbmFsLndyaXRlIGNhbGxlZCBidXQgbm8gdGVybWluYWwgaW5zdGFuY2UgZXhpc3RzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gT25seSBsb2cgc2lnbmlmaWNhbnQgd3JpdGVzIG9uIG1vYmlsZVxuICAgIGlmICh0aGlzLmlzTW9iaWxlICYmIGRhdGEubGVuZ3RoID4gMTAwKSB7XG4gICAgICBsb2dnZXIuZGVidWcoYFtUZXJtaW5hbF0gXHVEODNEXHVEQ0YxIExhcmdlIHdyaXRlIHRvIHRlcm1pbmFsYCwge1xuICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICBkYXRhTGVuZ3RoOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgZm9sbG93Q3Vyc29yLFxuICAgICAgICBidWZmZXJMZW5ndGg6IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZS5sZW5ndGgsXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uOiB0aGlzLl92aWV3cG9ydFksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgY3Vyc29yIHZpc2liaWxpdHkgc2VxdWVuY2VzXG4gICAgaWYgKGRhdGEuaW5jbHVkZXMoJ1xceDFiWz8yNWwnKSkge1xuICAgICAgdGhpcy5jdXJzb3JWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkYXRhLmluY2x1ZGVzKCdcXHgxYls/MjVoJykpIHtcbiAgICAgIHRoaXMuY3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5xdWV1ZVJlbmRlck9wZXJhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybjtcblxuICAgICAgLy8gWFRlcm0ud3JpdGUoKSBpcyBhc3luYywgd2FpdCBmb3IgaXQgdG8gY29tcGxldGVcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnRlcm1pbmFsKSB7XG4gICAgICAgICAgdGhpcy50ZXJtaW5hbC53cml0ZShkYXRhLCByZXNvbHZlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBGb2xsb3cgY3Vyc29yIGlmIHJlcXVlc3RlZFxuICAgICAgaWYgKGZvbGxvd0N1cnNvciAmJiB0aGlzLmZvbGxvd0N1cnNvckVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5mb2xsb3dDdXJzb3IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgdGVybWluYWwgYnVmZmVyIGFuZCByZXNldCBzY3JvbGwgcG9zaXRpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKSB7XG4gICAgaWYgKCF0aGlzLnRlcm1pbmFsKSByZXR1cm47XG5cbiAgICB0aGlzLnF1ZXVlUmVuZGVyT3BlcmF0aW9uKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy50ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLnRlcm1pbmFsLmNsZWFyKCk7XG4gICAgICB0aGlzLnZpZXdwb3J0WSA9IDA7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplIHRoZSB0ZXJtaW5hbCB0byBzcGVjaWZpZWQgZGltZW5zaW9ucy5cbiAgICogQHBhcmFtIGNvbHMgLSBOdW1iZXIgb2YgY29sdW1uc1xuICAgKiBAcGFyYW0gcm93cyAtIE51bWJlciBvZiByb3dzXG4gICAqL1xuICBwdWJsaWMgc2V0VGVybWluYWxTaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKSB7XG4gICAgdGhpcy5jb2xzID0gY29scztcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xuXG4gICAgaWYgKCF0aGlzLnRlcm1pbmFsKSB7XG4gICAgICAvLyBEb24ndCBzZXQgZXhwbGljaXRTaXplU2V0IGlmIHRlcm1pbmFsIGlzbid0IHJlYWR5XG4gICAgICAvLyBUaGlzIGFsbG93cyByZWluaXRpYWxpemVUZXJtaW5hbCB0byBydW4gbGF0ZXIgd2hlbiB0ZXJtaW5hbCBpcyBhdmFpbGFibGVcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXQgZmxhZyB0byBwcmV2ZW50IGF1dG8tcmVzaXplIGluIHVwZGF0ZWQoKSBsaWZlY3ljbGVcbiAgICAvLyBPbmx5IHNldCB0aGlzIEFGVEVSIGNvbmZpcm1pbmcgdGVybWluYWwgZXhpc3RzXG4gICAgdGhpcy5leHBsaWNpdFNpemVTZXQgPSB0cnVlO1xuXG4gICAgdGhpcy5xdWV1ZVJlbmRlck9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybjtcblxuICAgICAgdGhpcy50ZXJtaW5hbC5yZXNpemUoY29scywgcm93cyk7XG4gICAgICAvLyBEb24ndCBjYWxsIGZpdFRlcm1pbmFsIGhlcmUgLSB3aGVuIGV4cGxpY2l0bHkgc2V0dGluZyBzaXplLFxuICAgICAgLy8gd2Ugc2hvdWxkbid0IHJlY2FsY3VsYXRlIGJhc2VkIG9uIGNvbnRhaW5lciBkaW1lbnNpb25zXG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PSBTQ1JPTEwgQ09OVFJPTCBNRVRIT0RTIChRdWV1ZWQpID09PVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIGlmICghdGhpcy50ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgdGhpcy5xdWV1ZVJlbmRlck9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybjtcblxuICAgICAgdGhpcy5yZXF1ZXN0UmVzaXplKCdwcm9wZXJ0eS1jaGFuZ2UnKTtcblxuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy50ZXJtaW5hbC5idWZmZXIuYWN0aXZlO1xuICAgICAgY29uc3QgbGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICAvLyBVc2UgdGhlIHNhbWUgbWF4U2Nyb2xsUGl4ZWxzIGNhbGN1bGF0aW9uIGFzIHNjcm9sbFZpZXdwb3J0UGl4ZWxzXG4gICAgICBjb25zdCBtYXhTY3JvbGxQaXhlbHMgPSBNYXRoLm1heCgwLCAoYnVmZmVyLmxlbmd0aCAtIHRoaXMuYWN0dWFsUm93cykgKiBsaW5lSGVpZ2h0KTtcblxuICAgICAgLy8gU2V0IHByb2dyYW1tYXRpYyBzY3JvbGwgZmxhZ1xuICAgICAgdGhpcy5wcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuICAgICAgdGhpcy52aWV3cG9ydFkgPSBtYXhTY3JvbGxQaXhlbHM7XG4gICAgICB0aGlzLnByb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBhIHNwZWNpZmljIHBvc2l0aW9uIGluIHRoZSBidWZmZXIuXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIExpbmUgcG9zaXRpb24gKDAgPSB0b3AsIG1heCA9IGJvdHRvbSlcbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybjtcblxuICAgIHRoaXMucXVldWVSZW5kZXJPcGVyYXRpb24oKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnRlcm1pbmFsKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZTtcbiAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSB0aGlzLmZvbnRTaXplICogMS4yO1xuICAgICAgY29uc3QgbWF4U2Nyb2xsTGluZXMgPSBNYXRoLm1heCgwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5hY3R1YWxSb3dzKTtcblxuICAgICAgLy8gU2V0IHByb2dyYW1tYXRpYyBzY3JvbGwgZmxhZ1xuICAgICAgdGhpcy5wcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuICAgICAgdGhpcy52aWV3cG9ydFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGxMaW5lcywgcG9zaXRpb24pKSAqIGxpbmVIZWlnaHQ7XG4gICAgICB0aGlzLnByb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlIGEgY3VzdG9tIG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciB0aGUgbmV4dCByZW5kZXIgaXMgY29tcGxldGUuXG4gICAqIFVzZWZ1bCBmb3IgYWN0aW9ucyB0aGF0IG5lZWQgdG8gaGFwcGVuIGFmdGVyIHRlcm1pbmFsIHN0YXRlIGlzIGZ1bGx5IHVwZGF0ZWQuXG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGV4ZWN1dGUgYWZ0ZXIgcmVuZGVyXG4gICAqL1xuICBwdWJsaWMgcXVldWVDYWxsYmFjayhjYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMucXVldWVSZW5kZXJPcGVyYXRpb24oY2FsbGJhY2spO1xuICB9XG5cbiAgLy8gPT09IFFVRVJZIE1FVEhPRFMgKEltbWVkaWF0ZSkgPT09XG4gIC8vIE5vdGU6IFRoZXNlIG1ldGhvZHMgcmV0dXJuIGN1cnJlbnQgc3RhdGUgaW1tZWRpYXRlbHkgYnV0IG1heSByZXR1cm4gc3RhbGUgZGF0YVxuICAvLyBpZiBvcGVyYXRpb25zIGFyZSBwZW5kaW5nIGluIHRoZSBSQUYgcXVldWUuIEZvciBndWFyYW50ZWVkIGZyZXNoIGRhdGEsIGNhbGxcbiAgLy8gdGhlc2UgbWV0aG9kcyBpbnNpZGUgcXVldWVDYWxsYmFjaygpIHRvIGVuc3VyZSB0aGV5IHJ1biBhZnRlciBhbGwgb3BlcmF0aW9ucyBjb21wbGV0ZS5cblxuICAvKipcbiAgICogR2V0IHRlcm1pbmFsIGRpbWVuc2lvbnMuXG4gICAqIEByZXR1cm5zIE9iamVjdCB3aXRoIGNvbHMgYW5kIHJvd3NcbiAgICogQG5vdGUgTWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIG9wZXJhdGlvbnMgYXJlIHBlbmRpbmcuIFVzZSBxdWV1ZUNhbGxiYWNrKCkgZm9yIGZyZXNoIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0VGVybWluYWxTaXplKCk6IHsgY29sczogbnVtYmVyOyByb3dzOiBudW1iZXIgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbHM6IHRoaXMuY29scyxcbiAgICAgIHJvd3M6IHRoaXMucm93cyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBudW1iZXIgb2YgdmlzaWJsZSByb3dzIGluIHRoZSBjdXJyZW50IHZpZXdwb3J0LlxuICAgKiBAcmV0dXJucyBOdW1iZXIgb2Ygcm93cyB0aGF0IGZpdCBpbiB0aGUgdmlld3BvcnRcbiAgICogQG5vdGUgTWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIG9wZXJhdGlvbnMgYXJlIHBlbmRpbmcuIFVzZSBxdWV1ZUNhbGxiYWNrKCkgZm9yIGZyZXNoIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0VmlzaWJsZVJvd3MoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hY3R1YWxSb3dzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0b3RhbCBudW1iZXIgb2YgbGluZXMgaW4gdGhlIHNjcm9sbGJhY2sgYnVmZmVyLlxuICAgKiBAcmV0dXJucyBUb3RhbCBsaW5lcyBpbiBidWZmZXJcbiAgICogQG5vdGUgTWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIG9wZXJhdGlvbnMgYXJlIHBlbmRpbmcuIFVzZSBxdWV1ZUNhbGxiYWNrKCkgZm9yIGZyZXNoIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0QnVmZmVyU2l6ZSgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy50ZXJtaW5hbCkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uLlxuICAgKiBAcmV0dXJucyBDdXJyZW50IHNjcm9sbCBwb3NpdGlvbiAoMCA9IHRvcClcbiAgICogQG5vdGUgTWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIG9wZXJhdGlvbnMgYXJlIHBlbmRpbmcuIFVzZSBxdWV1ZUNhbGxiYWNrKCkgZm9yIGZyZXNoIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0U2Nyb2xsUG9zaXRpb24oKTogbnVtYmVyIHtcbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gdGhpcy5mb250U2l6ZSAqIDEuMjtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLnZpZXdwb3J0WSAvIGxpbmVIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtYXhpbXVtIHBvc3NpYmxlIHNjcm9sbCBwb3NpdGlvbi5cbiAgICogQHJldHVybnMgTWF4aW11bSBzY3JvbGwgcG9zaXRpb25cbiAgICogQG5vdGUgTWF5IHJldHVybiBzdGFsZSBkYXRhIGlmIG9wZXJhdGlvbnMgYXJlIHBlbmRpbmcuIFVzZSBxdWV1ZUNhbGxiYWNrKCkgZm9yIGZyZXNoIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgZ2V0TWF4U2Nyb2xsUG9zaXRpb24oKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybiAwO1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgYnVmZmVyLmxlbmd0aCAtIHRoaXMuYWN0dWFsUm93cyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRlcm1pbmFsIGlzIGN1cnJlbnRseSBzY3JvbGxlZCB0byB0aGUgYm90dG9tLlxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGF0IGJvdHRvbSwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBwcml2YXRlIGlzU2Nyb2xsZWRUb0JvdHRvbSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMudGVybWluYWwpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy50ZXJtaW5hbC5idWZmZXIuYWN0aXZlO1xuICAgIGNvbnN0IGxpbmVIZWlnaHQgPSB0aGlzLmZvbnRTaXplICogMS4yO1xuICAgIGNvbnN0IG1heFNjcm9sbFBpeGVscyA9IE1hdGgubWF4KDAsIChidWZmZXIubGVuZ3RoIC0gdGhpcy5hY3R1YWxSb3dzKSAqIGxpbmVIZWlnaHQpO1xuXG4gICAgLy8gQ29uc2lkZXIgXCJhdCBib3R0b21cIiBpZiB3aXRoaW4gb25lIGxpbmUgaGVpZ2h0IG9mIHRoZSBib3R0b21cbiAgICByZXR1cm4gdGhpcy52aWV3cG9ydFkgPj0gbWF4U2Nyb2xsUGl4ZWxzIC0gbGluZUhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZm9sbG93IGN1cnNvciBzdGF0ZSBiYXNlZCBvbiBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi5cbiAgICogRGlzYWJsZSBmb2xsb3cgY3Vyc29yIHdoZW4gdXNlciBzY3JvbGxzIGF3YXkgZnJvbSBib3R0b20uXG4gICAqIFJlLWVuYWJsZSB3aGVuIHVzZXIgc2Nyb2xscyBiYWNrIHRvIGJvdHRvbS5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRm9sbG93Q3Vyc29yU3RhdGUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgdXBkYXRlIHN0YXRlIGR1cmluZyBwcm9ncmFtbWF0aWMgc2Nyb2xsaW5nXG4gICAgaWYgKHRoaXMucHJvZ3JhbW1hdGljU2Nyb2xsKSByZXR1cm47XG5cbiAgICBjb25zdCB3YXNBdEJvdHRvbSA9IHRoaXMuaXNTY3JvbGxlZFRvQm90dG9tKCk7XG5cbiAgICBpZiAod2FzQXRCb3R0b20gJiYgIXRoaXMuZm9sbG93Q3Vyc29yRW5hYmxlZCkge1xuICAgICAgLy8gVXNlciBzY3JvbGxlZCBiYWNrIHRvIGJvdHRvbSAtIHJlLWVuYWJsZSBmb2xsb3cgY3Vyc29yXG4gICAgICB0aGlzLmZvbGxvd0N1cnNvckVuYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXdhc0F0Qm90dG9tICYmIHRoaXMuZm9sbG93Q3Vyc29yRW5hYmxlZCkge1xuICAgICAgLy8gVXNlciBzY3JvbGxlZCBhd2F5IGZyb20gYm90dG9tIC0gZGlzYWJsZSBmb2xsb3cgY3Vyc29yXG4gICAgICB0aGlzLmZvbGxvd0N1cnNvckVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSB2aWV3cG9ydCB0byBmb2xsb3cgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiAgICogVGhpcyBlbnN1cmVzIHRoZSBjdXJzb3Igc3RheXMgdmlzaWJsZSBkdXJpbmcgdGV4dCBpbnB1dCBvciBwbGF5YmFjay5cbiAgICovXG4gIHByaXZhdGUgZm9sbG93Q3Vyc29yKCkge1xuICAgIGlmICghdGhpcy50ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy50ZXJtaW5hbC5idWZmZXIuYWN0aXZlO1xuICAgIGNvbnN0IGN1cnNvclkgPSBidWZmZXIuY3Vyc29yWSArIGJ1ZmZlci52aWV3cG9ydFk7IC8vIEFic29sdXRlIGN1cnNvciBwb3NpdGlvbiBpbiBidWZmZXJcbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gdGhpcy5mb250U2l6ZSAqIDEuMjtcblxuICAgIC8vIENhbGN1bGF0ZSB3aGF0IGxpbmUgdGhlIGN1cnNvciBpcyBvblxuICAgIGNvbnN0IGN1cnNvckxpbmUgPSBjdXJzb3JZO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGN1cnJlbnQgdmlld3BvcnQgcmFuZ2UgaW4gbGluZXNcbiAgICBjb25zdCB2aWV3cG9ydFN0YXJ0TGluZSA9IE1hdGguZmxvb3IodGhpcy52aWV3cG9ydFkgLyBsaW5lSGVpZ2h0KTtcbiAgICBjb25zdCB2aWV3cG9ydEVuZExpbmUgPSB2aWV3cG9ydFN0YXJ0TGluZSArIHRoaXMuYWN0dWFsUm93cyAtIDE7XG5cbiAgICAvLyBTZXQgcHJvZ3JhbW1hdGljIHNjcm9sbCBmbGFnIHRvIHByZXZlbnQgc3RhdGUgdXBkYXRlc1xuICAgIHRoaXMucHJvZ3JhbW1hdGljU2Nyb2xsID0gdHJ1ZTtcblxuICAgIC8vIElmIGN1cnNvciBpcyBvdXRzaWRlIHZpZXdwb3J0LCBzY3JvbGwgdG8ga2VlcCBpdCB2aXNpYmxlXG4gICAgaWYgKGN1cnNvckxpbmUgPCB2aWV3cG9ydFN0YXJ0TGluZSkge1xuICAgICAgLy8gQ3Vyc29yIGlzIGFib3ZlIHZpZXdwb3J0IC0gc2Nyb2xsIHVwXG4gICAgICB0aGlzLnZpZXdwb3J0WSA9IGN1cnNvckxpbmUgKiBsaW5lSGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAoY3Vyc29yTGluZSA+IHZpZXdwb3J0RW5kTGluZSkge1xuICAgICAgLy8gQ3Vyc29yIGlzIGJlbG93IHZpZXdwb3J0IC0gc2Nyb2xsIGRvd24gdG8gc2hvdyBjdXJzb3IgYXQgYm90dG9tIG9mIHZpZXdwb3J0XG4gICAgICB0aGlzLnZpZXdwb3J0WSA9IE1hdGgubWF4KDAsIChjdXJzb3JMaW5lIC0gdGhpcy5hY3R1YWxSb3dzICsgMSkgKiBsaW5lSGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgd2UgZG9uJ3Qgc2Nyb2xsIHBhc3QgdGhlIGJ1ZmZlclxuICAgIGNvbnN0IG1heFNjcm9sbFBpeGVscyA9IE1hdGgubWF4KDAsIChidWZmZXIubGVuZ3RoIC0gdGhpcy5hY3R1YWxSb3dzKSAqIGxpbmVIZWlnaHQpO1xuICAgIHRoaXMudmlld3BvcnRZID0gTWF0aC5taW4odGhpcy52aWV3cG9ydFksIG1heFNjcm9sbFBpeGVscyk7XG5cbiAgICAvLyBDbGVhciBwcm9ncmFtbWF0aWMgc2Nyb2xsIGZsYWdcbiAgICB0aGlzLnByb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjbGljayBvbiBzY3JvbGwtdG8tYm90dG9tIGluZGljYXRvclxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICAvLyBJbW1lZGlhdGVseSBlbmFibGUgZm9sbG93IGN1cnNvciB0byBoaWRlIHRoZSBpbmRpY2F0b3JcbiAgICB0aGlzLmZvbGxvd0N1cnNvckVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGZpdCB0byB3aWR0aCB0b2dnbGVcbiAgICovXG4gIHB1YmxpYyBoYW5kbGVGaXRUb2dnbGUgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnRlcm1pbmFsIHx8ICF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy5maXRIb3Jpem9udGFsbHkgPSAhdGhpcy5maXRIb3Jpem9udGFsbHk7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJyZW50IGxvZ2ljYWwgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSB0b2dnbGluZ1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMudGVybWluYWwuYnVmZmVyLmFjdGl2ZTtcbiAgICBjb25zdCBjdXJyZW50TGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgY29uc3QgY3VycmVudFNjcm9sbExpbmVzID0gY3VycmVudExpbmVIZWlnaHQgPiAwID8gdGhpcy52aWV3cG9ydFkgLyBjdXJyZW50TGluZUhlaWdodCA6IDA7XG4gICAgY29uc3Qgd2FzQXRCb3R0b20gPSB0aGlzLmlzU2Nyb2xsZWRUb0JvdHRvbSgpO1xuXG4gICAgLy8gU3RvcmUgb3JpZ2luYWwgZm9udCBzaXplIHdoZW4gZW50ZXJpbmcgZml0IG1vZGVcbiAgICBpZiAoIXRoaXMuZml0SG9yaXpvbnRhbGx5KSB7XG4gICAgICB0aGlzLm9yaWdpbmFsRm9udFNpemUgPSB0aGlzLmZvbnRTaXplO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSB0aGUgbW9kZVxuICAgIHRoaXMuZml0SG9yaXpvbnRhbGx5ID0gIXRoaXMuZml0SG9yaXpvbnRhbGx5O1xuXG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBmb250IHNpemUgd2hlbiBleGl0aW5nIGZpdCBtb2RlXG4gICAgaWYgKCF0aGlzLmZpdEhvcml6b250YWxseSkge1xuICAgICAgdGhpcy5mb250U2l6ZSA9IHRoaXMub3JpZ2luYWxGb250U2l6ZTtcbiAgICB9XG5cbiAgICAvLyBSZWNhbGN1bGF0ZSBmaXRcbiAgICB0aGlzLnJlcXVlc3RSZXNpemUoJ2ZpdC1tb2RlLWNoYW5nZScpO1xuXG4gICAgLy8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gLSBwcmlvcml0aXplIHN0YXlpbmcgYXQgYm90dG9tIGlmIHdlIHdlcmUgdGhlcmVcbiAgICBpZiAod2FzQXRCb3R0b20pIHtcbiAgICAgIC8vIEZvcmNlIHNjcm9sbCB0byBib3R0b20gd2l0aCBuZXcgZGltZW5zaW9uc1xuICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXN0b3JlIGxvZ2ljYWwgc2Nyb2xsIHBvc2l0aW9uIGZvciBub24tYm90dG9tIHBvc2l0aW9uc1xuICAgICAgY29uc3QgbmV3TGluZUhlaWdodCA9IHRoaXMuZm9udFNpemUgKiAxLjI7XG4gICAgICBjb25zdCBtYXhTY3JvbGxQaXhlbHMgPSBNYXRoLm1heCgwLCAoYnVmZmVyLmxlbmd0aCAtIHRoaXMuYWN0dWFsUm93cykgKiBuZXdMaW5lSGVpZ2h0KTtcbiAgICAgIGNvbnN0IG5ld1ZpZXdwb3J0WSA9IGN1cnJlbnRTY3JvbGxMaW5lcyAqIG5ld0xpbmVIZWlnaHQ7XG4gICAgICB0aGlzLnZpZXdwb3J0WSA9IE1hdGgubWF4KDAsIE1hdGgubWluKG1heFNjcm9sbFBpeGVscywgbmV3Vmlld3BvcnRZKSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVQYXN0ZSA9IGFzeW5jIChlOiBDbGlwYm9hcmRFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgbGV0IGNsaXBib2FyZERhdGEgPSBlLmNsaXBib2FyZERhdGE/LmdldERhdGEoJ3RleHQvcGxhaW4nKTtcblxuICAgIGlmICghY2xpcGJvYXJkRGF0YSAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjbGlwYm9hcmREYXRhID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcmVhZCBjbGlwYm9hcmQgdmlhIG5hdmlnYXRvciBBUEknLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaXBib2FyZERhdGEpIHtcbiAgICAgIC8vIERpc3BhdGNoIGEgY3VzdG9tIGV2ZW50IHdpdGggdGhlIHBhc3RlZCB0ZXh0XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudCgndGVybWluYWwtcGFzdGUnLCB7XG4gICAgICAgICAgZGV0YWlsOiB7IHRleHQ6IGNsaXBib2FyZERhdGEgfSxcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICAvLyBEb24ndCBoYW5kbGUgY2xpY2tzIGlmIGRpc2FibGVkIChlLmcuLCBmb3IgbW9iaWxlIGRpcmVjdCBrZXlib2FyZCBtb2RlKVxuICAgIGlmICh0aGlzLmRpc2FibGVDbGljaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZvY3VzIHRoZSB0ZXJtaW5hbCBjb250YWluZXIgc28gaXQgY2FuIHJlY2VpdmUgcGFzdGUgZXZlbnRzXG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZVNob3J0Y3V0Q2xpY2sgPSAoa2V5U2VxdWVuY2U6IHN0cmluZykgPT4ge1xuICAgIC8vIERpc3BhdGNoIGEgY3VzdG9tIGV2ZW50IHdpdGggdGhlIGtleWJvYXJkIHNob3J0Y3V0XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KCd0ZXJtaW5hbC1pbnB1dCcsIHtcbiAgICAgICAgZGV0YWlsOiB7IHRleHQ6IGtleVNlcXVlbmNlIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICB9KVxuICAgICk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHRlcm1pbmFsVGhlbWUgPSB0aGlzLmdldFRlcm1pbmFsVGhlbWUoKTtcbiAgICBjb25zdCBjb250YWluZXJTdHlsZSA9IGBcbiAgICAgIHZpZXctdHJhbnNpdGlvbi1uYW1lOiBzZXNzaW9uLSR7dGhpcy5zZXNzaW9uSWR9O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0ZXJtaW5hbFRoZW1lLmJhY2tncm91bmQgfHwgJ3ZhcigtLXRlcm1pbmFsLWJhY2tncm91bmQsICMwYTBhMGEpJ307XG4gICAgICBjb2xvcjogJHt0ZXJtaW5hbFRoZW1lLmZvcmVncm91bmQgfHwgJ3ZhcigtLXRlcm1pbmFsLWZvcmVncm91bmQsICNlNGU0ZTQpJ307XG4gICAgYDtcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAvKiBEeW5hbWljIHRlcm1pbmFsIHNpemluZyAqL1xuICAgICAgICAudGVybWluYWwtY29udGFpbmVyIHtcbiAgICAgICAgICBmb250LXNpemU6ICR7dGhpcy5mb250U2l6ZX1weDtcbiAgICAgICAgICBsaW5lLWhlaWdodDogJHt0aGlzLmZvbnRTaXplICogMS4yfXB4O1xuICAgICAgICAgIHRvdWNoLWFjdGlvbjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLnRlcm1pbmFsLWxpbmUge1xuICAgICAgICAgIGhlaWdodDogJHt0aGlzLmZvbnRTaXplICogMS4yfXB4O1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAke3RoaXMuZm9udFNpemUgKiAxLjJ9cHg7XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG4gICAgICA8ZGl2IGNsYXNzPVwicmVsYXRpdmUgdy1mdWxsIGgtZnVsbCBwLTAgbS0wXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBpZD1cInRlcm1pbmFsLWNvbnRhaW5lclwiXG4gICAgICAgICAgY2xhc3M9XCJ0ZXJtaW5hbC1jb250YWluZXIgdy1mdWxsIGgtZnVsbCBvdmVyZmxvdy1oaWRkZW4gcC0wIG0tMFwiXG4gICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXG4gICAgICAgICAgc3R5bGU9XCIke2NvbnRhaW5lclN0eWxlfVwiXG4gICAgICAgICAgQHBhc3RlPSR7dGhpcy5oYW5kbGVQYXN0ZX1cbiAgICAgICAgICBAY2xpY2s9JHt0aGlzLmhhbmRsZUNsaWNrfVxuICAgICAgICAgIGRhdGEtdGVzdGlkPVwidGVybWluYWwtY29udGFpbmVyXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgICAke1xuICAgICAgICAgICF0aGlzLmZvbGxvd0N1cnNvckVuYWJsZWQgJiYgIXRoaXMuaGlkZVNjcm9sbEJ1dHRvblxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJzY3JvbGwtdG8tYm90dG9tXCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9JHt0aGlzLmhhbmRsZVNjcm9sbFRvQm90dG9tfVxuICAgICAgICAgICAgICAgIHRpdGxlPVwiU2Nyb2xsIHRvIGJvdHRvbVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBcdTIxOTNcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA6ICcnXG4gICAgICAgIH1cbiAgICAgICAgJHtcbiAgICAgICAgICB0aGlzLmRlYnVnTW9kZVxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVidWctb3ZlcmxheVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWNcIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWV0cmljLWxhYmVsXCI+UmVuZGVyczo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7dGhpcy5yZW5kZXJDb3VudH08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpY1wiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5Bdmc6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXRyaWMtdmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICA+JHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvdW50ID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAodGhpcy50b3RhbFJlbmRlclRpbWUgLyB0aGlzLnJlbmRlckNvdW50KS50b0ZpeGVkKDIpXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICcwLjAwJ1xuICAgICAgICAgICAgICAgICAgICB9bXM8L3NwYW5cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPkxhc3Q6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke3RoaXMubGFzdFJlbmRlclRpbWUudG9GaXhlZCgyKX1tczwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA6ICcnXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiIsICIvKipcbiAqIEtleWJvYXJkIFNob3J0Y3V0IEhpZ2hsaWdodGVyIHV0aWxpdHkgZm9yIERPTSB0ZXJtaW5hbFxuICpcbiAqIEhhbmRsZXMgZGV0ZWN0aW9uIGFuZCBoaWdobGlnaHRpbmcgb2Yga2V5Ym9hcmQgc2hvcnRjdXRzIGluIHRlcm1pbmFsIGNvbnRlbnQsXG4gKiBtYWtpbmcgdGhlbSBjbGlja2FibGUgdG8gc2VuZCB0aGUgYWN0dWFsIGtleSBzZXF1ZW5jZXMuXG4gKi9cblxuLy8gQ29uc3RhbnRzXG5jb25zdCBURVJNSU5BTF9TSE9SVENVVF9DTEFTUyA9ICd0ZXJtaW5hbC1zaG9ydGN1dCc7XG5cbi8vIEtleWJvYXJkIHNob3J0Y3V0IHBhdHRlcm5zIChjYXNlIGluc2Vuc2l0aXZlKVxuY29uc3QgU0hPUlRDVVRfUEFUVEVSTlMgPSBbXG4gIC8vIEN0cmwgY29tYmluYXRpb25zXG4gIHtcbiAgICBwYXR0ZXJuOiAvXFxiY3RybFxcKyhbYS16XSlcXGIvZ2ksXG4gICAga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gYGN0cmxfJHttYXRjaFsxXS50b0xvd2VyQ2FzZSgpfWAsXG4gIH0sXG4gIHsgcGF0dGVybjogL1xcYmN0cmxcXCsoWzAtOV0pXFxiL2dpLCBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBgY3RybF8ke21hdGNoWzFdfWAgfSxcbiAge1xuICAgIHBhdHRlcm46IC9cXGJjdHJsXFwrZihbMS05XXwxWzAtMl0pXFxiL2dpLFxuICAgIGtleVNlcXVlbmNlOiAobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkpID0+IGBjdHJsX2Yke21hdGNoWzFdfWAsXG4gIH0sXG5cbiAgLy8gQ29tbW9uIHNob3J0Y3V0c1xuICB7XG4gICAgcGF0dGVybjogL1xcYmN0cmxcXCtzaGlmdFxcKyhbYS16XSlcXGIvZ2ksXG4gICAga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gYGN0cmxfc2hpZnRfJHttYXRjaFsxXS50b0xvd2VyQ2FzZSgpfWAsXG4gIH0sXG4gIHtcbiAgICBwYXR0ZXJuOiAvXFxiYWx0XFwrKFthLXpdKVxcYi9naSxcbiAgICBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBgYWx0XyR7bWF0Y2hbMV0udG9Mb3dlckNhc2UoKX1gLFxuICB9LFxuICB7XG4gICAgcGF0dGVybjogL1xcYmNtZFxcKyhbYS16XSlcXGIvZ2ksXG4gICAga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gYGNtZF8ke21hdGNoWzFdLnRvTG93ZXJDYXNlKCl9YCxcbiAgfSxcblxuICAvLyBGdW5jdGlvbiBrZXlzXG4gIHsgcGF0dGVybjogL1xcYmYoWzEtOV18MVswLTJdKVxcYi9naSwga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gYGYke21hdGNoWzFdfWAgfSxcblxuICAvLyBTcGVjaWFsIGtleXNcbiAgeyBwYXR0ZXJuOiAvXFxiZXNjXFxiL2dpLCBrZXlTZXF1ZW5jZTogKCkgPT4gJ2VzY2FwZScgfSxcbiAgeyBwYXR0ZXJuOiAvXFxiZXNjYXBlXFxiL2dpLCBrZXlTZXF1ZW5jZTogKCkgPT4gJ2VzY2FwZScgfSxcbiAgeyBwYXR0ZXJuOiAvXFxidGFiXFxiL2dpLCBrZXlTZXF1ZW5jZTogKCkgPT4gJ3RhYicgfSxcbiAgeyBwYXR0ZXJuOiAvXFxic2hpZnRcXCt0YWJcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAnc2hpZnRfdGFiJyB9LFxuICB7IHBhdHRlcm46IC9cXGJlbnRlclxcYi9naSwga2V5U2VxdWVuY2U6ICgpID0+ICdlbnRlcicgfSxcbiAgeyBwYXR0ZXJuOiAvXFxicmV0dXJuXFxiL2dpLCBrZXlTZXF1ZW5jZTogKCkgPT4gJ2VudGVyJyB9LFxuICB7IHBhdHRlcm46IC9cXGJiYWNrc3BhY2VcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAnYmFja3NwYWNlJyB9LFxuICB7IHBhdHRlcm46IC9cXGJkZWxldGVcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAnZGVsZXRlJyB9LFxuICB7IHBhdHRlcm46IC9cXGJzcGFjZVxcYi9naSwga2V5U2VxdWVuY2U6ICgpID0+ICcgJyB9LFxuXG4gIC8vIEFycm93IGtleXNcbiAge1xuICAgIHBhdHRlcm46IC9cXGJhcnJvd1xccysodXB8ZG93bnxsZWZ0fHJpZ2h0KVxcYi9naSxcbiAgICBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBgYXJyb3dfJHttYXRjaFsxXS50b0xvd2VyQ2FzZSgpfWAsXG4gIH0sXG4gIHtcbiAgICBwYXR0ZXJuOiAvXFxiKHVwfGRvd258bGVmdHxyaWdodClcXHMrYXJyb3dcXGIvZ2ksXG4gICAga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gYGFycm93XyR7bWF0Y2hbMV0udG9Mb3dlckNhc2UoKX1gLFxuICB9LFxuXG4gIC8vIFBhZ2Uga2V5c1xuICB7XG4gICAgcGF0dGVybjogL1xcYnBhZ2VcXHMrKHVwfGRvd24pXFxiL2dpLFxuICAgIGtleVNlcXVlbmNlOiAobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkpID0+IGBwYWdlXyR7bWF0Y2hbMV0udG9Mb3dlckNhc2UoKX1gLFxuICB9LFxuICB7IHBhdHRlcm46IC9cXGIoaG9tZXxlbmQpXFxiL2dpLCBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpIH0sXG5cbiAgLy8gQ29tbW9uIHBocmFzZXMgd2l0aCBzaG9ydGN1dHNcbiAgeyBwYXR0ZXJuOiAvXFxiZXNjXFxzK3RvXFxzKyhpbnRlcnJ1cHR8cXVpdHxleGl0fGNhbmNlbClcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAnZXNjYXBlJyB9LFxuICB7IHBhdHRlcm46IC9cXGJwcmVzc1xccytlc2NcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAnZXNjYXBlJyB9LFxuICB7IHBhdHRlcm46IC9cXGJwcmVzc1xccytlbnRlclxcYi9naSwga2V5U2VxdWVuY2U6ICgpID0+ICdlbnRlcicgfSxcbiAgeyBwYXR0ZXJuOiAvXFxicHJlc3NcXHMrdGFiXFxiL2dpLCBrZXlTZXF1ZW5jZTogKCkgPT4gJ3RhYicgfSxcbiAge1xuICAgIHBhdHRlcm46IC9cXGJwcmVzc1xccytjdHJsXFwrKFthLXpdKVxcYi9naSxcbiAgICBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBgY3RybF8ke21hdGNoWzFdLnRvTG93ZXJDYXNlKCl9YCxcbiAgfSxcbiAge1xuICAgIHBhdHRlcm46IC9cXGJjdHJsXFwrKFthLXpdKVxccyt0b1xccytcXHcrL2dpLFxuICAgIGtleVNlcXVlbmNlOiAobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkpID0+IGBjdHJsXyR7bWF0Y2hbMV0udG9Mb3dlckNhc2UoKX1gLFxuICB9LFxuXG4gIC8vIHEgdG8gcXVpdCBwYXR0ZXJuXG4gIHsgcGF0dGVybjogL1xcYnFcXHMrdG9cXHMrKHF1aXR8ZXhpdClcXGIvZ2ksIGtleVNlcXVlbmNlOiAoKSA9PiAncScgfSxcbiAgeyBwYXR0ZXJuOiAvXFxicHJlc3NcXHMrcVxcYi9naSwga2V5U2VxdWVuY2U6ICgpID0+ICdxJyB9LFxuXG4gIC8vIENsYXVkZSBDb2RlIGludGVyYWN0aXZlIHByb21wdHMgLSBnZW5lcmljIG51bWJlcmVkIG9wdGlvbnNcbiAgeyBwYXR0ZXJuOiAvXHUyNzZGXFxzKihcXGQrKVxcLlxccysuKi9nLCBrZXlTZXF1ZW5jZTogKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5KSA9PiBtYXRjaFsxXSB9LFxuICB7IHBhdHRlcm46IC8oXFxkKylcXC5cXHMrLiovZywga2V5U2VxdWVuY2U6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gbWF0Y2hbMV0gfSxcbl07XG5cbnR5cGUgUHJvY2Vzc2VkUmFuZ2UgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufTtcblxuaW50ZXJmYWNlIFNob3J0Y3V0TWF0Y2gge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGtleVNlcXVlbmNlOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIE1haW4gZW50cnkgcG9pbnQgLSBwcm9jZXNzIGFsbCBrZXlib2FyZCBzaG9ydGN1dHMgaW4gYSBjb250YWluZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NLZXlib2FyZFNob3J0Y3V0cyhcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgb25TaG9ydGN1dENsaWNrOiAoa2V5U2VxdWVuY2U6IHN0cmluZykgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGNvbnN0IHByb2Nlc3NvciA9IG5ldyBTaG9ydGN1dFByb2Nlc3Nvcihjb250YWluZXIsIG9uU2hvcnRjdXRDbGljayk7XG4gIHByb2Nlc3Nvci5wcm9jZXNzKCk7XG59XG5cbi8qKlxuICogU2hvcnRjdXRQcm9jZXNzb3IgY2xhc3MgZW5jYXBzdWxhdGVzIHRoZSBzaG9ydGN1dCBkZXRlY3Rpb24gYW5kIGhpZ2hsaWdodGluZyBsb2dpY1xuICovXG5jbGFzcyBTaG9ydGN1dFByb2Nlc3NvciB7XG4gIC8vIGJpb21lLWlnbm9yZSBsaW50L2NvcnJlY3RuZXNzL25vVW51c2VkUHJpdmF0ZUNsYXNzTWVtYmVyczogVXNlZCBpbiBjb25zdHJ1Y3RvclxuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbGluZXM6IE5vZGVMaXN0T2Y8RWxlbWVudD47XG4gIHByaXZhdGUgcHJvY2Vzc2VkUmFuZ2VzOiBNYXA8bnVtYmVyLCBQcm9jZXNzZWRSYW5nZVtdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBvblNob3J0Y3V0Q2xpY2s6IChrZXlTZXF1ZW5jZTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9uU2hvcnRjdXRDbGljazogKGtleVNlcXVlbmNlOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB0aGlzLmxpbmVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZXJtaW5hbC1saW5lJyk7XG4gICAgdGhpcy5vblNob3J0Y3V0Q2xpY2sgPSBvblNob3J0Y3V0Q2xpY2s7XG4gIH1cblxuICBwcm9jZXNzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gUHJvY2VzcyBlYWNoIGxpbmVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMucHJvY2Vzc0xpbmUoaSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwcm9jZXNzTGluZShsaW5lSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGxpbmVUZXh0ID0gdGhpcy5nZXRMaW5lVGV4dChsaW5lSW5kZXgpO1xuICAgIGlmICghbGluZVRleHQpIHJldHVybjtcblxuICAgIC8vIEZpbmQgYWxsIHNob3J0Y3V0cyBpbiB0aGlzIGxpbmVcbiAgICBjb25zdCBzaG9ydGN1dHMgPSB0aGlzLmZpbmRTaG9ydGN1dHNJbkxpbmUobGluZVRleHQpO1xuXG4gICAgLy8gQ3JlYXRlIGNsaWNrYWJsZSBzaG9ydGN1dHMgZm9yIGVhY2ggbWF0Y2hcbiAgICBmb3IgKGNvbnN0IHNob3J0Y3V0IG9mIHNob3J0Y3V0cykge1xuICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBwcm9jZXNzZWRcbiAgICAgIGlmICghdGhpcy5pc1JhbmdlUHJvY2Vzc2VkKGxpbmVJbmRleCwgc2hvcnRjdXQuc3RhcnQsIHNob3J0Y3V0LmVuZCkpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVTaG9ydGN1dExpbmsoc2hvcnRjdXQsIGxpbmVJbmRleCk7XG4gICAgICAgIHRoaXMubWFya1JhbmdlQXNQcm9jZXNzZWQobGluZUluZGV4LCBzaG9ydGN1dC5zdGFydCwgc2hvcnRjdXQuZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZpbmRTaG9ydGN1dHNJbkxpbmUobGluZVRleHQ6IHN0cmluZyk6IFNob3J0Y3V0TWF0Y2hbXSB7XG4gICAgY29uc3Qgc2hvcnRjdXRzOiBTaG9ydGN1dE1hdGNoW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBTSE9SVENVVF9QQVRURVJOUykge1xuICAgICAgLy8gUmVzZXQgdGhlIHJlZ2V4XG4gICAgICBwYXR0ZXJuLnBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblxuICAgICAgbGV0IG1hdGNoID0gcGF0dGVybi5wYXR0ZXJuLmV4ZWMobGluZVRleHQpO1xuICAgICAgd2hpbGUgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBtYXRjaFswXTtcbiAgICAgICAgY29uc3Qga2V5U2VxdWVuY2UgPSBwYXR0ZXJuLmtleVNlcXVlbmNlKG1hdGNoKTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgY29uc3QgZW5kID0gbWF0Y2guaW5kZXggKyB0ZXh0Lmxlbmd0aDtcblxuICAgICAgICBzaG9ydGN1dHMucHVzaCh7XG4gICAgICAgICAgdGV4dCxcbiAgICAgICAgICBrZXlTZXF1ZW5jZSxcbiAgICAgICAgICBzdGFydCxcbiAgICAgICAgICBlbmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1hdGNoID0gcGF0dGVybi5wYXR0ZXJuLmV4ZWMobGluZVRleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgc3RhcnQgcG9zaXRpb24gdG8gaGFuZGxlIG92ZXJsYXBzXG4gICAgc2hvcnRjdXRzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcblxuICAgIC8vIFJlbW92ZSBvdmVybGFwcGluZyBtYXRjaGVzIChrZWVwIHRoZSBmaXJzdCBvbmUpXG4gICAgY29uc3Qgbm9uT3ZlcmxhcHBpbmc6IFNob3J0Y3V0TWF0Y2hbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2hvcnRjdXQgb2Ygc2hvcnRjdXRzKSB7XG4gICAgICBjb25zdCBoYXNPdmVybGFwID0gbm9uT3ZlcmxhcHBpbmcuc29tZShcbiAgICAgICAgKGV4aXN0aW5nKSA9PiBzaG9ydGN1dC5zdGFydCA8IGV4aXN0aW5nLmVuZCAmJiBzaG9ydGN1dC5lbmQgPiBleGlzdGluZy5zdGFydFxuICAgICAgKTtcbiAgICAgIGlmICghaGFzT3ZlcmxhcCkge1xuICAgICAgICBub25PdmVybGFwcGluZy5wdXNoKHNob3J0Y3V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9uT3ZlcmxhcHBpbmc7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNob3J0Y3V0TGluayhzaG9ydGN1dDogU2hvcnRjdXRNYXRjaCwgbGluZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lc1tsaW5lSW5kZXhdO1xuICAgIGNvbnN0IGhpZ2hsaWdodGVyID0gbmV3IFNob3J0Y3V0SGlnaGxpZ2h0ZXIobGluZSwgc2hvcnRjdXQsIHRoaXMub25TaG9ydGN1dENsaWNrKTtcbiAgICBoaWdobGlnaHRlci5jcmVhdGVMaW5rKCk7XG4gIH1cblxuICBwcml2YXRlIGdldExpbmVUZXh0KGxpbmVJbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAobGluZUluZGV4IDwgMCB8fCBsaW5lSW5kZXggPj0gdGhpcy5saW5lcy5sZW5ndGgpIHJldHVybiAnJztcbiAgICByZXR1cm4gdGhpcy5saW5lc1tsaW5lSW5kZXhdLnRleHRDb250ZW50IHx8ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1JhbmdlUHJvY2Vzc2VkKGxpbmVJbmRleDogbnVtYmVyLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJhbmdlcyA9IHRoaXMucHJvY2Vzc2VkUmFuZ2VzLmdldChsaW5lSW5kZXgpO1xuICAgIGlmICghcmFuZ2VzKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gcmFuZ2VzLnNvbWUoKHJhbmdlKSA9PiBzdGFydCA8IHJhbmdlLmVuZCAmJiBlbmQgPiByYW5nZS5zdGFydCk7XG4gIH1cblxuICBwcml2YXRlIG1hcmtSYW5nZUFzUHJvY2Vzc2VkKGxpbmVJbmRleDogbnVtYmVyLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5wcm9jZXNzZWRSYW5nZXMuaGFzKGxpbmVJbmRleCkpIHtcbiAgICAgIHRoaXMucHJvY2Vzc2VkUmFuZ2VzLnNldChsaW5lSW5kZXgsIFtdKTtcbiAgICB9XG5cbiAgICBjb25zdCByYW5nZXMgPSB0aGlzLnByb2Nlc3NlZFJhbmdlcy5nZXQobGluZUluZGV4KTtcbiAgICBpZiAocmFuZ2VzKSB7XG4gICAgICByYW5nZXMucHVzaCh7IHN0YXJ0LCBlbmQgfSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2hvcnRjdXRIaWdobGlnaHRlciBoYW5kbGVzIHRoZSBET00gbWFuaXB1bGF0aW9uIHRvIGNyZWF0ZSBjbGlja2FibGUgc2hvcnRjdXRzXG4gKi9cbmNsYXNzIFNob3J0Y3V0SGlnaGxpZ2h0ZXIge1xuICBwcml2YXRlIGxpbmVFbGVtZW50OiBFbGVtZW50O1xuICBwcml2YXRlIHNob3J0Y3V0OiBTaG9ydGN1dE1hdGNoO1xuICBwcml2YXRlIG9uU2hvcnRjdXRDbGljazogKGtleVNlcXVlbmNlOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbGluZUVsZW1lbnQ6IEVsZW1lbnQsXG4gICAgc2hvcnRjdXQ6IFNob3J0Y3V0TWF0Y2gsXG4gICAgb25TaG9ydGN1dENsaWNrOiAoa2V5U2VxdWVuY2U6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmxpbmVFbGVtZW50ID0gbGluZUVsZW1lbnQ7XG4gICAgdGhpcy5zaG9ydGN1dCA9IHNob3J0Y3V0O1xuICAgIHRoaXMub25TaG9ydGN1dENsaWNrID0gb25TaG9ydGN1dENsaWNrO1xuICB9XG5cbiAgY3JlYXRlTGluaygpOiB2b2lkIHtcbiAgICB0aGlzLndyYXBUZXh0SW5MaW5rKHRoaXMubGluZUVsZW1lbnQsIHRoaXMuc2hvcnRjdXQuc3RhcnQsIHRoaXMuc2hvcnRjdXQuZW5kKTtcbiAgfVxuXG4gIHByaXZhdGUgd3JhcFRleHRJbkxpbmsobGluZUVsZW1lbnQ6IEVsZW1lbnQsIHN0YXJ0Q29sOiBudW1iZXIsIGVuZENvbDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBhbGwgdGV4dCBub2RlcyBhbmQgdGhlaXIgcG9zaXRpb25zXG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihsaW5lRWxlbWVudCwgTm9kZUZpbHRlci5TSE9XX1RFWFQsIG51bGwpO1xuICAgIGNvbnN0IHRleHROb2RlRGF0YTogQXJyYXk8eyBub2RlOiBUZXh0OyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9PiA9IFtdO1xuICAgIGxldCBjdXJyZW50UG9zID0gMDtcbiAgICBsZXQgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuXG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgIGNvbnN0IHRleHROb2RlID0gbm9kZSBhcyBUZXh0O1xuICAgICAgY29uc3Qgbm9kZVRleHQgPSB0ZXh0Tm9kZS50ZXh0Q29udGVudCB8fCAnJztcbiAgICAgIGNvbnN0IG5vZGVTdGFydCA9IGN1cnJlbnRQb3M7XG4gICAgICBjb25zdCBub2RlRW5kID0gY3VycmVudFBvcyArIG5vZGVUZXh0Lmxlbmd0aDtcblxuICAgICAgLy8gT25seSBjb2xsZWN0IG5vZGVzIHRoYXQgb3ZlcmxhcCB3aXRoIG91ciByYW5nZVxuICAgICAgaWYgKG5vZGVFbmQgPiBzdGFydENvbCAmJiBub2RlU3RhcnQgPCBlbmRDb2wpIHtcbiAgICAgICAgdGV4dE5vZGVEYXRhLnB1c2goeyBub2RlOiB0ZXh0Tm9kZSwgc3RhcnQ6IG5vZGVTdGFydCwgZW5kOiBub2RlRW5kIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50UG9zID0gbm9kZUVuZDtcbiAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzczogcHJvY2VzcyBhbGwgcmVsZXZhbnQgdGV4dCBub2RlcyBpbiByZXZlcnNlIG9yZGVyXG4gICAgLy8gKHRvIGF2b2lkIGludmFsaWRhdGluZyBwb3NpdGlvbnMgd2hlbiBtb2RpZnlpbmcgdGhlIERPTSlcbiAgICBmb3IgKGxldCBpID0gdGV4dE5vZGVEYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB7IG5vZGU6IHRleHROb2RlLCBzdGFydDogbm9kZVN0YXJ0IH0gPSB0ZXh0Tm9kZURhdGFbaV07XG4gICAgICBjb25zdCBub2RlVGV4dCA9IHRleHROb2RlLnRleHRDb250ZW50IHx8ICcnO1xuXG4gICAgICBjb25zdCBsaW5rU3RhcnQgPSBNYXRoLm1heCgwLCBzdGFydENvbCAtIG5vZGVTdGFydCk7XG4gICAgICBjb25zdCBsaW5rRW5kID0gTWF0aC5taW4obm9kZVRleHQubGVuZ3RoLCBlbmRDb2wgLSBub2RlU3RhcnQpO1xuXG4gICAgICBpZiAobGlua1N0YXJ0IDwgbGlua0VuZCkge1xuICAgICAgICB0aGlzLndyYXBUZXh0Tm9kZSh0ZXh0Tm9kZSwgbGlua1N0YXJ0LCBsaW5rRW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBUZXh0Tm9kZSh0ZXh0Tm9kZTogVGV4dCwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0ZXh0Tm9kZS5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG5cbiAgICAvLyBEb24ndCB3cmFwIGlmIGFscmVhZHkgaW5zaWRlIGEgbGluayBvciBzaG9ydGN1dFxuICAgIGlmICh0aGlzLmlzSW5zaWRlQ2xpY2thYmxlKHBhcmVudCBhcyBFbGVtZW50KSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgbm9kZVRleHQgPSB0ZXh0Tm9kZS50ZXh0Q29udGVudCB8fCAnJztcbiAgICBjb25zdCBiZWZvcmVUZXh0ID0gbm9kZVRleHQuc3Vic3RyaW5nKDAsIHN0YXJ0KTtcbiAgICBjb25zdCBsaW5rVGV4dCA9IG5vZGVUZXh0LnN1YnN0cmluZyhzdGFydCwgZW5kKTtcbiAgICBjb25zdCBhZnRlclRleHQgPSBub2RlVGV4dC5zdWJzdHJpbmcoZW5kKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgc2hvcnRjdXQgZWxlbWVudFxuICAgIGNvbnN0IHNob3J0Y3V0RWxlbWVudCA9IHRoaXMuY3JlYXRlU2hvcnRjdXRFbGVtZW50KGxpbmtUZXh0KTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIHRleHQgbm9kZVxuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgaWYgKGJlZm9yZVRleHQpIHtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGJlZm9yZVRleHQpKTtcbiAgICB9XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzaG9ydGN1dEVsZW1lbnQpO1xuXG4gICAgaWYgKGFmdGVyVGV4dCkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYWZ0ZXJUZXh0KSk7XG4gICAgfVxuXG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChmcmFnbWVudCwgdGV4dE5vZGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTaG9ydGN1dEVsZW1lbnQodGV4dDogc3RyaW5nKTogSFRNTFNwYW5FbGVtZW50IHtcbiAgICBjb25zdCBzaG9ydGN1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzaG9ydGN1dC5jbGFzc05hbWUgPSBURVJNSU5BTF9TSE9SVENVVF9DTEFTUztcbiAgICBzaG9ydGN1dC5zdHlsZS5jb2xvciA9ICcjOWNhM2FmJzsgLy8gR3JheS00MDBcbiAgICBzaG9ydGN1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuICAgIHNob3J0Y3V0LnN0eWxlLnRleHREZWNvcmF0aW9uU3R5bGUgPSAnZG90dGVkJztcbiAgICBzaG9ydGN1dC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgc2hvcnRjdXQuc3R5bGUuZm9udFdlaWdodCA9ICc1MDAnO1xuICAgIHNob3J0Y3V0LnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIC8vIEFkZCBjbGljayBoYW5kbGVyXG4gICAgc2hvcnRjdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMub25TaG9ydGN1dENsaWNrKHRoaXMuc2hvcnRjdXQua2V5U2VxdWVuY2UpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGhvdmVyIGVmZmVjdHNcbiAgICBzaG9ydGN1dC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgc2hvcnRjdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMTU2LCAxNjMsIDE3NSwgMC4yKSc7XG4gICAgICBzaG9ydGN1dC5zdHlsZS5jb2xvciA9ICcjZDFkNWRiJzsgLy8gR3JheS0zMDBcbiAgICB9KTtcblxuICAgIHNob3J0Y3V0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICBzaG9ydGN1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcbiAgICAgIHNob3J0Y3V0LnN0eWxlLmNvbG9yID0gJyM5Y2EzYWYnOyAvLyBHcmF5LTQwMFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIHRpdGxlIGZvciBhY2Nlc3NpYmlsaXR5XG4gICAgc2hvcnRjdXQudGl0bGUgPSBgQ2xpY2sgdG8gc2VuZDogJHt0aGlzLnNob3J0Y3V0LmtleVNlcXVlbmNlfWA7XG5cbiAgICByZXR1cm4gc2hvcnRjdXQ7XG4gIH1cblxuICBwcml2YXRlIGlzSW5zaWRlQ2xpY2thYmxlKGVsZW1lbnQ6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICBsZXQgY3VycmVudDogRWxlbWVudCB8IG51bGwgPSBlbGVtZW50O1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKGN1cnJlbnQudGFnTmFtZSA9PT0gJ0EnICYmIGN1cnJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZXJtaW5hbC1saW5rJykpIHx8XG4gICAgICAgIChjdXJyZW50LnRhZ05hbWUgPT09ICdTUEFOJyAmJiBjdXJyZW50LmNsYXNzTGlzdC5jb250YWlucyhURVJNSU5BTF9TSE9SVENVVF9DTEFTUykpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGFzIGRlZmF1bHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG5leHBvcnQgY29uc3QgS2V5Ym9hcmRTaG9ydGN1dEhpZ2hsaWdodGVyID0ge1xuICBwcm9jZXNzS2V5Ym9hcmRTaG9ydGN1dHMsXG59O1xuIiwgIi8qKlxuICogVGVybWluYWwgcHJlZmVyZW5jZXMgbWFuYWdlbWVudFxuICogSGFuZGxlcyBzYXZpbmcgYW5kIGxvYWRpbmcgdGVybWluYWwtcmVsYXRlZCB1c2VyIHByZWZlcmVuY2VzXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZGV0ZWN0TW9iaWxlIH0gZnJvbSAnLi9tb2JpbGUtdXRpbHMuanMnO1xuaW1wb3J0IHR5cGUgeyBUZXJtaW5hbFRoZW1lSWQgfSBmcm9tICcuL3Rlcm1pbmFsLXRoZW1lcy5qcyc7XG5cbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcigndGVybWluYWwtcHJlZmVyZW5jZXMnKTtcblxuZXhwb3J0IGludGVyZmFjZSBUZXJtaW5hbFByZWZlcmVuY2VzIHtcbiAgbWF4Q29sczogbnVtYmVyOyAvLyAwIG1lYW5zIG5vIGxpbWl0LCBwb3NpdGl2ZSBudW1iZXJzIHNldCBtYXggd2lkdGhcbiAgZm9udFNpemU6IG51bWJlcjtcbiAgZml0SG9yaXpvbnRhbGx5OiBib29sZWFuO1xuICB0aGVtZTogVGVybWluYWxUaGVtZUlkO1xufVxuXG4vLyBDb21tb24gdGVybWluYWwgd2lkdGhzXG5leHBvcnQgY29uc3QgQ09NTU9OX1RFUk1JTkFMX1dJRFRIUyA9IFtcbiAgeyB2YWx1ZTogMCwgbGFiZWw6ICdcdTIyMUUnLCBkZXNjcmlwdGlvbjogJ1VubGltaXRlZCAoZnVsbCB3aWR0aCknIH0sXG4gIHsgdmFsdWU6IDgwLCBsYWJlbDogJzgwJywgZGVzY3JpcHRpb246ICdDbGFzc2ljIHRlcm1pbmFsJyB9LFxuICB7IHZhbHVlOiAxMDAsIGxhYmVsOiAnMTAwJywgZGVzY3JpcHRpb246ICdNb2Rlcm4gc3RhbmRhcmQnIH0sXG4gIHsgdmFsdWU6IDEyMCwgbGFiZWw6ICcxMjAnLCBkZXNjcmlwdGlvbjogJ1dpZGUgdGVybWluYWwnIH0sXG4gIHsgdmFsdWU6IDEzMiwgbGFiZWw6ICcxMzInLCBkZXNjcmlwdGlvbjogJ01haW5mcmFtZSB3aWR0aCcgfSxcbiAgeyB2YWx1ZTogMTYwLCBsYWJlbDogJzE2MCcsIGRlc2NyaXB0aW9uOiAnVWx0cmEtd2lkZScgfSxcbl0gYXMgY29uc3Q7XG5cbmNvbnN0IERFRkFVTFRfUFJFRkVSRU5DRVM6IFRlcm1pbmFsUHJlZmVyZW5jZXMgPSB7XG4gIG1heENvbHM6IDAsIC8vIE5vIGxpbWl0IGJ5IGRlZmF1bHQgLSB0YWtlIGFzIG11Y2ggYXMgcG9zc2libGVcbiAgZm9udFNpemU6IGRldGVjdE1vYmlsZSgpID8gMTIgOiAxNCwgLy8gMTJweCBvbiBtb2JpbGUsIDE0cHggb24gZGVza3RvcFxuICBmaXRIb3Jpem9udGFsbHk6IGZhbHNlLFxuICB0aGVtZTogJ2RyYWN1bGEnLFxufTtcblxuY29uc3QgU1RPUkFHRV9LRVlfVEVSTUlOQUxfUFJFRlMgPSAndmliZXR1bm5lbF90ZXJtaW5hbF9wcmVmZXJlbmNlcyc7XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbFByZWZlcmVuY2VzTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBUZXJtaW5hbFByZWZlcmVuY2VzTWFuYWdlcjtcbiAgcHJpdmF0ZSBwcmVmZXJlbmNlczogVGVybWluYWxQcmVmZXJlbmNlcztcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucHJlZmVyZW5jZXMgPSB0aGlzLmxvYWRQcmVmZXJlbmNlcygpO1xuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFRlcm1pbmFsUHJlZmVyZW5jZXNNYW5hZ2VyIHtcbiAgICBpZiAoIVRlcm1pbmFsUHJlZmVyZW5jZXNNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBUZXJtaW5hbFByZWZlcmVuY2VzTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBUZXJtaW5hbFByZWZlcmVuY2VzTWFuYWdlcigpO1xuICAgIH1cbiAgICByZXR1cm4gVGVybWluYWxQcmVmZXJlbmNlc01hbmFnZXIuaW5zdGFuY2U7XG4gIH1cblxuICBwcml2YXRlIGxvYWRQcmVmZXJlbmNlcygpOiBUZXJtaW5hbFByZWZlcmVuY2VzIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWV9URVJNSU5BTF9QUkVGUyk7XG4gICAgICBpZiAoc2F2ZWQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzYXZlZCk7XG4gICAgICAgIC8vIE1lcmdlIHdpdGggZGVmYXVsdHMgdG8gaGFuZGxlIG5ldyBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4uREVGQVVMVF9QUkVGRVJFTkNFUywgLi4ucGFyc2VkIH07XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnTG9hZGVkIHRlcm1pbmFsIHByZWZlcmVuY2VzOicsIG1lcmdlZCk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gbG9hZCB0ZXJtaW5hbCBwcmVmZXJlbmNlcycsIHsgZXJyb3IgfSk7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgZGVmYXVsdCB0ZXJtaW5hbCBwcmVmZXJlbmNlcycpO1xuICAgIHJldHVybiB7IC4uLkRFRkFVTFRfUFJFRkVSRU5DRVMgfTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZVByZWZlcmVuY2VzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b1NhdmUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByZWZlcmVuY2VzKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZX1RFUk1JTkFMX1BSRUZTLCB0b1NhdmUpO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdTYXZlZCB0ZXJtaW5hbCBwcmVmZXJlbmNlcyB0byBsb2NhbFN0b3JhZ2UnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBzYXZlIHRlcm1pbmFsIHByZWZlcmVuY2VzJywgeyBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICBnZXRNYXhDb2xzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucHJlZmVyZW5jZXMubWF4Q29scztcbiAgfVxuXG4gIHNldE1heENvbHMobWF4Q29sczogbnVtYmVyKSB7XG4gICAgdGhpcy5wcmVmZXJlbmNlcy5tYXhDb2xzID0gTWF0aC5tYXgoMCwgbWF4Q29scyk7IC8vIEVuc3VyZSBub24tbmVnYXRpdmVcbiAgICB0aGlzLnNhdmVQcmVmZXJlbmNlcygpO1xuICB9XG5cbiAgZ2V0Rm9udFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5wcmVmZXJlbmNlcy5mb250U2l6ZTtcbiAgfVxuXG4gIHNldEZvbnRTaXplKGZvbnRTaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLnByZWZlcmVuY2VzLmZvbnRTaXplID0gTWF0aC5tYXgoOCwgTWF0aC5taW4oMzIsIGZvbnRTaXplKSk7IC8vIFJlYXNvbmFibGUgYm91bmRzXG4gICAgdGhpcy5zYXZlUHJlZmVyZW5jZXMoKTtcbiAgfVxuXG4gIGdldEZpdEhvcml6b250YWxseSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wcmVmZXJlbmNlcy5maXRIb3Jpem9udGFsbHk7XG4gIH1cblxuICBzZXRGaXRIb3Jpem9udGFsbHkoZml0SG9yaXpvbnRhbGx5OiBib29sZWFuKSB7XG4gICAgdGhpcy5wcmVmZXJlbmNlcy5maXRIb3Jpem9udGFsbHkgPSBmaXRIb3Jpem9udGFsbHk7XG4gICAgdGhpcy5zYXZlUHJlZmVyZW5jZXMoKTtcbiAgfVxuXG4gIGdldFRoZW1lKCk6IFRlcm1pbmFsVGhlbWVJZCB7XG4gICAgcmV0dXJuIHRoaXMucHJlZmVyZW5jZXMudGhlbWU7XG4gIH1cblxuICBzZXRUaGVtZSh0aGVtZTogVGVybWluYWxUaGVtZUlkKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdTZXR0aW5nIHRlcm1pbmFsIHRoZW1lOicsIHRoZW1lKTtcbiAgICB0aGlzLnByZWZlcmVuY2VzLnRoZW1lID0gdGhlbWU7XG4gICAgdGhpcy5zYXZlUHJlZmVyZW5jZXMoKTtcbiAgfVxuXG4gIGdldFByZWZlcmVuY2VzKCk6IFRlcm1pbmFsUHJlZmVyZW5jZXMge1xuICAgIHJldHVybiB7IC4uLnRoaXMucHJlZmVyZW5jZXMgfTtcbiAgfVxuXG4gIHJlc2V0VG9EZWZhdWx0cygpIHtcbiAgICB0aGlzLnByZWZlcmVuY2VzID0geyAuLi5ERUZBVUxUX1BSRUZFUkVOQ0VTIH07XG4gICAgdGhpcy5zYXZlUHJlZmVyZW5jZXMoKTtcbiAgfVxufVxuIiwgIi8qKlxuICogTW9iaWxlIGRldmljZSBkZXRlY3Rpb24gdXRpbGl0aWVzXG4gKiBQcm92aWRlcyBjb25zaXN0ZW50IG1vYmlsZSBkZXRlY3Rpb24gYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxuICovXG5cbi8qKlxuICogRGV0ZWN0IGlmIHRoZSBjdXJyZW50IGRldmljZSBpcyBhIG1vYmlsZSBkZXZpY2UgKHBob25lIG9yIHRhYmxldCkuXG4gKiBVc2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGluZGV4Lmh0bWwgZm9yIGNvbnNpc3RlbmN5LlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRldmljZSBpcyBtb2JpbGUgKGlQaG9uZSwgaVBhZCwgaVBvZCwgQW5kcm9pZClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdE1vYmlsZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fFxuICAgICghIW5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyAmJiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAxKVxuICApO1xufVxuXG4vKipcbiAqIERldGVjdCBpZiB0aGUgY3VycmVudCBkZXZpY2UgaXMgcnVubmluZyBpT1MuXG4gKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZGV2aWNlIGlzIHJ1bm5pbmcgaU9TXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0lPUygpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xufVxuXG4vKipcbiAqIERldGVjdCBpZiB0aGUgY3VycmVudCBkZXZpY2UgaXMgcnVubmluZyBBbmRyb2lkLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRldmljZSBpcyBydW5uaW5nIEFuZHJvaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW5kcm9pZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIG1vYmlsZSBwbGF0Zm9ybSB0eXBlLlxuICpcbiAqIEByZXR1cm5zICdpb3MnIHwgJ2FuZHJvaWQnIHwgJ290aGVyJyB8ICdkZXNrdG9wJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9iaWxlUGxhdGZvcm0oKTogJ2lvcycgfCAnYW5kcm9pZCcgfCAnb3RoZXInIHwgJ2Rlc2t0b3AnIHtcbiAgaWYgKCFkZXRlY3RNb2JpbGUoKSkge1xuICAgIHJldHVybiAnZGVza3RvcCc7XG4gIH1cblxuICBpZiAoaXNJT1MoKSkge1xuICAgIHJldHVybiAnaW9zJztcbiAgfVxuXG4gIGlmIChpc0FuZHJvaWQoKSkge1xuICAgIHJldHVybiAnYW5kcm9pZCc7XG4gIH1cblxuICByZXR1cm4gJ290aGVyJztcbn1cbiIsICJleHBvcnQgdHlwZSBUZXJtaW5hbFRoZW1lSWQgPSAnYXV0bycgfCAnbGlnaHQnIHwgJ2RhcmsnIHwgJ3ZzY29kZS1kYXJrJyB8ICdkcmFjdWxhJyB8ICdub3JkJztcblxuZXhwb3J0IGludGVyZmFjZSBUZXJtaW5hbFRoZW1lIHtcbiAgaWQ6IFRlcm1pbmFsVGhlbWVJZDtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb2xvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbmV4cG9ydCBjb25zdCBURVJNSU5BTF9USEVNRVM6IFRlcm1pbmFsVGhlbWVbXSA9IFtcbiAge1xuICAgIGlkOiAnYXV0bycsXG4gICAgbmFtZTogJ0F1dG8nLFxuICAgIGRlc2NyaXB0aW9uOiAnRm9sbG93IHN5c3RlbSB0aGVtZScsXG4gICAgY29sb3JzOiB7fSwgLy8gQWN0dWFsIGNvbG9ycyBkZXRlcm1pbmVkIGF0IHJ1bnRpbWVcbiAgfSxcbiAge1xuICAgIGlkOiAnZGFyaycsXG4gICAgbmFtZTogJ0RhcmsnLFxuICAgIGRlc2NyaXB0aW9uOiAnVmliZVR1bm5lbCBkZWZhdWx0IGRhcmsnLFxuICAgIGNvbG9yczoge1xuICAgICAgYmFja2dyb3VuZDogJyMxZTFlMWUnLFxuICAgICAgZm9yZWdyb3VuZDogJyNkNGQ0ZDQnLFxuICAgICAgY3Vyc29yOiAncmdiKHZhcigtLWNvbG9yLXByaW1hcnkpKScsXG4gICAgICBjdXJzb3JBY2NlbnQ6ICcjMWUxZTFlJyxcbiAgICAgIGJsYWNrOiAnIzAwMDAwMCcsXG4gICAgICByZWQ6ICcjY2QwMDAwJyxcbiAgICAgIGdyZWVuOiAnIzAwY2QwMCcsXG4gICAgICB5ZWxsb3c6ICcjY2RjZDAwJyxcbiAgICAgIGJsdWU6ICcjMDAwMGVlJyxcbiAgICAgIG1hZ2VudGE6ICcjY2QwMGNkJyxcbiAgICAgIGN5YW46ICcjMDBjZGNkJyxcbiAgICAgIHdoaXRlOiAnI2U1ZTVlNScsXG4gICAgICBicmlnaHRCbGFjazogJyM3ZjdmN2YnLFxuICAgICAgYnJpZ2h0UmVkOiAnI2ZmMDAwMCcsXG4gICAgICBicmlnaHRHcmVlbjogJyMwMGZmMDAnLFxuICAgICAgYnJpZ2h0WWVsbG93OiAnI2ZmZmYwMCcsXG4gICAgICBicmlnaHRCbHVlOiAnIzVjNWNmZicsXG4gICAgICBicmlnaHRNYWdlbnRhOiAnI2ZmMDBmZicsXG4gICAgICBicmlnaHRDeWFuOiAnIzAwZmZmZicsXG4gICAgICBicmlnaHRXaGl0ZTogJyNmZmZmZmYnLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2xpZ2h0JyxcbiAgICBuYW1lOiAnTGlnaHQnLFxuICAgIGRlc2NyaXB0aW9uOiAnU29mdCBsaWdodCB0aGVtZScsXG4gICAgY29sb3JzOiB7XG4gICAgICBiYWNrZ3JvdW5kOiAnI2Y4ZjlmYScsXG4gICAgICBmb3JlZ3JvdW5kOiAnIzFmMjMyOCcsXG4gICAgICBjdXJzb3I6ICdyZ2IodmFyKC0tY29sb3ItcHJpbWFyeSkpJyxcbiAgICAgIGN1cnNvckFjY2VudDogJyNmOGY5ZmEnLFxuICAgICAgYmxhY2s6ICcjMjQyOTJmJyxcbiAgICAgIHJlZDogJyNjZjIyMmUnLFxuICAgICAgZ3JlZW46ICcjMWE3ZjM3JyxcbiAgICAgIHllbGxvdzogJyM5YTY3MDAnLFxuICAgICAgYmx1ZTogJyMwOTY5ZGEnLFxuICAgICAgbWFnZW50YTogJyM4MjUwZGYnLFxuICAgICAgY3lhbjogJyMxYjdjODMnLFxuICAgICAgd2hpdGU6ICcjNmU3NzgxJyxcbiAgICAgIGJyaWdodEJsYWNrOiAnIzU3NjA2YScsXG4gICAgICBicmlnaHRSZWQ6ICcjZGEzNjMzJyxcbiAgICAgIGJyaWdodEdyZWVuOiAnIzJkYTQ0ZScsXG4gICAgICBicmlnaHRZZWxsb3c6ICcjYmY4NzAwJyxcbiAgICAgIGJyaWdodEJsdWU6ICcjMjE4YmZmJyxcbiAgICAgIGJyaWdodE1hZ2VudGE6ICcjYTQ3NWY5JyxcbiAgICAgIGJyaWdodEN5YW46ICcjMzE5MmFhJyxcbiAgICAgIGJyaWdodFdoaXRlOiAnIzhjOTU5ZicsXG4gICAgICBzZWxlY3Rpb25CYWNrZ3JvdW5kOiAnIzA5NjlkYScsXG4gICAgICBzZWxlY3Rpb25Gb3JlZ3JvdW5kOiAnI2ZmZmZmZicsXG4gICAgICBzZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmQ6ICcjZTFlNGU4JyxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgaWQ6ICd2c2NvZGUtZGFyaycsXG4gICAgbmFtZTogJ1ZTIENvZGUgRGFyaycsXG4gICAgZGVzY3JpcHRpb246ICdQb3B1bGFyIHRoZW1lIGZyb20gVmlzdWFsIFN0dWRpbyBDb2RlJyxcbiAgICBjb2xvcnM6IHtcbiAgICAgIGJhY2tncm91bmQ6ICcjMUUxRTFFJyxcbiAgICAgIGZvcmVncm91bmQ6ICcjRDRENEQ0JyxcbiAgICAgIGN1cnNvcjogJyNBRUFGQUQnLFxuICAgICAgY3Vyc29yQWNjZW50OiAnIzFFMUUxRScsXG4gICAgICBibGFjazogJyMwMDAwMDAnLFxuICAgICAgcmVkOiAnI0NEMzEzMScsXG4gICAgICBncmVlbjogJyMwREJDNzknLFxuICAgICAgeWVsbG93OiAnI0U1RTUxMCcsXG4gICAgICBibHVlOiAnIzI0NzJDOCcsXG4gICAgICBtYWdlbnRhOiAnI0JDM0ZCQycsXG4gICAgICBjeWFuOiAnIzExQThDRCcsXG4gICAgICB3aGl0ZTogJyNFNUU1RTUnLFxuICAgICAgYnJpZ2h0QmxhY2s6ICcjNjY2NjY2JyxcbiAgICAgIGJyaWdodFJlZDogJyNGMTRDNEMnLFxuICAgICAgYnJpZ2h0R3JlZW46ICcjMjNEMThCJyxcbiAgICAgIGJyaWdodFllbGxvdzogJyNGNUY1NDMnLFxuICAgICAgYnJpZ2h0Qmx1ZTogJyMzQjhFRUEnLFxuICAgICAgYnJpZ2h0TWFnZW50YTogJyNENjcwRDYnLFxuICAgICAgYnJpZ2h0Q3lhbjogJyMyOUI4REInLFxuICAgICAgYnJpZ2h0V2hpdGU6ICcjRkZGRkZGJyxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgaWQ6ICdkcmFjdWxhJyxcbiAgICBuYW1lOiAnRHJhY3VsYScsXG4gICAgZGVzY3JpcHRpb246ICdDbGFzc2ljIGRhcmsgdGhlbWUnLFxuICAgIGNvbG9yczoge1xuICAgICAgYmFja2dyb3VuZDogJyMyODJBMzYnLFxuICAgICAgZm9yZWdyb3VuZDogJyNGOEY4RjInLFxuICAgICAgY3Vyc29yOiAnI0Y4RjhGMicsXG4gICAgICBjdXJzb3JBY2NlbnQ6ICcjMjgyQTM2JyxcbiAgICAgIGJsYWNrOiAnIzIxMjIyQycsXG4gICAgICByZWQ6ICcjRkY1NTU1JyxcbiAgICAgIGdyZWVuOiAnIzUwRkE3QicsXG4gICAgICB5ZWxsb3c6ICcjRjFGQThDJyxcbiAgICAgIGJsdWU6ICcjQkQ5M0Y5JyxcbiAgICAgIG1hZ2VudGE6ICcjRkY3OUM2JyxcbiAgICAgIGN5YW46ICcjOEJFOUZEJyxcbiAgICAgIHdoaXRlOiAnI0Y4RjhGMicsXG4gICAgICBicmlnaHRCbGFjazogJyM2MjcyQTQnLFxuICAgICAgYnJpZ2h0UmVkOiAnI0ZGNkU2RScsXG4gICAgICBicmlnaHRHcmVlbjogJyM2OUZGOTQnLFxuICAgICAgYnJpZ2h0WWVsbG93OiAnI0ZGRkZBNScsXG4gICAgICBicmlnaHRCbHVlOiAnI0Q2QUNGRicsXG4gICAgICBicmlnaHRNYWdlbnRhOiAnI0ZGOTJERicsXG4gICAgICBicmlnaHRDeWFuOiAnI0E0RkZGRicsXG4gICAgICBicmlnaHRXaGl0ZTogJyNGRkZGRkYnLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ25vcmQnLFxuICAgIG5hbWU6ICdOb3JkJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FyY3RpYyBub3J0aC1ibHVpc2ggcGFsZXR0ZScsXG4gICAgY29sb3JzOiB7XG4gICAgICBiYWNrZ3JvdW5kOiAnIzJFMzQ0MCcsXG4gICAgICBmb3JlZ3JvdW5kOiAnI0Q4REVFOScsXG4gICAgICBjdXJzb3I6ICcjRDhERUU5JyxcbiAgICAgIGN1cnNvckFjY2VudDogJyMyRTM0NDAnLFxuICAgICAgYmxhY2s6ICcjM0I0MjUyJyxcbiAgICAgIHJlZDogJyNCRjYxNkEnLFxuICAgICAgZ3JlZW46ICcjQTNCRThDJyxcbiAgICAgIHllbGxvdzogJyNFQkNCOEInLFxuICAgICAgYmx1ZTogJyM4MUExQzEnLFxuICAgICAgbWFnZW50YTogJyNCNDhFQUQnLFxuICAgICAgY3lhbjogJyM4OEMwRDAnLFxuICAgICAgd2hpdGU6ICcjRTVFOUYwJyxcbiAgICAgIGJyaWdodEJsYWNrOiAnIzRDNTY2QScsXG4gICAgICBicmlnaHRSZWQ6ICcjQkY2MTZBJyxcbiAgICAgIGJyaWdodEdyZWVuOiAnI0EzQkU4QycsXG4gICAgICBicmlnaHRZZWxsb3c6ICcjRUJDQjhCJyxcbiAgICAgIGJyaWdodEJsdWU6ICcjODFBMUMxJyxcbiAgICAgIGJyaWdodE1hZ2VudGE6ICcjQjQ4RUFEJyxcbiAgICAgIGJyaWdodEN5YW46ICcjOEZCQ0JCJyxcbiAgICAgIGJyaWdodFdoaXRlOiAnI0VDRUZGNCcsXG4gICAgfSxcbiAgfSxcbl07XG4iLCAiLyoqXG4gKiBUaGVtZSBkZXRlY3Rpb24gdXRpbGl0aWVzXG4gKi9cblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IGVmZmVjdGl2ZSB0aGVtZSAobGlnaHQgb3IgZGFyaylcbiAqIEhhbmRsZXMgYm90aCBleHBsaWNpdCB0aGVtZSBzZXR0aW5nIGFuZCBzeXN0ZW0gcHJlZmVyZW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRoZW1lKCk6ICdsaWdodCcgfCAnZGFyaycge1xuICBjb25zdCBleHBsaWNpdFRoZW1lID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScpO1xuXG4gIGlmIChleHBsaWNpdFRoZW1lID09PSAnZGFyaycpIHJldHVybiAnZGFyayc7XG4gIGlmIChleHBsaWNpdFRoZW1lID09PSAnbGlnaHQnKSByZXR1cm4gJ2xpZ2h0JztcblxuICAvLyBObyBleHBsaWNpdCB0aGVtZSBzZXQsIHVzZSBzeXN0ZW0gcHJlZmVyZW5jZVxuICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzID8gJ2RhcmsnIDogJ2xpZ2h0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgZWZmZWN0aXZlIHRoZW1lIGlzIGRhcmsgbW9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEYXJrTW9kZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdldEN1cnJlbnRUaGVtZSgpID09PSAnZGFyayc7XG59XG5cbi8qKlxuICogR2V0cyBhIGNvbG9yIHZhbHVlIGJhc2VkIG9uIGN1cnJlbnQgdGhlbWVcbiAqIEBwYXJhbSBsaWdodENvbG9yIENvbG9yIHRvIHVzZSBpbiBsaWdodCBtb2RlXG4gKiBAcGFyYW0gZGFya0NvbG9yIENvbG9yIHRvIHVzZSBpbiBkYXJrIG1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZW1lQ29sb3IobGlnaHRDb2xvcjogc3RyaW5nLCBkYXJrQ29sb3I6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBpc0RhcmtNb2RlKCkgPyBkYXJrQ29sb3IgOiBsaWdodENvbG9yO1xufVxuXG4vKipcbiAqIEdldHMgVVJMLWVuY29kZWQgY29sb3IgZm9yIFNWRyBiYXNlZCBvbiBjdXJyZW50IHRoZW1lXG4gKiBAcGFyYW0gbGlnaHRDb2xvciBDb2xvciB0byB1c2UgaW4gbGlnaHQgbW9kZSAod2lsbCBiZSBVUkwtZW5jb2RlZClcbiAqIEBwYXJhbSBkYXJrQ29sb3IgQ29sb3IgdG8gdXNlIGluIGRhcmsgbW9kZSAod2lsbCBiZSBVUkwtZW5jb2RlZClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRoZW1lQ29sb3JFbmNvZGVkKGxpZ2h0Q29sb3I6IHN0cmluZywgZGFya0NvbG9yOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBjb2xvciA9IGdldFRoZW1lQ29sb3IobGlnaHRDb2xvciwgZGFya0NvbG9yKTtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChjb2xvcik7XG59XG5cbi8qKlxuICogR2V0cyBhIENTUyBjdXN0b20gcHJvcGVydHkgdmFsdWUgYXMgUkdCIGNvbG9yXG4gKiBAcGFyYW0gcHJvcGVydHkgQ1NTIGN1c3RvbSBwcm9wZXJ0eSBuYW1lICh3aXRob3V0IC0tKVxuICovXG5mdW5jdGlvbiBnZXRDU1NDb2xvckFzSGV4KHByb3BlcnR5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcbiAgICAuZ2V0UHJvcGVydHlWYWx1ZShgLS1jb2xvci0ke3Byb3BlcnR5fWApXG4gICAgLnRyaW0oKTtcblxuICBpZiAoIXJnYikgcmV0dXJuICcjMDAwMDAwJzsgLy8gZmFsbGJhY2tcblxuICAvLyBDb252ZXJ0IFwiciBnIGJcIiBmb3JtYXQgdG8gaGV4XG4gIGNvbnN0IFtyLCBnLCBiXSA9IHJnYi5zcGxpdCgnICcpLm1hcCgobikgPT4gTnVtYmVyLnBhcnNlSW50KG4sIDEwKSk7XG4gIHJldHVybiBgIyR7ci50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKX0ke2cudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyl9JHtiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5cbi8qKlxuICogR2V0cyBVUkwtZW5jb2RlZCB0ZXh0IGNvbG9yIGZvciBTVkcgYXJyb3dzIGJhc2VkIG9uIGN1cnJlbnQgdGhlbWVcbiAqIFVzZXMgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBjb25zaXN0ZW50IHRoZW1pbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHRDb2xvckVuY29kZWQoKTogc3RyaW5nIHtcbiAgY29uc3QgY29sb3IgPSBnZXRDU1NDb2xvckFzSGV4KCd0ZXh0Jyk7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoY29sb3IpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtZWRpYSBxdWVyeSBsaXN0ZW5lciBmb3Igc3lzdGVtIHRoZW1lIGNoYW5nZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbVRoZW1lTGlzdGVuZXIoY2FsbGJhY2s6IChpc0Rhcms6IGJvb2xlYW4pID0+IHZvaWQpOiBNZWRpYVF1ZXJ5TGlzdCB7XG4gIGNvbnN0IG1lZGlhUXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpO1xuICBtZWRpYVF1ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiBjYWxsYmFjayhlLm1hdGNoZXMpKTtcbiAgcmV0dXJuIG1lZGlhUXVlcnk7XG59XG4iLCAiLyoqXG4gKiBVUkwgSGlnaGxpZ2h0ZXIgdXRpbGl0eSBmb3IgRE9NIHRlcm1pbmFsXG4gKlxuICogSGFuZGxlcyBkZXRlY3Rpb24gYW5kIGhpZ2hsaWdodGluZyBvZiBVUkxzIGluIHRlcm1pbmFsIGNvbnRlbnQsXG4gKiBpbmNsdWRpbmcgbXVsdGktbGluZSBVUkxzIHRoYXQgc3BhbiBhY3Jvc3MgdGVybWluYWwgbGluZXMuXG4gKi9cblxuLy8gQ29uc3RhbnRzXG5jb25zdCBNSU5fVVJMX0xFTkdUSCA9IDc7XG5jb25zdCBNQVhfVVJMX0xFTkdUSCA9IDIwNDg7XG5jb25zdCBVUkxfUFJPVE9DT0xTID0gWydodHRwczovLycsICdodHRwOi8vJywgJ2ZpbGU6Ly8nXSBhcyBjb25zdDtcbmNvbnN0IFRFUk1JTkFMX0xJTktfQ0xBU1MgPSAndGVybWluYWwtbGluayc7XG5cbi8vIENvbXBpbGVkIHJlZ2V4IHBhdHRlcm5zIChjcmVhdGVkIG9uY2UgZm9yIHBlcmZvcm1hbmNlKVxuY29uc3QgVVJMX1NUQVJUX1BBVFRFUk4gPSAvaHR0cHM/OlxcL1xcL3xmaWxlOlxcL1xcLy9nO1xuY29uc3QgUEFSVElBTF9QUk9UT0NPTF9QQVRURVJOID1cbiAgLyhefFxccykoaHxodHxodHR8aHR0cHxodHRwc3xodHRwczp8aHR0cHM6XFwvfGh0dHBzOlxcL1xcL3xmfGZpfGZpbHxmaWxlfGZpbGU6fGZpbGU6XFwvfGZpbGU6XFwvXFwvKSQvO1xuY29uc3QgRE9NQUlOX1NUQVJUX1BBVFRFUk4gPSAvXlthLXpBLVowLTlbXFxdLi1dLztcbmNvbnN0IFBBVEhfU1RBUlRfUEFUVEVSTiA9IC9eWy9hLXpBLVowLTlbXFxdLi1dLztcbmNvbnN0IFVSTF9FTkRfQ0hBUlNfUEFUVEVSTiA9IC9bXlxcd1xcLS5ffjovPyNbXFxdQCEkJicoKSorLDs9JXt9fFxcXFxeYF0vO1xuLy8gUGF0dGVybiBicmVha2Rvd246XG4vLyAtIGh0dHBzPzpcXC9cXC8gLSBIVFRQIG9yIEhUVFBTIHByb3RvY29sXG4vLyAtIEhvc3Qgb3B0aW9uczpcbi8vICAgLSBsb2NhbGhvc3QgLSBsaXRlcmFsIGxvY2FsaG9zdFxuLy8gICAtIFtcXGQuXSsgLSBJUHY0IGFkZHJlc3Nlc1xuLy8gICAtIFxcW1tcXGRhLWZBLUY6XStcXF0gLSBJUHY2IGFkZHJlc3NlcyBpbiBicmFja2V0c1xuLy8gICAtIERvbWFpbiBuYW1lczogTXVzdCBoYXZlIGF0IGxlYXN0IGRvbWFpbi50bGQgc3RydWN0dXJlXG4vLyAgICAgLSBPcHRpb25hbCBzdWJkb21haW5zOiAoW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dKlthLXpBLVowLTldKT9cXC4pKlxuLy8gICAgIC0gUmVxdWlyZWQgZG9tYWluOiBbYS16QS1aMC05XShbYS16QS1aMC05LV0qW2EtekEtWjAtOV0pP1xuLy8gICAgIC0gUmVxdWlyZWQgZG90IGFuZCBUTEQ6IFxcLlthLXpBLVpdK1xuLy8gLSAoOlxcZCspPyAtIE9wdGlvbmFsIHBvcnQgbnVtYmVyXG4vLyAtIC4qIC0gQW55IHBhdGgvcXVlcnkvZnJhZ21lbnRcbi8vIC0gZmlsZTpcXC9cXC8uKyAtIEZpbGUgcHJvdG9jb2wgd2l0aCBhbnkgcGF0aFxuY29uc3QgTE9DQUxIT1NUX1BBVFRFUk4gPVxuICAvXihodHRwcz86XFwvXFwvKGxvY2FsaG9zdHxbXFxkLl0rfFxcW1tcXGRhLWZBLUY6XStcXF18KChbYS16QS1aMC05XShbYS16QS1aMC05LV0qW2EtekEtWjAtOV0pP1xcLikqW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dKlthLXpBLVowLTldKT9cXC5bYS16QS1aXSspKSg6XFxkKyk/Lip8ZmlsZTpcXC9cXC8uKykvO1xuXG4vLyBQYXR0ZXJuIHRvIHZhbGlkYXRlIGluZGl2aWR1YWwgZG9tYWluIGxhYmVsc1xuY29uc3QgVkFMSURfRE9NQUlOX0xBQkVMID0gL15bYS16QS1aMC05XShbYS16QS1aMC05LV0qW2EtekEtWjAtOV0pPyQvO1xuXG50eXBlIFByb2Nlc3NlZFJhbmdlID0ge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbn07XG5cbi8qKlxuICogTWFpbiBlbnRyeSBwb2ludCAtIHByb2Nlc3MgYWxsIGxpbmtzIGluIGEgY29udGFpbmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTGlua3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICBjb25zdCBwcm9jZXNzb3IgPSBuZXcgTGlua1Byb2Nlc3Nvcihjb250YWluZXIpO1xuICBwcm9jZXNzb3IucHJvY2VzcygpO1xufVxuXG4vKipcbiAqIExpbmtQcm9jZXNzb3IgY2xhc3MgZW5jYXBzdWxhdGVzIHRoZSBVUkwgZGV0ZWN0aW9uIGFuZCBoaWdobGlnaHRpbmcgbG9naWNcbiAqL1xuY2xhc3MgTGlua1Byb2Nlc3NvciB7XG4gIC8vIGJpb21lLWlnbm9yZSBsaW50L2NvcnJlY3RuZXNzL25vVW51c2VkUHJpdmF0ZUNsYXNzTWVtYmVyczogVXNlZCBpbiBjb25zdHJ1Y3RvclxuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbGluZXM6IE5vZGVMaXN0T2Y8RWxlbWVudD47XG4gIHByaXZhdGUgcHJvY2Vzc2VkUmFuZ2VzOiBNYXA8bnVtYmVyLCBQcm9jZXNzZWRSYW5nZVtdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5saW5lcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGVybWluYWwtbGluZScpO1xuICB9XG5cbiAgcHJvY2VzcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIC8vIFByb2Nlc3MgZWFjaCBsaW5lXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnByb2Nlc3NMaW5lKGkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcHJvY2Vzc0xpbmUobGluZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGxpbmUgY29udGludWVzIGEgVVJMIGZyb20gdGhlIHByZXZpb3VzIGxpbmVcbiAgICBpZiAobGluZUluZGV4ID4gMCkge1xuICAgICAgdGhpcy5jaGVja1ByZXZpb3VzTGluZUNvbnRpbnVhdGlvbihsaW5lSW5kZXgpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgbmV3IFVSTHMgc3RhcnRpbmcgaW4gdGhpcyBsaW5lXG4gICAgdGhpcy5maW5kVXJsc0luTGluZShsaW5lSW5kZXgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1ByZXZpb3VzTGluZUNvbnRpbnVhdGlvbihsaW5lSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lVGV4dCA9IHRoaXMuZ2V0TGluZVRleHQobGluZUluZGV4KTtcbiAgICBjb25zdCBwcmV2TGluZVRleHQgPSB0aGlzLmdldExpbmVUZXh0KGxpbmVJbmRleCAtIDEpO1xuXG4gICAgLy8gVHJ5IHRvIGZpbmQgaW5jb21wbGV0ZSBVUkxzIGF0IHRoZSBlbmQgb2YgdGhlIHByZXZpb3VzIGxpbmVcbiAgICBjb25zdCBpbmNvbXBsZXRlVXJsID0gdGhpcy5maW5kSW5jb21wbGV0ZVVybEF0TGluZUVuZChwcmV2TGluZVRleHQsIGN1cnJlbnRMaW5lVGV4dCk7XG5cbiAgICBpZiAoaW5jb21wbGV0ZVVybCkge1xuICAgICAgY29uc3QgeyBzdGFydFBvcyB9ID0gaW5jb21wbGV0ZVVybDtcblxuICAgICAgLy8gQnVpbGQgdGhlIGNvbXBsZXRlIFVSTFxuICAgICAgY29uc3QgY29tcGxldGVVcmwgPSB0aGlzLmJ1aWxkTXVsdGlMaW5lVXJsKGxpbmVJbmRleCAtIDEsIHN0YXJ0UG9zKTtcblxuICAgICAgaWYgKGNvbXBsZXRlVXJsICYmIHRoaXMuaXNWYWxpZFVybChjb21wbGV0ZVVybC51cmwpKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICAgIGlmICghdGhpcy5pc1JhbmdlUHJvY2Vzc2VkKGxpbmVJbmRleCAtIDEsIHN0YXJ0UG9zLCBjb21wbGV0ZVVybC5lbmRMaW5lKSkge1xuICAgICAgICAgIHRoaXMuY3JlYXRlVXJsTGlua3MoY29tcGxldGVVcmwudXJsLCBsaW5lSW5kZXggLSAxLCBjb21wbGV0ZVVybC5lbmRMaW5lLCBzdGFydFBvcyk7XG4gICAgICAgICAgdGhpcy5tYXJrUmFuZ2VBc1Byb2Nlc3NlZChsaW5lSW5kZXggLSAxLCBjb21wbGV0ZVVybC5lbmRMaW5lLCBzdGFydFBvcywgY29tcGxldGVVcmwudXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmluZEluY29tcGxldGVVcmxBdExpbmVFbmQoXG4gICAgcHJldkxpbmVUZXh0OiBzdHJpbmcsXG4gICAgY3VycmVudExpbmVUZXh0OiBzdHJpbmdcbiAgKTogeyBzdGFydFBvczogbnVtYmVyOyBwcm90b2NvbDogc3RyaW5nIH0gfCBudWxsIHtcbiAgICAvLyBDaGVjayBmb3IgY29tcGxldGUgcHJvdG9jb2wgYXQgbGluZSBlbmRcbiAgICBmb3IgKGNvbnN0IHByb3RvY29sIG9mIFVSTF9QUk9UT0NPTFMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcHJldkxpbmVUZXh0Lmxhc3RJbmRleE9mKHByb3RvY29sKTtcbiAgICAgIGlmIChpbmRleCA+PSAwICYmIHByZXZMaW5lVGV4dC5lbmRzV2l0aChwcm90b2NvbCkpIHtcbiAgICAgICAgLy8gVmVyaWZ5IG5leHQgbGluZSBzdGFydHMgd2l0aCB2YWxpZCBkb21haW4vcGF0aCAoYWZ0ZXIgdHJpbW1pbmcgd2hpdGVzcGFjZSlcbiAgICAgICAgaWYgKERPTUFJTl9TVEFSVF9QQVRURVJOLnRlc3QoY3VycmVudExpbmVUZXh0LnRyaW1TdGFydCgpKSkge1xuICAgICAgICAgIHJldHVybiB7IHN0YXJ0UG9zOiBpbmRleCwgcHJvdG9jb2wgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBwYXJ0aWFsIHByb3RvY29sIGF0IGxpbmUgZW5kXG4gICAgY29uc3QgcGFydGlhbE1hdGNoID0gcHJldkxpbmVUZXh0Lm1hdGNoKFBBUlRJQUxfUFJPVE9DT0xfUEFUVEVSTik7XG4gICAgaWYgKHBhcnRpYWxNYXRjaCkge1xuICAgICAgY29uc3QgcHJvdG9jb2wgPSBwYXJ0aWFsTWF0Y2hbMl07XG4gICAgICBjb25zdCBzdGFydFBvcyA9IChwYXJ0aWFsTWF0Y2guaW5kZXggPz8gMCkgKyAocGFydGlhbE1hdGNoWzFdID8gMSA6IDApO1xuXG4gICAgICBpZiAodGhpcy5pc1ZhbGlkQ29udGludWF0aW9uKHByb3RvY29sLCBjdXJyZW50TGluZVRleHQpKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXJ0UG9zLCBwcm90b2NvbCB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1ZhbGlkQ29udGludWF0aW9uKHBhcnRpYWxQcm90b2NvbDogc3RyaW5nLCBuZXh0TGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFRyaW0gbGVhZGluZyB3aGl0ZXNwYWNlIGZvciB2YWxpZGF0aW9uXG4gICAgY29uc3QgdHJpbW1lZFRleHQgPSBuZXh0TGluZVRleHQudHJpbVN0YXJ0KCk7XG5cbiAgICAvLyBDb21wbGV0ZSBwcm90b2NvbHMgLSBhY2NlcHQgZG9tYWluIG5hbWVzXG4gICAgaWYgKHBhcnRpYWxQcm90b2NvbCA9PT0gJ2h0dHBzOi8vJyB8fCBwYXJ0aWFsUHJvdG9jb2wgPT09ICdmaWxlOi8vJykge1xuICAgICAgcmV0dXJuIERPTUFJTl9TVEFSVF9QQVRURVJOLnRlc3QodHJpbW1lZFRleHQpO1xuICAgIH1cblxuICAgIC8vIFBhcnRpYWwgcHJvdG9jb2wgZW5kaW5nIHdpdGggL1xuICAgIGlmIChwYXJ0aWFsUHJvdG9jb2wuZW5kc1dpdGgoJy8nKSkge1xuICAgICAgcmV0dXJuIFBBVEhfU1RBUlRfUEFUVEVSTi50ZXN0KHRyaW1tZWRUZXh0KTtcbiAgICB9XG5cbiAgICAvLyBQYXJ0aWFsIHByb3RvY29sIHdpdGhvdXQgLyAtIGNoZWNrIGlmIGNvbnRpbnVhdGlvbiBjb21wbGV0ZXMgaXRcbiAgICBjb25zdCBjb21iaW5lZCA9IHBhcnRpYWxQcm90b2NvbCArIHRyaW1tZWRUZXh0O1xuICAgIHJldHVybiAvXihodHRwcz86XFwvXFwvfGZpbGU6XFwvXFwvKS8udGVzdChjb21iaW5lZCk7XG4gIH1cblxuICBwcml2YXRlIGlzVmFsaWRVcmxDb250aW51YXRpb24oY3VycmVudFVybDogc3RyaW5nLCBuZXh0TGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRyaW1tZWROZXh0ID0gbmV4dExpbmVUZXh0LnRyaW1TdGFydCgpO1xuXG4gICAgLy8gRW1wdHkgbGluZSBvciBvbmx5IHdoaXRlc3BhY2UgLSBVUkwgZW5kZWRcbiAgICBpZiAoIXRyaW1tZWROZXh0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgc3RpbGwgYnVpbGRpbmcgdGhlIHByb3RvY29sIHBhcnQsIGNoZWNrIGlmIGNvbnRpbnVhdGlvbiBtYWtlcyBzZW5zZVxuICAgIGlmICghY3VycmVudFVybC5pbmNsdWRlcygnOi8vJykpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjb21iaW5hdGlvbiB3b3VsZCBmb3JtIGEgdmFsaWQgcHJvdG9jb2xcbiAgICAgIGNvbnN0IGNvbWJpbmVkID0gY3VycmVudFVybCArIHRyaW1tZWROZXh0O1xuICAgICAgcmV0dXJuIC9eKGh0dHBzPzp8ZmlsZTp8aHR0cHM/OlxcL3xmaWxlOlxcL3xodHRwcz86XFwvXFwvfGZpbGU6XFwvXFwvKS8udGVzdChjb21iaW5lZCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGN1cnJlbnQgVVJMIGVuZHMgd2l0aCBhIHByb3RvY29sLCBuZXh0IHNob3VsZCBiZSBkb21haW4tbGlrZVxuICAgIGlmIChjdXJyZW50VXJsLm1hdGNoKC8oaHR0cHM/OnxmaWxlOilcXC9cXC8kLykpIHtcbiAgICAgIHJldHVybiBET01BSU5fU1RBUlRfUEFUVEVSTi50ZXN0KHRyaW1tZWROZXh0KTtcbiAgICB9XG5cbiAgICAvLyBGb3IgZXN0YWJsaXNoZWQgVVJMcywgY2hlY2sgaWYgdGhlIG5leHQgbGluZSBjb3VsZCBwbGF1c2libHkgY29udGludWUgdGhlIFVSTFxuICAgIC8vIFRoaXMgaXMgbW9yZSBwZXJtaXNzaXZlIHRvIGhhbmRsZSB2YXJpb3VzIHNwbGl0dGluZyBzY2VuYXJpb3NcblxuICAgIC8vIENvbW1vbiBjYXNlcyB3aGVyZSBVUkxzIGRlZmluaXRlbHkgZG9uJ3QgY29udGludWU6XG4gICAgLy8gLSBMaW5lIHN0YXJ0cyB3aXRoIGNvbW1vbiBub24tVVJMIHdvcmRzXG4gICAgaWYgKFxuICAgICAgL14oYW5kfG9yfGJ1dHx0aGV8aXN8YXJlfHdhc3x3ZXJlfGJlZW58aGF2ZXxoYXN8aGFkfHdpbGx8d291bGR8Y291bGR8c2hvdWxkfG1heXxtaWdodHxjaGVja3x2aXNpdHxnb3xzZWV8Y2xpY2t8b3BlbnxuYXZpZ2F0ZSlcXGIvaS50ZXN0KFxuICAgICAgICB0cmltbWVkTmV4dFxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIExpbmUgc3RhcnRzIHdpdGggc2VudGVuY2UtZW5kaW5nIHB1bmN0dWF0aW9uIChidXQgbm90IGRvbWFpbiBkb3RzKVxuICAgIGlmICgvXlshPztdLy50ZXN0KHRyaW1tZWROZXh0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNwZWNpYWwgY2hlY2sgZm9yIGRvdHMgLSBvbmx5IHJlamVjdCBpZiBmb2xsb3dlZCBieSBzcGFjZSBvciBlbmQgb2YgbGluZVxuICAgIGlmICgvXlxcLihcXHN8JCkvLnRlc3QodHJpbW1lZE5leHQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRm9yIG1vcmUgYWNjdXJhdGUgZGV0ZWN0aW9uLCBjaGVjayBpZiB0aGUgbGluZSBzdGFydHMgd2l0aCBzb21ldGhpbmcgdGhhdCBsb29rcyBsaWtlXG4gICAgLy8gaXQgY291bGQgYmUgcGFydCBvZiBhIFVSTCB2cyByZWd1bGFyIHRleHRcbiAgICBjb25zdCBmaXJzdFdvcmQgPSB0cmltbWVkTmV4dC5zcGxpdCgvXFxzLylbMF07XG5cbiAgICAvLyBJZiB0aGUgZmlyc3Qgd29yZCBjb250YWlucyBVUkwtbGlrZSBwYXR0ZXJucywgaXQgbWlnaHQgY29udGludWVcbiAgICBpZiAoL1svOi5fLV0vLnRlc3QoZmlyc3RXb3JkKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBhbGwgYWxwaGFudW1lcmljIHdpdGggbm8gVVJMLWxpa2UgY2hhcmFjdGVycywgYW5kIGl0J3MgYSBjb21tb24gd29yZCxcbiAgICAvLyBpdCdzIHByb2JhYmx5IG5vdCBhIFVSTCBjb250aW51YXRpb25cbiAgICBpZiAoL15bYS16QS1aXSskLy50ZXN0KGZpcnN0V29yZCkgJiYgZmlyc3RXb3JkLmxlbmd0aCA+IDIpIHtcbiAgICAgIC8vIE1vcmUgZXh0ZW5zaXZlIGxpc3Qgb2YgY29tbW9uIEVuZ2xpc2ggd29yZHMgdGhhdCBzaG91bGRuJ3Qgc3RhcnQgYSBVUkwgY29udGludWF0aW9uXG4gICAgICBjb25zdCBjb21tb25Xb3JkcyA9XG4gICAgICAgIC9eKG5leHR8bGluZXx3aXRofHRleHR8dGhpc3x0aGF0fHRoZW58d2hlbnx3aGVyZXx3aGljaHx3aGlsZXxhZnRlcnxiZWZvcmV8ZHVyaW5nfHNpbmNlfHVudGlsfGFib3ZlfGJlbG93fGJldHdlZW58aW50b3x0aHJvdWdofHVuZGVyfG92ZXJ8YWJvdXR8YWdhaW5zdHxhbW9uZ3xhcm91bmR8YmVoaW5kfGJlc2lkZXxiZXlvbmR8aW5zaWRlfG91dHNpZGV8dG93YXJkfHdpdGhpbnx3aXRob3V0fGFjY29yZGluZ3xhbHRob3VnaHxiZWNhdXNlfGhvd2V2ZXJ8dGhlcmVmb3JlfG1vcmVvdmVyfG5ldmVydGhlbGVzc3xmdXJ0aGVybW9yZXxvdGhlcndpc2V8bWVhbndoaWxlfGluZGVlZHxpbnN0ZWFkfGxpa2V3aXNlfHNpbWlsYXJseXxzcGVjaWZpY2FsbHl8c3Vic2VxdWVudGx5fHVsdGltYXRlbHl8YWRkaXRpb25hbGx5fGNvbnNlcXVlbnRseXxldmVudHVhbGx5fGZpbmFsbHl8aW5pdGlhbGx5fHBhcnRpY3VsYXJseXxwcmV2aW91c2x5fHJlY2VudGx5fHN1ZGRlbmx5fHVzdWFsbHkpL2k7XG4gICAgICByZXR1cm4gIWNvbW1vbldvcmRzLnRlc3QoZmlyc3RXb3JkKTtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UsIGlmIGl0IHN0YXJ0cyB3aXRoIFVSTC1zYWZlIGNoYXJhY3RlcnMsIGl0IG1pZ2h0IGJlIGEgY29udGludWF0aW9uXG4gICAgcmV0dXJuIC9eW2EtekEtWjAtOS5ffjovPyNbXFxdQCEkJicoKSorLDs9JS1dLy50ZXN0KHRyaW1tZWROZXh0KTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZFVybHNJbkxpbmUobGluZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lVGV4dCA9IHRoaXMuZ2V0TGluZVRleHQobGluZUluZGV4KTtcblxuICAgIC8vIFJlc2V0IHRoZSByZWdleFxuICAgIFVSTF9TVEFSVF9QQVRURVJOLmxhc3RJbmRleCA9IDA7XG5cbiAgICBsZXQgbWF0Y2ggPSBVUkxfU1RBUlRfUEFUVEVSTi5leGVjKGxpbmVUZXh0KTtcbiAgICB3aGlsZSAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHVybFN0YXJ0ID0gbWF0Y2guaW5kZXg7XG5cbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICBpZiAodGhpcy5pc1Bvc2l0aW9uUHJvY2Vzc2VkKGxpbmVJbmRleCwgdXJsU3RhcnQpKSB7XG4gICAgICAgIG1hdGNoID0gVVJMX1NUQVJUX1BBVFRFUk4uZXhlYyhsaW5lVGV4dCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBCdWlsZCB0aGUgVVJMIGZyb20gdGhpcyBwb3NpdGlvblxuICAgICAgY29uc3QgY29tcGxldGVVcmwgPSB0aGlzLmJ1aWxkTXVsdGlMaW5lVXJsKGxpbmVJbmRleCwgdXJsU3RhcnQpO1xuXG4gICAgICBpZiAoY29tcGxldGVVcmwgJiYgdGhpcy5pc1ZhbGlkVXJsKGNvbXBsZXRlVXJsLnVybCkpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVVcmxMaW5rcyhjb21wbGV0ZVVybC51cmwsIGxpbmVJbmRleCwgY29tcGxldGVVcmwuZW5kTGluZSwgdXJsU3RhcnQpO1xuICAgICAgICB0aGlzLm1hcmtSYW5nZUFzUHJvY2Vzc2VkKGxpbmVJbmRleCwgY29tcGxldGVVcmwuZW5kTGluZSwgdXJsU3RhcnQsIGNvbXBsZXRlVXJsLnVybCk7XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gVVJMX1NUQVJUX1BBVFRFUk4uZXhlYyhsaW5lVGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE11bHRpTGluZVVybChcbiAgICBzdGFydExpbmU6IG51bWJlcixcbiAgICBzdGFydENvbDogbnVtYmVyXG4gICk6IHsgdXJsOiBzdHJpbmc7IGVuZExpbmU6IG51bWJlciB9IHwgbnVsbCB7XG4gICAgbGV0IHVybCA9ICcnO1xuICAgIGxldCBlbmRMaW5lID0gc3RhcnRMaW5lO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmVUZXh0ID0gdGhpcy5nZXRMaW5lVGV4dChpKTtcbiAgICAgIGxldCByZW1haW5pbmdUZXh0OiBzdHJpbmc7XG5cbiAgICAgIGlmIChpID09PSBzdGFydExpbmUpIHtcbiAgICAgICAgcmVtYWluaW5nVGV4dCA9IGxpbmVUZXh0LnN1YnN0cmluZyhzdGFydENvbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPbmx5IGNvbnRpbnVlIGlmIHRoaXMgbG9va3MgbGlrZSBhIHZhbGlkIFVSTCBjb250aW51YXRpb25cbiAgICAgICAgY29uc3QgY3VycmVudFVybCA9IHVybDtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ29udGludWUgPSB0aGlzLmlzVmFsaWRVcmxDb250aW51YXRpb24oY3VycmVudFVybCwgbGluZVRleHQpO1xuICAgICAgICBpZiAoIXNob3VsZENvbnRpbnVlKSB7XG4gICAgICAgICAgZW5kTGluZSA9IGkgLSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIGNvbnRpbnVhdGlvbiBsaW5lcywgc2tpcCBsZWFkaW5nIHdoaXRlc3BhY2VcbiAgICAgICAgcmVtYWluaW5nVGV4dCA9IGxpbmVUZXh0LnRyaW1TdGFydCgpO1xuXG4gICAgICAgIC8vIElmIHRoZSBsaW5lIHdhcyBvbmx5IHdoaXRlc3BhY2UsIHN0b3AgaGVyZVxuICAgICAgICBpZiAoIXJlbWFpbmluZ1RleHQpIHtcbiAgICAgICAgICBlbmRMaW5lID0gaSAtIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB3aGVyZSB0aGUgVVJMIGVuZHMgaW4gdGhpcyBsaW5lXG4gICAgICBjb25zdCB1cmxFbmQgPSB0aGlzLmZpbmRVcmxFbmRJblRleHQocmVtYWluaW5nVGV4dCk7XG5cbiAgICAgIGlmICh1cmxFbmQgPj0gMCkge1xuICAgICAgICB1cmwgKz0gcmVtYWluaW5nVGV4dC5zdWJzdHJpbmcoMCwgdXJsRW5kKTtcbiAgICAgICAgZW5kTGluZSA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsICs9IHJlbWFpbmluZ1RleHQ7XG4gICAgICAgIGVuZExpbmUgPSBpO1xuXG4gICAgICAgIGlmIChpID09PSB0aGlzLmxpbmVzLmxlbmd0aCAtIDEpIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHVybDogdGhpcy5jbGVhblVybCh1cmwpLCBlbmRMaW5lIH07XG4gIH1cblxuICBwcml2YXRlIGZpbmRVcmxFbmRJblRleHQodGV4dDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAvLyBMb29rIGZvciB3aGl0ZXNwYWNlIGZpcnN0XG4gICAgY29uc3Qgd2hpdGVzcGFjZUluZGV4ID0gdGV4dC5zZWFyY2goL1xccy8pO1xuICAgIGlmICh3aGl0ZXNwYWNlSW5kZXggPj0gMCkgcmV0dXJuIHdoaXRlc3BhY2VJbmRleDtcblxuICAgIC8vIExvb2sgZm9yIGNoYXJhY3RlcnMgdGhhdCB0eXBpY2FsbHkgZW5kIFVSTHNcbiAgICBjb25zdCBlbmRNYXRjaCA9IHRleHQubWF0Y2goVVJMX0VORF9DSEFSU19QQVRURVJOKTtcbiAgICBpZiAoZW5kTWF0Y2ggJiYgZW5kTWF0Y2guaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVuZE1hdGNoLmluZGV4O1xuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVXJsTGlua3ModXJsOiBzdHJpbmcsIHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lOiBudW1iZXIsIHN0YXJ0Q29sOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBoaWdobGlnaHRlciA9IG5ldyBMaW5rSGlnaGxpZ2h0ZXIodGhpcy5saW5lcywgdXJsKTtcbiAgICBoaWdobGlnaHRlci5jcmVhdGVMaW5rcyhzdGFydExpbmUsIGVuZExpbmUsIHN0YXJ0Q29sKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TGluZVRleHQobGluZUluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChsaW5lSW5kZXggPCAwIHx8IGxpbmVJbmRleCA+PSB0aGlzLmxpbmVzLmxlbmd0aCkgcmV0dXJuICcnO1xuICAgIHJldHVybiB0aGlzLmxpbmVzW2xpbmVJbmRleF0udGV4dENvbnRlbnQgfHwgJyc7XG4gIH1cblxuICBwcml2YXRlIGlzVmFsaWRVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAodXJsLmxlbmd0aCA8IE1JTl9VUkxfTEVOR1RIIHx8IHVybC5sZW5ndGggPiBNQVhfVVJMX0xFTkdUSCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBvYnZpb3VzIG5vbi1VUkwgY2hhcmFjdGVyc1xuICAgIGlmICgvW1xcblxcclxcdF0vLnRlc3QodXJsKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEJhc2ljIHBhdHRlcm4gdmFsaWRhdGlvblxuICAgIGlmICghTE9DQUxIT1NUX1BBVFRFUk4udGVzdCh1cmwpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIHBhcnNlIGFzIFVSTFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XG4gICAgICBpZiAoIVsnaHR0cDonLCAnaHR0cHM6JywgJ2ZpbGU6J10uaW5jbHVkZXMocGFyc2VkLnByb3RvY29sKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvciBIVFRQKFMpIFVSTHMsIHZhbGlkYXRlIGRvbWFpbiBzdHJ1Y3R1cmVcbiAgICAgIGlmIChwYXJzZWQucHJvdG9jb2wgPT09ICdodHRwOicgfHwgcGFyc2VkLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgICAgICBjb25zdCBob3N0bmFtZSA9IHBhcnNlZC5ob3N0bmFtZTtcblxuICAgICAgICAvLyBTa2lwIHZhbGlkYXRpb24gZm9yIGxvY2FsaG9zdCwgSVAgYWRkcmVzc2VzLCBhbmQgSVB2NlxuICAgICAgICBpZiAoaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IC9eW1xcZC5dKyQvLnRlc3QoaG9zdG5hbWUpIHx8IGhvc3RuYW1lLnN0YXJ0c1dpdGgoJ1snKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgZWFjaCBkb21haW4gbGFiZWxcbiAgICAgICAgY29uc3QgbGFiZWxzID0gaG9zdG5hbWUuc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKGxhYmVscy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBNdXN0IGhhdmUgYXQgbGVhc3QgZG9tYWluLnRsZFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgYWxsIGxhYmVscyBpbmNsdWRpbmcgdGhlIGxhc3Qgb25lXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFWQUxJRF9ET01BSU5fTEFCRUwudGVzdChsYWJlbHNbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkaXRpb25hbCBjaGVjayBmb3IgVExEIC0gbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsZXR0ZXJcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgZm9yIGludGVybmF0aW9uYWxpemVkIFRMRHMgd2hpbGUgZW5zdXJpbmcgaXQncyBub3QgcHVyZWx5IG51bWVyaWNcbiAgICAgICAgY29uc3QgdGxkID0gbGFiZWxzW2xhYmVscy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCEvW2EtekEtWl0vLnRlc3QodGxkKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gVExEIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgbGV0dGVyXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhblVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IGNsZWFuZWQgPSB1cmw7XG5cbiAgICAvLyBCYWxhbmNlIHBhcmVudGhlc2VzXG4gICAgY29uc3Qgb3BlblBhcmVucyA9IChjbGVhbmVkLm1hdGNoKC9cXCgvZykgfHwgW10pLmxlbmd0aDtcbiAgICBjb25zdCBjbG9zZVBhcmVucyA9IChjbGVhbmVkLm1hdGNoKC9cXCkvZykgfHwgW10pLmxlbmd0aDtcblxuICAgIGlmIChjbG9zZVBhcmVucyA+IG9wZW5QYXJlbnMpIHtcbiAgICAgIGNvbnN0IHRvUmVtb3ZlID0gY2xvc2VQYXJlbnMgLSBvcGVuUGFyZW5zO1xuICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFwpKyQvLCAobWF0Y2gpID0+IG1hdGNoLnN1YnN0cmluZygwLCBtYXRjaC5sZW5ndGggLSB0b1JlbW92ZSkpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBjb21tb24gdHJhaWxpbmcgcHVuY3R1YXRpb25cbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9bLiw7OiE/XSskLywgJycpO1xuXG4gICAgcmV0dXJuIGNsZWFuZWQ7XG4gIH1cblxuICBwcml2YXRlIGlzUmFuZ2VQcm9jZXNzZWQoc3RhcnRMaW5lOiBudW1iZXIsIHN0YXJ0Q29sOiBudW1iZXIsIGVuZExpbmU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGxpbmUgPSBzdGFydExpbmU7IGxpbmUgPD0gZW5kTGluZTsgbGluZSsrKSB7XG4gICAgICBpZiAodGhpcy5pc1Bvc2l0aW9uUHJvY2Vzc2VkKGxpbmUsIGxpbmUgPT09IHN0YXJ0TGluZSA/IHN0YXJ0Q29sIDogMCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgaXNQb3NpdGlvblByb2Nlc3NlZChsaW5lOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCByYW5nZXMgPSB0aGlzLnByb2Nlc3NlZFJhbmdlcy5nZXQobGluZSk7XG4gICAgaWYgKCFyYW5nZXMpIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiByYW5nZXMuc29tZSgocmFuZ2UpID0+IHBvc2l0aW9uID49IHJhbmdlLnN0YXJ0ICYmIHBvc2l0aW9uIDwgcmFuZ2UuZW5kKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFya1JhbmdlQXNQcm9jZXNzZWQoXG4gICAgc3RhcnRMaW5lOiBudW1iZXIsXG4gICAgZW5kTGluZTogbnVtYmVyLFxuICAgIHN0YXJ0Q29sOiBudW1iZXIsXG4gICAgdXJsOiBzdHJpbmdcbiAgKTogdm9pZCB7XG4gICAgLy8gQ2FsY3VsYXRlIGFjdHVhbCBVUkwgcG9ydGlvbnMgb24gZWFjaCBsaW5lXG4gICAgbGV0IHJlbWFpbmluZ1VybCA9IHVybDtcbiAgICBsZXQgY3VycmVudExpbmUgPSBzdGFydExpbmU7XG5cbiAgICB3aGlsZSAoY3VycmVudExpbmUgPD0gZW5kTGluZSAmJiByZW1haW5pbmdVcmwubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGluZVRleHQgPSB0aGlzLmdldExpbmVUZXh0KGN1cnJlbnRMaW5lKTtcblxuICAgICAgaWYgKCF0aGlzLnByb2Nlc3NlZFJhbmdlcy5oYXMoY3VycmVudExpbmUpKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc2VkUmFuZ2VzLnNldChjdXJyZW50TGluZSwgW10pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByYW5nZXMgPSB0aGlzLnByb2Nlc3NlZFJhbmdlcy5nZXQoY3VycmVudExpbmUpO1xuICAgICAgaWYgKCFyYW5nZXMpIGNvbnRpbnVlO1xuXG4gICAgICBsZXQgcmFuZ2VTdGFydDogbnVtYmVyO1xuICAgICAgbGV0IHJhbmdlRW5kOiBudW1iZXI7XG5cbiAgICAgIGlmIChjdXJyZW50TGluZSA9PT0gc3RhcnRMaW5lKSB7XG4gICAgICAgIC8vIEZpcnN0IGxpbmU6IHN0YXJ0IGZyb20gc3RhcnRDb2xcbiAgICAgICAgcmFuZ2VTdGFydCA9IHN0YXJ0Q29sO1xuICAgICAgICBjb25zdCBhdmFpbGFibGVUZXh0ID0gbGluZVRleHQuc3Vic3RyaW5nKHN0YXJ0Q29sKTtcbiAgICAgICAgY29uc3QgdXJsUGFydExlbmd0aCA9IE1hdGgubWluKGF2YWlsYWJsZVRleHQubGVuZ3RoLCByZW1haW5pbmdVcmwubGVuZ3RoKTtcbiAgICAgICAgcmFuZ2VFbmQgPSBzdGFydENvbCArIHVybFBhcnRMZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDb250aW51YXRpb24gbGluZXM6IGFjY291bnQgZm9yIGxlYWRpbmcgd2hpdGVzcGFjZVxuICAgICAgICBjb25zdCBsZWFkaW5nV2hpdGVzcGFjZSA9IGxpbmVUZXh0Lm1hdGNoKC9eXFxzKi8pO1xuICAgICAgICByYW5nZVN0YXJ0ID0gbGVhZGluZ1doaXRlc3BhY2UgPyBsZWFkaW5nV2hpdGVzcGFjZVswXS5sZW5ndGggOiAwO1xuICAgICAgICBjb25zdCBhdmFpbGFibGVUZXh0ID0gbGluZVRleHQuc3Vic3RyaW5nKHJhbmdlU3RhcnQpO1xuXG4gICAgICAgIC8vIEZpbmQgd2hlcmUgdGhlIFVSTCBlbmRzIG9uIHRoaXMgbGluZVxuICAgICAgICBsZXQgdXJsUGFydExlbmd0aCA9IE1hdGgubWluKGF2YWlsYWJsZVRleHQubGVuZ3RoLCByZW1haW5pbmdVcmwubGVuZ3RoKTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgVVJMLWVuZGluZyBjaGFyYWN0ZXJzXG4gICAgICAgIGlmIChjdXJyZW50TGluZSA9PT0gZW5kTGluZSkge1xuICAgICAgICAgIGNvbnN0IGVuZE1hdGNoID0gYXZhaWxhYmxlVGV4dC5zdWJzdHJpbmcoMCwgdXJsUGFydExlbmd0aCkuc2VhcmNoKFVSTF9FTkRfQ0hBUlNfUEFUVEVSTik7XG4gICAgICAgICAgaWYgKGVuZE1hdGNoID49IDApIHtcbiAgICAgICAgICAgIHVybFBhcnRMZW5ndGggPSBlbmRNYXRjaDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByYW5nZUVuZCA9IHJhbmdlU3RhcnQgKyB1cmxQYXJ0TGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICByYW5nZXMucHVzaCh7IHN0YXJ0OiByYW5nZVN0YXJ0LCBlbmQ6IHJhbmdlRW5kIH0pO1xuICAgICAgcmVtYWluaW5nVXJsID0gcmVtYWluaW5nVXJsLnN1YnN0cmluZyhyYW5nZUVuZCAtIHJhbmdlU3RhcnQpO1xuICAgICAgY3VycmVudExpbmUrKztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBMaW5rSGlnaGxpZ2h0ZXIgaGFuZGxlcyB0aGUgRE9NIG1hbmlwdWxhdGlvbiB0byBjcmVhdGUgY2xpY2thYmxlIGxpbmtzXG4gKi9cbmNsYXNzIExpbmtIaWdobGlnaHRlciB7XG4gIHByaXZhdGUgbGluZXM6IE5vZGVMaXN0T2Y8RWxlbWVudD47XG4gIHByaXZhdGUgdXJsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobGluZXM6IE5vZGVMaXN0T2Y8RWxlbWVudD4sIHVybDogc3RyaW5nKSB7XG4gICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICB9XG5cbiAgY3JlYXRlTGlua3Moc3RhcnRMaW5lOiBudW1iZXIsIGVuZExpbmU6IG51bWJlciwgc3RhcnRDb2w6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCByZW1haW5pbmdVcmwgPSB0aGlzLnVybDtcblxuICAgIGZvciAobGV0IGxpbmVJZHggPSBzdGFydExpbmU7IGxpbmVJZHggPD0gZW5kTGluZTsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lc1tsaW5lSWR4XTtcbiAgICAgIGNvbnN0IGxpbmVUZXh0ID0gbGluZS50ZXh0Q29udGVudCB8fCAnJztcblxuICAgICAgbGV0IGNvbFN0YXJ0OiBudW1iZXI7XG4gICAgICBsZXQgY29sRW5kOiBudW1iZXI7XG5cbiAgICAgIGlmIChsaW5lSWR4ID09PSBzdGFydExpbmUpIHtcbiAgICAgICAgY29sU3RhcnQgPSBzdGFydENvbDtcbiAgICAgICAgY29uc3QgbGluZVVybFBhcnQgPSBsaW5lVGV4dC5zdWJzdHJpbmcoc3RhcnRDb2wpO1xuICAgICAgICBjb2xFbmQgPSBzdGFydENvbCArIE1hdGgubWluKGxpbmVVcmxQYXJ0Lmxlbmd0aCwgcmVtYWluaW5nVXJsLmxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgd3JhcHBlZCBVUkxzXG4gICAgICAgIGNvbnN0IGxlYWRpbmdXaGl0ZXNwYWNlID0gbGluZVRleHQubWF0Y2goL15cXHMqLyk7XG4gICAgICAgIGNvbFN0YXJ0ID0gbGVhZGluZ1doaXRlc3BhY2UgPyBsZWFkaW5nV2hpdGVzcGFjZVswXS5sZW5ndGggOiAwO1xuXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVRleHQgPSBsaW5lVGV4dC5zdWJzdHJpbmcoY29sU3RhcnQpO1xuICAgICAgICBjb25zdCB1cmxQYXJ0TGVuZ3RoID0gTWF0aC5taW4oYXZhaWxhYmxlVGV4dC5sZW5ndGgsIHJlbWFpbmluZ1VybC5sZW5ndGgpO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBVUkwtZW5kaW5nIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgZW5kTWF0Y2ggPSBhdmFpbGFibGVUZXh0Lm1hdGNoKC9bXFxzPD5cIidgXS8pO1xuICAgICAgICBjb25zdCBhY3R1YWxMZW5ndGggPSBlbmRNYXRjaFxuICAgICAgICAgID8gTWF0aC5taW4oZW5kTWF0Y2guaW5kZXggPz8gdXJsUGFydExlbmd0aCwgdXJsUGFydExlbmd0aClcbiAgICAgICAgICA6IHVybFBhcnRMZW5ndGg7XG5cbiAgICAgICAgY29sRW5kID0gY29sU3RhcnQgKyBhY3R1YWxMZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb2xTdGFydCA8IGNvbEVuZCkge1xuICAgICAgICB0aGlzLndyYXBUZXh0SW5MaW5rKGxpbmUsIGNvbFN0YXJ0LCBjb2xFbmQpO1xuICAgICAgICByZW1haW5pbmdVcmwgPSByZW1haW5pbmdVcmwuc3Vic3RyaW5nKGNvbEVuZCAtIGNvbFN0YXJ0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlbWFpbmluZ1VybC5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgd3JhcFRleHRJbkxpbmsobGluZUVsZW1lbnQ6IEVsZW1lbnQsIHN0YXJ0Q29sOiBudW1iZXIsIGVuZENvbDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBhbGwgdGV4dCBub2RlcyBhbmQgdGhlaXIgcG9zaXRpb25zXG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihsaW5lRWxlbWVudCwgTm9kZUZpbHRlci5TSE9XX1RFWFQsIG51bGwpO1xuICAgIGNvbnN0IHRleHROb2RlRGF0YTogQXJyYXk8eyBub2RlOiBUZXh0OyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9PiA9IFtdO1xuICAgIGxldCBjdXJyZW50UG9zID0gMDtcbiAgICBsZXQgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuXG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgIGNvbnN0IHRleHROb2RlID0gbm9kZSBhcyBUZXh0O1xuICAgICAgY29uc3Qgbm9kZVRleHQgPSB0ZXh0Tm9kZS50ZXh0Q29udGVudCB8fCAnJztcbiAgICAgIGNvbnN0IG5vZGVTdGFydCA9IGN1cnJlbnRQb3M7XG4gICAgICBjb25zdCBub2RlRW5kID0gY3VycmVudFBvcyArIG5vZGVUZXh0Lmxlbmd0aDtcblxuICAgICAgLy8gT25seSBjb2xsZWN0IG5vZGVzIHRoYXQgb3ZlcmxhcCB3aXRoIG91ciByYW5nZVxuICAgICAgaWYgKG5vZGVFbmQgPiBzdGFydENvbCAmJiBub2RlU3RhcnQgPCBlbmRDb2wpIHtcbiAgICAgICAgdGV4dE5vZGVEYXRhLnB1c2goeyBub2RlOiB0ZXh0Tm9kZSwgc3RhcnQ6IG5vZGVTdGFydCwgZW5kOiBub2RlRW5kIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50UG9zID0gbm9kZUVuZDtcbiAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzczogcHJvY2VzcyBhbGwgcmVsZXZhbnQgdGV4dCBub2RlcyBpbiByZXZlcnNlIG9yZGVyXG4gICAgLy8gKHRvIGF2b2lkIGludmFsaWRhdGluZyBwb3NpdGlvbnMgd2hlbiBtb2RpZnlpbmcgdGhlIERPTSlcbiAgICBmb3IgKGxldCBpID0gdGV4dE5vZGVEYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB7IG5vZGU6IHRleHROb2RlLCBzdGFydDogbm9kZVN0YXJ0IH0gPSB0ZXh0Tm9kZURhdGFbaV07XG4gICAgICBjb25zdCBub2RlVGV4dCA9IHRleHROb2RlLnRleHRDb250ZW50IHx8ICcnO1xuXG4gICAgICBjb25zdCBsaW5rU3RhcnQgPSBNYXRoLm1heCgwLCBzdGFydENvbCAtIG5vZGVTdGFydCk7XG4gICAgICBjb25zdCBsaW5rRW5kID0gTWF0aC5taW4obm9kZVRleHQubGVuZ3RoLCBlbmRDb2wgLSBub2RlU3RhcnQpO1xuXG4gICAgICBpZiAobGlua1N0YXJ0IDwgbGlua0VuZCkge1xuICAgICAgICB0aGlzLndyYXBUZXh0Tm9kZSh0ZXh0Tm9kZSwgbGlua1N0YXJ0LCBsaW5rRW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBUZXh0Tm9kZSh0ZXh0Tm9kZTogVGV4dCwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0ZXh0Tm9kZS5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG5cbiAgICAvLyBEb24ndCB3cmFwIGlmIGFscmVhZHkgaW5zaWRlIGEgbGlua1xuICAgIGlmICh0aGlzLmlzSW5zaWRlTGluayhwYXJlbnQgYXMgRWxlbWVudCkpIHJldHVybjtcblxuICAgIGNvbnN0IG5vZGVUZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQgfHwgJyc7XG4gICAgY29uc3QgYmVmb3JlVGV4dCA9IG5vZGVUZXh0LnN1YnN0cmluZygwLCBzdGFydCk7XG4gICAgY29uc3QgbGlua1RleHQgPSBub2RlVGV4dC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XG4gICAgY29uc3QgYWZ0ZXJUZXh0ID0gbm9kZVRleHQuc3Vic3RyaW5nKGVuZCk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGxpbmsgZWxlbWVudFxuICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gdGhpcy5jcmVhdGVMaW5rRWxlbWVudChsaW5rVGV4dCk7XG5cbiAgICAvLyBSZXBsYWNlIHRoZSB0ZXh0IG5vZGVcbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGlmIChiZWZvcmVUZXh0KSB7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiZWZvcmVUZXh0KSk7XG4gICAgfVxuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xuXG4gICAgaWYgKGFmdGVyVGV4dCkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYWZ0ZXJUZXh0KSk7XG4gICAgfVxuXG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChmcmFnbWVudCwgdGV4dE5vZGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVMaW5rRWxlbWVudCh0ZXh0OiBzdHJpbmcpOiBIVE1MQW5jaG9yRWxlbWVudCB7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsaW5rLmNsYXNzTmFtZSA9IFRFUk1JTkFMX0xJTktfQ0xBU1M7XG4gICAgbGluay5ocmVmID0gdGhpcy51cmw7XG4gICAgbGluay50YXJnZXQgPSAnX2JsYW5rJztcbiAgICBsaW5rLnJlbCA9ICdub29wZW5lciBub3JlZmVycmVyJztcbiAgICBsaW5rLnN0eWxlLmNvbG9yID0gJyM0ZmMzZjcnO1xuICAgIGxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJztcbiAgICBsaW5rLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICBsaW5rLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIC8vIEFkZCBob3ZlciBlZmZlY3RzXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgbGluay5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSg3OSwgMTk1LCAyNDcsIDAuMiknO1xuICAgIH0pO1xuXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgbGluay5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcbiAgICB9KTtcblxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0luc2lkZUxpbmsoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGxldCBjdXJyZW50OiBFbGVtZW50IHwgbnVsbCA9IGVsZW1lbnQ7XG4gICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgaWYgKGN1cnJlbnQudGFnTmFtZSA9PT0gJ0EnICYmIGN1cnJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFRFUk1JTkFMX0xJTktfQ0xBU1MpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEV4cG9ydCBhcyBkZWZhdWx0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGNvbnN0IFVybEhpZ2hsaWdodGVyID0ge1xuICBwcm9jZXNzTGlua3MsXG59O1xuIiwgIi8vIFVJIENvbnN0YW50cyBmb3IgVmliZVR1bm5lbFxuXG5leHBvcnQgY29uc3QgQlJFQUtQT0lOVFMgPSB7XG4gIE1PQklMRTogNzY4LFxuICBUQUJMRVQ6IDEwMjQsXG4gIERFU0tUT1A6IDEyODAsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgU0lERUJBUiA9IHtcbiAgREVGQVVMVF9XSURUSDogNDIwLFxuICBNSU5fV0lEVEg6IDI0MCxcbiAgTUFYX1dJRFRIOiA2MDAsXG4gIE1PQklMRV9SSUdIVF9NQVJHSU46IDgwLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IFRSQU5TSVRJT05TID0ge1xuICBTSURFQkFSOiAyMDAsXG4gIE1PQklMRV9TTElERTogMjAwLFxuICBSRVNJWkVfSEFORExFOiAyMDAsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIFotSW5kZXggbGF5ZXJpbmcgc3lzdGVtIGZvciBVSSBjb21wb25lbnRzXG4gKlxuICogTGF5ZXJzIChmcm9tIGJvdHRvbSB0byB0b3ApOlxuICogLSAwLTQ5OiBCYXNlIFVJIGVsZW1lbnRzICh0ZXJtaW5hbHMsIGJ1dHRvbnMsIG1vYmlsZSBvdmVybGF5cylcbiAqIC0gNTAtOTk6IERyb3Bkb3ducyBhbmQgcG9wb3ZlcnNcbiAqIC0gMTAwLTE5OTogTW9kYWwgZGlhbG9ncyBhbmQgdGhlaXIgYmFja2Ryb3BzXG4gKiAtIDIwMCs6IFNwZWNpYWwgb3ZlcmxheXMgdGhhdCBtdXN0IGFwcGVhciBhYm92ZSBldmVyeXRoaW5nXG4gKlxuICogV2hlbiBhZGRpbmcgbmV3IHotaW5kZXggdmFsdWVzOlxuICogMS4gQ2hvb3NlIHRoZSBhcHByb3ByaWF0ZSByYW5nZSBiYXNlZCBvbiB0aGUgY29tcG9uZW50IHR5cGVcbiAqIDIuIExlYXZlIGdhcHMgYmV0d2VlbiB2YWx1ZXMgZm9yIGZ1dHVyZSBpbnNlcnRpb25zXG4gKiAzLiBEb2N1bWVudCB3aHkgdGhlIGNvbXBvbmVudCBuZWVkcyBpdHMgc3BlY2lmaWMgbGF5ZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFpfSU5ERVggPSB7XG4gIC8vIEJhc2UgVUkgZWxlbWVudHMgKDAtNDkpXG4gIFNFU1NJT05fTElTVF9CT1RUT01fQkFSOiAxMCxcbiAgVEVSTUlOQUxfT1ZFUkxBWTogMTUsXG4gIExPR19CVVRUT046IDIwLFxuICBNT0JJTEVfT1ZFUkxBWTogMjUsXG4gIFNJREVCQVJfTU9CSUxFOiAzMCxcbiAgTU9CSUxFX0lOUFVUX09WRVJMQVk6IDQwLFxuICBDVFJMX0FMUEhBX09WRVJMQVk6IDQ1LFxuICBURVJNSU5BTF9RVUlDS19LRVlTOiA0OCxcblxuICAvLyBEcm9wZG93bnMgYW5kIHBvcG92ZXJzICg1MC05OSlcbiAgV0lEVEhfU0VMRUNUT1JfRFJPUERPV046IDYwLFxuICBCUkFOQ0hfU0VMRUNUT1JfRFJPUERPV046IDY1LFxuICBJTUVfSU5QVVQ6IDcwLCAvLyBJbnZpc2libGUgSU1FIGlucHV0IGZvciBDSksgdGV4dCAtIG5lZWRzIHRvIGJlIGFib3ZlIHRlcm1pbmFsIGJ1dCBiZWxvdyBtb2RhbHNcblxuICAvLyBNb2RhbHMgYW5kIG92ZXJsYXlzICgxMDAtMTk5KVxuICBNT0RBTF9CQUNLRFJPUDogMTAwLFxuICBNT0RBTDogMTA1LFxuICBGSUxFX1BJQ0tFUjogMTEwLFxuICBTRVNTSU9OX0VYSVRFRF9PVkVSTEFZOiAxMjAsXG4gIE5PVElGSUNBVElPTjogMTUwLCAvLyBOb3RpZmljYXRpb25zIGFwcGVhciBhYm92ZSBtb2RhbHMgYnV0IGJlbG93IGZpbGUgYnJvd3NlclxuXG4gIC8vIFNwZWNpYWwgaGlnaC1wcmlvcml0eSBvdmVybGF5cyAoMjAwKylcbiAgRklMRV9CUk9XU0VSOiAxMTAwLCAvLyBNdXN0IGJlIGhpZ2hlciB0aGFuIG1vZGFsIGJhY2tkcm9wICgxMDAwKVxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IFRFUk1JTkFMID0ge1xuICBNSU5fSEVJR0hUOiAyMDAsXG4gIERFRkFVTFRfVklTSUJMRV9ST1dTOiAyNCxcbiAgUkVTSVpFX0RFQk9VTkNFOiAxMDAsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgVElNSU5HID0ge1xuICBBVVRPX1JFRlJFU0hfSU5URVJWQUw6IDEwMDAsXG4gIFNFU1NJT05fU0VBUkNIX0RFTEFZOiA1MDAsXG4gIEtJTExfQUxMX0FOSU1BVElPTl9ERUxBWTogNTAwLFxuICBFUlJPUl9NRVNTQUdFX1RJTUVPVVQ6IDUwMDAsXG4gIFNVQ0NFU1NfTUVTU0FHRV9USU1FT1VUOiA1MDAwLFxuICBLSUxMX0FMTF9CVVRUT05fRElTQUJMRV9EVVJBVElPTjogMjAwMCxcbn0gYXMgY29uc3Q7XG4iLCAiaW1wb3J0IHsgaHRtbCwgTGl0RWxlbWVudCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSAnbGl0L2RpcmVjdGl2ZXMvcmVmLmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy90ZXJtaW5hbC5qcyc7XG5pbXBvcnQgdHlwZSB7IFRlcm1pbmFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy90ZXJtaW5hbC5qcyc7XG5pbXBvcnQgeyBaX0lOREVYIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuQGN1c3RvbUVsZW1lbnQoJ3Rlcm1pbmFsLXRlc3QnKVxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsVGVzdCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAc3RhdGUoKSBwcml2YXRlIGNvbHMgPSA4MDtcbiAgQHN0YXRlKCkgcHJpdmF0ZSByb3dzID0gMjQ7XG4gIEBzdGF0ZSgpIHByaXZhdGUgaW5wdXRUZXh0ID0gJyc7XG5cbiAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgdGVybWluYWxSZWYgPSBjcmVhdGVSZWY8VGVybWluYWw+KCk7XG4gIHByaXZhdGUgdGVzdERhdGEgPSB7XG4gICAgYW5zaTogJ1xceDFiWzMxbVJlZFxceDFiWzBtIFxceDFiWzMybUdyZWVuXFx4MWJbMG0gXFx4MWJbMzRtQmx1ZVxceDFiWzBtIFxceDFiWzE7MzNtQm9sZCBZZWxsb3dcXHgxYlswbScsXG4gICAgdW5pY29kZTogJ1x1RDgzRFx1REU4MCBVbmljb2RlOiBcdTRGNjBcdTU5N0RcdTRFMTZcdTc1NEMgXHUyMDIyIFx1MDBGMSBcdTIwMjIgXHUwMEZDIFx1MjAyMiBcdTAwRjYgXHUyMDIyIFx1RDgzQ1x1REZBOCcsXG4gICAgbG9uZ0xpbmU6XG4gICAgICAnVGhpcyBpcyBhIHZlcnkgbG9uZyBsaW5lIHRoYXQgc2hvdWxkIHdyYXAgYXJvdW5kIHdoZW4gaXQgcmVhY2hlcyB0aGUgZWRnZSBvZiB0aGUgdGVybWluYWwuICcucmVwZWF0KFxuICAgICAgICA1XG4gICAgICApLFxuICAgIHByb2dyZXNzOiAnWyMjIyMjIyMjIyMgICAgICAgICAgXSA1MCUgQ29tcGxldGUnLFxuICB9O1xuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5zZXR1cFRlcm1pbmFsKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNldHVwVGVybWluYWwoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMudGVybWluYWxSZWYudmFsdWU7XG4gICAgaWYgKCF0ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgLy8gV2FpdCBmb3IgdGVybWluYWwgdG8gYmUgcmVhZHlcbiAgICB0ZXJtaW5hbC5hZGRFdmVudExpc3RlbmVyKCd0ZXJtaW5hbC1yZWFkeScsICgpID0+IHtcbiAgICAgIHRoaXMud3JpdGVXZWxjb21lTWVzc2FnZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB3cml0ZVdlbGNvbWVNZXNzYWdlKCkge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy50ZXJtaW5hbFJlZi52YWx1ZTtcbiAgICBpZiAoIXRlcm1pbmFsKSByZXR1cm47XG5cbiAgICB0ZXJtaW5hbC53cml0ZSgnXFx4MWJbMTszNm1WaWJlVHVubmVsIFRlcm1pbmFsIFRlc3RcXHgxYlswbVxcclxcbicpO1xuICAgIHRlcm1pbmFsLndyaXRlKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxyXFxuXFxyXFxuJyk7XG4gICAgdGVybWluYWwud3JpdGUoJ1RoaXMgaXMgYSB0ZXN0IGVudmlyb25tZW50IGZvciB0aGUgdGVybWluYWwgY29tcG9uZW50LlxcclxcbicpO1xuICAgIHRlcm1pbmFsLndyaXRlKCdVc2UgdGhlIGJ1dHRvbnMgYWJvdmUgdG8gdGVzdCB2YXJpb3VzIGZlYXR1cmVzLlxcclxcblxcclxcbicpO1xuICAgIHRlcm1pbmFsLndyaXRlKCdcXHgxYlszMm0kIFxceDFiWzBtJyk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRlcm1pbmFsSW5wdXQoZTogQ3VzdG9tRXZlbnQpIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMudGVybWluYWxSZWYudmFsdWU7XG4gICAgaWYgKCF0ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgaW5wdXQgPSBlLmRldGFpbDtcblxuICAgIC8vIEVjaG8gdGhlIGlucHV0XG4gICAgdGVybWluYWwud3JpdGUoaW5wdXQpO1xuXG4gICAgLy8gSGFuZGxlIHNwZWNpYWwga2V5c1xuICAgIGlmIChpbnB1dCA9PT0gJ1xccicpIHtcbiAgICAgIHRlcm1pbmFsLndyaXRlKCdcXG5cXHgxYlszMm0kIFxceDFiWzBtJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUZXJtaW5hbFJlc2l6ZShlOiBDdXN0b21FdmVudCkge1xuICAgIGNvbnNvbGUubG9nKCdUZXJtaW5hbCByZXNpemVkOicsIGUuZGV0YWlsKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJUZXJtaW5hbCgpIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMudGVybWluYWxSZWYudmFsdWU7XG4gICAgaWYgKCF0ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgdGVybWluYWwuY2xlYXIoKTtcbiAgICB0ZXJtaW5hbC53cml0ZSgnXFx4MWJbMzJtJCBcXHgxYlswbScpO1xuICB9XG5cbiAgcHJpdmF0ZSB3cml0ZVRlc3REYXRhKHR5cGU6IGtleW9mIHR5cGVvZiB0aGlzLnRlc3REYXRhKSB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLnRlcm1pbmFsUmVmLnZhbHVlO1xuICAgIGlmICghdGVybWluYWwpIHJldHVybjtcblxuICAgIHRlcm1pbmFsLndyaXRlKGAke3RoaXMudGVzdERhdGFbdHlwZV19XFxyXFxuXFx4MWJbMzJtJCBcXHgxYlswbWApO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNpemVUZXJtaW5hbChuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcikge1xuICAgIHRoaXMuY29scyA9IG5ld0NvbHM7XG4gICAgdGhpcy5yb3dzID0gbmV3Um93cztcblxuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy50ZXJtaW5hbFJlZi52YWx1ZTtcbiAgICBpZiAodGVybWluYWwpIHtcbiAgICAgIHRlcm1pbmFsLnNldFRlcm1pbmFsU2l6ZShuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNlbmRDdXN0b21JbnB1dCgpIHtcbiAgICBpZiAoIXRoaXMuaW5wdXRUZXh0KSByZXR1cm47XG5cbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMudGVybWluYWxSZWYudmFsdWU7XG4gICAgaWYgKCF0ZXJtaW5hbCkgcmV0dXJuO1xuXG4gICAgdGVybWluYWwud3JpdGUoYCR7dGhpcy5pbnB1dFRleHR9XFxyXFxuXFx4MWJbMzJtJCBcXHgxYlswbWApO1xuICAgIHRoaXMuaW5wdXRUZXh0ID0gJyc7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiaC1zY3JlZW4gZmxleCBmbGV4LWNvbCBiZy1iYWNrZ3JvdW5kIHRleHQtZm9yZWdyb3VuZCBmb250LW1vbm9cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLXN1cmZhY2UgYm9yZGVyLWIgYm9yZGVyLWdyYXktODAwIHAtNCBmb250LXNhbnNcIj5cbiAgICAgICAgICA8aDEgY2xhc3M9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1lbWVyYWxkLTQwMCBtYi00XCI+VGVybWluYWwgVGVzdDwvaDE+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZ2FwLTIgZmxleC13cmFwXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuY2xlYXJUZXJtaW5hbH1cbiAgICAgICAgICAgICAgY2xhc3M9XCJweC0zIHB5LTEuNSBiZy1ncmF5LTgwMCBob3ZlcjpiZy1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDbGVhclxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMud3JpdGVUZXN0RGF0YSgnYW5zaScpfVxuICAgICAgICAgICAgICBjbGFzcz1cInB4LTMgcHktMS41IGJnLWdyYXktODAwIGhvdmVyOmJnLWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS03MDAgaG92ZXI6Ym9yZGVyLWVtZXJhbGQtNDAwIHJvdW5kZWQgdGV4dC1zbSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEFOU0kgQ29sb3JzXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy53cml0ZVRlc3REYXRhKCd1bmljb2RlJyl9XG4gICAgICAgICAgICAgIGNsYXNzPVwicHgtMyBweS0xLjUgYmctZ3JheS04MDAgaG92ZXI6YmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBob3Zlcjpib3JkZXItZW1lcmFsZC00MDAgcm91bmRlZCB0ZXh0LXNtIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgVW5pY29kZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMud3JpdGVUZXN0RGF0YSgnbG9uZ0xpbmUnKX1cbiAgICAgICAgICAgICAgY2xhc3M9XCJweC0zIHB5LTEuNSBiZy1ncmF5LTgwMCBob3ZlcjpiZy1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBMb25nIExpbmVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLndyaXRlVGVzdERhdGEoJ3Byb2dyZXNzJyl9XG4gICAgICAgICAgICAgIGNsYXNzPVwicHgtMyBweS0xLjUgYmctZ3JheS04MDAgaG92ZXI6YmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBob3Zlcjpib3JkZXItZW1lcmFsZC00MDAgcm91bmRlZCB0ZXh0LXNtIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgUHJvZ3Jlc3MgQmFyXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5yZXNpemVUZXJtaW5hbCg4MCwgMjQpfVxuICAgICAgICAgICAgICBjbGFzcz1cInB4LTMgcHktMS41IGJnLWdyYXktODAwIGhvdmVyOmJnLWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS03MDAgaG92ZXI6Ym9yZGVyLWVtZXJhbGQtNDAwIHJvdW5kZWQgdGV4dC1zbSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDgweDI0XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5yZXNpemVUZXJtaW5hbCgxMjAsIDMwKX1cbiAgICAgICAgICAgICAgY2xhc3M9XCJweC0zIHB5LTEuNSBiZy1ncmF5LTgwMCBob3ZlcjpiZy1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAxMjB4MzBcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLnJlc2l6ZVRlcm1pbmFsKDQwLCAxNSl9XG4gICAgICAgICAgICAgIGNsYXNzPVwicHgtMyBweS0xLjUgYmctZ3JheS04MDAgaG92ZXI6YmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBob3Zlcjpib3JkZXItZW1lcmFsZC00MDAgcm91bmRlZCB0ZXh0LXNtIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgNDB4MTVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC0xIHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlbiBiZy1ibGFjayBtLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktODAwXCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IGJnLWJsYWNrLzgwIGJvcmRlciBib3JkZXItZ3JheS04MDAgcm91bmRlZCBweC0zIHB5LTEuNSB0ZXh0LXhzXCJcbiAgICAgICAgICAgIHN0eWxlPVwiei1pbmRleDogJHtaX0lOREVYLlRFUk1JTkFMX09WRVJMQVl9O1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdj5TaXplOiA8Y29kZSBjbGFzcz1cInRleHQtZW1lcmFsZC00MDBcIj4ke3RoaXMuY29sc314JHt0aGlzLnJvd3N9PC9jb2RlPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPHZpYmUtdGVybWluYWxcbiAgICAgICAgICAgICR7cmVmKHRoaXMudGVybWluYWxSZWYpfVxuICAgICAgICAgICAgLmNvbHM9JHt0aGlzLmNvbHN9XG4gICAgICAgICAgICAucm93cz0ke3RoaXMucm93c31cbiAgICAgICAgICAgIEB0ZXJtaW5hbC1pbnB1dD0ke3RoaXMuaGFuZGxlVGVybWluYWxJbnB1dH1cbiAgICAgICAgICAgIEB0ZXJtaW5hbC1yZXNpemU9JHt0aGlzLmhhbmRsZVRlcm1pbmFsUmVzaXplfVxuICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO1wiXG4gICAgICAgICAgPjwvdmliZS10ZXJtaW5hbD5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhYnNvbHV0ZSBib3R0b20tNCBsZWZ0LTQgcmlnaHQtNCBmbGV4IGdhcC0yXCIgc3R5bGU9XCJ6LWluZGV4OiAke1pfSU5ERVguVEVSTUlOQUxfT1ZFUkxBWX07XCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgY3VzdG9tIHRleHQgdG8gc2VuZC4uLlwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiZmxleC0xIHB4LTMgcHktMiBiZy1ibGFjay84MCB0ZXh0LWZvcmVncm91bmQgYm9yZGVyIGJvcmRlci1ncmF5LTgwMCByb3VuZGVkIGZvbnQtbW9ubyB0ZXh0LXNtIHBsYWNlaG9sZGVyLWdyYXktNjAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItZW1lcmFsZC00MDBcIlxuICAgICAgICAgICAgICAudmFsdWU9JHt0aGlzLmlucHV0VGV4dH1cbiAgICAgICAgICAgICAgQGlucHV0PSR7KGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRleHQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIEBrZXlkb3duPSR7KGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEN1c3RvbUlucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5zZW5kQ3VzdG9tSW5wdXR9XG4gICAgICAgICAgICAgIGNsYXNzPVwicHgtNCBweS0yIGJnLWVtZXJhbGQtNTAwIGhvdmVyOmJnLWVtZXJhbGQtNjAwIHRleHQtYmFja2dyb3VuZCByb3VuZGVkIGZvbnQtbWVkaXVtIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBTZW5kXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgJ3Rlcm1pbmFsLXRlc3QnOiBUZXJtaW5hbFRlc3Q7XG4gIH1cbn1cbiIsICIvKipcbiAqIE1vbmFjbyBFZGl0b3IgQ29tcG9uZW50XG4gKlxuICogQSBMaXQgY29tcG9uZW50IHRoYXQgd3JhcHMgTW9uYWNvIEVkaXRvciB3aXRoIHN1cHBvcnQgZm9yOlxuICogLSBOb3JtYWwgY29kZSBlZGl0aW5nIG1vZGVcbiAqIC0gRGlmZiBtb2RlIHdpdGggaW5saW5lL3NpZGUtYnktc2lkZSBzd2l0Y2hpbmdcbiAqIC0gQXV0b21hdGljIGxhbmd1YWdlIGRldGVjdGlvblxuICogLSBEYXJrIHRoZW1lIG1hdGNoaW5nIFZpYmVUdW5uZWwncyBkZXNpZ25cbiAqXG4gKiBAZmlyZXMgc2F2ZSAtIFdoZW4gc2F2ZSBpcyB0cmlnZ2VyZWQgKENtZC9DdHJsK1MpIGluIGVkaXQgbW9kZSAoZGV0YWlsOiB7IGNvbnRlbnQ6IHN0cmluZyB9KVxuICogQGZpcmVzIGNvbnRlbnQtY2hhbmdlZCAtIFdoZW4gY29udGVudCBjaGFuZ2VzIGluIGVkaXQgbW9kZSAoZGV0YWlsOiB7IGNvbnRlbnQ6IHN0cmluZyB9KVxuICovXG5pbXBvcnQgeyBodG1sLCBMaXRFbGVtZW50IH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSAnbGl0L2RpcmVjdGl2ZXMvcmVmLmpzJztcbmltcG9ydCB0eXBlIHsgZWRpdG9yIH0gZnJvbSAnbW9uYWNvLWVkaXRvcic7XG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZU1vbmFjbyB9IGZyb20gJy4uL3V0aWxzL21vbmFjby1sb2FkZXIuanMnO1xuXG5jb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoJ21vbmFjby1lZGl0b3InKTtcblxuLy8gSW1wb3J0IE1vbmFjbyBFZGl0b3IgdHlwZXNcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbW9uYWNvOiB0eXBlb2YgaW1wb3J0KCdtb25hY28tZWRpdG9yJyk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb25hY29FZGl0b3JPcHRpb25zIHtcbiAgdGhlbWU/OiBzdHJpbmc7XG4gIHJlYWRPbmx5PzogYm9vbGVhbjtcbiAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIGF1dG9tYXRpY0xheW91dD86IGJvb2xlYW47XG4gIG1pbmltYXA/OiB7IGVuYWJsZWQ6IGJvb2xlYW4gfTtcbiAgZm9udFNpemU/OiBudW1iZXI7XG4gIHdvcmRXcmFwPzogJ29uJyB8ICdvZmYnIHwgJ3dvcmRXcmFwQ29sdW1uJyB8ICdib3VuZGVkJztcbiAgc2Nyb2xsQmV5b25kTGFzdExpbmU/OiBib29sZWFuO1xuICByZW5kZXJXaGl0ZXNwYWNlPzogJ2FsbCcgfCAnbm9uZScgfCAnYm91bmRhcnknIHwgJ3NlbGVjdGlvbicgfCAndHJhaWxpbmcnO1xufVxuXG5AY3VzdG9tRWxlbWVudCgnbW9uYWNvLWVkaXRvcicpXG5leHBvcnQgY2xhc3MgTW9uYWNvRWRpdG9yIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBjb250ZW50ID0gJyc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBvcmlnaW5hbENvbnRlbnQgPSAnJztcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIG1vZGlmaWVkQ29udGVudCA9ICcnO1xuICBAcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSkgbGFuZ3VhZ2UgPSAnJztcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIGZpbGVuYW1lID0gJyc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcmVhZE9ubHkgPSBmYWxzZTtcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIG1vZGU6ICdub3JtYWwnIHwgJ2RpZmYnID0gJ25vcm1hbCc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgc2hvd01vZGVUb2dnbGUgPSBmYWxzZTtcbiAgQHByb3BlcnR5KHsgdHlwZTogT2JqZWN0IH0pIG9wdGlvbnM6IE1vbmFjb0VkaXRvck9wdGlvbnMgPSB7fTtcblxuICBAc3RhdGUoKSBwcml2YXRlIGlzTG9hZGluZyA9IHRydWU7XG4gIEBzdGF0ZSgpIHByaXZhdGUgZGlmZk1vZGU6ICdpbmxpbmUnIHwgJ3NpZGVCeVNpZGUnID0gJ3NpZGVCeVNpZGUnO1xuICBAc3RhdGUoKSBwcml2YXRlIGNvbnRhaW5lcldpZHRoID0gMDtcblxuICBwcml2YXRlIGNvbnRhaW5lclJlZiA9IGNyZWF0ZVJlZjxIVE1MRGl2RWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBlZGl0b3I6IGVkaXRvci5JU3RhbmRhbG9uZUNvZGVFZGl0b3IgfCBlZGl0b3IuSVN0YW5kYWxvbmVEaWZmRWRpdG9yIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbW9uYWNvTG9hZGVkID0gZmFsc2U7XG5cbiAgcHJvdGVjdGVkIGNyZWF0ZVJlbmRlclJvb3QoKTogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgYXdhaXQgdGhpcy5sb2FkTW9uYWNvKCk7XG4gICAgdGhpcy5zZXR1cFJlc2l6ZU9ic2VydmVyKCk7XG4gICAgLy8gV2FpdCBmb3IgdGhlIGZpcnN0IHJlbmRlciB0byBjb21wbGV0ZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgLy8gQ3JlYXRlIGVkaXRvciBpZiBjb250YWluZXIgaXMgcmVhZHlcbiAgICBpZiAodGhpcy5jb250YWluZXJSZWYudmFsdWUgJiYgIXRoaXMuZWRpdG9yICYmICF0aGlzLmlzTG9hZGluZykge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFZGl0b3IoKTtcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuZGlzcG9zZUVkaXRvcigpO1xuICAgIGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZE1vbmFjbygpIHtcbiAgICBpZiAodGhpcy5tb25hY29Mb2FkZWQgfHwgd2luZG93Lm1vbmFjbykge1xuICAgICAgdGhpcy5tb25hY29Mb2FkZWQgPSB0cnVlO1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdMb2FkaW5nIE1vbmFjbyBFZGl0b3IuLi4nKTtcbiAgICAgIC8vIEluaXRpYWxpemUgTW9uYWNvXG4gICAgICBhd2FpdCBpbml0aWFsaXplTW9uYWNvKCk7XG4gICAgICB0aGlzLm1vbmFjb0xvYWRlZCA9IHRydWU7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdNb25hY28gRWRpdG9yIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBNb25hY28gRWRpdG9yOicsIGVycm9yKTtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFJlc2l6ZU9ic2VydmVyKCkge1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gZW50cnkuY29udGVudFJlY3Qud2lkdGg7XG4gICAgICAgIC8vIEF1dG8tc3dpdGNoIGRpZmYgbW9kZSBiYXNlZCBvbiB3aWR0aFxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnZGlmZicgJiYgdGhpcy5lZGl0b3IpIHtcbiAgICAgICAgICBjb25zdCBzaG91bGRCZUlubGluZSA9IHRoaXMuY29udGFpbmVyV2lkdGggPCA3Njg7IC8vIE1vYmlsZSBicmVha3BvaW50XG4gICAgICAgICAgY29uc3QgbmV3TW9kZSA9IHNob3VsZEJlSW5saW5lID8gJ2lubGluZScgOiAnc2lkZUJ5U2lkZSc7XG4gICAgICAgICAgaWYgKG5ld01vZGUgIT09IHRoaXMuZGlmZk1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlmZk1vZGUgPSBuZXdNb2RlO1xuICAgICAgICAgICAgdGhpcy5yZWNyZWF0ZUVkaXRvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUcmlnZ2VyIE1vbmFjbydzIGxheW91dCB1cGRhdGVcbiAgICAgICAgaWYgKHRoaXMuZWRpdG9yKSB7XG4gICAgICAgICAgdGhpcy5lZGl0b3IubGF5b3V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNvbnRhaW5lclJlZi52YWx1ZSkge1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udGFpbmVyUmVmLnZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBNYXA8c3RyaW5nLCB1bmtub3duPikge1xuICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBjcmVhdGUgb3IgcmVjcmVhdGUgdGhlIGVkaXRvclxuICAgIGNvbnN0IG5lZWRzUmVjcmVhdGUgPVxuICAgICAgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdtb2RlJykgfHxcbiAgICAgIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2NvbnRlbnQnKSAmJiAhdGhpcy5lZGl0b3IpIHx8XG4gICAgICAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdvcmlnaW5hbENvbnRlbnQnKSAmJiB0aGlzLm1vZGUgPT09ICdkaWZmJykgfHxcbiAgICAgIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ21vZGlmaWVkQ29udGVudCcpICYmIHRoaXMubW9kZSA9PT0gJ2RpZmYnKTtcblxuICAgIGlmIChuZWVkc1JlY3JlYXRlICYmICF0aGlzLmlzTG9hZGluZyAmJiB0aGlzLmNvbnRhaW5lclJlZi52YWx1ZSkge1xuICAgICAgYXdhaXQgdGhpcy5yZWNyZWF0ZUVkaXRvcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0b3IgJiYgIXRoaXMuaXNMb2FkaW5nKSB7XG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZWRpdG9yXG4gICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdjb250ZW50JykgJiYgdGhpcy5tb2RlID09PSAnbm9ybWFsJykge1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2xhbmd1YWdlJykgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdmaWxlbmFtZScpKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTGFuZ3VhZ2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3JlYWRPbmx5JykpIHtcbiAgICAgICAgdGhpcy51cGRhdGVSZWFkT25seSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVjcmVhdGVFZGl0b3IoKSB7XG4gICAgdGhpcy5kaXNwb3NlRWRpdG9yKCk7XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFZGl0b3IoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlRWRpdG9yKCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXJSZWYudmFsdWUgfHwgIXdpbmRvdy5tb25hY28pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gU2V0IHVwIHRoZSBkYXJrIHRoZW1lXG4gICAgICB0aGlzLnNldHVwVGhlbWUoKTtcblxuICAgICAgY29uc3QgY29tbW9uT3B0aW9uczogZWRpdG9yLklFZGl0b3JDb25zdHJ1Y3Rpb25PcHRpb25zID0ge1xuICAgICAgICB0aGVtZTogJ3ZzLWRhcmsnLFxuICAgICAgICBhdXRvbWF0aWNMYXlvdXQ6IHRydWUsXG4gICAgICAgIGZvbnRTaXplOiAxNCxcbiAgICAgICAgZm9udEZhbWlseTogXCInRmlyYSBDb2RlJywgTWVubG8sIE1vbmFjbywgJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlXCIsXG4gICAgICAgIGZvbnRMaWdhdHVyZXM6IHRydWUsXG4gICAgICAgIG1pbmltYXA6IHsgZW5hYmxlZDogZmFsc2UgfSxcbiAgICAgICAgc2Nyb2xsQmV5b25kTGFzdExpbmU6IGZhbHNlLFxuICAgICAgICByZW5kZXJXaGl0ZXNwYWNlOiAnc2VsZWN0aW9uJyxcbiAgICAgICAgcmVhZE9ubHk6IHRoaXMucmVhZE9ubHksXG4gICAgICAgIC8vIEVuYWJsZSBmb2xkaW5nXG4gICAgICAgIGZvbGRpbmc6IHRydWUsXG4gICAgICAgIGZvbGRpbmdTdHJhdGVneTogJ2luZGVudGF0aW9uJywgLy8gVXNlIGluZGVudGF0aW9uLWJhc2VkIGZvbGRpbmcgaW5zdGVhZCBvZiBsYW5ndWFnZS1hd2FyZVxuICAgICAgICBmb2xkaW5nSGlnaGxpZ2h0OiB0cnVlLFxuICAgICAgICBzaG93Rm9sZGluZ0NvbnRyb2xzOiAnYWx3YXlzJyxcbiAgICAgICAgLy8gRW5zdXJlIGRlY29yYXRpb25zIGFyZSB2aXNpYmxlXG4gICAgICAgIHJlbmRlckxpbmVIaWdobGlnaHQ6ICdhbGwnLFxuICAgICAgICByZW5kZXJMaW5lSGlnaGxpZ2h0T25seVdoZW5Gb2N1czogZmFsc2UsXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdkaWZmJykge1xuICAgICAgICAvLyBDcmVhdGUgZGlmZiBlZGl0b3Igd2l0aCBleGFjdCBvcHRpb25zIGZyb20gbGVtbXlcbiAgICAgICAgY29uc3QgZGlmZk9wdGlvbnM6IGVkaXRvci5JRGlmZkVkaXRvckNvbnN0cnVjdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICAgICAgYXV0b21hdGljTGF5b3V0OiB0cnVlLFxuICAgICAgICAgIHNjcm9sbEJleW9uZExhc3RMaW5lOiBmYWxzZSxcbiAgICAgICAgICBtaW5pbWFwOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgcmVuZGVyV2hpdGVzcGFjZTogJ3NlbGVjdGlvbicsXG4gICAgICAgICAgcmVuZGVyU2lkZUJ5U2lkZTogdGhpcy5kaWZmTW9kZSA9PT0gJ3NpZGVCeVNpZGUnLFxuICAgICAgICAgIGlnbm9yZVRyaW1XaGl0ZXNwYWNlOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmVkaXRvciA9IHdpbmRvdy5tb25hY28uZWRpdG9yLmNyZWF0ZURpZmZFZGl0b3IodGhpcy5jb250YWluZXJSZWYudmFsdWUsIGRpZmZPcHRpb25zKTtcblxuICAgICAgICAvLyBTZXQgbW9kZWxzIGZvciBkaWZmXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gdGhpcy5kZXRlY3RMYW5ndWFnZSgpO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBiYXNlVXJpID0gYCR7dGhpcy5maWxlbmFtZSB8fCAndW50aXRsZWQnfS0ke3RpbWVzdGFtcH1gO1xuXG4gICAgICAgIC8vIENyZWF0ZSBtb2RlbHMgZXhhY3RseSBsaWtlIGxlbW15XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTW9kZWwgPSB3aW5kb3cubW9uYWNvLmVkaXRvci5jcmVhdGVNb2RlbChcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsQ29udGVudCB8fCAnJyxcbiAgICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgICB3aW5kb3cubW9uYWNvLlVyaS5wYXJzZShgZmlsZTovLy8ke2Jhc2VVcml9I29yaWdpbmFsYClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbW9kaWZpZWRNb2RlbCA9IHdpbmRvdy5tb25hY28uZWRpdG9yLmNyZWF0ZU1vZGVsKFxuICAgICAgICAgIHRoaXMubW9kaWZpZWRDb250ZW50IHx8ICcnLFxuICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgIHdpbmRvdy5tb25hY28uVXJpLnBhcnNlKGBmaWxlOi8vLyR7YmFzZVVyaX0jbW9kaWZpZWRgKVxuICAgICAgICApO1xuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgZGlmZiBlZGl0b3InKTtcblxuICAgICAgICAvLyBTZXQgdGhlIG1vZGVscyBleGFjdGx5IGxpa2UgbGVtbXkgZG9lc1xuICAgICAgICBjb25zdCBkaWZmRWRpdG9yID0gdGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lRGlmZkVkaXRvcjtcbiAgICAgICAgZGlmZkVkaXRvci5zZXRNb2RlbCh7XG4gICAgICAgICAgb3JpZ2luYWw6IG9yaWdpbmFsTW9kZWwsXG4gICAgICAgICAgbW9kaWZpZWQ6IG1vZGlmaWVkTW9kZWwsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdhaXQgZm9yIGRpZmYgY29tcHV0YXRpb24gbGlrZSBsZW1teSBkb2VzXG4gICAgICAgIGNvbnN0IHJlc3RvcmVMYXlvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZWRpdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5sYXlvdXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBkaWZmIGNvbXB1dGF0aW9uIGNvbXBsZXRpb25cbiAgICAgICAgY29uc3QgZGlzcG9zYWJsZSA9IGRpZmZFZGl0b3Iub25EaWRVcGRhdGVEaWZmKCgpID0+IHtcbiAgICAgICAgICByZXN0b3JlTGF5b3V0KCk7XG4gICAgICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFsc28gdHJ5IGFmdGVyIHRpbWVvdXQgYXMgZmFsbGJhY2tcbiAgICAgICAgc2V0VGltZW91dChyZXN0b3JlTGF5b3V0LCAyMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5vcm1hbCBlZGl0b3JcbiAgICAgICAgdGhpcy5lZGl0b3IgPSB3aW5kb3cubW9uYWNvLmVkaXRvci5jcmVhdGUodGhpcy5jb250YWluZXJSZWYudmFsdWUsIHtcbiAgICAgICAgICAuLi5jb21tb25PcHRpb25zLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLmNvbnRlbnQsXG4gICAgICAgICAgbGFuZ3VhZ2U6IHRoaXMuZGV0ZWN0TGFuZ3VhZ2UoKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIHNhdmUgY29tbWFuZFxuICAgICAgICBpZiAoIXRoaXMucmVhZE9ubHkpIHtcbiAgICAgICAgICAodGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lQ29kZUVkaXRvcikuYWRkQ29tbWFuZChcbiAgICAgICAgICAgIHdpbmRvdy5tb25hY28uS2V5TW9kLkN0cmxDbWQgfCB3aW5kb3cubW9uYWNvLktleUNvZGUuS2V5UyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTYXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIExpc3RlbiBmb3IgY29udGVudCBjaGFuZ2VzXG4gICAgICAgICAgKHRoaXMuZWRpdG9yIGFzIGVkaXRvci5JU3RhbmRhbG9uZUNvZGVFZGl0b3IpLm9uRGlkQ2hhbmdlTW9kZWxDb250ZW50KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAodGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lQ29kZUVkaXRvcik/LmdldFZhbHVlKCkgfHwgJyc7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudCgnY29udGVudC1jaGFuZ2VkJywge1xuICAgICAgICAgICAgICAgIGRldGFpbDogeyBjb250ZW50IH0sXG4gICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmRlYnVnKGBDcmVhdGVkICR7dGhpcy5tb2RlfSBlZGl0b3JgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGVkaXRvcjonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFRoZW1lKCkge1xuICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBWUyBkYXJrIHRoZW1lXG4gICAgaWYgKCF3aW5kb3cubW9uYWNvKSByZXR1cm47XG4gICAgLy8gVGhlbWUgaXMgYWxyZWFkeSBoYW5kbGVkIGJ5IG1vbmFjby1sb2FkZXIudHMgd2l0aCB0aGVtZSBjaGFuZ2Ugb2JzZXJ2ZXJcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0TGFuZ3VhZ2UoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5sYW5ndWFnZSkge1xuICAgICAgcmV0dXJuIHRoaXMubGFuZ3VhZ2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZmlsZW5hbWUpIHtcbiAgICAgIGNvbnN0IGV4dCA9IHRoaXMuZmlsZW5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICBqczogJ2phdmFzY3JpcHQnLFxuICAgICAgICBqc3g6ICdqYXZhc2NyaXB0JyxcbiAgICAgICAgdHM6ICd0eXBlc2NyaXB0JyxcbiAgICAgICAgdHN4OiAndHlwZXNjcmlwdCcsXG4gICAgICAgIGpzb246ICdqc29uJyxcbiAgICAgICAgaHRtbDogJ2h0bWwnLFxuICAgICAgICBodG06ICdodG1sJyxcbiAgICAgICAgY3NzOiAnY3NzJyxcbiAgICAgICAgc2NzczogJ3Njc3MnLFxuICAgICAgICBzYXNzOiAnc2FzcycsXG4gICAgICAgIGxlc3M6ICdsZXNzJyxcbiAgICAgICAgcHk6ICdweXRob24nLFxuICAgICAgICByYjogJ3J1YnknLFxuICAgICAgICBnbzogJ2dvJyxcbiAgICAgICAgcnM6ICdydXN0JyxcbiAgICAgICAgamF2YTogJ2phdmEnLFxuICAgICAgICBjOiAnYycsXG4gICAgICAgIGNwcDogJ2NwcCcsXG4gICAgICAgIGNzOiAnY3NoYXJwJyxcbiAgICAgICAgcGhwOiAncGhwJyxcbiAgICAgICAgc3dpZnQ6ICdzd2lmdCcsXG4gICAgICAgIGt0OiAna290bGluJyxcbiAgICAgICAgc2NhbGE6ICdzY2FsYScsXG4gICAgICAgIHI6ICdyJyxcbiAgICAgICAgc3FsOiAnc3FsJyxcbiAgICAgICAgc2g6ICdzaGVsbCcsXG4gICAgICAgIGJhc2g6ICdzaGVsbCcsXG4gICAgICAgIHpzaDogJ3NoZWxsJyxcbiAgICAgICAgZmlzaDogJ3NoZWxsJyxcbiAgICAgICAgcHMxOiAncG93ZXJzaGVsbCcsXG4gICAgICAgIHltbDogJ3lhbWwnLFxuICAgICAgICB5YW1sOiAneWFtbCcsXG4gICAgICAgIHhtbDogJ3htbCcsXG4gICAgICAgIG1kOiAnbWFya2Rvd24nLFxuICAgICAgICBtYXJrZG93bjogJ21hcmtkb3duJyxcbiAgICAgICAgZG9ja2VyZmlsZTogJ2RvY2tlcmZpbGUnLFxuICAgICAgICBtYWtlZmlsZTogJ21ha2VmaWxlJyxcbiAgICAgICAgZ2l0aWdub3JlOiAnZ2l0aWdub3JlJyxcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBsYW5ndWFnZU1hcFtleHQgfHwgJyddIHx8ICdwbGFpbnRleHQnO1xuICAgIH1cblxuICAgIHJldHVybiAncGxhaW50ZXh0JztcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29udGVudCgpIHtcbiAgICBpZiAoIXRoaXMuZWRpdG9yIHx8IHRoaXMubW9kZSA9PT0gJ2RpZmYnKSByZXR1cm47XG5cbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSAodGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lQ29kZUVkaXRvcikuZ2V0VmFsdWUoKTtcbiAgICBpZiAoY3VycmVudFZhbHVlICE9PSB0aGlzLmNvbnRlbnQpIHtcbiAgICAgICh0aGlzLmVkaXRvciBhcyBlZGl0b3IuSVN0YW5kYWxvbmVDb2RlRWRpdG9yKS5zZXRWYWx1ZSh0aGlzLmNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTGFuZ3VhZ2UoKSB7XG4gICAgaWYgKCF0aGlzLmVkaXRvciB8fCAhd2luZG93Lm1vbmFjbykgcmV0dXJuO1xuXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLmRldGVjdExhbmd1YWdlKCk7XG5cbiAgICBpZiAodGhpcy5tb2RlID09PSAnbm9ybWFsJykge1xuICAgICAgY29uc3QgbW9kZWwgPSAodGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lQ29kZUVkaXRvcikuZ2V0TW9kZWwoKTtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICB3aW5kb3cubW9uYWNvLmVkaXRvci5zZXRNb2RlbExhbmd1YWdlKG1vZGVsLCBsYW5ndWFnZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBkaWZmIGVkaXRvciwgdXBkYXRlIGJvdGggbW9kZWxzXG4gICAgICBjb25zdCBkaWZmRWRpdG9yID0gdGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lRGlmZkVkaXRvcjtcbiAgICAgIGNvbnN0IG9yaWdpbmFsTW9kZWwgPSBkaWZmRWRpdG9yLmdldE9yaWdpbmFsRWRpdG9yKCkuZ2V0TW9kZWwoKTtcbiAgICAgIGNvbnN0IG1vZGlmaWVkTW9kZWwgPSBkaWZmRWRpdG9yLmdldE1vZGlmaWVkRWRpdG9yKCkuZ2V0TW9kZWwoKTtcblxuICAgICAgaWYgKG9yaWdpbmFsTW9kZWwpIHtcbiAgICAgICAgd2luZG93Lm1vbmFjby5lZGl0b3Iuc2V0TW9kZWxMYW5ndWFnZShvcmlnaW5hbE1vZGVsLCBsYW5ndWFnZSk7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZWRNb2RlbCkge1xuICAgICAgICB3aW5kb3cubW9uYWNvLmVkaXRvci5zZXRNb2RlbExhbmd1YWdlKG1vZGlmaWVkTW9kZWwsIGxhbmd1YWdlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVJlYWRPbmx5KCkge1xuICAgIGlmICghdGhpcy5lZGl0b3IpIHJldHVybjtcblxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdub3JtYWwnKSB7XG4gICAgICAodGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lQ29kZUVkaXRvcikudXBkYXRlT3B0aW9ucyh7IHJlYWRPbmx5OiB0aGlzLnJlYWRPbmx5IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaWZmRWRpdG9yID0gdGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lRGlmZkVkaXRvcjtcbiAgICAgIGRpZmZFZGl0b3IuZ2V0TW9kaWZpZWRFZGl0b3IoKS51cGRhdGVPcHRpb25zKHsgcmVhZE9ubHk6IHRoaXMucmVhZE9ubHkgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTYXZlKCkge1xuICAgIGlmICh0aGlzLnJlYWRPbmx5IHx8ICF0aGlzLmVkaXRvciB8fCB0aGlzLm1vZGUgPT09ICdkaWZmJykgcmV0dXJuO1xuXG4gICAgY29uc3QgY29udGVudCA9ICh0aGlzLmVkaXRvciBhcyBlZGl0b3IuSVN0YW5kYWxvbmVDb2RlRWRpdG9yKS5nZXRWYWx1ZSgpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudCgnc2F2ZScsIHtcbiAgICAgICAgZGV0YWlsOiB7IGNvbnRlbnQgfSxcbiAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZURpZmZNb2RlKCkge1xuICAgIGlmICh0aGlzLm1vZGUgIT09ICdkaWZmJykgcmV0dXJuO1xuXG4gICAgdGhpcy5kaWZmTW9kZSA9IHRoaXMuZGlmZk1vZGUgPT09ICdpbmxpbmUnID8gJ3NpZGVCeVNpZGUnIDogJ2lubGluZSc7XG4gICAgLy8gU3RvcmUgY3VycmVudCBtb2RlbHMgdG8gcmV1c2VcbiAgICBsZXQgb3JpZ2luYWxDb250ZW50ID0gJyc7XG4gICAgbGV0IG1vZGlmaWVkQ29udGVudCA9ICcnO1xuXG4gICAgaWYgKHRoaXMuZWRpdG9yKSB7XG4gICAgICBjb25zdCBkaWZmRWRpdG9yID0gdGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lRGlmZkVkaXRvcjtcbiAgICAgIGNvbnN0IG1vZGVsID0gZGlmZkVkaXRvci5nZXRNb2RlbCgpO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG9yaWdpbmFsQ29udGVudCA9IG1vZGVsLm9yaWdpbmFsPy5nZXRWYWx1ZSgpIHx8IHRoaXMub3JpZ2luYWxDb250ZW50IHx8ICcnO1xuICAgICAgICBtb2RpZmllZENvbnRlbnQgPSBtb2RlbC5tb2RpZmllZD8uZ2V0VmFsdWUoKSB8fCB0aGlzLm1vZGlmaWVkQ29udGVudCB8fCAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY29udGVudCBiZWZvcmUgcmVjcmVhdGluZ1xuICAgIHRoaXMub3JpZ2luYWxDb250ZW50ID0gb3JpZ2luYWxDb250ZW50O1xuICAgIHRoaXMubW9kaWZpZWRDb250ZW50ID0gbW9kaWZpZWRDb250ZW50O1xuXG4gICAgdGhpcy5yZWNyZWF0ZUVkaXRvcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNwb3NlRWRpdG9yKCkge1xuICAgIGlmICh0aGlzLmVkaXRvcikge1xuICAgICAgLy8gRm9yIGRpZmYgZWRpdG9yLCB3ZSBuZWVkIHRvIGhhbmRsZSBtb2RlbCBkaXNwb3NhbCBjYXJlZnVsbHlcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdkaWZmJykge1xuICAgICAgICBjb25zdCBkaWZmRWRpdG9yID0gdGhpcy5lZGl0b3IgYXMgZWRpdG9yLklTdGFuZGFsb25lRGlmZkVkaXRvcjtcblxuICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbW9kZWwgYmVmb3JlIGNsZWFyaW5nXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb2RlbCA9IGRpZmZFZGl0b3IuZ2V0TW9kZWwoKTtcblxuICAgICAgICAvLyBDbGVhciB0aGUgbW9kZWwgZnJvbSB0aGUgZWRpdG9yIGZpcnN0IHRvIHByZXZlbnQgZGlzcG9zYWwgZXJyb3JzXG4gICAgICAgIGRpZmZFZGl0b3Iuc2V0TW9kZWwobnVsbCk7XG5cbiAgICAgICAgLy8gTm93IHNhZmVseSBkaXNwb3NlIHRoZSBtb2RlbHMgYWZ0ZXIgdGhleSdyZSBkZXRhY2hlZFxuICAgICAgICBpZiAoY3VycmVudE1vZGVsKSB7XG4gICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIGVkaXRvciBoYXMgcmVsZWFzZWQgdGhlIG1vZGVsc1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudE1vZGVsLm9yaWdpbmFsPy5kaXNwb3NlKCk7XG4gICAgICAgICAgICBjdXJyZW50TW9kZWwubW9kaWZpZWQ/LmRpc3Bvc2UoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEaXNwb3NlIHRoZSBlZGl0b3JcbiAgICAgIHRoaXMuZWRpdG9yLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuZWRpdG9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwibW9uYWNvLWVkaXRvci1yb290XCJcbiAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IHJlbGF0aXZlO1wiXG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImVkaXRvci1jb250YWluZXJcIlxuICAgICAgICAgICR7cmVmKHRoaXMuY29udGFpbmVyUmVmKX1cbiAgICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogcmdiKHZhcigtLWNvbG9yLWJnLXNlY29uZGFyeSkpO1wiXG4gICAgICAgID5cbiAgICAgICAgICAke1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdcbiAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwibG9hZGluZ1wiXG4gICAgICAgICAgICAgICAgICBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IGNvbG9yOiByZ2IodmFyKC0tY29sb3ItdGV4dC1tdXRlZCkpOyBmb250LWZhbWlseTogdWktbW9ub3NwYWNlLCBtb25vc3BhY2U7XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBMb2FkaW5nIGVkaXRvci4uLlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogJydcbiAgICAgICAgICB9XG4gICAgICAgICAgJHtcbiAgICAgICAgICAgIHRoaXMuc2hvd01vZGVUb2dnbGUgJiYgdGhpcy5tb2RlID09PSAnZGlmZicgJiYgIXRoaXMuaXNMb2FkaW5nXG4gICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cIm1vZGUtdG9nZ2xlXCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDEwcHg7IHJpZ2h0OiAxMHB4OyB6LWluZGV4OiAxMDsgYmFja2dyb3VuZDogcmdiKHZhcigtLWNvbG9yLXN1cmZhY2UpKTsgYm9yZGVyOiAxcHggc29saWQgcmdiKHZhcigtLWNvbG9yLWJvcmRlcikpOyBjb2xvcjogcmdiKHZhcigtLWNvbG9yLXRleHQpKTsgcGFkZGluZzogNHB4IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDEycHg7IGN1cnNvcjogcG9pbnRlcjtcIlxuICAgICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy50b2dnbGVEaWZmTW9kZX1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVG9nZ2xlIGJldHdlZW4gaW5saW5lIGFuZCBzaWRlLWJ5LXNpZGUgZGlmZlwiXG4gICAgICAgICAgICAgICAgICBAbW91c2VlbnRlcj0keyhlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGUudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICdyZ2IodmFyKC0tY29sb3Itc3VyZmFjZS1ob3ZlcikpJztcbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYih2YXIoLS1jb2xvci1ib3JkZXItZm9jdXMpKSc7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgQG1vdXNlbGVhdmU9JHsoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBlLnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAncmdiKHZhcigtLWNvbG9yLXN1cmZhY2UpKSc7XG4gICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZ2IodmFyKC0tY29sb3ItYm9yZGVyKSknO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAke3RoaXMuZGlmZk1vZGUgPT09ICdpbmxpbmUnID8gJ1NpZGUgYnkgU2lkZScgOiAnSW5saW5lJ31cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICAnbW9uYWNvLWVkaXRvcic6IE1vbmFjb0VkaXRvcjtcbiAgfVxufVxuIiwgIi8qKlxuICogTW9uYWNvIEVkaXRvciBMb2FkZXJcbiAqXG4gKiBIYW5kbGVzIGxvYWRpbmcgYW5kIGluaXRpYWxpemF0aW9uIG9mIE1vbmFjbyBFZGl0b3IgZm9yIHRoZSBhcHBsaWNhdGlvbi5cbiAqIFRoaXMgbW9kdWxlIGVuc3VyZXMgTW9uYWNvIGlzIHByb3Blcmx5IGxvYWRlZCBhbmQgY29uZmlndXJlZCBiZWZvcmUgdXNlLlxuICovXG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tICcuL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBpc0RhcmtNb2RlIH0gZnJvbSAnLi90aGVtZS11dGlscy5qcyc7XG5cbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcignbW9uYWNvLWxvYWRlcicpO1xuXG4vLyBEZWNsYXJlIG1vbmFjbyBvbiB3aW5kb3dcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgbW9uYWNvOiB0eXBlb2YgaW1wb3J0KCdtb25hY28tZWRpdG9yJyk7XG4gICAgcmVxdWlyZToge1xuICAgICAgKGRlcGVuZGVuY2llczogc3RyaW5nW10sIGNhbGxiYWNrOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkKTogdm9pZDtcbiAgICAgIGNvbmZpZzogKGNvbmZpZzogeyBwYXRoczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSB9KSA9PiB2b2lkO1xuICAgIH07XG4gIH1cbn1cblxuLy8gRmxhZyB0byB0cmFjayBpZiBNb25hY28gaGFzIGJlZW4gaW5pdGlhbGl6ZWRcbmxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5sZXQgbG9hZGluZ1Byb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBMb2FkIE1vbmFjbyBFZGl0b3IgdXNpbmcgZHluYW1pYyBpbXBvcnRzIHdpdGggbGF6eSBsb2FkaW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvYWRNb25hY29FZGl0b3IoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChsb2FkaW5nUHJvbWlzZSkgcmV0dXJuIGxvYWRpbmdQcm9taXNlO1xuXG4gIGxvYWRpbmdQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vIFVzZSByZXF1ZXN0SWRsZUNhbGxiYWNrIGZvciBsYXp5IGxvYWRpbmcgd2hlbiB0aGUgYnJvd3NlciBpcyBpZGxlXG4gICAgY29uc3QgbG9hZFdoZW5JZGxlID0gKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIHNjcmlwdCB0YWcgZm9yIGxvYWRlci5qc1xuICAgICAgY29uc3QgbG9hZGVyU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICBsb2FkZXJTY3JpcHQuc3JjID0gJy9tb25hY28tZWRpdG9yL3ZzL2xvYWRlci5qcyc7XG5cbiAgICAgIC8vIFNldCBsb2FkaW5nIGF0dHJpYnV0ZXMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgbG9hZGVyU2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgIGxvYWRlclNjcmlwdC5kZWZlciA9IHRydWU7XG5cbiAgICAgIGxvYWRlclNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIC8vIENvbmZpZ3VyZSByZXF1aXJlXG4gICAgICAgIHdpbmRvdy5yZXF1aXJlLmNvbmZpZyh7XG4gICAgICAgICAgcGF0aHM6IHtcbiAgICAgICAgICAgIHZzOiAnL21vbmFjby1lZGl0b3IvdnMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIERpc2FibGUgd29ya2VycyAtIHRoZXkgaW50ZXJmZXJlIHdpdGggZGlmZiBjb21wdXRhdGlvblxuICAgICAgICAvLyBNb25hY28gd2lsbCBmYWxsIGJhY2sgdG8gc3luY2hyb25vdXMgbW9kZSB3aGljaCB3b3JrcyBmaW5lXG4gICAgICAgIHdpbmRvdy5Nb25hY29FbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICBnZXRXb3JrZXI6IChfd29ya2VySWQ6IHN0cmluZywgX2xhYmVsOiBzdHJpbmcpOiBXb3JrZXIgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIGEgZHVtbXkgd29ya2VyIHRoYXQgd2lsbCBuZXZlciBiZSB1c2VkXG4gICAgICAgICAgICAvLyBNb25hY28gd2lsbCBmYWxsIGJhY2sgdG8gc3luY2hyb25vdXMgbW9kZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXb3JrZXIoJ2RhdGE6LCcpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTG9hZCBtb25hY28gd2l0aCBtaW5pbWFsIGVzc2VudGlhbCBtb2R1bGVzIGZpcnN0XG4gICAgICAgIHdpbmRvdy5yZXF1aXJlKFsndnMvZWRpdG9yL2VkaXRvci5tYWluJ10sICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoJ01vbmFjbyBFZGl0b3IgbG9hZGVkIHZpYSBBTUQgd2l0aCBsYXp5IGxvYWRpbmcnKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgbG9hZGVyU2NyaXB0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIE1vbmFjbyBsb2FkZXIgc2NyaXB0JykpO1xuICAgICAgfTtcblxuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsb2FkZXJTY3JpcHQpO1xuICAgIH07XG5cbiAgICAvLyBVc2UgcmVxdWVzdElkbGVDYWxsYmFjayBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBzZXRUaW1lb3V0IHdpdGggbG9uZ2VyIGRlbGF5XG4gICAgaWYgKCdyZXF1ZXN0SWRsZUNhbGxiYWNrJyBpbiB3aW5kb3cpIHtcbiAgICAgIHJlcXVlc3RJZGxlQ2FsbGJhY2sobG9hZFdoZW5JZGxlLCB7IHRpbWVvdXQ6IDIwMDAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQobG9hZFdoZW5JZGxlLCAxMDApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxvYWRpbmdQcm9taXNlO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgTW9uYWNvIEVkaXRvciB3aXRoIGN1c3RvbSBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplTW9uYWNvKCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoaXNJbml0aWFsaXplZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdMb2FkaW5nIE1vbmFjbyBFZGl0b3IuLi4nKTtcblxuICAgIC8vIExvYWQgTW9uYWNvIGlmIG5vdCBhbHJlYWR5IGxvYWRlZFxuICAgIGlmICghd2luZG93Lm1vbmFjbykge1xuICAgICAgYXdhaXQgbG9hZE1vbmFjb0VkaXRvcigpO1xuICAgIH1cblxuICAgIGxvZ2dlci5kZWJ1ZygnSW5pdGlhbGl6aW5nIE1vbmFjbyBFZGl0b3IuLi4nKTtcblxuICAgIC8vIE1ha2UgTW9uYWNvIGF2YWlsYWJsZSBnbG9iYWxseVxuICAgIGNvbnN0IG1vbmFjbyA9IHdpbmRvdy5tb25hY287XG5cbiAgICAvLyBDb25maWd1cmUgbGFuZ3VhZ2VzXG4gICAgbW9uYWNvLmxhbmd1YWdlcy5yZWdpc3Rlcih7IGlkOiAnc2hlbGwnIH0pO1xuICAgIG1vbmFjby5sYW5ndWFnZXMuc2V0TW9uYXJjaFRva2Vuc1Byb3ZpZGVyKCdzaGVsbCcsIHtcbiAgICAgIHRva2VuaXplcjoge1xuICAgICAgICByb290OiBbXG4gICAgICAgICAgWy9eIy4qJC8sICdjb21tZW50J10sXG4gICAgICAgICAgWy9cXCRcXHcrLywgJ3ZhcmlhYmxlJ10sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgL1xcYihlY2hvfGNkfGxzfGdyZXB8ZmluZHxjaG1vZHxta2RpcnxybXxjcHxtdnx0b3VjaHxjYXR8c2VkfGF3a3xjdXJsfHdnZXR8Z2l0fHBucG18bnBtfHlhcm58ZG9ja2VyfGt1YmVjdGwpXFxiLyxcbiAgICAgICAgICAgICdrZXl3b3JkJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIFsvXCIoW15cIlxcXFxdfFxcXFwuKSpcIi8sICdzdHJpbmcnXSxcbiAgICAgICAgICBbLycoW14nXFxcXF18XFxcXC4pKicvLCAnc3RyaW5nJ10sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgdGhlbWUgYmFzZWQgb24gY3VycmVudCB0aGVtZVxuICAgIG1vbmFjby5lZGl0b3Iuc2V0VGhlbWUoaXNEYXJrTW9kZSgpID8gJ3ZzLWRhcmsnIDogJ3ZzJyk7XG5cbiAgICAvLyBXYXRjaCBmb3IgdGhlbWUgY2hhbmdlc1xuICAgIGNvbnN0IHRoZW1lT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICBtb25hY28uZWRpdG9yLnNldFRoZW1lKGlzRGFya01vZGUoKSA/ICd2cy1kYXJrJyA6ICd2cycpO1xuICAgIH0pO1xuXG4gICAgdGhlbWVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydkYXRhLXRoZW1lJ10sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY3VzdG9tIHRoZW1lcyBpZiBuZWVkZWRcbiAgICAvKm1vbmFjby5lZGl0b3IuZGVmaW5lVGhlbWUoJ3ZpYmV0dW5uZWwtZGFyaycsIHtcbiAgICAgIGJhc2U6ICd2cy1kYXJrJyxcbiAgICAgIGluaGVyaXQ6IHRydWUsXG4gICAgICBydWxlczogW1xuICAgICAgICB7IHRva2VuOiAnY29tbWVudCcsIGZvcmVncm91bmQ6ICc2MDhiNGUnIH0sXG4gICAgICAgIHsgdG9rZW46ICdrZXl3b3JkJywgZm9yZWdyb3VuZDogJzU2OWNkNicgfSxcbiAgICAgICAgeyB0b2tlbjogJ3N0cmluZycsIGZvcmVncm91bmQ6ICdjZTkxNzgnIH0sXG4gICAgICAgIHsgdG9rZW46ICdudW1iZXInLCBmb3JlZ3JvdW5kOiAnYjVjZWE4JyB9LFxuICAgICAgICB7IHRva2VuOiAndHlwZScsIGZvcmVncm91bmQ6ICc0ZWM5YjAnIH0sXG4gICAgICAgIHsgdG9rZW46ICdjbGFzcycsIGZvcmVncm91bmQ6ICc0ZWM5YjAnIH0sXG4gICAgICAgIHsgdG9rZW46ICdmdW5jdGlvbicsIGZvcmVncm91bmQ6ICdkY2RjYWEnIH0sXG4gICAgICAgIHsgdG9rZW46ICd2YXJpYWJsZScsIGZvcmVncm91bmQ6ICc5Y2RjZmUnIH0sXG4gICAgICAgIHsgdG9rZW46ICdjb25zdGFudCcsIGZvcmVncm91bmQ6ICc0ZmMxZmYnIH0sXG4gICAgICAgIHsgdG9rZW46ICdwYXJhbWV0ZXInLCBmb3JlZ3JvdW5kOiAnOWNkY2ZlJyB9LFxuICAgICAgICB7IHRva2VuOiAncHJvcGVydHknLCBmb3JlZ3JvdW5kOiAnOWNkY2ZlJyB9LFxuICAgICAgICB7IHRva2VuOiAncHVuY3R1YXRpb24nLCBmb3JlZ3JvdW5kOiAnZDRkNGQ0JyB9LFxuICAgICAgICB7IHRva2VuOiAnb3BlcmF0b3InLCBmb3JlZ3JvdW5kOiAnZDRkNGQ0JyB9LFxuICAgICAgICB7IHRva2VuOiAnbmFtZXNwYWNlJywgZm9yZWdyb3VuZDogJzRlYzliMCcgfSxcbiAgICAgIF0sXG4gICAgICBjb2xvcnM6IHtcbiAgICAgICAgJ2VkaXRvci5iYWNrZ3JvdW5kJzogJyMxZTFlMWUnLFxuICAgICAgICAnZWRpdG9yLmZvcmVncm91bmQnOiAnI2Q0ZDRkNCcsXG4gICAgICAgICdlZGl0b3JMaW5lTnVtYmVyLmZvcmVncm91bmQnOiAnIzg1ODU4NScsXG4gICAgICAgICdlZGl0b3JMaW5lTnVtYmVyLmFjdGl2ZUZvcmVncm91bmQnOiAnI2M2YzZjNicsXG4gICAgICAgICdlZGl0b3Iuc2VsZWN0aW9uQmFja2dyb3VuZCc6ICcjMjY0Zjc4JyxcbiAgICAgICAgJ2VkaXRvci5saW5lSGlnaGxpZ2h0QmFja2dyb3VuZCc6ICcjMmEyYTJhJyxcbiAgICAgICAgJ2VkaXRvckN1cnNvci5mb3JlZ3JvdW5kJzogJyMxMGI5ODEnLFxuICAgICAgICAnZWRpdG9yLmZpbmRNYXRjaEJhY2tncm91bmQnOiAnIzUxNWM2YScsXG4gICAgICAgICdlZGl0b3IuZmluZE1hdGNoSGlnaGxpZ2h0QmFja2dyb3VuZCc6ICcjZWE1ZTVlNTUnLFxuICAgICAgICAnZWRpdG9ySW5kZW50R3VpZGUuYmFja2dyb3VuZCc6ICcjNDA0MDQwJyxcbiAgICAgICAgJ2VkaXRvckluZGVudEd1aWRlLmFjdGl2ZUJhY2tncm91bmQnOiAnIzcwNzA3MCcsXG4gICAgICB9LFxuICAgIH0pOyovXG5cbiAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICBsb2dnZXIuZGVidWcoJ01vbmFjbyBFZGl0b3IgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNb25hY28gRWRpdG9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBNb25hY28gaXMgbG9hZGVkIGFuZCByZWFkeVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlTW9uYWNvTG9hZGVkKCk6IFByb21pc2U8dHlwZW9mIGltcG9ydCgnbW9uYWNvLWVkaXRvcicpPiB7XG4gIGF3YWl0IGluaXRpYWxpemVNb25hY28oKTtcbiAgcmV0dXJuIHdpbmRvdy5tb25hY287XG59XG5cbi8vIEV4cG9ydCBtb25hY28gZ2V0dGVyIC0gdXNlIGEgZ2V0dGVyIHRvIGF2b2lkIGFjY2Vzc2luZyB3aW5kb3cgYXQgbW9kdWxlIGxvYWQgdGltZVxuZXhwb3J0IGNvbnN0IG1vbmFjbyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93Lm1vbmFjbyA6IHVuZGVmaW5lZDtcbiIsICJpbXBvcnQgeyBodG1sLCBMaXRFbGVtZW50IH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL21vbmFjby1lZGl0b3IuanMnO1xuaW1wb3J0IHsgWl9JTkRFWCB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbkBjdXN0b21FbGVtZW50KCdtb25hY28tZWRpdG9yLXRlc3QnKVxuZXhwb3J0IGNsYXNzIE1vbmFjb0VkaXRvclRlc3QgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIEBzdGF0ZSgpIHByaXZhdGUgbW9kZTogJ25vcm1hbCcgfCAnZGlmZicgPSAnZGlmZic7XG4gIEBzdGF0ZSgpIHByaXZhdGUgcmVhZE9ubHkgPSBmYWxzZTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBzaG93TW9kZVRvZ2dsZSA9IHRydWU7XG4gIEBzdGF0ZSgpIHByaXZhdGUgbGFuZ3VhZ2UgPSAndHlwZXNjcmlwdCc7XG4gIEBzdGF0ZSgpIHByaXZhdGUgY29udGVudCA9ICcnO1xuICBAc3RhdGUoKSBwcml2YXRlIG9yaWdpbmFsQ29udGVudCA9ICcnO1xuICBAc3RhdGUoKSBwcml2YXRlIG1vZGlmaWVkQ29udGVudCA9ICcnO1xuICBAc3RhdGUoKSBwcml2YXRlIHNhdmVkQ29udGVudCA9ICcnO1xuXG4gIHByaXZhdGUgc2FtcGxlQ29kZSA9IHtcbiAgICB0eXBlc2NyaXB0OiBgLy8gVHlwZVNjcmlwdCBFeGFtcGxlXG5pbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG59XG5cbmNsYXNzIFVzZXJTZXJ2aWNlIHtcbiAgcHJpdmF0ZSB1c2VyczogVXNlcltdID0gW107XG5cbiAgYXN5bmMgZ2V0VXNlcihpZDogbnVtYmVyKTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMudXNlcnMuZmluZCh1c2VyID0+IHVzZXIuaWQgPT09IGlkKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVVzZXIodXNlcjogT21pdDxVc2VyLCAnaWQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IG5ld1VzZXI6IFVzZXIgPSB7XG4gICAgICAuLi51c2VyLFxuICAgICAgaWQ6IHRoaXMudXNlcnMubGVuZ3RoICsgMVxuICAgIH07XG4gICAgdGhpcy51c2Vycy5wdXNoKG5ld1VzZXIpO1xuICAgIHJldHVybiBuZXdVc2VyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJTZXJ2aWNlO2AsXG4gICAgamF2YXNjcmlwdDogYC8vIEphdmFTY3JpcHQgRXhhbXBsZVxuY2xhc3MgQ2FsY3VsYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzdWx0ID0gMDtcbiAgfVxuXG4gIGFkZChhLCBiKSB7XG4gICAgdGhpcy5yZXN1bHQgPSBhICsgYjtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gIH1cblxuICBzdWJ0cmFjdChhLCBiKSB7XG4gICAgdGhpcy5yZXN1bHQgPSBhIC0gYjtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gIH1cblxuICBtdWx0aXBseShhLCBiKSB7XG4gICAgdGhpcy5yZXN1bHQgPSBhICogYjtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gIH1cblxuICBkaXZpZGUoYSwgYikge1xuICAgIGlmIChiID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpdmlzaW9uIGJ5IHplcm8nKTtcbiAgICB9XG4gICAgdGhpcy5yZXN1bHQgPSBhIC8gYjtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYWxjdWxhdG9yO2AsXG4gICAgcHl0aG9uOiBgIyBQeXRob24gRXhhbXBsZVxuaW1wb3J0IGFzeW5jaW9cbmZyb20gdHlwaW5nIGltcG9ydCBMaXN0LCBPcHRpb25hbFxuXG5jbGFzcyBUYXNrTWFuYWdlcjpcbiAgICBkZWYgX19pbml0X18oc2VsZik6XG4gICAgICAgIHNlbGYudGFza3M6IExpc3RbYXN5bmNpby5UYXNrXSA9IFtdXG4gICAgICAgIHNlbGYucmVzdWx0czogTGlzdFthbnldID0gW11cbiAgICBcbiAgICBhc3luYyBkZWYgYWRkX3Rhc2soc2VsZiwgY29ybyk6XG4gICAgICAgIFwiXCJcIkFkZCBhIGNvcm91dGluZSBhcyBhIHRhc2tcIlwiXCJcbiAgICAgICAgdGFzayA9IGFzeW5jaW8uY3JlYXRlX3Rhc2soY29ybylcbiAgICAgICAgc2VsZi50YXNrcy5hcHBlbmQodGFzaylcbiAgICAgICAgcmV0dXJuIHRhc2tcbiAgICBcbiAgICBhc3luYyBkZWYgd2FpdF9hbGwoc2VsZikgLT4gTGlzdFthbnldOlxuICAgICAgICBcIlwiXCJXYWl0IGZvciBhbGwgdGFza3MgdG8gY29tcGxldGVcIlwiXCJcbiAgICAgICAgaWYgbm90IHNlbGYudGFza3M6XG4gICAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgXG4gICAgICAgIHNlbGYucmVzdWx0cyA9IGF3YWl0IGFzeW5jaW8uZ2F0aGVyKCpzZWxmLnRhc2tzKVxuICAgICAgICByZXR1cm4gc2VsZi5yZXN1bHRzXG4gICAgXG4gICAgZGVmIGNhbmNlbF9hbGwoc2VsZik6XG4gICAgICAgIFwiXCJcIkNhbmNlbCBhbGwgcGVuZGluZyB0YXNrc1wiXCJcIlxuICAgICAgICBmb3IgdGFzayBpbiBzZWxmLnRhc2tzOlxuICAgICAgICAgICAgaWYgbm90IHRhc2suZG9uZSgpOlxuICAgICAgICAgICAgICAgIHRhc2suY2FuY2VsKClcblxuIyBFeGFtcGxlIHVzYWdlXG5hc3luYyBkZWYgbWFpbigpOlxuICAgIG1hbmFnZXIgPSBUYXNrTWFuYWdlcigpXG4gICAgYXdhaXQgbWFuYWdlci5hZGRfdGFzayhhc3luY2lvLnNsZWVwKDEpKVxuICAgIGF3YWl0IG1hbmFnZXIud2FpdF9hbGwoKWAsXG4gICAganNvbjogYHtcbiAgXCJuYW1lXCI6IFwibW9uYWNvLWVkaXRvci10ZXN0XCIsXG4gIFwidmVyc2lvblwiOiBcIjEuMC4wXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJNb25hY28gRWRpdG9yIHRlc3QgY29tcG9uZW50XCIsXG4gIFwiZGVwZW5kZW5jaWVzXCI6IHtcbiAgICBcIm1vbmFjby1lZGl0b3JcIjogXCJeMC41Mi4yXCIsXG4gICAgXCJsaXRcIjogXCJeMy4zLjBcIlxuICB9LFxuICBcInNjcmlwdHNcIjoge1xuICAgIFwidGVzdFwiOiBcImVjaG8gJ0Vycm9yOiBubyB0ZXN0IHNwZWNpZmllZCcgJiYgZXhpdCAxXCIsXG4gICAgXCJidWlsZFwiOiBcInRzYyAmJiB2aXRlIGJ1aWxkXCIsXG4gICAgXCJkZXZcIjogXCJ2aXRlXCJcbiAgfSxcbiAgXCJrZXl3b3Jkc1wiOiBbXCJtb25hY29cIiwgXCJlZGl0b3JcIiwgXCJ0ZXN0XCJdLFxuICBcImF1dGhvclwiOiBcIlZpYmVUdW5uZWwgVGVhbVwiLFxuICBcImxpY2Vuc2VcIjogXCJNSVRcIlxufWAsXG4gIH07XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmxvYWRTYW1wbGVDb250ZW50KCk7XG4gIH1cblxuICBwcml2YXRlIGxvYWRTYW1wbGVDb250ZW50KCkge1xuICAgIGNvbnN0IGJhc2VDb250ZW50ID1cbiAgICAgIHRoaXMuc2FtcGxlQ29kZVt0aGlzLmxhbmd1YWdlIGFzIGtleW9mIHR5cGVvZiB0aGlzLnNhbXBsZUNvZGVdIHx8IHRoaXMuc2FtcGxlQ29kZS50eXBlc2NyaXB0O1xuXG4gICAgLy8gRm9yIG5vcm1hbCBtb2RlXG4gICAgdGhpcy5jb250ZW50ID0gYmFzZUNvbnRlbnQ7XG5cbiAgICAvLyBBbHdheXMgc2V0IGRpZmYgY29udGVudCBzbyBpdCdzIHJlYWR5IHdoZW4gc3dpdGNoaW5nIG1vZGVzXG4gICAgdGhpcy5vcmlnaW5hbENvbnRlbnQgPSBiYXNlQ29udGVudDtcbiAgICB0aGlzLm1vZGlmaWVkQ29udGVudCA9IGAke2Jhc2VDb250ZW50fVxcblxcbi8vIE1vZGlmaWVkIGJ5IHVzZXJcXG5jb25zb2xlLmxvZyhcIkNoYW5nZXMgbWFkZSFcIik7YDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTW9kZUNoYW5nZShuZXdNb2RlOiAnbm9ybWFsJyB8ICdkaWZmJykge1xuICAgIHRoaXMubW9kZSA9IG5ld01vZGU7XG4gICAgdGhpcy5sb2FkU2FtcGxlQ29udGVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVMYW5ndWFnZUNoYW5nZShlOiBFdmVudCkge1xuICAgIGNvbnN0IHNlbGVjdCA9IGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHRoaXMubGFuZ3VhZ2UgPSBzZWxlY3QudmFsdWU7XG4gICAgdGhpcy5sb2FkU2FtcGxlQ29udGVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTYXZlKGU6IEN1c3RvbUV2ZW50KSB7XG4gICAgdGhpcy5zYXZlZENvbnRlbnQgPSBlLmRldGFpbC5jb250ZW50O1xuICAgIGNvbnNvbGUubG9nKCdDb250ZW50IHNhdmVkOicsIHRoaXMuc2F2ZWRDb250ZW50KTtcbiAgICBhbGVydCgnQ29udGVudCBzYXZlZCEgQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29udGVudENoYW5nZWQoZTogQ3VzdG9tRXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnQ29udGVudCBjaGFuZ2VkOicsIGUuZGV0YWlsLmNvbnRlbnQpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cImgtc2NyZWVuIGZsZXggZmxleC1jb2wgYmctYmFja2dyb3VuZCB0ZXh0LWZvcmVncm91bmRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLXN1cmZhY2UgYm9yZGVyLWIgYm9yZGVyLWdyYXktODAwIHAtNFwiPlxuICAgICAgICAgIDxoMSBjbGFzcz1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtNDAwIG1iLTRcIj5Nb25hY28gRWRpdG9yIFRlc3Q8L2gxPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGdhcC0zIGZsZXgtd3JhcCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwXCI+TW9kZTo8L3NwYW4+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzPVwiJHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPT09ICdub3JtYWwnXG4gICAgICAgICAgICAgICAgICA/ICdiZy1lbWVyYWxkLTUwMCB0ZXh0LWJhY2tncm91bmQnXG4gICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTgwMCBob3ZlcjpiZy1ncmF5LTcwMCB0ZXh0LWZvcmVncm91bmQnXG4gICAgICAgICAgICAgIH0gcHgtMyBweS0xLjUgYm9yZGVyICR7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlID09PSAnbm9ybWFsJ1xuICAgICAgICAgICAgICAgICAgPyAnYm9yZGVyLWVtZXJhbGQtNTAwJ1xuICAgICAgICAgICAgICAgICAgOiAnYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCdcbiAgICAgICAgICAgICAgfSByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZU1vZGVDaGFuZ2UoJ25vcm1hbCcpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBOb3JtYWxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzcz1cIiR7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlID09PSAnZGlmZidcbiAgICAgICAgICAgICAgICAgID8gJ2JnLWVtZXJhbGQtNTAwIHRleHQtYmFja2dyb3VuZCdcbiAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktODAwIGhvdmVyOmJnLWdyYXktNzAwIHRleHQtZm9yZWdyb3VuZCdcbiAgICAgICAgICAgICAgfSBweC0zIHB5LTEuNSBib3JkZXIgJHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPT09ICdkaWZmJ1xuICAgICAgICAgICAgICAgICAgPyAnYm9yZGVyLWVtZXJhbGQtNTAwJ1xuICAgICAgICAgICAgICAgICAgOiAnYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCdcbiAgICAgICAgICAgICAgfSByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZU1vZGVDaGFuZ2UoJ2RpZmYnKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgRGlmZlxuICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwIG1sLTRcIj5MYW5ndWFnZTo8L3NwYW4+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIEBjaGFuZ2U9JHt0aGlzLmhhbmRsZUxhbmd1YWdlQ2hhbmdlfVxuICAgICAgICAgICAgICAudmFsdWU9JHt0aGlzLmxhbmd1YWdlfVxuICAgICAgICAgICAgICBjbGFzcz1cInB4LTMgcHktMS41IGJnLWdyYXktODAwIHRleHQtZm9yZWdyb3VuZCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIGhvdmVyOmJvcmRlci1lbWVyYWxkLTQwMCByb3VuZGVkIHRleHQtc20gY3Vyc29yLXBvaW50ZXIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1lbWVyYWxkLTQwMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ0eXBlc2NyaXB0XCI+VHlwZVNjcmlwdDwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiamF2YXNjcmlwdFwiPkphdmFTY3JpcHQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInB5dGhvblwiPlB5dGhvbjwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwianNvblwiPkpTT048L29wdGlvbj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtbC00IHRleHQtc20gY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAuY2hlY2tlZD0ke3RoaXMucmVhZE9ubHl9XG4gICAgICAgICAgICAgICAgQGNoYW5nZT0keyhlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkT25seSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ3LTQgaC00IHJvdW5kZWQgYm9yZGVyLWdyYXktNzAwIGJnLWdyYXktODAwIHRleHQtZW1lcmFsZC01MDAgZm9jdXM6cmluZy1lbWVyYWxkLTQwMCBmb2N1czpyaW5nLW9mZnNldC0wXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4+UmVhZCBPbmx5PC9zcGFuPlxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgdGhpcy5tb2RlID09PSAnZGlmZidcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtbC00IHRleHQtc20gY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAuY2hlY2tlZD0ke3RoaXMuc2hvd01vZGVUb2dnbGV9XG4gICAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT0keyhlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TW9kZVRvZ2dsZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ3LTQgaC00IHJvdW5kZWQgYm9yZGVyLWdyYXktNzAwIGJnLWdyYXktODAwIHRleHQtZW1lcmFsZC01MDAgZm9jdXM6cmluZy1lbWVyYWxkLTQwMCBmb2N1czpyaW5nLW9mZnNldC0wXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+U2hvdyBNb2RlIFRvZ2dsZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMSByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyIGJvcmRlci1ncmF5LTgwMCBtLTQgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwiYWJzb2x1dGUgdG9wLTQgcmlnaHQtNCBiZy1ibGFjay84MCBib3JkZXIgYm9yZGVyLWdyYXktODAwIHJvdW5kZWQgcHgtMyBweS0xLjUgdGV4dC14c1wiXG4gICAgICAgICAgICBzdHlsZT1cInotaW5kZXg6ICR7Wl9JTkRFWC5URVJNSU5BTF9PVkVSTEFZfTtcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXY+TW9kZTogPGNvZGUgY2xhc3M9XCJ0ZXh0LWVtZXJhbGQtNDAwXCI+JHt0aGlzLm1vZGV9PC9jb2RlPjwvZGl2PlxuICAgICAgICAgICAgPGRpdj5MYW5ndWFnZTogPGNvZGUgY2xhc3M9XCJ0ZXh0LWVtZXJhbGQtNDAwXCI+JHt0aGlzLmxhbmd1YWdlfTwvY29kZT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+UmVhZCBPbmx5OiA8Y29kZSBjbGFzcz1cInRleHQtZW1lcmFsZC00MDBcIj4ke3RoaXMucmVhZE9ubHl9PC9jb2RlPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPG1vbmFjby1lZGl0b3JcbiAgICAgICAgICAgIC5tb2RlPSR7dGhpcy5tb2RlfVxuICAgICAgICAgICAgLmNvbnRlbnQ9JHt0aGlzLmNvbnRlbnR9XG4gICAgICAgICAgICAub3JpZ2luYWxDb250ZW50PSR7dGhpcy5vcmlnaW5hbENvbnRlbnR9XG4gICAgICAgICAgICAubW9kaWZpZWRDb250ZW50PSR7dGhpcy5tb2RpZmllZENvbnRlbnR9XG4gICAgICAgICAgICAubGFuZ3VhZ2U9JHt0aGlzLmxhbmd1YWdlfVxuICAgICAgICAgICAgLnJlYWRPbmx5PSR7dGhpcy5yZWFkT25seX1cbiAgICAgICAgICAgIC5zaG93TW9kZVRvZ2dsZT0ke3RoaXMuc2hvd01vZGVUb2dnbGV9XG4gICAgICAgICAgICBAc2F2ZT0ke3RoaXMuaGFuZGxlU2F2ZX1cbiAgICAgICAgICAgIEBjb250ZW50LWNoYW5nZWQ9JHt0aGlzLmhhbmRsZUNvbnRlbnRDaGFuZ2VkfVxuICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO1wiXG4gICAgICAgICAgPjwvbW9uYWNvLWVkaXRvcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgJ21vbmFjby1lZGl0b3ItdGVzdCc6IE1vbmFjb0VkaXRvclRlc3Q7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLGNBQUFBLEtBQUFDLEdBQUEsR0FBQSxHQUNBQyxLQUFBRCxHQUFBLEdBQUE7UUFnQkEsTUFBYUUsV0FBd0JELEdBQUFFLFdBQUFBO1VBWW5DLFlBQ1VDLElBQUFBO0FBRVJDLGtCQUFBQSxHQUZRLEtBQUFELGFBQUFBLElBUk0sS0FBQUUsa0JBQWtCQyxLQUFLQyxTQUFTLElBQUlULEdBQUFVLGNBQUFBLEdBQ3BDLEtBQUFDLFdBQVdILEtBQUtELGdCQUFnQkssT0FDaEMsS0FBQUMsa0JBQWtCTCxLQUFLQyxTQUFTLElBQUlULEdBQUFVLGNBQUFBLEdBQ3BDLEtBQUFJLFdBQVdOLEtBQUtLLGdCQUFnQkQsT0FDaEMsS0FBQUcsZ0JBQWdCUCxLQUFLQyxTQUFTLElBQUlULEdBQUFVLGNBQUFBLEdBQ2xDLEtBQUFNLFNBQVNSLEtBQUtPLGNBQWNILE9BTTFDSixLQUFLUyxTQUFTLElBQUlDLE1BQVNWLEtBQUtILFVBQUFBLEdBQ2hDRyxLQUFLVyxjQUFjLEdBQ25CWCxLQUFLWSxVQUFVO1VBQ2pCO1VBRUEsSUFBQSxZQUFXQztBQUNULG1CQUFPYixLQUFLSDtVQUNkO1VBRUEsSUFBQSxVQUFxQmlCLElBQUFBO0FBRW5CLGdCQUFJZCxLQUFLSCxlQUFlaUIsR0FDdEI7QUFLRixrQkFBTUMsS0FBVyxJQUFJTCxNQUFxQkksRUFBQUE7QUFDMUMscUJBQVNyQixLQUFJLEdBQUdBLEtBQUl1QixLQUFLQyxJQUFJSCxJQUFjZCxLQUFLa0IsTUFBQUEsR0FBU3pCLEtBQ3ZEc0IsQ0FBQUEsR0FB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LEtBQUEsQ0FBQSxHQUFBQSxHQUFBLFlBQUE7QUNuVkYsY0FBQTlDLEtBQUFDLEdBQUEsR0FBQSxHQUVNKzVCLEtBQWdCLENBQ3BCLENBQUMsS0FBUSxHQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUM3QyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FDN0MsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE1BQVEsSUFBQSxHQUFTLENBQUMsTUFBUSxJQUFBLEdBQzdDLENBQUMsTUFBUSxJQUFBLEdBQVMsQ0FBQyxNQUFRLElBQUEsR0FBUyxDQUFDLE9BQVEsS0FBQSxHQUM3QyxDQUFDLE9BQVEsS0FBQSxHQUFTLENBQUMsT0FBUSxLQUFBLEdBQVMsQ0FBQyxPQUFRLEtBQUEsR0FDN0MsQ0FBQyxPQUFRLEtBQUEsR0FBUyxDQUFDLE9BQVEsS0FBQSxHQUFTLENBQUMsT0FBUSxLQUFBLEdBQzdDLENBQUMsT0FBUSxLQUFBLEdBQVMsQ0FBQyxPQUFRLEtBQUEsR0FBUyxDQUFDLE9BQVEsS0FBQSxDQUFBLEdB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UTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLE1BQ1IsY0FBYztBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsYUFBYTtBQUFBLE1BQ2IsV0FBVztBQUFBLE1BQ1gsYUFBYTtBQUFBLE1BQ2IsY0FBYztBQUFBLE1BQ2QsWUFBWTtBQUFBLE1BQ1osZUFBZTtBQUFBLE1BQ2YsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLElBQ2Y7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLE1BQ1IsY0FBYztBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsYUFBYTtBQUFBLE1BQ2IsV0FBVztBQUFBLE1BQ1gsYUFBYTtBQUFBLE1BQ2IsY0FBYztBQUFBLE1BQ2QsWUFBWTtBQUFBLE1BQ1osZUFBZTtBQUFBLE1BQ2YsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLE1BQ2IscUJBQXFCO0FBQUEsTUFDckIscUJBQXFCO0FBQUEsTUFDckIsNkJBQTZCO0FBQUEsSUFDL0I7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLE1BQ1IsY0FBYztBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsYUFBYTtBQUFBLE1BQ2IsV0FBVztBQUFBLE1BQ1gsYUFBYTtBQUFBLE1BQ2IsY0FBYztBQUFBLE1BQ2QsWUFBWTtBQUFBLE1BQ1osZUFBZTtBQUFBLE1BQ2YsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLElBQ2Y7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLE1BQ1IsY0FBYztBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsYUFBYTtBQUFBLE1BQ2IsV0FBVztBQUFBLE1BQ1gsYUFBYTtBQUFBLE1BQ2IsY0FBYztBQUFBLE1BQ2QsWUFBWTtBQUFBLE1BQ1osZUFBZTtBQUFBLE1BQ2YsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLElBQ2Y7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLE1BQ1IsY0FBYztBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFB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S0FBSyxlQUFlO0FBQUEsK0JBQ3BCLEtBQUssZUFBZTtBQUFBLHdCQUMzQixLQUFLLFFBQVE7QUFBQSx3QkFDYixLQUFLLFFBQVE7QUFBQSw4QkFDUCxLQUFLLGNBQWM7QUFBQSxvQkFDN0IsS0FBSyxVQUFVO0FBQUEsK0JBQ0osS0FBSyxvQkFBb0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNdEQ7QUFDRjtBQXhRbUI7QUFBQSxFQUFoQkMsR0FBTTtBQUFBLEdBTEksaUJBS007QUFDQTtBQUFBLEVBQWhCQSxHQUFNO0FBQUEsR0FOSSxpQkFNTTtBQUNBO0FBQUEsRUFBaEJBLEdBQU07QUFBQSxHQVBJLGlCQU9NO0FBQ0E7QUFBQSxFQUFoQkEsR0FBTTtBQUFBLEdBUkksaUJBUU07QUFDQTtBQUFBLEVBQWhCQSxHQUFNO0FBQUEsR0FUSSxpQkFTTTtBQUNBO0FBQUEsRUFBaEJBLEdBQU07QUFBQSxHQVZJLGlCQVVNO0FBQ0E7QUFBQSxFQUFoQkEsR0FBTTtBQUFBLEdBWEksaUJBV007QUFDQTtBQUFBLEVBQWhCQSxHQUFNO0FBQUEsR0FaSSxpQkFZTTtBQVpOLG1CQUFOO0FBQUEsRUFETkMsR0FBYyxvQkFBb0I7QUFBQSxHQUN0QjsiLAogICJuYW1lcyI6IFsicyIsICJpIiwgInIiLCAiQ2lyY3VsYXJMaXN0IiwgIkRpc3Bvc2FibGUiLCAiX21heExlbmd0aCIsICJzdXBlciIsICJvbkRlbGV0ZUVtaXR0ZXIiLCAidGhpcyIsICJyZWdpc3RlciIsICJFdmVudEVtaXR0ZXIiLCAib25EZWxldGUiLCAiZXZlbnQiLCAib25JbnNlcnRFbWl0dGVyIiwgIm9uSW5zZXJ0IiwgIm9uVHJpbUVtaXR0ZXIiLCAib25UcmltIiwgIl9hcnJheSIsICJBcnJheSIsICJfc3RhcnRJbmRleCIsICJfbGVuZ3RoIiwgIm1heExlbmd0aCIsICJuZXdNYXhMZW5ndGgiLCAibmV3QXJyYXkiLCAiTWF0aCIsICJtaW4iLCAibGVuZ3RoIiwgIl9nZXRDeWNsaWNJbmRleCIsICJuZXdMZW5ndGgiLCAiaW5kZXgiLCAidmFsdWUiLCAiZmlyZSIsICJyZWN5Y2xlIiwgIkVycm9yIiwgImlzRnVsbCIsICJwb3AiLCAic3RhcnQiLCAiZGVsZXRlQ291bnQiLCAiaXRlbXMiLCAiYW1vdW50IiwgImNvdW50VG9UcmltIiwgImNvdW50IiwgIm9mZnNldCIsICJzZXQiLCAiZ2V0IiwgImV4cGFuZExpc3RCeSIsICJ0IiwgIm4iLCAiZSIsICJjbG9uZSIsICJ2YWwiLCAiZGVwdGgiLCAiY2xvbmVkT2JqZWN0IiwgImlzQXJyYXkiLCAia2V5IiwgImEiLCAibyIsICJoIiwgImMiLCAibCIsICJfIiwgImQiLCAiZiIsICJ1IiwgInAiLCAiZyIsICJ2IiwgImhhc1dyaXRlU3luY1dhcm5IYXBwZW5lZCIsICJDb3JlVGVybWluYWwiLCAib25TY3JvbGwiLCAiX29uU2Nyb2xsQXBpIiwgIl9vblNjcm9sbCIsICJldiIsICJwb3NpdGlvbiIsICJjb2xzIiwgIl9idWZmZXJTZXJ2aWNlIiwgInJvd3MiLCAiYnVmZmVycyIsICJvcHRpb25zIiwgIm9wdGlvbnNTZXJ2aWNlIiwgIl93aW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzIiwgIk11dGFibGVEaXNwb3NhYmxlIiwgIl9vbkJpbmFyeSIsICJvbkJpbmFyeSIsICJfb25EYXRhIiwgIm9uRGF0YSIsICJfb25MaW5lRmVlZCIsICJvbkxpbmVGZWVkIiwgIl9vblJlc2l6ZSIsICJvblJlc2l6ZSIsICJfb25Xcml0ZVBhcnNlZCIsICJvbldyaXRlUGFyc2VkIiwgIl9pbnN0YW50aWF0aW9uU2VydmljZSIsICJJbnN0YW50aWF0aW9uU2VydmljZSIsICJPcHRpb25zU2VydmljZSIsICJzZXRTZXJ2aWNlIiwgIklPcHRpb25zU2VydmljZSIsICJjcmVhdGVJbnN0YW5jZSIsICJCdWZmZXJTZXJ2aWNlIiwgIklCdWZmZXJTZXJ2aWNlIiwgIl9sb2dTZXJ2aWNlIiwgIkxvZ1NlcnZpY2UiLCAiSUxvZ1NlcnZpY2UiLCAiY29yZVNlcnZpY2UiLCAiQ29yZVNlcnZpY2UiLCAiSUNvcmVTZXJ2aWNlIiwgImNvcmVNb3VzZVNlcnZpY2UiLCAiQ29yZU1vdXNlU2VydmljZSIsICJJQ29yZU1vdXNlU2VydmljZSIsICJ1bmljb2RlU2VydmljZSIsICJVbmljb2RlU2VydmljZSIsICJJVW5pY29kZVNlcnZpY2UiLCAiX2NoYXJzZXRTZXJ2aWNlIiwgIkNoYXJzZXRTZXJ2aWNlIiwgIklDaGFyc2V0U2VydmljZSIsICJfb3NjTGlua1NlcnZpY2UiLCAiT3NjTGlua1NlcnZpY2UiLCAiSU9zY0xpbmtTZXJ2aWNlIiwgIl9pbnB1dEhhbmRsZXIiLCAiSW5wdXRIYW5kbGVyIiwgImZvcndhcmRFdmVudCIsICJvblJlcXVlc3RTY3JvbGxUb0JvdHRvbSIsICJzY3JvbGxUb0JvdHRvbSIsICJvblVzZXJJbnB1dCIsICJfd3JpdGVCdWZmZXIiLCAiaGFuZGxlVXNlcklucHV0IiwgIm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UiLCAiX2hhbmRsZVdpbmRvd3NQdHlPcHRpb25DaGFuZ2UiLCAiYnVmZmVyIiwgInlkaXNwIiwgInNvdXJjZSIsICJtYXJrUmFuZ2VEaXJ0eSIsICJzY3JvbGxUb3AiLCAic2Nyb2xsQm90dG9tIiwgIldyaXRlQnVmZmVyIiwgImRhdGEiLCAicHJvbWlzZVJlc3VsdCIsICJwYXJzZSIsICJjYWxsYmFjayIsICJ3cml0ZSIsICJtYXhTdWJzZXF1ZW50Q2FsbHMiLCAibG9nTGV2ZWwiLCAiTG9nTGV2ZWxFbnVtIiwgIldBUk4iLCAid2FybiIsICJ3cml0ZVN5bmMiLCAid2FzVXNlcklucHV0IiwgInRyaWdnZXJEYXRhRXZlbnQiLCAieCIsICJ5IiwgImlzTmFOIiwgIm1heCIsICJNSU5JTVVNX0NPTFMiLCAiTUlOSU1VTV9ST1dTIiwgInJlc2l6ZSIsICJlcmFzZUF0dHIiLCAiaXNXcmFwcGVkIiwgInNjcm9sbCIsICJkaXNwIiwgInN1cHByZXNzU2Nyb2xsRXZlbnQiLCAic2Nyb2xsTGluZXMiLCAicGFnZUNvdW50IiwgInNjcm9sbFRvVG9wIiwgInliYXNlIiwgImxpbmUiLCAic2Nyb2xsQW1vdW50IiwgImlkIiwgInJlZ2lzdGVyRXNjSGFuZGxlciIsICJyZWdpc3RlckRjc0hhbmRsZXIiLCAicmVnaXN0ZXJDc2lIYW5kbGVyIiwgImlkZW50IiwgInJlZ2lzdGVyT3NjSGFuZGxlciIsICJfc2V0dXAiLCAicmVzZXQiLCAid2luZG93c1B0eSIsICJyYXdPcHRpb25zIiwgImJ1aWxkTnVtYmVyIiwgImJhY2tlbmQiLCAid2luZG93c01vZGUiLCAiX2VuYWJsZVdpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MiLCAiY2xlYXIiLCAiZGlzcG9zYWJsZXMiLCAicHVzaCIsICJ1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSIsICJiaW5kIiwgImZpbmFsIiwgInRvRGlzcG9zYWJsZSIsICJkaXNwb3NlIiwgIlMiLCAiX2xpc3RlbmVycyIsICJfZGlzcG9zZWQiLCAiX2V2ZW50IiwgImxpc3RlbmVyIiwgImRpc3Bvc2FibGUiLCAic3BsaWNlIiwgImFyZzEiLCAiYXJnMiIsICJxdWV1ZSIsICJjYWxsIiwgImNsZWFyTGlzdGVuZXJzIiwgImZyb20iLCAidG8iLCAiaGFuZGxlciIsICJ1bmRlZmluZWQiLCAiYiIsICJHTEVWRUwiLCAiTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCIsICJwYXJhbVRvV2luZG93T3B0aW9uIiwgIm9wdHMiLCAic2V0V2luTGluZXMiLCAicmVzdG9yZVdpbiIsICJtaW5pbWl6ZVdpbiIsICJzZXRXaW5Qb3NpdGlvbiIsICJzZXRXaW5TaXplUGl4ZWxzIiwgInJhaXNlV2luIiwgImxvd2VyV2luIiwgInJlZnJlc2hXaW4iLCAic2V0V2luU2l6ZUNoYXJzIiwgIm1heGltaXplV2luIiwgImZ1bGxzY3JlZW5XaW4iLCAiZ2V0V2luU3RhdGUiLCAiZ2V0V2luUG9zaXRpb24iLCAiZ2V0V2luU2l6ZVBpeGVscyIsICJnZXRTY3JlZW5TaXplUGl4ZWxzIiwgImdldENlbGxTaXplUGl4ZWxzIiwgImdldFdpblNpemVDaGFycyIsICJnZXRTY3JlZW5TaXplQ2hhcnMiLCAiZ2V0SWNvblRpdGxlIiwgImdldFdpblRpdGxlIiwgInB1c2hUaXRsZSIsICJwb3BUaXRsZSIsICJXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUiLCAiJHRlbXAiLCAiZ2V0QXR0ckRhdGEiLCAiX2N1ckF0dHJEYXRhIiwgIl9jb3JlU2VydmljZSIsICJfb3B0aW9uc1NlcnZpY2UiLCAiX2NvcmVNb3VzZVNlcnZpY2UiLCAiX3VuaWNvZGVTZXJ2aWNlIiwgIl9wYXJzZXIiLCAiRXNjYXBlU2VxdWVuY2VQYXJzZXIiLCAiX3BhcnNlQnVmZmVyIiwgIlVpbnQzMkFycmF5IiwgIl9zdHJpbmdEZWNvZGVyIiwgIlN0cmluZ1RvVXRmMzIiLCAiX3V0ZjhEZWNvZGVyIiwgIlV0ZjhUb1V0ZjMyIiwgIl93b3JrQ2VsbCIsICJDZWxsRGF0YSIsICJfd2luZG93VGl0bGUiLCAiX2ljb25OYW1lIiwgIl93aW5kb3dUaXRsZVN0YWNrIiwgIl9pY29uTmFtZVN0YWNrIiwgIkRFRkFVTFRfQVRUUl9EQVRBIiwgIl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwiLCAiX29uUmVxdWVzdEJlbGwiLCAib25SZXF1ZXN0QmVsbCIsICJfb25SZXF1ZXN0UmVmcmVzaFJvd3MiLCAib25SZXF1ZXN0UmVmcmVzaFJvd3MiLCAiX29uUmVxdWVzdFJlc2V0IiwgIm9uUmVxdWVzdFJlc2V0IiwgIl9vblJlcXVlc3RTZW5kRm9jdXMiLCAib25SZXF1ZXN0U2VuZEZvY3VzIiwgIl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyIiwgIm9uUmVxdWVzdFN5bmNTY3JvbGxCYXIiLCAiX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0IiwgIm9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0IiwgIl9vbkExMXlDaGFyIiwgIm9uQTExeUNoYXIiLCAiX29uQTExeVRhYiIsICJvbkExMXlUYWIiLCAiX29uQ3Vyc29yTW92ZSIsICJvbkN1cnNvck1vdmUiLCAiX29uVGl0bGVDaGFuZ2UiLCAib25UaXRsZUNoYW5nZSIsICJfb25Db2xvciIsICJvbkNvbG9yIiwgIl9wYXJzZVN0YWNrIiwgInBhdXNlZCIsICJjdXJzb3JTdGFydFgiLCAiY3Vyc29yU3RhcnRZIiwgImRlY29kZWRMZW5ndGgiLCAiX3NwZWNpYWxDb2xvcnMiLCAiX2RpcnR5Um93VHJhY2tlciIsICJEaXJ0eVJvd1RyYWNrZXIiLCAiX2FjdGl2ZUJ1ZmZlciIsICJvbkJ1ZmZlckFjdGl2YXRlIiwgImFjdGl2ZUJ1ZmZlciIsICJzZXRDc2lIYW5kbGVyRmFsbGJhY2siLCAicGFyYW1zIiwgImRlYnVnIiwgImlkZW50aWZpZXIiLCAiaWRlbnRUb1N0cmluZyIsICJ0b0FycmF5IiwgInNldEVzY0hhbmRsZXJGYWxsYmFjayIsICJzZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrIiwgImNvZGUiLCAic2V0T3NjSGFuZGxlckZhbGxiYWNrIiwgImFjdGlvbiIsICJzZXREY3NIYW5kbGVyRmFsbGJhY2siLCAicGF5bG9hZCIsICJzZXRQcmludEhhbmRsZXIiLCAiZW5kIiwgInByaW50IiwgImluc2VydENoYXJzIiwgImludGVybWVkaWF0ZXMiLCAic2Nyb2xsTGVmdCIsICJjdXJzb3JVcCIsICJzY3JvbGxSaWdodCIsICJjdXJzb3JEb3duIiwgImN1cnNvckZvcndhcmQiLCAiY3Vyc29yQmFja3dhcmQiLCAiY3Vyc29yTmV4dExpbmUiLCAiY3Vyc29yUHJlY2VkaW5nTGluZSIsICJjdXJzb3JDaGFyQWJzb2x1dGUiLCAiY3Vyc29yUG9zaXRpb24iLCAiY3Vyc29yRm9yd2FyZFRhYiIsICJlcmFzZUluRGlzcGxheSIsICJwcmVmaXgiLCAiZXJhc2VJbkxpbmUiLCAiaW5zZXJ0TGluZXMiLCAiZGVsZXRlTGluZXMiLCAiZGVsZXRlQ2hhcnMiLCAic2Nyb2xsVXAiLCAic2Nyb2xsRG93biIsICJlcmFzZUNoYXJzIiwgImN1cnNvckJhY2t3YXJkVGFiIiwgImNoYXJQb3NBYnNvbHV0ZSIsICJoUG9zaXRpb25SZWxhdGl2ZSIsICJyZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIiLCAic2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5IiwgInNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5IiwgImxpbmVQb3NBYnNvbHV0ZSIsICJ2UG9zaXRpb25SZWxhdGl2ZSIsICJoVlBvc2l0aW9uIiwgInRhYkNsZWFyIiwgInNldE1vZGUiLCAic2V0TW9kZVByaXZhdGUiLCAicmVzZXRNb2RlIiwgInJlc2V0TW9kZVByaXZhdGUiLCAiY2hhckF0dHJpYnV0ZXMiLCAiZGV2aWNlU3RhdHVzIiwgImRldmljZVN0YXR1c1ByaXZhdGUiLCAic29mdFJlc2V0IiwgInNldEN1cnNvclN0eWxlIiwgInNldFNjcm9sbFJlZ2lvbiIsICJzYXZlQ3Vyc29yIiwgIndpbmRvd09wdGlvbnMiLCAicmVzdG9yZUN1cnNvciIsICJpbnNlcnRDb2x1bW5zIiwgImRlbGV0ZUNvbHVtbnMiLCAic2VsZWN0UHJvdGVjdGVkIiwgInJlcXVlc3RNb2RlIiwgInNldEV4ZWN1dGVIYW5kbGVyIiwgIkMwIiwgIkJFTCIsICJiZWxsIiwgIkxGIiwgImxpbmVGZWVkIiwgIlZUIiwgIkZGIiwgIkNSIiwgImNhcnJpYWdlUmV0dXJuIiwgIkJTIiwgImJhY2tzcGFjZSIsICJIVCIsICJ0YWIiLCAiU08iLCAic2hpZnRPdXQiLCAiU0kiLCAic2hpZnRJbiIsICJDMSIsICJJTkQiLCAiTkVMIiwgIm5leHRMaW5lIiwgIkhUUyIsICJ0YWJTZXQiLCAiT3NjSGFuZGxlciIsICJzZXRUaXRsZSIsICJzZXRJY29uTmFtZSIsICJzZXRPclJlcG9ydEluZGV4ZWRDb2xvciIsICJzZXRIeXBlcmxpbmsiLCAic2V0T3JSZXBvcnRGZ0NvbG9yIiwgInNldE9yUmVwb3J0QmdDb2xvciIsICJzZXRPclJlcG9ydEN1cnNvckNvbG9yIiwgInJlc3RvcmVJbmRleGVkQ29sb3IiLCAicmVzdG9yZUZnQ29sb3IiLCAicmVzdG9yZUJnQ29sb3IiLCAicmVzdG9yZUN1cnNvckNvbG9yIiwgInJldmVyc2VJbmRleCIsICJrZXlwYWRBcHBsaWNhdGlvbk1vZGUiLCAia2V5cGFkTnVtZXJpY01vZGUiLCAiZnVsbFJlc2V0IiwgInNldGdMZXZlbCIsICJzZWxlY3REZWZhdWx0Q2hhcnNldCIsICJmbGFnIiwgIkNIQVJTRVRTIiwgInNlbGVjdENoYXJzZXQiLCAic2NyZWVuQWxpZ25tZW50UGF0dGVybiIsICJzZXRFcnJvckhhbmRsZXIiLCAic3RhdGUiLCAiZXJyb3IiLCAiRGNzSGFuZGxlciIsICJyZXF1ZXN0U3RhdHVzU3RyaW5nIiwgIlByb21pc2UiLCAicmFjZSIsICJyZXMiLCAicmVqIiwgInNldFRpbWVvdXQiLCAiY2F0Y2giLCAiZXJyIiwgImNvbnNvbGUiLCAiX2dldEN1cnJlbnRMaW5rSWQiLCAiZXh0ZW5kZWQiLCAidXJsSWQiLCAicmVzdWx0IiwgIndhc1BhdXNlZCIsICJfbG9nU2xvd1Jlc29sdmluZ0FzeW5jIiwgIkRFQlVHIiwgInByb3RvdHlwZSIsICJtYXAiLCAiU3RyaW5nIiwgImZyb21DaGFyQ29kZSIsICJqb2luIiwgInNwbGl0IiwgImNoYXJDb2RlQXQiLCAiY2xlYXJSYW5nZSIsICJsZW4iLCAiZGVjb2RlIiwgInN1YnN0cmluZyIsICJzdWJhcnJheSIsICJfcHJlc2VydmVTdGFjayIsICJ2aWV3cG9ydEVuZCIsICJ2aWV3cG9ydFN0YXJ0IiwgImNoV2lkdGgiLCAiY2hhcnNldCIsICJzY3JlZW5SZWFkZXJNb2RlIiwgIndyYXBhcm91bmRNb2RlIiwgImRlY1ByaXZhdGVNb2RlcyIsICJ3cmFwYXJvdW5kIiwgImluc2VydE1vZGUiLCAibW9kZXMiLCAiY3VyQXR0ciIsICJidWZmZXJSb3ciLCAibGluZXMiLCAibWFya0RpcnR5IiwgImdldFdpZHRoIiwgInNldENlbGxGcm9tQ29kZXBvaW50IiwgInByZWNlZGluZ0pvaW5TdGF0ZSIsICJwb3MiLCAiY2giLCAiY3VycmVudEluZm8iLCAiY2hhclByb3BlcnRpZXMiLCAiZXh0cmFjdFdpZHRoIiwgInNob3VsZEpvaW4iLCAiZXh0cmFjdFNob3VsZEpvaW4iLCAib2xkV2lkdGgiLCAic3RyaW5nRnJvbUNvZGVQb2ludCIsICJhZGRMaW5lVG9MaW5rIiwgIm9sZFJvdyIsICJvbGRDb2wiLCAiX2VyYXNlQXR0ckRhdGEiLCAiQnVmZmVyTGluZSIsICJjb3B5Q2VsbHNGcm9tIiwgImFkZENvZGVwb2ludFRvQ2VsbCIsICJkZWx0YSIsICJpbnNlcnRDZWxscyIsICJnZXROdWxsQ2VsbCIsICJOVUxMX0NFTExfQ09ERSIsICJOVUxMX0NFTExfV0lEVEgiLCAiaGFzQ29udGVudCIsICJjb252ZXJ0RW9sIiwgInJldmVyc2VXcmFwYXJvdW5kIiwgIl9yZXN0cmljdEN1cnNvciIsICJoYXNXaWR0aCIsICJvcmlnaW5hbFgiLCAibmV4dFN0b3AiLCAibWF4Q29sIiwgIm9yaWdpbiIsICJfc2V0Q3Vyc29yIiwgImRpZmZUb1RvcCIsICJfbW92ZUN1cnNvciIsICJkaWZmVG9Cb3R0b20iLCAicGFyYW0iLCAidGFicyIsICJwcmV2U3RvcCIsICJiZyIsICJjbGVhcldyYXAiLCAicmVzcGVjdFByb3RlY3QiLCAicmVwbGFjZUNlbGxzIiwgImZpbGwiLCAiY2xlYXJNYXJrZXJzIiwgImoiLCAiX2VyYXNlSW5CdWZmZXJMaW5lIiwgIl9yZXNldEJ1ZmZlckxpbmUiLCAic2Nyb2xsQmFja1NpemUiLCAidHJpbVN0YXJ0IiwgInJvdyIsICJzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0IiwgInNjcm9sbEJvdHRvbUFic29sdXRlIiwgImdldEJsYW5rTGluZSIsICJkZWxldGVDZWxscyIsICJqb2luU3RhdGUiLCAidGV4dCIsICJnZXRTdHJpbmciLCAiaWRhdGEiLCAiaXRleHQiLCAiY29kZVBvaW50QXQiLCAidGxlbmd0aCIsICJjb3B5V2l0aGluIiwgIl9pcyIsICJFU0MiLCAidGVybSIsICJ0ZXJtTmFtZSIsICJpbmRleE9mIiwgImFwcGxpY2F0aW9uQ3Vyc29yS2V5cyIsICJzZXRnQ2hhcnNldCIsICJERUZBVUxUX0NIQVJTRVQiLCAiY3Vyc29yQmxpbmsiLCAiYXBwbGljYXRpb25LZXlwYWQiLCAiYWN0aXZlUHJvdG9jb2wiLCAic2VuZEZvY3VzIiwgImFjdGl2ZUVuY29kaW5nIiwgImlzQ3Vyc29ySGlkZGVuIiwgImFjdGl2YXRlQWx0QnVmZmVyIiwgImlzQ3Vyc29ySW5pdGlhbGl6ZWQiLCAiYnJhY2tldGVkUGFzdGVNb2RlIiwgImFjdGl2YXRlTm9ybWFsQnVmZmVyIiwgImFuc2kiLCAiZG0iLCAibW91c2VQcm90b2NvbCIsICJtb3VzZUVuY29kaW5nIiwgImNzIiwgImFjdGl2ZSIsICJhbHQiLCAiYjJ2IiwgIm0iLCAiY29sb3IiLCAibW9kZSIsICJjMSIsICJjMiIsICJjMyIsICJBdHRyaWJ1dGVEYXRhIiwgImZyb21Db2xvclJHQiIsICJhdHRyIiwgImFjY3UiLCAiY1NwYWNlIiwgImFkdmFuY2UiLCAiaGFzU3ViUGFyYW1zIiwgInN1YnBhcmFtcyIsICJnZXRTdWJQYXJhbXMiLCAiZmciLCAiX3VwZGF0ZUF0dHJDb2xvciIsICJ1bmRlcmxpbmVDb2xvciIsICJzdHlsZSIsICJ1bmRlcmxpbmVTdHlsZSIsICJ1cGRhdGVFeHRlbmRlZCIsICJfcHJvY2Vzc1NHUjAiLCAiX3Byb2Nlc3NVbmRlcmxpbmUiLCAiX2V4dHJhY3RDb2xvciIsICJzYXZlZFgiLCAic2F2ZWRZIiwgInNhdmVkQ3VyQXR0ckRhdGEiLCAic2F2ZWRDaGFyc2V0IiwgImN1cnNvclN0eWxlIiwgImlzQmxpbmtpbmciLCAidG9wIiwgImJvdHRvbSIsICJzZWNvbmQiLCAiR0VUX1dJTl9TSVpFX1BJWEVMUyIsICJHRVRfQ0VMTF9TSVpFX1BJWEVMUyIsICJzaGlmdCIsICJfc2F2ZWRDaGFyc2V0IiwgInNsb3RzIiwgImlkeCIsICJzcGVjIiwgImV4ZWMiLCAicGFyc2VJbnQiLCAiaXNWYWxpZENvbG9ySW5kZXgiLCAidHlwZSIsICJwYXJzZUNvbG9yIiwgImFyZ3MiLCAiX2NyZWF0ZUh5cGVybGluayIsICJfZmluaXNoSHlwZXJsaW5rIiwgInVyaSIsICJwYXJzZWRQYXJhbXMiLCAiaWRQYXJhbUluZGV4IiwgImZpbmRJbmRleCIsICJzdGFydHNXaXRoIiwgInNsaWNlIiwgInJlZ2lzdGVyTGluayIsICJfc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IiLCAiY29sbGVjdEFuZEZsYWciLCAic2Nyb2xsUmVnaW9uSGVpZ2h0IiwgInNoaWZ0RWxlbWVudHMiLCAibGV2ZWwiLCAiY2VsbCIsICJjb250ZW50IiwgInlPZmZzZXQiLCAibWFya0FsbERpcnR5IiwgImlzUHJvdGVjdGVkIiwgInkxIiwgInkyIiwgIkUiLCAiZGlzcG9zZUFycmF5IiwgIl9kaXNwb3NhYmxlcyIsICJfaXNEaXNwb3NlZCIsICJfdmFsdWUiLCAiYXJyYXkiLCAiaXNOb2RlIiwgInByb2Nlc3MiLCAidXNlckFnZW50IiwgIm5hdmlnYXRvciIsICJwbGF0Zm9ybSIsICJpc0ZpcmVmb3giLCAiaW5jbHVkZXMiLCAiaXNMZWdhY3lFZGdlIiwgImlzU2FmYXJpIiwgInRlc3QiLCAibWFqb3JWZXJzaW9uIiwgIm1hdGNoIiwgImlzTWFjIiwgImlzSXBhZCIsICJpc0lwaG9uZSIsICJpc1dpbmRvd3MiLCAiaXNMaW51eCIsICJpc0Nocm9tZU9TIiwgIlRhc2tRdWV1ZSIsICJfdGFza3MiLCAiX2kiLCAidGFzayIsICJfc3RhcnQiLCAiZmx1c2giLCAiX2lkbGVDYWxsYmFjayIsICJfY2FuY2VsQ2FsbGJhY2siLCAiX3JlcXVlc3RDYWxsYmFjayIsICJfcHJvY2VzcyIsICJkZWFkbGluZSIsICJ0YXNrRHVyYXRpb24iLCAibG9uZ2VzdFRhc2siLCAibGFzdERlYWRsaW5lUmVtYWluaW5nIiwgInRpbWVSZW1haW5pbmciLCAiZGVhZGxpbmVSZW1haW5pbmciLCAiRGF0ZSIsICJub3ciLCAiYWJzIiwgInJvdW5kIiwgIlByaW9yaXR5VGFza1F1ZXVlIiwgIl9jcmVhdGVEZWFkbGluZSIsICJjbGVhclRpbWVvdXQiLCAiZHVyYXRpb24iLCAiSWRsZVRhc2tRdWV1ZSIsICJ3aW5kb3ciLCAicmVxdWVzdElkbGVDYWxsYmFjayIsICJjYW5jZWxJZGxlQ2FsbGJhY2siLCAiY29uc3RydWN0b3IiLCAiX3F1ZXVlIiwgImVucXVldWUiLCAiYnVmZmVyU2VydmljZSIsICJsYXN0Q2hhciIsICJDSEFSX0RBVEFfQ09ERV9JTkRFWCIsICJXSElURVNQQUNFX0NFTExfQ09ERSIsICJFeHRlbmRlZEF0dHJzIiwgIm5ld09iaiIsICJpc0ludmVyc2UiLCAiaXNCb2xkIiwgImlzVW5kZXJsaW5lIiwgImhhc0V4dGVuZGVkQXR0cnMiLCAiaXNCbGluayIsICJpc0ludmlzaWJsZSIsICJpc0l0YWxpYyIsICJpc0RpbSIsICJpc1N0cmlrZXRocm91Z2giLCAiaXNPdmVybGluZSIsICJnZXRGZ0NvbG9yTW9kZSIsICJnZXRCZ0NvbG9yTW9kZSIsICJpc0ZnUkdCIiwgImlzQmdSR0IiLCAiaXNGZ1BhbGV0dGUiLCAiaXNCZ1BhbGV0dGUiLCAiaXNGZ0RlZmF1bHQiLCAiaXNCZ0RlZmF1bHQiLCAiaXNBdHRyaWJ1dGVEZWZhdWx0IiwgImdldEZnQ29sb3IiLCAiZ2V0QmdDb2xvciIsICJpc0VtcHR5IiwgImdldFVuZGVybGluZUNvbG9yIiwgImdldFVuZGVybGluZUNvbG9yTW9kZSIsICJpc1VuZGVybGluZUNvbG9yUkdCIiwgImlzVW5kZXJsaW5lQ29sb3JQYWxldHRlIiwgImlzVW5kZXJsaW5lQ29sb3JEZWZhdWx0IiwgImdldFVuZGVybGluZVN0eWxlIiwgImdldFVuZGVybGluZVZhcmlhbnRPZmZzZXQiLCAidW5kZXJsaW5lVmFyaWFudE9mZnNldCIsICJleHQiLCAiX3VybElkIiwgIl9leHQiLCAiTUFYX0JVRkZFUl9TSVpFIiwgIl9oYXNTY3JvbGxiYWNrIiwgIm1hcmtlcnMiLCAiX251bGxDZWxsIiwgImZyb21DaGFyRGF0YSIsICJOVUxMX0NFTExfQ0hBUiIsICJfd2hpdGVzcGFjZUNlbGwiLCAiV0hJVEVTUEFDRV9DRUxMX0NIQVIiLCAiV0hJVEVTUEFDRV9DRUxMX1dJRFRIIiwgIl9pc0NsZWFyaW5nIiwgIl9tZW1vcnlDbGVhbnVwUXVldWUiLCAiX21lbW9yeUNsZWFudXBQb3NpdGlvbiIsICJfY29scyIsICJfcm93cyIsICJfZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCIsICJzZXR1cFRhYlN0b3BzIiwgImhhc1Njcm9sbGJhY2siLCAiaXNDdXJzb3JJblZpZXdwb3J0IiwgInJlbGF0aXZlWSIsICJjb3JyZWN0QnVmZmVyTGVuZ3RoIiwgInNjcm9sbGJhY2siLCAiZmlsbEF0dHIiLCAibmV3Q29scyIsICJuZXdSb3dzIiwgIm51bGxDZWxsIiwgImRpcnR5TWVtb3J5TGluZXMiLCAiYWRkVG9ZIiwgImFtb3VudFRvVHJpbSIsICJfaXNSZWZsb3dFbmFibGVkIiwgIl9yZWZsb3ciLCAiX2JhdGNoZWRNZW1vcnlDbGVhbnVwIiwgIm5vcm1hbFJ1biIsICJjb3VudGVkIiwgImNsZWFudXBNZW1vcnkiLCAiX3JlZmxvd0xhcmdlciIsICJfcmVmbG93U21hbGxlciIsICJ0b1JlbW92ZSIsICJyZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlIiwgIm5ld0xheW91dFJlc3VsdCIsICJyZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQiLCAicmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQiLCAibGF5b3V0IiwgIl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydCIsICJjb3VudFJlbW92ZWQiLCAidmlld3BvcnRBZGp1c3RtZW50cyIsICJ0b0luc2VydCIsICJjb3VudFRvSW5zZXJ0IiwgImdldFRyaW1tZWRMZW5ndGgiLCAid3JhcHBlZExpbmVzIiwgInVuc2hpZnQiLCAiYWJzb2x1dGVZIiwgImxhc3RMaW5lTGVuZ3RoIiwgImRlc3RMaW5lTGVuZ3RocyIsICJyZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMiLCAibGluZXNUb0FkZCIsICJ0cmltbWVkTGluZXMiLCAibmV3TGluZXMiLCAibmV3TGluZSIsICJkZXN0TGluZUluZGV4IiwgImRlc3RDb2wiLCAic3JjTGluZUluZGV4IiwgInNyY0NvbCIsICJjZWxsc1RvQ29weSIsICJ3cmFwcGVkTGluZXNJbmRleCIsICJnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgiLCAic2V0Q2VsbCIsICJpbnNlcnRFdmVudHMiLCAib3JpZ2luYWxMaW5lcyIsICJvcmlnaW5hbExpbmVzTGVuZ3RoIiwgIm9yaWdpbmFsTGluZUluZGV4IiwgIm5leHRUb0luc2VydEluZGV4IiwgIm5leHRUb0luc2VydCIsICJjb3VudEluc2VydGVkU29GYXIiLCAibmV4dEkiLCAiaW5zZXJ0Q291bnRFbWl0dGVkIiwgImxpbmVJbmRleCIsICJ0cmltUmlnaHQiLCAic3RhcnRDb2wiLCAiZW5kQ29sIiwgInRyYW5zbGF0ZVRvU3RyaW5nIiwgImZpcnN0IiwgImxhc3QiLCAidGFiU3RvcFdpZHRoIiwgImNsZWFyQWxsTWFya2VycyIsICJtYXJrZXIiLCAiTWFya2VyIiwgIm9uRGlzcG9zZSIsICJfcmVtb3ZlTWFya2VyIiwgIk9iamVjdCIsICJmcmVlemUiLCAiJHN0YXJ0SW5kZXgiLCAiZmlsbENlbGxEYXRhIiwgIl9jb21iaW5lZCIsICJfZXh0ZW5kZWRBdHRycyIsICJfZGF0YSIsICJjcCIsICJDSEFSX0RBVEFfQVRUUl9JTkRFWCIsICJDSEFSX0RBVEFfQ0hBUl9JTkRFWCIsICJDSEFSX0RBVEFfV0lEVEhfSU5ERVgiLCAiY29tYmluZWREYXRhIiwgImNvZGVQb2ludCIsICJ3aWR0aCIsICJhdHRycyIsICJsb2FkQ2VsbCIsICJieXRlTGVuZ3RoIiwgInVpbnQzMkNlbGxzIiwgImtleXMiLCAiZXh0S2V5cyIsICJlbCIsICJnZXROb0JnVHJpbW1lZExlbmd0aCIsICJzcmMiLCAiYXBwbHlJblJldmVyc2UiLCAic3JjRGF0YSIsICJzcmNDb21iaW5lZEtleXMiLCAib3V0Q29sdW1ucyIsICJjaGFycyIsICJlbmRzSW5OdWxsIiwgImZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSIsICJvbGRDb2xzIiwgImJ1ZmZlckFic29sdXRlWSIsICJzcmNUcmltbWVkVGluZUxlbmd0aCIsICJzcmNSZW1haW5pbmdDZWxscyIsICJkZXN0UmVtYWluaW5nQ2VsbHMiLCAiY291bnRUb1JlbW92ZSIsICJuZXh0VG9SZW1vdmVJbmRleCIsICJuZXh0VG9SZW1vdmVTdGFydCIsICJjb3VudFJlbW92ZWRTb0ZhciIsICJuZXdMYXlvdXQiLCAibmV3TGF5b3V0TGluZXMiLCAibmV3TGluZUxlbmd0aHMiLCAiY2VsbHNOZWVkZWQiLCAicmVkdWNlIiwgInNyY0xpbmUiLCAiY2VsbHNBdmFpbGFibGUiLCAib2xkVHJpbW1lZExlbmd0aCIsICJlbmRzV2l0aFdpZGUiLCAibGluZUxlbmd0aCIsICJCdWZmZXJTZXQiLCAiX29uQnVmZmVyQWN0aXZhdGUiLCAib25TcGVjaWZpY09wdGlvbkNoYW5nZSIsICJfbm9ybWFsIiwgIkJ1ZmZlciIsICJmaWxsVmlld3BvcnRSb3dzIiwgIl9hbHQiLCAiaW5hY3RpdmVCdWZmZXIiLCAibm9ybWFsIiwgIm9iaiIsICJzZXRGcm9tQ2hhckRhdGEiLCAiaXNDb21iaW5lZCIsICJnZXRDaGFycyIsICJnZXRDb2RlIiwgImNvbWJpbmVkIiwgImdldEFzQ2hhckRhdGEiLCAiREVGQVVMVF9DT0xPUiIsICJERUZBVUxUX0FUVFIiLCAiREVGQVVMVF9FWFQiLCAiX2lkIiwgImlzRGlzcG9zZWQiLCAiX25leHRJZCIsICJfb25EaXNwb3NlIiwgIkMiLCAiQzFfRVNDQVBFRCIsICJOVUwiLCAiU09IIiwgIlNUWCIsICJFVFgiLCAiRU9UIiwgIkVOUSIsICJBQ0siLCAiRExFIiwgIkRDMSIsICJEQzIiLCAiREMzIiwgIkRDNCIsICJOQUsiLCAiU1lOIiwgIkVUQiIsICJDQU4iLCAiRU0iLCAiU1VCIiwgIkZTIiwgIkdTIiwgIlJTIiwgIlVTIiwgIlNQIiwgIkRFTCIsICJQQUQiLCAiSE9QIiwgIkJQSCIsICJOQkgiLCAiU1NBIiwgIkVTQSIsICJIVEoiLCAiVlRTIiwgIlBMRCIsICJQTFUiLCAiUkkiLCAiU1MyIiwgIlNTMyIsICJEQ1MiLCAiUFUxIiwgIlBVMiIsICJTVFMiLCAiQ0NIIiwgIk1XIiwgIlNQQSIsICJFUEEiLCAiU09TIiwgIlNHQ0kiLCAiU0NJIiwgIkNTSSIsICJTVCIsICJPU0MiLCAiUE0iLCAiQVBDIiwgImNvZGVwb2ludCIsICJfaW50ZXJpbSIsICJpbnB1dCIsICJ0YXJnZXQiLCAic2l6ZSIsICJzdGFydFBvcyIsICJpbnRlcmltIiwgIlVpbnQ4QXJyYXkiLCAiYnl0ZTEiLCAiYnl0ZTIiLCAiYnl0ZTMiLCAiYnl0ZTQiLCAiZGlzY2FyZEludGVyaW0iLCAidG1wIiwgIm1pc3NpbmciLCAiZm91clN0b3AiLCAiQk1QX0NPTUJJTklORyIsICJISUdIX0NPTUJJTklORyIsICJ0YWJsZSIsICJ2ZXJzaW9uIiwgIm51bSIsICJ1Y3MiLCAibWlkIiwgInByZWNlZGluZyIsICJ3Y3dpZHRoIiwgImNyZWF0ZVByb3BlcnR5VmFsdWUiLCAiX2FjdGlvbiIsICJfY2FsbGJhY2tzIiwgIl9wZW5kaW5nRGF0YSIsICJfYnVmZmVyT2Zmc2V0IiwgIl9pc1N5bmNXcml0aW5nIiwgIl9zeW5jQ2FsbHMiLCAiX2RpZFVzZXJJbnB1dCIsICJjaHVuayIsICJjYiIsICJfaW5uZXJXcml0ZSIsICJsYXN0VGltZSIsICJzdGFydFRpbWUiLCAiY29udGludWF0aW9uIiwgInF1ZXVlTWljcm90YXNrIiwgInJlc29sdmUiLCAidGhlbiIsICJSR0JfUkVYIiwgIkhBU0hfUkVYIiwgInBhZCIsICJiaXRzIiwgInRvU3RyaW5nIiwgInMyIiwgImxvdyIsICJ0b0xvd2VyQ2FzZSIsICJiYXNlIiwgImFkdiIsICJQQVlMT0FEX0xJTUlUIiwgIkVNUFRZX0hBTkRMRVJTIiwgIl9oYW5kbGVycyIsICJjcmVhdGUiLCAiX2FjdGl2ZSIsICJfaWRlbnQiLCAiX2hhbmRsZXJGYiIsICJfc3RhY2siLCAibG9vcFBvc2l0aW9uIiwgImZhbGxUaHJvdWdoIiwgImhhbmRsZXJMaXN0IiwgImhhbmRsZXJJbmRleCIsICJ1bmhvb2siLCAiaG9vayIsICJwdXQiLCAidXRmMzJUb1N0cmluZyIsICJzdWNjZXNzIiwgImhhbmRsZXJSZXN1bHQiLCAiRU1QVFlfUEFSQU1TIiwgIlBhcmFtcyIsICJhZGRQYXJhbSIsICJfaGFuZGxlciIsICJfcGFyYW1zIiwgIl9oaXRMaW1pdCIsICJyZXQiLCAiVHJhbnNpdGlvblRhYmxlIiwgIm5leHQiLCAiY29kZXMiLCAiTk9OX0FTQ0lJX1BSSU5UQUJMRSIsICJWVDUwMF9UUkFOU0lUSU9OX1RBQkxFIiwgImJsdWVwcmludCIsICJhcHBseSIsICJ1bnVzZWQiLCAiUFJJTlRBQkxFUyIsICJFWEVDVVRBQkxFUyIsICJzdGF0ZXMiLCAic2V0RGVmYXVsdCIsICJhZGRNYW55IiwgImFkZCIsICJfdHJhbnNpdGlvbnMiLCAiaGFuZGxlcnMiLCAiaGFuZGxlclBvcyIsICJ0cmFuc2l0aW9uIiwgImNodW5rUG9zIiwgImluaXRpYWxTdGF0ZSIsICJjdXJyZW50U3RhdGUiLCAiX2NvbGxlY3QiLCAiX3ByaW50SGFuZGxlckZiIiwgIl9leGVjdXRlSGFuZGxlckZiIiwgIl9jc2lIYW5kbGVyRmIiLCAiX2VzY0hhbmRsZXJGYiIsICJfZXJyb3JIYW5kbGVyRmIiLCAiX3ByaW50SGFuZGxlciIsICJfZXhlY3V0ZUhhbmRsZXJzIiwgIl9jc2lIYW5kbGVycyIsICJfZXNjSGFuZGxlcnMiLCAiX29zY1BhcnNlciIsICJPc2NQYXJzZXIiLCAiX2Rjc1BhcnNlciIsICJEY3NQYXJzZXIiLCAiX2Vycm9ySGFuZGxlciIsICJmaW5hbFJhbmdlIiwgImludGVybWVkaWF0ZSIsICJmaW5hbENvZGUiLCAicmV2ZXJzZSIsICJjbGVhclByaW50SGFuZGxlciIsICJfaWRlbnRpZmllciIsICJyZWdpc3RlckhhbmRsZXIiLCAiY2xlYXJIYW5kbGVyIiwgInNldEhhbmRsZXJGYWxsYmFjayIsICJjbGVhckVycm9ySGFuZGxlciIsICJjb2xsZWN0IiwgImFib3J0IiwgImFkZFN1YlBhcmFtIiwgImFkZERpZ2l0IiwgImhhbmRsZXJzRXNjIiwgImpqIiwgIl9zdGF0ZSIsICJfcHV0IiwgIk1BWF9WQUxVRSIsICJ2YWx1ZXMiLCAiayIsICJtYXhTdWJQYXJhbXNMZW5ndGgiLCAiSW50MzJBcnJheSIsICJfc3ViUGFyYW1zIiwgIl9zdWJQYXJhbXNMZW5ndGgiLCAiX3N1YlBhcmFtc0lkeCIsICJVaW50MTZBcnJheSIsICJfcmVqZWN0RGlnaXRzIiwgIl9yZWplY3RTdWJEaWdpdHMiLCAiX2RpZ2l0SXNTdWIiLCAibmV3UGFyYW1zIiwgImdldFN1YlBhcmFtc0FsbCIsICJzdG9yZSIsICJjdXIiLCAiX2FkZG9ucyIsICJpbnN0YW5jZSIsICJ0ZXJtaW5hbCIsICJsb2FkZWRBZGRvbiIsICJfd3JhcHBlZEFkZG9uRGlzcG9zZSIsICJhY3RpdmF0ZSIsICJfYnVmZmVyIiwgImN1cnNvclkiLCAiY3Vyc29yWCIsICJ2aWV3cG9ydFkiLCAiYmFzZVkiLCAiQnVmZmVyTGluZUFwaVZpZXciLCAiX2xpbmUiLCAic3RhcnRDb2x1bW4iLCAiZW5kQ29sdW1uIiwgIkJ1ZmZlck5hbWVzcGFjZUFwaSIsICJfY29yZSIsICJfb25CdWZmZXJDaGFuZ2UiLCAib25CdWZmZXJDaGFuZ2UiLCAiQnVmZmVyQXBpVmlldyIsICJfYWx0ZXJuYXRlIiwgImFsdGVybmF0ZSIsICJpbml0IiwgInByb3ZpZGVyIiwgInZlcnNpb25zIiwgImFjdGl2ZVZlcnNpb24iLCAiaXNVc2VyU2Nyb2xsaW5nIiwgIl9jYWNoZWRCbGFua0xpbmUiLCAiZ2V0RmciLCAiZ2V0QmciLCAidG9wUm93IiwgImJvdHRvbVJvdyIsICJ3aWxsQnVmZmVyQmVUcmltbWVkIiwgImNvcHlGcm9tIiwgIm9sZFlkaXNwIiwgImdsZXZlbCIsICJfY2hhcnNldHMiLCAiREVGQVVMVF9QUk9UT0NPTFMiLCAiTk9ORSIsICJldmVudHMiLCAicmVzdHJpY3QiLCAiWDEwIiwgImJ1dHRvbiIsICJjdHJsIiwgIlZUMjAwIiwgIkRSQUciLCAiQU5ZIiwgImV2ZW50Q29kZSIsICJpc1NHUiIsICJERUZBVUxUX0VOQ09ESU5HUyIsICJERUZBVUxUIiwgImNvbCIsICJTR1IiLCAiU0dSX1BJWEVMUyIsICJfcHJvdG9jb2xzIiwgIl9lbmNvZGluZ3MiLCAiX2FjdGl2ZVByb3RvY29sIiwgIl9hY3RpdmVFbmNvZGluZyIsICJfbGFzdEV2ZW50IiwgIl9vblByb3RvY29sQ2hhbmdlIiwgIm9uUHJvdG9jb2xDaGFuZ2UiLCAibmFtZSIsICJhZGRQcm90b2NvbCIsICJhZGRFbmNvZGluZyIsICJwcm90b2NvbCIsICJlbmNvZGluZyIsICJhcmVNb3VzZUV2ZW50c0FjdGl2ZSIsICJfZXF1YWxFdmVudHMiLCAicmVwb3J0IiwgInRyaWdnZXJCaW5hcnlFdmVudCIsICJkb3duIiwgInVwIiwgImRyYWciLCAibW92ZSIsICJ3aGVlbCIsICJlMSIsICJlMiIsICJwaXhlbHMiLCAiREVGQVVMVF9NT0RFUyIsICJERUZBVUxUX0RFQ19QUklWQVRFX01PREVTIiwgIl9vblVzZXJJbnB1dCIsICJfb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b20iLCAiZGlzYWJsZVN0ZGluIiwgInNjcm9sbE9uVXNlcklucHV0IiwgIlNlcnZpY2VDb2xsZWN0aW9uIiwgImVudHJpZXMiLCAiX2VudHJpZXMiLCAiTWFwIiwgInNlcnZpY2UiLCAiaGFzIiwgIl9zZXJ2aWNlcyIsICJJSW5zdGFudGlhdGlvblNlcnZpY2UiLCAiY3RvciIsICJzZXJ2aWNlRGVwZW5kZW5jaWVzIiwgImdldFNlcnZpY2VEZXBlbmRlbmNpZXMiLCAic29ydCIsICJzZXJ2aWNlQXJncyIsICJkZXBlbmRlbmN5IiwgImZpcnN0U2VydmljZUFyZ1BvcyIsICJvcHRpb25zS2V5VG9Mb2dMZXZlbCIsICJ0cmFjZSIsICJUUkFDRSIsICJpbmZvIiwgIklORk8iLCAiRVJST1IiLCAib2ZmIiwgIk9GRiIsICJ0cmFjZUxvZ2dlciIsICJfbG9nTGV2ZWwiLCAiX3VwZGF0ZUxvZ0xldmVsIiwgIm9wdGlvbmFsUGFyYW1zIiwgIm1lc3NhZ2UiLCAiX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMiLCAibG9nZ2VyIiwgIl9sb2ciLCAibG9nIiwgIl90YXJnZXQiLCAiZGVzY3JpcHRvciIsICJmbiIsICJKU09OIiwgInN0cmluZ2lmeSIsICJERUZBVUxUX09QVElPTlMiLCAiY3Vyc29yV2lkdGgiLCAiY3Vyc29ySW5hY3RpdmVTdHlsZSIsICJjdXN0b21HbHlwaHMiLCAiZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMiLCAiZG9jdW1lbnRPdmVycmlkZSIsICJmYXN0U2Nyb2xsTW9kaWZpZXIiLCAiZmFzdFNjcm9sbFNlbnNpdGl2aXR5IiwgImZvbnRGYW1pbHkiLCAiZm9udFNpemUiLCAiZm9udFdlaWdodCIsICJmb250V2VpZ2h0Qm9sZCIsICJpZ25vcmVCcmFja2V0ZWRQYXN0ZU1vZGUiLCAibGluZUhlaWdodCIsICJsZXR0ZXJTcGFjaW5nIiwgImxpbmtIYW5kbGVyIiwgInNjcm9sbFNlbnNpdGl2aXR5IiwgInNtb290aFNjcm9sbER1cmF0aW9uIiwgIm1hY09wdGlvbklzTWV0YSIsICJtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbiIsICJtaW5pbXVtQ29udHJhc3RSYXRpbyIsICJhbGxvd1Byb3Bvc2VkQXBpIiwgImFsbG93VHJhbnNwYXJlbmN5IiwgInRoZW1lIiwgInJlc2NhbGVPdmVybGFwcGluZ0dseXBocyIsICJyaWdodENsaWNrU2VsZWN0c1dvcmQiLCAid29yZFNlcGFyYXRvciIsICJhbHRDbGlja01vdmVzQ3Vyc29yIiwgImNhbmNlbEV2ZW50cyIsICJvdmVydmlld1J1bGVyV2lkdGgiLCAiRk9OVF9XRUlHSFRfT1BUSU9OUyIsICJfb25PcHRpb25DaGFuZ2UiLCAib25PcHRpb25DaGFuZ2UiLCAiZGVmYXVsdE9wdGlvbnMiLCAibmV3VmFsdWUiLCAiX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24iLCAiX3NldHVwT3B0aW9ucyIsICJldmVudEtleSIsICJnZXR0ZXIiLCAicHJvcE5hbWUiLCAic2V0dGVyIiwgImRlc2MiLCAiZGVmaW5lUHJvcGVydHkiLCAiZmxvb3IiLCAiX2VudHJpZXNXaXRoSWQiLCAiX2RhdGFCeUxpbmtJZCIsICJhZGRNYXJrZXIiLCAiZW50cnkiLCAiX3JlbW92ZU1hcmtlckZyb21MaW5rIiwgImNhc3REYXRhIiwgIl9nZXRFbnRyeUlkS2V5IiwgImxpbmtJZCIsICJldmVyeSIsICJsaW5rRGF0YSIsICJkZWxldGUiLCAiRElfVEFSR0VUIiwgIkRJX0RFUEVOREVOQ0lFUyIsICJzZXJ2aWNlUmVnaXN0cnkiLCAiZGVjb3JhdG9yIiwgImFyZ3VtZW50cyIsICJjcmVhdGVEZWNvcmF0b3IiLCAiSURlY29yYXRpb25TZXJ2aWNlIiwgIl9wcm92aWRlcnMiLCAiX29uQ2hhbmdlIiwgIm9uQ2hhbmdlIiwgImRlZmF1bHRQcm92aWRlciIsICJVbmljb2RlVjYiLCAiX2FjdGl2ZVByb3ZpZGVyIiwgInByZWNlZGluZ0luZm8iLCAiVGVybWluYWwiLCAiX29uQmVsbCIsICJvbkJlbGwiLCAiX29uQTExeUNoYXJFbWl0dGVyIiwgIl9vbkExMXlUYWJFbWl0dGVyIiwgImN1cnNvcllPZmZzZXQiLCAiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwgIl9fd2VicGFja19yZXF1aXJlX18iLCAibW9kdWxlSWQiLCAiY2FjaGVkTW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIl9fd2VicGFja19tb2R1bGVzX18iLCAiQ09OU1RSVUNUT1JfT05MWV9PUFRJT05TIiwgIl9hZGRvbk1hbmFnZXIiLCAiQWRkb25NYW5hZ2VyIiwgIl9wdWJsaWNPcHRpb25zIiwgIl9jaGVja1JlYWRvbmx5T3B0aW9ucyIsICJfY2hlY2tQcm9wb3NlZEFwaSIsICJwYXJzZXIiLCAiUGFyc2VyQXBpIiwgInVuaWNvZGUiLCAiVW5pY29kZUFwaSIsICJtb3VzZVRyYWNraW5nTW9kZSIsICJhcHBsaWNhdGlvbkN1cnNvcktleXNNb2RlIiwgImFwcGxpY2F0aW9uS2V5cGFkTW9kZSIsICJvcmlnaW5Nb2RlIiwgInJldmVyc2VXcmFwYXJvdW5kTW9kZSIsICJzZW5kRm9jdXNNb2RlIiwgImNvbHVtbnMiLCAiX3ZlcmlmeUludGVnZXJzIiwgInJlZ2lzdGVyTWFya2VyIiwgInNjcm9sbFBhZ2VzIiwgInNjcm9sbFRvTGluZSIsICJhZGRvbiIsICJsb2FkQWRkb24iLCAiSW5maW5pdHkiLCAiaSIsICJ2IiwgImsiLCAiYXV0aENsaWVudCIsICJnbG9iYWwiLCAiZ2xvYmFsVGhpcyIsICJzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMiLCAiU2hhZG93Um9vdCIsICJTaGFkeUNTUyIsICJuYXRpdmVTaGFkb3ciLCAiRG9jdW1lbnQiLCAicHJvdG90eXBlIiwgIkNTU1N0eWxlU2hlZXQiLCAiY29uc3RydWN0aW9uVG9rZW4iLCAiU3ltYm9sIiwgImNzc1RhZ0NhY2hlIiwgIldlYWtNYXAiLCAiQ1NTUmVzdWx0IiwgImNzc1RleHQiLCAic3RyaW5ncyIsICJzYWZlVG9rZW4iLCAidGhpcyIsICJFcnJvciIsICJfc3RyaW5ncyIsICJzdHlsZVNoZWV0IiwgIl9zdHlsZVNoZWV0IiwgImNhY2hlYWJsZSIsICJsZW5ndGgiLCAiZ2V0IiwgInJlcGxhY2VTeW5jIiwgInNldCIsICJ0b1N0cmluZyIsICJ1bnNhZmVDU1MiLCAidmFsdWUiLCAiU3RyaW5nIiwgImFkb3B0U3R5bGVzIiwgInJlbmRlclJvb3QiLCAic3R5bGVzIiwgInN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyIsICJhZG9wdGVkU3R5bGVTaGVldHMiLCAibWFwIiwgInMiLCAiQ1NTU3R5bGVTaGVldCIsICJzdHlsZVNoZWV0IiwgInN0eWxlIiwgImRvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAibm9uY2UiLCAiZ2xvYmFsIiwgInNldEF0dHJpYnV0ZSIsICJ0ZXh0Q29udGVudCIsICJjc3NUZXh0IiwgImFwcGVuZENoaWxkIiwgImdldENvbXBhdGlibGVTdHlsZSIsICJzaGVldCIsICJydWxlIiwgImNzc1J1bGVzIiwgInVuc2FmZUNTUyIsICJpcyIsICJkZWZpbmVQcm9wZXJ0eSIsICJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCAiZ2V0T3duUHJvcGVydHlOYW1lcyIsICJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCAiZ2V0UHJvdG90eXBlT2YiLCAiT2JqZWN0IiwgImdsb2JhbCIsICJnbG9iYWxUaGlzIiwgInRydXN0ZWRUeXBlcyIsICJlbXB0eVN0cmluZ0ZvckJvb2xlYW5BdHRyaWJ1dGUiLCAiZW1wdHlTY3JpcHQiLCAicG9seWZpbGxTdXBwb3J0IiwgInJlYWN0aXZlRWxlbWVudFBvbHlmaWxsU3VwcG9ydCIsICJKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5IiwgInByb3AiLCAiX29iaiIsICJkZWZhdWx0Q29udmVydGVyIiwgInZhbHVlIiwgInR5cGUiLCAiQm9vbGVhbiIsICJBcnJheSIsICJKU09OIiwgInN0cmluZ2lmeSIsICJmcm9tVmFsdWUiLCAiTnVtYmVyIiwgInBhcnNlIiwgImUiLCAibm90RXF1YWwiLCAib2xkIiwgImRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uIiwgImF0dHJpYnV0ZSIsICJTdHJpbmciLCAiY29udmVydGVyIiwgInJlZmxlY3QiLCAidXNlRGVmYXVsdCIsICJoYXNDaGFuZ2VkIiwgIlN5bWJvbCIsICJtZXRhZGF0YSIsICJsaXRQcm9wZXJ0eU1ldGFkYXRhIiwgIldlYWtNYXAiLCAiUmVhY3RpdmVFbGVtZW50IiwgIkhUTUxFbGVtZW50IiwgImluaXRpYWxpemVyIiwgInRoaXMiLCAiX19wcmVwYXJlIiwgIl9pbml0aWFsaXplcnMiLCAicHVzaCIsICJvYnNlcnZlZEF0dHJpYnV0ZXMiLCAiZmluYWxpemUiLCAiX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIiwgImtleXMiLCAibmFtZSIsICJvcHRpb25zIiwgInN0YXRlIiwgInByb3RvdHlwZSIsICJoYXNPd25Qcm9wZXJ0eSIsICJjcmVhdGUiLCAid3JhcHBlZCIsICJlbGVtZW50UHJvcGVydGllcyIsICJzZXQiLCAibm9BY2Nlc3NvciIsICJrZXkiLCAiZGVzY3JpcHRvciIsICJnZXRQcm9wZXJ0eURlc2NyaXB0b3IiLCAiZ2V0IiwgInYiLCAib2xkVmFsdWUiLCAiY2FsbCIsICJyZXF1ZXN0VXBkYXRlIiwgImNvbmZpZ3VyYWJsZSIsICJlbnVtZXJhYmxlIiwgInN1cGVyQ3RvciIsICJNYXAiLCAiZmluYWxpemVkIiwgInByb3BzIiwgInByb3BlcnRpZXMiLCAicHJvcEtleXMiLCAicCIsICJjcmVhdGVQcm9wZXJ0eSIsICJhdHRyIiwgIl9fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5IiwgImVsZW1lbnRTdHlsZXMiLCAiZmluYWxpemVTdHlsZXMiLCAic3R5bGVzIiwgImlzQXJyYXkiLCAiU2V0IiwgImZsYXQiLCAiSW5maW5pdHkiLCAicmV2ZXJzZSIsICJzIiwgInVuc2hpZnQiLCAiZ2V0Q29tcGF0aWJsZVN0eWxlIiwgInRvTG93ZXJDYXNlIiwgImNvbnN0cnVjdG9yIiwgInN1cGVyIiwgIl9faW5zdGFuY2VQcm9wZXJ0aWVzIiwgImlzVXBkYXRlUGVuZGluZyIsICJoYXNVcGRhdGVkIiwgIl9fcmVmbGVjdGluZ1Byb3BlcnR5IiwgIl9faW5pdGlhbGl6ZSIsICJfX3VwZGF0ZVByb21pc2UiLCAiUHJvbWlzZSIsICJyZXMiLCAiZW5hYmxlVXBkYXRpbmciLCAiXyRjaGFuZ2VkUHJvcGVydGllcyIsICJfX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMiLCAiZm9yRWFjaCIsICJpIiwgImNvbnRyb2xsZXIiLCAiX19jb250cm9sbGVycyIsICJhZGQiLCAicmVuZGVyUm9vdCIsICJpc0Nvbm5lY3RlZCIsICJob3N0Q29ubmVjdGVkIiwgImRlbGV0ZSIsICJpbnN0YW5jZVByb3BlcnRpZXMiLCAic2l6ZSIsICJjcmVhdGVSZW5kZXJSb290IiwgInNoYWRvd1Jvb3QiLCAiYXR0YWNoU2hhZG93IiwgInNoYWRvd1Jvb3RPcHRpb25zIiwgImFkb3B0U3R5bGVzIiwgImNvbm5lY3RlZENhbGxiYWNrIiwgImMiLCAiX3JlcXVlc3RlZFVwZGF0ZSIsICJkaXNjb25uZWN0ZWRDYWxsYmFjayIsICJob3N0RGlzY29ubmVjdGVkIiwgIl9vbGQiLCAiXyRhdHRyaWJ1dGVUb1Byb3BlcnR5IiwgImF0dHJWYWx1ZSIsICJ0b0F0dHJpYnV0ZSIsICJyZW1vdmVBdHRyaWJ1dGUiLCAic2V0QXR0cmlidXRlIiwgImN0b3IiLCAicHJvcE5hbWUiLCAiZ2V0UHJvcGVydHlPcHRpb25zIiwgImZyb21BdHRyaWJ1dGUiLCAiY29udmVydGVkVmFsdWUiLCAiX19kZWZhdWx0VmFsdWVzIiwgIm5ld1ZhbHVlIiwgImhhc0F0dHJpYnV0ZSIsICJfJGNoYW5nZVByb3BlcnR5IiwgIl9fZW5xdWV1ZVVwZGF0ZSIsICJpbml0aWFsaXplVmFsdWUiLCAiaGFzIiwgIl9fcmVmbGVjdGluZ1Byb3BlcnRpZXMiLCAicmVqZWN0IiwgInJlc3VsdCIsICJzY2hlZHVsZVVwZGF0ZSIsICJwZXJmb3JtVXBkYXRlIiwgInNob3VsZFVwZGF0ZSIsICJjaGFuZ2VkUHJvcGVydGllcyIsICJ3aWxsVXBkYXRlIiwgImhvc3RVcGRhdGUiLCAidXBkYXRlIiwgIl9fbWFya1VwZGF0ZWQiLCAiXyRkaWRVcGRhdGUiLCAiX2NoYW5nZWRQcm9wZXJ0aWVzIiwgImhvc3RVcGRhdGVkIiwgImZpcnN0VXBkYXRlZCIsICJ1cGRhdGVkIiwgInVwZGF0ZUNvbXBsZXRlIiwgImdldFVwZGF0ZUNvbXBsZXRlIiwgIl9fcHJvcGVydHlUb0F0dHJpYnV0ZSIsICJtb2RlIiwgInJlYWN0aXZlRWxlbWVudFZlcnNpb25zIiwgImdsb2JhbCIsICJnbG9iYWxUaGlzIiwgInRydXN0ZWRUeXBlcyIsICJwb2xpY3kiLCAiY3JlYXRlUG9saWN5IiwgImNyZWF0ZUhUTUwiLCAicyIsICJib3VuZEF0dHJpYnV0ZVN1ZmZpeCIsICJtYXJrZXIiLCAiTWF0aCIsICJyYW5kb20iLCAidG9GaXhlZCIsICJzbGljZSIsICJtYXJrZXJNYXRjaCIsICJub2RlTWFya2VyIiwgImQiLCAiZG9jdW1lbnQiLCAiY3JlYXRlTWFya2VyIiwgImNyZWF0ZUNvbW1lbnQiLCAiaXNQcmltaXRpdmUiLCAidmFsdWUiLCAiaXNBcnJheSIsICJBcnJheSIsICJpc0l0ZXJhYmxlIiwgIlN5bWJvbCIsICJpdGVyYXRvciIsICJTUEFDRV9DSEFSIiwgInRleHRFbmRSZWdleCIsICJjb21tZW50RW5kUmVnZXgiLCAiY29tbWVudDJFbmRSZWdleCIsICJ0YWdFbmRSZWdleCIsICJSZWdFeHAiLCAic2luZ2xlUXVvdGVBdHRyRW5kUmVnZXgiLCAiZG91YmxlUXVvdGVBdHRyRW5kUmVnZXgiLCAicmF3VGV4dEVsZW1lbnQiLCAidGFnIiwgInR5cGUiLCAic3RyaW5ncyIsICJ2YWx1ZXMiLCAiXyRsaXRUeXBlJCIsICJodG1sIiwgInN2ZyIsICJtYXRobWwiLCAibm9DaGFuZ2UiLCAiZm9yIiwgIm5vdGhpbmciLCAidGVtcGxhdGVDYWNoZSIsICJXZWFrTWFwIiwgIndhbGtlciIsICJjcmVhdGVUcmVlV2Fsa2VyIiwgInRydXN0RnJvbVRlbXBsYXRlU3RyaW5nIiwgInRzYSIsICJzdHJpbmdGcm9tVFNBIiwgImhhc093blByb3BlcnR5IiwgIkVycm9yIiwgImdldFRlbXBsYXRlSHRtbCIsICJsIiwgImxlbmd0aCIsICJhdHRyTmFtZXMiLCAicmF3VGV4dEVuZFJlZ2V4IiwgInJlZ2V4IiwgImkiLCAiYXR0ck5hbWUiLCAibWF0Y2giLCAiYXR0ck5hbWVFbmRJbmRleCIsICJsYXN0SW5kZXgiLCAiZXhlYyIsICJ0ZXN0IiwgImVuZCIsICJzdGFydHNXaXRoIiwgInB1c2giLCAiVGVtcGxhdGUiLCAiY29uc3RydWN0b3IiLCAib3B0aW9ucyIsICJub2RlIiwgInRoaXMiLCAicGFydHMiLCAibm9kZUluZGV4IiwgImF0dHJOYW1lSW5kZXgiLCAicGFydENvdW50IiwgImVsIiwgImNyZWF0ZUVsZW1lbnQiLCAiY3VycmVudE5vZGUiLCAiY29udGVudCIsICJ3cmFwcGVyIiwgImZpcnN0Q2hpbGQiLCAicmVwbGFjZVdpdGgiLCAiY2hpbGROb2RlcyIsICJuZXh0Tm9kZSIsICJub2RlVHlwZSIsICJoYXNBdHRyaWJ1dGVzIiwgIm5hbWUiLCAiZ2V0QXR0cmlidXRlTmFtZXMiLCAiZW5kc1dpdGgiLCAicmVhbE5hbWUiLCAic3RhdGljcyIsICJnZXRBdHRyaWJ1dGUiLCAic3BsaXQiLCAibSIsICJpbmRleCIsICJjdG9yIiwgIlByb3BlcnR5UGFydCIsICJCb29sZWFuQXR0cmlidXRlUGFydCIsICJFdmVudFBhcnQiLCAiQXR0cmlidXRlUGFydCIsICJyZW1vdmVBdHRyaWJ1dGUiLCAidGFnTmFtZSIsICJ0ZXh0Q29udGVudCIsICJlbXB0eVNjcmlwdCIsICJhcHBlbmQiLCAiZGF0YSIsICJpbmRleE9mIiwgIl9vcHRpb25zIiwgImlubmVySFRNTCIsICJyZXNvbHZlRGlyZWN0aXZlIiwgInBhcnQiLCAicGFyZW50IiwgImF0dHJpYnV0ZUluZGV4IiwgImN1cnJlbnREaXJlY3RpdmUiLCAiX19kaXJlY3RpdmVzIiwgIl9fZGlyZWN0aXZlIiwgIm5leHREaXJlY3RpdmVDb25zdHJ1Y3RvciIsICJfJGluaXRpYWxpemUiLCAiXyRyZXNvbHZlIiwgIlRlbXBsYXRlSW5zdGFuY2UiLCAidGVtcGxhdGUiLCAiXyRwYXJ0cyIsICJfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4iLCAiXyR0ZW1wbGF0ZSIsICJfJHBhcmVudCIsICJwYXJlbnROb2RlIiwgIl8kaXNDb25uZWN0ZWQiLCAiZnJhZ21lbnQiLCAiY3JlYXRpb25TY29wZSIsICJpbXBvcnROb2RlIiwgInBhcnRJbmRleCIsICJ0ZW1wbGF0ZVBhcnQiLCAiQ2hpbGRQYXJ0IiwgIm5leHRTaWJsaW5nIiwgIkVsZW1lbnRQYXJ0IiwgIl8kc2V0VmFsdWUiLCAiX19pc0Nvbm5lY3RlZCIsICJzdGFydE5vZGUiLCAiZW5kTm9kZSIsICJfJGNvbW1pdHRlZFZhbHVlIiwgIl8kc3RhcnROb2RlIiwgIl8kZW5kTm9kZSIsICJpc0Nvbm5lY3RlZCIsICJkaXJlY3RpdmVQYXJlbnQiLCAiXyRjbGVhciIsICJfY29tbWl0VGV4dCIsICJfY29tbWl0VGVtcGxhdGVSZXN1bHQiLCAiX2NvbW1pdE5vZGUiLCAiX2NvbW1pdEl0ZXJhYmxlIiwgImluc2VydEJlZm9yZSIsICJfaW5zZXJ0IiwgImNyZWF0ZVRleHROb2RlIiwgInJlc3VsdCIsICJfJGdldFRlbXBsYXRlIiwgImgiLCAiX3VwZGF0ZSIsICJpbnN0YW5jZSIsICJfY2xvbmUiLCAiZ2V0IiwgInNldCIsICJpdGVtUGFydHMiLCAiaXRlbVBhcnQiLCAiaXRlbSIsICJzdGFydCIsICJmcm9tIiwgIl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQiLCAibiIsICJyZW1vdmUiLCAiZWxlbWVudCIsICJmaWxsIiwgIlN0cmluZyIsICJ2YWx1ZUluZGV4IiwgIm5vQ29tbWl0IiwgImNoYW5nZSIsICJ2IiwgIl9jb21taXRWYWx1ZSIsICJzZXRBdHRyaWJ1dGUiLCAidG9nZ2xlQXR0cmlidXRlIiwgInN1cGVyIiwgIm5ld0xpc3RlbmVyIiwgIm9sZExpc3RlbmVyIiwgInNob3VsZFJlbW92ZUxpc3RlbmVyIiwgImNhcHR1cmUiLCAib25jZSIsICJwYXNzaXZlIiwgInNob3VsZEFkZExpc3RlbmVyIiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJldmVudCIsICJjYWxsIiwgImhvc3QiLCAiaGFuZGxlRXZlbnQiLCAiXyRMSCIsICJfYm91bmRBdHRyaWJ1dGVTdWZmaXgiLCAiX21hcmtlciIsICJfbWFya2VyTWF0Y2giLCAiX0hUTUxfUkVTVUxUIiwgIl9nZXRUZW1wbGF0ZUh0bWwiLCAiX1RlbXBsYXRlSW5zdGFuY2UiLCAiX2lzSXRlcmFibGUiLCAiX3Jlc29sdmVEaXJlY3RpdmUiLCAiX0NoaWxkUGFydCIsICJfQXR0cmlidXRlUGFydCIsICJfQm9vbGVhbkF0dHJpYnV0ZVBhcnQiLCAiX0V2ZW50UGFydCIsICJfUHJvcGVydHlQYXJ0IiwgIl9FbGVtZW50UGFydCIsICJwb2x5ZmlsbFN1cHBvcnQiLCAibGl0SHRtbFBvbHlmaWxsU3VwcG9ydCIsICJsaXRIdG1sVmVyc2lvbnMiLCAicmVuZGVyIiwgImNvbnRhaW5lciIsICJwYXJ0T3duZXJOb2RlIiwgInJlbmRlckJlZm9yZSIsICJnbG9iYWwiLCAiZ2xvYmFsVGhpcyIsICJMaXRFbGVtZW50IiwgIlJlYWN0aXZlRWxlbWVudCIsICJjb25zdHJ1Y3RvciIsICJ0aGlzIiwgInJlbmRlck9wdGlvbnMiLCAiaG9zdCIsICJfX2NoaWxkUGFydCIsICJjcmVhdGVSZW5kZXJSb290IiwgInJlbmRlclJvb3QiLCAic3VwZXIiLCAicmVuZGVyQmVmb3JlIiwgImZpcnN0Q2hpbGQiLCAiY2hhbmdlZFByb3BlcnRpZXMiLCAidmFsdWUiLCAicmVuZGVyIiwgImhhc1VwZGF0ZWQiLCAiaXNDb25uZWN0ZWQiLCAidXBkYXRlIiwgImNvbm5lY3RlZENhbGxiYWNrIiwgInNldENvbm5lY3RlZCIsICJkaXNjb25uZWN0ZWRDYWxsYmFjayIsICJub0NoYW5nZSIsICJsaXRFbGVtZW50SHlkcmF0ZVN1cHBvcnQiLCAicG9seWZpbGxTdXBwb3J0IiwgImxpdEVsZW1lbnRQb2x5ZmlsbFN1cHBvcnQiLCAiZ2xvYmFsIiwgImxpdEVsZW1lbnRWZXJzaW9ucyIsICJwdXNoIiwgImN1c3RvbUVsZW1lbnQiLCAidGFnTmFtZSIsICJjbGFzc09yVGFyZ2V0IiwgImNvbnRleHQiLCAiYWRkSW5pdGlhbGl6ZXIiLCAiY3VzdG9tRWxlbWVudHMiLCAiZGVmaW5lIiwgImRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uIiwgImF0dHJpYnV0ZSIsICJ0eXBlIiwgIlN0cmluZyIsICJjb252ZXJ0ZXIiLCAiZGVmYXVsdENvbnZlcnRlciIsICJyZWZsZWN0IiwgImhhc0NoYW5nZWQiLCAibm90RXF1YWwiLCAic3RhbmRhcmRQcm9wZXJ0eSIsICJvcHRpb25zIiwgInRhcmdldCIsICJjb250ZXh0IiwgImtpbmQiLCAibWV0YWRhdGEiLCAicHJvcGVydGllcyIsICJnbG9iYWxUaGlzIiwgImxpdFByb3BlcnR5TWV0YWRhdGEiLCAiZ2V0IiwgInNldCIsICJNYXAiLCAiT2JqZWN0IiwgImNyZWF0ZSIsICJ3cmFwcGVkIiwgIm5hbWUiLCAidiIsICJvbGRWYWx1ZSIsICJjYWxsIiwgInRoaXMiLCAicmVxdWVzdFVwZGF0ZSIsICJfJGNoYW5nZVByb3BlcnR5IiwgInZhbHVlIiwgIkVycm9yIiwgInByb3BlcnR5IiwgInByb3RvT3JUYXJnZXQiLCAibmFtZU9yQ29udGV4dCIsICJwcm90byIsICJoYXNPd25Qcm9wZXJ0eSIsICJjb25zdHJ1Y3RvciIsICJjcmVhdGVQcm9wZXJ0eSIsICJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCAic3RhdGUiLCAib3B0aW9ucyIsICJwcm9wZXJ0eSIsICJhdHRyaWJ1dGUiLCAiX0NoaWxkUGFydCIsICJDaGlsZFBhcnQiLCAiXyRMSCIsICJpc1NpbmdsZUV4cHJlc3Npb24iLCAicGFydCIsICJzdHJpbmdzIiwgIlBhcnRUeXBlIiwgIkFUVFJJQlVURSIsICJDSElMRCIsICJQUk9QRVJUWSIsICJCT09MRUFOX0FUVFJJQlVURSIsICJFVkVOVCIsICJFTEVNRU5UIiwgImRpcmVjdGl2ZSIsICJjIiwgInZhbHVlcyIsICJfJGxpdERpcmVjdGl2ZSQiLCAiRGlyZWN0aXZlIiwgIl9wYXJ0SW5mbyIsICJfJGlzQ29ubmVjdGVkIiwgInRoaXMiLCAiXyRwYXJlbnQiLCAicGFydCIsICJwYXJlbnQiLCAiYXR0cmlidXRlSW5kZXgiLCAiX19wYXJ0IiwgIl9fYXR0cmlidXRlSW5kZXgiLCAicHJvcHMiLCAidXBkYXRlIiwgIl9wYXJ0IiwgInJlbmRlciIsICJub3RpZnlDaGlsZHJlbkNvbm5lY3RlZENoYW5nZWQiLCAicGFyZW50IiwgImlzQ29ubmVjdGVkIiwgImNoaWxkcmVuIiwgIl8kZGlzY29ubmVjdGFibGVDaGlsZHJlbiIsICJvYmoiLCAicmVtb3ZlRGlzY29ubmVjdGFibGVGcm9tUGFyZW50IiwgIl8kcGFyZW50IiwgImRlbGV0ZSIsICJzaXplIiwgImFkZERpc2Nvbm5lY3RhYmxlVG9QYXJlbnQiLCAiU2V0IiwgImhhcyIsICJhZGQiLCAiaW5zdGFsbERpc2Nvbm5lY3RBUEkiLCAicmVwYXJlbnREaXNjb25uZWN0YWJsZXMiLCAibmV3UGFyZW50IiwgInRoaXMiLCAibm90aWZ5Q2hpbGRQYXJ0Q29ubmVjdGVkQ2hhbmdlZCIsICJpc0NsZWFyaW5nVmFsdWUiLCAiZnJvbVBhcnRJbmRleCIsICJ2YWx1ZSIsICJfJGNvbW1pdHRlZFZhbHVlIiwgIkFycmF5IiwgImlzQXJyYXkiLCAiaSIsICJsZW5ndGgiLCAidHlwZSIsICJQYXJ0VHlwZSIsICJDSElMRCIsICJfJG5vdGlmeUNvbm5lY3Rpb25DaGFuZ2VkIiwgIl8kcmVwYXJlbnREaXNjb25uZWN0YWJsZXMiLCAiQXN5bmNEaXJlY3RpdmUiLCAiRGlyZWN0aXZlIiwgImNvbnN0cnVjdG9yIiwgInBhcnQiLCAiYXR0cmlidXRlSW5kZXgiLCAic3VwZXIiLCAiXyRpbml0aWFsaXplIiwgIl8kaXNDb25uZWN0ZWQiLCAiaXNDbGVhcmluZ0RpcmVjdGl2ZSIsICJyZWNvbm5lY3RlZCIsICJkaXNjb25uZWN0ZWQiLCAiaXNTaW5nbGVFeHByZXNzaW9uIiwgIl9fcGFydCIsICJfJHNldFZhbHVlIiwgIm5ld1ZhbHVlcyIsICJfX2F0dHJpYnV0ZUluZGV4IiwgImNyZWF0ZVJlZiIsICJSZWYiLCAibGFzdEVsZW1lbnRGb3JDb250ZXh0QW5kQ2FsbGJhY2siLCAiV2Vha01hcCIsICJyZWYiLCAiZGlyZWN0aXZlIiwgIkFzeW5jRGlyZWN0aXZlIiwgIl9yZWYiLCAibm90aGluZyIsICJwYXJ0IiwgInJlZkNoYW5nZWQiLCAidGhpcyIsICJfdXBkYXRlUmVmVmFsdWUiLCAidW5kZWZpbmVkIiwgIl9sYXN0RWxlbWVudEZvclJlZiIsICJfZWxlbWVudCIsICJfY29udGV4dCIsICJvcHRpb25zIiwgImhvc3QiLCAiZWxlbWVudCIsICJpc0Nvbm5lY3RlZCIsICJjb250ZXh0IiwgImdsb2JhbFRoaXMiLCAibGFzdEVsZW1lbnRGb3JDYWxsYmFjayIsICJnZXQiLCAic2V0IiwgImNhbGwiLCAidmFsdWUiLCAiZGlzY29ubmVjdGVkIiwgInJlY29ubmVjdGVkIiwgImkiLCAiYSIsICJiIiwgImUiLCAibG9nZ2VyIiwgImxvZ2dlciIsICJpIiwgImxvZ2dlciIsICJpIiwgImUiLCAidCIsICJYdGVybVRlcm1pbmFsIiwgInIiLCAiZyIsICJiIiwgIm4iLCAiaSIsICJlIiwgIm4iLCAiciIsICJ0IiwgImxvZ2dlciIsICJtb25hY28iLCAibG9nZ2VyIiwgImkiLCAiZSIsICJuIiwgInIiLCAidCIsICJpIiwgImUiLCAiciIsICJ0Il0KfQo=
